import { animate, state, style, transition, trigger, } from '@angular/animations';
import { Component, ContentChildren, EventEmitter, HostListener, Input, Output, } from '@angular/core';
import { OptionComponent } from './option/option.component';
import { SelectionModel } from '@angular/cdk/collections';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/cdk/overlay";
export class SelectComponent {
    set value(value) {
        this.selectionModel.clear();
        if (value) {
            this.selectionModel.select(value);
        }
    }
    get value() {
        return this.selectionModel.selected[0] || null;
    }
    open() {
        this.isOpen = !this.isOpen;
    }
    close() {
        this.isOpen = false;
    }
    constructor() {
        this.label = '';
        this.selectionModel = new SelectionModel();
        this.opened = new EventEmitter();
        this.closed = new EventEmitter();
        this.isOpen = false;
    }
    ngAfterContentInit() {
        this.highlightSelectedOptions(this.value);
    }
    onPanelAnimationDone({ fromState, toState }) {
        if (fromState === 'void' && toState === null && this.isOpen) {
            this.opened.emit();
        }
        if (fromState === null && toState === 'void' && !this.isOpen) {
            this.closed.emit();
        }
    }
    highlightSelectedOptions(value) {
        this.findOptionsByValue(value)?.highlightAsSelected;
    }
    findOptionsByValue(value) {
        return this.options && this.options.find((o) => o.value === value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.0", ngImport: i0, type: SelectComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.0.0", type: SelectComponent, selector: "lib-select", inputs: { label: "label", value: "value" }, outputs: { opened: "opened", closed: "closed" }, host: { listeners: { "click": "open()" } }, queries: [{ propertyName: "options", predicate: OptionComponent, descendants: true }], ngImport: i0, template: "<div class=\"label\">{{ label }}</div>\r\n<div class=\"control\" cdkOverlayOrigin #origin=\"cdkOverlayOrigin\">\r\n  <span class=\"selected-value\" [ngClass]=\"{ emty: !value }\">{{\r\n    value || \"Nothing is selected...\"\r\n  }}</span>\r\n  <span class=\"drop-down-icon\">\uD83D\uDC47</span>\r\n</div>\r\n\r\n<ng-template\r\n  cdkConnectedOverlay\r\n  [cdkConnectedOverlayOrigin]=\"origin\"\r\n  [cdkConnectedOverlayOpen]=\"isOpen\"\r\n  [cdkConne\r\n  ctedOverlayOffsetY]=\"8\"\r\n  [cdkConnectedOverlayOffsetX]=\"-11\"\r\n  cdkConnectedOverlayHasBackdrop\r\n  cdkConnectedOverlayBackdropClass=\"cdk-overlay-transparent-backdrop\"\r\n  (backdropClick)=\"close()\"\r\n  (detach)=\"close()\"\r\n>\r\n  <div\r\n    class=\"panel\"\r\n    [@dropDown]\r\n    (@dropDown.done)=\"onPanelAnimationDone($event)\"\r\n  >\r\n    <ng-content ></ng-content>\r\n  </div>\r\n</ng-template>\r\n", styles: [":host{display:flex;justify-content:flex-start;flex-direction:column;border:var(--color-text, #ccc) solid 2px;padding:5px 10px;box-sizing:border-box;border-radius:var(--border-radius, 10px);min-width:250px}:host:hover{cursor:pointer;background-color:var(--color-background, #eceff1)}:host:hover .selected-value{transform:scale(.9)}:host.select-panel-open{position:relative;z-index:1001}:host.disabled{opacity:.5;pointer-events:none;-webkit-user-select:none;user-select:none}.label{font-size:13px;font-weight:800;color:var(--color-text)}.control{width:100%;display:flex;justify-content:space-between;align-items:center}.selected-value{font-size:16px;margin-right:15px;transition:transform .2s;transform-origin:left;width:100%}.selected-value.empty{opacity:.6}.select-search{border:none;padding:0;background:transparent;outline:none}.panel{min-width:250px;padding:5px 10px;box-sizing:border-box;border-radius:var(--border-radius, 10px);border:var(--color-text, #ccc) solid 2px;background-color:#fff;transform-origin:top;min-height:45px;max-height:180px;overflow:auto}.clear-button{font-size:10px;background-color:transparent;padding:1px 3px;border:none;width:40px;margin:0 3px;font-weight:300;opacity:.7}.clear-button:hover{background-color:var(--color-backgroud-darker, #cfd8dc);opacity:1}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.CdkConnectedOverlay, selector: "[cdk-connected-overlay], [connected-overlay], [cdkConnectedOverlay]", inputs: ["cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayPositionStrategy", "cdkConnectedOverlayOffsetX", "cdkConnectedOverlayOffsetY", "cdkConnectedOverlayWidth", "cdkConnectedOverlayHeight", "cdkConnectedOverlayMinWidth", "cdkConnectedOverlayMinHeight", "cdkConnectedOverlayBackdropClass", "cdkConnectedOverlayPanelClass", "cdkConnectedOverlayViewportMargin", "cdkConnectedOverlayScrollStrategy", "cdkConnectedOverlayOpen", "cdkConnectedOverlayDisableClose", "cdkConnectedOverlayTransformOriginOn", "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayLockPosition", "cdkConnectedOverlayFlexibleDimensions", "cdkConnectedOverlayGrowAfterOpen", "cdkConnectedOverlayPush", "cdkConnectedOverlayDisposeOnNavigation"], outputs: ["backdropClick", "positionChange", "attach", "detach", "overlayKeydown", "overlayOutsideClick"], exportAs: ["cdkConnectedOverlay"] }, { kind: "directive", type: i2.CdkOverlayOrigin, selector: "[cdk-overlay-origin], [overlay-origin], [cdkOverlayOrigin]", exportAs: ["cdkOverlayOrigin"] }], animations: [
            trigger('dropDown', [
                state('void', style({ transform: 'scaleY(0)', opacity: 0 })),
                state('*', style({ transform: 'scaleY(1)', opacity: 1 })),
                transition(':enter', [animate('320ms cubic-bezier(0, 1, 0.45, 1.34)')]),
                transition(':leave', [
                    animate('420ms cubic-bezier(0.88,-0.7, 0.86, 0.85)'),
                ]),
            ]),
        ] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.0", ngImport: i0, type: SelectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-select', standalone: false, animations: [
                        trigger('dropDown', [
                            state('void', style({ transform: 'scaleY(0)', opacity: 0 })),
                            state('*', style({ transform: 'scaleY(1)', opacity: 1 })),
                            transition(':enter', [animate('320ms cubic-bezier(0, 1, 0.45, 1.34)')]),
                            transition(':leave', [
                                animate('420ms cubic-bezier(0.88,-0.7, 0.86, 0.85)'),
                            ]),
                        ]),
                    ], template: "<div class=\"label\">{{ label }}</div>\r\n<div class=\"control\" cdkOverlayOrigin #origin=\"cdkOverlayOrigin\">\r\n  <span class=\"selected-value\" [ngClass]=\"{ emty: !value }\">{{\r\n    value || \"Nothing is selected...\"\r\n  }}</span>\r\n  <span class=\"drop-down-icon\">\uD83D\uDC47</span>\r\n</div>\r\n\r\n<ng-template\r\n  cdkConnectedOverlay\r\n  [cdkConnectedOverlayOrigin]=\"origin\"\r\n  [cdkConnectedOverlayOpen]=\"isOpen\"\r\n  [cdkConne\r\n  ctedOverlayOffsetY]=\"8\"\r\n  [cdkConnectedOverlayOffsetX]=\"-11\"\r\n  cdkConnectedOverlayHasBackdrop\r\n  cdkConnectedOverlayBackdropClass=\"cdk-overlay-transparent-backdrop\"\r\n  (backdropClick)=\"close()\"\r\n  (detach)=\"close()\"\r\n>\r\n  <div\r\n    class=\"panel\"\r\n    [@dropDown]\r\n    (@dropDown.done)=\"onPanelAnimationDone($event)\"\r\n  >\r\n    <ng-content ></ng-content>\r\n  </div>\r\n</ng-template>\r\n", styles: [":host{display:flex;justify-content:flex-start;flex-direction:column;border:var(--color-text, #ccc) solid 2px;padding:5px 10px;box-sizing:border-box;border-radius:var(--border-radius, 10px);min-width:250px}:host:hover{cursor:pointer;background-color:var(--color-background, #eceff1)}:host:hover .selected-value{transform:scale(.9)}:host.select-panel-open{position:relative;z-index:1001}:host.disabled{opacity:.5;pointer-events:none;-webkit-user-select:none;user-select:none}.label{font-size:13px;font-weight:800;color:var(--color-text)}.control{width:100%;display:flex;justify-content:space-between;align-items:center}.selected-value{font-size:16px;margin-right:15px;transition:transform .2s;transform-origin:left;width:100%}.selected-value.empty{opacity:.6}.select-search{border:none;padding:0;background:transparent;outline:none}.panel{min-width:250px;padding:5px 10px;box-sizing:border-box;border-radius:var(--border-radius, 10px);border:var(--color-text, #ccc) solid 2px;background-color:#fff;transform-origin:top;min-height:45px;max-height:180px;overflow:auto}.clear-button{font-size:10px;background-color:transparent;padding:1px 3px;border:none;width:40px;margin:0 3px;font-weight:300;opacity:.7}.clear-button:hover{background-color:var(--color-backgroud-darker, #cfd8dc);opacity:1}\n"] }]
        }], ctorParameters: () => [], propDecorators: { label: [{
                type: Input
            }], value: [{
                type: Input
            }], opened: [{
                type: Output
            }], closed: [{
                type: Output
            }], open: [{
                type: HostListener,
                args: ['click']
            }], options: [{
                type: ContentChildren,
                args: [OptionComponent, { descendants: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NsaWVudC9hbGktbGliL3NyYy9saWIvc2VsZWN0L3NlbGVjdC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9jbGllbnQvYWxpLWxpYi9zcmMvbGliL3NlbGVjdC9zZWxlY3QuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLE9BQU8sRUFDUCxLQUFLLEVBQ0wsS0FBSyxFQUNMLFVBQVUsRUFDVixPQUFPLEdBQ1IsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBRUwsU0FBUyxFQUNULGVBQWUsRUFDZixZQUFZLEVBQ1osWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEdBRVAsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzVELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7OztBQWtCMUQsTUFBTSxPQUFPLGVBQWU7SUFJMUIsSUFDSSxLQUFLLENBQUMsS0FBb0I7UUFDNUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM1QixJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ1YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEMsQ0FBQztJQUNILENBQUM7SUFDRCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztJQUNqRCxDQUFDO0lBVUQsSUFBSTtRQUNGLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQzdCLENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQU1E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QUFFLElBQUksRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgYW5pbWF0ZSxcclxuICBzdGF0ZSxcclxuICBzdHlsZSxcclxuICB0cmFuc2l0aW9uLFxyXG4gIHRyaWdnZXIsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XHJcbmltcG9ydCB7XHJcbiAgQWZ0ZXJDb250ZW50SW5pdCxcclxuICBDb21wb25lbnQsXHJcbiAgQ29udGVudENoaWxkcmVuLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBIb3N0TGlzdGVuZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25Jbml0LFxyXG4gIE91dHB1dCxcclxuICBRdWVyeUxpc3QsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9wdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vb3B0aW9uL29wdGlvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTZWxlY3Rpb25Nb2RlbCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2xsZWN0aW9ucyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1zZWxlY3QnLFxyXG4gIHN0YW5kYWxvbmU6IGZhbHNlLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsOiAnLi9zZWxlY3QuY29tcG9uZW50LnNjc3MnLFxyXG4gIGFuaW1hdGlvbnM6IFtcclxuICAgIHRyaWdnZXIoJ2Ryb3BEb3duJywgW1xyXG4gICAgICBzdGF0ZSgndm9pZCcsIHN0eWxlKHsgdHJhbnNmb3JtOiAnc2NhbGVZKDApJywgb3BhY2l0eTogMCB9KSksXHJcbiAgICAgIHN0YXRlKCcqJywgc3R5bGUoeyB0cmFuc2Zvcm06ICdzY2FsZVkoMSknLCBvcGFjaXR5OiAxIH0pKSxcclxuICAgICAgdHJhbnNpdGlvbignOmVudGVyJywgW2FuaW1hdGUoJzMyMG1zIGN1YmljLWJlemllcigwLCAxLCAwLjQ1LCAxLjM0KScpXSksXHJcbiAgICAgIHRyYW5zaXRpb24oJzpsZWF2ZScsIFtcclxuICAgICAgICBhbmltYXRlKCc0MjBtcyBjdWJpYy1iZXppZXIoMC44OCwtMC43LCAwLjg2LCAwLjg1KScpLFxyXG4gICAgICBdKSxcclxuICAgIF0pLFxyXG4gIF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0IHtcclxuICBASW5wdXQoKVxyXG4gIGxhYmVsID0gJyc7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGVsLmNsZWFyKCk7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbC5zZWxlY3QodmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2RlbC5zZWxlY3RlZFswXSB8fCBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZWxlY3Rpb25Nb2RlbCA9IG5ldyBTZWxlY3Rpb25Nb2RlbDxzdHJpbmc+KCk7XHJcbiAgXHJcbiAgQE91dHB1dCgpXHJcbiAgcmVhZG9ubHkgb3BlbmVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIEBPdXRwdXQoKVxyXG4gIHJlYWRvbmx5IGNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignY2xpY2snKVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIEBDb250ZW50Q2hpbGRyZW4oT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pXHJcbiAgb3B0aW9ucyE6IFF1ZXJ5TGlzdDxPcHRpb25Db21wb25lbnQ+O1xyXG4gIGlzT3BlbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRPcHRpb25zKHRoaXMudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgb25QYW5lbEFuaW1hdGlvbkRvbmUoeyBmcm9tU3RhdGUsIHRvU3RhdGUgfTogQW5pbWF0aW9uRXZlbnQgfCBhbnkpIHtcclxuICAgIGlmIChmcm9tU3RhdGUgPT09ICd2b2lkJyAmJiB0b1N0YXRlID09PSBudWxsICYmIHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIHRoaXMub3BlbmVkLmVtaXQoKTtcclxuICAgIH1cclxuICAgIGlmIChmcm9tU3RhdGUgPT09IG51bGwgJiYgdG9TdGF0ZSA9PT0gJ3ZvaWQnICYmICF0aGlzLmlzT3Blbikge1xyXG4gICAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhpZ2hsaWdodFNlbGVjdGVkT3B0aW9ucyh2YWx1ZTogc3RyaW5nIHwgbnVsbCkge1xyXG4gICAgdGhpcy5maW5kT3B0aW9uc0J5VmFsdWUodmFsdWUpPy5oaWdobGlnaHRBc1NlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBmaW5kT3B0aW9uc0J5VmFsdWUodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmZpbmQoKG8pID0+IG8udmFsdWUgPT09IHZhbHVlKTtcclxuICB9XHJcbn1cclxuIiwiPGRpdiBjbGFzcz1cImxhYmVsXCI+e3sgbGFiZWwgfX08L2Rpdj5cclxuPGRpdiBjbGFzcz1cImNvbnRyb2xcIiBjZGtPdmVybGF5T3JpZ2luICNvcmlnaW49XCJjZGtPdmVybGF5T3JpZ2luXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJzZWxlY3RlZC12YWx1ZVwiIFtuZ0NsYXNzXT1cInsgZW10eTogIXZhbHVlIH1cIj57e1xyXG4gICAgdmFsdWUgfHwgXCJOb3RoaW5nIGlzIHNlbGVjdGVkLi4uXCJcclxuICB9fTwvc3Bhbj5cclxuICA8c3BhbiBjbGFzcz1cImRyb3AtZG93bi1pY29uXCI+8J+Rhzwvc3Bhbj5cclxuPC9kaXY+XHJcblxyXG48bmctdGVtcGxhdGVcclxuICBjZGtDb25uZWN0ZWRPdmVybGF5XHJcbiAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW5dPVwib3JpZ2luXCJcclxuICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9wZW5dPVwiaXNPcGVuXCJcclxuICBbY2RrQ29ubmVcclxuICBjdGVkT3ZlcmxheU9mZnNldFldPVwiOFwiXHJcbiAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPZmZzZXRYXT1cIi0xMVwiXHJcbiAgY2RrQ29ubmVjdGVkT3ZlcmxheUhhc0JhY2tkcm9wXHJcbiAgY2RrQ29ubmVjdGVkT3ZlcmxheUJhY2tkcm9wQ2xhc3M9XCJjZGstb3ZlcmxheS10cmFuc3BhcmVudC1iYWNrZHJvcFwiXHJcbiAgKGJhY2tkcm9wQ2xpY2spPVwiY2xvc2UoKVwiXHJcbiAgKGRldGFjaCk9XCJjbG9zZSgpXCJcclxuPlxyXG4gIDxkaXZcclxuICAgIGNsYXNzPVwicGFuZWxcIlxyXG4gICAgW0Bkcm9wRG93bl1cclxuICAgIChAZHJvcERvd24uZG9uZSk9XCJvblBhbmVsQW5pbWF0aW9uRG9uZSgkZXZlbnQpXCJcclxuICA+XHJcbiAgICA8bmctY29udGVudCA+PC9uZy1jb250ZW50PlxyXG4gIDwvZGl2PlxyXG48L25nLXRlbXBsYXRlPlxyXG4iXX0=