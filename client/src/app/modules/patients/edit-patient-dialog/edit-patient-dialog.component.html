<div mat-dialog-title>
  <img
    crossorigin="anonymous"
    [src]="patientData.profile_img"
    class="rounded-full"
    width="50"
    height="50"
    [alt]="" />
  <div class="text-sm font-medium flex items-center">
    {{ patientData.first_name }}
  </div>
</div>
<mat-dialog-content class="mat-typography">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="mt-4">
      <!-- *****first_name***** -->
      <mat-form-field
        data-testing="first_name"
        appearance="outline"
        class="w-full">
        <mat-label>first_name</mat-label>
        <input
          type="text"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="first_name"
          placeholder="first_name" />
        <!-- Error handling -->
        <mat-error
          *ngIf="
            first_name?.hasError('first_name') &&
            !first_name?.hasError('required')
          "
          >Please enter a valid first_name</mat-error
        >
        <mat-error *ngIf="first_name?.hasError('required')"
          >first_name is <strong>required</strong></mat-error
        >
        <mat-error *ngIf="form.controls.first_name.hasError('minlength')"
          >first_name is too short
          <strong>{{
            form.controls.first_name.getError('minlength')?.requiredLength
          }}</strong></mat-error
        >
        <mat-error *ngIf="first_name?.hasError('banWords')"
          >The value
          <strong>{{ first_name?.getError('banWords').bannedWord }} </strong>is
          banned</mat-error
        >
      </mat-form-field>

      <!-- *****last_name***** -->
      <mat-form-field
        data-testing="last_name"
        appearance="outline"
        class="w-full">
        <mat-label>last_name</mat-label>
        <input
          type="text"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="last_name"
          placeholder="last_name" />
        <!-- Error handling -->
        <mat-error
          *ngIf="
            last_name?.hasError('last_name') && !last_name?.hasError('required')
          "
          >Please enter a valid last_name</mat-error
        >
        <mat-error *ngIf="last_name?.hasError('required')"
          >last_name is <strong>required</strong></mat-error
        >
        <mat-error *ngIf="form.controls.last_name.hasError('minlength')"
          >last_name is too short
          <strong>{{
            form.controls.last_name.getError('minlength')?.requiredLength
          }}</strong></mat-error
        >
        <mat-error *ngIf="last_name?.hasError('banWords')"
          >The value
          <strong>{{ last_name?.getError('banWords').bannedWord }} </strong>is
          banned</mat-error
        >
      </mat-form-field>

      <!-- *****Year of birth***** -->
      <mat-form-field appearance="outline" class="w-full mb-1">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          formControlName="date_of_birth" />
        <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
        <mat-datepicker-toggle matIconSuffix [for]="picker">
          <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <!-- *****email***** -->
      <mat-form-field data-testing="email" appearance="outline" class="w-full">
        <mat-label>Email</mat-label>
        <input
          type="email"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="email"
          placeholder="email"
          class="w-full"
          readonly />
        <!-- Error handling -->
        <mat-error
          *ngIf="email?.hasError('email') && !email?.hasError('required')"
          >Please enter a valid email address</mat-error
        >
        <mat-error *ngIf="email?.hasError('required')"
          >email is <strong>required</strong></mat-error
        >
      </mat-form-field>
      <!-- *****BloodPressure***** -->
      <mat-form-field
        data-testing="BloodPressure"
        appearance="outline"
        class="w-full">
        <mat-label>BloodPressure</mat-label>
        <input
          type="text"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="blood_pressure"
          placeholder="BloodPressure" />
        <!-- Error handling -->
        <mat-error
          *ngIf="
            bloodPressure?.hasError('bloodPressure') &&
            !bloodPressure?.hasError('required')
          "
          >Please enter a valid bloodPressure</mat-error
        >
        <mat-error *ngIf="bloodPressure?.hasError('required')"
          >bloodPressure is <strong>required</strong></mat-error
        >
        <mat-error *ngIf="form.controls.blood_pressure.hasError('minlength')"
          >bloodPressure is too short
          <strong>{{
            form.controls.blood_pressure.getError('minlength')?.requiredLength
          }}</strong></mat-error
        >
        <mat-error *ngIf="bloodPressure?.hasError('banWords')"
          >The value
          <strong>{{ bloodPressure?.getError('banWords').bannedWord }} </strong
          >is banned</mat-error
        >
      </mat-form-field>
      <!-- *****Injury/Condition***** -->
      <mat-form-field data-testing="injury" appearance="outline" class="w-full">
        <mat-label>Injury/Condition</mat-label>
        <input
          type="text"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="injury_condition"
          placeholder="Injury/Condition" />
        <!-- Error handling -->
        <mat-error
          *ngIf="
            injury_condition?.hasError('injury_condition') &&
            !injury_condition?.hasError('required')
          "
          >Please enter a valid injury</mat-error
        >
        <mat-error *ngIf="injury_condition?.hasError('required')"
          >injury is <strong>required</strong></mat-error
        >
        <mat-error *ngIf="form.controls.injury_condition.hasError('minlength')"
          >injury is too short
          <strong>{{
            form.controls.injury_condition.getError('minlength')?.requiredLength
          }}</strong></mat-error
        >
        <mat-error *ngIf="injury_condition?.hasError('banWords')"
          >The value
          <strong
            >{{ injury_condition?.getError('banWords').bannedWord }} </strong
          >is banned</mat-error
        >
      </mat-form-field>
      <!-- *****BloodGroup***** -->
      <mat-form-field
        data-testing="BloodGroup"
        appearance="outline"
        class="w-full">
        <mat-label>BloodGroup</mat-label>
        <mat-select
          formControlName="blood_group"
          name="g"
          [(value)]="defaultValueBloodGroup"
         >
          <mat-option
            *ngFor="let blood of bloodGroups; trackBy: trackByFn"
            [value]="blood.id"
            >{{ blood.value }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      <!-- *****Address***** -->
      <mat-form-field
        data-testing="Address"
        appearance="outline"
        class="w-full">
        <mat-label>Address</mat-label>
        <input
          type="text"
          matInput
          [errorStateMatcher]="matcher"
          formControlName="address"
          placeholder="address" />
        <!-- Error handling -->
        <mat-error
          *ngIf="address?.hasError('address') && !address?.hasError('required')"
          >Please enter a valid address</mat-error
        >
        <mat-error *ngIf="address?.hasError('required')"
          >address is <strong>required</strong></mat-error
        >
        <mat-error *ngIf="form.controls.address.hasError('minlength')"
          >address is too short
          <strong>{{
            form.controls.address.getError('minlength')?.requiredLength
          }}</strong></mat-error
        >
        <mat-error *ngIf="address?.hasError('banWords')"
          >The value
          <strong>{{ address?.getError('banWords').bannedWord }} </strong>is
          banned</mat-error
        >
      </mat-form-field>

      <mat-dialog-actions>
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button mat-dialog-close cdkFocusInitial type="submit">
          Update
        </button>
      </mat-dialog-actions>
    </div>
  </form>
</mat-dialog-content>
