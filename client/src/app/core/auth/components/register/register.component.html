<app-auth-layout>
  <div class="register-container">
    <div class="register-card">
      <!-- Header Section -->
      <div class="register-header">
        <div class="logo-section">
          <div class="logo-icon">
            <mat-icon>local_hospital</mat-icon>
          </div>
          <h1 class="app-title">Clinical Ali</h1>
        </div>
        <p class="welcome-text">Create your account to get started</p>
      </div>

      <!-- Role Selection -->
      <div class="role-selection">
        <h3 class="role-title">I am a</h3>
        <div class="role-buttons">
          <button
            [ngClass]="{ 'role-active': selectedRole === 'clinic' }"
            class="role-button"
            type="button"
            (click)="setRole('clinic')">
            <mat-icon>business</mat-icon>
            <span>Clinic</span>
          </button>
          <button
            [ngClass]="{ 'role-active': selectedRole === 'doctor' }"
            class="role-button"
            type="button"
            (click)="setRole('doctor')">
            <mat-icon>medical_services</mat-icon>
            <span>Doctor</span>
          </button>
          <button
            [ngClass]="{ 'role-active': selectedRole === 'patient' }"
            class="role-button"
            type="button"
            (click)="setRole('patient')">
            <mat-icon>person</mat-icon>
            <span>Patient</span>
          </button>
        </div>
      </div>
      <!-- Patient Registration Form -->
      <form
        [formGroup]="patientForm"
        *ngIf="selectedRole === 'patient'"
        (ngSubmit)="onSubmit()"
        class="register-form">
        
        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>First Name</mat-label>
              <input matInput formControlName="first_name" placeholder="Enter your first name" />
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Last Name</mat-label>
              <input matInput formControlName="last_name" placeholder="Enter your last name" />
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter your email" />
            <mat-icon matSuffix>email</mat-icon>
          </mat-form-field>
        </div>

        <div formGroupName="password" class="password-group">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                type="password"
                formControlName="password"
                [errorStateMatcher]="matcher"
                placeholder="Create a password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="clininPassword?.hasError('required')">
                Password is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="clininPassword?.hasError('minlength')">
                Password must be at least 
                <strong>{{ clininPassword?.getError('minlength')?.requiredLength }}</strong> characters
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Confirm Password</mat-label>
              <input
                type="password"
                matInput
                [errorStateMatcher]="matcher"
                formControlName="confirmPassword"
                placeholder="Confirm your password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="!clinicConfirmPassword?.hasError('passwordShouldMatch')">
                Passwords don't match
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phone" placeholder="Enter your phone number" />
            <mat-icon matSuffix>phone</mat-icon>
          </mat-form-field>
        </div>

        <button
          class="register-button"
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="!patientForm.valid">
          <mat-icon>person_add</mat-icon>
          <span>Create Patient Account</span>
        </button>
      </form>

      <!-- Doctor Registration Form -->
      <form
        [formGroup]="doctorForm"
        *ngIf="selectedRole === 'doctor'"
        (ngSubmit)="onSubmit()"
        class="register-form">
        
        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>First Name</mat-label>
              <input matInput formControlName="first_name" placeholder="Enter your first name" />
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Last Name</mat-label>
              <input matInput formControlName="last_name" placeholder="Enter your last name" />
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter your email" />
            <mat-icon matSuffix>email</mat-icon>
          </mat-form-field>
        </div>

        <div formGroupName="password" class="password-group">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                type="password"
                formControlName="password"
                [errorStateMatcher]="matcher"
                placeholder="Create a password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="clininPassword?.hasError('required')">
                Password is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="clininPassword?.hasError('minlength')">
                Password must be at least 
                <strong>{{ clininPassword?.getError('minlength')?.requiredLength }}</strong> characters
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Confirm Password</mat-label>
              <input
                type="password"
                matInput
                [errorStateMatcher]="matcher"
                formControlName="confirmPassword"
                placeholder="Confirm your password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="!clinicConfirmPassword?.hasError('passwordShouldMatch')">
                Passwords don't match
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phone" placeholder="Enter your phone number" />
            <mat-icon matSuffix>phone</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Medical Specialization</mat-label>
            <input matInput formControlName="specialization" placeholder="e.g., Cardiology, Dermatology" />
            <mat-icon matSuffix>medical_services</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Medical License Number</mat-label>
            <input matInput formControlName="licenseNumber" placeholder="Enter your license number" />
            <mat-icon matSuffix>verified</mat-icon>
          </mat-form-field>
        </div>

        <button
          class="register-button"
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="!doctorForm.valid">
          <mat-icon>medical_services</mat-icon>
          <span>Create Doctor Account</span>
        </button>
      </form>

      <!-- Clinic Registration Form -->
      <form
        [formGroup]="clinicForm"
        *ngIf="selectedRole === 'clinic'"
        (ngSubmit)="onSubmit()"
        class="register-form">
        
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Clinic Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter clinic name" />
            <mat-icon matSuffix>business</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Owner Name</mat-label>
            <input matInput formControlName="owner_name" placeholder="Enter owner's full name" />
            <mat-icon matSuffix>person</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter clinic email" />
            <mat-icon matSuffix>email</mat-icon>
          </mat-form-field>
        </div>

        <div formGroupName="password" class="password-group">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                type="password"
                formControlName="password"
                [errorStateMatcher]="matcher"
                placeholder="Create a password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="clininPassword?.hasError('required')">
                Password is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="clininPassword?.hasError('minlength')">
                Password must be at least 
                <strong>{{ clininPassword?.getError('minlength')?.requiredLength }}</strong> characters
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Confirm Password</mat-label>
              <input
                type="password"
                matInput
                [errorStateMatcher]="matcher"
                formControlName="confirmPassword"
                placeholder="Confirm your password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="!clinicConfirmPassword?.hasError('passwordShouldMatch')">
                Passwords don't match
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phone" placeholder="Enter clinic phone number" />
            <mat-icon matSuffix>phone</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Address</mat-label>
            <textarea matInput formControlName="address" placeholder="Enter clinic address" rows="3"></textarea>
            <mat-icon matSuffix>location_on</mat-icon>
          </mat-form-field>
        </div>

        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>City</mat-label>
              <input matInput formControlName="city" placeholder="Enter city" />
              <mat-icon matSuffix>location_city</mat-icon>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>State</mat-label>
              <input matInput formControlName="state" placeholder="Enter state" />
              <mat-icon matSuffix>map</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>ZIP Code</mat-label>
              <input matInput formControlName="zip_code" placeholder="Enter ZIP code" />
              <mat-icon matSuffix>markunread_mailbox</mat-icon>
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Country</mat-label>
              <input matInput formControlName="country" placeholder="Enter country" />
              <mat-icon matSuffix>public</mat-icon>
            </mat-form-field>
          </div>
        </div>

        <button
          class="register-button"
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="!clinicForm.valid">
          <mat-icon>business</mat-icon>
          <span>Create Clinic Account</span>
        </button>
      </form>

      <!-- Login Link -->
      <div class="login-section">
        <p class="login-text">
          Already have an account?
          <a routerLink="/auth/login" class="login-link">
            Sign In
          </a>
        </p>
      </div>
    </div>
  </div>
</app-auth-layout>
