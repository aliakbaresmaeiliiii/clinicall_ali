<form [formGroup]="form" (ngSubmit)="onSubmit()" class="mt-4">
  <div class="desktop:grid grid-cols-2 gap-4 w-[70rem]">
    <!-- *****firstName***** -->
    <mat-form-field data-testing="firstName" appearance="outline" class="w-full">
      <mat-label>firstName</mat-label>
      <input
        type="text"
        matInput
        [errorStateMatcher]="matcher"
        formControlName="firstName"
        placeholder="firstName" />
      <!-- Error handling -->
      <mat-error *ngIf="firstName?.hasError('firstName') && !firstName?.hasError('required')"
        >Please enter a valid firstName</mat-error
      >
      <mat-error *ngIf="firstName?.hasError('required')"
        >firstName is <strong>required</strong></mat-error
      >
      <mat-error *ngIf="firstName?.hasError('minlength')"
        >firstName is too short
        <strong>{{
          firstName?.getError('minlength')?.requiredLength
        }}</strong></mat-error
      >
      <mat-error *ngIf="firstName?.hasError('banWords')"
        >The value
        <strong>{{ firstName?.getError('banWords').bannedWord }} </strong>is
        banned</mat-error
      >
    </mat-form-field>

    <!-- *****lastName***** -->
    <mat-form-field data-testing="lastName" appearance="outline" class="w-full">
      <mat-label>lastName</mat-label>
      <input
        type="text"
        matInput
        [errorStateMatcher]="matcher"
        formControlName="lastName"
        placeholder="lastName" />
      <!-- Error handling -->
      <mat-error
        *ngIf="
          lastName?.hasError('lastName') && !lastName?.hasError('required')
        "
        >Please enter a valid lastName</mat-error
      >
      <mat-error *ngIf="lastName?.hasError('required')"
        >lastName is <strong>required</strong></mat-error
      >
      <mat-error *ngIf="lastName?.hasError('minlength')"
        >lastName is too short
        <strong>{{
          lastName?.getError('minlength')?.requiredLength
        }}</strong></mat-error
      >
      <mat-error *ngIf="lastName?.hasError('banWords')"
        >The value
        <strong>{{ lastName?.getError('banWords').bannedWord }} </strong>is
        banned</mat-error
      >
    </mat-form-field>

    <!-- *****national_code***** -->
    <mat-form-field
      data-testing="national_code"
      appearance="outline"
      class="w-full">
      <mat-label>national_code</mat-label>
      <input
        type="text"
        matInput
        [errorStateMatcher]="matcher"
        formControlName="national_code"
        placeholder="national_code" />
      <!-- Error handling -->
      <mat-error
        *ngIf="
          national_code?.hasError('national_code') &&
          !national_code?.hasError('required')
        "
        >Please enter a valid national_code</mat-error
      >
      <mat-error *ngIf="national_code?.hasError('required')"
        >national_code is <strong>required</strong></mat-error
      >
      <mat-error *ngIf="national_code?.hasError('minlength')"
        >national_code is too short
        <strong>{{
          national_code?.getError('minlength')?.requiredLength
        }}</strong></mat-error
      >
      <mat-error *ngIf="national_code?.hasError('banWords')"
        >The value
        <strong>{{ national_code?.getError('banWords').bannedWord }} </strong>is
        banned</mat-error
      >
    </mat-form-field>

    <!-- *****Year of birth***** -->
    <mat-form-field appearance="outline" class="w-full mb-1">
      <mat-label>Choose a date</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [max]="maxDate"
        [min]="minDate"
        formControlName="dateOfBirth" />
      <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
      <mat-datepicker-toggle matIconSuffix [for]="picker">
        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field data-testing="gender" appearance="outline" class="w-full">
      <mat-label>Gender</mat-label>
      <mat-select formControlName="gender" name="gender" (selectionChange)="onSelectedChange($event)">
        <mat-option *ngFor="let g of genders; trackBy: trackByFn" [value]="g">
          {{ g }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- *****Town/City***** -->
    <mat-form-field
      data-testing="Town/City"
      appearance="outline"
      class="w-full">
      <mat-label>{{ 'Town/City' | titlecase }}</mat-label>
      <input
        type="text"
        matInput
        [errorStateMatcher]="matcher"
        formControlName="city"
        placeholder="City name" />
      <!-- Error handling -->
      <mat-error *ngIf="city?.hasError('city') && !city?.hasError('required')"
        >Please enter a valid city</mat-error
      >
      <mat-error *ngIf="city?.hasError('required')"
        >city is <strong>required</strong></mat-error
      >
      <mat-error *ngIf="form.controls.city.hasError('minlength')"
        >city is too short
        <strong>{{
          form.controls.city.getError('minlength')?.requiredLength
        }}</strong></mat-error
      >
      <mat-error *ngIf="city?.hasError('banWords')"
        >The value
        <strong>{{ city?.getError('banWords').bannedWord }} </strong>is
        banned</mat-error
      >
    </mat-form-field>

    <!-- *****Contact Number***** -->
    <mat-form-field appearance="outline">
      <mat-label>Telephone</mat-label>
      <span matTextPrefix>+60 &nbsp;</span>
      <input type="tel" formControlName="phoneNumber" matInput placeholder="555-555-1234">
      <mat-icon matSuffix>mode_edit</mat-icon>
    </mat-form-field>

  </div>

  <div class="desktop:flex desktop:justify-end w-full gap-3 mt-4">
    <!-- *****CancelBTN***** -->
    <button mat-stroked-button type="button" class="w-full">Cancel</button>
    <!-- *****SaveBTN***** -->
    <button
      class="w-full desktop:m-0 tablet:mt-2 mobile:mt-2"
      [disabled]="!form.valid"
      mat-flat-button
      data-testid="login-button"
      color="primary"
      type="submit">
      Update Profile
    </button>
  </div>
</form>
