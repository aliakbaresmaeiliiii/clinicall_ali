import{jb as V,kb as B}from"./chunk-Q6FRQWYL.js";import{$a as E,Cb as d,Ha as N,Hb as g,Ia as j,Jb as M,Lc as H,Mb as F,Nc as L,Tb as _,Wb as A,ac as y,da as x,ea as l,ed as R,ga as C,gb as c,ia as O,kd as P,mb as b,na as D,oa as p,ob as m,pa as T,pd as z,qa as w,rc as Z,sc as k,vc as q,wa as I}from"./chunk-OZGOJA6I.js";import{a as u}from"./chunk-PXA7OGPQ.js";var G=(()=>{let i=class i{transform(t,...n){return Object.keys(t)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=w({name:"keys",type:i,pure:!0});let e=i;return e})();var $=e=>({$implicit:e});function J(e,i){e&1&&A(0)}function K(e,i){if(e&1&&d(0,J,1,0,"ng-container",1),e&2){let h=y();g("ngTemplateOutlet",h.render)("ngTemplateOutletContext",q(2,$,h.i))}}function Q(e,i){if(e&1&&_(0,"span",0),e&2){let h=y();g("innerHTML",h.i.text,E)}}var r=function(e){return e[e.ing=0]="ing",e[e.pause=1]="pause",e[e.stop=2]="stop",e[e.done=3]="done",e}(r||{}),U=(()=>{let i=class i{constructor(t){this.ngZone=t,this.fns=[],this.commands=[],this.nextTime=0,this.ing=!1}start(){this.ing!==!0&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular(()=>{this.process()}))}process(){for(;this.commands.length;)this.commands.shift()();let t=+new Date-this.nextTime,n=1+Math.floor(t/100);t=100-t%100,this.nextTime+=100*n;for(let o=0,s=this.fns.length;o<s;o+=2){let a=this.fns[o+1];if(a===0)this.fns[o](n);else{a+=2*n-1;let f=Math.floor(a/20);f>0&&this.fns[o](f),this.fns[o+1]=a%20+1}}this.ing&&setTimeout(()=>this.process(),t)}add(t,n){return this.commands.push(()=>{this.fns.push(t),this.fns.push(n===1e3?1:0),this.ing=!0}),this}remove(t){return this.commands.push(()=>{let n=this.fns.indexOf(t);n!==-1&&this.fns.splice(n,2),this.ing=this.fns.length>0}),this}};i.\u0275fac=function(n){return new(n||i)(O(m))},i.\u0275prov=x({token:i,factory:i.\u0275fac});let e=i;return e})(),X=new C("COUNTDOWN_CONFIG");var W=(()=>{let i=class i{set config(t){t.notify!=null&&!Array.isArray(t.notify)&&t.notify>0&&(t.notify=[t.notify]),this._config=t}get config(){return this._config}constructor(t,n,o,s,a){this.locale=t,this.timer=n,this.cdr=o,this.ngZone=s,this.defCog=a,this.frequency=1e3,this._notify={},this.status=r.ing,this.isDestroy=!1,this.i={},this.left=0,this.event=new j}begin(){this.status=r.ing,this.callEvent("start")}restart(){this.status!==r.stop&&this.destroy(),this.init(),this.callEvent("restart")}stop(){this.status!==r.stop&&(this.status=r.stop,this.destroy(),this.callEvent("stop"))}pause(){this.status===r.stop||this.status===r.pause||(this.status=r.pause,this.callEvent("pause"))}resume(){this.status===r.stop||this.status!==r.pause||(this.status=r.ing,this.callEvent("resume"))}callEvent(t){this.event.emit({action:t,left:this.left,status:this.status,text:this.i.text})}init(){let t=this.config=u(u({demand:!1,leftTime:0,format:"HH:mm:ss",timezone:"+0000",formatDate:({date:s,formatStr:a,timezone:f})=>R(new Date(s),a,this.locale,f||"+0000")},this.defCog),this.config),n=this.frequency=~t.format.indexOf("S")?100:1e3;this.status=t.demand?r.pause:r.ing,this.getLeft();let o=this.reflow;this.reflow=(s=0,a=!1)=>o.apply(this,[s,a]),Array.isArray(t.notify)&&t.notify.forEach(s=>{if(s<1)throw new Error("The notify config must be a positive integer.");s=s*1e3,s=s-s%n,this._notify[s]=!0}),this.timer.add(this.reflow,n).start(),this.reflow(0,!0)}destroy(){return this.timer.remove(this.reflow),this}reflow(t=0,n=!1){if(this.isDestroy)return;let{status:o,config:s,_notify:a}=this;if(!n&&o!==r.ing)return;let f=this.left=this.left-this.frequency*t;f<1&&(f=0),this.i={value:f,text:s.formatDate({date:f,formatStr:s.format,timezone:s.timezone})},typeof s.prettyText=="function"&&(this.i.text=s.prettyText(this.i.text)),this.cdr.detectChanges(),(s.notify===0||a[f])&&this.ngZone.run(()=>{this.callEvent("notify")}),f===0&&this.ngZone.run(()=>{this.status=r.done,this.destroy(),this.callEvent("done")})}getLeft(){let{config:t,frequency:n}=this,o=t.leftTime*1e3,s=t.stopTime;!o&&s&&(o=s-new Date().getTime()),this.left=o-o%n}ngOnInit(){this.init(),this.config.demand||this.begin()}ngOnDestroy(){this.isDestroy=!0,this.destroy()}ngOnChanges(t){t.config.firstChange||this.restart()}};i.\u0275fac=function(n){return new(n||i)(c(H),c(U),c(L),c(m),c(X,8))},i.\u0275cmp=D({type:i,selectors:[["countdown"]],hostVars:2,hostBindings:function(n,o){n&2&&M("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},standalone:!0,features:[Z([U]),I,k],decls:2,vars:1,consts:[[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&d(0,K,1,4,"ng-container")(1,Q,1,1,"span",0),n&2&&F(o.render?0:1)},dependencies:[P],styles:[`.count-down{font-variant-numeric:tabular-nums}
`],encapsulation:2,changeDetection:0});let e=i;return e})();var Y=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=p({type:i}),i.\u0275inj=l({providers:[G],imports:[z,V,B,W]});let e=i;return e})();var xt=(()=>{let i=class i{constructor(t,n){this._elRef=t,this._renderer=n}ngOnInit(){this.disabledNumberOnly||this._renderer.setAttribute(this._elRef.nativeElement,"onkeypress","return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0")}};i.\u0275fac=function(n){return new(n||i)(c(N),c(b))},i.\u0275dir=T({type:i,selectors:[["","appNumberOnly",""]],inputs:{disabledNumberOnly:"disabledNumberOnly"},standalone:!0});let e=i;return e})();export{Y as a,xt as b};
