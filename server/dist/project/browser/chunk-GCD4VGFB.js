import{a as Hn,b as qn}from"./chunk-CEUINXYG.js";import{b as $n}from"./chunk-AR726DMM.js";import{a as Bn}from"./chunk-GQXIZLIE.js";import{a as $e}from"./chunk-V23GP7ML.js";import{a as Gn}from"./chunk-XMYHXZX4.js";import{b as Un,c as Q}from"./chunk-HISCL3DM.js";import{a as We}from"./chunk-Z3HWAW7Y.js";import{c as bn,e as kn,h as Cn,k as Mn,l as Nn,m as Tn,n as On,p as Pn,q as je,r as Vn}from"./chunk-IDOUBITA.js";import{a as Kn,b as Qn,c as Xn,d as Yn,e as Zn}from"./chunk-JLNQPPYO.js";import{a as Fn}from"./chunk-L5IHBF74.js";import{a as zn,b as An,k as jn,m as Wn}from"./chunk-NEF4TMLT.js";import{a as Jn}from"./chunk-7UJPHKAS.js";import{Sa as pe,Ua as C,Wa as de,Xa as ue,_ as ce,ab as he,c as vn,cb as fe,fb as me,ha as Sn,jb as In,k as _n,kb as Je,ma as K,mb as ge,nb as xe,ob as Dn,qa as En,rb as ye,sb as Ln,vb as we,wb as Rn}from"./chunk-G6XNEXZK.js";import{Ba as He,Cb as I,Hb as g,Nc as xn,Rb as c,Sb as u,Tb as b,Ub as yt,Vb as wt,Xb as Ne,_b as R,ab as xt,ac as S,bc as vt,cc as _t,da as Se,ea as Ee,fb as f,ga as un,gb as Me,gd as yn,hd as qe,ia as hn,id as le,ja as W,jc as bt,kc as p,lc as M,mc as V,md as wn,na as O,oa as Ie,od as Pe,q as gt,qa as fn,s as dn,tc as mn,uc as gn,wb as G,wc as kt,xa as $,xc as Te,ya as U,yc as Oe}from"./chunk-ELVZKH6B.js";import{a as te,b as Ve}from"./chunk-PXA7OGPQ.js";var ei=(()=>{let e=class e{constructor(){this.http=W(vn),this.config=Fn.apiEndPoint}changeUserPasswrod(n){return this.http.post(`${this.config}user/change-password`,n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Se({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function dr(i,e){i&1&&(c(0,"mat-error"),p(1,"oldPassword is "),c(2,"strong"),p(3,"required"),u()())}function ur(i,e){if(i&1&&(c(0,"mat-error"),p(1,"oldPassword is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.oldPassword.getError("minlength"))==null?null:t.requiredLength)}}function hr(i,e){i&1&&(c(0,"mat-error"),p(1,"newPassword is "),c(2,"strong"),p(3,"required"),u()())}function fr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"newPassword is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.newPassword.getError("minlength"))==null?null:t.requiredLength)}}function mr(i,e){i&1&&(c(0,"mat-error"),p(1,"confirmPassword is "),c(2,"strong"),p(3,"required"),u()())}function gr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"confirmPassword is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.confirmPassword.getError("minlength"))==null?null:t.requiredLength)}}var ri=(()=>{let e=class e extends Q{constructor(){super(...arguments),this.service=W(ei),this.email="",this.form=this.fb.group({oldPassword:["",[C.required,C.minLength(8)]],newPassword:["",[C.required,C.minLength(8)]],confirmPassword:["",[C.required,C.minLength(8)]]}),this.matcher=new ce}ngOnInit(){let n=localStorage.getItem("userData");n&&(this.email=JSON.parse(n).email)}onSubmit(){let n={oldPassword:this.oldPassword?.value,newPassword:this.newPassword?.value,confirmPassword:this.confirmPassword?.value,email:this.email};this.service.changeUserPasswrod(n).subscribe({next:r=>{r&&(this.toastrService.success("Password changed successfully"),this.form.reset())},error:r=>{this.toastrService.error("Faild to change passwsord")}})}get oldPassword(){return this.form.get("oldPassword")}get newPassword(){return this.form.get("newPassword")}get confirmPassword(){return this.form.get("confirmPassword")}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=He(e)))(o||e)}})(),e.\u0275cmp=O({type:e,selectors:[["app-change-password"]],features:[G],decls:25,vars:11,consts:[[1,"text-xs","font-medium"],[3,"ngSubmit","formGroup"],[1,"desktop:grid","grid-cols-2","gap-3"],["data-testing","oldPassword","appearance","outline",1,"w-full"],["type","oldPassword","matInput","","formControlName","oldPassword","placeholder","Enter old password",3,"errorStateMatcher"],[4,"ngIf"],["data-testing","newPassword","appearance","outline",1,"w-full"],["type","newPassword","matInput","","formControlName","newPassword","placeholder","enter new password",3,"errorStateMatcher"],["data-testing","confirmPassword","appearance","outline",1,"w-full"],["type","confirmPassword","matInput","","formControlName","confirmPassword","placeholder","enter confirm password",3,"errorStateMatcher"],[1,"flex","justify-end","mt-2"],["data-testid","login-button","mat-raised-button","","color","primary","type","submit",1,"rounded-full","w-1/4",3,"disabled"]],template:function(r,o){r&1&&(c(0,"h2",0),p(1,"Change Password"),u(),c(2,"form",1),R("ngSubmit",function(){return o.onSubmit()}),c(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),p(6,"oldPassword"),u(),b(7,"input",4),I(8,dr,4,0,"mat-error",5)(9,ur,4,1,"mat-error",5),u(),c(10,"mat-form-field",6)(11,"mat-label"),p(12,"newPassword"),u(),b(13,"input",7),I(14,hr,4,0,"mat-error",5)(15,fr,4,1,"mat-error",5),u()(),c(16,"mat-form-field",8)(17,"mat-label"),p(18,"confirmPassword"),u(),b(19,"input",9),I(20,mr,4,0,"mat-error",5)(21,gr,4,1,"mat-error",5),u(),c(22,"div",10)(23,"button",11),p(24," Change Password "),u()()()),r&2&&(f(2),g("formGroup",o.form),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.oldPassword.hasError("required")),f(),g("ngIf",o.form.controls.oldPassword.hasError("minlength")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.newPassword.hasError("required")),f(),g("ngIf",o.form.controls.newPassword.hasError("minlength")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.confirmPassword.hasError("required")),f(),g("ngIf",o.form.controls.confirmPassword.hasError("minlength")),f(2),g("disabled",!o.form.valid))},dependencies:[le,he,pe,de,ue,fe,me,we,ye,ge,xe,K]});let i=e;return i})();function yr(i,e){i&1&&(c(0,"mat-error"),p(1,"facebookLink is "),c(2,"strong"),p(3,"required"),u()())}function wr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"facebookLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.facebookLink.getError("minlength"))==null?null:t.requiredLength)}}function vr(i,e){i&1&&(c(0,"mat-error"),p(1,"twitterLink is "),c(2,"strong"),p(3,"required"),u()())}function _r(i,e){if(i&1&&(c(0,"mat-error"),p(1,"twitterLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.twitterLink.getError("minlength"))==null?null:t.requiredLength)}}function br(i,e){i&1&&(c(0,"mat-error"),p(1,"youTubeLink is "),c(2,"strong"),p(3,"required"),u()())}function kr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"youTubeLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.youTubeLink.getError("minlength"))==null?null:t.requiredLength)}}function Cr(i,e){i&1&&(c(0,"mat-error"),p(1,"linkedInLink is "),c(2,"strong"),p(3,"required"),u()())}function Sr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"linkedInLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.linkedInLink.getError("minlength"))==null?null:t.requiredLength)}}function Er(i,e){i&1&&(c(0,"mat-error"),p(1,"dribbbleLink is "),c(2,"strong"),p(3,"required"),u()())}function Ir(i,e){if(i&1&&(c(0,"mat-error"),p(1,"dribbbleLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.dribbbleLink.getError("minlength"))==null?null:t.requiredLength)}}function Mr(i,e){i&1&&(c(0,"mat-error"),p(1,"twitchLink is "),c(2,"strong"),p(3,"required"),u()())}function Nr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"twitchLink is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.twitchLink.getError("minlength"))==null?null:t.requiredLength)}}var oi=(()=>{let e=class e extends Q{constructor(){super(...arguments),this.form=this.fb.group({facebookLink:["",[C.required,C.minLength(3)]],twitterLink:["",[C.required,C.minLength(3)]],youTubeLink:["",[C.required,C.minLength(3)]],linkedInLink:["",[C.required,C.minLength(3)]],dribbbleLink:["",[C.required,C.minLength(3)]],twitchLink:["",[C.required,C.minLength(3)]]}),this.matcher=new ce}onSubmit(){}get facebookLink(){return this.form.get("facebookLink")}get twitterLink(){return this.form.get("twitterLink")}get youTubeLink(){return this.form.get("youTubeLink")}get linkedInLink(){return this.form.get("linkedInLink")}get dribbbleLink(){return this.form.get("dribbbleLink")}get twitchLink(){return this.form.get("twitchLink")}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=He(e)))(o||e)}})(),e.\u0275cmp=O({type:e,selectors:[["app-add-new-connection"]],features:[G],decls:45,vars:20,consts:[[1,"p-5"],[3,"ngSubmit","formGroup"],[1,"grid","md:grid-cols-2"],["data-testing","facebookLink","appearance","outline"],["type","facebookLink","matInput","","formControlName","facebookLink","placeholder","Enter old password",3,"errorStateMatcher"],[4,"ngIf"],["data-testing","twitterLink","appearance","outline"],["type","twitterLink","matInput","","formControlName","twitterLink","placeholder","enter new password",3,"errorStateMatcher"],["data-testing","youTubeLink","appearance","outline"],["type","youTubeLink","matInput","","formControlName","youTubeLink","placeholder","enter confirm password",3,"errorStateMatcher"],["data-testing","linkedInLink","appearance","outline"],["type","linkedInLink","matInput","","formControlName","linkedInLink","placeholder","enter confirm password",3,"errorStateMatcher"],["data-testing","dribbbleLink","appearance","outline"],["type","dribbbleLink","matInput","","formControlName","dribbbleLink","placeholder","enter confirm password",3,"errorStateMatcher"],["data-testing","twitchLink","appearance","outline"],["type","twitchLink","matInput","","formControlName","twitchLink","placeholder","enter confirm password",3,"errorStateMatcher"],[1,"flex","desktop::justify-end","w-full"],["data-testid","login-button","mat-raised-button","","color","primary","type","submit",1,"rounded-full","md:w-1/4",3,"disabled"]],template:function(r,o){r&1&&(c(0,"mat-card-title",0),p(1," Add New Connection"),u(),c(2,"form",1),R("ngSubmit",function(){return o.onSubmit()}),c(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),p(6,"Facebook Link"),u(),b(7,"input",4),I(8,yr,4,0,"mat-error",5)(9,wr,4,1,"mat-error",5),u(),c(10,"mat-form-field",6)(11,"mat-label"),p(12,"Twitter Link"),u(),b(13,"input",7),I(14,vr,4,0,"mat-error",5)(15,_r,4,1,"mat-error",5),u()(),c(16,"div",2)(17,"mat-form-field",8)(18,"mat-label"),p(19,"YouTube Link"),u(),b(20,"input",9),I(21,br,4,0,"mat-error",5)(22,kr,4,1,"mat-error",5),u(),c(23,"mat-form-field",10)(24,"mat-label"),p(25,"LinkedIn Link"),u(),b(26,"input",11),I(27,Cr,4,0,"mat-error",5)(28,Sr,4,1,"mat-error",5),u()(),c(29,"div",2)(30,"mat-form-field",12)(31,"mat-label"),p(32,"Dribbble Link"),u(),b(33,"input",13),I(34,Er,4,0,"mat-error",5)(35,Ir,4,1,"mat-error",5),u(),c(36,"mat-form-field",14)(37,"mat-label"),p(38,"Twitch Link"),u(),b(39,"input",15),I(40,Mr,4,0,"mat-error",5)(41,Nr,4,1,"mat-error",5),u()(),c(42,"div",16)(43,"button",17),p(44," Save Information "),u()()()),r&2&&(f(2),g("formGroup",o.form),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.facebookLink.hasError("required")),f(),g("ngIf",o.form.controls.facebookLink.hasError("minlength")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.twitterLink.hasError("required")),f(),g("ngIf",o.form.controls.twitterLink.hasError("minlength")),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.youTubeLink.hasError("required")),f(),g("ngIf",o.form.controls.youTubeLink.hasError("minlength")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.linkedInLink.hasError("required")),f(),g("ngIf",o.form.controls.linkedInLink.hasError("minlength")),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.dribbbleLink.hasError("required")),f(),g("ngIf",o.form.controls.dribbbleLink.hasError("minlength")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",o.form.controls.twitchLink.hasError("required")),f(),g("ngIf",o.form.controls.twitchLink.hasError("minlength")),f(2),g("disabled",!o.form.valid))},dependencies:[le,he,pe,de,ue,fe,me,Nn,we,ye,ge,xe,K]});let i=e;return i})();var si=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=O({type:e,selectors:[["app-connections"]],decls:52,vars:0,consts:[[1,"text-xs","font-medium"],[1,"col","gap-3"],[1,"flex","justify-between"],[1,"flex","gap-3"],["src","../../../../assets/images/icons/search.png","width","50px","height","50px","alt","",1,"p-1"],[1,"grid","column-2"],[1,"opacity-45","text-sm"],[1,"text-blue","divide-y"],[1,"text-blue"],[1,"flex","justify-between","mt-6"],["src","../../../../assets/images/icons/code.png","width","50px","height","50px","alt","",1,"p-1"],["src","../../../../assets/images/icons/mailchimp.png","width","50px","height","50px","alt","",1,"p-1"],["src","../../../../assets/images/icons/slack.png","width","50px","height","50px","alt","",1,"p-1"],[1,"mt-2"]],template:function(r,o){r&1&&(c(0,"h2",0),p(1,"Connected Accounts"),u(),c(2,"div",1)(3,"ul",2)(4,"li")(5,"div",3),b(6,"img",4),c(7,"div",5)(8,"span"),p(9,"Google"),u(),c(10,"span",6),p(11," Calendar and Contacts "),u()()()(),c(12,"span",7),p(13,"Connected"),u()(),b(14,"mat-divider",8),c(15,"ul",9)(16,"li")(17,"div",3),b(18,"img",10),c(19,"div",5)(20,"span"),p(21,"Google"),u(),c(22,"span",6),p(23," Calendar and Contacts "),u()()()(),c(24,"span",7),p(25,"Connected"),u()(),b(26,"mat-divider",8),c(27,"ul",9)(28,"li")(29,"div",3),b(30,"img",11),c(31,"div",5)(32,"span"),p(33,"Google"),u(),c(34,"span",6),p(35," Calendar and Contacts "),u()()()(),c(36,"span",7),p(37,"Connected"),u()(),b(38,"mat-divider",8),c(39,"ul",9)(40,"li")(41,"div",3),b(42,"img",12),c(43,"div",5)(44,"span"),p(45,"Google"),u(),c(46,"span",6),p(47," Calendar and Contacts "),u()()()(),c(48,"span",7),p(49,"Connected"),u()()(),c(50,"div",13),b(51,"app-add-new-connection"),u())},dependencies:[je,oi]});let i=e;return i})();var Et=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=O({type:e,selectors:[["app-layout-settings"]],decls:2,vars:0,template:function(r,o){r&1&&(c(0,"app-users_settings"),b(1,"router-outlet"),u())}});let i=e;return i})();var ai=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=O({type:e,selectors:[["app-privacy-policy"]],decls:32,vars:0,consts:[[1,"text-xs","font-medium"],[1,"mb-5"],[1,"text-blue","font-semibold","text-lg"],[1,"opacity-45"],[1,"desktop:flex","desktop:justify-end","w-full","gap-3","mt-3"],["mat-stroked-button","","type","button",1,"w-full"],["mat-flat-button","","data-testid","login-button","color","primary","type","submit",1,"w-full","desktop:m-0","tablet:mt-2","mobile:mt-2"]],template:function(r,o){r&1&&(c(0,"h2",0),p(1,"Security"),u(),c(2,"div",1)(3,"p",2),p(4,"Two-Factor Authentication"),u(),c(5,"span",3),p(6," Two-factor authentication is an enhanced security meansur. Once enabled, you'll be required to give two types of identification when you log into Google Authentication and SMS are Supported. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of. "),u()(),c(7,"div",1)(8,"p",2),p(9,"Secondary Verification"),u(),c(10,"span",3),p(11," It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing. "),u()(),c(12,"div",1)(13,"p",2),p(14,"Backup Codes"),u(),c(15,"span",3),p(16," It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing. "),u()(),c(17,"div",1)(18,"p",2),p(19," Desktop, Email, Chat, Purchase Notifications "),u(),c(20,"span",3),p(21," It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters. "),u()(),c(22,"div")(23,"p",2),p(24,"Delete This Account :"),u(),c(25,"span",3),p(26," There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. "),u()(),c(27,"div",4)(28,"button",5),p(29,"Cancel"),u(),c(30,"button",6),p(31," Close & Delete This Account "),u()())},dependencies:[K]});let i=e;return i})();var Pr=()=>["my"];function Dr(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid userName"),u())}function Lr(i,e){i&1&&(c(0,"mat-error"),p(1,"userName is "),c(2,"strong"),p(3,"required"),u()())}function zr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"userName is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M(n.userName==null||(t=n.userName.getError("minlength"))==null?null:t.requiredLength)}}function Ar(i,e){if(i&1&&(c(0,"mat-error"),p(1,"The value "),c(2,"strong"),p(3),u(),p(4,"is banned"),u()),i&2){let t=S();f(3),V("",t.userName==null?null:t.userName.getError("banWords").bannedWord," ")}}function Rr(i,e){if(i&1&&(c(0,"mat-option",34),p(1),u()),i&2){let t=e.$implicit;g("value",t),f(),M(t)}}function Fr(i,e){i&1&&(c(0,"mat-error"),p(1," Date of birth must be between 30 and 80 years ago. "),u())}function Br(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid email address"),u())}function Vr(i,e){i&1&&(c(0,"mat-error"),p(1,"email is "),c(2,"strong"),p(3,"required"),u()())}function Hr(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid phoneNumber"),u())}function qr(i,e){i&1&&(c(0,"mat-error"),p(1,"phoneNumber is "),c(2,"strong"),p(3,"required"),u()())}function Jr(i,e){if(i&1&&(c(0,"mat-option",34),p(1),u()),i&2){let t=e.$implicit;g("value",t),f(),M(t)}}function jr(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid address"),u())}function Wr(i,e){i&1&&(c(0,"mat-error"),p(1,"address is "),c(2,"strong"),p(3,"required"),u()())}function $r(i,e){if(i&1&&(c(0,"mat-error"),p(1,"address is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.address.getError("minlength"))==null?null:t.requiredLength)}}function Ur(i,e){if(i&1&&(c(0,"mat-error"),p(1,"The value "),c(2,"strong"),p(3),u(),p(4,"is banned"),u()),i&2){let t=S();f(3),V("",t.address==null?null:t.address.getError("banWords").bannedWord," ")}}function Gr(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid city"),u())}function Kr(i,e){i&1&&(c(0,"mat-error"),p(1,"city is "),c(2,"strong"),p(3,"required"),u()())}function Qr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"city is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.city.getError("minlength"))==null?null:t.requiredLength)}}function Xr(i,e){if(i&1&&(c(0,"mat-error"),p(1,"The value "),c(2,"strong"),p(3),u(),p(4,"is banned"),u()),i&2){let t=S();f(3),V("",t.city==null?null:t.city.getError("banWords").bannedWord," ")}}function Yr(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid state"),u())}function Zr(i,e){i&1&&(c(0,"mat-error"),p(1,"state is "),c(2,"strong"),p(3,"required"),u()())}function eo(i,e){if(i&1&&(c(0,"mat-error"),p(1,"state is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.state.getError("minlength"))==null?null:t.requiredLength)}}function to(i,e){if(i&1&&(c(0,"mat-error"),p(1,"The value "),c(2,"strong"),p(3),u(),p(4,"is banned"),u()),i&2){let t=S();f(3),V("",t.state==null?null:t.state.getError("banWords").bannedWord," ")}}function no(i,e){i&1&&(c(0,"mat-error"),p(1,"Please enter a valid zipcode"),u())}function io(i,e){i&1&&(c(0,"mat-error"),p(1,"zipcode is "),c(2,"strong"),p(3,"required"),u()())}function ro(i,e){if(i&1&&(c(0,"mat-error"),p(1,"zipcode is too short "),c(2,"strong"),p(3),u()()),i&2){let t,n=S();f(3),M((t=n.form.controls.zipcode.getError("minlength"))==null?null:t.requiredLength)}}function oo(i,e){if(i&1&&(c(0,"mat-error"),p(1,"The value "),c(2,"strong"),p(3),u(),p(4,"is banned"),u()),i&2){let t=S();f(3),V("",t.zipcode==null?null:t.zipcode.getError("banWords").bannedWord," ")}}var li=(()=>{let e=class e extends Q{constructor(n,r){super(),this.uniqueNickname=n,this.cdr=r,this.matcher=new ce,this.permissionService=W(Bn),this.mapService=W(Hn),this.genders=["Man","Woman","Custom"],this.mapCoordinates=[{lat:3.022130075276455,lng:101.57977844022147}],this.hasAccess=!1,this.agePipe=W($e),this.countries=["Spanish","UK","Malaysia","Iran","Netherland","Autria","England"],this.form=this.fb.group({userName:["",[C.required,C.minLength(4),Jn(["test","dummy"])]],gender:"Man",dateOfBirth:["",C.required],email:["",[C.required,C.email]],phoneNumber:[""],address:[""],country:[""],city:[""],state:[""],zipcode:[""]}),this.lng=51.375447552429875,this.lat=35.744711325653654,this.mapCoordinates}ngOnInit(){let n=localStorage.getItem("userData");if(n){let r=JSON.parse(n);this.getUserInfo(r.email)}this.validationAge()}validationAge(){this.minDate=new Date(1940,1,1),this.maxDate=new Date(2024,11,31),this.dateOfBirth?.valueChanges.subscribe(n=>{if(n){let r=this.agePipe.transform(n);r<30?this.toastrService.error(`The age ${r} is too young. Must be at least 30 years.`):r>80&&this.toastrService.error(`The age ${r} is too old. Must be 80 years or younger.`)}})}getUserInfo(n){this.userService.getUserInfo(n).subscribe(r=>{this.userName?.patchValue(r[0].userName),this.email?.patchValue(r[0].email),this.phoneNumber?.patchValue(r[0].phoneNumber),this.dateOfBirth?.patchValue(r[0].dateOfBirth),this.country?.patchValue(r[0].country),this.address?.patchValue(r[0].address),this.city?.patchValue(r[0].city),this.state?.patchValue(r[0].state),this.zipcode?.patchValue(r[0].zipcode),this.cdr.detectChanges(),this.onAddressInput()})}onSubmit(){this.form.value&&this.userService.updateProfile(this.form.value).subscribe(n=>{n&&this.toastrService.success("Profile updated successfully")})}trackByFn(){}getuserSkills(){}onAddressInput(){let n=this.address?.value;n?this.mapService.geocodeAddress(n).subscribe(r=>{if(r.features&&r.features.length>0){let o=r.features[0].center;this.mapCoordinates=o,this.cdr.detectChanges()}console.log("\u{1F449}\u{1F449}\u{1F449}",this.mapCoordinates)},r=>{console.log("Geocoding error:",r)}):this.mapCoordinates=this.mapCoordinates}onCountryChange(n){n?this.mapService.geocodeAddress(n).subscribe(r=>{if(r.features&&r.features.length>0){let o=r.features[0].center;this.mapCoordinates=o,this.cdr.detectChanges()}console.log("\u{1F449}\u{1F449}\u{1F449}",this.mapCoordinates)},r=>{console.log("Geocoding error:",r)}):this.mapCoordinates=this.mapCoordinates}onMarkerMoved(n){console.log("Marker moved to:",n),console.log("Address:",n.address);let r=this.extractCounty(n.address),o=this.extractState(n.address),s=this.extractPostalCode(n.address),a=this.extractState(n.address);this.address?.patchValue(n.address),this.city?.patchValue(o),this.zipcode?.patchValue(s),this.state?.patchValue(a)}extractCounty(n){let r=n.split(",").map(o=>o.trim());return r.length>0?r[r.length-1]:""}extractCity(n){let r=n.split(",").map(o=>o.trim());return r.length>0?r[r.length-2]:""}extractPostalCode(n){let r=n.match(/\b\d{5}\b/);return r?r[0]:null}extractState(n){let r=n.split(",").map(o=>o.trim());return r[r.length-3]||""}get userName(){return this.form.get("userName")}get lastName(){return this.form.get("lastName")}get nickname(){return this.form.get("nickname")}get gender(){return this.form.get("gender")}get email(){return this.form.get("email")}get dateOfBirth(){return this.form.get("dateOfBirth")}get phoneNumber(){return this.form.get("phoneNumber")}get confirmPassword(){return this.form.get("confirmPassword")}get address(){return this.form.get("address")}get country(){return this.form.get("country")}get city(){return this.form.get("city")}get state(){return this.form.get("state")}get zipcode(){return this.form.get("zipcode")}ngOnDestroy(){}};e.\u0275fac=function(r){return new(r||e)(Me(Gn),Me(xn))},e.\u0275cmp=O({type:e,selectors:[["app-settings"]],features:[G],decls:91,vars:55,consts:[["picker",""],[1,"text-xs","font-medium"],[3,"ngSubmit","formGroup"],[1,"desktop:grid","grid-cols-2","gap-3"],["data-testing","userName","appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","userName","placeholder","userName",3,"errorStateMatcher"],[4,"ngIf"],["data-testing","gender","appearance","outline",1,"w-full"],["formControlName","gender","name","g"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["appearance","outline",1,"w-full","mb-1"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker","max","min"],["matIconSuffix","",3,"for"],["matDatepickerToggleIcon",""],["data-testing","email","appearance","outline",1,"w-full"],["type","email","matInput","","formControlName","email","placeholder","email",1,"w-full",3,"errorStateMatcher"],["data-testing","phoneNumber","appearance","outline",1,"w-full"],["name","phoneNumber","formControlName","phoneNumber",3,"preferredCountries","enablePlaceholder","enableSearch"],["formControlName","country","name","g",3,"selectionChange"],[1,"desktop:w-full"],["data-testing","Address","appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","address","placeholder","address",3,"input","errorStateMatcher"],[1,"desktop:grid","grid-cols-3","gap-3"],["data-testing","Town/City","appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","city","placeholder","City name",3,"errorStateMatcher"],["data-testing","State","appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","state","placeholder","State name",3,"errorStateMatcher"],["data-testing","zipcode","appearance","outline",1,"w-full"],["appNumberOnly","","type","text","matInput","","formControlName","zipcode","placeholder","State name",3,"errorStateMatcher"],[1,"h-80"],[3,"markerMoved","coordinates","zoomLevel"],[1,"desktop:flex","desktop:justify-end","w-full","gap-3","mt-4"],["mat-stroked-button","","type","button",1,"w-full"],["mat-flat-button","","data-testid","login-button","color","primary","type","submit",1,"w-full","desktop:m-0","tablet:mt-2","mobile:mt-2"],[3,"value"]],template:function(r,o){if(r&1){let s=Ne();c(0,"h2",1),p(1,"Setting"),u(),c(2,"form",2),R("ngSubmit",function(){return $(s),U(o.onSubmit())}),c(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),p(6,"userName"),u(),b(7,"input",5),I(8,Dr,2,0,"mat-error",6)(9,Lr,4,0,"mat-error",6)(10,zr,4,1,"mat-error",6)(11,Ar,5,1,"mat-error",6),u(),c(12,"mat-form-field",7)(13,"mat-label"),p(14,"Gender"),u(),c(15,"mat-select",8),I(16,Rr,2,2,"mat-option",9),u()()(),b(17,"div",3),c(18,"div",3)(19,"mat-form-field",10)(20,"mat-label"),p(21,"Choose a date"),u(),b(22,"input",11),c(23,"mat-datepicker-toggle",12)(24,"mat-icon",13),p(25,"keyboard_arrow_down"),u()(),b(26,"mat-datepicker",null,0),u(),I(28,Fr,2,0,"mat-error",6),c(29,"mat-form-field",14)(30,"mat-label"),p(31,"Email"),u(),b(32,"input",15),I(33,Br,2,0,"mat-error",6)(34,Vr,4,0,"mat-error",6),u()(),c(35,"div",3)(36,"mat-form-field",16)(37,"mat-label"),p(38,"Contact Number"),u(),b(39,"ngx-mat-intl-tel-input",17),I(40,Hr,2,0,"mat-error",6)(41,qr,4,0,"mat-error",6),u(),c(42,"mat-form-field",7)(43,"mat-label"),p(44,"Select Country"),u(),c(45,"mat-select",18),R("selectionChange",function(l){return $(s),U(o.onCountryChange(l.value))}),I(46,Jr,2,2,"mat-option",9),u()()(),c(47,"div",19)(48,"mat-form-field",20)(49,"mat-label"),p(50,"Address"),u(),c(51,"input",21),R("input",function(){return $(s),U(o.onAddressInput())}),u(),I(52,jr,2,0,"mat-error",6)(53,Wr,4,0,"mat-error",6)(54,$r,4,1,"mat-error",6)(55,Ur,5,1,"mat-error",6),u()(),c(56,"div",22)(57,"mat-form-field",23)(58,"mat-label"),p(59),Te(60,"titlecase"),u(),b(61,"input",24),I(62,Gr,2,0,"mat-error",6)(63,Kr,4,0,"mat-error",6)(64,Qr,4,1,"mat-error",6)(65,Xr,5,1,"mat-error",6),u(),c(66,"mat-form-field",25)(67,"mat-label"),p(68),Te(69,"titlecase"),u(),b(70,"input",26),I(71,Yr,2,0,"mat-error",6)(72,Zr,4,0,"mat-error",6)(73,eo,4,1,"mat-error",6)(74,to,5,1,"mat-error",6),u(),c(75,"mat-form-field",27)(76,"mat-label"),p(77),Te(78,"titlecase"),u(),b(79,"input",28),I(80,no,2,0,"mat-error",6)(81,io,4,0,"mat-error",6)(82,ro,4,1,"mat-error",6)(83,oo,5,1,"mat-error",6),u()(),c(84,"div",29)(85,"app-google-map",30),R("markerMoved",function(l){return $(s),U(o.onMarkerMoved(l))}),u()(),c(86,"div",31)(87,"button",32),p(88,"Cancel"),u(),c(89,"button",33),p(90," Update Profile "),u()()()}if(r&2){let s=bt(27);f(2),g("formGroup",o.form),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.userName==null?null:o.userName.hasError("userName"))&&!(o.userName!=null&&o.userName.hasError("required"))),f(),g("ngIf",o.userName==null?null:o.userName.hasError("required")),f(),g("ngIf",o.userName==null?null:o.userName.hasError("minlength")),f(),g("ngIf",o.userName==null?null:o.userName.hasError("banWords")),f(5),g("ngForOf",o.genders)("ngForTrackBy",o.trackByFn),f(6),g("matDatepicker",s)("max",o.maxDate)("min",o.minDate),f(),g("for",s),f(5),g("ngIf",o.dateOfBirth==null?null:o.dateOfBirth.hasError("dateOfBirth")),f(4),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.email==null?null:o.email.hasError("email"))&&!(o.email!=null&&o.email.hasError("required"))),f(),g("ngIf",o.email==null?null:o.email.hasError("required")),f(5),g("preferredCountries",gn(54,Pr))("enablePlaceholder",!0)("enableSearch",!0),f(),g("ngIf",(o.phoneNumber==null?null:o.phoneNumber.hasError("phoneNumber"))&&!(o.phoneNumber!=null&&o.phoneNumber.hasError("required"))),f(),g("ngIf",o.phoneNumber==null?null:o.phoneNumber.hasError("required")),f(5),g("ngForOf",o.countries)("ngForTrackBy",o.trackByFn),f(5),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.address==null?null:o.address.hasError("address"))&&!(o.address!=null&&o.address.hasError("required"))),f(),g("ngIf",o.address==null?null:o.address.hasError("required")),f(),g("ngIf",o.form.controls.address.hasError("minlength")),f(),g("ngIf",o.address==null?null:o.address.hasError("banWords")),f(4),M(Oe(60,48,"Town/City")),f(2),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.city==null?null:o.city.hasError("city"))&&!(o.city!=null&&o.city.hasError("required"))),f(),g("ngIf",o.city==null?null:o.city.hasError("required")),f(),g("ngIf",o.form.controls.city.hasError("minlength")),f(),g("ngIf",o.city==null?null:o.city.hasError("banWords")),f(3),M(Oe(69,50,"State")),f(2),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.state==null?null:o.state.hasError("state"))&&!(o.state!=null&&o.state.hasError("required"))),f(),g("ngIf",o.state==null?null:o.state.hasError("required")),f(),g("ngIf",o.form.controls.state.hasError("minlength")),f(),g("ngIf",o.state==null?null:o.state.hasError("banWords")),f(3),M(Oe(78,52,"Zip Code")),f(2),g("errorStateMatcher",o.matcher),f(),g("ngIf",(o.zipcode==null?null:o.zipcode.hasError("zipcode"))&&!(o.zipcode!=null&&o.zipcode.hasError("required"))),f(),g("ngIf",o.zipcode==null?null:o.zipcode.hasError("required")),f(),g("ngIf",o.form.controls.zipcode.hasError("minlength")),f(),g("ngIf",o.zipcode==null?null:o.zipcode.hasError("banWords")),f(2),g("coordinates",o.mapCoordinates)("zoomLevel",14)}},dependencies:[qe,le,$n,he,pe,de,ue,fe,me,we,ye,ge,xe,Dn,K,jn,Sn,We,zn,qn,Kn,Qn,Yn,Xn,wn],changeDetection:0});let i=e;return i})();var ci=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=O({type:e,selectors:[["app-terms-conditions"]],decls:27,vars:0,consts:[[1,"text-xs","font-medium"],[1,"mb-5"],[1,"text-blue","font-semibold","text-lg"],[1,"opacity-45"]],template:function(r,o){r&1&&(c(0,"h2",0),p(1,"Terms & Conditions"),u(),c(2,"div",1)(3,"p",2),p(4,"Two-Factor Authentication"),u(),c(5,"span",3),p(6," Two-factor authentication is an enhanced security meansur. Once enabled, you'll be required to give two types of identification when you log into Google Authentication and SMS are Supported. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of. "),u()(),c(7,"div",1)(8,"p",2),p(9,"Secondary Verification"),u(),c(10,"span",3),p(11," It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing. "),u()(),c(12,"div",1)(13,"p",2),p(14,"Backup Codes"),u(),c(15,"span",3),p(16," It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing. "),u()(),c(17,"div",1)(18,"p",2),p(19," Desktop, Email, Chat, Purchase Notifications "),u(),c(20,"span",3),p(21," It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters. "),u()(),c(22,"div")(23,"p",2),p(24,"Delete This Account :"),u(),c(25,"span",3),p(26," There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. "),u()())}});let i=e;return i})();var pi=(i,e,t)=>Math.min(Math.max(i,e),t);function hi(i,e,t){for(let n=0;;n++){if(n==i.childCount||n==e.childCount)return i.childCount==e.childCount?null:t;let r=i.child(n),o=e.child(n);if(r==o){t+=r.nodeSize;continue}if(!r.sameMarkup(o))return t;if(r.isText&&r.text!=o.text){for(let s=0;r.text[s]==o.text[s];s++)t++;return t}if(r.content.size||o.content.size){let s=hi(r.content,o.content,t+1);if(s!=null)return s}t+=r.nodeSize}}function fi(i,e,t,n){for(let r=i.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:t,b:n};let s=i.child(--r),a=e.child(--o),l=s.nodeSize;if(s==a){t-=l,n-=l;continue}if(!s.sameMarkup(a))return{a:t,b:n};if(s.isText&&s.text!=a.text){let d=0,h=Math.min(s.text.length,a.text.length);for(;d<h&&s.text[s.text.length-d-1]==a.text[a.text.length-d-1];)d++,t--,n--;return{a:t,b:n}}if(s.content.size||a.content.size){let d=fi(s.content,a.content,t-1,n-1);if(d)return d}t-=l,n-=l}}var w=class i{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,o){for(let s=0,a=0;a<t;s++){let l=this.content[s],d=a+l.nodeSize;if(d>e&&n(l,r+a,o||null,s)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,e-h),Math.min(l.content.size,t-h),n,r+h)}a=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let d=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&d||a.isTextblock)&&n&&(s?s=!1:o+=n),o+=d},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),n.push(a),r+=a.nodeSize),s=l}return new i(n,r)}cutByIndex(e,t){return e==t?i.empty:e==0&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return hi(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return fi(this,e,t,n)}findIndex(e,t=-1){if(e==0)return Ue(0,e);if(e==this.size)return Ue(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),s=r+o.nodeSize;if(s>=e)return s==e||t>0?Ue(n+1,s):Ue(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new i(t||e,n)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};w.empty=new w([],0);var It={index:0,offset:0};function Ue(i,e){return It.index=i,It.offset=e,It}function Ge(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!Ge(i[n],e[n]))return!1}else{for(let n in i)if(!(n in e)||!Ge(i[n],e[n]))return!1;for(let n in e)if(!(n in i))return!1}return!0}var X=(()=>{class i{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let o=0;o<t.length;o++){let s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Ge(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return i.none;if(t instanceof i)return[t];let n=t.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}}return i.none=[],i})(),re=class extends Error{},v=class i{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=gi(this.content,e+this.openStart,t);return n&&new i(n,this.openStart,this.openEnd)}removeBetween(e,t){return new i(mi(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return i.empty;let n=t.openStart||0,r=t.openEnd||0;if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new i(w.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new i(e,n,r)}};v.empty=new v(w.empty,0,0);function mi(i,e,t){let{index:n,offset:r}=i.findIndex(e),o=i.maybeChild(n),{index:s,offset:a}=i.findIndex(t);if(r==e||o.isText){if(a!=t&&!i.child(s).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(n!=s)throw new RangeError("Removing non-flat range");return i.replaceChild(n,o.copy(mi(o.content,e-r-1,t-r-1)))}function gi(i,e,t,n){let{index:r,offset:o}=i.findIndex(e),s=i.maybeChild(r);if(o==e||s.isText)return n&&!n.canReplace(r,r,t)?null:i.cut(0,e).append(t).append(i.cut(e));let a=gi(s.content,e-o-1,t);return a&&i.replaceChild(r,s.copy(a))}function so(i,e,t){if(t.openStart>i.depth)throw new re("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new re("Inconsistent open depths");return xi(i,e,t,0)}function xi(i,e,t,n){let r=i.index(n),o=i.node(n);if(r==e.index(n)&&n<i.depth-t.openStart){let s=xi(i,e,t,n+1);return o.copy(o.content.replaceChild(r,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==n&&e.depth==n){let s=i.parent,a=s.content;return ie(s,a.cut(0,i.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=ao(t,i);return ie(o,wi(i,s,a,e,n))}else return ie(o,Ke(i,e,n))}function yi(i,e){if(!e.type.compatibleContent(i.type))throw new re("Cannot join "+e.type.name+" onto "+i.type.name)}function Tt(i,e,t){let n=i.node(t);return yi(n,e.node(t)),n}function ne(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}function De(i,e,t,n){let r=(e||i).node(t),o=0,s=e?e.index(t):r.childCount;i&&(o=i.index(t),i.depth>t?o++:i.textOffset&&(ne(i.nodeAfter,n),o++));for(let a=o;a<s;a++)ne(r.child(a),n);e&&e.depth==t&&e.textOffset&&ne(e.nodeBefore,n)}function ie(i,e){return i.type.checkContent(e),i.copy(e)}function wi(i,e,t,n,r){let o=i.depth>r&&Tt(i,e,r+1),s=n.depth>r&&Tt(t,n,r+1),a=[];return De(null,i,r,a),o&&s&&e.index(r)==t.index(r)?(yi(o,s),ne(ie(o,wi(i,e,t,n,r+1)),a)):(o&&ne(ie(o,Ke(i,e,r+1)),a),De(e,t,r,a),s&&ne(ie(s,Ke(t,n,r+1)),a)),De(n,null,r,a),new w(a)}function Ke(i,e,t){let n=[];if(De(null,i,t,n),i.depth>t){let r=Tt(i,e,t+1);ne(ie(r,Ke(i,e,t+1)),n)}return De(e,null,t,n),new w(n)}function ao(i,e){let t=e.depth-i.openStart,r=e.node(t).copy(i.content);for(let o=t-1;o>=0;o--)r=e.node(o).copy(w.from(r));return{start:r.resolveNoCache(i.openStart+t),end:r.resolveNoCache(r.content.size-i.openEnd-t)}}var Qe=class i{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return X.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let a=n;n=r,r=a}let o=n.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!r||!o[s].isInSet(r.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!r||!n[o].isInSet(r.marks))&&(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new oe(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),d=o-l;if(n.push(s,a,r+l),!d||(s=s.child(a),s.isText))break;o=d-1,r+=l+1}return new i(t,n,o)}static resolveCached(e,t){for(let r=0;r<Mt.length;r++){let o=Mt[r];if(o.pos==t&&o.doc==e)return o}let n=Mt[Nt]=i.resolve(e,t);return Nt=(Nt+1)%lo,n}},Mt=[],Nt=0,lo=12,oe=class{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},co=Object.create(null),Xe=class i{constructor(e,t,n,r=X.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||w.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Ge(this.attrs,t||e.defaultAttrs||co)&&X.sameSet(this.marks,n||X.none)}copy(e=null){return e==this.content?this:new i(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return v.empty;let r=this.resolve(e),o=this.resolve(t),s=n?0:r.sharedDepth(t),a=r.start(s),d=r.node(s).content.cut(r.pos-a,o.pos-a);return new v(d,r.depth-s,o.depth-s)}replace(e,t,n){return so(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return Qe.resolveCached(this,e)}resolveNoCache(e){return Qe.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,o=>(n.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),po(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=w.empty,r=0,o=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=r;l<o;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=X.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!X.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=w.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}};Xe.prototype.text=void 0;function po(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}var Le=class i{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Ot(e,t);if(n.next==null)return i.empty;let r=vi(n);n.next&&n.err("Unexpected trailing text");let o=yo(xo(r));return wo(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];function o(s,a){let l=s.matchFragment(e,n);if(l&&(!t||l.validEnd))return w.from(a.map(d=>d.createAndFill()));for(let d=0;d<s.next.length;d++){let{type:h,next:m}=s.next[d];if(!(h.isText||h.hasRequiredAttrs())&&r.indexOf(m)==-1){r.push(m);let x=o(m,a.concat(h));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let s=[];for(let a=r;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!r.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)e.indexOf(n.next[r].next)==-1&&t(n.next[r].next)}return t(this),e.map((n,r)=>{let o=r+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)o+=(s?", ":"")+n.next[s].type.name+"->"+e.indexOf(n.next[s].next);return o}).join(`
`)}};Le.empty=new Le(!0);var Ot=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function vi(i){let e=[];do e.push(uo(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function uo(i){let e=[];do e.push(ho(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ho(i){let e=go(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=fo(i,e);else break;return e}function di(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function fo(i,e){let t=di(i),n=t;return i.eat(",")&&(i.next!="}"?n=di(i):n=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function mo(i,e){let t=i.nodeTypes,n=t[e];if(n)return[n];let r=[];for(let o in t){let s=t[o];s.groups.indexOf(e)>-1&&r.push(s)}return r.length==0&&i.err("No node type or group '"+e+"' found"),r}function go(i){if(i.eat("(")){let e=vi(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=mo(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function xo(i){let e=[[]];return r(o(i,0),t()),e;function t(){return e.push([])-1}function n(s,a,l){let d={term:l,to:a};return e[s].push(d),d}function r(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,d)=>l.concat(o(d,a)),[]);if(s.type=="seq")for(let l=0;;l++){let d=o(s.exprs[l],a);if(l==s.exprs.length-1)return d;r(d,a=t())}else if(s.type=="star"){let l=t();return n(a,l),r(o(s.expr,l),l),[n(l)]}else if(s.type=="plus"){let l=t();return r(o(s.expr,a),l),r(o(s.expr,l),l),[n(l)]}else{if(s.type=="opt")return[n(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let d=0;d<s.min;d++){let h=t();r(o(s.expr,l),h),l=h}if(s.max==-1)r(o(s.expr,l),l);else for(let d=s.min;d<s.max;d++){let h=t();n(l,h),r(o(s.expr,l),h),l=h}return[n(l)]}else{if(s.type=="name")return[n(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function _i(i,e){return e-i}function ui(i,e){let t=[];return n(e),t.sort(_i);function n(r){let o=i[r];if(o.length==1&&!o[0].term)return n(o[0].to);t.push(r);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&t.indexOf(l)==-1&&n(l)}}}function yo(i){let e=Object.create(null);return t(ui(i,0));function t(n){let r=[];n.forEach(s=>{i[s].forEach(({term:a,to:l})=>{if(!a)return;let d;for(let h=0;h<r.length;h++)r[h][0]==a&&(d=r[h][1]);ui(i,l).forEach(h=>{d||r.push([a,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let o=e[n.join(",")]=new Le(n.indexOf(i.length-1)>-1);for(let s=0;s<r.length;s++){let a=r[s][1].sort(_i);o.next.push({type:r[s][0],next:e[a.join(",")]||t(a)})}return o}}function wo(i,e){for(let t=0,n=[i];t<n.length;t++){let r=n[t],o=!r.validEnd,s=[];for(let a=0;a<r.next.length;a++){let{type:l,next:d}=r.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),n.indexOf(d)==-1&&n.push(d)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}var Ci=65535,Si=Math.pow(2,16);function vo(i,e){return i+e*Si}function bi(i){return i&Ci}function _o(i){return(i-(i&Ci))/Si}var Ei=1,Ii=2,Ye=4,Mi=8,Re=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Mi)>0}get deletedBefore(){return(this.delInfo&(Ei|Ye))>0}get deletedAfter(){return(this.delInfo&(Ii|Ye))>0}get deletedAcross(){return(this.delInfo&Ye)>0}},J=class i{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&i.empty)return i.empty}recover(e){let t=0,n=bi(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[n*3]+t+_o(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let d=this.ranges[a+o],h=this.ranges[a+s],m=l+d;if(e<=m){let x=d?e==l?-1:e==m?1:t:t,y=l+r+(x<0?0:h);if(n)return y;let k=e==(t<0?l:m)?null:vo(a/3,e-l),_=e==l?Ii:e==m?Ei:Ye;return(t<0?e!=l:e!=m)&&(_|=Mi),new Re(y,_,k)}r+=h-d}return n?e+r:new Re(e+r,0,null)}touches(e,t){let n=0,r=bi(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let d=this.ranges[a+o],h=l+d;if(e<=h&&a==r*3)return!0;n+=this.ranges[a+s]-d}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),d=this.ranges[r+t],h=this.ranges[r+n];e(a,a+d,l,l+h),o+=h-d}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?i.empty:new i(e<0?[0,-e,0]:[0,0,e])}};J.empty=new J([]);var Ze=class i{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new i(this.maps,this.mirror,e,t)}copy(){return new i(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],r!=null&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),r!=null&&r>t?n-r-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return n?e:new Re(e,r,null)}},Pt=Object.create(null),T=class{getMap(){return J.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Pt[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Pt)throw new RangeError("Duplicate use of step JSON ID "+e);return Pt[e]=t,t.prototype.jsonID=e,t}},P=class i{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new i(e,null)}static fail(e){return new i(null,e)}static fromReplace(e,t,n,r){try{return i.ok(e.replace(t,n,r))}catch(o){if(o instanceof re)return i.fail(o.message);throw o}}};function Bt(i,e,t){let n=[];for(let r=0;r<i.childCount;r++){let o=i.child(r);o.content.size&&(o=o.copy(Bt(o.content,e,o))),o.isInline&&(o=e(o,t,r)),n.push(o)}return w.fromArray(n)}var et=class i extends T{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new v(Bt(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),r),t.openStart,t.openEnd);return P.fromReplace(e,this.from,this.to,o)}invert(){return new tt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new i(t.pos,n.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};T.jsonID("addMark",et);var tt=class i extends T{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new v(Bt(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return P.fromReplace(e,this.from,this.to,n)}invert(){return new et(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new i(t.pos,n.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};T.jsonID("removeMark",tt);var nt=class i extends T{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return P.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return P.fromReplace(e,this.pos,this.pos+1,new v(w.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(n))return new i(this.pos,t.marks[r]);return new i(this.pos,this.mark)}}return new it(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};T.jsonID("addNodeMark",nt);var it=class i extends T{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return P.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return P.fromReplace(e,this.pos,this.pos+1,new v(w.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new nt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};T.jsonID("removeNodeMark",it);var Y=class i extends T{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&zt(e,this.from,this.to)?P.fail("Structure replace would overwrite content"):P.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new J([this.from,this.to-this.from,this.slice.size])}invert(e){return new i(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new i(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof i)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?v.empty:new v(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new i(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?v.empty:new v(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new i(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(t.from,t.to,v.fromJSON(e,t.slice),!!t.structure)}};T.jsonID("replace",Y);var A=class i extends T{constructor(e,t,n,r,o,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(zt(e,this.from,this.gapFrom)||zt(e,this.gapTo,this.to)))return P.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return P.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?P.fromReplace(e,this.from,this.to,n):P.fail("Content does not fit in gap")}getMap(){return new J([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new i(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(t.from,t.to,t.gapFrom,t.gapTo,v.fromJSON(e,t.slice),t.insert,!!t.structure)}};T.jsonID("replaceAround",A);function zt(i,e,t){let n=i.resolve(e),r=t-e,o=n.depth;for(;r>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,r--;if(r>0){let s=n.node(o).maybeChild(n.indexAfter(o));for(;r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}}return!1}function bo(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function se(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let r=i.$from.node(n),o=i.$from.index(n),s=i.$to.indexAfter(n);if(n<i.depth&&r.canReplace(o,s,t))return n;if(n==0||r.type.spec.isolating||!bo(r,o,s))break}return null}function rt(i,e,t=null,n=i){let r=ko(i,e),o=r&&Co(n,e);return o?r.map(ki).concat({type:e,attrs:t}).concat(o.map(ki)):null}function ki(i){return{type:i,attrs:null}}function ko(i,e){let{parent:t,startIndex:n,endIndex:r}=i,o=t.contentMatchAt(n).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(n,r,s)?o:null}function Co(i,e){let{parent:t,startIndex:n,endIndex:r}=i,o=t.child(n),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let d=n;l&&d<r;d++)l=l.matchType(t.child(d).type);return!l||!l.validEnd?null:s}function ae(i,e,t=1,n){let r=i.resolve(e),o=r.depth-t,s=n&&n[n.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let d=r.depth-1,h=t-2;d>o;d--,h--){let m=r.node(d),x=r.index(d);if(m.type.spec.isolating)return!1;let y=m.content.cutByIndex(x,m.childCount),k=n&&n[h+1];k&&(y=y.replaceChild(0,k.type.create(k.attrs)));let _=n&&n[h]||m;if(!m.canReplace(x+1,m.childCount)||!_.type.validContent(y))return!1}let a=r.indexAfter(o),l=n&&n[0];return r.node(o).canReplaceWith(a,a,l?l.type:r.node(o+1).type)}function Be(i,e){let t=i.resolve(e),n=t.index();return So(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function So(i,e){return!!(i&&e&&!i.isLeaf&&i.canAppend(e))}function Vt(i,e,t=e,n=v.empty){if(e==t&&!n.size)return null;let r=i.resolve(e),o=i.resolve(t);return Eo(r,o,n)?new Y(e,t,n):new At(r,o,n).fit()}function Eo(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}var At=class{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=w.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=w.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,s=n.depth,a=r.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new v(o,s,a);return e>-1?new A(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new Y(n.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let r,o=null;n?(o=Dt(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;let s=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:d}=this.frontier[a],h,m=null;if(t==1&&(s?d.matchType(s.type)||(m=d.fillBefore(w.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:a,parent:o,inject:m};if(t==2&&s&&(h=d.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:a,parent:o,wrap:h};if(o&&d.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Dt(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new v(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Dt(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new v(ze(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new v(ze(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let _=0;_<o.length;_++)this.openFrontierNode(o[_]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-e,d=0,h=[],{match:m,type:x}=this.frontier[t];if(r){for(let _=0;_<r.childCount;_++)h.push(r.child(_));m=m.matchFragment(r)}let y=a.size+e-(s.content.size-s.openEnd);for(;d<a.childCount;){let _=a.child(d),z=m.matchType(_.type);if(!z)break;d++,(d>1||l==0||_.content.size)&&(m=z,h.push(Ni(_.mark(x.allowedMarks(_.marks)),d==1?l:0,d==a.childCount?y:-1)))}let k=d==a.childCount;k||(y=-1),this.placed=Ae(this.placed,t,w.from(h)),this.frontier[t].match=m,k&&y<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let _=0,z=a;_<y;_++){let B=z.lastChild;this.frontier.push({type:B.type,match:B.contentMatchAt(B.childCount)}),z=B.content}this.unplaced=k?e==0?v.empty:new v(ze(s.content,e-1,1),e-1,y<0?s.openEnd:e-1):new v(ze(s.content,e,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Lt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Lt(e,t,r,n,o);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:d}=this.frontier[a],h=Lt(e,a,d,l,!0);if(!h||h.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ae(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Ae(this.placed,this.depth,w.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(w.empty,!0);t.childCount&&(this.placed=Ae(this.placed,this.frontier.length,t))}};function ze(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(ze(i.firstChild.content,e-1,t)))}function Ae(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(Ae(i.lastChild.content,e-1,t)))}function Dt(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}function Ni(i,e,t){if(e<=0)return i;let n=i.content;return e>1&&(n=n.replaceChild(0,Ni(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=i.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(w.empty,!0)))),i.copy(n)}function Lt(i,e,t,n,r){let o=i.node(e),s=r?i.indexAfter(e):i.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let a=n.fillBefore(o.content,!0,s);return a&&!Io(t,o.content,s)?a:null}function Io(i,e,t){for(let n=t;n<e.childCount;n++)if(!i.allowsMarks(e.child(n).marks))return!0;return!1}var Rt=class i extends T{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return P.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return P.fromReplace(e,this.pos,this.pos+1,new v(w.from(r),0,t.isLeaf?0:1))}getMap(){return J.empty}invert(e){return new i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(t.pos,t.attr,t.value)}};T.jsonID("attr",Rt);var Ft=class i extends T{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return P.ok(n)}getMap(){return J.empty}invert(e){return new i(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new i(t.attr,t.value)}};T.jsonID("docAttr",Ft);var Fe=class extends Error{};Fe=function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t};Fe.prototype=Object.create(Error.prototype);Fe.prototype.constructor=Fe;Fe.prototype.name="TransformError";var Ht=Object.create(null),E=class{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Jt(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=v.empty){let n=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=n,n=n.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:d}=s[a],h=e.mapping.slice(o);e.replaceRange(h.map(l.pos),h.map(d.pos),a?v.empty:t),a==0&&Pi(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:a}=r[o],l=e.mapping.slice(n),d=l.map(s.pos),h=l.map(a.pos);o?e.deleteRange(d,h):(e.replaceRangeWith(d,h,t),Pi(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new L(e):ve(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let s=t<0?ve(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):ve(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new F(e.node(0))}static atStart(e){return ve(e,e,0,0,1)||new F(e)}static atEnd(e){return ve(e,e,e.content.size,e.childCount,-1)||new F(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Ht[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Ht)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ht[e]=t,t.prototype.jsonID=e,t}getBookmark(){return L.between(this.$anchor,this.$head).getBookmark()}};E.prototype.visible=!0;var Jt=class{constructor(e,t){this.$from=e,this.$to=t}},Ti=!1;function Oi(i){!Ti&&!i.parent.inlineContent&&(Ti=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}var L=class i extends E{constructor(e,t=e){Oi(e),Oi(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return E.near(n);let r=e.resolve(t.map(this.anchor));return new i(r.parent.inlineContent?r:n,n)}replace(e,t=v.empty){if(super.replace(e,t),t==v.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof i&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ot(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let o=E.findFrom(t,n,!0)||E.findFrom(t,-n,!0);if(o)t=o.$head;else return E.near(t,n)}return e.parent.inlineContent||(r==0?e=t:(e=(E.findFrom(e,-n,!0)||E.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new i(e,t)}};E.jsonID("text",L);var ot=class i{constructor(e,t){this.anchor=e,this.head=t}map(e){return new i(e.map(this.anchor),e.map(this.head))}resolve(e){return L.between(e.resolve(this.anchor),e.resolve(this.head))}},N=class i extends E{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?E.near(o):new i(o)}content(){return new v(w.from(this.node),0,0)}eq(e){return e instanceof i&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jt(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new i(e.resolve(t.anchor))}static create(e,t){return new i(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};N.prototype.visible=!1;E.jsonID("node",N);var jt=class i{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new ot(n,n):new i(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&N.isSelectable(n)?new N(t):E.near(t)}},F=class i extends E{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=v.empty){if(t==v.empty){e.delete(0,e.doc.content.size);let n=E.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new i(e)}map(e){return new i(e)}eq(e){return e instanceof i}getBookmark(){return Mo}};E.jsonID("all",F);var Mo={map(){return this},resolve(i){return new F(i)}};function ve(i,e,t,n,r,o=!1){if(e.inlineContent)return L.create(i,t);for(let s=n-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){let a=e.child(s);if(a.isAtom){if(!o&&N.isSelectable(a))return N.create(i,t-(r<0?a.nodeSize:0))}else{let l=ve(i,a,t+r,r<0?a.childCount:0,r,o);if(l)return l}t+=a.nodeSize*r}return null}function Pi(i,e,t){let n=i.steps.length-1;if(n<e)return;let r=i.steps[n];if(!(r instanceof Y||r instanceof A))return;let o=i.mapping.maps[n],s;o.forEach((a,l,d,h)=>{s==null&&(s=h)}),i.setSelection(E.near(i.doc.resolve(s),t))}function Di(i,e){return!e||!i?i:i.bind(e)}var _e=class{constructor(e,t,n){this.name=e,this.init=Di(t.init,n),this.apply=Di(t.apply,n)}},Ra=[new _e("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new _e("selection",{init(i,e){return i.selection||E.atStart(e.doc)},apply(i){return i.selection}}),new _e("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,n){return n.selection.$cursor?i.storedMarks:null}}),new _e("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})];var qt=Object.create(null);function No(i){return i in qt?i+"$"+ ++qt[i]:(qt[i]=0,i+"$")}var be=class{constructor(e="key"){this.key=No(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};function Li(i,e=null){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&r.node(s.depth-1).type.compatibleContent(i)&&s.startIndex==0){if(r.index(s.depth-1)==0)return!1;let h=t.doc.resolve(s.start-2);l=new oe(h,h,s.depth),s.endIndex<s.parent.childCount&&(s=new oe(r,t.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let d=rt(l,i,e,s);return d?(n&&n(To(t.tr,s,d,a,i).scrollIntoView()),!0):!1}}function To(i,e,t,n,r){let o=w.empty;for(let h=t.length-1;h>=0;h--)o=w.from(t[h].type.create(t[h].attrs,o));i.step(new A(e.start-(n?2:0),e.end,e.start,e.end,new v(o,0,0),t.length,!0));let s=0;for(let h=0;h<t.length;h++)t[h].type==r&&(s=h+1);let a=t.length-s,l=e.start+t.length-(n?2:0),d=e.parent;for(let h=e.startIndex,m=e.endIndex,x=!0;h<m;h++,x=!1)!x&&ae(i.doc,l,a)&&(i.split(l,a),l+=2*a),l+=d.child(h).nodeSize;return i}function zi(i){return function(e,t){let{$from:n,$to:r}=e.selection,o=n.blockRange(r,s=>s.childCount>0&&s.firstChild.type==i);return o?t?n.node(o.depth-1).type==i?Oo(e,t,i,o):Po(e,t,o):!0:!1}}function Oo(i,e,t,n){let r=i.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(r.step(new A(o-1,s,o,s,new v(w.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new oe(r.doc.resolve(n.$from.pos),r.doc.resolve(s),n.depth));let a=se(n);if(a==null)return!1;r.lift(n,a);let l=r.mapping.map(o,-1)-1;return Be(r.doc,l)&&r.join(l),e(r.scrollIntoView()),!0}function Po(i,e,t){let n=i.tr,r=t.parent;for(let y=t.end,k=t.endIndex-1,_=t.startIndex;k>_;k--)y-=r.child(k).nodeSize,n.delete(y-1,y+1);let o=n.doc.resolve(t.start),s=o.nodeAfter;if(n.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==r.childCount,d=o.node(-1),h=o.index(-1);if(!d.canReplace(h+(a?0:1),h+1,s.content.append(l?w.empty:w.from(r))))return!1;let m=o.pos,x=m+s.nodeSize;return n.step(new A(m-(a?1:0),x+(l?1:0),m+1,x-1,new v((a?w.empty:w.from(r.copy(w.empty))).append(l?w.empty:w.from(r.copy(w.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}var Ri=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function Do(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}var Lo=(i,e,t)=>{let n=Do(i,t);if(!n)return!1;let r=Fi(n);if(!r){let s=n.blockRange(),a=s&&se(s);return a==null?!1:(e&&e(i.tr.lift(s,a).scrollIntoView()),!0)}let o=r.nodeBefore;if(!o.type.spec.isolating&&$i(i,r,e))return!0;if(n.parent.content.size==0&&(ke(o,"end")||N.isSelectable(o))){let s=Vt(i.doc,n.before(),n.after(),v.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=i.tr.step(s);a.setSelection(ke(o,"end")?E.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):N.create(a.doc,r.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function ke(i,e,t=!1){for(let n=i;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}var zo=(i,e,t)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):n.parentOffset>0)return!1;o=Fi(n)}let s=o&&o.nodeBefore;return!s||!N.isSelectable(s)?!1:(e&&e(i.tr.setSelection(N.create(i.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Fi(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function Ao(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}var Ro=(i,e,t)=>{let n=Ao(i,t);if(!n)return!1;let r=Bi(n);if(!r)return!1;let o=r.nodeAfter;if($i(i,r,e))return!0;if(n.parent.content.size==0&&(ke(o,"start")||N.isSelectable(o))){let s=Vt(i.doc,n.before(),n.after(),v.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=i.tr.step(s);a.setSelection(ke(o,"start")?E.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):N.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},Fo=(i,e,t)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;o=Bi(n)}let s=o&&o.nodeAfter;return!s||!N.isSelectable(s)?!1:(e&&e(i.tr.setSelection(N.create(i.doc,o.pos)).scrollIntoView()),!0)};function Bi(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}var Vi=(i,e)=>{let{$from:t,$to:n}=i.selection,r=t.blockRange(n),o=r&&se(r);return o==null?!1:(e&&e(i.tr.lift(r,o).scrollIntoView()),!0)},Hi=(i,e)=>{let{$head:t,$anchor:n}=i.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)};function $t(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}var qi=(i,e)=>{let{$head:t,$anchor:n}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let r=t.node(-1),o=t.indexAfter(-1),s=$t(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(e){let a=t.after(),l=i.tr.replaceWith(a,a,s.createAndFill());l.setSelection(E.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Ji=(i,e)=>{let t=i.selection,{$from:n,$to:r}=t;if(t instanceof F||n.parent.inlineContent||r.parent.inlineContent)return!1;let o=$t(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,a=i.tr.insert(s,o.createAndFill());a.setSelection(L.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},ji=(i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(ae(i.doc,o))return e&&e(i.tr.split(o).scrollIntoView()),!0}let n=t.blockRange(),r=n&&se(n);return r==null?!1:(e&&e(i.tr.lift(n,r).scrollIntoView()),!0)};function Bo(i){return(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof N&&e.selection.node.isBlock)return!n.parentOffset||!ae(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let o=r.parentOffset==r.parent.content.size,s=e.tr;(e.selection instanceof L||e.selection instanceof F)&&s.deleteSelection();let a=n.depth==0?null:$t(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=i&&i(r.parent,o),d=l?[l]:o&&a?[{type:a}]:void 0,h=ae(s.doc,s.mapping.map(n.pos),1,d);if(!d&&!h&&ae(s.doc,s.mapping.map(n.pos),1,a?[{type:a}]:void 0)&&(a&&(d=[{type:a}]),h=!0),h&&(s.split(s.mapping.map(n.pos),1,d),!o&&!n.parentOffset&&n.parent.type!=a)){let m=s.mapping.map(n.before()),x=s.doc.resolve(m);a&&n.node(-1).canReplaceWith(x.index(),x.index()+1,a)&&s.setNodeMarkup(s.mapping.map(n.before()),a)}t(s.scrollIntoView())}return!0}}var Wi=Bo();var Vo=(i,e)=>(e&&e(i.tr.setSelection(new F(i.doc))),!0);function Ho(i,e,t){let n=e.nodeBefore,r=e.nodeAfter,o=e.index();return!n||!r||!n.type.compatibleContent(r.type)?!1:!n.content.size&&e.parent.canReplace(o-1,o)?(t&&t(i.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||Be(i.doc,e.pos))?!1:(t&&t(i.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),!0)}function $i(i,e,t){let n=e.nodeBefore,r=e.nodeAfter,o,s;if(n.type.spec.isolating||r.type.spec.isolating)return!1;if(Ho(i,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=n.contentMatchAt(n.childCount)).findWrapping(r.type))&&s.matchType(o[0]||r.type).validEnd){if(t){let m=e.pos+r.nodeSize,x=w.empty;for(let _=o.length-1;_>=0;_--)x=w.from(o[_].create(null,x));x=w.from(n.copy(x));let y=i.tr.step(new A(e.pos-1,m,e.pos,m,new v(x,1,0),o.length,!0)),k=m+2*o.length;Be(y.doc,k)&&y.join(k),t(y.scrollIntoView())}return!0}let l=E.findFrom(e,1),d=l&&l.$from.blockRange(l.$to),h=d&&se(d);if(h!=null&&h>=e.depth)return t&&t(i.tr.lift(d,h).scrollIntoView()),!0;if(a&&ke(r,"start",!0)&&ke(n,"end")){let m=n,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let y=r,k=1;for(;!y.isTextblock;y=y.firstChild)k++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(t){let _=w.empty;for(let B=x.length-1;B>=0;B--)_=w.from(x[B].copy(_));let z=i.tr.step(new A(e.pos-x.length,e.pos+r.nodeSize,e.pos+k,e.pos+r.nodeSize-k,new v(_,x.length,0),0,!0));t(z.scrollIntoView())}return!0}}return!1}function Ui(i){return function(e,t){let n=e.selection,r=i<0?n.$from:n.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(t&&t(e.tr.setSelection(L.create(e.doc,i<0?r.start(o):r.end(o)))),!0):!1}}var qo=Ui(-1),Jo=Ui(1);function Gi(i,e=null){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o),a=s&&rt(s,i,e);return a?(n&&n(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function st(i,e=null){return function(t,n){let r=!1;for(let o=0;o<t.selection.ranges.length&&!r;o++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[o];t.doc.nodesBetween(s,a,(l,d)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(i,e)))if(l.type==i)r=!0;else{let h=t.doc.resolve(d),m=h.index();r=h.parent.canReplaceWith(m,m+1,i)}})}if(!r)return!1;if(n){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];o.setBlockType(a,l,i,e)}n(o.scrollIntoView())}return!0}}function jo(i,e,t){for(let n=0;n<e.length;n++){let{$from:r,$to:o}=e[n],s=r.depth==0?i.inlineContent&&i.type.allowsMarkType(t):!1;if(i.nodesBetween(r.pos,o.pos,a=>{if(s)return!1;s=a.inlineContent&&a.type.allowsMarkType(t)}),s)return!0}return!1}function Ut(i,e=null){return function(t,n){let{empty:r,$cursor:o,ranges:s}=t.selection;if(r&&!o||!jo(t.doc,s,i))return!1;if(n)if(o)i.isInSet(t.storedMarks||o.marks())?n(t.tr.removeStoredMark(i)):n(t.tr.addStoredMark(i.create(e)));else{let a=!1,l=t.tr;for(let d=0;!a&&d<s.length;d++){let{$from:h,$to:m}=s[d];a=t.doc.rangeHasMark(h.pos,m.pos,i)}for(let d=0;d<s.length;d++){let{$from:h,$to:m}=s[d];if(a)l.removeMark(h.pos,m.pos,i);else{let x=h.pos,y=m.pos,k=h.nodeAfter,_=m.nodeBefore,z=k&&k.isText?/^\s*/.exec(k.text)[0].length:0,B=_&&_.isText?/\s*$/.exec(_.text)[0].length:0;x+z<y&&(x+=z,y-=B),l.addMark(x,y,i.create(e))}}n(l.scrollIntoView())}return!0}}function at(...i){return function(e,t,n){for(let r=0;r<i.length;r++)if(i[r](e,t,n))return!0;return!1}}var Wt=at(Ri,Lo,zo),Ai=at(Ri,Ro,Fo),Z={Enter:at(Hi,Ji,ji,Wi),"Mod-Enter":qi,Backspace:Wt,"Mod-Backspace":Wt,"Shift-Backspace":Wt,Delete:Ai,"Mod-Delete":Ai,"Mod-a":Vo},Wo={"Ctrl-h":Z.Backspace,"Alt-Backspace":Z["Mod-Backspace"],"Ctrl-d":Z.Delete,"Ctrl-Alt-Backspace":Z["Mod-Delete"],"Alt-Delete":Z["Mod-Delete"],"Alt-d":Z["Mod-Delete"],"Ctrl-a":qo,"Ctrl-e":Jo};for(let i in Z)Wo[i]=Z[i];var $a=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;var lt=(i,e)=>{let{from:t,$from:n,to:r,empty:o}=i.selection;return o?!!e.isInSet(i.storedMarks||n.marks()):i.doc.rangeHasMark(t,r,e)},$o=(i,e)=>{for(let t=e.depth;t>0;t-=1)if(e.node(t).type===i)return e.node(t).type;return null},Gt=(i,e,t={})=>{let{selection:n}=i,{$from:r,to:o}=n,s=$o(e,r);return!Object.entries(t).length||!s?!!s:o<=r.end()&&r.parent.hasMarkup(e,t)},Ki=i=>{let e=[],{selection:t,storedMarks:n}=i,{from:r,to:o,empty:s,$from:a}=t;return s?e=n||a.marks():i.doc.nodesBetween(r,o,l=>{e=[...e,...l.marks]}),e},Kt=i=>{let e=[],{selection:{from:t,to:n}}=i;return i.doc.nodesBetween(t,n,r=>{e.push(r)}),e},Qt=(i,e,t)=>{for(let n of e){let{$from:r,$to:o}=n,s=r.depth===0?i.type.allowsMarkType(t):!1;if(i.nodesBetween(r.pos,o.pos,a=>s?!1:(s=a.inlineContent&&a.type.allowsMarkType(t),!0)),s)return!0}return!1};var Qi=(i,e)=>{let{$from:t}=i.selection;for(let n=t.depth;n>=0;n-=1){let r=t.index(n);if(t.node(n).canReplaceWith(r,r,e))return!0}return!1};var Xi=()=>(i,e)=>{let{doc:t,selection:n,tr:r,schema:o}=i,{$head:{pos:s},from:a,to:l}=n,d=o.marks.link;if(a===l){let h=t.resolve(s),m=s-h.textOffset,x=m+h.parent.child(h.index()).nodeSize;r.removeMark(m,x,d)}else r.removeMark(a,l,d);return r.docChanged?(e?.(r),!0):!1},Xt=(i,e={})=>(t,n)=>{let{tr:r,selection:o}=t,{empty:s,ranges:a,$from:l,$to:d}=o;if(s&&o instanceof L){let{$cursor:h}=o;if(!h||!Qt(t.doc,a,i)||(r.addStoredMark(i.create(e)),!r.storedMarksSet))return!1;n?.(r)}else{if(r.addMark(l.pos,d.pos,i.create(e)),!r.docChanged)return!1;n?.(r.scrollIntoView())}return!0},Yi=i=>(e,t)=>{let{tr:n,selection:r,storedMarks:o,doc:s}=e,{empty:a,ranges:l}=r;if(a&&r instanceof L){let{$cursor:d}=r;if(!d||!Qt(e.doc,l,i))return!1;if(i.isInSet(o||d.marks()))return n.removeStoredMark(i),t?.(n),!0}else{for(let d of l){let{$from:h,$to:m}=d;s.rangeHasMark(h.pos,m.pos,i)&&n.removeMark(h.pos,m.pos,i)}if(!n.docChanged)return!1;t?.(n.scrollIntoView())}return!1};var ct=200,D=function(){};D.prototype.append=function(e){return e.length?(e=D.from(e),!this.length&&e||e.length<ct&&this.leafAppend(e)||this.length<ct&&e.leafPrepend(this)||this.appendInner(e)):this};D.prototype.prepend=function(e){return e.length?D.from(e).append(this):this};D.prototype.appendInner=function(e){return new Uo(this,e)};D.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?D.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};D.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};D.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};D.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,s){return r.push(e(o,s))},t,n),r};D.from=function(e){return e instanceof D?e:e&&e.length?new Zi(e):D.empty};var Zi=function(i){function e(n){i.call(this),this.values=n}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,a){for(var l=o;l<s;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,a){for(var l=o-1;l>=s;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=ct)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=ct)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(D);D.empty=new Zi([]);var Uo=function(i){function e(t,n){i.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,o,s){var a=this.left.length;if(r<a&&this.left.forEachInner(n,r,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(n,Math.max(r-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,o,s){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(n,r-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(n,Math.min(r,a),o,s)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(D),Yt=D;var Ko=500,pt=class i{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let r,o;t&&(r=this.remapping(n,this.items.length),o=r.maps.length);let s=e.tr,a,l,d=[],h=[];return this.items.forEach((m,x)=>{if(!m.step){r||(r=this.remapping(n,x+1),o=r.maps.length),o--,h.push(m);return}if(r){h.push(new q(m.map));let y=m.step.map(r.slice(o)),k;y&&s.maybeStep(y).doc&&(k=s.mapping.maps[s.mapping.maps.length-1],d.push(new q(k,void 0,void 0,d.length+h.length))),o--,k&&r.appendMap(k,o)}else s.maybeStep(m.step);if(m.selection)return a=r?m.selection.map(r.slice(o)):m.selection,l=new i(this.items.slice(0,n).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,n,r){let o=[],s=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),x=new q(e.mapping.maps[h],m,t),y;(y=l&&l.merge(x))&&(x=y,h?o.pop():a=a.slice(0,a.length-1)),o.push(x),t&&(s++,t=void 0),r||(l=x)}let d=s-n.depth;return d>Xo&&(a=Qo(a,d),s-=d),new i(a.append(o),s)}remapping(e,t){let n=new Ze;return this.items.forEach((r,o)=>{let s=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?n.maps.length-r.mirrorOffset:void 0;n.appendMap(r.map,s)},e,t),n}addMaps(e){return this.eventCount==0?this:new i(this.items.append(e.map(t=>new q(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(x=>{x.selection&&a--},r);let l=t;this.items.forEach(x=>{let y=o.getMirror(--l);if(y==null)return;s=Math.min(s,y);let k=o.maps[y];if(x.step){let _=e.steps[y].invert(e.docs[y]),z=x.selection&&x.selection.map(o.slice(l+1,y));z&&a++,n.push(new q(k,_,z))}else n.push(new q(k))},r);let d=[];for(let x=t;x<s;x++)d.push(new q(o.maps[x]));let h=this.items.slice(0,r).append(d).append(n),m=new i(h,a);return m.emptyItemCount()>Ko&&(m=m.compress(this.items.length-n.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)r.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(t.slice(n)),d=l&&l.getMap();if(n--,d&&t.appendMap(d,n),l){let h=s.selection&&s.selection.map(t.slice(n));h&&o++;let m=new q(d.invert(),l,h),x,y=r.length-1;(x=r.length&&r[y].merge(m))?r[y]=x:r.push(m)}}else s.map&&n--},this.items.length,0),new i(Yt.from(r.reverse()),o)}};pt.empty=new pt(Yt.empty,0);function Qo(i,e){let t;return i.forEach((n,r)=>{if(n.selection&&e--==0)return t=r,!1}),i.slice(t)}var q=class i{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new i(t.getMap().invert(),t,this.selection)}}},en=class{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}},Xo=20;function Yo(i,e,t){let n=Zo(e),r=tn.get(e).spec.config,o=(t?i.undone:i.done).popEvent(e,n);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(t?i.done:i.undone).addTransform(o.transform,e.selection.getBookmark(),r,n),l=new en(t?a:o.remaining,t?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(tn,{redo:t,historyState:l})}var Zt=!1,er=null;function Zo(i){let e=i.plugins;if(er!=e){Zt=!1,er=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Zt=!0;break}}return Zt}var tn=new be("history"),nl=new be("closeHistory");function dt(i,e){return(t,n)=>{let r=tn.getState(t);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(n){let o=Yo(r,t,i);o&&n(e?o.scrollIntoView():o)}return!0}}var tr=dt(!1,!0),nr=dt(!0,!0),il=dt(!1,!1),rl=dt(!0,!1);var es=()=>window.trustedTypes,ts=i=>es()?.isHTML(i)??!1;var j=class{constructor(e){this.name=e}apply(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?Xt(r)(e,t):!1}}toggle(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?Ut(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=t.marks[this.name];return n?lt(e,n):!1}canExecute(e){return this.toggle()(e)}},nn=class{toggle(){return(e,t)=>{let{schema:n}=e,r=n.nodes.blockquote;return r?this.isActive(e)?Vi(e,t):Gi(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=t.nodes.blockquote;return n?Gt(e,n):!1}canExecute(e){return this.toggle()(e)}},rn=class{insert(){return(e,t)=>{let{schema:n,tr:r}=e,o=n.nodes.horizontal_rule;return o?(t(r.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(e){return Qi(e,e.schema.nodes.horizontal_rule)}},ht=class{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,t)=>{let{schema:n}=e,r=this.getType(n);return r?this.isActive(e)?zi(n.nodes.list_item)(e,t):Li(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=this.getType(t);return n?Gt(e,n):!1}canExecute(e){return this.toggle()(e)}},ee=class{constructor(e){this.level=e}apply(){return(e,t)=>{let{schema:n}=e,r=n.nodes.heading;return r?st(r)(e,t):!1}}toggle(){return(e,t)=>{let{schema:n,selection:r,doc:o}=e,s=n.nodes.heading;if(!s)return!1;let a=r.$from.before(1),d=o.nodeAt(a)?.attrs??{};return this.isActive(e)?st(n.nodes.paragraph,d)(e,t):st(s,Ve(te({},d),{level:this.level}))(e,t)}}isActive(e){let{schema:t}=e,n=Kt(e),r=t.nodes.heading;if(!r)return!1;let o=[r,t.nodes.text,t.nodes.blockquote];return!!n.filter(l=>o.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}},Ce=class{constructor(e){this.align=e}toggle(){return(e,t)=>{let{doc:n,selection:r,tr:o,schema:s}=e,{from:a,to:l}=r,d=!1;return n.nodesBetween(a,l,(h,m)=>{let x=h.type;if([s.nodes.paragraph,s.nodes.heading].includes(x)){d=!0;let y=h.attrs.align===this.align?null:this.align;o.setNodeMarkup(m,x,Ve(te({},h.attrs),{align:y}))}return!0}),d?(o.docChanged&&t?.(o),!0):!1}}isActive(e){return!!Kt(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}},ns={strict:!0},is=class{update(e){return(t,n)=>{let{schema:r,selection:o}=t,s=r.marks.link;return!s||o.empty?!1:Ut(s,e)(t,n)}}insert(e,t){return(n,r)=>{let{schema:o,tr:s}=n;if(!o.marks.link)return!1;let l={href:t.href,title:t.title??e,target:t.target??"_blank"},d=o.text(e,[o.marks.link.create(l)]);return s.replaceSelectionWith(d,!1).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e,t=ns){if(t.strict)return!0;let{schema:n}=e,r=n.marks.link;return r?lt(e,r):!1}remove(e,t){return Xi()(e,t)}canExecute(e){let t={href:""};return this.insert("Exec",t)(e)||this.update(t)(e)}},rs=class{insert(e,t){return(n,r)=>{let{schema:o,tr:s,selection:a}=n,l=o.nodes.image;if(!l)return!1;let d=te({width:null,src:e},t);!d.width&&a instanceof N&&a.node.type===l&&(d.width=a.node.attrs.width),s.replaceSelectionWith(l.createAndFill(d));let h=s.doc.resolve(s.selection.anchor-s.selection.$anchor.nodeBefore.nodeSize);return s.setSelection(new N(h)).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e){let{selection:t}=e;return t instanceof N?t.node.type.name==="image":!1}},ar=class{constructor(e,t="color"){this.name=e,this.attrName=t}apply(e){return(t,n)=>{let{schema:r,selection:o,doc:s}=t,a=r.marks[this.name];if(!a)return!1;let{from:l,to:d,empty:h}=o;if(!h&&l+1===d){let m=s.nodeAt(l);if(m?.isAtom&&!m.isText&&m.isLeaf)return!1}return Xt(a,e)(t,n)}}isActive(e){let{schema:t}=e,n=t.marks[this.name];return n?lt(e,n):!1}getActiveColors(e){if(!this.isActive(e))return[];let{schema:t}=e;return Ki(e).filter(o=>o.type===t.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?Yi(r)(e,t):!1}}canExecute(e){let t=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(t)(e)}},ss=["link"],on=class{insert(){return(e,t)=>{let{tr:n}=e,{ranges:r,empty:o}=n.selection;return o||(Object.entries(e.schema.marks).forEach(([s,a])=>{ss.includes(s)||r.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos,a)})}),t(n)),!0}}canExecute(){return!0}},as=["paragraph","heading","blockquote"],ir=0,rr=10,ls=(i,e,t)=>{let n=i.doc.nodeAt(e);if(!n)return!1;let r=n.attrs.indent??0,o=pi(r+(t==="increase"?1:-1),ir,rr);if(o===r||o<ir||o>rr)return!1;let s=Ve(te({},n.attrs),{indent:o});return i.setNodeMarkup(e,n.type,s),!0},ft=class{constructor(e){this.method="increase",this.method=e}insert(){return(e,t)=>{let{tr:n,doc:r}=e,{from:o,to:s}=n.selection,a=!1;return r.nodesBetween(o,s,(l,d)=>{let h=l.type;return as.includes(h.name)?(a=ls(n,d,this.method),!1):!l.type.name.includes("list")}),a?(n.docChanged&&t?.(n),!0):!1}}canExecute(e){return this.insert()(e)}},mt=class{constructor(e){this.mode="undo",this.mode=e}insert(){return(e,t)=>this.mode==="undo"?tr(e,t):nr(e,t)}canExecute(e){return this.insert()(e)}},gc=new j("strong"),xc=new j("em"),yc=new j("code"),wc=new j("u"),vc=new j("s"),_c=new nn,bc=new rn,kc=new on,Cc=new ht(!0),Sc=new ht(!1),Ec=new ee(1),Ic=new ee(2),Mc=new ee(3),Nc=new ee(4),Tc=new ee(5),Oc=new ee(6),Pc=new Ce("left"),Dc=new Ce("center"),Lc=new Ce("right"),zc=new Ce("justify"),Ac=new is,Rc=new rs,Fc=new ar("text_color","color"),Bc=new ar("text_background_color","backgroundColor"),Vc=new ft("increase"),Hc=new ft("decrease"),qc=new j("sup"),Jc=new j("sub"),jc=new mt("undo"),Wc=new mt("redo");var sn={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},an=class{constructor(e={}){this.locals=sn,this.get=t=>{let n=this.locals[t];return n?dn(n)?n:gt(n):gt("")},this.locals=te(te({},sn),e)}},cs=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,ps=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,ds=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,us=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,hs=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,fs=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,ms=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,gs=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,xs=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,ys=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,ws=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,vs=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,_s=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,bs=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,ks=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,Cs=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,Ss=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,Es=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,Is=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,Ms='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',Ns='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',Ts='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',Os='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',Ps='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',Ds='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',Ls=20,zs=20,As="currentColor",lr={bold:cs,italic:ps,code:ds,underline:us,strike:hs,ordered_list:fs,bullet_list:ms,blockquote:gs,link:xs,unlink:ys,image:ws,align_left:vs,align_center:_s,align_right:bs,align_justify:ks,text_color:Cs,color_fill:Ss,horizontal_rule:Es,format_clear:Is,indent:Ms,outdent:Ns,superscript:Ts,subscript:Os,undo:Ps,redo:Ds,path:"<path></path>"},ln=class{static get(e,t=As){let n=lr[e];return n&&(n.includes("<path")||n.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${t}
          height=${Ls}
          width=${zs}
        >
          ${n}
        </svg>
      `:n}},cn=(()=>{let e=class e{constructor(){this.locals={},this.icons={}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Se({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Rs=(()=>{let e=class e{constructor(n){this.config=n}get locals(){return new an(this.config.locals)}getIcon(n){return this.config.icons[n]?this.config.icons[n]:ln.get(n)}};e.\u0275fac=function(r){return new(r||e)(hn(cn,8))},e.\u0275prov=Se({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),or=i=>({locals:i.locals??{},icons:i.icons??{}}),Fs=(()=>{let e=class e{constructor(n){this.sanitizer=n}transform(n){return ts(n)?n:this.sanitizer.bypassSecurityTrustHtml(n)}};e.\u0275fac=function(r){return new(r||e)(Me(_n,16))},e.\u0275pipe=fn({name:"sanitizeHtml",type:e,pure:!0});let i=e;return i})();var Bs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ie({type:e}),e.\u0275inj=Ee({providers:[Fs],imports:[Pe,Je]});let i=e;return i})(),ut=new un("NgxEditorConfig"),sr={locals:sn,icons:lr},cr=(()=>{let e=class e{static forRoot(n=sr){return{ngModule:e,providers:[{provide:ut,useValue:n},{provide:cn,useFactory:or,deps:[ut]}]}}static forChild(n=sr){return{ngModule:e,providers:[{provide:ut,useValue:n},{provide:cn,useFactory:or,deps:[ut]},Rs]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ie({type:e}),e.\u0275inj=Ee({imports:[Pe,Bs]});let i=e;return i})();var $c=typeof navigator<"u"?/Mac/.test(navigator.platform):!1;var Hs=["*"],qs=(i,e)=>({"selected-menu-item":i,"focused-item":e});function Js(i,e){if(i&1){let t=Ne();yt(0),c(1,"a",10),R("click",function(){let r=$(t).$implicit,o=S();return U(o.setFocus(r==null?null:r.path))}),c(2,"span",11),p(3),u(),p(4),u(),wt()}if(i&2){let t=e.$implicit,n=S();f(),g("routerLink",t==null?null:t.path)("ngClass",kt(4,qs,n.isRouteActive(t==null?null:t.path),n.focusedRoute===(t==null?null:t.path))),f(2),V(" ",t==null||t.data==null?null:t.data.icon," "),f(),V(" ",t==null?null:t.title," ")}}var pr=(()=>{let e=class e extends Q{constructor(){super(),this.username="",this.focusedRoute=null,this.settingsRoutes=pn.flatMap(n=>n.children).filter(n=>n?.title)}ngOnInit(){let n=sessionStorage.getItem("loggedInUser"),r=n?JSON.parse(n):null;this.userImg=r?.picture,this.username=r.name}isRouteActive(n){return this.router.isActive(n,!1)}trackByFn(n,r){return r.path}setFocus(n){this.focusedRoute=n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=O({type:e,selectors:[["app-users_settings"]],features:[G],ngContentSelectors:Hs,decls:15,vars:4,consts:[[1,"desktop:flex","tablet:flex","w-full","gap-4"],["appearance","outlined",1,"h-fit"],[1,"flex","flex-col","items-center"],["alt","Bonnie image","width","100%","height","100%",1,"w-24","h-24","mb-3","rounded-full","shadow-lg",3,"src"],[1,"mb-1","text-xl","font-medium","text-blue"],[1,"text-sm","text-gray-500","dark:text-gray-400","pb-2"],[1,"w-72","text-blue"],[1,"p-5"],[4,"ngFor","ngForOf","ngForTrackBy"],["appearance","outlined",1,"w-full"],[1,"hover:bg-blue-300","bg-cover","w-80","cursor-pointer","hover:shadow-inner","flex","items-center","rounded-3xl","transition-all","ease-linear","duration-500","gap-2","p-2",3,"click","routerLink","ngClass"],[1,"material-symbols-outlined"]],template:function(r,o){r&1&&(vt(),c(0,"div",0)(1,"mat-card",1)(2,"mat-card-content")(3,"div",2),b(4,"img",3),c(5,"h5",4),p(6),u(),c(7,"span",5),p(8,"Visual Designer"),u(),b(9,"mat-divider",6),c(10,"div",7),I(11,Js,5,7,"ng-container",8),u()()()(),c(12,"mat-card",9)(13,"mat-card-content"),_t(14),u()()()),r&2&&(f(4),g("src",o.userImg,xt),f(2),M(o.username),f(5),g("ngForOf",o.settingsRoutes)("ngForTrackBy",o.trackByFn))},dependencies:[yn,qe,je,Mn,Tn,kn],styles:[".focused-item[_ngcontent-%COMP%]{outline:2px solid #3182ce;background-color:#3182ce;color:#fff}"]});let i=e;return i})();var pn=[{path:"",component:Et,children:[{path:"settings",component:li,title:"Settings",data:{icon:"settings"}},{path:"change-password",component:ri,title:"Change Password",data:{icon:"lock"}},{path:"connections",component:si,title:"Connections",data:{icon:"link"}},{path:"privacy-policy",component:ai,title:"Privacy Policy",data:{icon:"privacy_tip"}},{path:"terms-conditions",component:ci,title:"Terms & Conditions",data:{icon:"gavel"}},{path:"",redirectTo:"settings",pathMatch:"full"}]}],Ip=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ie({type:e}),e.\u0275inj=Ee({providers:[$e,Un],imports:[Pe,Vn,In,Je,On,Rn,En,Ln,Wn,We,cr,An,Pn,Zn,Cn.forChild(pn)]});let i=e;return i})();mn(Et,function(){return[bn,pr]},[]);export{Ip as SettingsModule,pn as routes};
