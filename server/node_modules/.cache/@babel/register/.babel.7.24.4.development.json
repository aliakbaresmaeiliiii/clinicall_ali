{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = require(\"./routes/index\");\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = require(\"./middlewares/express_error_yup\");\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = require(\"./constants/constants_allowed_orginal\");\nconst express_error_response_1 = require(\"./middlewares/express_error_response\");\nconst express_auto_handle_transaction_1 = require(\"./middlewares/express_auto_handle_transaction\");\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.allowedOrigins,\n  methods: 'GET,POST,PUT,DELETE',\n  allowedHeaders: 'Content-Type,Authorization'\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set('views', path_1.default.join(`${__dirname}/../`, 'views'));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: '200mb',\n  type: 'application/json'\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, 'public')));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.routes);\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', express_error_yup_1.ExpressErrorYup);\napp.use('/v1', express_error_response_1.ExpressErrorResponse);\napp.use(express_auto_handle_transaction_1.ExpressAutoHandleTransaction);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvbl8xIiwib3B0Q29ycyIsIm9yaWdpbiIsImFsbG93ZWRPcmlnaW5zIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiYXBwIiwiZGVmYXVsdCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwibGltaXQiLCJ0eXBlIiwic3RhdGljIiwiZXhwcmVzcyIsIm13Iiwicm91dGVzIiwiRXhwcmVzc0Vycm9yWXVwIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IGhwcCBmcm9tICdocHAnO1xyXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcclxuaW1wb3J0IHJlcXVlc3RJcCBmcm9tICdyZXF1ZXN0LWlwJztcclxuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcclxuaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJ2h0dHAtZXJyb3JzJztcclxuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcclxuaW1wb3J0IHtyb3V0ZXN9IGZyb20gJy4vcm91dGVzL2luZGV4JztcclxuaW1wb3J0IHVzZXJBZ2VudCBmcm9tICdleHByZXNzLXVzZXJhZ2VudCc7XHJcbmltcG9ydCB7RXhwcmVzc0Vycm9yWXVwfSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwJztcclxuaW1wb3J0IGV4cHJlc3MsIHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQge2FsbG93ZWRPcmlnaW5zfSBmcm9tICcuL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsJztcclxuaW1wb3J0IHtFeHByZXNzRXJyb3JSZXNwb25zZX0gZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlJztcclxuaW1wb3J0IHtFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9ufSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24nO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xyXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogYWxsb3dlZE9yaWdpbnMsXHJcbiAgbWV0aG9kczogJ0dFVCxQT1NULFBVVCxERUxFVEUnLFxyXG4gIGFsbG93ZWRIZWFkZXJzOiAnQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb24nXHJcbn1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpXHJcblxyXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxyXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsICd2aWV3cycpKVxyXG4vLyBhcHAuc2V0KCd2aWV3IGVuZ2luZScsICdwdWcnKVxyXG5cclxuYXBwLnVzZShoZWxtZXQoKSlcclxuYXBwLnVzZShjb3JzKG9wdENvcnMpKVxyXG4vLyBhcHAudXNlKGxvZ2dlcignY29tYmluZWQnLCB7IHN0cmVhbTogd2luc3RvblN0cmVhbSB9KSlcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpIC8vIFRPRE8gOiAgY2hlY2sgaXQgc2hvdWxkIGJlIGZhbHNlIG9yIHRydWVcclxuYXBwLnVzZShcclxuICBleHByZXNzLmpzb24oe1xyXG4gICAgbGltaXQ6ICcyMDBtYicsXHJcbiAgICB0eXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfSlcclxuKVxyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKVxyXG5hcHAudXNlKGNvbXByZXNzaW9uKCkpXHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgJ3B1YmxpYycpKSlcclxuYXBwLnVzZShocHAoKSlcclxuYXBwLnVzZSh1c2VyQWdlbnQuZXhwcmVzcygpKVxyXG5hcHAudXNlKHJlcXVlc3RJcC5tdygpKVxyXG4vLyBUT0RPIDogYWRkIHRoaXMgbGF0ZXJcclxuXHJcblxyXG4vLyBJbml0aWFsIFJvdXRlXHJcbmFwcC51c2Uocm91dGVzKVxyXG5cclxuLy8gYXBwLnVzZSgnL3YxJywgaGFuZGxlUm9sbGJhY2tUcmFuc2FjdGlvbilcclxuYXBwLnVzZSgnL3YxJywgRXhwcmVzc0Vycm9yWXVwKVxyXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JSZXNwb25zZSlcclxuYXBwLnVzZShFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKVxyXG5cclxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZShmdW5jdGlvbiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcclxuICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpXHJcbn0pXHJcblxyXG4vLyBlcnJvciBoYW5kbGVyXHJcbmFwcC51c2UoZnVuY3Rpb24gKGVycjogYW55LCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xyXG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XHJcbiAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2VcclxuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge31cclxuXHJcbiAgLy8gcmVuZGVyIHRoZSBlcnJvciBwYWdlXHJcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgcmVzLmpzb24oe1xyXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICBlcnJvcjogZXJyXHJcbiAgfSk7XHJcbn0pXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0EsTUFBQUEsS0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLE1BQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxZQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFLLGFBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQU0sYUFBQSxHQUFBUCxlQUFBLENBQUFDLE9BQUE7QUFD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","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_auto_handle_transaction_1","optCors","origin","allowedOrigins","methods","allowedHeaders","app","default","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","routes","ExpressErrorYup","ExpressErrorResponse","ExpressAutoHandleTransaction","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport hpp from 'hpp';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport helmet from 'helmet';\r\nimport requestIp from 'request-ip';\r\nimport compression from 'compression';\r\nimport createError from 'http-errors';\r\nimport cookieParser from 'cookie-parser';\r\nimport {routes} from './routes/index';\r\nimport userAgent from 'express-useragent';\r\nimport {ExpressErrorYup} from './middlewares/express_error_yup';\r\nimport express, { NextFunction, Request, Response } from 'express';\r\nimport {allowedOrigins} from './constants/constants_allowed_orginal';\r\nimport {ExpressErrorResponse} from './middlewares/express_error_response';\r\nimport {ExpressAutoHandleTransaction} from './middlewares/express_auto_handle_transaction';\r\n\r\n// TODO: change to .ts\r\nconst optCors: cors.CorsOptions = {\r\n  origin: allowedOrigins,\r\n  methods: 'GET,POST,PUT,DELETE',\r\n  allowedHeaders: 'Content-Type,Authorization'\r\n}\r\nconst app = express()\r\n\r\n// view engine setup\r\napp.set('views', path.join(`${__dirname}/../`, 'views'))\r\n// app.set('view engine', 'pug')\r\n\r\napp.use(helmet())\r\napp.use(cors(optCors))\r\n// app.use(logger('combined', { stream: winstonStream }))\r\napp.use(express.urlencoded({ extended: false })) // TODO :  check it should be false or true\r\napp.use(\r\n  express.json({\r\n    limit: '200mb',\r\n    type: 'application/json',\r\n  })\r\n)\r\napp.use(cookieParser())\r\napp.use(compression())\r\napp.use(express.static(path.join(`${__dirname}/../`, 'public')))\r\napp.use(hpp())\r\napp.use(userAgent.express())\r\napp.use(requestIp.mw())\r\n// TODO : add this later\r\n\r\n\r\n// Initial Route\r\napp.use(routes)\r\n\r\n// app.use('/v1', handleRollbackTransaction)\r\napp.use('/v1', ExpressErrorYup)\r\napp.use('/v1', ExpressErrorResponse)\r\napp.use(ExpressAutoHandleTransaction)\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req: Request, res: Response, next: NextFunction) {\r\n  next(createError(404))\r\n})\r\n\r\n// error handler\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.json({\r\n    message: err.message,\r\n    error: err\r\n  });\r\n})\r\n\r\nmodule.exports = app"],"mappings":"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","ignoreList":[]}},"mtime":1737459241068},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.routes = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = require(\"./public\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nexports.routes = express_1.default.Router();\n/* Home Page. */\nexports.routes.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nexports.routes.get('/v1', function (req, res, next) {\n  throw new response_error_1.ResponseError.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nexports.routes.use('/v1', public_1.router);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZXhwb3J0cyIsInJvdXRlcyIsImRlZmF1bHQiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsIlJlc3BvbnNlRXJyb3IiLCJGb3JiaWRkZW4iLCJ1c2UiLCJyb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQge3JvdXRlcn0gZnJvbSAnLi9wdWJsaWMnO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZXhwb3J0IGNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEhvbWUgUGFnZS4gKi9cbnJvdXRlcy5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcblxuICAgIHJldHVybiByZXMuc2VuZChgPGgxPldlbGNvbWUgVG8gQ2xpY25pYyBTdXBwb3J0IENlbnRlciBzZXJ2ZXI8L2gxPjxici8+PGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkZpbmQgQXBpIGRvY3MgSGVyZSA6PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPjxhPi92MS9hcGktZG9jczwvYT48L2gzPmApXG4gIH0pXG5cbi8qIEZvcmJpZGRlbiBQYWdlLiAqL1xucm91dGVzLmdldCgnL3YxJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0ICkge1xuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkZvcmJpZGRlbignZm9yYmlkZGVuLCB3cm9uZyBhY2Nlc3MgZW5kcG9pbnQnKVxuICB9KVxuXG4vKiBEZWNsYXJlIFJvdXRlICovXG5yb3V0ZXMudXNlKCcvdjEnLCByb3V0ZXIpXG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVhRyxPQUFBLENBQUFDLE1BQU0sR0FBR04sU0FBQSxDQUFBTyxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUV0QztBQUNBSCxPQUFBLENBQUFDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsT0FBQSxDQUFBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFDdEMsTUFBTSxJQUFJUixnQkFBQSxDQUFBVSxhQUFhLENBQUNDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFSjtBQUNBVixPQUFBLENBQUFDLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLEtBQUssRUFBRWIsUUFBQSxDQUFBYyxNQUFNLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","exports","routes","default","Router","get","req","res","next","send","ResponseError","Forbidden","use","router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\nimport {router} from './public';\nimport {ResponseError} from '../modules/error/response_error';\n\nexport const routes = express.Router();\n\n/* Home Page. */\nroutes.get('/', function (req, res, next) {\n\n    return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`)\n  })\n\n/* Forbidden Page. */\nroutes.get('/v1', function (req, res, next ) {\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\n  })\n\n/* Declare Route */\nroutes.use('/v1', router)\n\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AAEaG,OAAA,CAAAC,MAAM,GAAGN,SAAA,CAAAO,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAH,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAR,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIR,gBAAA,CAAAU,aAAa,CAACC,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAV,OAAA,CAAAC,MAAM,CAACU,GAAG,CAAC,KAAK,EAAEb,QAAA,CAAAc,MAAM,CAAC","ignoreList":[]}},"mtime":1725677148456},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.router = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nexports.router = express_1.default.Router();\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\nrequire(\"../controller/doctors/controller\");\nrequire(\"../controller/medications/controller\");\nrequire(\"../controller/diseases/controller\");\nrequire(\"../controller/prescription-medicine/controller\");\nrequire(\"../controller/clinic_services/controller\");\nrequire(\"../controller/cities/controller\");\nrequire(\"../controller/insurance/controller\");\nrequire(\"../controller/clinic/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJvdXRlciIsImRlZmF1bHQiLCJSb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9wdWJsaWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gIEFQSXNcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL25hdi1pdGVtcy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hcHBvaW50bWVudC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9kb2N0b3JzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL21lZGljYXRpb25zL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2Rpc2Vhc2VzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3ByZXNjcmlwdGlvbi1tZWRpY2luZS9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jbGluaWNfc2VydmljZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvY2l0aWVzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2luc3VyYW5jZS9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jbGluaWMvY29udHJvbGxlclwiKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsTUFBTSxHQUFHSixTQUFBLENBQUFLLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXRDO0FBQ0FKLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUN4Q0EsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDN0NBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3pDQSxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDNUNBLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztBQUMzQ0EsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBQy9DQSxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDNUNBLE9BQU8sQ0FBQyxnREFBZ0QsQ0FBQztBQUN6REEsT0FBTyxDQUFDLDBDQUEwQyxDQUFDO0FBQ25EQSxPQUFPLENBQUMsaUNBQWlDLENBQUM7QUFDMUNBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3Q0EsT0FBTyxDQUFDLGlDQUFpQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express_1","__importDefault","require","exports","router","default","Router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nexport const router = express.Router();\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\nrequire(\"../controller/doctors/controller\");\r\nrequire(\"../controller/medications/controller\");\r\nrequire(\"../controller/diseases/controller\");\r\nrequire(\"../controller/prescription-medicine/controller\");\r\nrequire(\"../controller/clinic_services/controller\");\r\nrequire(\"../controller/cities/controller\");\r\nrequire(\"../controller/insurance/controller\");\r\nrequire(\"../controller/clinic/controller\");\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,MAAM,GAAGJ,SAAA,CAAAK,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAJ,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,kCAAkC,CAAC;AAC3CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,gDAAgD,CAAC;AACzDA,OAAO,CAAC,0CAA0C,CAAC;AACnDA,OAAO,CAAC,iCAAiC,CAAC;AAC1CA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,iCAAiC,CAAC","ignoreList":[]}},"mtime":1737888183606},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst service_2 = require(\"../clinic/service\");\n// ***** sign-up *****\npublic_1.router.post(`/auth/clinic/register`, (0, async_handler_1.asyncHandler)(function clinicRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_2.ClinicService.registerClinic(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** confirm *****\npublic_1.router.post(\"/auth/verify-clinic-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmClinicEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** clinic-sign-in *****\npublic_1.router.post(\"/auth/clinic-sign-in\", (0, async_handler_1.asyncHandler)(function clinicSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.clinicSignIn(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** doctor-sign-in *****\npublic_1.router.post(\"/auth/doctor-sign-in\", (0, async_handler_1.asyncHandler)(function doctorSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.doctorSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/patient-sign-in\", (0, async_handler_1.asyncHandler)(function patientSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.patientSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJhc3luY19oYW5kbGVyXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInNlcnZpY2VfMiIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJjbGluaWNSZWdpc3RlciIsInJlcSIsInJlcyIsImZvcm1EYXRhIiwiYm9keSIsImRhdGEiLCJDbGluaWNTZXJ2aWNlIiwicmVnaXN0ZXJDbGluaWMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwidmVyaWZ5RW1haWwiLCJuZXh0IiwiZW1haWwiLCJ2ZXJpZnlfY29kZSIsIkF1dGhTZXJ2aWNlIiwiY29uZmlybUNsaW5pY0VtYWlsIiwiY2xpbmljU2lnbkluIiwiZG9jdG9yU2lnbkluIiwicGF0aWVudFNpZ25JbiJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcbmltcG9ydCB7IENsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi4vY2xpbmljL3NlcnZpY2VcIjtcblxuLy8gKioqKiogc2lnbi11cCAqKioqKlxucm91dGVyLnBvc3QoXG4gIGAvYXV0aC9jbGluaWMvcmVnaXN0ZXJgLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2xpbmljUmVnaXN0ZXIocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2xpbmljU2VydmljZS5yZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5cbi8vICoqKioqIGNvbmZpcm0gKioqKipcbnJvdXRlci5wb3N0KFxuICBcIi9hdXRoL3ZlcmlmeS1jbGluaWMtZW1haWxcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUVtYWlsKFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5jb25maXJtQ2xpbmljRW1haWwoe2VtYWlsLCB2ZXJpZnlfY29kZX0pO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xuXG5cbi8vICoqKioqIGNsaW5pYy1zaWduLWluICoqKioqXG5yb3V0ZXIucG9zdChcbiAgXCIvYXV0aC9jbGluaWMtc2lnbi1pblwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2xpbmljU2lnbkluKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmNsaW5pY1NpZ25Jbihmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4vLyAqKioqKiBkb2N0b3Itc2lnbi1pbiAqKioqKlxucm91dGVyLnBvc3QoXG4gIFwiL2F1dGgvZG9jdG9yLXNpZ24taW5cIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRvY3RvclNpZ25JbihyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5kb2N0b3JTaWduSW4oZm9ybURhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xucm91dGVyLnBvc3QoXG4gIFwiL2F1dGgvcGF0aWVudC1zaWduLWluXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBwYXRpZW50U2lnbkluKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLnBhdGllbnRTaWduSW4oZm9ybURhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xuXG4vLyByb3V0ZXIuZ2V0KFxuLy8gICBcIi9hdXRoL3ZlcmlmeS1lbWFpbC1jb2RlXCIsXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWxDb2RlKHJlcTogYW55LCByZXM6IGFueSkge1xuLy8gICAgIGNvbnN0IGVtYWlsID0gcmVxLnF1ZXJ5LmVtYWlsO1xuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5jb25maXJtRW1haWxDb2RlKGVtYWlsKTtcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuLy8gICB9KVxuLy8gKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxjQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxTQUFBLEdBQUFKLE9BQUE7QUFFQTtBQUNBRSxRQUFBLENBQUFHLE1BQU0sQ0FBQ0MsSUFBSSxDQUNULHVCQUF1QixFQUN2QixJQUFBTCxlQUFBLENBQUFNLFlBQVksRUFBQyxTQUFlQyxjQUFjQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQzNELE1BQU1DLFFBQVEsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0lBQ3pCLE1BQU1DLElBQUksR0FBRyxNQUFNVCxTQUFBLENBQUFVLGFBQWEsQ0FBQ0MsY0FBYyxDQUFDSixRQUFRLENBQUM7SUFD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","map":{"version":3,"names":["app_response_1","require","async_handler_1","public_1","service_1","service_2","router","post","asyncHandler","clinicRegister","req","res","formData","body","data","ClinicService","registerClinic","buildResponse","BuildResponse","get","status","code","json","verifyEmail","next","email","verify_code","AuthService","confirmClinicEmail","clinicSignIn","doctorSignIn","patientSignIn"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { BuildResponse } from \"../../modules/response/app_response\";\n\nimport { asyncHandler } from \"../../helper/async-handler\";\nimport { router } from \"../../routes/public\";\nimport { AuthService } from \"./service\";\nimport { ClinicService } from \"../clinic/service\";\n\n// ***** sign-up *****\nrouter.post(\n  `/auth/clinic/register`,\n  asyncHandler(async function clinicRegister(req: any, res: any) {\n    const formData = req.body;\n    const data = await ClinicService.registerClinic(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n// ***** confirm *****\nrouter.post(\n  \"/auth/verify-clinic-email\",\n  asyncHandler(async function verifyEmail(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { email, verify_code } = req.body;\n\n    const data = await AuthService.confirmClinicEmail({email, verify_code});\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n\n// ***** clinic-sign-in *****\nrouter.post(\n  \"/auth/clinic-sign-in\",\n  asyncHandler(async function clinicSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.clinicSignIn(formData);\n    const buildResponse = await BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n// ***** doctor-sign-in *****\nrouter.post(\n  \"/auth/doctor-sign-in\",\n  asyncHandler(async function doctorSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.doctorSignIn(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\nrouter.post(\n  \"/auth/patient-sign-in\",\n  asyncHandler(async function patientSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.patientSignIn(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n"],"mappings":"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","ignoreList":[]}},"mtime":1738810338809},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BuildResponse = void 0;\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.BuildResponse = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccmVzcG9uc2VcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xuXG50eXBlIERhdGFSZXNwb25zZSA9XG4gIHwge1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgY29kZT86IG51bWJlcjtcbiAgICB9XG4gIHwgYW55O1xuXG5leHBvcnQgY2xhc3MgQnVpbGRSZXNwb25zZSB7XG4gIHByaXZhdGUgc3RhdGljIGJhc2VSZXNwb25zZShkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1lc3NhZ2UgPSBcImRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQhXCIsXG4gICAgICBjb2RlID0gMjAwLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBkYXRhUmVzcG9uc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4ucmVzdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIFN1Y2Nlc3NcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyBnZXQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gdGhpcy5iYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBDcmVhdGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBjb2RkZTogMjAxLFxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVkIGFkZGVkXCIsXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzcG9uc2UgVXBkYXRlXG4gICAqL1xuXG4gIHB1YmxpYyBzdGF0aWMgdXBkYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcInRoZSBkYXRhIGhhcyBiZWVkIHVwZGF0ZWRcIixcbiAgICAgIC4uLmRhdGFSZXNwb25zZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBEZWxldGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcImRhdGEgaGFzIGJlZW4gZGVsZXRlZFwiLFxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhcHBSZXNwb25zZShkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxuICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlID8gZGF0YS5tZXNzYWdlIDogXCJcIixcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgPyBkYXRhLnN0YXR1cyA6IDAsXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VDb2RlOiBkYXRhLm1lc3NhZ2VDb2RlID8gZGF0YS5tZXNzYWdlQ29kZSA6IFwiXCIsXG4gICAgICBtZXNzYWdlS2luZDogZGF0YS5tZXNzYWdlS2luZCA/IGRhdGEubWVzc2FnZUtpbmQgOiBudWxsLFxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXG4gICAgICBkYXRhOiBkYXRhLmRhdGEgPyBkYXRhLmRhdGEgOiBudWxsLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIH1cbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVNBLE1BQWFBLGFBQWE7RUFDaEIsT0FBT0MsWUFBWUEsQ0FBQ0MsWUFBMEI7SUFDcEQsTUFBTTtRQUNKQyxPQUFPLEdBQUcseUJBQXlCO1FBQ25DQyxJQUFJLEdBQUc7TUFBRyxJQUVSRixZQUFZO01BRFhHLElBQUksR0FBQUMsTUFBQSxDQUNMSixZQUFZLEVBSlYsbUJBSUwsQ0FBZTtJQUNoQixPQUFBSyxNQUFBLENBQUFDLE1BQUE7TUFDRUosSUFBSTtNQUNKRDtJQUFPLEdBQ0pFLElBQUk7RUFFWDtFQUVBOzs7RUFJTyxPQUFPSSxHQUFHQSxDQUFDUCxZQUEwQjtJQUMxQyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxZQUFZLENBQUM7RUFDeEM7RUFFQTs7O0VBR08sT0FBT1EsT0FBT0EsQ0FBQ1IsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCRyxLQUFLLEVBQUUsR0FBRztNQUNWUixPQUFPLEVBQUU7SUFBcUIsR0FDM0JELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUlPLE9BQU9VLE9BQU9BLENBQUNWLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQTJCLEdBQ2pDRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFHTyxPQUFPVyxPQUFPQSxDQUFDWCxZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUF1QixHQUM3QkQsWUFBWSxFQUNmO0VBQ0o7RUFFTyxPQUFPWSxXQUFXQSxDQUFDQyxJQUFTO0lBQ2pDLE9BQU87TUFDTFgsSUFBSSxFQUFFVyxJQUFJLENBQUNYLElBQUksR0FBR1csSUFBSSxDQUFDWCxJQUFJLEdBQUcsR0FBRztNQUNqQ0QsT0FBTyxFQUFFWSxJQUFJLENBQUNaLE9BQU8sR0FBR1ksSUFBSSxDQUFDWixPQUFPLEdBQUcsRUFBRTtNQUN6Q2EsTUFBTSxFQUFFRCxJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFRixJQUFJLENBQUNFLFVBQVUsR0FBR0YsSUFBSSxDQUFDRSxVQUFVLEdBQUcsS0FBSztNQUNyREMsV0FBVyxFQUFFSCxJQUFJLENBQUNHLFdBQVcsR0FBR0gsSUFBSSxDQUFDRyxXQUFXLEdBQUcsRUFBRTtNQUNyREMsV0FBVyxFQUFFSixJQUFJLENBQUNJLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSTtNQUN2REMsYUFBYSxFQUFFTCxJQUFJLENBQUNLLGFBQWEsR0FBR0wsSUFBSSxDQUFDSyxhQUFhLEdBQUcsS0FBSztNQUM5REwsSUFBSSxFQUFFQSxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLEdBQUc7S0FDaEI7RUFDbEI7O0FBakVGTSxPQUFBLENBQUFyQixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\response\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\n\ntype DataResponse =\n  | {\n      message: string;\n      code?: number;\n    }\n  | any;\n\nexport class BuildResponse {\n  private static baseResponse(dataResponse: DataResponse) {\n    const {\n      message = \"data has been received!\",\n      code = 200,\n      ...rest\n    } = dataResponse;\n    return {\n      code,\n      message,\n      ...rest,\n    };\n  }\n\n  /**\n   * Response Success\n   */\n\n  public static get(dataResponse: DataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n\n  /**\n   * Response Create\n   */\n  public static created(dataResponse: DataResponse) {\n    return this.baseResponse({\n      codde: 201,\n      message: \"data has beed added\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Update\n   */\n\n  public static updated(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"the data has beed updated\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Delete\n   */\n  public static deleted(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"data has been deleted\",\n      ...dataResponse,\n    });\n  }\n\n  public static appResponse(data: any) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null,\n    } as AppResponse;\n  }\n}\n\n"],"mappings":";;;;;;;;;;;;;;AASA,MAAaA,aAAa;EAChB,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAjEFM,OAAA,CAAArB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830104},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"5h\"; // 30 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass AuthService {\n  static generateToken(user) {\n    const payload = {\n      id: user.id,\n      email: user.email,\n      is_verified: user.is_verified // Include verification status\n    };\n    return jsonwebtoken_1.default.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\n  }\n  static clinicSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getClinicByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          name: userData[0].name,\n          owner_name: userData[0].owner_name,\n          email: userData[0].email,\n          city: userData[0].city,\n          phone: userData[0].phone,\n          state: userData[0].state,\n          zip_code: userData[0].zip_code,\n          country: userData[0].country\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static doctorSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getDoctorByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        // if (!userData || userData.length === 0) {\n        //   throw new ResponseError.NotFound(\n        //     \"Account not found or has been deleted.\"\n        //   );\n        // }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.emailConfirmed) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          first_name: userData[0].name,\n          last_name: userData[0].owner_name,\n          email: userData[0].owner_name\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static patientSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getDoctorByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        // if (!userData || userData.length === 0) {\n        //   throw new ResponseError.NotFound(\n        //     \"Account not found or has been deleted.\"\n        //   );\n        // }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.emailConfirmed) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          first_name: userData[0].name,\n          last_name: userData[0].owner_name,\n          email: userData[0].owner_name\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  // *****confirmClinicEmail*****\n  static confirmClinicEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.AuthService = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJ1c2VfdmFsaWRhdGlvbl8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImRiXzEiLCJzY2hlbWFfMSIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIiwicHJvY2VzcyIsImVudiIsIkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCIsIkpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQiLCJleHBpcmVzSW4iLCJkZWZhdWx0IiwiQXV0aFNlcnZpY2UiLCJnZW5lcmF0ZVRva2VuIiwidXNlciIsInBheWxvYWQiLCJpZCIsImVtYWlsIiwiaXNfdmVyaWZpZWQiLCJzaWduIiwiY2xpbmljU2lnbkluIiwiZm9ybURhdGEiLCJ2YWxpZGF0ZURhdGEiLCJ1c2VWYWxpZGF0aW9uIiwibG9naW5TY2hlbWEiLCJ1c2VyRGF0YSIsImdldENsaW5pY0J5UGFzc3dvcmQiLCJwYXNzd29yZCIsImxlbmd0aCIsIlJlc3BvbnNlRXJyb3IiLCJVbmF1dGhvcml6ZWQiLCJwbGFpblBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJpc01hdGNoIiwiY29tcGFyZSIsIl9hIiwic2lnbnVwX3N0YXR1cyIsIkJhZFJlcXVlc3QiLCJfYiIsImNsaW5pY0RhdGEiLCJuYW1lIiwib3duZXJfbmFtZSIsImNpdHkiLCJwaG9uZSIsInN0YXRlIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiZXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJJbnRlcm5hbFNlcnZlciIsImRvY3RvclNpZ25JbiIsImdldERvY3RvckJ5UGFzc3dvcmQiLCJlbWFpbENvbmZpcm1lZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJwYXRpZW50U2lnbkluIiwiY29uZmlybUNsaW5pY0VtYWlsIiwiZGF0YSIsImdldENsaW5pY1ZlcmlmaWNhdGlvbkNvZGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgbXMgZnJvbSBcIm1zXCI7XHJcbmltcG9ydCB7IHVzZVZhbGlkYXRpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVyL3VzZV92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7IElMb2dpbiB9IGZyb20gXCIuLi8uLi9tb2RlbHMvYXV0aFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHtcclxuICBnZXRDbGluaWNCeVBhc3N3b3JkLFxyXG4gIGdldENsaW5pY1ZlcmlmaWNhdGlvbkNvZGUsXHJcbiAgZ2V0RG9jdG9yQnlQYXNzd29yZCxcclxufSBmcm9tIFwiLi9kYlwiO1xyXG5pbXBvcnQgeyBsb2dpblNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5cclxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gMSBEYXlzXHJcbmNvbnN0IEpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEIHx8IFwiNWhcIjsgLy8gMzAgRGF5c1xyXG5cclxuY29uc3QgZXhwaXJlc0luID0gbXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDA7XHJcblxyXG5leHBvcnQgY2xhc3MgQXV0aFNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVUb2tlbih1c2VyOiBhbnkpIHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgaXNfdmVyaWZpZWQ6IHVzZXIuaXNfdmVyaWZpZWQsIC8vIEluY2x1ZGUgdmVyaWZpY2F0aW9uIHN0YXR1c1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgSldUX1JFRlJFU0hfVE9LRU5fRVhQSVJFRCk7XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2xpbmljU2lnbkluKGZvcm1EYXRhOiBJTG9naW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRlRGF0YSA9IHVzZVZhbGlkYXRpb24obG9naW5TY2hlbWEsIGZvcm1EYXRhKTtcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBnZXRDbGluaWNCeVBhc3N3b3JkKFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5lbWFpbCxcclxuICAgICAgICB2YWxpZGF0ZURhdGEucGFzc3dvcmRcclxuICAgICAgKTtcclxuICAgICAgaWYgKCF1c2VyRGF0YSB8fCB1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwbGFpblBhc3N3b3JkID0gdmFsaWRhdGVEYXRhLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHVzZXJEYXRhWzBdLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5QYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFxyXG4gICAgICAgICAgXCJlbWFpbCBvciBwYXNzd3JvZCBpcyBub3QgY29ycmVjdCFcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5zaWdudXBfc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY2xpbmljRGF0YSA9IHtcclxuICAgICAgICBpZDogdXNlckRhdGFbMF0uaWQsXHJcbiAgICAgICAgbmFtZTogdXNlckRhdGFbMF0ubmFtZSxcclxuICAgICAgICBvd25lcl9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCxcclxuICAgICAgICBjaXR5OiB1c2VyRGF0YVswXS5jaXR5LFxyXG4gICAgICAgIHBob25lOiB1c2VyRGF0YVswXS5waG9uZSxcclxuICAgICAgICBzdGF0ZTogdXNlckRhdGFbMF0uc3RhdGUsXHJcbiAgICAgICAgemlwX2NvZGU6IHVzZXJEYXRhWzBdLnppcF9jb2RlLFxyXG4gICAgICAgIGNvdW50cnk6IHVzZXJEYXRhWzBdLmNvdW50cnksXHJcbiAgICAgICAgLy8gcm9sZXM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQodXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5yb2xlX25hbWUpLmZpbHRlcihCb29sZWFuKSksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgICAvLyBwZXJtaXNzaW9uczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldChcclxuICAgICAgICAvLyAgICAgdXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5wZXJtaXNzaW9uX25hbWUpLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgIC8vICAgKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gY2xpbmljRGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yOyAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvclNpZ25Jbihmb3JtRGF0YTogSUxvZ2luKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2YWxpZGF0ZURhdGEgPSB1c2VWYWxpZGF0aW9uKGxvZ2luU2NoZW1hLCBmb3JtRGF0YSk7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICAgICAgICB2YWxpZGF0ZURhdGEuZW1haWwsXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLnBhc3N3b3JkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXHJcbiAgICAgIC8vICAgICBcIkFjY291bnQgbm90IGZvdW5kIG9yIGhhcyBiZWVuIGRlbGV0ZWQuXCJcclxuICAgICAgLy8gICApO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LmVtYWlsQ29uZmlybWVkID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNsaW5pY0RhdGEgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLm5hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG5cclxuICAgICAgICAvLyByb2xlczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldCh1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnJvbGVfbmFtZSkuZmlsdGVyKEJvb2xlYW4pKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICAgIC8vIHBlcm1pc3Npb25zOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KFxyXG4gICAgICAgIC8vICAgICB1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnBlcm1pc3Npb25fbmFtZSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgLy8gICApLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBjbGluaWNEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcGF0aWVudFNpZ25Jbihmb3JtRGF0YTogSUxvZ2luKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2YWxpZGF0ZURhdGEgPSB1c2VWYWxpZGF0aW9uKGxvZ2luU2NoZW1hLCBmb3JtRGF0YSk7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICAgICAgICB2YWxpZGF0ZURhdGEuZW1haWwsXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLnBhc3N3b3JkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXHJcbiAgICAgIC8vICAgICBcIkFjY291bnQgbm90IGZvdW5kIG9yIGhhcyBiZWVuIGRlbGV0ZWQuXCJcclxuICAgICAgLy8gICApO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LmVtYWlsQ29uZmlybWVkID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNsaW5pY0RhdGEgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLm5hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG5cclxuICAgICAgICAvLyByb2xlczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldCh1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnJvbGVfbmFtZSkuZmlsdGVyKEJvb2xlYW4pKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICAgIC8vIHBlcm1pc3Npb25zOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KFxyXG4gICAgICAgIC8vICAgICB1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnBlcm1pc3Npb25fbmFtZSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgLy8gICApLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBjbGluaWNEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vICoqKioqY29uZmlybUNsaW5pY0VtYWlsKioqKipcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvbmZpcm1DbGluaWNFbWFpbChjbGluaWNEYXRhOiB7XHJcbiAgICBlbWFpbDogc3RyaW5nO1xyXG4gICAgdmVyaWZ5X2NvZGU6IHN0cmluZztcclxuICB9KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZShjbGluaWNEYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsSUFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRyxnQkFBQSxHQUFBSCxPQUFBO0FBRUEsTUFBQUksZ0JBQUEsR0FBQUosT0FBQTtBQUNBLE1BQUFLLElBQUEsR0FBQUwsT0FBQTtBQUtBLE1BQUFNLFFBQUEsR0FBQU4sT0FBQTtBQUVBLE1BQU07RUFBRU8sdUJBQXVCO0VBQUVDO0FBQXdCLENBQUUsR0FBUUMsT0FBTyxDQUFDQyxHQUFHO0FBRTlFLE1BQU1DLHdCQUF3QixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msd0JBQXdCLElBQUksSUFBSSxDQUFDLENBQUM7QUFDL0UsTUFBTUMseUJBQXlCLEdBQUdILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSx5QkFBeUIsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUVqRixNQUFNQyxTQUFTLEdBQUcsSUFBQVgsSUFBQSxDQUFBWSxPQUFFLEVBQUNILHdCQUF3QixDQUFDLEdBQUcsSUFBSTtBQUVyRCxNQUFhSSxXQUFXO0VBQ2YsT0FBT0MsYUFBYUEsQ0FBQ0MsSUFBUztJQUNuQyxNQUFNQyxPQUFPLEdBQUc7TUFDZEMsRUFBRSxFQUFFRixJQUFJLENBQUNFLEVBQUU7TUFDWEMsS0FBSyxFQUFFSCxJQUFJLENBQUNHLEtBQUs7TUFDakJDLFdBQVcsRUFBRUosSUFBSSxDQUFDSSxXQUFXLENBQUU7S0FDaEM7SUFFRCxPQUFPcEIsY0FBQSxDQUFBYSxPQUFHLENBQUNRLElBQUksQ0FBQ0os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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","JWT_REFRESH_TOKEN_EXPIRED","expiresIn","default","AuthService","generateToken","user","payload","id","email","is_verified","sign","clinicSignIn","formData","validateData","useValidation","loginSchema","userData","getClinicByPassword","password","length","ResponseError","Unauthorized","plainPassword","hashedPassword","isMatch","compare","_a","signup_status","BadRequest","_b","clinicData","name","owner_name","city","phone","state","zip_code","country","error","BaseResponse","InternalServer","doctorSignIn","getDoctorByPassword","emailConfirmed","first_name","last_name","patientSignIn","confirmClinicEmail","data","getClinicVerificationCode","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/service.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ILogin } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  getClinicByPassword,\r\n  getClinicVerificationCode,\r\n  getDoctorByPassword,\r\n} from \"./db\";\r\nimport { loginSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"5h\"; // 30 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class AuthService {\r\n  public static generateToken(user: any) {\r\n    const payload = {\r\n      id: user.id,\r\n      email: user.email,\r\n      is_verified: user.is_verified, // Include verification status\r\n    };\r\n\r\n    return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\r\n  }\r\n  public static async clinicSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getClinicByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        name: userData[0].name,\r\n        owner_name: userData[0].owner_name,\r\n        email: userData[0].email,\r\n        city: userData[0].city,\r\n        phone: userData[0].phone,\r\n        state: userData[0].state,\r\n        zip_code: userData[0].zip_code,\r\n        country: userData[0].country,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  public static async doctorSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getDoctorByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      // if (!userData || userData.length === 0) {\r\n      //   throw new ResponseError.NotFound(\r\n      //     \"Account not found or has been deleted.\"\r\n      //   );\r\n      // }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.emailConfirmed === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].name,\r\n        last_name: userData[0].owner_name,\r\n        email: userData[0].owner_name,\r\n\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  public static async patientSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getDoctorByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      // if (!userData || userData.length === 0) {\r\n      //   throw new ResponseError.NotFound(\r\n      //     \"Account not found or has been deleted.\"\r\n      //   );\r\n      // }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.emailConfirmed === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].name,\r\n        last_name: userData[0].owner_name,\r\n        email: userData[0].owner_name,\r\n\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  // *****confirmClinicEmail*****\r\n  public static async confirmClinicEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getClinicVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738809537884},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev3 = exports.getUniqueCodev2 = void 0;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev2 = getUniqueCodev2;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev3 = getUniqueCodev3;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVbmlxdWVDb2RldjIiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvY29tbW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcbiAqL1xuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYyKGxlbmd0aCA9IDMyKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxuICovXG5mdW5jdGlvbiBnZXRVbmlxdWVDb2RldjMobGVuZ3RoID0gNCkge1xuICAgIGxldCByZXN1bHQgPSAnJ1xuICAgIGNvbnN0IGNoYXJhY3RlcnMgPVxuICAgICAgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSdcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuZXhwb3J0IHtcbiAgICBnZXRVbmlxdWVDb2RldjIsXG4gICAgZ2V0VW5pcXVlQ29kZXYzXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUEsU0FBU0EsZUFBZUEsQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7RUFDbEMsSUFBSUMsTUFBTSxHQUFHLEVBQUU7RUFDZixNQUFNQyxVQUFVLEdBQ2QsZ0VBQWdFO0VBQ2xFLE1BQU1DLGdCQUFnQixHQUFHRCxVQUFVLENBQUNGLE1BQU07RUFDMUMsS0FBSyxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLE1BQU0sRUFBRUksQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUNsQ0gsTUFBTSxJQUFJQyxVQUFVLENBQUNHLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxFQUFFLEdBQUdMLGdCQUFnQixDQUFDLENBQUM7RUFDM0U7RUFDQSxPQUFPRixNQUFNO0FBQ2Y7QUFpQklRLE9BQUEsQ0FBQVYsZUFBQSxHQUFBQSxlQUFBO0FBZko7Ozs7QUFJQSxTQUFTVyxlQUFlQSxDQUFDVixNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZjtBQUdFUSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["getUniqueCodev2","length","result","characters","charactersLength","i","charAt","Math","floor","random","exports","getUniqueCodev3"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/common.ts"],"sourcesContent":["/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n    let result = ''\n    const characters =\n      'abcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i += 1) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\nexport {\n    getUniqueCodev2,\n    getUniqueCodev3\n  }"],"mappings":";;;;;;AAAA;;;;AAIA,SAASA,eAAeA,CAACC,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAiBIQ,OAAA,CAAAV,eAAA,GAAAA,eAAA;AAfJ;;;;AAIA,SAASW,eAAeA,CAACV,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAGEQ,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nconst promises_1 = __importDefault(require(\"fs/promises\"));\nconst {\n  APP_NAME\n} = process.env;\nclass SendMail {\n  constructor(emailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  loadTemplate(templateName, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const templatePath = path_1.default.resolve(__dirname, `../../public/template/email/${templateName}.html`);\n        const html = yield promises_1.default.readFile(templatePath, \"utf8\");\n        const template = handlebars_1.default.compile(html);\n        return template(data);\n      } catch (error) {\n        console.error(`Error loading email template (${templateName}):`, error);\n        throw new response_error_1.ResponseError.NotFound(\"Email template not found\");\n      }\n    });\n  }\n  sendAccountRegister(email, verifyCode) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"emailverify\", {\n          APP_NAME,\n          TOKEN: verifyCode\n        });\n        yield this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending registration email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n  sendForgetPassToken(user, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"register\", {\n          APP_NAME,\n          TOKEN: token\n        });\n        yield this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending password reset email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.default = SendMail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYW5kbGViYXJzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicGF0aF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsInByb21pc2VzXzEiLCJBUFBfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJTZW5kTWFpbCIsImNvbnN0cnVjdG9yIiwiZW1haWxQcm92aWRlciIsImxvYWRUZW1wbGF0ZSIsInRlbXBsYXRlTmFtZSIsImRhdGEiLCJ0ZW1wbGF0ZVBhdGgiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImh0bWwiLCJyZWFkRmlsZSIsInRlbXBsYXRlIiwiY29tcGlsZSIsImVycm9yIiwiY29uc29sZSIsIlJlc3BvbnNlRXJyb3IiLCJOb3RGb3VuZCIsInNlbmRBY2NvdW50UmVnaXN0ZXIiLCJlbWFpbCIsInZlcmlmeUNvZGUiLCJodG1sVG9TZW5kIiwiVE9LRU4iLCJzZW5kIiwiSW50ZXJuYWxTZXJ2ZXIiLCJzZW5kRm9yZ2V0UGFzc1Rva2VuIiwidXNlciIsInRva2VuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL3NlbmRfZW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhbmRsZWJhcnMgZnJvbSBcImhhbmRsZWJhcnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBFbWFpbFByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbmZpZy9lbWFpbFwiO1xuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcblxuY29uc3QgeyBBUFBfTkFNRSB9ID0gcHJvY2Vzcy5lbnY7XG5cbmNsYXNzIFNlbmRNYWlsIHtcbiAgcHJpdmF0ZSBlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyO1xuXG4gIGNvbnN0cnVjdG9yKGVtYWlsUHJvdmlkZXI6IEVtYWlsUHJvdmlkZXIpIHtcbiAgICB0aGlzLmVtYWlsUHJvdmlkZXIgPSBlbWFpbFByb3ZpZGVyO1xuICB9XG4gIHByaXZhdGUgYXN5bmMgbG9hZFRlbXBsYXRlKFxuICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxuICAgIGRhdGE6IG9iamVjdFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBwYXRoLnJlc29sdmUoXG4gICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgYC4uLy4uL3B1YmxpYy90ZW1wbGF0ZS9lbWFpbC8ke3RlbXBsYXRlTmFtZX0uaHRtbGBcbiAgICAgICk7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgZnMucmVhZEZpbGUodGVtcGxhdGVQYXRoLCBcInV0ZjhcIik7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBlbWFpbCB0ZW1wbGF0ZSAoJHt0ZW1wbGF0ZU5hbWV9KTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2VuZEFjY291bnRSZWdpc3RlcihlbWFpbDogc3RyaW5nLCB2ZXJpZnlDb2RlOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaHRtbFRvU2VuZCA9IGF3YWl0IHRoaXMubG9hZFRlbXBsYXRlKFwiZW1haWx2ZXJpZnlcIiwgeyBBUFBfTkFNRSwgVE9LRU46IHZlcmlmeUNvZGUgfSk7XG4gICAgICBhd2FpdCB0aGlzLmVtYWlsUHJvdmlkZXIuc2VuZChlbWFpbCwgXCJBbGkgRG9jdG9yIFJlZ2lzdHJhdGlvblwiLCBodG1sVG9TZW5kKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcmVnaXN0cmF0aW9uIGVtYWlsOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBzZW5kIGVtYWlsXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhOiBhbnkpIHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3QgeyBlbWFpbCwgdmVyaWZ5X2NvZGU6IFRPS0VOIH0gPSBmb3JtRGF0YTtcbiAgLy8gICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaSBEb2N0b3IgUmVnaXN0cmF0aW9uXCI7XG4gIC8vICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgICAgIF9fZGlybmFtZSxcbiAgLy8gICAgICAgXCIuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbFwiXG4gIC8vICAgICApO1xuXG4gIC8vICAgICAvLyBSZWFkIGVtYWlsIHRlbXBsYXRlIHVzaW5nIGFzeW5jL2F3YWl0XG4gIC8vICAgICBjb25zdCBodG1sID0gYXdhaXQgZnMucmVhZEZpbGUodGVtcGxhdGVQYXRoLCBcInV0ZjhcIik7XG4gIC8vICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZSh7IEFQUF9OQU1FLCBUT0tFTiB9KTtcblxuICAvLyAgICAgLy8gU2VuZCBlbWFpbFxuICAvLyAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gQWNjb3VudFJlZ2lzdGVyOlwiLCBlcnJvcik7XG4gIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YVxuICAvLyAgIC8vIGNvbnN0IFRPS0VOID0gZm9ybURhdGEudmVyaWZ5X2NvZGVcbiAgLy8gICAvLyBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgLy8gICBfX2Rpcm5hbWUsXG4gIC8vICAgLy8gICBgLi4vLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL2VtYWlsdmVyaWZ5Lmh0bWxgXG4gIC8vICAgLy8gKVxuXG4gIC8vICAgLy8gY29uc3Qgc3ViamVjdCA9ICdBbGkgRG9jdG9yIFJlZ2lzdHJhdGlvbidcbiAgLy8gICAvLyAvLyBjb25zdCB1cmxUb2tlbiA9IGAke0JBU0VfVVJMX0NMSUVOVH0vZW1haWwvdmVyaWZ5P3Rva2VuPSR7dG9rZW59YFxuICAvLyAgIC8vIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH1cbiAgLy8gICAvLyBjb25zdCBFbWFpbCA9IG5ldyBFbWFpbFByb3ZpZGVyKClcblxuICAvLyAgIC8vIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xuICAvLyAgIC8vICAgaWYgKGVycm9yKSB7XG4gIC8vICAgLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKCdlbWFpbCB0ZW1wbGF0ZSBub3QgZm91bmQnKVxuICAvLyAgIC8vICAgfVxuXG4gIC8vICAgLy8gICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKVxuICAvLyAgIC8vICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSlcblxuICAvLyAgIC8vICAgRW1haWwuc2VuZChlbWFpbCwgc3ViamVjdCwgaHRtbFRvU2VuZClcbiAgLy8gICAvLyB9KVxuICAvLyB9XG5cblxuICBwdWJsaWMgYXN5bmMgc2VuZEZvcmdldFBhc3NUb2tlbih1c2VyOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSBhd2FpdCB0aGlzLmxvYWRUZW1wbGF0ZShcInJlZ2lzdGVyXCIsIHsgQVBQX05BTUUsIFRPS0VOOiB0b2tlbiB9KTtcbiAgICAgIGF3YWl0IHRoaXMuZW1haWxQcm92aWRlci5zZW5kKHVzZXIuZW1haWwsIFwiWW91cnMgRG9jdG9yIFJlZ2lzdHJhdGlvblwiLCBodG1sVG9TZW5kKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcGFzc3dvcmQgcmVzZXQgZW1haWw6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIHNlbmQgZW1haWxcIik7XG4gICAgfVxuICB9XG4gIC8vIHB1YmxpYyBzdGF0aWMgZm9yZ2V0UGFzc1Rva2VuKGZvcm1EYXRhOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gIC8vICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gIC8vICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcbiAgLy8gICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgICBfX2Rpcm5hbWUsXG4gIC8vICAgICBgLi4vLi4vcHVibGljL3RlbXBsYXRlcy9lbWFpbHMvcmVnaXN0ZXIuaHRtbGBcbiAgLy8gICApO1xuXG4gIC8vICAgY29uc3Qgc3ViamVjdCA9IFwiWW91cnMgRG9jdG9yIFJlZ2lzdGVyYXRpb25cIjtcbiAgLy8gICAvLyBjb25zdCB1cmxUb2tlbiA9IGAke0JBU0VfVVJMX0NMSUVOVH0vZW1haWwvdmVyaWZ5P3Rva2VuPSR7dG9rZW59YFxuICAvLyAgIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH07XG4gIC8vICAgY29uc3QgRW1haWwgPSBuZXcgRW1haWxQcm92aWRlcigpO1xuXG4gIC8vICAgcmVhZEhUTUxGaWxlKHBhdGhUZW1wbGF0ZSwgKGVycm9yOiBFcnJvciwgaHRtbDogYW55KSA9PiB7XG4gIC8vICAgICBpZiAoZXJyb3IpIHtcbiAgLy8gICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJlbWFpbCB0ZW1wbGF0ZSBub3QgZm91bmRcIik7XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIGNvbnN0IHRlbXBsYXRlID0gaGFuZGxlYmFycy5jb21waWxlKGh0bWwpO1xuICAvLyAgICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSk7XG5cbiAgLy8gICAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAvLyAgIH0pO1xuICAvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbmRNYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsWUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFFLGdCQUFBLEdBQUFGLE9BQUE7QUFHQSxNQUFBRyxVQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU07RUFBRUk7QUFBUSxDQUFFLEdBQUdDLE9B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","map":{"version":3,"names":["handlebars_1","__importDefault","require","path_1","response_error_1","promises_1","APP_NAME","process","env","SendMail","constructor","emailProvider","loadTemplate","templateName","data","templatePath","default","resolve","__dirname","html","readFile","template","compile","error","console","ResponseError","NotFound","sendAccountRegister","email","verifyCode","htmlToSend","TOKEN","send","InternalServer","sendForgetPassToken","user","token","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/send_email.ts"],"sourcesContent":["import handlebars from \"handlebars\";\nimport path from \"path\";\nimport { EmailProvider } from \"../config/email\";\nimport { ResponseError } from \"../modules/error/response_error\";\nimport { User } from \"../types/user\";\nimport { readHTMLFile } from \"./file\";\nimport fs from \"fs/promises\";\n\nconst { APP_NAME } = process.env;\n\nclass SendMail {\n  private emailProvider: EmailProvider;\n\n  constructor(emailProvider: EmailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  private async loadTemplate(\n    templateName: string,\n    data: object\n  ): Promise<string> {\n    try {\n      const templatePath = path.resolve(\n        __dirname,\n        `../../public/template/email/${templateName}.html`\n      );\n      const html = await fs.readFile(templatePath, \"utf8\");\n      const template = handlebars.compile(html);\n      return template(data);\n    } catch (error) {\n      console.error(`Error loading email template (${templateName}):`, error);\n      throw new ResponseError.NotFound(\"Email template not found\");\n    }\n  }\n\n  public async sendAccountRegister(email: string, verifyCode: string) {\n    try {\n      const htmlToSend = await this.loadTemplate(\"emailverify\", { APP_NAME, TOKEN: verifyCode });\n      await this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n    } catch (error) {\n      console.error(\"Error sending registration email:\", error);\n      throw new ResponseError.InternalServer(\"Failed to send email\");\n    }\n  }\n\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n\n\n  public async sendForgetPassToken(user: User, token: string) {\n    try {\n      const htmlToSend = await this.loadTemplate(\"register\", { APP_NAME, TOKEN: token });\n      await this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n    } catch (error) {\n      console.error(\"Error sending password reset email:\", error);\n      throw new ResponseError.InternalServer(\"Failed to send email\");\n    }\n  }\n  // public static forgetPassToken(formData: User, token: string) {\n  //   const { email } = formData;\n  //   const TOKEN = token;\n  //   const pathTemplate = path.resolve(\n  //     __dirname,\n  //     `../../public/templates/emails/register.html`\n  //   );\n\n  //   const subject = \"Yours Doctor Registeration\";\n  //   // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   const dataTemplate = { APP_NAME, TOKEN };\n  //   const Email = new EmailProvider();\n\n  //   readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //     if (error) {\n  //       throw new ResponseError.NotFound(\"email template not found\");\n  //     }\n\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template(dataTemplate);\n\n  //     Email.send(email, subject, htmlToSend);\n  //   });\n  // }\n}\n\nexport default SendMail;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,MAAAE,gBAAA,GAAAF,OAAA;AAGA,MAAAG,UAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEA,MAAM;EAAEI;AAAQ,CAAE,GAAGC,OAAO,CAACC,GAAG;AAEhC,MAAMC,QAAQ;EAGZC,YAAYC,aAA4B;IACtC,IAAI,CAACA,aAAa,GAAGA,aAAa;EACpC;EACcC,YAAYA,CACxBC,YAAoB,EACpBC,IAAY;;MAEZ,IAAI;QACF,MAAMC,YAAY,GAAGZ,MAAA,CAAAa,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,+BAA+BL,YAAY,OAAO,CACnD;QACD,MAAMM,IAAI,GAAG,MAAMd,UAAA,CAAAW,OAAE,CAACI,QAAQ,CAACL,YAAY,EAAE,MAAM,CAAC;QACpD,MAAMM,QAAQ,GAAGrB,YAAA,CAAAgB,OAAU,CAACM,OAAO,CAACH,IAAI,CAAC;QACzC,OAAOE,QAAQ,CAACP,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiCV,YAAY,IAAI,EAAEU,KAAK,CAAC;QACvE,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACC,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;IACF,CAAC;;EAEYC,mBAAmBA,CAACC,KAAa,EAAEC,UAAkB;;MAChE,IAAI;QACF,MAAMC,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,aAAa,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEF;QAAU,CAAE,CAAC;QAC1F,MAAM,IAAI,CAAClB,aAAa,CAACqB,IAAI,CAACJ,KAAK,EAAE,yBAAyB,EAAEE,UAAU,CAAC;MAC7E,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAGaC,mBAAmBA,CAACC,IAAU,EAAEC,KAAa;;MACxD,IAAI;QACF,MAAMN,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,UAAU,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEK;QAAK,CAAE,CAAC;QAClF,MAAM,IAAI,CAACzB,aAAa,CAACqB,IAAI,CAACG,IAAI,CAACP,KAAK,EAAE,2BAA2B,EAAEE,UAAU,CAAC;MACpF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;QAC3D,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;;AA2BHI,OAAA,CAAArB,OAAA,GAAeP,QAAQ","ignoreList":[]}},"mtime":1738657937067},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmailProvider = void 0;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst dotenv_1 = __importDefault(require(\"dotenv\"));\ndotenv_1.default.config(); // Load environment variables\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n  /**\n   * Create and configure the mail transporter\n   */\n  createTransporter() {\n    if (isMailgunAPI) {\n      return nodemailer_1.default.createTransport((0, nodemailer_mailgun_transport_1.default)({\n        auth: {\n          api_key: MAILGUN_API_KEY,\n          domain: MAILGUN_DOMAIN\n        }\n      }));\n    }\n    return nodemailer_1.default.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false,\n      // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD\n      }\n    });\n  }\n  /**\n   * Sends an email\n   */\n  send(to, subject, template) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const recipient = Array.isArray(to) ? to.join(\", \") : to;\n        const mailOptions = {\n          from: `${APP_NAME} <${MAIL_USERNAME}>`,\n          to: recipient,\n          subject,\n          html: template\n        };\n        const info = yield this.transporter.sendMail(mailOptions);\n        console.log(\"✅ Email sent successfully:\", info.messageId);\n        return info;\n      } catch (error) {\n        console.error(\"❌ Error sending email:\", error);\n        throw new Error(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.EmailProvider = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwibm9kZW1haWxlcl9tYWlsZ3VuX3RyYW5zcG9ydF8xIiwiZG90ZW52XzEiLCJkZWZhdWx0IiwiY29uZmlnIiwiQVBQX05BTUUiLCJNQUlMX0RSSVZFUiIsIk1BSUxfSE9TVCIsIk1BSUxfUE9SVCIsIk1BSUxfVVNFUk5BTUUiLCJNQUlMX1BBU1NXT1JEIiwiTUFJTF9BVVRIX1RZUEUiLCJNQUlMR1VOX0FQSV9LRVkiLCJNQUlMR1VOX0RPTUFJTiIsIk9BVVRIX0NMSUVOVF9JRCIsIk9BVVRIX0NMSUVOVF9TRUNSRVQiLCJPQVVUSF9SRUZSRVNIX1RPS0VOIiwiT0FVVEhfUkVESVJFQ1RfVVJMIiwicHJvY2VzcyIsImVudiIsImlzTWFpbGd1bkFQSSIsIkJvb2xlYW4iLCJFbWFpbFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiYXV0aCIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsIk51bWJlciIsInNlY3VyZSIsInVzZXIiLCJwYXNzIiwic2VuZCIsInRvIiwic3ViamVjdCIsInRlbXBsYXRlIiwicmVjaXBpZW50IiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIm1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJpbmZvIiwic2VuZE1haWwiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZUlkIiwiZXJyb3IiLCJFcnJvciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25maWdcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbmZpZy9lbWFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcblxuZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuXG5jb25zdCB7XG4gIEFQUF9OQU1FLFxuICBNQUlMX0RSSVZFUixcbiAgTUFJTF9IT1NULFxuICBNQUlMX1BPUlQsXG4gIE1BSUxfVVNFUk5BTUUsXG4gIE1BSUxfUEFTU1dPUkQsXG4gIE1BSUxfQVVUSF9UWVBFLFxuICBNQUlMR1VOX0FQSV9LRVksXG4gIE1BSUxHVU5fRE9NQUlOLFxuICBPQVVUSF9DTElFTlRfSUQsXG4gIE9BVVRIX0NMSUVOVF9TRUNSRVQsXG4gIE9BVVRIX1JFRlJFU0hfVE9LRU4sXG4gIE9BVVRIX1JFRElSRUNUX1VSTCxcbn0gPSBwcm9jZXNzLmVudjtcblxuY29uc3QgaXNNYWlsZ3VuQVBJID0gQm9vbGVhbihNQUlMR1VOX0FQSV9LRVkgJiYgTUFJTEdVTl9ET01BSU4pO1xuXG5leHBvcnQgY2xhc3MgRW1haWxQcm92aWRlciB7XG4gIHByaXZhdGUgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50cmFuc3BvcnRlciA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgbWFpbCB0cmFuc3BvcnRlclxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRlcigpOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyIHtcbiAgICBpZiAoaXNNYWlsZ3VuQVBJKSB7XG4gICAgICByZXR1cm4gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoXG4gICAgICAgIG1nKHtcbiAgICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICBhcGlfa2V5OiBNQUlMR1VOX0FQSV9LRVkhLFxuICAgICAgICAgICAgZG9tYWluOiBNQUlMR1VOX0RPTUFJTiEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgIGhvc3Q6IE1BSUxfSE9TVCxcbiAgICAgIHBvcnQ6IE51bWJlcihNQUlMX1BPUlQpLFxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gU2V0IGB0cnVlYCBmb3IgcG9ydCA0NjUgKFNTTClcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogTUFJTF9VU0VSTkFNRSxcbiAgICAgICAgcGFzczogTUFJTF9QQVNTV09SRCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYW4gZW1haWxcbiAgICovXG4gIHB1YmxpYyBhc3luYyBzZW5kKHRvOiBzdHJpbmcgfCBzdHJpbmdbXSwgc3ViamVjdDogc3RyaW5nLCB0ZW1wbGF0ZTogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IEFycmF5LmlzQXJyYXkodG8pID8gdG8uam9pbihcIiwgXCIpIDogdG87XG4gICAgICBjb25zdCBtYWlsT3B0aW9uczogbm9kZW1haWxlci5TZW5kTWFpbE9wdGlvbnMgPSB7XG4gICAgICAgIGZyb206IGAke0FQUF9OQU1FfSA8JHtNQUlMX1VTRVJOQU1FfT5gLFxuICAgICAgICB0bzogcmVjaXBpZW50LFxuICAgICAgICBzdWJqZWN0LFxuICAgICAgICBodG1sOiB0ZW1wbGF0ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5OlwiLCBpbmZvLm1lc3NhZ2VJZCk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBzZW5kaW5nIGVtYWlsOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxZQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLDhCQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUFFLFFBQUEsQ0FBQUMsT0FBTSxDQUFDQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBRWpCLE1BQU07RUFDSkMsUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLFNBQVM7RUFDVEMsU0FBUztFQUNUQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxtQkFBbUI7RUFDbkJDLG1CQUFtQjtFQUNuQkM7QUFBa0IsQ0FDbkIsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWYsTUFBTUMsWUFBWSxHQUFHQyxPQUFPLENBQUNULGVBQWUsSUFBSUMsY0FBYyxDQUFDO0FBRS9ELE1BQWFTLGFBQWE7RUFHeEJDLFlBQUE7SUFDRSxJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixFQUFFO0VBQzdDO0VBRUE7OztFQUdRQSxpQkFBaUJBLENBQUE7SUFDdkIsSUFBSUwsWUFBWSxFQUFFO01BQ2hCLE9BQU90QixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FDL0IsSUFBQXpCLDhCQUFBLENBQUFFLE9BQUUsRUFBQztRQUNEd0IsSUFBSSxFQUFFO1VBQ0pDLE9BQU8sRUFBRWhCLGVBQWdCO1VBQ3pCaUIsTUFBTSxFQUFFaEI7O09BRVgsQ0FBQyxDQUNIO0lBQ0g7SUFFQSxPQUFPZixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FBQztNQUNoQ0ksSUFBSSxFQUFFdkIsU0FBUztNQUNmd0IsSUFBSSxFQUFFQyxNQUFNLENBQUN4QixTQUFTLENBQUM7TUFDdkJ5QixNQUFNLEVBQUUsS0FBSztNQUFFO01BQ2ZOLElBQUksRUFBRTtRQUNKTyxJQUFJLEVBQUV6QixhQUFhO1FBQ25CMEIsSUFBSSxFQUFFekI7O0tBRVQsQ0FBQztFQUNKO0VBRUE7OztFQUdhMEIsSUFBSUEsQ0FBQ0MsRUFBcUIsRUFBRUMsT0FBZSxFQUFFQyxRQUFnQjs7TUFDeEUsSUFBSTtRQUNGLE1BQU1DLFNBQVMsR0FBR0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLEVBQUUsQ0FBQyxHQUFHQSxFQUFFLENBQUNNLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR04sRUFBRTtRQUN4RCxNQUFNTyxXQUFXLEdBQStCO1VBQzlDQyxJQUFJLEVBQUUsR0FBR3hDLFFBQVEsS0FBS0ksYUFBYSxHQUFHO1VBQ3RDNEIsRUFBRSxFQUFFRyxTQUFTO1VBQ2JGLE9BQU87VUFDUFEsSUFBSSxFQUFFUDtTQUNQO1FBRUQsTUFBTVEsSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDdkIsV0FBVyxDQUFDd0IsUUFBUSxDQUFDSixXQUFXLENBQUM7UUFDekRLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFSCxJQUFJLENBQUNJLFNBQVMsQ0FBQztRQUN6RCxPQUFPSixJQUFJO01BQ2IsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtRQUNkSCxPQUFPLENBQUNHLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO1FBQzlDLE1BQU0sSUFBSUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BQ3pDO0lBQ0YsQ0FBQzs7O0FBckRIQyxPQUFBLENBQUFoQyxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["nodemailer_1","__importDefault","require","nodemailer_mailgun_transport_1","dotenv_1","default","config","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","Boolean","EmailProvider","constructor","transporter","createTransporter","createTransport","auth","api_key","domain","host","port","Number","secure","user","pass","send","to","subject","template","recipient","Array","isArray","join","mailOptions","from","html","info","sendMail","console","log","messageId","error","Error","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\config\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/config/email.ts"],"sourcesContent":["import _ from \"lodash\";\nimport nodemailer from \"nodemailer\";\nimport mg from \"nodemailer-mailgun-transport\";\nimport dotenv from \"dotenv\";\n\ndotenv.config(); // Load environment variables\n\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL,\n} = process.env;\n\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\n\nexport class EmailProvider {\n  private transporter: nodemailer.Transporter;\n\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n\n  /**\n   * Create and configure the mail transporter\n   */\n  private createTransporter(): nodemailer.Transporter {\n    if (isMailgunAPI) {\n      return nodemailer.createTransport(\n        mg({\n          auth: {\n            api_key: MAILGUN_API_KEY!,\n            domain: MAILGUN_DOMAIN!,\n          },\n        })\n      );\n    }\n\n    return nodemailer.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false, // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD,\n      },\n    });\n  }\n\n  /**\n   * Sends an email\n   */\n  public async send(to: string | string[], subject: string, template: string) {\n    try {\n      const recipient = Array.isArray(to) ? to.join(\", \") : to;\n      const mailOptions: nodemailer.SendMailOptions = {\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\n        to: recipient,\n        subject,\n        html: template,\n      };\n\n      const info = await this.transporter.sendMail(mailOptions);\n      console.log(\"✅ Email sent successfully:\", info.messageId);\n      return info;\n    } catch (error) {\n      console.error(\"❌ Error sending email:\", error);\n      throw new Error(\"Failed to send email\");\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,8BAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAC,OAAM,CAACC,MAAM,EAAE,CAAC,CAAC;AAEjB,MAAM;EACJC,QAAQ;EACRC,WAAW;EACXC,SAAS;EACTC,SAAS;EACTC,aAAa;EACbC,aAAa;EACbC,cAAc;EACdC,eAAe;EACfC,cAAc;EACdC,eAAe;EACfC,mBAAmB;EACnBC,mBAAmB;EACnBC;AAAkB,CACnB,GAAGC,OAAO,CAACC,GAAG;AAEf,MAAMC,YAAY,GAAGC,OAAO,CAACT,eAAe,IAAIC,cAAc,CAAC;AAE/D,MAAaS,aAAa;EAGxBC,YAAA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,iBAAiB,EAAE;EAC7C;EAEA;;;EAGQA,iBAAiBA,CAAA;IACvB,IAAIL,YAAY,EAAE;MAChB,OAAOtB,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAC/B,IAAAzB,8BAAA,CAAAE,OAAE,EAAC;QACDwB,IAAI,EAAE;UACJC,OAAO,EAAEhB,eAAgB;UACzBiB,MAAM,EAAEhB;;OAEX,CAAC,CACH;IACH;IAEA,OAAOf,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAAC;MAChCI,IAAI,EAAEvB,SAAS;MACfwB,IAAI,EAAEC,MAAM,CAACxB,SAAS,CAAC;MACvByB,MAAM,EAAE,KAAK;MAAE;MACfN,IAAI,EAAE;QACJO,IAAI,EAAEzB,aAAa;QACnB0B,IAAI,EAAEzB;;KAET,CAAC;EACJ;EAEA;;;EAGa0B,IAAIA,CAACC,EAAqB,EAAEC,OAAe,EAAEC,QAAgB;;MACxE,IAAI;QACF,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,IAAI,CAAC,IAAI,CAAC,GAAGN,EAAE;QACxD,MAAMO,WAAW,GAA+B;UAC9CC,IAAI,EAAE,GAAGxC,QAAQ,KAAKI,aAAa,GAAG;UACtC4B,EAAE,EAAEG,SAAS;UACbF,OAAO;UACPQ,IAAI,EAAEP;SACP;QAED,MAAMQ,IAAI,GAAG,MAAM,IAAI,CAACvB,WAAW,CAACwB,QAAQ,CAACJ,WAAW,CAAC;QACzDK,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAACI,SAAS,CAAC;QACzD,OAAOJ,IAAI;MACb,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MACzC;IACF,CAAC;;;AArDHC,OAAA,CAAAhC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1738383138790},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\file.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteUserPic = exports.readHTMLFile = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path, callback) {\n  fs_1.default.readFile(path, {\n    encoding: \"utf-8\"\n  }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nexports.readHTMLFile = readHTMLFile;\nfunction deleteUserPic(userId) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs_1.default.existsSync(path)) {\n    fs_1.default.unlinkSync(path);\n  }\n}\nexports.deleteUserPic = deleteUserPic;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInJlYWRIVE1MRmlsZSIsInBhdGgiLCJjYWxsYmFjayIsImRlZmF1bHQiLCJyZWFkRmlsZSIsImVuY29kaW5nIiwiZXJyIiwiaHRtbCIsImV4cG9ydHMiLCJkZWxldGVVc2VyUGljIiwidXNlcklkIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci9maWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHBhdGggLSBwYXRoIGZpbGUgdGVtcGxhdGUgaHRtbFxuICogQHBhcmFtIGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHJlYWRIVE1MRmlsZShwYXRoOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgZnMucmVhZEZpbGUocGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sIGZ1bmN0aW9uIChlcnIsIGh0bWwpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsLCBodG1sKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlVXNlclBpYyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBwYXRoID0gYHB1YmxpYy9wcm9kdWN0cy8ke3VzZXJJZH0uanBnYDtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aCkpIHtcbiAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xuICB9XG59XG5leHBvcnQgeyByZWFkSFRNTEZpbGUsIGRlbGV0ZVVzZXJQaWMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBOzs7OztBQUtBLFNBQVNDLFlBQVlBLENBQUNDLElBQVMsRUFBRUMsUUFBYTtFQUM1Q0wsSUFBQSxDQUFBTSxPQUFFLENBQUNDLFFBQVEsQ0FBQ0gsSUFBSSxFQUFFO0lBQUVJLFFBQVEsRUFBRTtFQUFPLENBQUUsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLElBQUk7SUFDMUQsSUFBSUQsR0FBRyxFQUFFO01BQ1BKLFFBQVEsQ0FBQ0ksR0FBRyxDQUFDO0lBQ2YsQ0FBQyxNQUFNO01BQ0xKLFFBQVEsQ0FBQyxJQUFJLEVBQUVLLElBQUksQ0FBQztJQUN0QjtFQUNGLENBQUMsQ0FBQztBQUNKO0FBT1NDLE9BQUEsQ0FBQVIsWUFBQSxHQUFBQSxZQUFBO0FBTlQsU0FBU1MsYUFBYUEsQ0FBQ0MsTUFBYztFQUNuQyxNQUFNVCxJQUFJLEdBQUcsbUJBQW1CUyxNQUFNLE1BQU07RUFDNUMsSUFBSWIsSUFBQSxDQUFBTSxPQUFFLENBQUNRLFVBQVUsQ0FBQ1YsSUFBSSxDQUFDLEVBQUU7SUFDdkJKLElBQUEsQ0FBQU0sT0FBRSxDQUFDUyxVQUFVLENBQUNYLElBQUksQ0FBQztFQUNyQjtBQUNGO0FBQ3VCTyxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["fs_1","__importDefault","require","readHTMLFile","path","callback","default","readFile","encoding","err","html","exports","deleteUserPic","userId","existsSync","unlinkSync"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/file.ts"],"sourcesContent":["import fs from \"fs\";\n\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path: any, callback: any) {\n  fs.readFile(path, { encoding: \"utf-8\" }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nfunction deleteUserPic(userId: string) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs.existsSync(path)) {\n    fs.unlinkSync(path);\n  }\n}\nexport { readHTMLFile, deleteUserPic };\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA;;;;;AAKA,SAASC,YAAYA,CAACC,IAAS,EAAEC,QAAa;EAC5CL,IAAA,CAAAM,OAAE,CAACC,QAAQ,CAACH,IAAI,EAAE;IAAEI,QAAQ,EAAE;EAAO,CAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI;IAC1D,IAAID,GAAG,EAAE;MACPJ,QAAQ,CAACI,GAAG,CAAC;IACf,CAAC,MAAM;MACLJ,QAAQ,CAAC,IAAI,EAAEK,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;AACJ;AAOSC,OAAA,CAAAR,YAAA,GAAAA,YAAA;AANT,SAASS,aAAaA,CAACC,MAAc;EACnC,MAAMT,IAAI,GAAG,mBAAmBS,MAAM,MAAM;EAC5C,IAAIb,IAAA,CAAAM,OAAE,CAACQ,UAAU,CAACV,IAAI,CAAC,EAAE;IACvBJ,IAAA,CAAAM,OAAE,CAACS,UAAU,CAACX,IAAI,CAAC;EACrB;AACF;AACuBO,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nconst base_response_1 = require(\"./base_response\");\nconst internal_server_1 = require(\"./internal_server\");\nconst unauthorized_1 = require(\"./unauthorized\");\nconst forbidden_1 = require(\"./forbidden\");\nconst not_found_1 = require(\"./not_found\");\nconst bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiZXhwb3J0cyIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tICcuL2Jhc2VfcmVzcG9uc2UnO1xuaW1wb3J0IHtJbnRlcm5hbFNlcnZlcn0gZnJvbSAnLi9pbnRlcm5hbF9zZXJ2ZXInO1xuaW1wb3J0IHtVbmF1dGhvcml6ZWR9IGZyb20gJy4vdW5hdXRob3JpemVkJztcbmltcG9ydCB7Rm9yYmlkZGVufSBmcm9tICcuL2ZvcmJpZGRlbic7XG5pbXBvcnQge05vdEZvdW5kfSBmcm9tICcuL25vdF9mb3VuZCc7XG5pbXBvcnQge0JhZFJlcXVlc3R9IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xuXG5leHBvcnQgY29uc3QgUmVzcG9uc2VFcnJvciA9IHtcbiAgICBCYXNlUmVzcG9uc2UsXG4gICAgQmFkUmVxdWVzdCxcbiAgICBOb3RGb3VuZCxcbiAgICBGb3JiaWRkZW4sXG4gICAgVW5hdXRob3JpemVkLFxuICAgIEludGVybmFsU2VydmVyLFxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGlCQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxXQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFFYU0sT0FBQSxDQUFBQyxhQUFhLEdBQUc7RUFDekJDLFlBQVksRUFBWlQsZUFBQSxDQUFBUyxZQUFZO0VBQ1pDLFVBQVUsRUFBVkosYUFBQSxDQUFBSSxVQUFVO0VBQ1ZDLFFBQVEsRUFBUk4sV0FBQSxDQUFBTSxRQUFRO0VBQ1JDLFNBQVMsRUFBVFIsV0FBQSxDQUFBUSxTQUFTO0VBQ1RDLFlBQVksRUFBWlYsY0FBQSxDQUFBVSxZQUFZO0VBQ1pDLGNBQWMsRUFBZFosaUJBQUEsQ0FBQVk7Q0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","exports","ResponseError","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/response_error.ts"],"sourcesContent":["import {BaseResponse} from './base_response';\nimport {InternalServer} from './internal_server';\nimport {Unauthorized} from './unauthorized';\nimport {Forbidden} from './forbidden';\nimport {NotFound} from './not_found';\nimport {BadRequest} from './bad_request';\n\nexport const ResponseError = {\n    BaseResponse,\n    BadRequest,\n    NotFound,\n    Forbidden,\n    Unauthorized,\n    InternalServer,\n}\n\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,aAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,aAAa,GAAG;EACzBC,YAAY,EAAZT,eAAA,CAAAS,YAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAI,UAAU;EACVC,QAAQ,EAARN,WAAA,CAAAM,QAAQ;EACRC,SAAS,EAATR,WAAA,CAAAQ,SAAS;EACTC,YAAY,EAAZV,cAAA,CAAAU,YAAY;EACZC,cAAc,EAAdZ,iBAAA,CAAAY;CACH","ignoreList":[]}},"mtime":1725611830108},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nclass BaseResponse extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJuZXciLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvYmFzZV9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQmFzZVJlc3BvbnNlIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLmNvZGUgPSBzdGF0dXNDb2RlO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBYUEsWUFBYSxTQUFRQyxLQUFLO0VBR3JDQyxZQUFZQyxPQUFlLEVBQUVDLFVBQWtCO0lBQzdDLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDQSxPQUFPLEdBQUdBLE9BQU87SUFDdEIsSUFBSSxDQUFDRSxJQUFJLEdBQUdELFVBQVU7SUFDdEJFLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUMsR0FBRyxDQUFDQyxNQUFNLENBQUNDLFNBQVMsQ0FBQztFQUNuRDs7QUFSRkMsT0FBQSxDQUFBWCxZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BaseResponse","Error","constructor","message","statusCode","code","Object","setPrototypeOf","new","target","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/base_response.ts"],"sourcesContent":["export class BaseResponse extends Error {\n  public code: number;\n\n  constructor(message: string, statusCode: number) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAaA,YAAa,SAAQC,KAAK;EAGrCC,YAAYC,OAAe,EAAEC,UAAkB;IAC7C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,IAAI,GAAGD,UAAU;IACtBE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEC,GAAG,CAACC,MAAM,CAACC,SAAS,CAAC;EACnD;;AARFC,OAAA,CAAAX,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1738401089752},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass InternalServer extends base_response_1.BaseResponse {\n  constructor(message = \"Internal server error\") {\n    super(message, 500);\n  }\n}\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvaW50ZXJuYWxfc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIikge1xuICAgICAgc3VwZXIobWVzc2FnZSwgNTAwKTtcbiAgICB9XG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGNBQWUsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzVDQyxZQUFZQyxPQUFPLEdBQUcsdUJBQXVCO0lBQzNDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFISkMsT0FBQSxDQUFBSixjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","InternalServer","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/internal_server.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class InternalServer extends BaseResponse {\n    constructor(message = \"Internal server error\") {\n      super(message, 500);\n    }\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,cAAe,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,uBAAuB;IAC3C,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Unauthorized extends base_response_1.BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3VuYXV0aG9yaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUmVzcG9uc2UgfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWQgZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJVbmF1dGhvcml6ZWQgYWNjZXNzXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDEpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFlBQWEsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzVDQyxZQUFZQyxPQUFPLEdBQUcscUJBQXFCO0lBQ3pDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFIRkMsT0FBQSxDQUFBSixZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Unauthorized","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class Unauthorized extends BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,YAAa,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,qBAAqB;IACzC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Forbidden extends base_response_1.BaseResponse {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2ZvcmJpZGRlbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Jhc2VSZXNwb25zZX0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiXG5cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc3NhZ2UsIDQwMylcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsU0FBVSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdkNDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFKSkMsT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Forbidden","BaseResponse","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/forbidden.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\n\nexport class Forbidden extends BaseResponse {\n    constructor(messsage: string) {\n        super(messsage, 403)\n        Object.setPrototypeOf(this, Forbidden.prototype);\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,SAAU,SAAQF,eAAA,CAAAG,YAAY;EACvCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAJJC,OAAA,CAAAP,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1724460922119},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass NotFound extends base_response_1.BaseResponse {\n  constructor(message = \"Not found\") {\n    super(message, 404);\n  }\n}\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3Ivbm90X2ZvdW5kLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJOb3QgZm91bmRcIikge1xuICAgICAgc3VwZXIobWVzc2FnZSwgNDA0KTtcbiAgICB9XG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFFBQVMsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQ3RDQyxZQUFZQyxPQUFPLEdBQUcsV0FBVztJQUMvQixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEpDLE9BQUEsQ0FBQUosUUFBQSxHQUFBQSxRQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","NotFound","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/not_found.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class NotFound extends BaseResponse {\n    constructor(message = \"Not found\") {\n      super(message, 404);\n    }\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,QAAS,SAAQF,eAAA,CAAAG,YAAY;EACtCC,YAAYC,OAAO,GAAG,WAAW;IAC/B,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,QAAA,GAAAA,QAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass BadRequest extends base_response_1.BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsIkJhc2VSZXNwb25zZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9iYWRfcmVxdWVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUmVzcG9uc2UgfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiQmFkIHJlcXVlc3RcIikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwMCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsVUFBVyxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDMUNDLFlBQVlDLE9BQU8sR0FBRyxhQUFhO0lBQ2pDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFIRkMsT0FBQSxDQUFBSixVQUFBLEdBQUFBLFVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","BadRequest","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/bad_request.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class BadRequest extends BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,UAAW,SAAQF,eAAA,CAAAG,YAAY;EAC1CC,YAAYC,OAAO,GAAG,aAAa;IACjC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,UAAA,GAAAA,UAAA","ignoreList":[]}},"mtime":1738396936529},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useValidation = void 0;\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\nexports.useValidation = useValidation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VWYWxpZGF0aW9uIiwic2NoZW1hIiwidmFsdWUiLCJvcHRpb25zIiwidmFsaWRhdGVTeW5jIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJvcnRFYXJseSIsInN0cmlwVW5rbm93biIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci91c2VfdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IFNjaGVtYSwgVmFsaWRhdGVPcHRpb25zIH0gZnJvbSAneXVwJ1xuXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWYWxpZGF0aW9uPFQ+KFxuICBzY2hlbWE6IFNjaGVtYTxUPixcbiAgdmFsdWU6IFQgfCBhbnksXG4gIG9wdGlvbnM/OiBWYWxpZGF0ZU9wdGlvbnNcbik6IFQge1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZSwge1xuICAgIGFib3J0RWFybHk6IGZhbHNlLFxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcbiAgICAuLi5vcHRpb25zLFxuICB9KVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLFNBQWdCQSxhQUFhQSxDQUMzQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0o7QUFWQU0sT0FBQSxDQUFBVCxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/use_validation.ts"],"sourcesContent":["\nimport { Schema, ValidateOptions } from 'yup'\n\n\nexport function useValidation<T>(\n  schema: Schema<T>,\n  value: T | any,\n  options?: ValidateOptions\n): T {\n  return schema.validateSync(value, {\n    abortEarly: false,\n    stripUnknown: true,\n    ...options,\n  })\n}\n\n"],"mappings":";;;;;;AAIA,SAAgBA,aAAaA,CAC3BC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ;AAVAM,OAAA,CAAAT,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830110},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loginSchema = exports.registerSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerSchema = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nexports.loginSchema = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJ1c2VyTmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0b2tlblZlcmlmeSIsIm51bGxhYmxlIiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB5dXAgZnJvbSAneXVwJztcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICB1c2VyTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCd1c2VyTmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoJ2ludmFsaWQgZW1haWwnKS5yZXF1aXJlZCgnZW1haWwgaXMgcmVxdWlyZWQnKSxcbiAgICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgcGFzc3dvcmQ6IHl1cC5zdHJpbmcoKS5taW4oOCwgJ2F0IGxlYXN0IDggY2hhcmVjdGVycycpXG4gICAgICAgIC5vbmVPZihbeXVwLnJlZignY29uZmlybVBhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpLFxuICAgIGNvbmZpcm1QYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKCdwYXNzd29yZCcpXSwgJ3Bhc3N3b3JkIGFyZSBub3QgdGhlIHNhbWUnKVxufSk7XG5cbmV4cG9ydCAgY29uc3QgbG9naW5TY2hlbWEgPSB5dXAub2JqZWN0KClcbiAgICAuc2hhcGUoe1xuICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdlbWFpbCBpcyByZXF1aXJlZCcpLFxuICAgICAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdwYXNzd29yZCBpcyByZXF1aXJlZCcpLFxuICAgIH0pLnJlcXVpcmVkKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGNBQWMsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzdDQyxRQUFRLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQztFQUN2REMsS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RUUsV0FBVyxFQUFFWCxHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDSSxRQUFRLEVBQUU7RUFDcENDLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ00sR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUNqREMsS0FBSyxDQUFDLENBQUNmLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDckVDLGVBQWUsRUFBRWpCLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDeERDLEtBQUssQ0FBQyxDQUFDZixHQUFHLENBQUNnQixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSwyQkFBMkI7Q0FDaEUsQ0FBQztBQUVZYixPQUFBLENBQUFlLFdBQVcsR0FBR2xCLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQ25DQyxLQUFLLENBQUM7RUFDSEksS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDakRJLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQjtDQUN6RCxDQUFDLENBQUNBLFFBQVEsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerSchema","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","loginSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\n\nexport const registerSchema = yup.object().shape({\n    userName: yup.string().required('userName is required'),\n    email: yup.string().email('invalid email').required('email is required'),\n    tokenVerify: yup.string().nullable(),\n    password: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('password')], 'password are not the same')\n});\n\nexport  const loginSchema = yup.object()\n    .shape({\n        email: yup.string().required('email is required'),\n        password: yup.string().required('password is required'),\n    }).required();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,cAAc,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,QAAQ,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvDC,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxEE,WAAW,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEYb,OAAA,CAAAe,WAAW,GAAGlB,GAAG,CAACK,MAAM,EAAE,CACnCC,KAAK,CAAC;EACHI,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE","ignoreList":[]}},"mtime":1730104515985},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst common_1 = require(\"../../helper/common\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getUserInfo)(email);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      // SendMail.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getNewPassword = yield (0, db_1.comparePassword)(formData.email);\n      const pass = getNewPassword[0].password;\n      const getComparePassword = yield bcrypt_1.default.compare(formData.oldPassword, pass);\n      if (getComparePassword) {\n        const getNewPassword = yield (0, db_1.changePassword)(formData);\n        return getNewPassword;\n      }\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfileuser(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.tokenVerify = tokenVerify;\n      const result = yield (0, db_1.updateProfileUser)(userData);\n      if (!result) {\n        throw new response_error_1.ResponseError.BadRequest(\"Can Not Update profile...\");\n      } else {\n        return result;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.ResponseError.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.useValidation)(schema_1.checkEmailSchema, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.UserService = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJjb21tb25fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsImRhdGEiLCJtZXNzYWdlIiwidmFsaWRhdGVVc2VyRW1haWwiLCJjaGVja1VzZXJFeGlzdCIsImxlbmd0aCIsImdldFZlcmlmeUNvZGUiLCJ1c2VyRGF0YSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiY2hhbmdlUGFzc3dvcmQiLCJmb3JtRGF0YSIsImdldE5ld1Bhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkIiwicGFzcyIsInBhc3N3b3JkIiwiZ2V0Q29tcGFyZVBhc3N3b3JkIiwiY29tcGFyZSIsIm9sZFBhc3N3b3JkIiwidXBkYXRlUHJvZmlsZXVzZXIiLCJnZW5lcmF0ZVRva2VuIiwiY29kZSIsImdldFVuaXF1ZUNvZGV2MiIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInVwZGF0ZVByb2ZpbGVVc2VyIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJjaGVja05pY2tOYW1lIiwibmlja05hbWUiLCJnZXREYXRhIiwic2VuZEZyb2dldFBhc3N3b3JkVG9rZW4iLCJ1c2VWYWxpZGF0aW9uIiwiY2hlY2tFbWFpbFNjaGVtYSIsImN1cnJlbnRVc2VyIiwic3RhdHVzIiwiZW1haWxDb25maXJtZWQiLCJzaWdudXBTdGF0dXMiLCJpc0FjdGl2ZSIsIm5ld0NvZGUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImlkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHVzZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zZXJjdmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcbmltcG9ydCB7IHVzZVZhbGlkYXRpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVyL3VzZV92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHtcclxuICBjaGFuZ2VQYXNzd29yZCxcclxuICBjaGVja05pY2tOYW1lLFxyXG4gIGNoZWNrVXNlckV4aXN0LFxyXG4gIGNvbXBhcmVQYXNzd29yZCxcclxuICBnZXRPVFAsXHJcbiAgZ2V0VXNlckluZm8sXHJcbiAgdXBkYXRlUHJvZmlsZVVzZXIsXHJcbiAgdXBkYXRlVXNlclZlcmlmeUNvZGVcclxufSBmcm9tIFwiLi9kYlwiO1xyXG5pbXBvcnQgeyBjaGVja0VtYWlsU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hXCI7XHJcblxyXG5jb25zdCB7IEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLCBKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4gfTogYW55ID0gcHJvY2Vzcy5lbnY7XHJcbmNvbnN0IEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCA9IHByb2Nlc3MuZW52LkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCB8fCBcIjFkXCI7IC8vIDEgRGF5c1xyXG5cclxuY29uc3QgZXhwaXJlc0luID0gbXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDA7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlclNlcnZpY2Uge1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJJbmZvKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRVc2VySW5mbyhlbWFpbCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHZhbGlkYXRlVXNlckVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1VzZXJFeGlzdChlbWFpbCk7XHJcblxyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBkYXRhWzBdIGFzIFVzZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBmb3JtRGF0YVxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFZlcmlmeUNvZGUodXNlckRhdGE6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gICAgLy8gY29uc3QgdXNlckRhdGEgPSB1c2VWYWxpZGF0aW9uKHNjaGVtYVVzZXIuY29uZmlybUVtYWlsLHVzZXJEYXRhKVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0T1RQKHVzZXJEYXRhLCB0b2tlblZlcmlmeSk7XHJcbiAgICAvLyBTZW5kTWFpbC5BY2NvdW50UmVnaXN0ZXIocmVzdWx0KTtcclxuXHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YTogVXNlcikge1xyXG4gICAgY29uc3QgZ2V0TmV3UGFzc3dvcmQgPSBhd2FpdCBjb21wYXJlUGFzc3dvcmQoZm9ybURhdGEuZW1haWwpO1xyXG4gICAgY29uc3QgcGFzcyA9IGdldE5ld1Bhc3N3b3JkWzBdLnBhc3N3b3JkO1xyXG4gICAgY29uc3QgZ2V0Q29tcGFyZVBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoZm9ybURhdGEub2xkUGFzc3dvcmQsIHBhc3MpO1xyXG5cclxuICAgIGlmIChnZXRDb21wYXJlUGFzc3dvcmQpIHtcclxuICAgICAgY29uc3QgZ2V0TmV3UGFzc3dvcmQgPSBhd2FpdCBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YSk7XHJcbiAgICAgIHJldHVybiBnZXROZXdQYXNzd29yZDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHVzZXJEYXRhXHJcbiAgICovXHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUHJvZmlsZXVzZXIodXNlckRhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdlbmVyYXRlVG9rZW4gPSB7XHJcbiAgICAgIGNvZGU6IGdldFVuaXF1ZUNvZGV2MigpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlbmVyYXRlVG9rZW4pKSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHtcclxuICAgICAgICBleHBpcmVzSW4sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdXNlckRhdGEudmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIHVzZXJEYXRhLnRva2VuVmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlVXNlcih1c2VyRGF0YSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiQ2FuIE5vdCBVcGRhdGUgcHJvZmlsZS4uLlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrTmlja05hbWUobmlja05hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgZ2V0RGF0YSA9IGF3YWl0IGNoZWNrTmlja05hbWUoKTtcclxuICAgIGlmIChnZXREYXRhWzBdLm5pY2tOYW1lID09PSBuaWNrTmFtZSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIG5pY2tOYW1lIGlzIGFscmVheSBleGlzdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHVzZVZhbGlkYXRpb24oY2hlY2tFbWFpbFNjaGVtYSwgeyBlbWFpbDogZW1haWwgfSk7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnZhbGlkYXRlVXNlckVtYWlsKGVtYWlsKTtcclxuICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybiB7IHN0YXR1czogMSwgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgdmFsaWQgIVwiIH07XHJcblxyXG4gICAgaWYgKGN1cnJlbnRVc2VyLmVtYWlsQ29uZmlybWVkID09PSAwKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN0YXR1czogMixcclxuICAgICAgICBtZXNzYWdlOiBcInRoaXMgZW1haWwgYWRkcmVzcyBpcyBub3QgY29uZmlybWVkIHlldCAhXCIsXHJcbiAgICAgIH07XHJcbiAgICBpZiAoY3VycmVudFVzZXIuc2lnbnVwU3RhdHVzID09PSAwKVxyXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDMsIG1lc3NhZ2U6IFwic2lnbnVwIHByb2Nlc3MgaXMgbm90IGNvbXBsZXRlIHlldCAhXCIgfTtcclxuICAgIC8vIFRPRE8gZm9yIGZpeCBpc0FjdGl2ZSB0byBib29sZWFuXHJcbiAgICBpZiAoY3VycmVudFVzZXIuaXNBY3RpdmUgPT09IDApXHJcbiAgICAgIHJldHVybiB7IHN0YXR1czogNCwgbWVzc2FnZTogXCJ0aGlzIGFjY291bnQgaXMgbm90IGFjdGl2ZSAhXCIgfTtcclxuICAgIGNvbnN0IG5ld0NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGF3YWl0IHVwZGF0ZVVzZXJWZXJpZnlDb2RlKGN1cnJlbnRVc2VyLmlkLCBuZXdDb2RlKTtcclxuICAgIC8vIHNlbmQgZm9yZ290IHBhc3MgdG9rZW4gY29kZVxyXG4gICAgLy8gU2VuZE1haWwuc2VuZFJlc2V0UGFzc3dvcmRFbWFpbChjdXJyZW50VXNlciwgbmV3Q29kZSk7XHJcbiAgICByZXR1cm4geyBzdGF0dXM6IDUsIG1lc3NhZ2U6IFwiY29kZSBoYXMgYmVlbiBz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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","common_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","data","message","validateUserEmail","checkUserExist","length","getVerifyCode","userData","tokenVerify","result","getOTP","changePassword","formData","getNewPassword","comparePassword","pass","password","getComparePassword","compare","oldPassword","updateProfileuser","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","updateProfileUser","ResponseError","BadRequest","checkNickName","nickName","getData","sendFrogetPasswordToken","useValidation","checkEmailSchema","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/sercvice.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { User } from \"../../types/user\";\r\nimport {\r\n  changePassword,\r\n  checkNickName,\r\n  checkUserExist,\r\n  comparePassword,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfileUser,\r\n  updateUserVerifyCode\r\n} from \"./db\";\r\nimport { checkEmailSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class UserService {\r\n\r\n  public static async getUserInfo(email: string) {\r\n    const data = await getUserInfo(email);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    // SendMail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(formData: User) {\r\n    const getNewPassword = await comparePassword(formData.email);\r\n    const pass = getNewPassword[0].password;\r\n    const getComparePassword = await bcrypt.compare(formData.oldPassword, pass);\r\n\r\n    if (getComparePassword) {\r\n      const getNewPassword = await changePassword(formData);\r\n      return getNewPassword;\r\n    }\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n\r\n  public static async updateProfileuser(userData: User) {\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.tokenVerify = tokenVerify;\r\n    const result = await updateProfileUser(userData);\r\n    if (!result) {\r\n      throw new ResponseError.BadRequest(\"Can Not Update profile...\");\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(checkEmailSchema, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,IAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,QAAA,GAAAH,OAAA;AAEA,MAAAI,gBAAA,GAAAJ,OAAA;AACA,MAAAK,gBAAA,GAAAL,OAAA;AAEA,MAAAM,IAAA,GAAAN,OAAA;AAUA,MAAAO,QAAA,GAAAP,OAAA;AAEA,MAAM;EAAEQ,uBAAuB;EAAEC;AAAwB,CAAE,GAAQC,OAAO,CAACC,GAAG;AAC9E,MAAMC,wBAAwB,GAAGF,OAAO,CAACC,GAAG,CAACC,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAE/E,MAAMC,SAAS,GAAG,IAAAX,IAAA,CAAAY,OAAE,EAACF,wBAAwB,CAAC,GAAG,IAAI;AAErD,MAAaG,WAAW;EAEf,OAAaC,WAAWA,CAACC,KAAa;;MAC3C,MAAMC,IAAI,GAAG,MAAM,IAAAZ,IAAA,CAAAU,WAAW,EAACC,KAAK,CAAC;MACrC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EACD;;;EAGO,OAAaE,iBAAiBA,CAACH,KAAa;;MACjD,MAAMC,IAAI,GAAG,MAAM,IAAAZ,IAAA,CAAAe,cAAc,EAACJ,KAAK,CAAC;MAExC,IAAIC,IAAI,CAACI,MAAM,EAAE;QACf,OAAOJ,IAAI,CAAC,CAAC,CAAS;MACxB;MACA,OAAO,IAAI;IACb,CAAC;;EAED;;;EAIA;;;EAGO,OAAaK,aAAaA,CAACC,QAAa,EAAEC,WAAgB;;MAC/D;MACA,MAAMC,MAAM,GAAG,MAAM,IAAApB,IAAA,CAAAqB,MAAM,EAACH,QAAQ,EAAEC,WAAW,CAAC;MAClD;MAEA,IAAIC,MAAM,EAAE;QACV,OAAOA,MAAM;MACf;MACA,OAAO,IAAI;IACb,CAAC;;EACD;;;EAGO,OAAaE,cAAcA,CAACC,QAAc;;MAC/C,MAAMC,cAAc,GAAG,MAAM,IAAAxB,IAAA,CAAAyB,eAAe,EAACF,QAAQ,CAACZ,KAAK,CAAC;MAC5D,MAAMe,IAAI,GAAGF,cAAc,CAAC,CAAC,CAAC,CAACG,QAAQ;MACvC,MAAMC,kBAAkB,GAAG,MAAMpC,QAAA,CAAAgB,OAAM,CAACqB,OAAO,CAACN,QAAQ,CAACO,WAAW,EAAEJ,IAAI,CAAC;MAE3E,IAAIE,kBAAkB,EAAE;QACtB,MAAMJ,cAAc,GAAG,MAAM,IAAAxB,IAAA,CAAAsB,cAAc,EAACC,QAAQ,CAAC;QACrD,OAAOC,cAAc;MACvB;IACF,CAAC;;EACD;;;EAIO,OAAaO,iBAAiBA,CAACb,QAAc;;MAClD,MAAMc,aAAa,GAAG;QACpBC,IAAI,EAAE,IAAApC,QAAA,CAAAqC,eAAe;OACtB;MAED,MAAMf,WAAW,GAAGxB,cAAA,CAAAa,OAAG,CAAC2B,IAAI,CAC1BC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACN,aAAa,CAAC,CAAC,EACzC9B,uBAAuB,EACvB;QACEK;OACD,CACF;MAEDW,QAAQ,CAACqB,WAAW,GAAG,IAAA1C,QAAA,CAAA2C,eAAe,GAAE;MACxCtB,QAAQ,CAACC,WAAW,GAAGA,WAAW;MAClC,MAAMC,MAAM,GAAG,MAAM,IAAApB,IAAA,CAAAyC,iBAAiB,EAACvB,QAAQ,CAAC;MAChD,IAAI,CAACE,MAAM,EAAE;QACX,MAAM,IAAIrB,gBAAA,CAAA2C,aAAa,CAACC,UAAU,CAAC,2BAA2B,CAAC;MACjE,CAAC,MAAM;QACL,OAAOvB,MAAM;MACf;IACF,CAAC;;EAED;;;EAGO,OAAawB,aAAaA,CAACC,QAAgB;;MAChD,MAAMC,OAAO,GAAG,MAAM,IAAA9C,IAAA,CAAA4C,aAAa,GAAE;MACrC,IAAIE,OAAO,CAAC,CAAC,CAAC,CAACD,QAAQ,KAAKA,QAAQ,EAAE;QACpC,MAAM,IAAI9C,gBAAA,CAAA2C,aAAa,CAACC,UAAU,CAAC,+BAA+B,CAAC;MACrE,CAAC,MAAM;QACL;MACF;IACF,CAAC;;EAEM,OAAaI,uBAAuBA,CAACpC,KAAa;;MACvD,IAAAb,gBAAA,CAAAkD,aAAa,EAAC/C,QAAA,CAAAgD,gBAAgB,EAAE;QAAEtC,KAAK,EAAEA;MAAK,CAAE,CAAC;MACjD,MAAMuC,WAAW,GAAG,MAAMzC,WAAW,CAACK,iBAAiB,CAACH,KAAK,CAAC;MAC9D,IAAI,CAACuC,WAAW,EAAE,OAAO;QAAEC,MAAM,EAAE,CAAC;QAAEtC,OAAO,EAAE;MAAsB,CAAE;MAEvE,IAAIqC,WAAW,CAACE,cAAc,KAAK,CAAC,EAClC,OAAO;QACLD,MAAM,EAAE,CAAC;QACTtC,OAAO,EAAE;OACV;MACH,IAAIqC,WAAW,CAACG,YAAY,KAAK,CAAC,EAChC,OAAO;QAAEF,MAAM,EAAE,CAAC;QAAEtC,OAAO,EAAE;MAAsC,CAAE;MACvE;MACA,IAAIqC,WAAW,CAACI,QAAQ,KAAK,CAAC,EAC5B,OAAO;QAAEH,MAAM,EAAE,CAAC;QAAEtC,OAAO,EAAE;MAA8B,CAAE;MAC/D,MAAM0C,OAAO,GAAG,IAAA1D,QAAA,CAAA2C,eAAe,GAAE;MACjC,MAAM,IAAAxC,IAAA,CAAAwD,oBAAoB,EAACN,WAAW,CAACO,EAAE,EAAEF,OAAO,CAAC;MACnD;MACA;MACA,OAAO;QAAEJ,MAAM,EAAE,CAAC;QAAEtC,OAAO,EAAE;MAAmC,CAAE;IACpE,CAAC;;;AA/GH6C,OAAA,CAAAjD,WAAA,GAAAA,WAAA","ignoreList":[]}},"mtime":1738657967050},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUser = createUser;\nexports.getUserByGoogleId = getUserByGoogleId;\nexports.getAdmins = getAdmins;\nexports.getNavItems = getNavItems;\nexports.getAppointment = getAppointment;\nexports.updateAppointment = updateAppointment;\nexports.deleteAppointment = deleteAppointment;\nexports.getPatients = getPatients;\nexports.patientDetail = patientDetail;\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nexports.addPatient = addPatient;\nexports.deletePatient = deletePatient;\nexports.updatePatient = updatePatient;\nexports.getMedicine = getMedicine;\nexports.getDisease = getDisease;\nexports.getDiseaseSubcategories = getDiseaseSubcategories;\nexports.updateIsFavorite = updateIsFavorite;\nexports.addPrescriptionMedicine = addPrescriptionMedicine;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = require(\"../controller/user/schema\");\nconst mysql_1 = require(\"./mysql\");\nconst schema_2 = require(\"../controller/patients/schema\");\nconst response_error_1 = require(\"../modules/error/response_error\");\n// ****** Auth ******\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.createSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [data.firstName, data.lastName, data.userName, data.email, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nfunction getUserByGoogleId(googleId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`\n    SELECT * FROM${mysql_1.coreSchema}.users\n    WHERE google_id=?`, {\n      values: [googleId]\n    });\n    if (user.length < 1) return null;else return user[0];\n  });\n}\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const getManu = yield (0, mysql_1.query)(`SELECT \n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\n      FROM ${mysql_1.coreSchema}.menu m\n      LEFT JOIN ${mysql_1.coreSchema}.submenu s ON m.id = s.menu_id\n    ORDER BY m.id, s.id`);\n      const menuMap = new Map();\n      const iconMap = {\n        \"Appointments\": \"appointment-icon\",\n        \"Dashboard\": \"dashboard-icon\",\n        \"Doctors\": \"doctor-icon\",\n        \"Services\": \"services-icon\",\n        \"Patients\": \"patient-icon\",\n        \"Prescriptions\": \"prescriptions-icon\",\n        \"Billing & Payments\": \"billing-icon\",\n        \"Reports & Analytics\": \"report-icon\",\n        \"Settings\": \"settings-icon\",\n        \"Staff Management\": \"staff-icon\",\n        \"Inventory\": \"inventory-icon\"\n      };\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            id: row.menu_id,\n            icon: iconMap[row.menu_name] || 'default-icon',\n            name: row.menu_name,\n            path: row.menu_path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            id: row.submenu_id,\n            name: row.submenu_name,\n            path: row.submenu_url,\n            icon: row.submenu_icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (e) {\n      console.log(e);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction getAppointment() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getEventData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.appointments`);\n    return getEventData;\n  });\n}\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.appointments\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`, {\n      values: [data.date, new Date(), data.event_id]\n    });\n    if (result) {\n      return result;\n    }\n  });\n}\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\n// ****** Patients ******\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT * FROM ${mysql_1.coreSchema}.patients\n  `);\n    return patients;\n  });\n}\nfunction patientDetail(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nfunction addPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_2.patientSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.first_name, data.last_name, data.phone, data.email, hashedPassword, data.token_verify, data.verify_code, new Date(), new Date()]\n    });\n    return result;\n  });\n}\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET patientName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.patientName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nfunction getMedicine() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.medications\n    `);\n    return result;\n  });\n}\nfunction getDisease() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases`);\n    return result;\n  });\n}\nfunction getDiseaseSubcategories(disease_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases d \n      LEFT JOIN ${mysql_1.coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\n    WHERE d.disease_id = ?`, {\n      values: [disease_id]\n    });\n    return result;\n  });\n}\nfunction updateIsFavorite(medication_id, isFavorite) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`, {\n      values: [isFavorite, medication_id]\n    });\n    return result;\n  });\n}\nfunction addPrescriptionMedicine(formData, medicine_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    INSERT INTO ${mysql_1.coreSchema}.prescription_medicine\n     (\n      id,\n      medicine_id,\n      prescribed_date\n    ) VALUES (?, ?, ?)\n    `, {\n      values: [formData.id, medicine_id, formData.prescribed_date]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY3JlYXRlVXNlciIsImdldFVzZXJCeUdvb2dsZUlkIiwiZ2V0QWRtaW5zIiwiZ2V0TmF2SXRlbXMiLCJnZXRBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZGVsZXRlQXBwb2ludG1lbnQiLCJnZXRQYXRpZW50cyIsInBhdGllbnREZXRhaWwiLCJjaGVja1Bob25lTnVtYmVyRXhpc3RzIiwiYWRkUGF0aWVudCIsImRlbGV0ZVBhdGllbnQiLCJ1cGRhdGVQYXRpZW50IiwiZ2V0TWVkaWNpbmUiLCJnZXREaXNlYXNlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJzY2hlbWFfMSIsIm15c3FsXzEiLCJzY2hlbWFfMiIsInJlc3BvbnNlX2Vycm9yXzEiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImNyZWF0ZVNjaGVtYSIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJkZWZhdWx0IiwiaGFzaFN5bmMiLCJuZXdJZCIsInY0IiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwidmFsdWVzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ1c2VyTmFtZSIsImVtYWlsIiwidmVyaWZ5X2NvZGUiLCJEYXRlIiwidG9rZW5WZXJpZnkiLCJnb29nbGVJZCIsInVzZXIiLCJsZW5ndGgiLCJ1c2VyQWRtaW4iLCJnZXRNYW51IiwibWVudU1hcCIsIk1hcCIsImljb25NYXAiLCJmb3JFYWNoIiwicm93IiwibWVudUlkIiwibWVudV9pZCIsImhhcyIsInNldCIsImlkIiwiaWNvbiIsIm1lbnVfbmFtZSIsIm5hbWUiLCJwYXRoIiwibWVudV9wYXRoIiwic3VibWVudXMiLCJzdWJtZW51X2lkIiwic3VibWVudSIsInN1Ym1lbnVfbmFtZSIsInN1Ym1lbnVfdXJsIiwic3VibWVudV9pY29uIiwiX2EiLCJnZXQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJSZXNwb25zZUVycm9yIiwiSW50ZXJuYWxTZXJ2ZXIiLCJnZXRFdmVudERhdGEiLCJkYXRlIiwiZXZlbnRfaWQiLCJwYXRpZW50cyIsIm1vYmlsZSIsInBhdGllbnRTY2hlbWEiLCJoYXNoZWRQYXNzd29yZCIsImVycm9yIiwiVW5hdXRob3JpemVkIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInBob25lIiwidG9rZW5fdmVyaWZ5IiwicGF0aWVudERhdGEiLCJwYXRpZW50TmFtZSIsImdlbmRlciIsImRhdGVPZkJpcnRoIiwiYWdlIiwiYmxvb2RQcmVzc3VyZSIsImluanVyeSIsImJsb29kR3JvdXAiLCJhZGRyZXNzIiwiZGlzZWFzZV9pZCIsIm1lZGljYXRpb25faWQiLCJpc0Zhdm9yaXRlIiwiZm9ybURhdGEiLCJtZWRpY2luZV9pZCIsInByZXNjcmliZWRfZGF0ZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvYmluL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgeyBjcmVhdGVTY2hlbWEgfSBmcm9tIFwiLi4vY29udHJvbGxlci91c2VyL3NjaGVtYVwiO1xyXG5pbXBvcnQgeyBBZG1pbkRUTyB9IGZyb20gXCIuLi9tb2RlbHMvYWRtaW5cIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuaW1wb3J0IHsgUHJlc2NyaXB0aW9uTWVkaWNpbmUgfSBmcm9tIFwiLi4vbW9kZWxzL3ByZXNjcmlwdGlvbl9tZWRpY2luZVwiO1xyXG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IE1lbnUsIFN1Ym1lbnUgfSBmcm9tIFwiLi4vdHlwZXMvbmF2SXRlbVwiO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHsgUm93RGF0YVBhY2tldCwgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi9teXNxbFwiO1xyXG5pbXBvcnQgeyBwYXRpZW50U2NoZW1hIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXIvcGF0aWVudHMvc2NoZW1hXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5cclxuLy8gKioqKioqIEF1dGggKioqKioqXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihkYXRhOiBDcmVhdGVVc2VyKSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGNyZWF0ZVNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaCA9IGJjcnlwdC5oYXNoU3luYyh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAoZmlyc3ROYW1lLGxhc3ROYW1lLHVzZXJOYW1lLGVtYWlsLHBhc3N3b3JkLHNpZ251cFN0YXR1cyx2ZXJpZnlfY29kZSxjcmVhdGVkQXQsdXBkYXRlZEF0LHRva2VuVmVyaWZ5KVxyXG4gICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBkYXRhLnVzZXJOYW1lLFxyXG4gICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgaGFzaCxcclxuICAgICAgICAwLFxyXG4gICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGRhdGEudG9rZW5WZXJpZnksXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5R29vZ2xlSWQoZ29vZ2xlSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUICogRlJPTSR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGdvb2dsZV9pZD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZ29vZ2xlSWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHVzZXIubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XHJcbiAgZWxzZSByZXR1cm4gdXNlclswXSBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWRtaW5zKCkge1xyXG4gIGNvbnN0IHVzZXJBZG1pbiA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmFkbWluXHJcbiAgICBgKTtcclxuICByZXR1cm4gdXNlckFkbWluIGFzIEFkbWluRFRPW107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZ2V0TWFudSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgXHJcbiAgICAgIG0uaWQgQVMgbWVudV9pZCwgbS5uYW1lIEFTIG1lbnVfbmFtZSwgbS5pY29uIEFTIG1lbnVfaWNvbiwgbS5yb3V0ZSBBUyBtZW51X3BhdGgsXHJcbiAgICAgIHMuaWQgQVMgc3VibWVudV9pZCwgcy5uYW1lIEFTIHN1Ym1lbnVfbmFtZSwgcy5yb3V0ZSBBUyBzdWJtZW51X3VybFxyXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0ubWVudSBtXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnN1Ym1lbnUgcyBPTiBtLmlkID0gcy5tZW51X2lkXHJcbiAgICBPUkRFUiBCWSBtLmlkLCBzLmlkYFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBtZW51TWFwID0gbmV3IE1hcDxudW1iZXIsIE1lbnU+KCk7XHJcblxyXG4gICAgY29uc3QgaWNvbk1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICAgXCJBcHBvaW50bWVudHNcIjogXCJhcHBvaW50bWVudC1pY29uXCIsXHJcbiAgICAgIFwiRGFzaGJvYXJkXCI6IFwiZGFzaGJvYXJkLWljb25cIixcclxuICAgICAgXCJEb2N0b3JzXCI6IFwiZG9jdG9yLWljb25cIixcclxuICAgICAgXCJTZXJ2aWNlc1wiOiBcInNlcnZpY2VzLWljb25cIixcclxuICAgICAgXCJQYXRpZW50c1wiOiBcInBhdGllbnQtaWNvblwiLFxyXG4gICAgICBcIlByZXNjcmlwdGlvbnNcIjogXCJwcmVzY3JpcHRpb25zLWljb25cIixcclxuICAgICAgXCJCaWxsaW5nICYgUGF5bWVudHNcIjogXCJiaWxsaW5nLWljb25cIixcclxuICAgICAgXCJSZXBvcnRzICYgQW5hbHl0aWNzXCI6IFwicmVwb3J0LWljb25cIixcclxuICAgICAgXCJTZXR0aW5nc1wiOiBcInNldHRpbmdzLWljb25cIixcclxuICAgICAgXCJTdGFmZiBNYW5hZ2VtZW50XCI6IFwic3RhZmYtaWNvblwiLFxyXG4gICAgICBcIkludmVudG9yeVwiOiBcImludmVudG9yeS1pY29uXCIsXHJcbiAgICB9O1xyXG4gICAgZ2V0TWFudS5mb3JFYWNoKChyb3cpID0+IHtcclxuICAgICAgY29uc3QgbWVudUlkID0gcm93Lm1lbnVfaWQ7XHJcbiAgICAgIGlmICghbWVudU1hcC5oYXMobWVudUlkKSkge1xyXG4gICAgICAgIG1lbnVNYXAuc2V0KG1lbnVJZCwge1xyXG4gICAgICAgICAgaWQ6IHJvdy5tZW51X2lkLFxyXG4gICAgICAgICAgaWNvbjogaWNvbk1hcFtyb3cubWVudV9uYW1lXSB8fCAnZGVmYXVsdC1pY29uJyxcclxuICAgICAgICAgIG5hbWU6IHJvdy5tZW51X25hbWUsXHJcbiAgICAgICAgICBwYXRoOiByb3cubWVudV9wYXRoLFxyXG4gICAgICAgICAgc3VibWVudXM6IFtdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyb3cuc3VibWVudV9pZCkge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnU6IFN1Ym1lbnUgPSB7XHJcbiAgICAgICAgICBpZDogcm93LnN1Ym1lbnVfaWQsXHJcbiAgICAgICAgICBuYW1lOiByb3cuc3VibWVudV9uYW1lLFxyXG4gICAgICAgICAgcGF0aDogcm93LnN1Ym1lbnVfdXJsLFxyXG4gICAgICAgICAgaWNvbjogcm93LnN1Ym1lbnVfaWNvbixcclxuICAgICAgICB9O1xyXG4gICAgICAgIG1lbnVNYXAuZ2V0KG1lbnVJZCk/LnN1Ym1lbnVzLnB1c2goc3VibWVudSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20obWVudU1hcC52YWx1ZXMoKSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwb2ludG1lbnQoKSB7XHJcbiAgY29uc3QgZ2V0RXZlbnREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzYFxyXG4gICk7XHJcbiAgcmV0dXJuIGdldEV2ZW50RGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50KFxyXG4gIGRhdGE6IElBcHBvaW50bWVudFxyXG4pOiBQcm9taXNlPElBcHBvaW50bWVudFtdIHwgdW5kZWZpbmVkPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5hcHBvaW50bWVudHNcclxuICAgIFNFVCBkYXRlID0gPywgdXBkYXRlZF9hdCA9ID9cclxuICAgIFdIRVJFIGV2ZW50X2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZGF0ZSwgbmV3IERhdGUoKSwgZGF0YS5ldmVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gcmVzdWx0IGFzIElBcHBvaW50bWVudFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KGV2ZW50X2lkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0uY2FsZW5kYXJfZXZlbnRzXHJcbiAgICAgIFdIRVJFIGV2ZW50X2lkPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtldmVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbi8vICoqKioqKiBQYXRpZW50cyAqKioqKipcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnRzKCkge1xyXG4gIGNvbnN0IHBhdGllbnRzID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHBhdGllbnRzO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXRpZW50RGV0YWlsKGlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgV0hFUkUgaWQ9P2AsXHJcbiAgICB7IHZhbHVlczogW2lkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KGRhdGE6IFBhdGllbnREVE8pIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gcGF0aWVudFNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiUGFzc3dvcmQgaXMgaW52YWxpZFwiKTtcclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRcclxuICAgICAgKGlkLGZpcnN0X25hbWUsbGFzdF9uYW1lLHBob25lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXHJcbiAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgZGF0YS5maXJzdF9uYW1lLFxyXG4gICAgICAgIGRhdGEubGFzdF9uYW1lLFxyXG4gICAgICAgIGRhdGEucGhvbmUsXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBhdGllbnQoaWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudHNcclxuICAgIFdIRVJFIGlkID0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGF0aWVudChwYXRpZW50RGF0YTogUGF0aWVudERUTyk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICAgIFNFVCBwYXRpZW50TmFtZSA9ID8sXHJcbiAgICAgICAgICBnZW5kZXIgPSA/LFxyXG4gICAgICAgICAgbW9iaWxlID0gPyxcclxuICAgICAgICAgIGRhdGVPZkJpcnRoID0gPyxcclxuICAgICAgICAgIGFnZSA9ID8sXHJcbiAgICAgICAgICBlbWFpbCA9ID8sXHJcbiAgICAgICAgICBibG9vZFByZXNzdXJlID0gPyxcclxuICAgICAgICAgIGluanVyeSA9ID8sXHJcbiAgICAgICAgICBibG9vZEdyb3VwID0gPyxcclxuICAgICAgICAgIGFkZHJlc3MgPSA/XHJcbiAgICAgIFdIRVJFIGlkID0gP1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtcclxuICAgICAgICBwYXRpZW50RGF0YS5wYXRpZW50TmFtZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5nZW5kZXIsXHJcbiAgICAgICAgcGF0aWVudERhdGEubW9iaWxlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmRhdGVPZkJpcnRoLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFnZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5lbWFpbCxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZFByZXNzdXJlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmluanVyeSxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZEdyb3VwLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFkZHJlc3MsXHJcbiAgICAgICAgcGF0aWVudERhdGEuaWQsXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWVkaWNpbmUoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0ubWVkaWNhdGlvbnNcclxuICAgIGApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREaXNlYXNlKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmRpc2Vhc2VzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmRpc2Vhc2VzIGQgXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LmRpc2Vhc2Vfc3ViY2F0ZWdvcmllcyBkcyBPTiBkLmRpc2Vhc2VfaWQgPSBkcy5kaXNlYXNlX2lkXHJcbiAgICBXSEVSRSBkLmRpc2Vhc2VfaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGlzZWFzZV9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSXNGYXZvcml0ZShcclxuICBtZWRpY2F0aW9uX2lkOiBzdHJpbmcsXHJcbiAgaXNGYXZvcml0ZTogYm9vbGVhblxyXG4pIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBVUERBVEUgICR7Y29yZVNjaGVtYX0ubWVkaWNhdGlvbnMgU0VUIGlzRmF2b3JpdGUgPSA/IFdIRVJFIG1lZGljYXRpb25faWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaXNGYXZvcml0ZSwgbWVkaWNhdGlvbl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUoXHJcbiAgZm9ybURhdGE6IFByZXNjcmlwdGlvbk1lZGljaW5lLFxyXG4gIG1lZGljaW5lX2lkOiBudW1iZXJcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5wcmVzY3JpcHRpb25fbWVkaWNpbmVcclxuICAgICAoXHJcbiAgICAgIGlkLFxyXG4gICAgICBtZWRpY2luZV9pZCxcclxuICAgICAgcHJlc2NyaWJlZF9kYXRlXHJcbiAgICApIFZBTFVFUyAoPywgPywgPylcclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2Zvcm1EYXRhLmlkLCBtZWRpY2luZV9pZCwgZm9ybURhdGEucHJlc2NyaWJlZF9kYXRlXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUFBLE9BQUEsQ0FBQUMsVUFBQSxHQUFBQSxVQUFBO0FBa0NBRCxPQUFBLENBQUFFLGlCQUFBLEdBQUFBLGlCQUFBO0FBYUFGLE9BQUEsQ0FBQUcsU0FBQSxHQUFBQSxTQUFBO0FBT0FILE9BQUEsQ0FBQUksV0FBQSxHQUFBQSxXQUFBO0FBc0RBSixPQUFBLENBQUFLLGNBQUEsR0FBQUEsY0FBQTtBQU9BTCxPQUFBLENBQUFNLGlCQUFBLEdBQUFBLGlCQUFBO0FBZ0JBTixPQUFBLENBQUFPLGlCQUFBLEdBQUFBLGlCQUFBO0FBV0FQLE9BQUEsQ0FBQVEsV0FBQSxHQUFBQSxXQUFBO0FBTUFSLE9BQUEsQ0FBQVMsYUFBQSxHQUFBQSxhQUFBO0FBUUFULE9BQUEsQ0FBQVUsc0JBQUEsR0FBQUEsc0JBQUE7QUFZQVYsT0FBQSxDQUFBVyxVQUFBLEdBQUFBLFVBQUE7QUFvQ0FYLE9BQUEsQ0FBQVksYUFBQSxHQUFBQSxhQUFBO0FBVUFaLE9BQUEsQ0FBQWEsYUFBQSxHQUFBQSxhQUFBO0FBbUNBYixPQUFBLENBQUFjLFdBQUEsR0FBQUEsV0FBQTtBQU9BZCxPQUFBLENBQUFlLFVBQUEsR0FBQUEsVUFBQTtBQU9BZixPQUFBLENBQUFnQix1QkFBQSxHQUFBQSx1QkFBQTtB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RUFDdEJQLFdBQVcsQ0FBQ1EsT0FBTyxFQUNuQlIsV0FBVyxDQUFDbkMsRUFBRTtLQUVqQixDQUNGO0lBQ0QsT0FBT3pCLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCMUIsV0FBV0EsQ0FBQTs7SUFDL0IsTUFBTTBCLE1BQU0sR0FBRyxNQUFNLElBQUFoQixPQUFBLENBQUFpQixLQUFLLEVBQWtCO29CQUMxQmpCLE9BQUEsQ0FBQWtCLFVBQVU7S0FDekIsQ0FBQztJQUNKLE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCekIsVUFBVUEsQ0FBQTs7SUFDOUIsTUFBTXlCLE1BQU0sR0FBRyxNQUFNLElBQUFoQixPQUFBLENBQUFpQixLQUFLLEVBQ3hCLGlCQUFpQmpCLE9BQUEsQ0FBQWtCLFVBQVUsV0FBVyxDQUN2QztJQUNELE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCeEIsdUJBQXVCQSxDQUFDNkYsVUFBa0I7O0lBQzlELE1BQU1yRSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QixpQkFBaUJqQixPQUFBLENBQUFrQixVQUFVO2tCQUNibEIsT0FBQSxDQUFBa0IsVUFBVTsyQkFDRCxFQUN2QjtNQUNFQyxNQUFNLEVBQUUsQ0FBQ2tFLFVBQVU7S0FDcEIsQ0FDRjtJQUNELE9BQU9yRSxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQnZCLGdCQUFnQkEsQ0FDcEM2RixhQUFxQixFQUNyQkMsVUFBbUI7O0lBRW5CLE1BQU12RSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QixXQUFXakIsT0FBQSxDQUFBa0IsVUFBVSx5REFBeUQsRUFDOUU7TUFDRUMsTUFBTSxFQUFFLENBQUNvRSxVQUFVLEVBQUVELGFBQWE7S0FDbkMsQ0FDRjtJQUNELE9BQU90RSxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQnRCLHVCQUF1QkEsQ0FDM0M4RixRQUE4QixFQUM5QkMsV0FBbUI7O0lBRW5CLE1BQU16RSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QjtrQkFDY2pCLE9BQUEsQ0FBQWtCLFVBQVU7Ozs7OztLQU12QixFQUNEO01BQ0VDLE1BQU0sRUFBRSxDQUFDcUUsUUFBUSxDQUFDL0MsRUFBRSxFQUFFZ0QsV0FBVyxFQUFFRCxRQUFRLENBQUNFLGVBQWU7S0FDNUQsQ0FDRjtJQUNELE9BQU8xRSxNQUFNO0VBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","createUser","getUserByGoogleId","getAdmins","getNavItems","getAppointment","updateAppointment","deleteAppointment","getPatients","patientDetail","checkPhoneNumberExists","addPatient","deletePatient","updatePatient","getMedicine","getDisease","getDiseaseSubcategories","updateIsFavorite","addPrescriptionMedicine","bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","schema_2","response_error_1","data","password","confirmPassword","fdPassword","validPassword","createSchema","validateSyncAt","saltRounds","hash","default","hashSync","newId","v4","result","query","coreSchema","values","firstName","lastName","userName","email","verify_code","Date","tokenVerify","googleId","user","length","userAdmin","getManu","menuMap","Map","iconMap","forEach","row","menuId","menu_id","has","set","id","icon","menu_name","name","path","menu_path","submenus","submenu_id","submenu","submenu_name","submenu_url","submenu_icon","_a","get","push","Array","from","e","console","log","ResponseError","InternalServer","getEventData","date","event_id","patients","mobile","patientSchema","hashedPassword","error","Unauthorized","first_name","last_name","phone","token_verify","patientData","patientName","gender","dateOfBirth","age","bloodPressure","injury","bloodGroup","address","disease_id","medication_id","isFavorite","formData","medicine_id","prescribed_date"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { createSchema } from \"../controller/user/schema\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { PrescriptionMedicine } from \"../models/prescription_medicine\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { patientSchema } from \"../controller/patients/schema\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\n\r\n// ****** Auth ******\r\n\r\nexport async function createUser(data: CreateUser) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = createSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.userName,\r\n        data.email,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getUserByGoogleId(googleId: string) {\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM${coreSchema}.users\r\n    WHERE google_id=?`,\r\n    {\r\n      values: [googleId],\r\n    }\r\n  );\r\n  if (user.length < 1) return null;\r\n  else return user[0] as User;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getNavItems() {\r\n  try {\r\n    const getManu = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\r\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\r\n      FROM ${coreSchema}.menu m\r\n      LEFT JOIN ${coreSchema}.submenu s ON m.id = s.menu_id\r\n    ORDER BY m.id, s.id`\r\n    );\r\n\r\n    const menuMap = new Map<number, Menu>();\r\n\r\n    const iconMap: { [key: string]: string } = {\r\n      \"Appointments\": \"appointment-icon\",\r\n      \"Dashboard\": \"dashboard-icon\",\r\n      \"Doctors\": \"doctor-icon\",\r\n      \"Services\": \"services-icon\",\r\n      \"Patients\": \"patient-icon\",\r\n      \"Prescriptions\": \"prescriptions-icon\",\r\n      \"Billing & Payments\": \"billing-icon\",\r\n      \"Reports & Analytics\": \"report-icon\",\r\n      \"Settings\": \"settings-icon\",\r\n      \"Staff Management\": \"staff-icon\",\r\n      \"Inventory\": \"inventory-icon\",\r\n    };\r\n    getManu.forEach((row) => {\r\n      const menuId = row.menu_id;\r\n      if (!menuMap.has(menuId)) {\r\n        menuMap.set(menuId, {\r\n          id: row.menu_id,\r\n          icon: iconMap[row.menu_name] || 'default-icon',\r\n          name: row.menu_name,\r\n          path: row.menu_path,\r\n          submenus: [],\r\n        });\r\n      }\r\n      if (row.submenu_id) {\r\n        const submenu: Submenu = {\r\n          id: row.submenu_id,\r\n          name: row.submenu_name,\r\n          path: row.submenu_url,\r\n          icon: row.submenu_icon,\r\n        };\r\n        menuMap.get(menuId)?.submenus.push(submenu);\r\n      }\r\n    });\r\n    return Array.from(menuMap.values());\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\")\r\n  }\r\n}\r\n\r\nexport async function getAppointment() {\r\n  const getEventData = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.appointments`\r\n  );\r\n  return getEventData;\r\n}\r\n\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n): Promise<IAppointment[] | undefined> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `UPDATE ${coreSchema}.appointments\r\n    SET date = ?, updated_at = ?\r\n    WHERE event_id = ?`,\r\n    {\r\n      values: [data.date, new Date(), data.event_id],\r\n    }\r\n  );\r\n  if (result) {\r\n    return result as IAppointment[];\r\n  }\r\n}\r\n\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n// ****** Patients ******\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT * FROM ${coreSchema}.patients\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(id: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [id] }\r\n  );\r\n  return result;\r\n}\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addPatient(data: PatientDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = patientSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.patient\r\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.first_name,\r\n        data.last_name,\r\n        data.phone,\r\n        data.email,\r\n        hashedPassword,\r\n        data.token_verify,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET patientName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.patientName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getMedicine() {\r\n  const result = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.medications\r\n    `);\r\n  return result;\r\n}\r\n\r\nexport async function getDisease() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getDiseaseSubcategories(disease_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases d \r\n      LEFT JOIN ${coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\r\n    WHERE d.disease_id = ?`,\r\n    {\r\n      values: [disease_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateIsFavorite(\r\n  medication_id: string,\r\n  isFavorite: boolean\r\n) {\r\n  const result = await query<RowDataPacket>(\r\n    `UPDATE  ${coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`,\r\n    {\r\n      values: [isFavorite, medication_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function addPrescriptionMedicine(\r\n  formData: PrescriptionMedicine,\r\n  medicine_id: number\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    INSERT INTO ${coreSchema}.prescription_medicine\r\n     (\r\n      id,\r\n      medicine_id,\r\n      prescribed_date\r\n    ) VALUES (?, ?, ?)\r\n    `,\r\n    {\r\n      values: [formData.id, medicine_id, formData.prescribed_date],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738836836397},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.query = exports.mysql = exports.pool = exports.coreSchema = void 0;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\nexports.query = query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJleHBvcnRzIiwiY29uZmlnIiwiY29yZVNjaGVtYSIsInByb2Nlc3MiLCJlbnYiLCJEQl9EQVRBQkFTRSIsInBvb2wiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInF1ZXJ5Iiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvYmluL215c3FsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgeyBSZXN1bHRTZXRIZWFkZXIsIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcbmltcG9ydCB7IFBvb2xDb25uZWN0aW9uIH0gZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IGNvcmVTY2hlbWEgPSBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRTtcblxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XG5cbmNvbnN0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUk5BTUUsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxuICBjb25uZWN0aW9uTGltaXQ6IDUwLFxuICBxdWV1ZUxpbWl0OiAwLFxuICBjaGFyc2V0OiBcInV0ZjhcIixcbiAgdGltZXpvbmU6IHByb2Nlc3MuZW52LkRCX1RJTUVaT05FLFxufSk7XG5cbnBvb2wub24oXCJjb25uZWN0aW9uXCIsIChjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbik6IHZvaWQgPT4ge1xuICBjb25uZWN0aW9uLmNvbmZpZy5uYW1lZFBsYWNlaG9sZGVycyA9IHRydWU7XG59KTtcblxuZXhwb3J0IHsgcG9vbCwgbXlzcWwgfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgZXh0ZW5kcyBSb3dEYXRhUGFja2V0W10gfCBSZXN1bHRTZXRIZWFkZXIgfCBhbnk+KFxuICBzcWw6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGNvbm5lY3Rpb24/OiBQb29sQ29ubmVjdGlvbjtcbiAgICBuZXN0VGFibGVzPzogYm9vbGVhbjtcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcbiAgfSA9IHt9LFxuICBhdHRlbXB0OiBudW1iZXIgPSAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdXNlRXh0ZXJuYWxDb25uZWN0aW9uID0gQm9vbGVhbihvcHRpb25zLmNvbm5lY3Rpb24pO1xuICBjb25zdCBjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbiA9XG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XG5cbiAgbGV0IHJlc3VsdDtcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xuXG4gIHRyeSB7XG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcbiAgICBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoe1xuICAgICAgc3FsLFxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcbiAgICAgIG5lc3RUYWJsZXM6IG9wdGlvbnMubmVzdFRhYmxlcyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gW107XG4gICAgfVxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBlLm1lc3NhZ2UgPSBgJHtlLmNvZGV9XFxuc3FsOiAke3NxbFF1ZXJ5fVxcbmVycm9yOiAke2UubWVzc2FnZX1cXG50aW1lOiB9YDtcblxuICAgIHRocm93IGU7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF1c2VFeHRlcm5hbENvbm5lY3Rpb24pIHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlRSxPQUFBLENBQUFELEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSyxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURMLE9BQUEsQ0FBQUUsVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR1AsS0FBSyxDQUFDUSxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU9uQixPQUFBLENBQUFNLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0JDLEtBQUtBLENBQUFDLEtBQUE7dURBQ3pCQyxHQUFXLEVBQ1hDLE9BQUEsR0FJSSxFQUFFLEVBQ05DLE9BQUEsR0FBa0IsQ0FBQztJQUVuQixNQUFNQyxxQkFBcUIsR0FBR0MsT0FBTyxDQUFDSCxPQUFPLENBQUNMLFVBQVUsQ0FBQztJQUN6RCxNQUFNQSxVQUFVLEdBQ2RLLE9BQU8sQ0FBQ0wsVUFBVSxLQUFLLE1BQU1mLElBQUksQ0FBQ3dCLGFBQWEsRUFBRSxDQUFDO0lBRXBELElBQUlDLE1BQU07SUFDVixJQUFJQyxRQUFRLEdBQUdQLEdBQUc7SUFFbEIsSUFBSTtNQUNGTyxRQUFRLEdBQUdYLFVBQVUsQ0FBQ1ksTUFBTSxDQUFDUixHQUFHLEVBQUVDLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDO01BQ2pELENBQUNILE1BQU0sQ0FBQyxHQUFHLE1BQU1WLFVBQVUsQ0FBQ0UsS0FBSyxDQUFDO1FBQ2hDRSxHQUFHO1FBQ0hTLE1BQU0sRUFBRVIsT0FBTyxDQUFDUSxNQUFNO1FBQ3RCQyxVQUFVLEVBQUVULE9BQU8sQ0FBQ1M7T0FDckIsQ0FBQztNQUNGLElBQUksQ0FBQ0osTUFBTSxFQUFFO1FBQ1hBLE1BQU0sR0FBRyxFQUFFO01BQ2I7SUFDRixDQUFDLENBQUMsT0FBT0ssQ0FBTSxFQUFFO01BQ2ZBLENBQUMsQ0FBQ0MsT0FBTyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsSUFBSSxVQUFVTixRQUFRLFlBQVlJLENBQUMsQ0FBQ0MsT0FBTyxXQUFXO01BRXZFLE1BQU1ELENBQUM7SUFDVCxDQUFDLFNBQVM7TUFDUixJQUFJLENBQUNSLHFCQUFxQixFQUFFO1FBQzFCUCxVQUFVLENBQUNrQixPQUFPLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE9BQU9SLE1BQVc7RUFDcEIsQ0FBQzs7QUFwQ0QvQixPQUFBLENBQUF1QixLQUFBLEdBQUFBLEtBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["dotenv","__importStar","require","mysql","exports","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","query","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\nimport * as mysql from \"mysql2/promise\";\nimport { PoolConnection } from \"mysql2/promise\";\n\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\n\nexport { ResultSetHeader, RowDataPacket, coreSchema };\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE,\n});\n\npool.on(\"connection\", (connection: PoolConnection): void => {\n  connection.config.namedPlaceholders = true;\n});\n\nexport { pool, mysql };\n\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\n  sql: string,\n  options: {\n    connection?: PoolConnection;\n    nestTables?: boolean;\n    values?: any[] | any;\n  } = {},\n  attempt: number = 0\n): Promise<T> {\n  const useExternalConnection = Boolean(options.connection);\n  const connection: PoolConnection =\n    options.connection || (await pool.getConnection());\n\n  let result;\n  let sqlQuery = sql;\n\n  try {\n    sqlQuery = connection.format(sql, options.values);\n    [result] = await connection.query({\n      sql,\n      values: options.values,\n      nestTables: options.nestTables,\n    });\n    if (!result) {\n      result = [];\n    }\n  } catch (e: any) {\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n\n    throw e;\n  } finally {\n    if (!useExternalConnection) {\n      connection.release();\n    }\n  }\n  return result as T;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeE,OAAA,CAAAD,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACK,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDL,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGP,KAAK,CAACQ,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOnB,OAAA,CAAAM,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsBC,KAAKA,CAAAC,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACL,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdK,OAAO,CAACL,UAAU,KAAK,MAAMf,IAAI,CAACwB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGX,UAAU,CAACY,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMV,UAAU,CAACE,KAAK,CAAC;QAChCE,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BP,UAAU,CAACkB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC;;AApCD/B,OAAA,CAAAuB,KAAA,GAAAA,KAAA","ignoreList":[]}},"mtime":1724414267123},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.latestTemplatesSchema = exports.userRolesSchema = exports.createPasswordSchema = exports.createSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.createSchema = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\nexports.userRolesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.latestTemplatesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlzdE5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwibmlja05hbWUiLCJnZW5kZXIiLCJiaXJ0aERheSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJ1c2VyUm9sZXNTY2hlbWEiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXNTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlzdE5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbGFzdE5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxhc3ROYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG5pY2tOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJuaWNrTmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBnZW5kZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImdlbmRlciBpcyByZXF1aXJlZFwiKSxcclxuICBiaXJ0aERheTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiYmlydGhEYXkgaXMgcmVxdWlyZWRcIiksXHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5lbWFpbChcImludmFsaWQgZW1haWxcIikucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBwaG9uZU51bWJlcjogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG5wYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4gIC5vYmplY3QoKVxyXG4gIC5zaGFwZSh7XHJcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuICB9KVxyXG4gIC5yZXF1aXJlZCgpO1xyXG5cclxuICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4gIC5vYmplY3QoKVxyXG4gIC5zaGFwZSh7XHJcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuICB9KVxyXG4gIC5yZXF1aXJlZCgpO1xyXG5cclxuICBleHBvcnQgIGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIC8vIGlkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VyIGlkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLnJlcXVpcmVkKFwidmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIilcclxuICAgIC5taW4oNCwgXCJ2ZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaHJcIilcclxuICAgIC5tYXgoNCwgXCJ2ZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaHJcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiks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","map":{"version":3,"names":["yup","__importStar","require","exports","createSchema","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","userRolesSchema","userId","latestTemplatesSchema","confirmEmailSchema","verify_code","max","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const createSchema = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\npassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\nexport const userRolesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const latestTemplatesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const confirmEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1730105124731},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncHandler = void 0;\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nexports.asyncHandler = express_async_handler_1.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL2FzeW5jLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJ1xuXG5leHBvcnQgY29uc3QgYXN5bmNIYW5kbGVyID0gZXhwcmVzc0FzeW5jSGFuZGxlclxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsdUJBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsWUFBWSxHQUFHSix1QkFBQSxDQUFBSyxPQUFtQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","exports","asyncHandler","default"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\n\nexport const asyncHandler = expressAsyncHandler\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,uBAAA,CAAAK,OAAmB","ignoreList":[]}},"mtime":1725613484049},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst sercvice_1 = require(\"./sercvice\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// ***** checkNickName\npublic_1.router.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.asyncHandler)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.UserService.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.router.get(\"/getUserInfo/:email\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = req.params.email;\n    const userData = yield sercvice_1.UserService.getUserInfo(data);\n    const buildResponse = app_response_1.BuildResponse.get(userData);\n    return res.json(buildResponse);\n  });\n});\n// ***** confirm\n// ***** getOTP\npublic_1.router.get(\"/user/getOTP/:email\", (0, async_handler_1.asyncHandler)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.router.put(`/user/updateProfile`, (0, async_handler_1.asyncHandler)(function updateProfileUser(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.updateProfileuser(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.router.get(\"/user/forgot-passsword/:email\", (0, async_handler_1.asyncHandler)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.UserService.sendFrogetPasswordToken(email);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.json(buildResponse);\n  });\n}));\npublic_1.router.post(`/user/change-password`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = req.body;\n  const getData = yield sercvice_1.UserService.changePassword(data);\n  const buildResponse = app_response_1.BuildResponse.get(getData);\n  res.json(buildResponse);\n})));\n// **** uploadImage\npublic_1.router.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsIm11bHRlcl8xIiwiX19pbXBvcnREZWZhdWx0Iiwic3RvcmFnZSIsImRlZmF1bHQiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWRJbWdQcm9maWxlIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwiY2hlY2tOaWNrTmFtZSIsInJlcyIsImZvcm1EYXRhIiwicGFyYW1zIiwibmlja25hbWUiLCJyZXN1bHQiLCJVc2VyU2VydmljZSIsImpzb24iLCJnZXRBbGxVc2VyRGF0YSIsImRhdGEiLCJlbWFpbCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldE9UUCIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwiZ2V0VmVyaWZ5Q29kZSIsInB1dCIsInVwZGF0ZVByb2ZpbGVVc2VyIiwiYm9keSIsInVwZGF0ZVByb2ZpbGV1c2VyIiwiZm9yZ2V0UHNzc3dvcmQiLCJzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbiIsInBvc3QiLCJfX2F3YWl0ZXIiLCJnZXREYXRhIiwiY2hhbmdlUGFzc3dvcmQiLCJzaW5nbGUiLCJzdGF0dXMiLCJlcnJvciIsIm1lc3NhZ2UiLCJpbWFnZVBhdGgiLCJwYXRoIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBVc2VyU2VydmljZSB9IGZyb20gXCIuL3NlcmN2aWNlXCI7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSBcIm11bHRlclwiO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBcInB1YmxpYy9pbWFnZXNcIik7XHJcbiAgfSxcclxuICBmaWxlbmFtZTogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNiKG51bGwsIGZpbGUub3JpZ2luYWxuYW1lKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZEltZ1Byb2ZpbGUgPSBtdWx0ZXIoeyBzdG9yYWdlIH0pO1xyXG5cclxuLy8gKioqKiogY2hlY2tOaWNrTmFtZVxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvY2hlY2tOaWNrTmFtZS86bmlja25hbWVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLnBhcmFtcy5uaWNrbmFtZTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEpO1xyXG4gICAgcmVzLmpzb24ocmVzdWx0KTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiBnZXRVc2VySW5mb1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldFVzZXJJbmZvLzplbWFpbFwiLFxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJEYXRhKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZGF0YSA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KHVzZXJEYXRhKTtcclxuICAgIHJldHVybiByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9XHJcbik7XHJcbi8vICoqKioqIGNvbmZpcm1cclxuXHJcbi8vICoqKioqIGdldE9UUFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZ2V0T1RQLzplbWFpbFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXRPVFAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCB2ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UuZ2V0VmVyaWZ5Q29kZShmb3JtRGF0YSwgdmVyaWZ5X2NvZGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KHJlc3VsdCk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiB1cGRhdGVQcm9maWxlXHJcbnJvdXRlci5wdXQoXHJcbiAgYC91c2VyL3VwZGF0ZVByb2ZpbGVgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS51cGRhdGVQcm9maWxldXNlcihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcclxuICAgIHJlcy5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqKiBmb3Jnb3QtcGFzc3N3b3JkXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZm9yZ290LXBhc3Nzd29yZC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZm9yZ2V0UHNzc3dvcmQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlclNlcnZpY2Uuc2VuZEZyb2dldFBhc3N3b3JkVG9rZW4oZW1haWwpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvdXNlci9jaGFuZ2UtcGFzc3dvcmRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBnZXREYXRhID0gYXdhaXQgVXNlclNlcnZpY2UuY2hhbmdlUGFzc3dvcmQoZGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZ2V0RGF0YSk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiB1cGxvYWRJbWFnZVxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hZG1pbi91cGxvYWRJbWFnZVwiLFxyXG4gIHVwbG9hZEltZ1Byb2ZpbGUuc2luZ2xlKFwiZmlsZVwiKSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIGlmICghcmVxLmZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkZpbGUgdXBsb2FkZWQgc2VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaW1hZ2VQYXRoID0gcmVxLmZpbGUucGF0aDtcclxuICAgIHJlcy5qc29uKHsgaW1hZ2VQYXRoIH0pO1xyXG4gIH1cclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssUUFBQSxHQUFBQyxlQUFBLENBQUFOLE9BQUE7QUFFQSxNQUFNTyxPQUFPLEdBQUdGLFFBQUEsQ0FBQUcsT0FBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsRUFBRUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUM3QkEsRUFBRSxDQUFDLElBQUksRUFBRSxlQUFlLENBQUM7RUFDM0IsQ0FB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RUFBRVUsR0FBUTs7SUFDM0QsTUFBTVMsS0FBSyxHQUFHbkIsR0FBRyxDQUFDWSxNQUFNLENBQUNPLEtBQUs7SUFDOUIsTUFBTUQsSUFBSSxHQUFHLE1BQU16QixVQUFBLENBQUFzQixXQUFXLENBQUNrQix1QkFBdUIsQ0FBQ2QsS0FBSyxDQUFDO0lBQzdELE1BQU1HLGFBQWEsR0FBRyxNQUFNL0IsY0FBQSxDQUFBZ0MsYUFBYSxDQUFDaEIsR0FBRyxDQUFDVyxJQUFJLENBQUM7SUFDbkRSLEdBQUcsQ0FBQ00sSUFBSSxDQUFDTSxhQUFhLENBQUM7RUFDekIsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEOUIsUUFBQSxDQUFBYyxNQUFNLENBQUM0QixJQUFJLENBQ1QsdUJBQXVCLEVBQ3ZCLElBQUE5QyxlQUFBLENBQUFvQixZQUFZLEVBQUMsQ0FBT1IsR0FBWSxFQUFFVSxHQUFhLEtBQUl5QixTQUFBO0VBQ2pELE1BQU1qQixJQUFJLEdBQUdsQixHQUFHLENBQUM4QixJQUFJO0VBQ3JCLE1BQU1NLE9BQU8sR0FBRyxNQUFNM0MsVUFBQSxDQUFBc0IsV0FBVyxDQUFDc0IsY0FBYyxDQUFDbkIsSUFBSSxDQUFDO0VBQ3RELE1BQU1JLGFBQWEsR0FBRy9CLGNBQUEsQ0FBQWdDLGFBQWEsQ0FBQ2hCLEdBQUcsQ0FBQzZCLE9BQU8sQ0FBQztFQUNoRDFCLEdBQUcsQ0FBQ00sSUFBSSxDQUFDTSxhQUFhLENBQUM7QUFDekIsQ0FBQyxFQUFDLENBQ0g7QUFFRDtBQUNBOUIsUUFBQSxDQUFBYyxNQUFNLENBQUM0QixJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCN0IsZ0JBQWdCLENBQUNpQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQy9CLENBQUN0QyxHQUFHLEVBQUVVLEdBQUcsS0FBSTtFQUNYLElBQUksQ0FBQ1YsR0FBRyxDQUFDQyxJQUFJLEVBQUU7SUFDYixPQUFPUyxHQUFHLENBQUM2QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN2QixJQUFJLENBQUM7TUFBRXdCLEtBQUssRUFBRTtJQUFrQixDQUFFLENBQUM7RUFDNUQ7RUFDQTlCLEdBQUcsQ0FBQ00sSUFBSSxDQUFDO0lBQ1B5QixPQUFPLEVBQUUsNEJBQTRCO0lBQ3JDdEMsUUFBUSxFQUFFSCxHQUFHLENBQUNDLElBQUksQ0FBQ0U7R0FDcEIsQ0FBQztFQUNGLE1BQU11QyxTQUFTLEdBQUcxQyxHQUFHLENBQUNDLElBQUksQ0FBQzBDLElBQUk7RUFDL0JqQyxHQUFHLENBQUNNLElBQUksQ0FBQztJQUFFMEI7RUFBUyxDQUFFLENBQUM7QUFDekIsQ0FBQyxDQUNGIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","common_1","app_response_1","public_1","sercvice_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","checkNickName","res","formData","params","nickname","result","UserService","json","getAllUserData","data","email","userData","getUserInfo","buildResponse","BuildResponse","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfileUser","body","updateProfileuser","forgetPsssword","sendFrogetPasswordToken","post","__awaiter","getData","changePassword","single","status","error","message","imagePath","path"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { UserService } from \"./sercvice\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// ***** checkNickName\r\nrouter.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nrouter.get(\r\n  \"/getUserInfo/:email\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    const data = req.params.email;\r\n    const userData = await UserService.getUserInfo(data);\r\n    const buildResponse = BuildResponse.get(userData);\r\n    return res.json(buildResponse);\r\n  }\r\n);\r\n// ***** confirm\r\n\r\n// ***** getOTP\r\nrouter.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n// ***** updateProfile\r\nrouter.put(\r\n  `/user/updateProfile`,\r\n  asyncHandler(async function updateProfileUser(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfileuser(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\nrouter.get(\r\n  \"/user/forgot-passsword/:email\",\r\n  asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n    const email = req.params.email;\r\n    const data = await UserService.sendFrogetPasswordToken(email);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/user/change-password`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const data = req.body;\r\n    const getData = await UserService.changePassword(data);\r\n    const buildResponse = BuildResponse.get(getData);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** uploadImage\r\nrouter.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738053170811},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/navItem\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbmF2LWl0ZW1zXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL25hdi1pdGVtcy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXN5bmNIYW5kbGVyfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCB7cm91dGVyfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IHsgTmF2SXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuXG5yb3V0ZXIuZ2V0KFxuICBcIi9uYXZJdGVtXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcyhyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTmF2SXRlbVNlcnZpY2UuZ2V0QWxsTmF2SXRlbXMoKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH0pXG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFNBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUVBQyxRQUFBLENBQUFHLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLFVBQVUsRUFDVixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLElBQUksR0FBRyxNQUFNUixTQUFBLENBQUFTLGNBQWMsQ0FBQ0MsY0FBYyxFQUFFO0lBQ2xELE1BQU1DLGFBQWEsR0FBR1YsY0FBQSxDQUFBVyxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0lBQzdDLElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNNLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7SUFDM0Q7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","public_1","service_1","app_response_1","router","get","asyncHandler","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\nimport {router} from \"../../routes/public\";\nimport { NavItemService } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\n\nrouter.get(\n  \"/navItem\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await NavItemService.getAllNavItems();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAEAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAS,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC3D;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1738828168392},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9uYXYtaXRlbXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXROYXZJdGVtcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuZXhwb3J0IGNsYXNzIE5hdkl0ZW1TZXJ2aWNlIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxOYXZJdGVtcygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TmF2SXRlbXMoKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsY0FBYztFQUNsQixPQUFhQyxjQUFjQSxDQUFBOztNQUNoQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFLLFdBQVcsR0FBRTtNQUNoQyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7OztBQVBIRyxPQUFBLENBQUFMLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\n\nexport class NavItemService {\n  public static async getAllNavItems() {\n    const data = await getNavItems();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,cAAc;EAClB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAPHG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1725626040905},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/insertAppointment\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield service_1.CalendarService.insertEvent(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.get(\"/getAppointment\", (0, async_handler_1.asyncHandler)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.CalendarService.getEventData();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.asyncHandler)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.CalendarService.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/updateAppointment/update\", (0, async_handler_1.asyncHandler)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.CalendarService.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJpbnNlcnRFdmVudCIsInJlcSIsInJlcyIsImV2ZW50RGF0YSIsImJvZHkiLCJkYXRhIiwiQ2FsZW5kYXJTZXJ2aWNlIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJqc29uIiwiZ2V0RXZlbnREYXRhIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJ1cGRhdGVkIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcbmltcG9ydCB7IENhbGVuZGFyU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcblxucm91dGVyLnBvc3QoXG4gIFwiL2luc2VydEFwcG9pbnRtZW50XCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBpbnNlcnRFdmVudChyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBldmVudERhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmluc2VydEV2ZW50KGV2ZW50RGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfVxuICB9KVxuKTtcblxucm91dGVyLmdldChcbiAgXCIvZ2V0QXBwb2ludG1lbnRcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldEV2ZW50RGF0YShyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmdldEV2ZW50RGF0YSgpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG5cbnJvdXRlci5kZWxldGUoXG4gIFwiL2RlbGV0ZUFwcG9pbnRtZW50L2RlbGV0ZS86aWRcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZCh7fSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcblxucm91dGVyLnB1dChcbiAgXCIvdXBkYXRlQXBwb2ludG1lbnQvdXBkYXRlXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVBcHBvaW50bWVudEl0ZW0oXG4gICAgcmVxOiBSZXF1ZXN0LFxuICAgIHJlczogUmVzcG9uc2VcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBDYWxlbmRhclNlcnZpY2UudXBkYXRlQXBwb2ludG1lbnRJdGVtKGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS51cGRhdGVkKGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsU0FBUyxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDMUIsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsZUFBZSxDQUFDTixXQUFXLENBQUNHLFNBQVMsQ0FBQztJQUN6RCxNQUFNSSxhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDQyxHQUFHLENBQUNKLElBQUksQ0FBQztJQUM3QyxJQUFJRSxhQUFhLEVBQUU7TUFDakIsT0FBT0wsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWixRQUFBLENBQUFFLE1BQU0sQ0FBQ1ksR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBakIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZWEsWUFBWUEsQ0FBQ1gsR0FBUSxFQUFFQyxHQUFROztJQUN6RCxNQUFNRyxJQUFJLEdBQUcsTUFBTVQsU0FBQSxDQUFBVSxlQUFlLENBQUNNLFlBQVksRUFBRTtJQUNqRCxNQUFNTCxhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDQyxHQUFHLENBQUNKLElBQUksQ0FBQztJQUM3QyxJQUFJRSxhQUFhLEVBQUU7TUFDakIsT0FBT0wsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWixRQUFBLENBQUFFLE1BQU0sQ0FBQ2dCLE1BQU0sQ0FDWCwrQkFBK0IsRUFDL0IsSUFBQXJCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVlLGlCQUFpQkEsQ0FDM0NiLEdBQVksRUFDWkMsR0FBYSxFQUNiYSxJQUFrQjs7SUFFbEIsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR2YsR0FBRyxDQUFDZ0IsTUFBTTtJQUN6QixNQUFNckIsU0FBQSxDQUFBVSxlQUFlLENBQUNZLHFCQUFxQixDQUFDRixFQUFFLENBQUM7SUFDL0MsTUFBTVQsYUFBYSxHQUFHYixjQUFBLENBQUFjLGFBQWEsQ0FBQ1csT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUMvQyxPQUFPakIsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzVDLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFosUUFBQSxDQUFBRSxNQUFNLENBQUN1QixHQUFHLENBQ1IsMkJBQTJCLEVBQzNCLElBQUE1QixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlc0IscUJBQXFCQSxDQUMvQ3BCLEdBQVksRUFDWkMsR0FBYTs7SUFFYixNQUFNb0IsUUFBUSxHQUFHckIsR0FBRyxDQUFDRyxJQUFJO0lBQ3pCLE1BQU1DLElBQUksR0FBRyxNQUFNVCxTQUFBLENBQUFVLGVBQWUsQ0FBQ2UscUJBQXFCLENBQUNDLFFBQVEsQ0FBQztJQUNsRSxNQUFNZixhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDZSxPQUFPLENBQUNsQixJQUFJLENBQUM7SUFDakQsT0FBT0gsR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzVDLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","CalendarService","buildResponse","BuildResponse","get","status","json","getEventData","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","updated"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { asyncHandler } from \"../../helper/async-handler\";\nimport { BuildResponse } from \"../../modules/response/app_response\";\nimport { router } from \"../../routes/public\";\nimport { CalendarService } from \"./service\";\n\nrouter.post(\n  \"/insertAppointment\",\n  asyncHandler(async function insertEvent(req: any, res: any) {\n    const eventData = req.body;\n    const data = await CalendarService.insertEvent(eventData);\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nrouter.get(\n  \"/getAppointment\",\n  asyncHandler(async function getEventData(req: any, res: any) {\n    const data = await CalendarService.getEventData();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nrouter.delete(\n  \"/deleteAppointment/delete/:id\",\n  asyncHandler(async function deleteAppointment(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { id } = req.params;\n    await CalendarService.deleteAppointmentItem(id);\n    const buildResponse = BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  })\n);\n\nrouter.put(\n  \"/updateAppointment/update\",\n  asyncHandler(async function updateAppointmentItem(\n    req: Request,\n    res: Response\n  ): Promise<any> {\n    const formData = req.body;\n    const data = await CalendarService.updateAppointmentItem(formData);\n    const buildResponse = BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACN,WAAW,CAACG,SAAS,CAAC;IACzD,MAAMI,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOL,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACY,GAAG,CACR,iBAAiB,EACjB,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAea,YAAYA,CAACX,GAAQ,EAAEC,GAAQ;;IACzD,MAAMG,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACM,YAAY,EAAE;IACjD,MAAML,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOL,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACgB,MAAM,CACX,+BAA+B,EAC/B,IAAArB,eAAA,CAAAO,YAAY,EAAC,SAAee,iBAAiBA,CAC3Cb,GAAY,EACZC,GAAa,EACba,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGf,GAAG,CAACgB,MAAM;IACzB,MAAMrB,SAAA,CAAAU,eAAe,CAACY,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMT,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACW,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOjB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACuB,GAAG,CACR,2BAA2B,EAC3B,IAAA5B,eAAA,CAAAO,YAAY,EAAC,SAAesB,qBAAqBA,CAC/CpB,GAAY,EACZC,GAAa;;IAEb,MAAMoB,QAAQ,GAAGrB,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACe,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMf,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACe,OAAO,CAAClB,IAAI,CAAC;IACjD,OAAOH,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1733538073719},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst db_2 = require(\"./db\");\nconst moment = require(\"moment\");\nclass CalendarService {\n  static insertEvent(eventData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const receivedStartDate = new Date(eventData.start_date);\n      const receivedEndDate = new Date(eventData.end_date);\n      const receivedAppointmentDate = new Date(eventData.appointmentDate);\n      const startLocalDate = moment(receivedStartDate).local().format(\"YYYY-MM-DD\");\n      const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n      const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n      const payload = {\n        appointmentDate: appointmentLocalDate,\n        start_date: startLocalDate,\n        end_date: endLocalDate,\n        campaignTime: eventData.campaignTime,\n        date: eventData.date,\n        id: eventData.id,\n        event_description: eventData.event_description,\n        event_title: eventData.event_title,\n        priority: eventData.priority\n      };\n      const data = yield (0, db_2.saveAppointment)(payload);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.CalendarService = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImRiXzIiLCJtb21lbnQiLCJDYWxlbmRhclNlcnZpY2UiLCJpbnNlcnRFdmVudCIsImV2ZW50RGF0YSIsInJlY2VpdmVkU3RhcnREYXRlIiwiRGF0ZSIsInN0YXJ0X2RhdGUiLCJyZWNlaXZlZEVuZERhdGUiLCJlbmRfZGF0ZSIsInJlY2VpdmVkQXBwb2ludG1lbnREYXRlIiwiYXBwb2ludG1lbnREYXRlIiwic3RhcnRMb2NhbERhdGUiLCJsb2NhbCIsImZvcm1hdCIsImVuZExvY2FsRGF0ZSIsImFwcG9pbnRtZW50TG9jYWxEYXRlIiwicGF5bG9hZCIsImNhbXBhaWduVGltZSIsImRhdGUiLCJpZCIsImV2ZW50X2Rlc2NyaXB0aW9uIiwiZXZlbnRfdGl0bGUiLCJwcmlvcml0eSIsImRhdGEiLCJzYXZlQXBwb2ludG1lbnQiLCJtZXNzYWdlIiwiZ2V0RXZlbnREYXRhIiwiZ2V0QXBwb2ludG1lbnQiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50SXRlbSIsImRhdGFBcHBpbnRtZW50IiwidXBkYXRlQXBwb2ludG1lbnQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBkZWxldGVBcHBvaW50bWVudCxcbiAgZ2V0QXBwb2ludG1lbnQsXG4gIHVwZGF0ZUFwcG9pbnRtZW50LFxufSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBzYXZlQXBwb2ludG1lbnQgfSBmcm9tIFwiLi9kYlwiO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcblxuZXhwb3J0IGNsYXNzIENhbGVuZGFyU2VydmljZSB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0RXZlbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcblxuICAgIGNvbnN0IHJlY2VpdmVkU3RhcnREYXRlID0gbmV3IERhdGUoZXZlbnREYXRhLnN0YXJ0X2RhdGUpO1xuICAgIGNvbnN0IHJlY2VpdmVkRW5kRGF0ZSA9IG5ldyBEYXRlKGV2ZW50RGF0YS5lbmRfZGF0ZSk7XG4gICAgY29uc3QgcmVjZWl2ZWRBcHBvaW50bWVudERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnREYXRlKTtcbiAgICBjb25zdCBzdGFydExvY2FsRGF0ZSA9IG1vbWVudChyZWNlaXZlZFN0YXJ0RGF0ZSlcbiAgICAgIC5sb2NhbCgpXG4gICAgICAuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICBjb25zdCBlbmRMb2NhbERhdGUgPSBtb21lbnQocmVjZWl2ZWRFbmREYXRlKS5sb2NhbCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgXG4gICAgY29uc3QgYXBwb2ludG1lbnRMb2NhbERhdGUgPSBtb21lbnQocmVjZWl2ZWRBcHBvaW50bWVudERhdGUpLmxvY2FsKCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblxuXG4gICAgY29uc3QgcGF5bG9hZDogYW55ID0ge1xuICAgICAgYXBwb2ludG1lbnREYXRlOiBhcHBvaW50bWVudExvY2FsRGF0ZSxcbiAgICAgIHN0YXJ0X2RhdGU6IHN0YXJ0TG9jYWxEYXRlLFxuICAgICAgZW5kX2RhdGU6IGVuZExvY2FsRGF0ZSxcbiAgICAgIGNhbXBhaWduVGltZTogZXZlbnREYXRhLmNhbXBhaWduVGltZSxcbiAgICAgIGRhdGU6IGV2ZW50RGF0YS5kYXRlLFxuICAgICAgaWQ6IGV2ZW50RGF0YS5pZCxcbiAgICAgIGV2ZW50X2Rlc2NyaXB0aW9uOiBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXG4gICAgICBldmVudF90aXRsZTogZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxuICAgICAgcHJpb3JpdHk6IGV2ZW50RGF0YS5wcmlvcml0eSxcbiAgICB9O1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHNhdmVBcHBvaW50bWVudChwYXlsb2FkKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RXZlbnREYXRhKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBcHBvaW50bWVudCgpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRlbGV0ZUFwcG9pbnRtZW50KGlkKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlQXBwb2ludG1lbnRJdGVtKGRhdGFBcHBpbnRtZW50OiBJQXBwb2ludG1lbnQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlQXBwb2ludG1lbnQoZGF0YUFwcGludG1lbnQpO1xuICAgIGRhdGE7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBTUEsTUFBQUMsSUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsUUFBUSxDQUFDO0FBRWhDLE1BQWFHLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQ0MsU0FBdUI7O01BRXJELE1BQU1DLGlCQUFpQixHQUFHLElBQUlDLElBQUksQ0FBQ0YsU0FBUyxDQUFDRyxVQUFVLENBQUM7TUFDeEQsTUFBTUMsZUFBZSxHQUFHLElBQUlGLElBQUksQ0FBQ0YsU0FBUyxDQUFDSyxRQUFRLENBQUM7TUFDcEQsTUFBTUMsdUJBQXVCLEdBQUcsSUFBSUosSUFBSSxDQUFDRixTQUFTLENBQUNPLGVBQWUsQ0FBQztNQUNuRSxNQUFNQyxjQUFjLEdBQUdYLE1BQU0sQ0FBQ0ksaUJBQWlCLENBQUMsQ0FDN0NRLEtBQUssRUFBRSxDQUNQQyxNQUFNLENBQUMsWUFBWSxDQUFDO01BQ3ZCLE1BQU1DLFlBQVksR0FBR2QsTUFBTSxDQUFDTyxlQUFlLENBQUMsQ0FBQ0ssS0FBSyxFQUFFLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFFekUsTUFBTUUsb0JBQW9CLEdBQUdmLE1BQU0sQ0FBQ1MsdUJBQXVCLENBQUMsQ0FBQ0csS0FBSyxFQUFFLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFHekYsTUFBTUcsT0FBTyxHQUFRO1FBQ25CTixlQUFlLEVBQUVLLG9CQUFvQjtRQUNyQ1QsVUFBVSxFQUFFSyxjQUFjO1FBQzFCSCxRQUFRLEVBQUVNLFlBQVk7UUFDdEJHLFlBQVksRUFBRWQsU0FBUyxDQUFDYyxZQUFZO1FBQ3BDQyxJQUFJLEVBQUVmLFNBQVMsQ0FBQ2UsSUFBSTtRQUNwQkMsRUFBRSxFQUFFaEIsU0FBUyxDQUFDZ0IsRUFBRTtRQUNoQkMsaUJBQWlCLEVBQUVqQixTQUFTLENBQUNpQixpQkFBaUI7UUFDOUNDLFdBQVcsRUFBRWxCLFNBQVMsQ0FBQ2tCLFdBQVc7UUFDbENDLFFBQVEsRUFBRW5CLFNBQVMsQ0FBQ21CO09BQ3JCO01BRUQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQXhCLElBQUEsQ0FBQXlCLGVBQWUsRUFBQ1IsT0FBTyxDQUFDO01BQzNDLElBQUlPLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRyxZQUFZQSxDQUFBOztNQUM5QixNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBMUIsSUFBQSxDQUFBOEIsY0FBYyxHQUFFO01BQ25DLElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxxQkFBcUJBLENBQUNULEVBQVU7O01BQ2xELE1BQU1JLElBQUksR0FBRyxNQUFNLElBQUExQixJQUFBLENBQUFnQyxpQkFBaUIsRUFBQ1YsRUFBRSxDQUFDO01BQ3hDLE9BQU9JLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFPLHFCQUFxQkEsQ0FBQ0MsY0FBNEI7O01BQ3BFLE1BQU1SLElBQUksR0FBRyxNQUFNLElBQUExQixJQUFBLENBQUFtQyxpQkFBaUIsRUFBQ0QsY0FBYyxDQUFDO01BQ3BEUixJQUFJO0lBQ04sQ0FBQzs7O0FBakRIVSxPQUFBLENBQUFoQyxlQUFBLEdBQUFBLGVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","db_2","moment","CalendarService","insertEvent","eventData","receivedStartDate","Date","start_date","receivedEndDate","end_date","receivedAppointmentDate","appointmentDate","startLocalDate","local","format","endLocalDate","appointmentLocalDate","payload","campaignTime","date","id","event_description","event_title","priority","data","saveAppointment","message","getEventData","getAppointment","deleteAppointmentItem","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\n  deleteAppointment,\n  getAppointment,\n  updateAppointment,\n} from \"../../bin/db\";\nimport { IAppointment } from \"../../types/appointment.interface\";\nimport { saveAppointment } from \"./db\";\nconst moment = require(\"moment\");\n\nexport class CalendarService {\n  public static async insertEvent(eventData: IAppointment) {\n\n    const receivedStartDate = new Date(eventData.start_date);\n    const receivedEndDate = new Date(eventData.end_date);\n    const receivedAppointmentDate = new Date(eventData.appointmentDate);\n    const startLocalDate = moment(receivedStartDate)\n      .local()\n      .format(\"YYYY-MM-DD\");\n    const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n    \n    const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n\n\n    const payload: any = {\n      appointmentDate: appointmentLocalDate,\n      start_date: startLocalDate,\n      end_date: endLocalDate,\n      campaignTime: eventData.campaignTime,\n      date: eventData.date,\n      id: eventData.id,\n      event_description: eventData.event_description,\n      event_title: eventData.event_title,\n      priority: eventData.priority,\n    };\n\n    const data = await saveAppointment(payload);\n    if (data) {\n      return { message: \"ok\", data };\n    } else {\n      return null;\n    }\n  }\n\n  public static async getEventData() {\n    const data = await getAppointment();\n    if (data) {\n      return { message: \"ok\", data };\n    }\n  }\n\n  public static async deleteAppointmentItem(id: string) {\n    const data = await deleteAppointment(id);\n    return data;\n  }\n\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\n    const data = await updateAppointment(dataAppintment);\n    data;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAMA,MAAAC,IAAA,GAAAD,OAAA;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAaG,eAAe;EACnB,OAAaC,WAAWA,CAACC,SAAuB;;MAErD,MAAMC,iBAAiB,GAAG,IAAIC,IAAI,CAACF,SAAS,CAACG,UAAU,CAAC;MACxD,MAAMC,eAAe,GAAG,IAAIF,IAAI,CAACF,SAAS,CAACK,QAAQ,CAAC;MACpD,MAAMC,uBAAuB,GAAG,IAAIJ,IAAI,CAACF,SAAS,CAACO,eAAe,CAAC;MACnE,MAAMC,cAAc,GAAGX,MAAM,CAACI,iBAAiB,CAAC,CAC7CQ,KAAK,EAAE,CACPC,MAAM,CAAC,YAAY,CAAC;MACvB,MAAMC,YAAY,GAAGd,MAAM,CAACO,eAAe,CAAC,CAACK,KAAK,EAAE,CAACC,MAAM,CAAC,YAAY,CAAC;MAEzE,MAAME,oBAAoB,GAAGf,MAAM,CAACS,uBAAuB,CAAC,CAACG,KAAK,EAAE,CAACC,MAAM,CAAC,YAAY,CAAC;MAGzF,MAAMG,OAAO,GAAQ;QACnBN,eAAe,EAAEK,oBAAoB;QACrCT,UAAU,EAAEK,cAAc;QAC1BH,QAAQ,EAAEM,YAAY;QACtBG,YAAY,EAAEd,SAAS,CAACc,YAAY;QACpCC,IAAI,EAAEf,SAAS,CAACe,IAAI;QACpBC,EAAE,EAAEhB,SAAS,CAACgB,EAAE;QAChBC,iBAAiB,EAAEjB,SAAS,CAACiB,iBAAiB;QAC9CC,WAAW,EAAElB,SAAS,CAACkB,WAAW;QAClCC,QAAQ,EAAEnB,SAAS,CAACmB;OACrB;MAED,MAAMC,IAAI,GAAG,MAAM,IAAAxB,IAAA,CAAAyB,eAAe,EAACR,OAAO,CAAC;MAC3C,IAAIO,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaG,YAAYA,CAAA;;MAC9B,MAAMH,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAA8B,cAAc,GAAE;MACnC,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaK,qBAAqBA,CAACT,EAAU;;MAClD,MAAMI,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAAgC,iBAAiB,EAACV,EAAE,CAAC;MACxC,OAAOI,IAAI;IACb,CAAC;;EAEM,OAAaO,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMR,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAAmC,iBAAiB,EAACD,cAAc,CAAC;MACpDR,IAAI;IACN,CAAC;;;AAjDHU,OAAA,CAAAhC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1738463217893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsImdldCIsInVzZXJBZG1pbiIsInJlcSIsInJlcyIsImRhdGEiLCJVc2VyQWRtaW4iLCJnZXRVc2VyQWRtaW4iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYWRtaW4vY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBVc2VyQWRtaW4gfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5cblxucm91dGVyLmdldChcbiAgYC9nZXRVc2VyQWRtaW5gLFxuICBhc3luYyBmdW5jdGlvbiB1c2VyQWRtaW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJBZG1pbi5nZXRVc2VyQWRtaW4oKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH1cbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBR0FFLFFBQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZUFBZSxFQUNmLFNBQWVDLFNBQVNBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsU0FBUyxDQUFDQyxZQUFZLEVBQUU7SUFDM0MsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0NELEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUNwRCxDQUFDO0NBQUEsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["service_1","require","app_response_1","public_1","router","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport { UserAdmin } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\nimport {router} from \"../../routes/public\";\n\n\nrouter.get(\n  `/getUserAdmin`,\n  async function userAdmin(req: Request, res: Response) {\n    const data = await UserAdmin.getUserAdmin();\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGAE,QAAA,CAAAC,MAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1725612317455},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFkbWlucyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuY2xhc3MgVXNlckFkbWluIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VyQWRtaW4oKSB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCBnZXRBZG1pbnMoKTtcbiAgICBpZiAoYWRtaW4pIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgYWRtaW4gfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IFVzZXJBZG1pbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\n\nclass UserAdmin {\n  public static async getUserAdmin() {\n    const admin = await getAdmins();\n    if (admin) {\n      return { message: \"ok\", admin };\n    } else {\n      return null;\n    }\n  }\n}\n\nexport { UserAdmin };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.router.get(\"/admin/patients\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.PatientService.getPatients();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.PatientService.checkExistMobile(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\npublic_1.router.post(`/admin/add-patient`, (0, async_handler_1.asyncHandler)(function addPatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.registerPatient(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** GetPatientDetial\npublic_1.router.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.PatientService.patientDetial(patientId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n  return;\n})));\n// **** uploadImage\n// routes.post(\n//   \"/admin/uploadImage\",\n//   uploadImgProfile.single(\"file\"),\n//   (req, res) => {\n//     if (!req.file) {\n//       return res.status(400).json({ error: \"No file uploaded\" });\n//     }\n//     res.json({\n//       message: \"File uploaded seccessfully\",\n//       filename: req.file.filename,\n//     });\n//     const imagePath = req.file.path;\n//     res.json({ imagePath });\n//   }\n// );\n// **** updatePatient\npublic_1.router.put(\"/admin/updatePatient\", (0, async_handler_1.asyncHandler)(function updatePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.updatePatient(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** deletePatient\npublic_1.router.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.asyncHandler)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.PatientService.deletePatient(idPateint);\n    const buildResponse = app_response_1.BuildResponse.deleted(idPateint);\n    return res.status(200).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJfX2F3YWl0ZXIiLCJtb2JpbGUiLCJwYXJhbXMiLCJjaGVja0V4aXN0TW9iaWxlIiwicG9zdCIsImFkZFBhdGllbnQiLCJmb3JtRGF0YSIsImJvZHkiLCJyZWdpc3RlclBhdGllbnQiLCJwYXRpZW50SWQiLCJwYXRpZW50RGV0aWFsIiwicHV0IiwidXBkYXRlUGF0aWVudCIsInVwZGF0ZWQiLCJkZWxldGUiLCJkZWxldGVQYXRpZW50IiwiaWRQYXRlaW50IiwiZGVsZXRlZCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQge1BhdGllbnRTZXJ2aWNlfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgXCJwdWJsaWMvaW1hZ2VzXCIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBmaWxlLm9yaWdpbmFsbmFtZSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWRJbWdQcm9maWxlID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuXHJcbi8vICoqKiogR2V0QWxsXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvYWRtaW4vcGF0aWVudHNcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuZ2V0UGF0aWVudHMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBjaGVja1Bob25lTnVtYmVyRXhpc3RzXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvYWRtaW4vY2hlY2stcGhvbmUvOnBob25lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlID0gcmVxLnBhcmFtcy5tb2JpbGU7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuY2hlY2tFeGlzdE1vYmlsZShtb2JpbGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogYWRkLXBhdGllbnRcclxucm91dGVyLnBvc3QoXHJcbiAgYC9hZG1pbi9hZGQtcGF0aWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGFkZFBhdGllbnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogR2V0UGF0aWVudERldGlhbFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvYWRtaW4vcGF0aWVudC1kZXRpYWwvOnBhdGllbnRJZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgcGF0aWVudElkID0gK3JlcS5wYXJhbXMucGF0aWVudElkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnBhdGllbnREZXRpYWwocGF0aWVudElkKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybjtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIHVwbG9hZEltYWdlXHJcbi8vIHJvdXRlcy5wb3N0KFxyXG4vLyAgIFwiL2FkbWluL3VwbG9hZEltYWdlXCIsXHJcbi8vICAgdXBsb2FkSW1nUHJvZmlsZS5zaW5nbGUoXCJmaWxlXCIpLFxyXG4vLyAgIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgICAgaWYgKCFyZXEuZmlsZSkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJObyBmaWxlIHVwbG9hZGVkXCIgfSk7XHJcbi8vICAgICB9XHJcbi8vICAgICByZXMuanNvbih7XHJcbi8vICAgICAgIG1lc3NhZ2U6IFwiRmlsZSB1cGxvYWRlZCBzZWNjZXNzZnVsbHlcIixcclxuLy8gICAgICAgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lLFxyXG4vLyAgICAgfSk7XHJcbi8vICAgICBjb25zdCBpbWFnZVBhdGggPSByZXEuZmlsZS5wYXRoO1xyXG4vLyAgICAgcmVzLmpzb24oeyBpbWFnZVBhdGggfSk7XHJcbi8vICAgfVxyXG4vLyApO1xyXG4vLyAqKioqIHVwZGF0ZVBhdGllbnRcclxucm91dGVyLnB1dChcclxuICBcIi9hZG1pbi91cGRhdGVQYXRpZW50XCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIGRlbGV0ZVBhdGllbnRcclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9hZG1pbi9kZWxldGVQYXRpZW50LzppZFBhdGVpbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaWRQYXRlaW50ID0gK3JlcS5wYXJhbXMuaWRQYXRlaW50O1xyXG4gICAgYXdhaXQgUGF0aWVudFNlcnZpY2UuZGVsZXRlUGF0aWVudChpZFBhdGVpbnQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZChpZFBhdGVpbnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUVBLE1BQUFFLFVBQUEs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","map":{"version":3,"names":["async_handler_1","require","public_1","services_1","app_response_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","getNavItems","res","data","PatientService","getPatients","buildResponse","BuildResponse","status","json","__awaiter","mobile","params","checkExistMobile","post","addPatient","formData","body","registerPatient","patientId","patientDetial","put","updatePatient","updated","delete","deletePatient","idPateint","deleted"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\r\nimport {router} from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport {PatientService} from \"./services\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/admin/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }else{\r\n      return false\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\nrouter.post(\r\n  `/admin/add-patient`,\r\n  asyncHandler(async function addPatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.registerPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\n// **** GetPatientDetial\r\nrouter.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return;\r\n  })\r\n);\r\n// **** uploadImage\r\n// routes.post(\r\n//   \"/admin/uploadImage\",\r\n//   uploadImgProfile.single(\"file\"),\r\n//   (req, res) => {\r\n//     if (!req.file) {\r\n//       return res.status(400).json({ error: \"No file uploaded\" });\r\n//     }\r\n//     res.json({\r\n//       message: \"File uploaded seccessfully\",\r\n//       filename: req.file.filename,\r\n//     });\r\n//     const imagePath = req.file.path;\r\n//     res.json({ imagePath });\r\n//   }\r\n// );\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async function updatePatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n// **** deletePatient\r\nrouter.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(200).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1737460838705},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PatientService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addPatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PatientService = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJkYXRhIiwibWVzc2FnZSIsInBhdGllbnREZXRpYWwiLCJpZCIsInBhdGllbnREZXRhaWwiLCJjaGVja0V4aXN0TW9iaWxlIiwibW9iaWxlIiwiY2hlY2tQaG9uZU51bWJlckV4aXN0cyIsInJlZ2lzdGVyUGF0aWVudCIsImZvcm1EYXRhIiwiYWRkUGF0aWVudCIsInVwZGF0ZVBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL3NlcnZpY2VzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgYWRkUGF0aWVudCxcclxuICBjaGVja1Bob25lTnVtYmVyRXhpc3RzLFxyXG4gIGRlbGV0ZVBhdGllbnQsXHJcbiAgZ2V0UGF0aWVudHMsXHJcbiAgcGF0aWVudERldGFpbCxcclxuICB1cGRhdGVQYXRpZW50LFxyXG59IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuZXhwb3J0IGNsYXNzIFBhdGllbnRTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFBhdGllbnRzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFBhdGllbnRzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcGF0aWVudERldGlhbChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcGF0aWVudERldGFpbChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja0V4aXN0TW9iaWxlKG1vYmlsZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZFBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlUGF0aWVudChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlUGF0aWVudChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFTQSxNQUFhQyxjQUFjO0VBQ2xCLE9BQWFDLFdBQVdBLENBQUE7O01BQzdCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsV0FBVyxHQUFFO01BQ2hDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDO01BQ0EsT0FBTyxJQUFJO0lBQ2IsQ0FBQzs7RUFFTSxPQUFhRSxhQUFhQSxDQUFDQyxFQUFVOztNQUMxQyxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFRLGFBQWEsRUFBQ0QsRUFBRSxDQUFDO01BQ3BDLElBQUlILElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxnQkFBZ0JBLENBQUNDLE1BQWM7O01BQ2pELE1BQU1OLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVcsc0JBQXNCLEVBQUNELE1BQU0sQ0FBQztNQUNqRCxJQUFJTixJQUFJLEVBQUU7UUFDUixPQUFPLElBQUk7TUFDYixDQUFDLE1BQU07UUFDTCxPQUFPLEtBQUs7TUFDZDtJQUNGLENBQUM7O0VBRU0sT0FBYVEsZUFBZUEsQ0FBQ0MsUUFBb0I7O01BQ3RELE1BQU1ULElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQWMsVUFBVSxFQUFDRCxRQUFRLENBQUM7TUFDdkMsSUFBSVQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUVNLE9BQWFXLGFBQWFBLENBQUNGLFFBQW9COztNQUNwRCxNQUFNVCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFlLGFBQWEsRUFBQ0YsUUFBUSxDQUFDO01BQzFDLElBQUlULElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhWSxhQUFhQSxDQUFDVCxFQUFVOztNQUMxQyxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFnQixhQUFhLEVBQUNULEVBQUUsQ0FBQztNQUNwQyxJQUFJSCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQXBESGEsT0FBQSxDQUFBZixjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","PatientService","getPatients","data","message","patientDetial","id","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","addPatient","updatePatient","deletePatient","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\nexport class PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(id: number) {\r\n    const data = await patientDetail(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static async registerPatient(formData: PatientDTO) {\r\n    const data = await addPatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AASA,MAAaC,cAAc;EAClB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,aAAaA,CAACC,EAAU;;MAC1C,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,aAAa,EAACD,EAAE,CAAC;MACpC,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaK,gBAAgBA,CAACC,MAAc;;MACjD,MAAMN,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAW,sBAAsB,EAACD,MAAM,CAAC;MACjD,IAAIN,IAAI,EAAE;QACR,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF,CAAC;;EAEM,OAAaQ,eAAeA,CAACC,QAAoB;;MACtD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAc,UAAU,EAACD,QAAQ,CAAC;MACvC,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaW,aAAaA,CAACF,QAAoB;;MACpD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAe,aAAa,EAACF,QAAQ,CAAC;MAC1C,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaY,aAAaA,CAACT,EAAU;;MAC1C,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAgB,aAAa,EAACT,EAAE,CAAC;MACpC,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AApDHa,OAAA,CAAAf,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1738462176475},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\n// router.get(\n//   \"/admin/doctors\",\n//   asyncHandler(async (req: any, res: any) => {\n//     const data = await DoctorsService.getDoctors();\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//   })\n// );\npublic_1.router.get(\"/getMostPopularDoctor\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getMostPopularDoctors();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield service_1.DoctorsService.checkDoctorPhoneNumberExists(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\npublic_1.router.post(`/admin/add-doctor`, (0, async_handler_1.asyncHandler)(function addDocror(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.DoctorsService.registerDoctor(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\npublic_1.router.get(`/admin/doctor-detial/:doctorId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctorId = +req.params.doctorId;\n  const data = yield service_1.DoctorsService.doctorDetial(doctorId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.put(\"/admin/updateDoctor\", (0, async_handler_1.asyncHandler)(function updateDocror(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.DoctorsService.updateDoctor(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\npublic_1.router.post(`/admin/countDoctorClick`, (0, async_handler_1.asyncHandler)((req, res) => {\n  const id = req.body.id;\n  const data = service_1.DoctorsService.logDoctorClick(id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n}));\npublic_1.router.post(`/admin/toggleLike`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const likes = req.body;\n  const data = yield service_1.DoctorsService.toggleLike(likes);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.post(`/admin/addComment`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const comment = req.body.comment;\n  const data = yield service_1.DoctorsService.addComment(comment);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(`/admin/getSpecialties`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getSpecialties();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(`/admin/filterSpecialtyById/:id`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const queryParams = +req.params.id;\n  const data = yield service_1.DoctorsService.filterSpecialtyById(queryParams);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(`/admin/filterServicesById/:id`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const queryParams = +req.params.id;\n  const data = yield service_1.DoctorsService.filterServicesById(queryParams);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.post(`/admin/insertReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const dataReviews = req.body;\n  const data = yield service_1.DoctorsService.insertReviews(dataReviews);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(`/getReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getReviews();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:id/schedule-availability\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const id = +req.params.id;\n  const consultationType = req.query.consultationType;\n  const data = yield service_1.DoctorsService.doctorScheduleAvailability(id, consultationType);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:scheduleID/schedule-time-availability\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const scheduleID = +req.params.scheduleID;\n  const data = yield service_1.DoctorsService.doctorScheduleTimeAvailability(scheduleID);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\npublic_1.router.put(\"/doctors/:timeID/booked\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const timeID = +req.params.timeID;\n  const result = yield service_1.DoctorsService.booked(timeID);\n  const buildResponse = app_response_1.BuildResponse.updated(result);\n  res.status(200).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJEb2N0b3JzU2VydmljZSIsImdldE1vc3RQb3B1bGFyRG9jdG9ycyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsIm1vYmlsZSIsInBhcmFtcyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJwb3N0IiwiYWRkRG9jcm9yIiwiZm9ybURhdGEiLCJib2R5IiwicmVnaXN0ZXJEb2N0b3IiLCJkb2N0b3JJZCIsImRvY3RvckRldGlhbCIsInB1dCIsInVwZGF0ZURvY3JvciIsInVwZGF0ZURvY3RvciIsInVwZGF0ZWQiLCJpZCIsImxvZ0RvY3RvckNsaWNrIiwibGlrZXMiLCJ0b2dnbGVMaWtlIiwiY29tbWVudCIsImFkZENvbW1lbnQiLCJnZXRTcGVjaWFsdGllcyIsInF1ZXJ5UGFyYW1zIiwiZmlsdGVyU3BlY2lhbHR5QnlJZCIsImZpbHRlclNlcnZpY2VzQnlJZCIsImRhdGFSZXZpZXdzIiwiaW5zZXJ0UmV2aWV3cyIsImdldFJldmlld3MiLCJjb25zdWx0YXRpb25UeXBlIiwicXVlcnkiLCJkb2N0b3JTY2hlZHVsZUF2YWlsYWJpbGl0eSIsInNjaGVkdWxlSUQiLCJkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkiLCJ0aW1lSUQiLCJyZXN1bHQiLCJib29rZWQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEb2N0b3JzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9hZG1pbi9kb2N0b3JzXCIsXHJcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXREb2N0b3JzKCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfSlcclxuLy8gKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0TW9zdFBvcHVsYXJEb2N0b3JcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldE1vc3RQb3B1bGFyRG9jdG9ycygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2FkbWluL2NoZWNrLXBob25lLzpwaG9uZVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZSA9IHJlcS5wYXJhbXMubW9iaWxlO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMobW9iaWxlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiBidWlsZFJlc3BvbnNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZC1kb2N0b3JgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGREb2Nyb3IocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLnJlZ2lzdGVyRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2FkbWluL2RvY3Rvci1kZXRpYWwvOmRvY3RvcklkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkb2N0b3JJZCA9ICtyZXEucGFyYW1zLmRvY3RvcklkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmRvY3RvckRldGlhbChkb2N0b3JJZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9hZG1pbi91cGRhdGVEb2N0b3JcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlRG9jcm9yKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS51cGRhdGVEb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgYC9hZG1pbi9jb3VudERvY3RvckNsaWNrYCxcclxuICBhc3luY0hhbmRsZXIoKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSByZXEuYm9keS5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBEb2N0b3JzU2VydmljZS5sb2dEb2N0b3JDbGljayhpZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL3RvZ2dsZUxpa2VgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBsaWtlcyA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLnRvZ2dsZUxpa2UobGlrZXMpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vYWRkQ29tbWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmFkZENvbW1lbnQoY29tbWVudCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2FkbWluL2dldFNwZWNpYWx0aWVzYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0U3BlY2lhbHRpZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9maWx0ZXJTcGVjaWFsdHlCeUlkLzppZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5maWx0ZXJTcGVjaWFsdHlCeUlkKHF1ZXJ5UGFyYW1zKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9maWx0ZXJTZXJ2aWNlc0J5SWQvOmlkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9ICtyZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmZpbHRlclNlcnZpY2VzQnlJZChxdWVyeVBhcmFtcyk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2luc2VydFJldmlld3NgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGRhdGFSZXZpZXdzID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuaW5zZXJ0UmV2aWV3cyhkYXRhUmV2aWV3cyk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvZ2V0UmV2aWV3c2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFJldmlld3MoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5cclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZG9jdG9ycy86aWQvc2NoZWR1bGUtYXZhaWxhYmlsaXR5XCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgaWQgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGNvbnN1bHRhdGlvblR5cGUgPSByZXEucXVlcnkuY29uc3VsdGF0aW9uVHlwZTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5kb2N0b3JTY2hlZHVsZUF2YWlsYWJpbGl0eShcclxuICAgICAgaWQsXHJcbiAgICAgIGNvbnN1bHRhdGlvblR5cGVcclxuICAgICk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2RvY3RvcnMvOnNjaGVkdWxlSUQvc2NoZWR1bGUtdGltZS1hdmFpbGFiaWxpdHlcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBzY2hlZHVsZUlEID0gK3JlcS5wYXJhbXMuc2NoZWR1bGVJRDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5kb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkoXHJcbiAgICAgIHNjaGVkdWxlSURcclxuICAgICk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9kb2N0b3JzLzp0aW1lSUQvYm9va2VkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IHRpbWVJRCA9ICtyZXEucGFyYW1zLnRpbWVJRDtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmJvb2tlZCh0aW1lSUQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChyZXN1bHQpO1xyXG4gICAgcmVzLnN0YXR1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TUFBTSxDQUFDYSxFQUFFO0VBQ3pCLE1BQU1hLGdCQUFnQixHQUFHckMsR0FBRyxDQUFDc0MsS0FBSyxDQUFDRCxnQkFBZ0I7RUFDbkQsTUFBTWxDLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGNBQWMsQ0FBQ21DLDBCQUEwQixDQUMxRGYsRUFBRSxFQUNGYSxnQkFBZ0IsQ0FDakI7RUFDRCxNQUFNL0IsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0NGLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztBQUNyQyxDQUFDLEVBQUMsQ0FDSDtBQUNEWCxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGlEQUFpRCxFQUNqRCxJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFZLEVBQUVDLEdBQWEsS0FBa0JDLFNBQUE7RUFDL0QsTUFBTXNDLFVBQVUsR0FBRyxDQUFDeEMsR0FBRyxDQUFDVyxNQUFNLENBQUM2QixVQUFVO0VBQ3pDLE1BQU1yQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxjQUFjLENBQUNxQyw4QkFBOEIsQ0FDOURELFVBQVUsQ0FDWDtFQUNELE1BQU1sQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3Q0YsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0FBQ3JDLENBQUMsRUFBQyxDQUNIO0FBRURYLFFBQUEsQ0FBQUUsTUFBTSxDQUFDdUIsR0FBRyxDQUNSLHlCQUF5QixFQUN6QixJQUFBNUIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBWSxFQUFFQyxHQUFhLEtBQW1CQyxTQUFBO0VBQ2hFLE1BQU13QyxNQUFNLEdBQUcsQ0FBQzFDLEdBQUcsQ0FBQ1csTUFBTSxDQUFDK0IsTUFBTTtFQUNqQyxNQUFNQyxNQUFNLEdBQUcsTUFBTS9DLFNBQUEsQ0FBQVEsY0FBYyxDQUFDd0MsTUFBTSxDQUFDRixNQUFNLENBQUM7RUFDbEQsTUFBTXBDLGFBQWEsR0FBR1osY0FBQSxDQUFBYSxhQUFhLENBQUNnQixPQUFPLENBQUNvQixNQUFNLENBQUM7RUFDbkQxQyxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7QUFDckMsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","DoctorsService","getMostPopularDoctors","buildResponse","BuildResponse","status","json","mobile","params","checkDoctorPhoneNumberExists","post","addDocror","formData","body","registerDoctor","doctorId","doctorDetial","put","updateDocror","updateDoctor","updated","id","logDoctorClick","likes","toggleLike","comment","addComment","getSpecialties","queryParams","filterSpecialtyById","filterServicesById","dataReviews","insertReviews","getReviews","consultationType","query","doctorScheduleAvailability","scheduleID","doctorScheduleTimeAvailability","timeID","result","booked"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DoctorsService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\n// router.get(\r\n//   \"/admin/doctors\",\r\n//   asyncHandler(async (req: any, res: any) => {\r\n//     const data = await DoctorsService.getDoctors();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//   })\r\n// );\r\n\r\nrouter.get(\r\n  \"/getMostPopularDoctor\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DoctorsService.getMostPopularDoctors();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await DoctorsService.checkDoctorPhoneNumberExists(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/add-doctor`,\r\n  asyncHandler(async function addDocror(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.registerDoctor(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/doctor-detial/:doctorId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctorId = +req.params.doctorId;\r\n    const data = await DoctorsService.doctorDetial(doctorId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/admin/updateDoctor\",\r\n  asyncHandler(async function updateDocror(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.updateDoctor(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/countDoctorClick`,\r\n  asyncHandler((req: Request, res: Response) => {\r\n    const id = req.body.id;\r\n    const data = DoctorsService.logDoctorClick(id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  `/admin/toggleLike`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const likes = req.body;\r\n    const data = await DoctorsService.toggleLike(likes);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/addComment`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const comment = req.body.comment;\r\n    const data = await DoctorsService.addComment(comment);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/getSpecialties`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getSpecialties();\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/admin/filterSpecialtyById/:id`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const queryParams = +req.params.id;\r\n    const data = await DoctorsService.filterSpecialtyById(queryParams);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/admin/filterServicesById/:id`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const queryParams = +req.params.id;\r\n    const data = await DoctorsService.filterServicesById(queryParams);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  `/admin/insertReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const dataReviews = req.body;\r\n    const data = await DoctorsService.insertReviews(dataReviews);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/getReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getReviews();\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\n\r\n\r\nrouter.get(\r\n  \"/doctors/:id/schedule-availability\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const id = +req.params.id;\r\n    const consultationType = req.query.consultationType;\r\n    const data = await DoctorsService.doctorScheduleAvailability(\r\n      id,\r\n      consultationType\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  \"/doctors/:scheduleID/schedule-time-availability\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const scheduleID = +req.params.scheduleID;\r\n    const data = await DoctorsService.doctorScheduleTimeAvailability(\r\n      scheduleID\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/doctors/:timeID/booked\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<void> => {\r\n    const timeID = +req.params.timeID;\r\n    const result = await DoctorsService.booked(timeID);\r\n    const buildResponse = BuildResponse.updated(result);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738380095688},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DoctorsService = void 0;\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nclass DoctorsService {\n  static getDoctors() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctors)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getMostPopularDoctors() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMostPopularDoctors)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkDoctorPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorDetial(doctortId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorDetail)(doctortId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static updateDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static logDoctorClick(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.logDoctorClick)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static toggleLike(likeInfo) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.like)(likeInfo);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addComment(comment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addComment)(comment);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSpecialties() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSpecialties)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterSpecialtyById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterSpecialtyById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterServicesById(serviceId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterServicesById)(serviceId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static insertReviews(reviewData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const checkExistingFeedback = yield (0, db_1.existingFeedback)(reviewData);\n      if (checkExistingFeedback.length > 0) {\n        throw new response_error_1.ResponseError.BadRequest(\"You have already submitted feedback for this doctor.\");\n      } else {\n        const data = yield (0, db_1.insertReviews)(reviewData);\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static getReviews() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getReviews)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorScheduleAvailability(id, consultationType) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorScheduleAvailability)(id, consultationType);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorScheduleTimeAvailability(scheduleID) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorScheduleTimeAvailability)(scheduleID);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static booked(timeID) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.booked)(timeID);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.DoctorsService = DoctorsService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNwb25zZV9lcnJvcl8xIiwicmVxdWlyZSIsImRiXzEiLCJEb2N0b3JzU2VydmljZSIsImdldERvY3RvcnMiLCJkYXRhIiwibWVzc2FnZSIsImdldE1vc3RQb3B1bGFyRG9jdG9ycyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJtb2JpbGUiLCJyZWdpc3RlckRvY3RvciIsImZvcm1EYXRhIiwiYWRkRG9jdG9yIiwiZG9jdG9yRGV0aWFsIiwiZG9jdG9ydElkIiwiZG9jdG9yRGV0YWlsIiwidXBkYXRlRG9jdG9yIiwibG9nRG9jdG9yQ2xpY2siLCJpZCIsInRvZ2dsZUxpa2UiLCJsaWtlSW5mbyIsImxpa2UiLCJhZGRDb21tZW50IiwiY29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwiZmlsdGVyU3BlY2lhbHR5QnlJZCIsInNwZWNpYWx0eUlkIiwiZmlsdGVyU2VydmljZXNCeUlkIiwic2VydmljZUlkIiwiaW5zZXJ0UmV2aWV3cyIsInJldmlld0RhdGEiLCJjaGVja0V4aXN0aW5nRmVlZGJhY2siLCJleGlzdGluZ0ZlZWRiYWNrIiwibGVuZ3RoIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHkiLCJjb25zdWx0YXRpb25UeXBlIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5Iiwic2NoZWR1bGVJRCIsImJvb2tlZCIsInRpbWVJRCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbW1lbnRzRFRPLFxyXG4gIERvY3RvcnNEVE8sXHJcbiAgbGlrZURUTyxcclxuICBSZXZpZXdzRFRPLFxyXG59IGZyb20gXCIuLi8uLi9tb2RlbHMvZG9jdG9yc1wiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHtcclxuICBhZGRDb21tZW50LFxyXG4gIGFkZERvY3RvcixcclxuICBib29rZWQsXHJcbiAgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyxcclxuICBkb2N0b3JEZXRhaWwsXHJcbiAgZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHksXHJcbiAgZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5LFxyXG4gIGV4aXN0aW5nRmVlZGJhY2ssXHJcbiAgZmlsdGVyU2VydmljZXNCeUlkLFxyXG4gIGZpbHRlclNwZWNpYWx0eUJ5SWQsXHJcbiAgZ2V0RG9jdG9ycyxcclxuICBnZXRNb3N0UG9wdWxhckRvY3RvcnMsXHJcbiAgZ2V0UmV2aWV3cyxcclxuICBnZXRTcGVjaWFsdGllcyxcclxuICBpbnNlcnRSZXZpZXdzLFxyXG4gIGxpa2UsXHJcbiAgbG9nRG9jdG9yQ2xpY2ssXHJcbiAgdXBkYXRlRG9jdG9yLFxyXG59IGZyb20gXCIuL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdG9yc1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RG9jdG9ycygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXREb2N0b3JzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldE1vc3RQb3B1bGFyRG9jdG9ycygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRNb3N0UG9wdWxhckRvY3RvcnMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhcclxuICAgIG1vYmlsZTogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJEb2N0b3IoZm9ybURhdGE6IERvY3RvcnNEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGREb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JEZXRpYWwoZG9jdG9ydElkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkb2N0b3JEZXRhaWwoZG9jdG9ydElkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdG9yKGZvcm1EYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvZ0RvY3RvckNsaWNrKGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBsb2dEb2N0b3JDbGljayhpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHRvZ2dsZUxpa2UobGlrZUluZm86IGxpa2VEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBsaWtlKGxpa2VJbmZvKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgYWRkQ29tbWVudChjb21tZW50OiBDb21tZW50c0RUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZENvbW1lbnQoY29tbWVudCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFNwZWNpYWx0aWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFNwZWNpYWx0aWVzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5SWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGluc2VydFJldmlld3MocmV2aWV3RGF0YTogUmV2aWV3c0RUTykge1xyXG4gICAgY29uc3QgY2hlY2tFeGlzdGluZ0ZlZWRiYWNrID0gYXdhaXQgZXhpc3RpbmdGZWVkYmFjayhyZXZpZXdEYXRhKTtcclxuICAgIGlmIChjaGVja0V4aXN0aW5nRmVlZGJhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFxyXG4gICAgICAgIFwiWW91IGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgZmVlZGJhY2sgZm9yIHRoaXMgZG9jdG9yLlwiXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhKTtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFJldmlld3MoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UmV2aWV3cygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHkoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgY29uc3VsdGF0aW9uVHlwZTogYW55XHJcbiAgKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHkoaWQsIGNvbnN1bHRhdGlvblR5cGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkoc2NoZWR1bGVJRDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KHNjaGVkdWxlSUQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgYm9va2VkKHRpbWVJRDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYm9va2VkKHRpbWVJRCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLE1BQUFBLGdCQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxJQUFBLEdBQUFELE9BQUE7QUFxQkEsTUFBYUUsY0FBYztFQUNsQixPQUFhQyxVQUFVQSxDQUFBOztNQUM1QixNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSCxJQUFBLENBQUFFLFVBQVUsR0FBRTtNQUMvQixJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7O0VBQ00sT0FBYUUscUJBQXFCQSxDQUFBOztNQUN2QyxNQUFNRixJQUFJLEdBQUcsTUFBTSxJQUFBSCxJQUFBLENBQUFLLHFCQUFxQixHQUFFO01BQzFDLElBQUlGLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhRyw0QkFBNEJBLENBQzlDQyxNQUFjOztNQUVkLE1BQU1KLElBQUksR0FBRyxNQUFNLElBQUFILElBQUEsQ0FBQU0sNEJBQTRCLEVBQUNDLE1BQU0sQ0FBQztNQUN2RCxJQUFJSixJQUFJLEVBQUU7UUFD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","map":{"version":3,"names":["response_error_1","require","db_1","DoctorsService","getDoctors","data","message","getMostPopularDoctors","checkDoctorPhoneNumberExists","mobile","registerDoctor","formData","addDoctor","doctorDetial","doctortId","doctorDetail","updateDoctor","logDoctorClick","id","toggleLike","likeInfo","like","addComment","comment","getSpecialties","filterSpecialtyById","specialtyId","filterServicesById","serviceId","insertReviews","reviewData","checkExistingFeedback","existingFeedback","length","ResponseError","BadRequest","getReviews","doctorScheduleAvailability","consultationType","doctorScheduleTimeAvailability","scheduleID","booked","timeID","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/service.ts"],"sourcesContent":["import {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  addComment,\r\n  addDoctor,\r\n  booked,\r\n  checkDoctorPhoneNumberExists,\r\n  doctorDetail,\r\n  doctorScheduleAvailability,\r\n  doctorScheduleTimeAvailability,\r\n  existingFeedback,\r\n  filterServicesById,\r\n  filterSpecialtyById,\r\n  getDoctors,\r\n  getMostPopularDoctors,\r\n  getReviews,\r\n  getSpecialties,\r\n  insertReviews,\r\n  like,\r\n  logDoctorClick,\r\n  updateDoctor,\r\n} from \"./db\";\r\n\r\nexport class DoctorsService {\r\n  public static async getDoctors() {\r\n    const data = await getDoctors();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getMostPopularDoctors() {\r\n    const data = await getMostPopularDoctors();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async checkDoctorPhoneNumberExists(\r\n    mobile: string\r\n  ): Promise<boolean> {\r\n    const data = await checkDoctorPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  public static async registerDoctor(formData: DoctorsDTO) {\r\n    const data = await addDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorDetial(doctortId: number) {\r\n    const data = await doctorDetail(doctortId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async updateDoctor(formData: DoctorsDTO) {\r\n    const data = await updateDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async logDoctorClick(id: number) {\r\n    const data = await logDoctorClick(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async toggleLike(likeInfo: likeDTO) {\r\n    const data = await like(likeInfo);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async addComment(comment: CommentsDTO) {\r\n    const data = await addComment(comment);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSpecialties() {\r\n    const data = await getSpecialties();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterSpecialtyById(specialtyId: number) {\r\n    const data = await filterSpecialtyById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterServicesById(serviceId: number) {\r\n    const data = await filterServicesById(serviceId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async insertReviews(reviewData: ReviewsDTO) {\r\n    const checkExistingFeedback = await existingFeedback(reviewData);\r\n    if (checkExistingFeedback.length > 0) {\r\n      throw new ResponseError.BadRequest(\r\n        \"You have already submitted feedback for this doctor.\"\r\n      );\r\n    } else {\r\n      const data = await insertReviews(reviewData);\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async getReviews() {\r\n    const data = await getReviews();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async doctorScheduleAvailability(\r\n    id: number,\r\n    consultationType: any\r\n  ) {\r\n    const data = await doctorScheduleAvailability(id, consultationType);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorScheduleTimeAvailability(scheduleID: number) {\r\n    const data = await doctorScheduleTimeAvailability(scheduleID);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async booked(timeID: number) {\r\n    const data = await booked(timeID);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738380095688},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorYup = void 0;\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\nexports.ExpressErrorYup = ExpressErrorYup;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXBfMSIsInJlcXVpcmUiLCJFeHByZXNzRXJyb3JZdXAiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvcnMiLCJqb2luIiwiaW5uZXIiLCJsZW5ndGgiLCJyZWR1Y2UiLCJhY2MiLCJjdXJWYWwiLCJwYXRoIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yWXVwKFxyXG4gICAgZXJyOiBhbnksXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlLFxyXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXHJcbikge1xyXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBZVVAgVkFMSURBVElPTicpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0ge1xyXG4gICAgICAgICAgICBjb2RlOiA0MjIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5lcnJvcnMuam9pbignPGJyLz4nKSB8fCAnWXVwIFZhbGlkYXRpb24gRXJyb3IgIScsXHJcbiAgICAgICAgICAgIGVycm9yczpcclxuICAgICAgICAgICAgICAgIGVyci5pbm5lci5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlcnIuaW5uZXIucmVkdWNlKChhY2M6IGFueSwgY3VyVmFsOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2Ake2N1clZhbC5wYXRofWBdID0gY3VyVmFsLm1lc3NhZ2UgfHwgY3VyVmFsLnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogeyBbYCR7ZXJyLnBhdGh9YF06IGVyci5tZXNzYWdlIHx8IGVyci50eXBlIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKGVycm9yKTtcclxuICAgIH1cclxuICAgIG5leHQoZXJyKVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCQyxlQUFlQSxDQUNqQ0MsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWUgsS0FBQSxDQUFBTyxlQUFlLEVBQUU7TUFDaENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO01BQ25DLE1BQU1DLEtBQUssR0FBRztRQUNWQyxJQUFJLEVBQUUsR0FBRztRQUNUQyxPQUFPLEVBQUVULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksd0JBQXdCO1FBQzdERCxNQUFNLEVBQ0ZWLEdBQUcsQ0FBQ1ksS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxHQUNkYixHQUFHLENBQUNZLEtBQUssQ0FBQ0UsTUFBTSxDQUFDLENBQUNDLEdBQVEsRUFBRUMsTUFBVyxLQUFJO1VBQ3pDRCxHQUFHLENBQUMsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxHQUFHRCxNQUFNLENBQUNQLE9BQU8sSUFBSU8sTUFBTSxDQUFDRSxJQUFJO1VBQ3JELE9BQU9ILEdBQUc7UUFDZCxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQ0o7VUFBRSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2lCLElBQUksRUFBRSxHQUFHakIsR0FBRyxDQUFDUyxPQUFPLElBQUlULEdBQUcsQ0FBQ2tCO1FBQUk7T0FDdkQ7TUFDRCxPQUFPaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNiLEtBQUssQ0FBQztJQUN0QztJQUNBSixJQUFJLENBQUNILEdBQUcsQ0FBQztFQUViLENBQUM7O0FBdkJEcUIsT0FBQSxDQUFBdEIsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["yup_1","require","ExpressErrorYup","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { ValidationError } from \"yup\";\r\n\r\nexport async function ExpressErrorYup(\r\n    err: any,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    if (err instanceof ValidationError) {\r\n        console.log('ERROR YUP VALIDATION');\r\n        const error = {\r\n            code: 422,\r\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\r\n            errors:\r\n                err.inner.length > 0\r\n                    ? err.inner.reduce((acc: any, curVal: any) => {\r\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\r\n                        return acc\r\n                    }, {})\r\n                    : { [`${err.path}`]: err.message || err.type }\r\n        }\r\n        return res.status(422).json(error);\r\n    }\r\n    next(err)\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,KAAA,GAAAC,OAAA;AAEA,SAAsBC,eAAeA,CACjCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYH,KAAA,CAAAO,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC;;AAvBDqB,OAAA,CAAAtB,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1727917785623},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedOrigins = void 0;\nexports.allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://192.168.50.207:8000\", \"http://172.26.144.1:8000\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsb3dlZE9yaWdpbnMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25zdGFudHNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhbGxvd2VkT3JpZ2lucyA9IFtcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJywgLy8gRnJvbnRlbmQgV2ViXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxuICAgIFwiaHR0cDovLzE5Mi4xNjguNTAuMjA3OjgwMDBcIixcbiAgICBcImh0dHA6Ly8xNzIuMjYuMTQ0LjE6ODAwMFwiXG4gICBdXG4gIFxuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFhQSxPQUFBLENBQUFDLGNBQWMsR0FBRyxDQUMxQix1QkFBdUI7QUFBRTtBQUN6Qix1QkFBdUI7QUFBRTtBQUN6Qiw0QkFBNEIsRUFDNUIsMEJBQTBCLENBQzFCIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","allowedOrigins"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\constants\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["export const allowedOrigins = [\n    'http://localhost:4200', // Frontend Web\n    'http://localhost:3000', // Frontend Web\n    \"http://192.168.50.207:8000\",\n    \"http://172.26.144.1:8000\"\n   ]\n  \n  "],"mappings":";;;;;;AAAaA,OAAA,CAAAC,cAAc,GAAG,CAC1B,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,4BAA4B,EAC5B,0BAA0B,CAC1B","ignoreList":[]}},"mtime":1729496606113},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorResponse = ExpressErrorResponse;\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nfunction generateErrorResponseError(e, code) {\n  return lodash_1.default.isObject(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.ResponseError.BaseResponse) {\n      return res.status(err.code).json(generateErrorResponseError(err, err.code));\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiZGVmYXVsdCIsImlzT2JqZWN0IiwibWVzc2FnZSIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJNdWx0ZXJFcnJvciIsInN0YXR1cyIsImpzb24iLCJSZXNwb25zZUVycm9yIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZnVuY3Rpb24gZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZTogRXJyb3IsIGNvZGU6IE51bWJlcikge1xuICByZXR1cm4gXy5pc09iamVjdChlLm1lc3NhZ2UpID8gZS5tZXNzYWdlIDogeyBjb2RlLCBtZXNzYWdlOiBlLm1lc3NhZ2UgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yUmVzcG9uc2UoXG4gIGVycjogYW55LFxuICByZXE6IFJlcXVlc3QsXG4gIHJlczogUmVzcG9uc2UsXG4gIG5leHQ6IE5leHRGdW5jdGlvblxuKSB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBtdWx0ZXIuTXVsdGVyRXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZXJyLCA0MDApKVxuICB9XG5cbiAgaWYgKGVyciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyhlcnIuY29kZSlcbiAgICAgIC5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgZXJyLmNvZGUpKVxuICB9XG4gIG5leHQoZXJyKVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQUEsT0FBQSxDQUFBQyxvQkFBQSxHQUFBQSxvQkFBQTtBQVZBLE1BQUFDLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFHQSxNQUFBRSxnQkFBQSxHQUFBRixPQUFBO0FBRUEsU0FBU0csMEJBQTBCQSxDQUFDQyxDQUFRLEVBQUVDLElBQVk7RUFDeEQsT0FBT0osUUFBQSxDQUFBSyxPQUFDLENBQUNDLFFBQVEsQ0FBQ0gsQ0FBQyxDQUFDSSxPQUFPLENBQUMsR0FBR0osQ0FBQyxDQUFDSSxPQUFPLEdBQUc7SUFBRUgsSUFBSTtJQUFFRyxPQUFPLEVBQUVKLENBQUMsQ0FBQ0k7RUFBTyxDQUFFO0FBQ3pFO0FBRUEsU0FBc0JYLG9CQUFvQkEsQ0FDeENZLEdBQVEsRUFDUkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQixJQUFJSCxHQUFHLFlBQVlYLFFBQUEsQ0FBQVEsT0FBTSxDQUFDTyxXQUFXLEVBQUU7TUFDckMsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1osMEJBQTBCLENBQUNNLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNuRTtJQUVBLElBQUlBLEdBQUcsWUFBWVAsZ0JBQUEsQ0FBQWMsYUFBYSxDQUFDQyxZQUFZLEVBQUU7TUFDN0MsT0FBT04sR0FBRyxDQUNQRyxNQUFNLENBQUNMLEdBQUcsQ0FBQ0osSUFBSSxDQUFDLENBQ2hCVSxJQUFJLENBQUNaLDBCQUEwQixDQUFDTSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0osSUFBSSxDQUFDLENBQUM7SUFDcEQ7SUFDQU8sSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFDWCxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressErrorResponse","multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","default","isObject","message","err","req","res","next","MulterError","status","json","ResponseError","BaseResponse"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\nimport _ from 'lodash';\n\nimport { NextFunction, Request, Response } from 'express';\nimport {ResponseError} from '../modules/error/response_error';\n\nfunction generateErrorResponseError(e: Error, code: Number) {\n  return _.isObject(e.message) ? e.message : { code, message: e.message }\n}\n\nexport async function ExpressErrorResponse(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof multer.MulterError) {\n    return res.status(400).json(generateErrorResponseError(err, 400))\n  }\n\n  if (err instanceof ResponseError.BaseResponse) {\n    return res\n      .status(err.code)\n      .json(generateErrorResponseError(err, err.code))\n  }\n  next(err)\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUAA,OAAA,CAAAC,oBAAA,GAAAA,oBAAA;AAVA,MAAAC,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAAE,gBAAA,GAAAF,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAOJ,QAAA,CAAAK,OAAC,CAACC,QAAQ,CAACH,CAAC,CAACI,OAAO,CAAC,GAAGJ,CAAC,CAACI,OAAO,GAAG;IAAEH,IAAI;IAAEG,OAAO,EAAEJ,CAAC,CAACI;EAAO,CAAE;AACzE;AAEA,SAAsBX,oBAAoBA,CACxCY,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAQ,OAAM,CAACO,WAAW,EAAE;MACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAc,aAAa,CAACC,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPG,MAAM,CAACL,GAAG,CAACJ,IAAI,CAAC,CAChBU,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACJ,IAAI,CAAC,CAAC;IACpD;IACAO,IAAI,CAACH,GAAG,CAAC;EACX,CAAC","ignoreList":[]}},"mtime":1738401141055},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressAutoHandleTransaction = void 0;\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once(\"finish\", () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log(\"AUTO COMMIT!!!\");\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\nexports.ExpressAutoHandleTransaction = ExpressAutoHandleTransaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsIl90cmFuc2FjdGlvbiIsIm9uY2UiLCJ0cmFuc2FjdGlvbktleXMiLCJPYmplY3QiLCJrZXlzIiwiaSIsImxlbmd0aCIsInR4biIsImZpbmlzaGVkIiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiY29tbWl0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2F1dG9faGFuZGxlX3RyYW5zYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcInNlcXVlbGl6ZVwiO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXNwb25zZSwgUmVxdWVzdCB9IGZyb20gXCJleHByZXNzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKFxuICByZXE6IGFueSxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxuICByZXEuX3RyYW5zYWN0aW9uID0gcmVxLl90cmFuc2FjdGlvbiB8fCB7fTtcblxuICByZXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB7XG4gICAgY29uc3QgeyBfdHJhbnNhY3Rpb24gfSA9IHJlcTtcblxuICAgIGlmICghX3RyYW5zYWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdHJhbnNhY3Rpb25LZXlzID0gT2JqZWN0LmtleXMoX3RyYW5zYWN0aW9uKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zYWN0aW9uS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdHhuID0gX3RyYW5zYWN0aW9uW3RyYW5zYWN0aW9uS2V5c1tpXV0gYXMgVHJhbnNhY3Rpb24gJiB7XG4gICAgICAgIGZpbmlzaGVkPzogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIGlmICghdHhuPy5maW5pc2hlZCkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IHJlcS5vcmlnaW5hbFVybDtcbiAgICAgICAgY29uc29sZS53YXJuKGBlbmRwb2ludCAke2VuZHBvaW50fSBwb3RlbnRpYWxseSBjYW4gbGVhZCB0byBidWdgKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBVVRPIENPTU1JVCEhIVwiKTtcbiAgICAgICAgdHhuLmNvbW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbmV4dCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxTQUFzQkEsNEJBQTRCQSxDQUNoREMsR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQjtJQUNBRixHQUFHLENBQUNHLFlBQVksR0FBR0gsR0FBRyxDQUFDRyxZQUFZLElBQUksRUFBRTtJQUV6Q0YsR0FBRyxDQUFDRyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQUs7TUFDdEIsTUFBTTtRQUFFRDtNQUFZLENBQUUsR0FBR0gsR0FBRztNQUU1QixJQUFJLENBQUNHLFlBQVksRUFBRTtRQUNqQjtNQUNGO01BRUEsTUFBTUUsZUFBZSxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ0osWUFBWSxDQUFDO01BQ2pELEtBQUssSUFBSUssQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxlQUFlLENBQUNJLE1BQU0sRUFBRUQsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsRCxNQUFNRSxHQUFHLEdBQUdQLFlBQVksQ0FBQ0UsZUFBZSxDQUFDRyxDQUFDLENBQUMsQ0FFMUM7UUFDRCxJQUFJLEVBQUNFLEdBQUcsYUFBSEEsR0FBRyx1QkFBSEEsR0FBRyxDQUFFQyxRQUFRLEdBQUU7VUFDbEIsTUFBTUMsUUFBUSxHQUFHWixHQUFHLENBQUNhLFdBQVc7VUFDaENDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLFlBQVlILFFBQVEsOEJBQThCLENBQUM7VUFDaEVFLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixDQUFDO1VBQzdCTixHQUFHLENBQUNPLE1BQU0sRUFBRTtRQUNkO01BQ0Y7SUFDRixDQUFDLENBQUM7SUFFRmYsSUFBSSxFQUFFO0VBQ1IsQ0FBQzs7QUE5QkRnQixPQUFBLENBQUFuQiw0QkFBQSxHQUFBQSw0QkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from \"sequelize\";\nimport { NextFunction, Response, Request } from \"express\";\n\nexport async function ExpressAutoHandleTransaction(\n  req: any,\n  res: Response,\n  next: NextFunction\n) {\n  // Ensure _transaction is initialized\n  req._transaction = req._transaction || {};\n\n  res.once(\"finish\", () => {\n    const { _transaction } = req;\n\n    if (!_transaction) {\n      return;\n    }\n\n    const transactionKeys = Object.keys(_transaction);\n    for (let i = 0; i < transactionKeys.length; i += 1) {\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\n        finished?: string;\n      };\n      if (!txn?.finished) {\n        const endpoint = req.originalUrl;\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n        console.log(\"AUTO COMMIT!!!\");\n        txn.commit();\n      }\n    }\n  });\n\n  next();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAsBA,4BAA4BA,CAChDC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC;;AA9BDgB,OAAA,CAAAnB,4BAAA,GAAAA,4BAAA","ignoreList":[]}},"mtime":1725611830099},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medicine\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.put(\"/medicine/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const {\n      id\n    } = req.params;\n    const data = yield service_1.MedicineService.updateIsFavorite(id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsInB1dCIsInVwZGF0ZUlzRmF2b3JpdGUiLCJpc0Zhdm9yaXRlIiwiYm9keSIsImlkIiwicGFyYW1zIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbWVkaWNpbmUvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyBNZWRpY2luZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvbWVkaWNpbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TWVkaWNpbmUocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLmdldE1lZGljaW5lKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wdXQoXHJcbiAgXCIvbWVkaWNpbmUvOmlkL2Zhdm9yaXRlXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUlzRmF2b3JpdGUoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHsgaXNGYXZvcml0ZSB9ID0gcmVxLmJvZHk7IC8vIEdldCB0aGUgaXNGYXZvcml0ZSB2YWx1ZSBmcm9tIHRoZSByZXF1ZXN0IGJvZHlcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLnVwZGF0ZUlzRmF2b3JpdGUoaWQsIGlzRmF2b3JpdGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUMsUUFBQSxDQUFBRyxNQUFNLENBQUNDLEdBQUcsQ0FDUixXQUFXLEVBQ1gsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNKLFdBQVcsRUFBRTtJQUNoRCxNQUFNSyxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxJQUFJRSxhQUFhLEVBQUU7TUFDakIsT0FBT0gsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWCxRQUFBLENBQUFHLE1BQU0sQ0FBQ1ksR0FBRyxDQUNSLHdCQUF3QixFQUN4QixJQUFBakIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZVcsZ0JBQWdCQSxDQUMxQ1QsR0FBWSxFQUNaQyxHQUFhOztJQUViLE1BQU07TUFBRVM7SUFBVSxDQUFFLEdBQUdWLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLENBQUM7SUFDakMsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR1osR0FBRyxDQUFDYSxNQUFNO0lBQ3pCLE1BQU1YLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ00sZ0JBQWdCLENBQUNHLEVBQUUsRUFBRUYsVUFBVSxDQUFDO0lBQ25FLE1BQU1OLGFBQWEsR0FBR1YsY0FBQSxDQUFBVyxhQUFhLENBQUNSLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0lBQzdDLElBQUlFLGFBQWEsRUFBRTtNQUNqQixPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","json","put","updateIsFavorite","isFavorite","body","id","params"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medicine/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medicine\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medicine/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const { id } = req.params;\r\n    const data = await MedicineService.updateIsFavorite(id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,WAAW,EACX,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACY,GAAG,CACR,wBAAwB,EACxB,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAeW,gBAAgBA,CAC1CT,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAES;IAAU,CAAE,GAAGV,GAAG,CAACW,IAAI,CAAC,CAAC;IACjC,MAAM;MAAEC;IAAE,CAAE,GAAGZ,GAAG,CAACa,MAAM;IACzB,MAAMX,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACM,gBAAgB,CAACG,EAAE,EAAEF,UAAU,CAAC;IACnE,MAAMN,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1729594162966},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiaWQiLCJpc0Zhdm9yaXRlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG1lZGljaW5lXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL21lZGljaW5lL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TWVkaWNpbmUsIHVwZGF0ZUlzRmF2b3JpdGUgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmVTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldE1lZGljaW5lKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE1lZGljaW5lKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlSXNGYXZvcml0ZShpZDogc3RyaW5nLCBpc0Zhdm9yaXRlOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlSXNGYXZvcml0ZShpZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGdCQUFnQkEsQ0FBQ0MsRUFBVSxFQUFFQyxVQUFtQjs7TUFDbEUsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTSxnQkFBZ0IsRUFBQ0MsRUFBRSxFQUFFQyxVQUFVLENBQUM7TUFDbkQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","id","isFavorite","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medicine/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,EAAU,EAAEC,UAAmB;;MAClE,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,EAAE,EAAEC,UAAU,CAAC;MACnD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729593055038},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllDiseases\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DiseasesService.getAllDiseases();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\npublic_1.router.get(\"/getDiseaseSubcategories/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const disease_id = req.params.id;\n  const data = yield service_1.DiseasesService.getDiseaseSubcategories(disease_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJEaXNlYXNlc1NlcnZpY2UiLCJnZXRBbGxEaXNlYXNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsImRpc2Vhc2VfaWQiLCJwYXJhbXMiLCJpZCIsImdldERpc2Vhc2VTdWJjYXRlZ29yaWVzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZGlzZWFzZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZGlzZWFzZXMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEaXNlYXNlc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldEFsbERpc2Vhc2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEaXNlYXNlc1NlcnZpY2UuZ2V0QWxsRGlzZWFzZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldERpc2Vhc2VTdWJjYXRlZ29yaWVzLzppZFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBkaXNlYXNlX2lkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEaXNlYXNlc1NlcnZpY2UuZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMoZGlzZWFzZV9pZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNDLGNBQWMsRUFBRTtFQUNuRCxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxJQUFJRyxhQUFhLEVBQUU7SUFDakIsT0FBT0wsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0VBQzVDO0FBQ0YsQ0FBQyxFQUFDLENBQ0g7QUFDRFgsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUiw4QkFBOEIsRUFDOUIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTVEsVUFBVSxHQUFHVixHQUFHLENBQUNXLE1BQU0sQ0FBQ0MsRUFBRTtFQUNoQyxNQUFNVCxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNTLHVCQUF1QixDQUFDSCxVQUFVLENBQUM7RUFDdEUsTUFBTUosYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsSUFBSUcsYUFBYSxFQUFFO0lBQ2pCLE9BQU9MLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztFQUM1QztBQUNGLENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","DiseasesService","getAllDiseases","buildResponse","BuildResponse","status","json","disease_id","params","id","getDiseaseSubcategories"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/diseases/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DiseasesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllDiseases\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DiseasesService.getAllDiseases();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\nrouter.get(\r\n  \"/getDiseaseSubcategories/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const disease_id = req.params.id;\r\n    const data = await DiseasesService.getDiseaseSubcategories(disease_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACC,cAAc,EAAE;EACnD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,IAAIG,aAAa,EAAE;IACjB,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C;AACF,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,8BAA8B,EAC9B,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMQ,UAAU,GAAGV,GAAG,CAACW,MAAM,CAACC,EAAE;EAChC,MAAMT,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACS,uBAAuB,CAACH,UAAU,CAAC;EACtE,MAAMJ,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,IAAIG,aAAa,EAAE;IACjB,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C;AACF,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1729493172456},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DiseasesService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass DiseasesService {\n  static getAllDiseases() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDisease)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static getDiseaseSubcategories(disease_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDiseaseSubcategories)(disease_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.DiseasesService = DiseasesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkRpc2Vhc2VzU2VydmljZSIsImdldEFsbERpc2Vhc2VzIiwiZGF0YSIsImdldERpc2Vhc2UiLCJtZXNzYWdlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJkaXNlYXNlX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRpc2Vhc2VzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2Rpc2Vhc2VzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGlzZWFzZSwgZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGlzZWFzZXNTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbERpc2Vhc2VzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERpc2Vhc2UoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxlQUFlO0VBQ25CLE9BQWFDLGNBQWNBLENBQUE7O01BQ2hDLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUssVUFBVSxHQUFFO01BQy9CLElBQUlELElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUUsT0FBTyxFQUFFLGVBQWU7VUFBRUYsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7O0VBQ00sT0FBYUcsdUJBQXVCQSxDQUFDQyxVQUFrQjs7TUFDNUQsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTyx1QkFBdUIsRUFBQ0MsVUFBVSxDQUFDO01BQ3RELElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUUsT0FBTyxFQUFFLGVBQWU7VUFBRUYsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7OztBQWhCSEssT0FBQSxDQUFBUCxlQUFBLEdBQUFBLGVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","DiseasesService","getAllDiseases","data","getDisease","message","getDiseaseSubcategories","disease_id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/diseases/service.ts"],"sourcesContent":["import { getDisease, getDiseaseSubcategories } from \"../../bin/db\";\r\n\r\nexport class DiseasesService {\r\n  public static async getAllDiseases() {\r\n    const data = await getDisease();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async getDiseaseSubcategories(disease_id: string) {\r\n    const data = await getDiseaseSubcategories(disease_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,UAAU,GAAE;MAC/B,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaG,uBAAuBA,CAACC,UAAkB;;MAC5D,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAO,uBAAuB,EAACC,UAAU,CAAC;MACtD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729493177934},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medications\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.put(\"/medications/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const medication_id = req.params.id;\n    const data = yield service_1.MedicineService.updateIsFavorite(medication_id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsInB1dCIsInVwZGF0ZUlzRmF2b3JpdGUiLCJpc0Zhdm9yaXRlIiwiYm9keSIsIm1lZGljYXRpb25faWQiLCJwYXJhbXMiLCJpZCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG1lZGljYXRpb25zXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL21lZGljYXRpb25zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgTWVkaWNpbmVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL21lZGljYXRpb25zXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE1lZGljaW5lKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IE1lZGljaW5lU2VydmljZS5nZXRNZWRpY2luZSgpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucHV0KFxyXG4gIFwiL21lZGljYXRpb25zLzppZC9mYXZvcml0ZVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVJc0Zhdm9yaXRlKFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCB7IGlzRmF2b3JpdGUgfSA9IHJlcS5ib2R5OyAvLyBHZXQgdGhlIGlzRmF2b3JpdGUgdmFsdWUgZnJvbSB0aGUgcmVxdWVzdCBib2R5XHJcbiAgICBjb25zdCBtZWRpY2F0aW9uX2lkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBNZWRpY2luZVNlcnZpY2UudXBkYXRlSXNGYXZvcml0ZShtZWRpY2F0aW9uX2lkLCBpc0Zhdm9yaXRlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBR0FDLFFBQUEsQ0FBQUcsTUFBTSxDQUFDQyxHQUFHLENBQ1IsY0FBYyxFQUNkLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDSixXQUFXLEVBQUU7SUFDaEQsTUFBTUssYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUUsYUFBYSxFQUFFO01BQ2pCLE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFgsUUFBQSxDQUFBRyxNQUFNLENBQUNZLEdBQUcsQ0FDUiwyQkFBMkIsRUFDM0IsSUFBQWpCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVXLGdCQUFnQkEsQ0FDMUNULEdBQVksRUFDWkMsR0FBYTs7SUFFYixNQUFNO01BQUVTO0lBQVUsQ0FBRSxHQUFHVixHQUFHLENBQUNXLElBQUksQ0FBQyxDQUFDO0lBQ2pDLE1BQU1DLGFBQWEsR0FBR1osR0FBRyxDQUFDYSxNQUFNLENBQUNDLEVBQUU7SUFDbkMsTUFBTVosSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDTSxnQkFBZ0IsQ0FBQ0csYUFBYSxFQUFFRixVQUFVLENBQUM7SUFDOUUsTUFBTU4sYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUUsYUFBYSxFQUFFO01BQ2pCLE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","json","put","updateIsFavorite","isFavorite","body","medication_id","params","id"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medications/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medications\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medications/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const medication_id = req.params.id;\r\n    const data = await MedicineService.updateIsFavorite(medication_id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACY,GAAG,CACR,2BAA2B,EAC3B,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAeW,gBAAgBA,CAC1CT,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAES;IAAU,CAAE,GAAGV,GAAG,CAACW,IAAI,CAAC,CAAC;IACjC,MAAMC,aAAa,GAAGZ,GAAG,CAACa,MAAM,CAACC,EAAE;IACnC,MAAMZ,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACM,gBAAgB,CAACG,aAAa,EAAEF,UAAU,CAAC;IAC9E,MAAMN,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1729846055745},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(medication_id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(medication_id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwibWVkaWNhdGlvbl9pZCIsImlzRmF2b3JpdGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNhdGlvbnNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbWVkaWNhdGlvbnMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRNZWRpY2luZSwgdXBkYXRlSXNGYXZvcml0ZSB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luZVNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0TWVkaWNpbmUoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TWVkaWNpbmUoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBva2AsIGRhdGEgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVJc0Zhdm9yaXRlKG1lZGljYXRpb25faWQ6IHN0cmluZywgaXNGYXZvcml0ZTogYm9vbGVhbikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGdCQUFnQkEsQ0FBQ0MsYUFBcUIsRUFBRUMsVUFBbUI7O01BQzdFLE1BQU1KLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQU0sZ0JBQWdCLEVBQUNDLGFBQWEsRUFBRUMsVUFBVSxDQUFDO01BQzlELElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","medication_id","isFavorite","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medications/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(medication_id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(medication_id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,aAAqB,EAAEC,UAAmB;;MAC7E,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,aAAa,EAAEC,UAAU,CAAC;MAC9D,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729845346693},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\npublic_1.router.post(\"/prescription-medicine\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield services_1.PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwcmVzY3JpcHRpb24tbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBQcmVzY3JpcHRpb25NZWRpY2luZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgXCIvcHJlc2NyaXB0aW9uLW1lZGljaW5lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGluc2VydEV2ZW50KHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlLkFkZFByZXNjcmlwdGlvbk1lZGljbmUoZXZlbnREYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFVBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsSUFBSSxDQUNULHdCQUF3QixFQUN4QixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLFNBQVMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0lBQzFCLE1BQU1DLElBQUksR0FBRyxNQUFNVCxVQUFBLENBQUFVLDJCQUEyQixDQUFDQyxzQkFBc0IsQ0FBQ0osU0FBUyxDQUFDO0lBQ2hGLE1BQU1LLGFBQWEsR0FBR2QsY0FBQSxDQUFBZSxhQUFhLENBQUNDLEdBQUcsQ0FBQ0wsSUFBSSxDQUFDO0lBQzdDLElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPTixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","services_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","PrescriptionMedicineService","AddPrescriptionMedicne","buildResponse","BuildResponse","get","status","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/prescription-medicine/controller.ts"],"sourcesContent":["\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { PrescriptionMedicineService } from \"./services\";\r\n\r\nrouter.post(\r\n  \"/prescription-medicine\",\r\n  asyncHandler(async function insertEvent(req: any, res: any) {\r\n    const eventData = req.body;\r\n    const data = await PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,UAAA,CAAAU,2BAA2B,CAACC,sBAAsB,CAACJ,SAAS,CAAC;IAChF,MAAMK,aAAa,GAAGd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAON,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1731310704951},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrescriptionMedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PrescriptionMedicineService {\n  static AddPrescriptionMedicne(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const results = [];\n      for (const medicine of formData.medicine_name) {\n        const medicine_id = medicine.medication_id;\n        const data = yield (0, db_1.addPrescriptionMedicine)(formData, medicine_id);\n        results.push({\n          medicine_id,\n          result: data\n        });\n      }\n      if (results.length) {\n        return {\n          message: \"Insertaions completed\",\n          results\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PrescriptionMedicineService = PrescriptionMedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJmb3JtRGF0YSIsInJlc3VsdHMiLCJtZWRpY2luZSIsIm1lZGljaW5lX25hbWUiLCJtZWRpY2luZV9pZCIsIm1lZGljYXRpb25faWQiLCJkYXRhIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJwdXNoIiwicmVzdWx0IiwibGVuZ3RoIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwcmVzY3JpcHRpb24tbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL3NlcnZpY2VzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZFByZXNjcmlwdGlvbk1lZGljaW5lIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBBZGRQcmVzY3JpcHRpb25NZWRpY25lKGZvcm1EYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgbWVkaWNpbmUgb2YgZm9ybURhdGEubWVkaWNpbmVfbmFtZSkge1xyXG4gICAgICBjb25zdCBtZWRpY2luZV9pZCA9IG1lZGljaW5lLm1lZGljYXRpb25faWQ7XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUoZm9ybURhdGEsIG1lZGljaW5lX2lkKTtcclxuICAgICAgcmVzdWx0cy5wdXNoKHsgbWVkaWNpbmVfaWQsIHJlc3VsdDogZGF0YSB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIkluc2VydGFpb25zIGNvbXBsZXRlZFwiLCByZXN1bHRzIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQywyQkFBMkI7RUFDL0IsT0FBYUMsc0JBQXNCQSxDQUFDQyxRQUFhOztNQUN0RCxNQUFNQyxPQUFPLEdBQUcsRUFBRTtNQUNsQixLQUFLLE1BQU1DLFFBQVEsSUFBSUYsUUFBUSxDQUFDRyxhQUFhLEVBQUU7UUFDN0MsTUFBTUMsV0FBVyxHQUFHRixRQUFRLENBQUNHLGFBQWE7UUFFMUMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQVYsSUFBQSxDQUFBVyx1QkFBdUIsRUFBQ1AsUUFBUSxFQUFFSSxXQUFXLENBQUM7UUFDakVILE9BQU8sQ0FBQ08sSUFBSSxDQUFDO1VBQUVKLFdBQVc7VUFBRUssTUFBTSxFQUFFSDtRQUFJLENBQUUsQ0FBQztNQUM3QztNQUNBLElBQUlMLE9BQU8sQ0FBQ1MsTUFBTSxFQUFFO1FBQ2xCLE9BQU87VUFBRUMsT0FBTyxFQUFFLHVCQUF1QjtVQUFFVjtRQUFPLENBQUU7TUFDdEQsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFkSFcsT0FBQSxDQUFBZCwyQkFBQSxHQUFBQSwyQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","PrescriptionMedicineService","AddPrescriptionMedicne","formData","results","medicine","medicine_name","medicine_id","medication_id","data","addPrescriptionMedicine","push","result","length","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/prescription-medicine/services.ts"],"sourcesContent":["import { addPrescriptionMedicine } from \"../../bin/db\";\r\n\r\nexport class PrescriptionMedicineService {\r\n  public static async AddPrescriptionMedicne(formData: any) {\r\n    const results = [];\r\n    for (const medicine of formData.medicine_name) {\r\n      const medicine_id = medicine.medication_id;\r\n\r\n      const data = await addPrescriptionMedicine(formData, medicine_id);\r\n      results.push({ medicine_id, result: data });\r\n    }\r\n    if (results.length) {\r\n      return { message: \"Insertaions completed\", results };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,2BAA2B;EAC/B,OAAaC,sBAAsBA,CAACC,QAAa;;MACtD,MAAMC,OAAO,GAAG,EAAE;MAClB,KAAK,MAAMC,QAAQ,IAAIF,QAAQ,CAACG,aAAa,EAAE;QAC7C,MAAMC,WAAW,GAAGF,QAAQ,CAACG,aAAa;QAE1C,MAAMC,IAAI,GAAG,MAAM,IAAAV,IAAA,CAAAW,uBAAuB,EAACP,QAAQ,EAAEI,WAAW,CAAC;QACjEH,OAAO,CAACO,IAAI,CAAC;UAAEJ,WAAW;UAAEK,MAAM,EAAEH;QAAI,CAAE,CAAC;MAC7C;MACA,IAAIL,OAAO,CAACS,MAAM,EAAE;QAClB,OAAO;UAAEC,OAAO,EAAE,uBAAuB;UAAEV;QAAO,CAAE;MACtD,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAdHW,OAAA,CAAAd,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1731313183961},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.saveAppointment = saveAppointment;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction saveAppointment(eventData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const insertEvent = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.appointments \n        (id, id,appointment_date, priority,event_title,created_at,updated_at,event_description,start_date,end_date,start_time,end_time)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n      values: [eventData.id, eventData.id, eventData.appointmentDate, eventData.priority, eventData.event_title, new Date(), new Date(), eventData.event_description, eventData.start_date, eventData.end_date, eventData.campaignTime.start_time, eventData.campaignTime.end_time]\n    });\n    return insertEvent;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwic2F2ZUFwcG9pbnRtZW50IiwibXlzcWxfMSIsInJlcXVpcmUiLCJldmVudERhdGEiLCJpbnNlcnRFdmVudCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImlkIiwiYXBwb2ludG1lbnREYXRlIiwicHJpb3JpdHkiLCJldmVudF90aXRsZSIsIkRhdGUiLCJldmVudF9kZXNjcmlwdGlvbiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsImNhbXBhaWduVGltZSIsInN0YXJ0X3RpbWUiLCJlbmRfdGltZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUFwcG9pbnRtZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XHJcbiAgY29uc3QgaW5zZXJ0RXZlbnQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzIFxyXG4gICAgICAgIChpZCwgaWQsYXBwb2ludG1lbnRfZGF0ZSwgcHJpb3JpdHksZXZlbnRfdGl0bGUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0LGV2ZW50X2Rlc2NyaXB0aW9uLHN0YXJ0X2RhdGUsZW5kX2RhdGUsc3RhcnRfdGltZSxlbmRfdGltZSlcclxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIGV2ZW50RGF0YS5pZCxcclxuICAgICAgICBldmVudERhdGEuaWQsXHJcbiAgICAgICAgZXZlbnREYXRhLmFwcG9pbnRtZW50RGF0ZSxcclxuICAgICAgICBldmVudERhdGEucHJpb3JpdHksXHJcbiAgICAgICAgZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXHJcbiAgICAgICAgZXZlbnREYXRhLnN0YXJ0X2RhdGUsXHJcbiAgICAgICAgZXZlbnREYXRhLmVuZF9kYXRlLFxyXG4gICAgICAgIGV2ZW50RGF0YS5jYW1wYWlnblRpbWUuc3RhcnRfdGltZSxcclxuICAgICAgICBldmVudERhdGEuY2FtcGFpZ25UaW1lLmVuZF90aW1lLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBpbnNlcnRFdmVudDtcclxufVxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUFBLE9BQUEsQ0FBQUMsZUFBQSxHQUFBQSxlQUFBO0FBRkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JGLGVBQWVBLENBQUNHLFNBQXVCOztJQUMzRCxNQUFNQyxXQUFXLEdBQUcsTUFBTSxJQUFBSCxPQUFBLENBQUFJLEtBQUssRUFDN0IsZUFBZUosT0FBQSxDQUFBSyxVQUFVOztxREFFd0IsRUFDakQ7TUFDRUMsTUFBTSxFQUFFLENBQ05KLFNBQVMsQ0FBQ0ssRUFBRSxFQUNaTCxTQUFTLENBQUNLLEVBQUUsRUFDWkwsU0FBUyxDQUFDTSxlQUFlLEVBQ3pCTixTQUFTLENBQUNPLFFBQVEsRUFDbEJQLFNBQVMsQ0FBQ1EsV0FBVyxFQUNyQixJQUFJQyxJQUFJLEVBQUUsRUFDVixJQUFJQSxJQUFJLEVBQUUsRUFDVlQsU0FBUyxDQUFDVSxpQkFBaUIsRUFDM0JWLFNBQVMsQ0FBQ1csVUFBVSxFQUNwQlgsU0FBUyxDQUFDWSxRQUFRLEVBQ2xCWixTQUFTLENBQUNhLFlBQVksQ0FBQ0MsVUFBVSxFQUNqQ2QsU0FBUyxDQUFDYSxZQUFZLENBQUNFLFFBQVE7S0FFbEMsQ0FDRjtJQUVELE9BQU9kLFdBQVc7RUFDcEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","saveAppointment","mysql_1","require","eventData","insertEvent","query","coreSchema","values","id","appointmentDate","priority","event_title","Date","event_description","start_date","end_date","campaignTime","start_time","end_time"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\nexport async function saveAppointment(eventData: IAppointment) {\r\n  const insertEvent = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.appointments \r\n        (id, id,appointment_date, priority,event_title,created_at,updated_at,event_description,start_date,end_date,start_time,end_time)\r\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n    {\r\n      values: [\r\n        eventData.id,\r\n        eventData.id,\r\n        eventData.appointmentDate,\r\n        eventData.priority,\r\n        eventData.event_title,\r\n        new Date(),\r\n        new Date(),\r\n        eventData.event_description,\r\n        eventData.start_date,\r\n        eventData.end_date,\r\n        eventData.campaignTime.start_time,\r\n        eventData.campaignTime.end_time,\r\n      ],\r\n    }\r\n  );\r\n\r\n  return insertEvent;\r\n}\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIAA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,eAAeA,CAACG,SAAuB;;IAC3D,MAAMC,WAAW,GAAG,MAAM,IAAAH,OAAA,CAAAI,KAAK,EAC7B,eAAeJ,OAAA,CAAAK,UAAU;;qDAEwB,EACjD;MACEC,MAAM,EAAE,CACNJ,SAAS,CAACK,EAAE,EACZL,SAAS,CAACK,EAAE,EACZL,SAAS,CAACM,eAAe,EACzBN,SAAS,CAACO,QAAQ,EAClBP,SAAS,CAACQ,WAAW,EACrB,IAAIC,IAAI,EAAE,EACV,IAAIA,IAAI,EAAE,EACVT,SAAS,CAACU,iBAAiB,EAC3BV,SAAS,CAACW,UAAU,EACpBX,SAAS,CAACY,QAAQ,EAClBZ,SAAS,CAACa,YAAY,CAACC,UAAU,EACjCd,SAAS,CAACa,YAAY,CAACE,QAAQ;KAElC,CACF;IAED,OAAOd,WAAW;EACpB,CAAC","ignoreList":[]}},"mtime":1738463217893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addDoctor = addDoctor;\nexports.getDoctors = getDoctors;\nexports.getMostPopularDoctors = getMostPopularDoctors;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.doctorDetail = doctorDetail;\nexports.updateDoctor = updateDoctor;\nexports.logDoctorClick = logDoctorClick;\nexports.like = like;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorScheduleAvailability = doctorScheduleAvailability;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nfunction addDoctor(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctors\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, new Date(), new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction getDoctors() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const sql = `\n    SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialities s ON d.speciality_id = s.id\n  `;\n    const result = yield (0, mysql_1.query)(sql);\n    return result;\n  });\n}\nfunction getMostPopularDoctors() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(r.rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating,\n      (SELECT COUNT(r.rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS total_ratings\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialities s ON d.speciality_id = s.id\n    HAVING \n      total_ratings > 3\n    ORDER BY \n      average_rating DESC,\n      total_ratings DESC\n    LIMIT 10;\n    `);\n    return result;\n  });\n}\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT mobile FROM ${mysql_1.coreSchema}.doctors\n      where mobile=?\n      `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\n// export async function addDoctor(doctorInfo: DoctorsDTO): Promise<any> {\n//   const result = await query<RowDataPacket[]>(\n//     `INSERT INTO ${coreSchema}.doctors\n//         (name,gender,contact_info,degree,dateOfBirth,department,\n//          age,email,address,profileImage,specialization,joingin_date)\n//          VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n//     {\n//       values: [\n//         doctorInfo.name,\n//         doctorInfo.gender,\n//         doctorInfo.contact_info,\n//         doctorInfo.degree,\n//         doctorInfo.dateOfBirth,\n//         doctorInfo.department,\n//         doctorInfo.age,\n//         doctorInfo.email,\n//         doctorInfo.address,\n//         doctorInfo.profileImage,\n//         doctorInfo.specialty_name,\n//         new Date(),\n//       ],\n//     }\n//   );\n//   return result;\n// }\nfunction doctorDetail(doctorId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT \n      d.*,\n      COALESCE(ld.location, 'No Location') AS location,\n      (SELECT AVG(r.rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating,\n      s.name AS specialty_name,\n      c.comment AS comment\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialities s ON d.speciality_id = s.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.comments c ON d.id = c.id\n    WHERE \n      d.id = ?;\n    `, {\n      values: [doctorId]\n    });\n    return result;\n  });\n}\nfunction updateDoctor(doctorData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.doctors\n        SET name = ?\n        WHERE id = ?\n      `, {\n      values: [doctorData.first_name, doctorData.id]\n    });\n    return result;\n  });\n}\nfunction logDoctorClick(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const insertResult = yield (0, mysql_1.query)(`\n    INSERT INTO ${mysql_1.coreSchema}.doctor_clicks (id)\n    VALUES (?)\n    `, {\n      values: [id]\n    });\n    const updateResult = yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.doctors\n    SET click_count = click_count + 1\n    WHERE id = ?\n    `, {\n      values: [id]\n    });\n    return {\n      insertResult,\n      updateResult\n    };\n  });\n}\nfunction like(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const existingLike = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.likes \n     WHERE id = ? AND id = ? AND entity_type = ?`, {\n      values: [data.id, data.id, data.entity_type]\n    });\n    if (existingLike.length > 0) {\n      const changeStatusLike = yield (0, mysql_1.query)(` UPDATE ${mysql_1.coreSchema}.doctors\n        SET is_liked = 0\n        WHERE id = ? `, {\n        values: [data.id]\n      });\n      const deleteLike = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.likes \n      WHERE id = ? AND id = ? AND entity_type = ?`, {\n        values: [data.id, data.id, data.entity_type]\n      });\n      return {\n        deleteLike,\n        changeStatusLike\n      }; // return the result of deletion\n    } else {\n      const changeStatusLike = yield (0, mysql_1.query)(` UPDATE ${mysql_1.coreSchema}.doctors\n      SET is_liked = 1\n      WHERE id = ? `, {\n        values: [data.id]\n      });\n      // If the like doesn't exist, add it\n      const insertLike = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.likes (id, id, entity_type) \n       VALUES (?, ?, ?)`, {\n        values: [data.id, data.id, data.entity_type]\n      });\n      return {\n        insertLike,\n        changeStatusLike\n      }; // return the result of insertion\n    }\n  });\n}\nfunction addComment(comment) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.comments\n     (id, id, comment_text, rating)\n         VALUES (?, ?, ?, ?)`, {\n      values: [comment.id, comment.id, comment.comment_text, comment.rating]\n    });\n    return result;\n  });\n}\nfunction getSpecialties() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT *\n       FROM ${mysql_1.coreSchema}.specialties`);\n    return result;\n  });\n}\nfunction filterSpecialtyById(specialty) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n     SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialities s ON d.speciality_id = s.id\n\n    WHERE \n    s.id = ?;\n    `, {\n      values: [specialty]\n    });\n    return result;\n  });\n}\nfunction filterServicesById(serviceId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n   SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialities s ON d.speciality_id = s.id\n    JOIN \n      ${mysql_1.coreSchema}.services srv  ON srv.speciality_id = s.id\n    WHERE \n    srv.id = ?;\n    `, {\n      values: [serviceId]\n    });\n    return result;\n  });\n}\nfunction existingFeedback(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.reviews WHERE id = ? AND id =?`, {\n      values: [reviewData.id, reviewData.id]\n    });\n    return result;\n  });\n}\nfunction insertReviews(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.reviews\n  (id,\n    id,\n    comment,\n    recommendation,\n    rating,\n    professional_demeanor,\n    sufficient_time,\n    skill,\n    staff_behavior,\n    clinic_condition)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`, {\n      values: [reviewData.id, reviewData.id, reviewData.comment, reviewData.rating, reviewData.recommendation, reviewData.ratings.professional_demeanor, reviewData.ratings.sufficient_time, reviewData.ratings.skill, reviewData.ratings.staff_behavior, reviewData.ratings.clinic_condition]\n    });\n    return result;\n  });\n}\nfunction getReviews() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.reviews\n    `);\n    return result;\n  });\n}\nfunction doctorScheduleAvailability(id, ConsultationTypesAvailable) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT\n        ds.scheduleID,\n        ds.availableDate,\n        ds.ConsultationTypesAvailable\n    FROM\n      ${mysql_1.coreSchema}.doctor_schedules ds\n        WHERE\n        ds.id = ?\n        AND FIND_IN_SET(?, ds.ConsultationTypesAvailable) > 0\n    `, {\n      values: [id, ConsultationTypesAvailable]\n    });\n    return result;\n  });\n}\nfunction doctorScheduleTimeAvailability(scheduleID) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT \n       dat.availableTime,\n       dat.isBooked,\n       dat.timeID\n       FROM \n        ${mysql_1.coreSchema}.doctor_schedules ds\n      JOIN \n        ${mysql_1.coreSchema}.doctor_available_times dat\n      ON\n        ds.scheduleID = dat.scheduleID\n      WHERE \n        ds.scheduleID = ?;\n    `, {\n      values: [scheduleID]\n    });\n    return result;\n  });\n}\nfunction booked(timeID) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.doctor_available_times\n      SET isBooked = 1\n      WHERE timeID = ?;\n    `, {\n      values: [timeID]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWRkRG9jdG9yIiwiZ2V0RG9jdG9ycyIsImdldE1vc3RQb3B1bGFyRG9jdG9ycyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJkb2N0b3JEZXRhaWwiLCJ1cGRhdGVEb2N0b3IiLCJsb2dEb2N0b3JDbGljayIsImxpa2UiLCJhZGRDb21tZW50IiwiZ2V0U3BlY2lhbHRpZXMiLCJmaWx0ZXJTcGVjaWFsdHlCeUlkIiwiZmlsdGVyU2VydmljZXNCeUlkIiwiZXhpc3RpbmdGZWVkYmFjayIsImluc2VydFJldmlld3MiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHkiLCJkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkiLCJib29rZWQiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwidXVpZF8xIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiZmRQYXNzd29yZCIsInZhbGlkUGFzc3dvcmQiLCJkb2N0b3JTY2hlbWEiLCJ2YWxpZGF0ZVN5bmNBdCIsInNhbHRSb3VuZHMiLCJoYXNoZWRQYXNzd29yZCIsImRlZmF1bHQiLCJoYXNoIiwiZXJyb3IiLCJSZXNwb25zZUVycm9yIiwiVW5hdXRob3JpemVkIiwibmV3SWQiLCJ2NCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInRva2VuX3ZlcmlmeSIsInZlcmlmeV9jb2RlIiwicGhvbmUiLCJEYXRlIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJJbnRlcm5hbFNlcnZlciIsInNxbCIsIm1vYmlsZSIsImRvY3RvcklkIiwiZG9jdG9yRGF0YSIsImlkIiwiaW5zZXJ0UmVzdWx0IiwidXBkYXRlUmVzdWx0IiwiZXhpc3RpbmdMaWtlIiwiZW50aXR5X3R5cGUiLCJsZW5ndGgiLCJjaGFuZ2VTdGF0dXNMaWtlIiwiZGVsZXRlTGlrZSIsImluc2VydExpa2UiLCJjb21tZW50IiwiY29tbWVudF90ZXh0IiwicmF0aW5nIiwic3BlY2lhbHR5Iiwic2VydmljZUlkIiwicmV2aWV3RGF0YSIsInJlY29tbWVuZGF0aW9uIiwicmF0aW5ncyIsInByb2Zlc3Npb25hbF9kZW1lYW5vciIsInN1ZmZpY2llbnRfdGltZSIsInNraWxsIiwic3RhZmZfYmVoYXZpb3IiLCJjbGluaWNfY29uZGl0aW9uIiwiQ29uc3VsdGF0aW9uVHlwZXNBdmFpbGFibGUiLCJzY2hlZHVsZUlEIiwidGltZUlEIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQge1xyXG4gIENvbW1lbnRzRFRPLFxyXG4gIERvY3RvcnNEVE8sXHJcbiAgbGlrZURUTyxcclxuICBSZXZpZXdzRFRPLFxyXG59IGZyb20gXCIuLi8uLi9tb2RlbHMvZG9jdG9yc1wiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgZG9jdG9yU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hXCI7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZERvY3RvcihkYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YS5wYXNzd29yZDtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YS5wYXNzd29yZDtcclxuXHJcbiAgY29uc3QgZmRQYXNzd29yZCA9IHsgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCB9O1xyXG4gIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBkb2N0b3JTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGlmICh2YWxpZFBhc3N3b3JkLmVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJQYXNzd29yZCBpcyBpbnZhbGlkXCIpO1xyXG4gIH1cclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgICAgIChpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxlbWFpbCxwYXNzd29yZCx0b2tlbl92ZXJpZnksdmVyaWZ5X2NvZGUscGhvbmUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIG5ld0lkLFxyXG4gICAgICAgICAgZGF0YS5maXJzdF9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5sYXN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmVtYWlsLFxyXG4gICAgICAgICAgaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3RvcnMoKTogUHJvbWlzZTxEb2N0b3JzRFRPW10gfCBudWxsPiB7XHJcbiAgY29uc3Qgc3FsID0gYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICBkLiosIFxyXG4gICAgICBDT0FMRVNDRShsZC5sb2NhdGlvbiwgJ05vIExvY2F0aW9uJykgQVMgbG9jYXRpb24sXHJcbiAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcclxuICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5yYXRpbmdzIHIgXHJcbiAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcclxuICAgIEZST00gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0ubG9jYXRpb25zX2RvY3RvcnMgbGQgT04gZC5pZCA9IGxkLmlkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbGl0aWVzIHMgT04gZC5zcGVjaWFsaXR5X2lkID0gcy5pZFxyXG4gIGA7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oc3FsKTtcclxuICByZXR1cm4gcmVzdWx0IGFzIERvY3RvcnNEVE9bXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vc3RQb3B1bGFyRG9jdG9ycygpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIGQuKiwgXHJcbiAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcclxuICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAoU0VMRUNUIEFWRyhyLnJhdGluZykgXHJcbiAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByIFxyXG4gICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIGF2ZXJhZ2VfcmF0aW5nLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKHIucmF0aW5nKSBcclxuICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5yYXRpbmdzIHIgXHJcbiAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgdG90YWxfcmF0aW5nc1xyXG4gICAgRlJPTSBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5sb2NhdGlvbnNfZG9jdG9ycyBsZCBPTiBkLmlkID0gbGQuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsaXRpZXMgcyBPTiBkLnNwZWNpYWxpdHlfaWQgPSBzLmlkXHJcbiAgICBIQVZJTkcgXHJcbiAgICAgIHRvdGFsX3JhdGluZ3MgPiAzXHJcbiAgICBPUkRFUiBCWSBcclxuICAgICAgYXZlcmFnZV9yYXRpbmcgREVTQyxcclxuICAgICAgdG90YWxfcmF0aW5ncyBERVNDXHJcbiAgICBMSU1JVCAxMDtcclxuICAgIGBcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzKFxyXG4gIG1vYmlsZTogc3RyaW5nXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICAgIFNFTEVDVCBtb2JpbGUgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgd2hlcmUgbW9iaWxlPT9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbbW9iaWxlXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGREb2N0b3IoZG9jdG9ySW5mbzogRG9jdG9yc0RUTyk6IFByb21pc2U8YW55PiB7XHJcbi8vICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuLy8gICAgICAgICAobmFtZSxnZW5kZXIsY29udGFjdF9pbmZvLGRlZ3JlZSxkYXRlT2ZCaXJ0aCxkZXBhcnRtZW50LFxyXG4vLyAgICAgICAgICBhZ2UsZW1haWwsYWRkcmVzcyxwcm9maWxlSW1hZ2Usc3BlY2lhbGl6YXRpb24sam9pbmdpbl9kYXRlKVxyXG4vLyAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcclxuLy8gICAgIHtcclxuLy8gICAgICAgdmFsdWVzOiBbXHJcbi8vICAgICAgICAgZG9jdG9ySW5mby5uYW1lLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uZ2VuZGVyLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uY29udGFjdF9pbmZvLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uZGVncmVlLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uZGF0ZU9mQmlydGgsXHJcbi8vICAgICAgICAgZG9jdG9ySW5mby5kZXBhcnRtZW50LFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uYWdlLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uZW1haWwsXHJcbi8vICAgICAgICAgZG9jdG9ySW5mby5hZGRyZXNzLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8ucHJvZmlsZUltYWdlLFxyXG4vLyAgICAgICAgIGRvY3RvckluZm8uc3BlY2lhbHR5X25hbWUsXHJcbi8vICAgICAgICAgbmV3IERhdGUoKSxcclxuLy8gICAgICAgXSxcclxuLy8gICAgIH1cclxuLy8gICApO1xyXG4vLyAgIHJldHVybiByZXN1bHQ7XHJcbi8vIH1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb2N0b3JEZXRhaWwoZG9jdG9ySWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIGQuKixcclxuICAgICAgQ09BTEVTQ0UobGQubG9jYXRpb24sICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxyXG4gICAgICAoU0VMRUNUIEFWRyhyLnJhdGluZykgXHJcbiAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByIFxyXG4gICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIGF2ZXJhZ2VfcmF0aW5nLFxyXG4gICAgICBzLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXHJcbiAgICAgIGMuY29tbWVudCBBUyBjb21tZW50XHJcbiAgICBGUk9NIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmxvY2F0aW9uc19kb2N0b3JzIGxkIE9OIGQuaWQgPSBsZC5pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LnNwZWNpYWxpdGllcyBzIE9OIGQuc3BlY2lhbGl0eV9pZCA9IHMuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5jb21tZW50cyBjIE9OIGQuaWQgPSBjLmlkXHJcbiAgICBXSEVSRSBcclxuICAgICAgZC5pZCA9ID87XHJcbiAgICBgLFxyXG4gICAgeyB2YWx1ZXM6IFtkb2N0b3JJZF0gfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURvY3Rvcihkb2N0b3JEYXRhOiBEb2N0b3JzRFRPKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgICAgU0VUIG5hbWUgPSA/XHJcbiAgICAgICAgV0hFUkUgaWQgPSA/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RvY3RvckRhdGEuZmlyc3RfbmFtZSwgZG9jdG9yRGF0YS5pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nRG9jdG9yQ2xpY2soaWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgaW5zZXJ0UmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmRvY3Rvcl9jbGlja3MgKGlkKVxyXG4gICAgVkFMVUVTICg/KVxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgU0VUIGNsaWNrX2NvdW50ID0gY2xpY2tfY291bnQgKyAxXHJcbiAgICBXSEVSRSBpZCA9ID9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lkXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICByZXR1cm4geyBpbnNlcnRSZXN1bHQsIHVwZGF0ZVJlc3VsdCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlrZShkYXRhOiBsaWtlRFRPKSB7XHJcbiAgY29uc3QgZXhpc3RpbmdMaWtlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lmxpa2VzIFxyXG4gICAgIFdIRVJFIGlkID0gPyBBTkQgaWQgPSA/IEFORCBlbnRpdHlfdHlwZSA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmlkLCBkYXRhLmlkLCBkYXRhLmVudGl0eV90eXBlXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoZXhpc3RpbmdMaWtlLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IGNoYW5nZVN0YXR1c0xpa2UgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYCBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgICAgU0VUIGlzX2xpa2VkID0gMFxyXG4gICAgICAgIFdIRVJFIGlkID0gPyBgLFxyXG4gICAgICB7IHZhbHVlczogW2RhdGEuaWRdIH1cclxuICAgICk7XHJcbiAgICBjb25zdCBkZWxldGVMaWtlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9Lmxpa2VzIFxyXG4gICAgICBXSEVSRSBpZCA9ID8gQU5EIGlkID0gPyBBTkQgZW50aXR5X3R5cGUgPSA/YCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2RhdGEuaWQsIGRhdGEuaWQsIGRhdGEuZW50aXR5X3R5cGVdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHsgZGVsZXRlTGlrZSwgY2hhbmdlU3RhdHVzTGlrZSB9OyAvLyByZXR1cm4gdGhlIHJlc3VsdCBvZiBkZWxldGlvblxyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBjaGFuZ2VTdGF0dXNMaWtlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGAgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgICBTRVQgaXNfbGlrZWQgPSAxXHJcbiAgICAgIFdIRVJFIGlkID0gPyBgLFxyXG4gICAgICB7IHZhbHVlczogW2RhdGEuaWRdIH1cclxuICAgICk7XHJcbiAgICAvLyBJZiB0aGUgbGlrZSBkb2Vzbid0IGV4aXN0LCBhZGQgaXRcclxuICAgIGNvbnN0IGluc2VydExpa2UgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ubGlrZXMgKGlkLCBpZCwgZW50aXR5X3R5cGUpIFxyXG4gICAgICAgVkFMVUVTICg/LCA/LCA/KWAsXHJcbiAgICAgIHsgdmFsdWVzOiBbZGF0YS5pZCwgZGF0YS5pZCwgZGF0YS5lbnRpdHlfdHlwZV0gfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7IGluc2VydExpa2UsIGNoYW5nZVN0YXR1c0xpa2UgfTsgLy8gcmV0dXJuIHRoZSByZXN1bHQgb2YgaW5zZXJ0aW9uXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ29tbWVudChjb21tZW50OiBDb21tZW50c0RUTykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uY29tbWVudHNcclxuICAgICAoaWQsIGlkLCBjb21tZW50X3RleHQsIHJhdGluZylcclxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2NvbW1lbnQuaWQsIGNvbW1lbnQuaWQsIGNvbW1lbnQuY29tbWVudF90ZXh0LCBjb21tZW50LnJhdGluZ10sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3BlY2lhbHRpZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKlxyXG4gICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnNwZWNpYWx0aWVzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5OiBhbnkpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICBTRUxFQ1QgXHJcbiAgICAgIGQuKiwgXHJcbiAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcclxuICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIFxyXG4gICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgciBcclxuICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZ1xyXG4gICAgRlJPTSBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5sb2NhdGlvbnNfZG9jdG9ycyBsZCBPTiBkLmlkID0gbGQuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsaXRpZXMgcyBPTiBkLnNwZWNpYWxpdHlfaWQgPSBzLmlkXHJcblxyXG4gICAgV0hFUkUgXHJcbiAgICBzLmlkID0gPztcclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3NwZWNpYWx0eV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgU0VMRUNUIFxyXG4gICAgICBkLiosIFxyXG4gICAgICBDT0FMRVNDRShsZC5sb2NhdGlvbiwgJ05vIExvY2F0aW9uJykgQVMgbG9jYXRpb24sXHJcbiAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcclxuICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5yYXRpbmdzIHIgXHJcbiAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcclxuICAgIEZST00gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0ubG9jYXRpb25zX2RvY3RvcnMgbGQgT04gZC5pZCA9IGxkLmlkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbGl0aWVzIHMgT04gZC5zcGVjaWFsaXR5X2lkID0gcy5pZFxyXG4gICAgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zZXJ2aWNlcyBzcnYgIE9OIHNydi5zcGVjaWFsaXR5X2lkID0gcy5pZFxyXG4gICAgV0hFUkUgXHJcbiAgICBzcnYuaWQgPSA/O1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbc2VydmljZUlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGlzdGluZ0ZlZWRiYWNrKHJldmlld0RhdGE6IFJldmlld3NEVE8pIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0ucmV2aWV3cyBXSEVSRSBpZCA9ID8gQU5EIGlkID0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbcmV2aWV3RGF0YS5pZCwgcmV2aWV3RGF0YS5pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhOiBSZXZpZXdzRFRPKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5yZXZpZXdzXHJcbiAgKGlkLFxyXG4gICAgaWQsXHJcbiAgICBjb21tZW50LFxyXG4gICAgcmVjb21tZW5kYXRpb24sXHJcbiAgICByYXRpbmcsXHJcbiAgICBwcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICBzdWZmaWNpZW50X3RpbWUsXHJcbiAgICBza2lsbCxcclxuICAgIHN0YWZmX2JlaGF2aW9yLFxyXG4gICAgY2xpbmljX2NvbmRpdGlvbilcclxuICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgcmV2aWV3RGF0YS5pZCxcclxuICAgICAgICByZXZpZXdEYXRhLmlkLFxyXG4gICAgICAgIHJldmlld0RhdGEuY29tbWVudCxcclxuICAgICAgICByZXZpZXdEYXRhLnJhdGluZyxcclxuICAgICAgICByZXZpZXdEYXRhLnJlY29tbWVuZGF0aW9uLFxyXG4gICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5wcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnN1ZmZpY2llbnRfdGltZSxcclxuICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3Muc2tpbGwsXHJcbiAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnN0YWZmX2JlaGF2aW9yLFxyXG4gICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5jbGluaWNfY29uZGl0aW9uLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJldmlld3MoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5yZXZpZXdzXHJcbiAgICBgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2NoZWR1bGVBdmFpbGFiaWxpdHkoXHJcbiAgaWQ6IG51bWJlcixcclxuICBDb25zdWx0YXRpb25UeXBlc0F2YWlsYWJsZTogc3RyaW5nXHJcbikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUXHJcbiAgICAgICAgZHMuc2NoZWR1bGVJRCxcclxuICAgICAgICBkcy5hdmFpbGFibGVEYXRlLFxyXG4gICAgICAgIGRzLkNvbnN1bHRhdGlvblR5cGVzQXZhaWxhYmxlXHJcbiAgICBGUk9NXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX3NjaGVkdWxlcyBkc1xyXG4gICAgICAgIFdIRVJFXHJcbiAgICAgICAgZHMuaWQgPSA/XHJcbiAgICAgICAgQU5EIEZJTkRfSU5fU0VUKD8sIGRzLkNvbnN1bHRhdGlvblR5cGVzQXZhaWxhYmxlKSA+IDBcclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lkLCBDb25zdWx0YXRpb25UeXBlc0F2YWlsYWJsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KHNjaGVkdWxlSUQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgICBkYXQuYXZhaWxhYmxlVGltZSxcclxuICAgICAgIGRhdC5pc0Jvb2tlZCxcclxuICAgICAgIGRhdC50aW1lSURcclxuICAgICAgIEZST00gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3Jfc2NoZWR1bGVzIGRzXHJcbiAgICAgIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfYXZhaWxhYmxlX3RpbWVzIGRhdFxyXG4gICAgICBPTlxyXG4gICAgICAgIGRzLnNjaGVkdWxlSUQgPSBkYXQuc2NoZWR1bGVJRFxyXG4gICAgICBXSEVSRSBcclxuICAgICAgICBkcy5zY2hlZHVsZUlEID0gPztcclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3NjaGVkdWxlSURdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJvb2tlZCh0aW1lSUQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yX2F2YWlsYWJsZV90aW1lc1xyXG4gICAgICBTRVQgaXNCb29rZWQgPSAxXHJcbiAgICAgIFdIRVJFIHRpbWVJRCA9ID87XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFt0aW1lSURdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQUEsT0FBQSxDQUFBQyxTQUFBLEdBQUFBLFNBQUE7QUE0Q0FELE9BQUEsQ0FBQUUsVUFBQSxHQUFBQSxVQUFBO0FBcUJBRixPQUFBLENBQUFHLHFCQUFBLEdBQUFBLHFCQUFBO0FBOEJBSCxPQUFBLENBQUFJLDRCQUFBLEdBQUFBLDRCQUFBO0FBeUNBSixPQUFBLENBQUFLLFlBQUEsR0FBQUEsWUFBQTtBQTJCQUwsT0FBQSxDQUFBTSxZQUFBLEdBQUFBLFlBQUE7QUFjQU4sT0FBQSxDQUFBTyxjQUFBLEdBQUFBLGNBQUE7QUF5QkFQLE9BQUEsQ0FBQVEsSUFBQSxHQUFBQSxJQUFBO0FBeUNBUixPQUFBLENBQUFTLFVBQUEsR0FBQUEsVUFBQTtBQVlBVCxPQUFBLENBQUFVLGNBQUEsR0FBQUEsY0FBQTtBQVFBVixPQUFBLENBQUFXLG1CQUFBLEdBQUFBLG1CQUFBO0FBMEJBWCxPQUFBLENBQUFZLGtCQUFBLEdBQUFBLGtCQUFBO0FBNEJBWixPQUFBLENBQUFhLGdCQUFBLEdBQUFBLGdCQUFBO0FBVUFiLE9BQUEsQ0FBQWMsYUFBQSxHQUFBQSxhQUFBO0FBZ0NBZCxPQUFBLENBQUFlLFVBQUEsR0FBQUEsVUFBQTtBQVNBZixPQUFBLENBQUFnQiwwQkFBQSxHQUFBQSwwQkFBQTtBQXVCQWhCLE9BQUEsQ0FBQWlCLDhCQUFBLEdBQUFBLDhCQUFBO0FBdUJBakIsT0FBQSxDQUFBa0IsTUFBQSxHQUFBQSxNQUFBO0FBMWFBLE1BQUFDLE9BQUEsR0FB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VSxDQUFDZCxFQUFFLEVBQ2JjLFVBQVUsQ0FBQ0wsT0FBTyxFQUNsQkssVUFBVSxDQUFDSCxNQUFNLEVBQ2pCRyxVQUFVLENBQUNDLGNBQWMsRUFDekJELFVBQVUsQ0FBQ0UsT0FBTyxDQUFDQyxxQkFBcUIsRUFDeENILFVBQVUsQ0FBQ0UsT0FBTyxDQUFDRSxlQUFlLEVBQ2xDSixVQUFVLENBQUNFLE9BQU8sQ0FBQ0csS0FBSyxFQUN4QkwsVUFBVSxDQUFDRSxPQUFPLENBQUNJLGNBQWMsRUFDakNOLFVBQVUsQ0FBQ0UsT0FBTyxDQUFDSyxnQkFBZ0I7S0FFdEMsQ0FDRjtJQUNELE9BQU92QyxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQjNCLFVBQVVBLENBQUE7O0lBQzlCLE1BQU0yQixNQUFNLEdBQUcsTUFBTSxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUN4QjtvQkFDZ0J4QixPQUFBLENBQUF5QixVQUFVO0tBQ3pCLENBQ0Y7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQjFCLDBCQUEwQkEsQ0FDOUM0QyxFQUFVLEVBQ1ZzQiwwQkFBa0M7O0lBRWxDLE1BQU14QyxNQUFNLEdBQUcsTUFBTSxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUN4Qjs7Ozs7O1FBTUl4QixPQUFBLENBQUF5QixVQUFVOzs7O0tBSWIsRUFDRDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ2UsRUFBRSxFQUFFc0IsMEJBQTBCO0tBQ3hDLENBQ0Y7SUFDRCxPQUFPeEMsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0J6Qiw4QkFBOEJBLENBQUNrRSxVQUFrQjs7SUFDckUsTUFBTXpDLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCOzs7Ozs7VUFNTXhCLE9BQUEsQ0FBQXlCLFVBQVU7O1VBRVZ6QixPQUFBLENBQUF5QixVQUFVOzs7OztLQUtmLEVBQ0Q7TUFDRUMsTUFBTSxFQUFFLENBQUNzQyxVQUFVO0tBQ3BCLENBQ0Y7SUFDRCxPQUFPekMsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0J4QixNQUFNQSxDQUFDa0UsTUFBYzs7SUFDekMsTUFBTTFDLE1BQU0sR0FBRyxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUNsQjthQUNTeEIsT0FBQSxDQUFBeUIsVUFBVTs7O0tBR2xCLEVBQ0Q7TUFDRUMsTUFBTSxFQUFFLENBQUN1QyxNQUFNO0tBQ2hCLENBQ0Y7SUFDRCxPQUFPMUMsTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","addDoctor","getDoctors","getMostPopularDoctors","checkDoctorPhoneNumberExists","doctorDetail","updateDoctor","logDoctorClick","like","addComment","getSpecialties","filterSpecialtyById","filterServicesById","existingFeedback","insertReviews","getReviews","doctorScheduleAvailability","doctorScheduleTimeAvailability","booked","mysql_1","require","response_error_1","schema_1","bcrypt_1","__importDefault","uuid_1","data","password","confirmPassword","fdPassword","validPassword","doctorSchema","validateSyncAt","saltRounds","hashedPassword","default","hash","error","ResponseError","Unauthorized","newId","v4","result","query","coreSchema","values","first_name","last_name","email","token_verify","verify_code","phone","Date","console","message","InternalServer","sql","mobile","doctorId","doctorData","id","insertResult","updateResult","existingLike","entity_type","length","changeStatusLike","deleteLike","insertLike","comment","comment_text","rating","specialty","serviceId","reviewData","recommendation","ratings","professional_demeanor","sufficient_time","skill","staff_behavior","clinic_condition","ConsultationTypesAvailable","scheduleID","timeID"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { doctorSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport async function addDoctor(data: DoctorsDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = doctorSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.doctors\r\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function getDoctors(): Promise<DoctorsDTO[] | null> {\r\n  const sql = `\r\n    SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialities s ON d.speciality_id = s.id\r\n  `;\r\n\r\n  const result = await query<RowDataPacket[]>(sql);\r\n  return result as DoctorsDTO[];\r\n}\r\n\r\nexport async function getMostPopularDoctors(): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(r.rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating,\r\n      (SELECT COUNT(r.rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS total_ratings\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialities s ON d.speciality_id = s.id\r\n    HAVING \r\n      total_ratings > 3\r\n    ORDER BY \r\n      average_rating DESC,\r\n      total_ratings DESC\r\n    LIMIT 10;\r\n    `\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function checkDoctorPhoneNumberExists(\r\n  mobile: string\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      SELECT mobile FROM ${coreSchema}.doctors\r\n      where mobile=?\r\n      `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function addDoctor(doctorInfo: DoctorsDTO): Promise<any> {\r\n//   const result = await query<RowDataPacket[]>(\r\n//     `INSERT INTO ${coreSchema}.doctors\r\n//         (name,gender,contact_info,degree,dateOfBirth,department,\r\n//          age,email,address,profileImage,specialization,joingin_date)\r\n//          VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n//     {\r\n//       values: [\r\n//         doctorInfo.name,\r\n//         doctorInfo.gender,\r\n//         doctorInfo.contact_info,\r\n//         doctorInfo.degree,\r\n//         doctorInfo.dateOfBirth,\r\n//         doctorInfo.department,\r\n//         doctorInfo.age,\r\n//         doctorInfo.email,\r\n//         doctorInfo.address,\r\n//         doctorInfo.profileImage,\r\n//         doctorInfo.specialty_name,\r\n//         new Date(),\r\n//       ],\r\n//     }\r\n//   );\r\n//   return result;\r\n// }\r\n\r\nexport async function doctorDetail(doctorId: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT \r\n      d.*,\r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      (SELECT AVG(r.rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating,\r\n      s.name AS specialty_name,\r\n      c.comment AS comment\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialities s ON d.speciality_id = s.id\r\n    LEFT JOIN \r\n      ${coreSchema}.comments c ON d.id = c.id\r\n    WHERE \r\n      d.id = ?;\r\n    `,\r\n    { values: [doctorId] }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateDoctor(doctorData: DoctorsDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n        UPDATE ${coreSchema}.doctors\r\n        SET name = ?\r\n        WHERE id = ?\r\n      `,\r\n    {\r\n      values: [doctorData.first_name, doctorData.id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function logDoctorClick(id: number): Promise<any> {\r\n  const insertResult = await query<RowDataPacket>(\r\n    `\r\n    INSERT INTO ${coreSchema}.doctor_clicks (id)\r\n    VALUES (?)\r\n    `,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n\r\n  const updateResult = await query<RowDataPacket>(\r\n    `\r\n    UPDATE ${coreSchema}.doctors\r\n    SET click_count = click_count + 1\r\n    WHERE id = ?\r\n    `,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n\r\n  return { insertResult, updateResult };\r\n}\r\n\r\nexport async function like(data: likeDTO) {\r\n  const existingLike = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.likes \r\n     WHERE id = ? AND id = ? AND entity_type = ?`,\r\n    {\r\n      values: [data.id, data.id, data.entity_type],\r\n    }\r\n  );\r\n\r\n  if (existingLike.length > 0) {\r\n    const changeStatusLike = await query<RowDataPacket>(\r\n      ` UPDATE ${coreSchema}.doctors\r\n        SET is_liked = 0\r\n        WHERE id = ? `,\r\n      { values: [data.id] }\r\n    );\r\n    const deleteLike = await query<RowDataPacket>(\r\n      `DELETE FROM ${coreSchema}.likes \r\n      WHERE id = ? AND id = ? AND entity_type = ?`,\r\n      {\r\n        values: [data.id, data.id, data.entity_type],\r\n      }\r\n    );\r\n    return { deleteLike, changeStatusLike }; // return the result of deletion\r\n  } else {\r\n    const changeStatusLike = await query<RowDataPacket>(\r\n      ` UPDATE ${coreSchema}.doctors\r\n      SET is_liked = 1\r\n      WHERE id = ? `,\r\n      { values: [data.id] }\r\n    );\r\n    // If the like doesn't exist, add it\r\n    const insertLike = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.likes (id, id, entity_type) \r\n       VALUES (?, ?, ?)`,\r\n      { values: [data.id, data.id, data.entity_type] }\r\n    );\r\n    return { insertLike, changeStatusLike }; // return the result of insertion\r\n  }\r\n}\r\n\r\nexport async function addComment(comment: CommentsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.comments\r\n     (id, id, comment_text, rating)\r\n         VALUES (?, ?, ?, ?)`,\r\n    {\r\n      values: [comment.id, comment.id, comment.comment_text, comment.rating],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getSpecialties() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT *\r\n       FROM ${coreSchema}.specialties`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function filterSpecialtyById(specialty: any) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n     SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialities s ON d.speciality_id = s.id\r\n\r\n    WHERE \r\n    s.id = ?;\r\n    `,\r\n    {\r\n      values: [specialty],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function filterServicesById(serviceId: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n   SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialities s ON d.speciality_id = s.id\r\n    JOIN \r\n      ${coreSchema}.services srv  ON srv.speciality_id = s.id\r\n    WHERE \r\n    srv.id = ?;\r\n    `,\r\n    {\r\n      values: [serviceId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function existingFeedback(reviewData: ReviewsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.reviews WHERE id = ? AND id =?`,\r\n    {\r\n      values: [reviewData.id, reviewData.id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function insertReviews(reviewData: ReviewsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.reviews\r\n  (id,\r\n    id,\r\n    comment,\r\n    recommendation,\r\n    rating,\r\n    professional_demeanor,\r\n    sufficient_time,\r\n    skill,\r\n    staff_behavior,\r\n    clinic_condition)\r\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`,\r\n    {\r\n      values: [\r\n        reviewData.id,\r\n        reviewData.id,\r\n        reviewData.comment,\r\n        reviewData.rating,\r\n        reviewData.recommendation,\r\n        reviewData.ratings.professional_demeanor,\r\n        reviewData.ratings.sufficient_time,\r\n        reviewData.ratings.skill,\r\n        reviewData.ratings.staff_behavior,\r\n        reviewData.ratings.clinic_condition,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getReviews() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM ${coreSchema}.reviews\r\n    `\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function doctorScheduleAvailability(\r\n  id: number,\r\n  ConsultationTypesAvailable: string\r\n) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT\r\n        ds.scheduleID,\r\n        ds.availableDate,\r\n        ds.ConsultationTypesAvailable\r\n    FROM\r\n      ${coreSchema}.doctor_schedules ds\r\n        WHERE\r\n        ds.id = ?\r\n        AND FIND_IN_SET(?, ds.ConsultationTypesAvailable) > 0\r\n    `,\r\n    {\r\n      values: [id, ConsultationTypesAvailable],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function doctorScheduleTimeAvailability(scheduleID: number) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT \r\n       dat.availableTime,\r\n       dat.isBooked,\r\n       dat.timeID\r\n       FROM \r\n        ${coreSchema}.doctor_schedules ds\r\n      JOIN \r\n        ${coreSchema}.doctor_available_times dat\r\n      ON\r\n        ds.scheduleID = dat.scheduleID\r\n      WHERE \r\n        ds.scheduleID = ?;\r\n    `,\r\n    {\r\n      values: [scheduleID],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function booked(timeID: number) {\r\n  const result = query<RowDataPacket>(\r\n    `\r\n    UPDATE ${coreSchema}.doctor_available_times\r\n      SET isBooked = 1\r\n      WHERE timeID = ?;\r\n    `,\r\n    {\r\n      values: [timeID],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738463217914},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkUserExist = checkUserExist;\nexports.confirmEmail = confirmEmail;\nexports.getOTP = getOTP;\nexports.comparePassword = comparePassword;\nexports.updateProfileUser = updateProfileUser;\nexports.checkNickName = checkNickName;\nexports.updateUserVerifyCode = updateUserVerifyCode;\nexports.changePassword = changePassword;\nexports.getUserInfo = getUserInfo;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT id,email FROM  ${mysql_1.coreSchema}.users\n        WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT * \n      FROM ${mysql_1.coreSchema}.users\n      WHERE email=? AND deletedAt IS NULL\n      `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n          UPDATE ${mysql_1.coreSchema}.users\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\n          WHERE email =?\n          `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\n      WHERE email=?\n    `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nfunction comparePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT password FROM ${mysql_1.coreSchema}.users\n    WHERE email=?\n    `, {\n      values: [data]\n    });\n    return result;\n  });\n}\nfunction updateProfileUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Perform the update query\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET \n        firstName = ?,\n        lastName = ?,\n        national_code = ?,\n        dateOfBirth = ?,\n        gender = ?,\n        city = ?,\n        phoneNumber = ?,\n        verify_code = ?,\n        tokenVerify = ?\n      WHERE id = ?;\n    `, {\n      values: [data.firstName, data.lastName, data.national_code, data.dateOfBirth, data.gender, data.city, data.phoneNumber, data.verify_code, data.tokenVerify, data.id]\n    });\n    // Fetch the updated user profile\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE id = ?`, {\n      values: [data.id]\n    });\n    return result[0]; // Assuming result is an array of rows\n  });\n}\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users`);\n    return getData;\n  });\n}\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET verify_code=?,updatedAt=?\n      WHERE id=?\n      `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n        SELECT id,email,verify_code\n        FROM ${mysql_1.coreSchema}.users\n        WHERE id=?\n        `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nfunction changePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      newPassword\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      newPassword,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET password=?,updatedAt=?\n      WHERE email=?\n      `, {\n      values: [hash, new Date(), data.email]\n    });\n    return result;\n  });\n}\n// export async function getUserInfo(email: string) {\n//   const data = await query<RowDataPacket[]>(\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\n//     {\n//       values: [email],\n//     }\n//   );\n//   if (data) return data;\n// }\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`\n     SELECT \n       u.*, \n       c.comment, \n       c.created_at AS comment_created_at\n     FROM ${mysql_1.coreSchema}.users u\n     LEFT JOIN \n     ${mysql_1.coreSchema}.comments c\n     ON \n     u.id = c.id\n     WHERE \n     u.email =?\n     LIMIT 1;\n\n    `, {\n      values: [email]\n    });\n    if (!data || data.length === 0) {\n      return null; // Return null if no data is found\n    }\n    const userMap = new Map();\n    data.forEach(row => {\n      if (!userMap.has(row.id)) {\n        userMap.set(row.id, Object.assign(Object.assign({}, data), {\n          comments: []\n        }));\n      }\n      if (row.comment_text) {\n        userMap.get(row.id).comments.push({\n          text: row.comment_text,\n          createdAt: row.comment_created_at\n        });\n      }\n    });\n    return Array.from(userMap.values());\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tVc2VyRXhpc3QiLCJjb25maXJtRW1haWwiLCJnZXRPVFAiLCJjb21wYXJlUGFzc3dvcmQiLCJ1cGRhdGVQcm9maWxlVXNlciIsImNoZWNrTmlja05hbWUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImNoYW5nZVBhc3N3b3JkIiwiZ2V0VXNlckluZm8iLCJteXNxbF8xIiwicmVxdWlyZSIsInNjaGVtYV8xIiwiYmNyeXB0XzEiLCJfX2ltcG9ydERlZmF1bHQiLCJlbWFpbCIsInVzZXIiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJkYXRhIiwicmVzdWx0IiwibGVuZ3RoIiwiaXNTdWNjZXNzZnVsbCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsIkRhdGUiLCJ2ZXJpZnlfY29kZSIsImNvZGUiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsInRva2VuVmVyaWZ5IiwidXBkYXRlRGF0YSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibmF0aW9uYWxfY29kZSIsImRhdGVPZkJpcnRoIiwiZ2VuZGVyIiwiY2l0eSIsInBob25lTnVtYmVyIiwiaWQiLCJnZXREYXRhIiwidXNlcklkIiwibmV3Q29kZSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiZmRQYXNzd29yZCIsInZhbGlkUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJkZWZhdWx0IiwiaGFzaFN5bmMiLCJ1c2VyTWFwIiwiTWFwIiwiZm9yRWFjaCIsInJvdyIsImhhcyIsInNldCIsIk9iamVjdCIsImFzc2lnbiIsImNvbW1lbnRzIiwiY29tbWVudF90ZXh0IiwiZ2V0IiwicHVzaCIsInRleHQiLCJjcmVhdGVkQXQiLCJjb21tZW50X2NyZWF0ZWRfYXQiLCJBcnJheSIsImZyb20iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnksIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcbmltcG9ydCB7IENvbmZpcm1FbWFpbCB9IGZyb20gXCIuLi8uLi9tb2RlbHMvYXV0aFwiO1xyXG5pbXBvcnQgeyBBcHBSZXNwb25zZSB9IGZyb20gXCIuLi8uLi90eXBlcy9yZXNwb25zZS5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgIENyZWF0ZVVzZXIsIFVzZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXMvdXNlclwiO1xyXG5pbXBvcnQgeyBjcmVhdGVQYXNzd29yZFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1VzZXJFeGlzdChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxSb3dEYXRhUGFja2V0W10+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgaWQsZW1haWwgRlJPTSAgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICAgIFdIRVJFIGVtYWlsPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1FbWFpbChkYXRhOiBDb25maXJtRW1haWwpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgICBTRUxFQ1QgKiBcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFdIRVJFIGVtYWlsPT8gQU5EIGRlbGV0ZWRBdCBJUyBOVUxMXHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHJlc3VsdC5sZW5ndGggPCAxKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZmFsc2UsXHJcbiAgICAgIHN0YXR1czogMSxcclxuICAgICAgbWVzc2FnZTogXCJ1c2VyIG5vdCBmb3VuZCFcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgY29uc3QgdXNlciA9IHJlc3VsdFswXSBhcyBVc2VyO1xyXG4gIGlmICh1c2VyLmVtYWlsICE9PSBkYXRhLmVtYWlsKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZmFsc2UsXHJcbiAgICAgIHN0YXR1czogMSxcclxuICAgICAgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgY29ycmVjdFwiLFxyXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICBpZiAodXNlci5lbWFpbENvbmZpcm1lZCkge1xyXG4gICAgaWYgKHVzZXIuc2lnbnVwU3RhdHVzID09PSAxKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFxyXG4gICAgICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICAgIFNFVCBzaWdudXBTdGF0dXM9PyxlbWFpbENvbmZpcm1lZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgICAgICBXSEVSRSBlbWFpbCA9P1xyXG4gICAgICAgICAgYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZXM6IFsxLCAxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiBcImVtYWlsIGFscmVhZHkgY29uZmlybWVkXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIH1cclxuICBpZiAodXNlci52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSlcclxuICAgIHJldHVybiB7IHN0YXR1czogZmFsc2UsIG1lc3NhZ2U6IFwiY29kZSBpcyBub3QgY29ycmVjdFwiLCBjb2RlOiA0MDAgfTtcclxuICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgZW1haWxDb25maXJtZWQ9MSwgc2lnbnVwU3RhdHVzPTIsdXBkYXRlZEF0PT9cclxuICAgICAgV0hFUkUgZW1haWw9P1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgIHNob3dUb1VzZXI6IHRydWUsXHJcbiAgICBtZXNzYWdlQ29kZTogXCJNU0dfMDFcIixcclxuICAgIG1lc3NhZ2VLaW5kOiAxLFxyXG4gICAgbWVzc2FnZTogXCJlbWFpbCBjb25maXJtZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgfSBhcyBBcHBSZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9UUChlbWFpbDogYW55LCB0b2tlblZlcmlmeTogYW55KSB7XHJcbiAgY29uc3QgdXBkYXRlRGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgVVBEQVRFICAke2NvcmVTY2hlbWF9LnVzZXJzIFNFVCB2ZXJpZnlfY29kZT0/IFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3Rva2VuVmVyaWZ5LCBlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdFswXSBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcGFyZVBhc3N3b3JkKGRhdGE6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCBwYXNzd29yZCBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGVtYWlsPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGFdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVVc2VyKGRhdGE6IFVzZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZSBxdWVyeVxyXG4gIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgXHJcbiAgICAgICAgZmlyc3ROYW1lID0gPyxcclxuICAgICAgICBsYXN0TmFtZSA9ID8sXHJcbiAgICAgICAgbmF0aW9uYWxfY29kZSA9ID8sXHJcbiAgICAgICAgZGF0ZU9mQmlydGggPSA/LFxyXG4gICAgICAgIGdlbmRlciA9ID8sXHJcbiAgICAgICAgY2l0eSA9ID8sXHJcbiAgICAgICAgcGhvbmVOdW1iZXIgPSA/LFxyXG4gICAgICAgIHZlcmlmeV9jb2RlID0gPyxcclxuICAgICAgICB0b2tlblZlcmlmeSA9ID9cclxuICAgICAgV0hFUkUgaWQgPSA/O1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBkYXRhLm5hdGlvbmFsX2NvZGUsXHJcbiAgICAgICAgZGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBkYXRhLmdlbmRlcixcclxuICAgICAgICBkYXRhLmNpdHksXHJcbiAgICAgICAgZGF0YS5waG9uZU51bWJlcixcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIGRhdGEudG9rZW5WZXJpZnksXHJcbiAgICAgICAgZGF0YS5pZCxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICAvLyBGZXRjaCB0aGUgdXBkYXRlZCB1c2VyIHByb2ZpbGVcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YS5pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdFswXTsgLy8gQXNzdW1pbmcgcmVzdWx0IGlzIGFuIGFycmF5IG9mIHJvd3NcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUoKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCBnZXREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc2ApO1xyXG4gIHJldHVybiBnZXREYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgdmVyaWZ5X2NvZGU9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICBXSEVSRSBpZD0/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgICBTRUxFQ1QgaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBpZD0/XHJcbiAgICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdXNlcklkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyWzBdIGFzIENyZWF0ZVVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChkYXRhOiBhbnkpIHtcclxuICBjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlUGFzc3dvcmRTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFNFVCBwYXNzd29yZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaGFzaCwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4vLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgIHtcclxuLy8gICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4vLyAgICAgfVxyXG4vLyAgICk7XHJcbi8vICAgaWYgKGRhdGEpIHJldHVybiBkYXRhO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCBcclxuICAgICAgIHUuKiwgXHJcbiAgICAgICBjLmNvbW1lbnQsIFxyXG4gICAgICAgYy5jcmVhdGVkX2F0IEFTIGNvbW1lbnRfY3JlYXRlZF9hdFxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyB1XHJcbiAgICAgTEVGVCBKT0lOIFxyXG4gICAgICR7Y29yZVNjaGVtYX0uY29tbWVudHMgY1xyXG4gICAgIE9OIFxyXG4gICAgIHUuaWQgPSBjLmlkXHJcbiAgICAgV0hFUkUgXHJcbiAgICAgdS5lbWFpbCA9P1xyXG4gICAgIExJTUlUIDE7XHJcblxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIGRhdGEgaXMgZm91bmRcclxuICB9XHJcblxyXG4gIGNvbnN0IHVzZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xyXG5cclxuICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgaWYgKCF1c2VyTWFwLmhhcyhyb3cuaWQpKSB7XHJcbiAgICAgIHVzZXJNYXAuc2V0KHJvdy5pZCwge1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93LmNvbW1lbnRfdGV4dCkge1xyXG4gICAgICB1c2VyTWFwLmdldChyb3cuaWQpLmNvbW1lbnRzLnB1c2goe1xyXG4gICAgICAgIHRleHQ6IHJvdy5jb21tZW50X3RleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY29tbWVudF9jcmVhdGVkX2F0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbSh1c2VyTWFwLnZhbHVlcygpKTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQUEsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFXQUQsT0FBQSxDQUFBRSxZQUFBLEdBQUFBLFlBQUE7QUErREFGLE9BQUEsQ0FBQUcsTUFBQSxHQUFBQSxNQUFBO0FBaUJBSCxPQUFBLENBQUFJLGVBQUEsR0FBQUEsZUFBQTtBQWFBSixPQUFBLENBQUFLLGlCQUFBLEdBQUFBLGlCQUFBO0FBNENBTCxPQUFBLENBQUFNLGFBQUEsR0FBQUEsYUFBQTtBQUtBTixPQUFBLENBQUFPLG9CQUFBLEdBQUFBLG9CQUFBO0FBd0JBUCxPQUFBLENBQUFRLGNBQUEsR0FBQUEsY0FBQTtBQWtDQVIsT0FBQSxDQUFBUyxXQUFBLEdBQUFBLFdBQUE7QUExTkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBSUEsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBQyxlQUFBLENBQUFILE9BQUE7QUFFQSxTQUFzQlYsY0FBY0EsQ0FBQ2MsS0FBYTs7SUFDaEQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQU4sT0FBQSxDQUFBTyxLQUFLLEVBQ3RCLHlCQUF5QlAsT0FBQSxDQUFBUSxVQUFVO3NCQUNqQixFQUNsQjtNQUNFQyxNQUFNLEVBQUUsQ0FBQ0osS0FBSztLQUNmLENBQ0Y7SUFDRCxPQUFPQyxJQUFJO0VBQ2IsQ0FBQzs7QUFFRCxTQUFzQmQsWUFBWUEsQ0FBQ2tCLElBQWtCOztJQUNuRCxNQUFNQyxNQUFNLEdBQUcsTUFBTSxJQUFBWCxPQUFBLENBQUFPLEtBQUssRUFDeEI7O2FBRVNQLE9BQUEsQ0FBQVEsVUFBVTs7T0FFaEIsRUFDSDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDTCxLQUFLO0tBQ3BCLENBQ0Y7SUFDRCxJQUFJTSxNQUFNLENBQUNDLE1BQU0sR0FBRyxDQUFDLEVBQ25CLE9BQU87TUFDTEMsYUFBYSxFQUFFLEtBQUs7TUFDcEJDLE1BQU0sRUFBRSxDQUFDO01BQ1RDLE9BQU8sRUFBRTtLQUNLO0lBQ2xCLE1BQU1ULElBQUksR0FBR0ssTUFBTSxDQUFDLENBQUMsQ0FBUztJQUM5QixJQUFJTCxJQUFJLENBQUNELEtBQUssS0FBS0ssSUFBSSxDQUFDTCxLQUFLLEVBQzNCLE9BQU87TUFDTFEsYUFBYSxFQUFFLEtBQUs7TUFDcEJDLE1BQU0sRUFBRSxDQUFDO01BQ1RDLE9BQU8sRUFBRTtLQUNLO0lBQ2xCLElBQUlULElBQUksQ0FBQ1UsY0FBYyxFQUFFO01BQ3ZCLElBQUlWLElBQUksQ0FBQ1csWUFBWSxLQUFLLENBQUMsRUFBRTtRQUMzQixNQUFNTixNQUFNLEdBQUcsTUFBTSxJQUFBWCxPQUFBLENBQUFPLEtBQUssRUFDeEI7bUJBQ1dQLE9BQUEsQ0FBQVEsVUFBVTs7O1dBR2xCLEVBQ0g7VUFDRUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJUyxJQUFJLEVBQUUsRUFBRVIsSUFBSSxDQUFDTCxLQUFLO1NBQ3RDLENBQ0Y7TUFDSDtNQUNBLE9BQU87UUFDTFEsYUFBYSxFQUFFLElBQUk7UUFDbkJFLE9BQU8sRUFBRTtPQUNLO0lBQ2xCO0lBQ0EsSUFBSVQsSUFBSSxDQUFDYSxXQUFXLEtBQUtULElBQUksQ0FBQ1MsV0FBVyxFQUN2QyxPQUFPO01BQUVMLE1BQU0sRUFBRSxLQUFLO01BQUVDLE9BQU8sRUFBRSxxQkFBcUI7TUFBRUssSUFBSSxFQUFFO0lBQUcsQ0FBRTtJQUNyRSxNQUFNLElBQUFwQixPQUFBLENBQUFPLEtBQUssRUFDVDtlQUNXUCxPQUFBLENBQUFRLFVBQVU7OztLQUdwQixFQUNEO01BQ0VDLE1BQU0sRUFBRSxDQUFDLElBQUlTLElBQUksRUFBRSxFQUFFUixJQUFJLENBQUNMLEtBQUs7S0FDaEMsQ0FDRjtJQUNELE9BQU87TUFDTFEsYUFBYSxFQUFFLElBQUk7TUFDbkJRLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxXQUFXLEVBQUUsUUFBUTtNQUNyQkMsV0FBVyxFQUFFLENBQUM7TUFDZFIsT0FBTyxFQUFFO0tBQ0s7RUFDbEIsQ0FBQzs7QUFFRCxTQUFzQnRCLE1BQU1BLENBQUNZLEtBQVUsRUFBRW1CLFdBQWdCOztJQUN2RCxNQUFNQyxVQUFVLEdBQUcsTUFBTSxJQUFBekIsT0FBQSxDQUFBTyxLQUFLLEVBQzVCLFdBQVdQLE9BQUEsQ0FBQVEsVUFBVSwwQ0FBMEMsRUFDL0Q7TUFDRUMsTUFBTSxFQUFFLENBQUNlLFdBQVcsRUFBRW5CLEtBQUs7S0FDNUIsQ0FDRjtJQUVELE1BQU1NLE1BQU0sR0FBRyxNQUFNLElBQUFYLE9BQUEsQ0FBQU8sS0FBSyxFQUN4QixpQkFBaUJQLE9BQUEsQ0FBQVEsVUFBVSx3QkFBd0IsRUFDbkQ7TUFDRUMsTUFBTSxFQUFFLENBQUNKLEtBQUs7S0FDZixDQUNGO0lBQ0QsT0FBT00sTUFBTSxDQUFDLENBQUMsQ0FBUztFQUMxQixDQUFDOztBQUVELFNBQXNCakIsZUFBZUEsQ0FBQ2dCLElBQVM7O0lBQzdDLE1BQU1DLE1BQU0sR0FBRyxNQUFNLElBQUFYLE9BQUEsQ0FBQU8sS0FBSyxFQUN4QjsyQkFDdUJQLE9BQUEsQ0FBQVEsVUFBVTs7S0FFaEMsRUFDRDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ0MsSUFBSTtLQUNkLENBQ0Y7SUFDRCxPQUFPQyxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQmhCLGlCQUFpQkEsQ0FBQ2UsSUFBVTs7SUFDaEQ7SUFDQSxNQUFNLElBQUFWLE9BQUEsQ0FBQU8sS0FBSyxFQUNUO2VBQ1dQLE9BQUEsQ0FBQVEsVUFBVTs7Ozs7Ozs7Ozs7O0tBWXBCLEVBQ0Q7TUFDRUMsTUFBTSxFQUFFLENBQ05DLElBQUksQ0FBQ2dCLFNBQVMsRUFDZGhCLElBQUksQ0FBQ2lCLFFBQVEsRUFDYmpCLElBQUksQ0FBQ2tCLGFBQWEsRUFDbEJsQixJQUFJLENBQUNtQixXQUFXLEVBQ2hCbkIsSUFBSSxDQUFDb0IsTUFBTSxFQUNYcEIsSUFBSSxDQUFDcUIsSUFBSSxFQUNUckIsSUFBSSxDQUFDc0IsV0FBVyxFQUNoQnRCLElBQUksQ0FBQ1MsV0FBVyxFQUNoQlQsSUFBSSxDQUFDYyxXQUFXLEVBQ2hCZCxJQUFJLENBQUN1QixFQUFFO0tBRVYsQ0FDRjtJQUVEO0lBQ0EsTUFBTXRCLE1BQU0sR0FBRyxNQUFNLElBQUFYLE9BQUEsQ0FBQU8sS0FBSyxFQUN4QixpQkFBaUJQLE9BQUEsQ0FBQVEsVUFBVSxxQkFBcUIsRUFDaEQ7TUFDRUMsTUFBTSxFQUFFLENBQUNDLElBQUksQ0FBQ3VCLEVBQUU7S0FDakIsQ0FDRjtJQUVELE9BQU90QixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNwQixDQUFDOztBQUVELFNBQXNCZixhQUFhQSxDQUFBOztJQUNqQyxNQUFNc0MsT0FBTyxHQUFHLE1BQU0sSUFBQWxDLE9BQUEsQ0FBQU8sS0FBSyxFQUFnQixpQkFBaUJQLE9BQUEsQ0FBQVEsVUFBVSxRQUFRLENBQUM7SUFDL0UsT0FBTzBCLE9BQU87RUFDaEIsQ0FBQzs7QUFFRCxTQUFzQnJDLG9CQUFvQkEsQ0FBQ3NDLE1BQWMsRUFBRUMsT0FBZTs7SUFDeEUsTUFBTXpCLE1BQU0sR0FBRyxNQUFNLElBQUFYLE9BQUEsQ0FBQU8sS0FBSyxFQUN4QjtlQUNXUCxPQUFBLENBQUFRLFVBQVU7OztPQUdsQixFQUNIO01BQ0VDLE1BQU0sRUFBRSxDQUFDMkIsT0FBTyxFQUFFLElBQUlsQixJQUFJLEVBQUUsRUFBRWlCLE1BQU07S0FDckMsQ0FDRjtJQUNELE1BQU03QixJQUFJLEdBQUcsTUFBTSxJQUFBTixPQUFBLENBQUFPLEtBQUssRUFDdEI7O2VBRVdQLE9BQUEsQ0FBQVEsVUFBVTs7U0FFaEIsRUFDTDtNQUNFQyxNQUFNLEVBQUUsQ0FBQzBCLE1BQU07S0FDaEIsQ0FDRjtJQUNELE9BQU83QixJQUFJLENBQUMsQ0FBQyxDQUFlO0VBQzlCLENBQUM7O0FBRUQsU0FBc0JSLGNBQWNBLENBQUNZLElBQVM7O0lBQzVDLE1BQU07TUFBRTJCO0lBQVcsQ0FBRSxHQUFHM0IsSUFBSTtJQUM1QixNQUFNO01BQUU0QjtJQUFlLENBQUUsR0FBRzVCLElBQUk7SUFDaEMsTUFBTTZCLFVBQVUsR0FBRztNQUFFRixXQUFXO01BQUVDO0lBQWUsQ0FBRTtJQUNuRCxNQUFNRSxhQUFhLEdBQUd0QyxRQUFBLENBQUF1QyxvQkFBb0IsQ0FBQ0MsY0FBYyxDQUN2RCxpQkFBaUIsRUFDakJILFVBQVUsQ0FDWDtJQUNELE1BQU1JLFVBQVUsR0FBRyxFQUFFO0lBQ3JCLE1BQU1DLElBQUksR0FBR3pDLFFBQUEsQ0FBQTBDLE9BQU0sQ0FBQ0MsUUFBUSxDQUFDTixhQUFhLEVBQUVHLFVBQVUsQ0FBQztJQUV2RCxNQUFNaEMsTUFBTSxHQUFHLE1BQU0sSUFBQVgsT0FBQSxDQUFBTyxLQUFLLEVBQ3hCO2VBQ1dQLE9BQUEsQ0FBQVEsVUFBVTs7O09BR2xCLEVBQ0g7TUFDRUMsTUFBTSxFQUFFLENBQUNtQyxJQUFJLEVBQUUsSUFBSTFCLElBQUksRUFBRSxFQUFFUixJQUFJLENBQUNMLEtBQUs7S0FDdEMsQ0FDRjtJQUNELE9BQU9NLE1BQU07RUFDZixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLFNBQXNCWixXQUFXQSxDQUFDTSxLQUFhOztJQUM3QyxNQUFNSyxJQUFJLEdBQUcsTUFBTSxJQUFBVixPQUFBLENBQUFPLEtBQUssRUFDdEI7Ozs7O1lBS1FQLE9BQUEsQ0FBQVEsVUFBVTs7T0FFZlIsT0FBQSxDQUFBUSxVQUFVOzs7Ozs7O0tBT1osRUFDRDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ0osS0FBSztLQUNmLENBQ0Y7SUFFRCxJQUFJLENBQUNLLElBQUksSUFBSUEsSUFBSSxDQUFDRSxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQzlCLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtJQUVBLE1BQU1tQyxPQUFPLEdBQUcsSUFBSUMsR0FBRyxFQUFlO0lBRXRDdEMsSUFBSSxDQUFDdUMsT0FBTyxDQUFFQyxHQUFHLElBQUk7TUFDbkIsSUFBSSxDQUFDSCxPQUFPLENBQUNJLEdBQUcsQ0FBQ0QsR0FBRyxDQUFDakIsRUFBRSxDQUFDLEVBQUU7UUFDeEJjLE9BQU8sQ0FBQ0ssR0FBRyxDQUFDRixHQUFHLENBQUNqQixFQUFFLEVBQUFvQixNQUFBLENBQUFDLE1BQUEsQ0FBQUQsTUFBQSxDQUFBQyxNQUFBLEtBQ2I1QyxJQUFJO1VBQ1A2QyxRQUFRLEVBQUU7UUFBRSxHQUNaO01BQ0o7TUFFQSxJQUFJTCxHQUFHLENBQUNNLFlBQVksRUFBRTtRQUNwQlQsT0FBTyxDQUFDVSxHQUFHLENBQUNQLEdBQUcsQ0FBQ2pCLEVBQUUsQ0FBQyxDQUFDc0IsUUFBUSxDQUFDRyxJQUFJLENBQUM7VUFDaENDLElBQUksRUFBRVQsR0FBRyxDQUFDTSxZQUFZO1VBQ3RCSSxTQUFTLEVBQUVWLEdBQUcsQ0FBQ1c7U0FDaEIsQ0FBQztNQUNKO0lBQ0YsQ0FBQyxDQUFDO0lBQ0YsT0FBT0MsS0FBSyxDQUFDQyxJQUFJLENBQUNoQixPQUFPLENBQUN0QyxNQUFNLEVBQUUsQ0FBQztFQUNyQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","checkUserExist","confirmEmail","getOTP","comparePassword","updateProfileUser","checkNickName","updateUserVerifyCode","changePassword","getUserInfo","mysql_1","require","schema_1","bcrypt_1","__importDefault","email","user","query","coreSchema","values","data","result","length","isSuccessfull","status","message","emailConfirmed","signupStatus","Date","verify_code","code","showToUser","messageCode","messageKind","tokenVerify","updateData","firstName","lastName","national_code","dateOfBirth","gender","city","phoneNumber","id","getData","userId","newCode","newPassword","confirmPassword","fdPassword","validPassword","createPasswordSchema","validateSyncAt","saltRounds","hash","default","hashSync","userMap","Map","forEach","row","has","set","Object","assign","comments","comment_text","get","push","text","createdAt","comment_created_at","Array","from"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ConfirmEmail } from \"../../models/auth\";\r\nimport { AppResponse } from \"../../types/response.interface\";\r\nimport {  CreateUser, User } from \"../../types/user\";\r\nimport { createPasswordSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT id,email FROM  ${coreSchema}.users\r\n        WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT * \r\n      FROM ${coreSchema}.users\r\n      WHERE email=? AND deletedAt IS NULL\r\n      `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n          UPDATE ${coreSchema}.users\r\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n          WHERE email =?\r\n          `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n      WHERE email=?\r\n    `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function comparePassword(data: any): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT password FROM ${coreSchema}.users\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [data],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateProfileUser(data: User): Promise<any> {\r\n  // Perform the update query\r\n  await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET \r\n        firstName = ?,\r\n        lastName = ?,\r\n        national_code = ?,\r\n        dateOfBirth = ?,\r\n        gender = ?,\r\n        city = ?,\r\n        phoneNumber = ?,\r\n        verify_code = ?,\r\n        tokenVerify = ?\r\n      WHERE id = ?;\r\n    `,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.national_code,\r\n        data.dateOfBirth,\r\n        data.gender,\r\n        data.city,\r\n        data.phoneNumber,\r\n        data.verify_code,\r\n        data.tokenVerify,\r\n        data.id,\r\n      ],\r\n    }\r\n  );\r\n\r\n  // Fetch the updated user profile\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE id = ?`,\r\n    {\r\n      values: [data.id],\r\n    }\r\n  );\r\n\r\n  return result[0]; // Assuming result is an array of rows\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM ${coreSchema}.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET verify_code=?,updatedAt=?\r\n      WHERE id=?\r\n      `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n        SELECT id,email,verify_code\r\n        FROM ${coreSchema}.users\r\n        WHERE id=?\r\n        `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function changePassword(data: any) {\r\n  const { newPassword } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { newPassword, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET password=?,updatedAt=?\r\n      WHERE email=?\r\n      `,\r\n    {\r\n      values: [hash, new Date(), data.email],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getUserInfo(email: string) {\r\n//   const data = await query<RowDataPacket[]>(\r\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n//     {\r\n//       values: [email],\r\n//     }\r\n//   );\r\n//   if (data) return data;\r\n// }\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT \r\n       u.*, \r\n       c.comment, \r\n       c.created_at AS comment_created_at\r\n     FROM ${coreSchema}.users u\r\n     LEFT JOIN \r\n     ${coreSchema}.comments c\r\n     ON \r\n     u.id = c.id\r\n     WHERE \r\n     u.email =?\r\n     LIMIT 1;\r\n\r\n    `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n\r\n  if (!data || data.length === 0) {\r\n    return null; // Return null if no data is found\r\n  }\r\n\r\n  const userMap = new Map<number, any>();\r\n\r\n  data.forEach((row) => {\r\n    if (!userMap.has(row.id)) {\r\n      userMap.set(row.id, {\r\n        ...data,\r\n        comments: [],\r\n      });\r\n    }\r\n\r\n    if (row.comment_text) {\r\n      userMap.get(row.id).comments.push({\r\n        text: row.comment_text,\r\n        createdAt: row.comment_created_at,\r\n      });\r\n    }\r\n  });\r\n  return Array.from(userMap.values());\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738053415838},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// router.get(\n//   \"/getClinicServices\",\n//   asyncHandler(async (req: Request, res: Response) => {\n//     const data = await clinicService.getClinicService();\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return buildResponse;\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljX3NlcnZpY2VzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pY19zZXJ2aWNlcy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IGNsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgXCIvZ2V0Q2xpbmljU2VydmljZXNcIixcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xyXG4vLyAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNsaW5pY1NlcnZpY2UuZ2V0Q2xpbmljU2VydmljZSgpO1xyXG4vLyAgICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4vLyAgICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbi8vICAgfSlcclxuLy8gKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":[],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { clinicService } from \"./service\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n// router.get(\r\n//   \"/getClinicServices\",\r\n//   asyncHandler(async (req: Request, res: Response) => {\r\n//     const data = await clinicService.getClinicService();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return buildResponse;\r\n//   })\r\n// );\r\n"],"mappings":";;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1737887267636},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clinicService = void 0;\nconst db_1 = require(\"./db\");\nclass clinicService {\n  static getClinicService() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicServices)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.clinicService = clinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNsaW5pY1NlcnZpY2UiLCJnZXRDbGluaWNTZXJ2aWNlIiwiZGF0YSIsImdldENsaW5pY1NlcnZpY2VzIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjbGluaWNfc2VydmljZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljX3NlcnZpY2VzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q2xpbmljU2VydmljZXMgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIGNsaW5pY1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q2xpbmljU2VydmljZSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRDbGluaWNTZXJ2aWNlcygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxhQUFhO0VBQ2pCLE9BQWFDLGdCQUFnQkEsQ0FBQTs7TUFDbEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxpQkFBaUIsR0FBRTtNQUN0QyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQVJIRyxPQUFBLENBQUFMLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","clinicService","getClinicService","data","getClinicServices","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/service.ts"],"sourcesContent":["import { getClinicServices } from \"./db\";\r\n\r\nexport class clinicService {\r\n  public static async getClinicService() {\r\n    const data = await getClinicServices();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,iBAAiB,GAAE;MACtC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AARHG,OAAA,CAAAL,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1736242761488},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getClinicServices = getClinicServices;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getClinicServices() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT *, \n    CONCAT('/public/image_speciality/', img) AS image_url\n    FROM ${mysql_1.coreSchema}.services\n  `);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0Q2xpbmljU2VydmljZXMiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY19zZXJ2aWNlc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWNfc2VydmljZXMvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm93RGF0YVBhY2tldCB9IGZyb20gXCJteXNxbDJcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpbmljU2VydmljZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFxyXG4gICAgU0VMRUNUICosIFxyXG4gICAgQ09OQ0FUKCcvcHVibGljL2ltYWdlX3NwZWNpYWxpdHkvJywgaW1nKSBBUyBpbWFnZV91cmxcclxuICAgIEZST00gJHtjb3JlU2NoZW1hfS5zZXJ2aWNlc1xyXG4gIGApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyxpQkFBQSxHQUFBQSxpQkFBQTtBQUZBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCRixpQkFBaUJBLENBQUE7O0lBQ3JDLE1BQU1HLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUFnQjs7O1dBR2pDSCxPQUFBLENBQUFJLFVBQVU7R0FDbEIsQ0FBQztJQUNGLE9BQU9GLE1BQU07RUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","getClinicServices","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\nexport async function getClinicServices() {\r\n  const result = await query<RowDataPacket>(`\r\n    SELECT *, \r\n    CONCAT('/public/image_speciality/', img) AS image_url\r\n    FROM ${coreSchema}.services\r\n  `);\r\n  return result;\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,iBAAA,GAAAA,iBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,iBAAiBA,CAAA;;IACrC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EAAgB;;;WAGjCH,OAAA,CAAAI,UAAU;GAClB,CAAC;IACF,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1737450350398},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllCities\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.citiesService.getAllCities();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\npublic_1.router.get(\"/filtered_neighbor/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const city_id = +req.params.id;\n  const data = yield service_1.citiesService.filtered_neighbor(city_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJjaXRpZXNTZXJ2aWNlIiwiZ2V0QWxsQ2l0aWVzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJqc29uIiwiY2l0eV9pZCIsInBhcmFtcyIsImlkIiwiZmlsdGVyZWRfbmVpZ2hib3IiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjaXRpZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgY2l0aWVzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QWxsQ2l0aWVzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaXRpZXNTZXJ2aWNlLmdldEFsbENpdGllcygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZmlsdGVyZWRfbmVpZ2hib3IvOmlkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGNpdHlfaWQgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaXRpZXNTZXJ2aWNlLmZpbHRlcmVkX25laWdoYm9yKGNpdHlfaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUixlQUFlLEVBQ2YsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsYUFBYSxDQUFDQyxZQUFZLEVBQUU7RUFDL0MsTUFBTUMsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsSUFBSUcsYUFBYSxFQUFFO0lBQ2pCLE9BQU9MLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztFQUM1QztBQUNGLENBQUMsRUFBQyxDQUNIO0FBQ0RYLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1Isd0JBQXdCLEVBQ3hCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1RLE9BQU8sR0FBRyxDQUFDVixHQUFHLENBQUNXLE1BQU0sQ0FBQ0MsRUFBRTtFQUM5QixNQUFNVCxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxhQUFhLENBQUNTLGlCQUFpQixDQUFDSCxPQUFPLENBQUM7RUFDM0QsTUFBTUosYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsSUFBSUcsYUFBYSxFQUFFO0lBQ2pCLE9BQU9MLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztFQUM1QztBQUNGLENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","citiesService","getAllCities","buildResponse","BuildResponse","status","json","city_id","params","id","filtered_neighbor"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { citiesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllCities\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await citiesService.getAllCities();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\nrouter.get(\r\n  \"/filtered_neighbor/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const city_id = +req.params.id;\r\n    const data = await citiesService.filtered_neighbor(city_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,eAAe,EACf,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACC,YAAY,EAAE;EAC/C,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,IAAIG,aAAa,EAAE;IACjB,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C;AACF,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMQ,OAAO,GAAG,CAACV,GAAG,CAACW,MAAM,CAACC,EAAE;EAC9B,MAAMT,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACS,iBAAiB,CAACH,OAAO,CAAC;EAC3D,MAAMJ,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,IAAIG,aAAa,EAAE;IACjB,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C;AACF,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1736500362673},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.citiesService = void 0;\nconst db_1 = require(\"./db\");\nclass citiesService {\n  static getAllCities() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllCities)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static filtered_neighbor(city_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.GetNeighborhoods)(city_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.citiesService = citiesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNpdGllc1NlcnZpY2UiLCJnZXRBbGxDaXRpZXMiLCJkYXRhIiwibWVzc2FnZSIsImZpbHRlcmVkX25laWdoYm9yIiwiY2l0eV9pZCIsIkdldE5laWdoYm9yaG9vZHMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NpdGllcy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFsbENpdGllcywgR2V0TmVpZ2hib3Job29kcyB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgY2l0aWVzU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxDaXRpZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QWxsQ2l0aWVzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiTm8gZGF0YSBmb3VuZFwiLCBkYXRhOiBudWxsIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZmlsdGVyZWRfbmVpZ2hib3IoY2l0eV9pZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgR2V0TmVpZ2hib3Job29kcyhjaXR5X2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxhQUFhO0VBQ2pCLE9BQWFDLFlBQVlBLENBQUE7O01BQzlCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsWUFBWSxHQUFFO01BQ2pDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUMsT0FBTyxFQUFFLGVBQWU7VUFBRUQsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7O0VBQ00sT0FBYUUsaUJBQWlCQSxDQUFDQyxPQUFlOztNQUNuRCxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFRLGdCQUFnQixFQUFDRCxPQUFPLENBQUM7TUFDNUMsSUFBSUgsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","citiesService","getAllCities","data","message","filtered_neighbor","city_id","GetNeighborhoods","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/service.ts"],"sourcesContent":["import { getAllCities, GetNeighborhoods } from \"./db\";\r\n\r\nexport class citiesService {\r\n  public static async getAllCities() {\r\n    const data = await getAllCities();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async filtered_neighbor(city_id: number) {\r\n    const data = await GetNeighborhoods(city_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,YAAY,GAAE;MACjC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaE,iBAAiBA,CAACC,OAAe;;MACnD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,gBAAgB,EAACD,OAAO,CAAC;MAC5C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1736319456133},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllCities = getAllCities;\nexports.GetNeighborhoods = GetNeighborhoods;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllCities() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.cities`);\n    return result;\n  });\n}\nfunction GetNeighborhoods(city_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const adjustedCityId = city_id + 1;\n    const result = yield (0, mysql_1.query)(`\n     SELECT * FROM ${mysql_1.coreSchema}.filtered_neighborhoods\n     WHERE city_id = ?\n    `, {\n      values: [adjustedCityId]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsQ2l0aWVzIiwiR2V0TmVpZ2hib3Job29kcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwiY2l0eV9pZCIsImFkanVzdGVkQ2l0eUlkIiwidmFsdWVzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NpdGllcy9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxDaXRpZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uY2l0aWVzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldE5laWdoYm9yaG9vZHMoY2l0eV9pZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgYWRqdXN0ZWRDaXR5SWQgPSBjaXR5X2lkICsgMTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5maWx0ZXJlZF9uZWlnaGJvcmhvb2RzXHJcbiAgICAgV0hFUkUgY2l0eV9pZCA9ID9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2FkanVzdGVkQ2l0eUlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBQSxPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQU9BRCxPQUFBLENBQUFFLGdCQUFBLEdBQUFBLGdCQUFBO0FBVEEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JILFlBQVlBLENBQUE7O0lBQ2hDLE1BQU1JLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QixpQkFBaUJILE9BQUEsQ0FBQUksVUFBVSxTQUFTLENBQ3JDO0lBQ0QsT0FBT0YsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0JILGdCQUFnQkEsQ0FBQ00sT0FBZTs7SUFDcEQsTUFBTUMsY0FBYyxHQUFHRCxPQUFPLEdBQUcsQ0FBQztJQUNsQyxNQUFNSCxNQUFNLEdBQUcsTUFBTSxJQUFBRixPQUFBLENBQUFHLEtBQUssRUFDeEI7cUJBQ2lCSCxPQUFBLENBQUFJLFVBQVU7O0tBRTFCLEVBQ0Q7TUFDRUcsTUFBTSxFQUFFLENBQUNELGNBQWM7S0FDeEIsQ0FDRjtJQUNELE9BQU9KLE1BQU07RUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","getAllCities","GetNeighborhoods","mysql_1","require","result","query","coreSchema","city_id","adjustedCityId","values"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllCities() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.cities`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function GetNeighborhoods(city_id: number) {\r\n  const adjustedCityId = city_id + 1;\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT * FROM ${coreSchema}.filtered_neighborhoods\r\n     WHERE city_id = ?\r\n    `,\r\n    {\r\n      values: [adjustedCityId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAOAD,OAAA,CAAAE,gBAAA,GAAAA,gBAAA;AATA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBH,YAAYA,CAAA;;IAChC,MAAMI,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,SAAS,CACrC;IACD,OAAOF,MAAM;EACf,CAAC;;AAED,SAAsBH,gBAAgBA,CAACM,OAAe;;IACpD,MAAMC,cAAc,GAAGD,OAAO,GAAG,CAAC;IAClC,MAAMH,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB;qBACiBH,OAAA,CAAAI,UAAU;;KAE1B,EACD;MACEG,MAAM,EAAE,CAACD,cAAc;KACxB,CACF;IACD,OAAOJ,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1736321655537},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllInsurances\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.InsuranceService.getAllInsurances();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJJbnN1cmFuY2VTZXJ2aWNlIiwiZ2V0QWxsSW5zdXJhbmNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGluc3VyYW5jZVxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9pbnN1cmFuY2UvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBJbnN1cmFuY2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9nZXRBbGxJbnN1cmFuY2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBJbnN1cmFuY2VTZXJ2aWNlLmdldEFsbEluc3VyYW5jZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUixtQkFBbUIsRUFDbkIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZ0JBQWdCLENBQUNDLGdCQUFnQixFQUFFO0VBQ3RELE1BQU1DLGFBQWEsR0FBR1osY0FBQSxDQUFBYSxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQzdDLElBQUlHLGFBQWEsRUFBRTtJQUNqQixPQUFPTCxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7RUFDNUM7QUFDRixDQUFDLEVBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","InsuranceService","getAllInsurances","buildResponse","BuildResponse","status","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { InsuranceService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllInsurances\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await InsuranceService.getAllInsurances();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,mBAAmB,EACnB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,gBAAgB,CAACC,gBAAgB,EAAE;EACtD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,IAAIG,aAAa,EAAE;IACjB,OAAOL,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C;AACF,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1736325526769},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InsuranceService = void 0;\nconst db_1 = require(\"./db\");\nclass InsuranceService {\n  static getAllInsurances() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllInsurances)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.InsuranceService = InsuranceService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkluc3VyYW5jZVNlcnZpY2UiLCJnZXRBbGxJbnN1cmFuY2VzIiwiZGF0YSIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2luc3VyYW5jZS9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFsbEluc3VyYW5jZXMgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEluc3VyYW5jZVNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxsSW5zdXJhbmNlcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbGxJbnN1cmFuY2VzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiTm8gZGF0YSBmb3VuZFwiLCBkYXRhOiBudWxsIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGdCQUFnQjtFQUNwQixPQUFhQyxnQkFBZ0JBLENBQUE7O01BQ2xDLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsZ0JBQWdCLEdBQUU7TUFDckMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBUkhFLE9BQUEsQ0FBQUosZ0JBQUEsR0FBQUEsZ0JBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","InsuranceService","getAllInsurances","data","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/service.ts"],"sourcesContent":["import { getAllInsurances } from \"./db\";\r\n\r\nexport class InsuranceService {\r\n  public static async getAllInsurances() {\r\n    const data = await getAllInsurances();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,gBAAgB;EACpB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,gBAAgB,GAAE;MACrC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AARHE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1736325526769},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllInsurances = getAllInsurances;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllInsurances() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.insurance_companies`);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsSW5zdXJhbmNlcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2luc3VyYW5jZS9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxJbnN1cmFuY2VzKCkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5pbnN1cmFuY2VfY29tcGFuaWVzYFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQUEsT0FBQSxDQUFBQyxnQkFBQSxHQUFBQSxnQkFBQTtBQUZBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCRixnQkFBZ0JBLENBQUE7O0lBQ2xDLE1BQU1HLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QixpQkFBaUJILE9BQUEsQ0FBQUksVUFBVSxzQkFBc0IsQ0FDbEQ7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","getAllInsurances","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllInsurances() {\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.insurance_companies`\r\n    );\r\n    return result;\r\n  }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,gBAAgBA,CAAA;;IAClC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,sBAAsB,CAClD;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1736325526769},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/clinics/add\", (0, async_handler_1.asyncHandler)(function addNewClinic(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield service_1.ClinicService.registerClinic(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    if (buildResponse) {\n      return buildResponse;\n    }\n    return result;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJhZGROZXdDbGluaWMiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJyZXN1bHQiLCJDbGluaWNTZXJ2aWNlIiwicmVnaXN0ZXJDbGluaWMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBDbGluaWNTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9jbGluaWNzL2FkZFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGROZXdDbGluaWMocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2xpbmljU2VydmljZS5yZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiBidWlsZFJlc3BvbnNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBR0FFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxJQUFJLENBQ1QsY0FBYyxFQUNkLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFlBQVlBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEUsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsTUFBTSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsYUFBYSxDQUFDQyxjQUFjLENBQUNKLFFBQVEsQ0FBQztJQUMzRCxNQUFNSyxhQUFhLEdBQUcsTUFBTWQsY0FBQSxDQUFBZSxhQUFhLENBQUNDLEdBQUcsQ0FBQ0wsTUFBTSxDQUFDO0lBQ3JELElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPQSxhQUFhO0lBQ3RCO0lBQ0EsT0FBT0gsTUFBTTtFQUNmLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","addNewClinic","req","res","formData","body","result","ClinicService","registerClinic","buildResponse","BuildResponse","get"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { ClinicService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.post(\r\n  \"/clinics/add\",\r\n  asyncHandler(async function addNewClinic(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await ClinicService.registerClinic(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }\r\n    return result;\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAY,EAAEC,GAAa;;IAClE,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,MAAM,GAAG,MAAMT,SAAA,CAAAU,aAAa,CAACC,cAAc,CAACJ,QAAQ,CAAC;IAC3D,MAAMK,aAAa,GAAG,MAAMd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,MAAM,CAAC;IACrD,IAAIG,aAAa,EAAE;MACjB,OAAOA,aAAa;IACtB;IACA,OAAOH,MAAM;EACf,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1738463266950},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClinicService = void 0;\nconst email_1 = require(\"../../config/email\");\nconst common_1 = require(\"../../helper/common\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass ClinicService {\n  static registerClinic(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, db_1.checkExistClinic)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      // Generate a unique verification code\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      // Generate email verification token (without storing the code inside the JWT)\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, db_1.registerClinic)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n}\nexports.ClinicService = ClinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbF8xIiwicmVxdWlyZSIsImNvbW1vbl8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImRiXzEiLCJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsIm1zXzEiLCJzZW5kX2VtYWlsXzEiLCJKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiIsIkpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIkNsaW5pY1NlcnZpY2UiLCJyZWdpc3RlckNsaW5pYyIsImZvcm1EYXRhIiwiZW1haWxFeGlzdHMiLCJjaGVja0V4aXN0Q2xpbmljIiwiZW1haWwiLCJjb25zb2xlIiwiZXJyb3IiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInZlcmlmaWNhdGlvbkNvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJ2ZXJpZnlfY29kZSIsInRva2VuVmVyaWZ5Iiwic2lnbiIsInRva2VuX3ZlcmlmeSIsImNsaW5pY0RhdGEiLCJlbWFpbFNlcnZpY2UiLCJFbWFpbFByb3ZpZGVyIiwic2VuZEFjY291bnRSZWdpc3RlciIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiaWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtYWlsUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2VtYWlsXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MiwgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IGNoZWNrRXhpc3RDbGluaWMsIHJlZ2lzdGVyQ2xpbmljIH0gZnJvbSBcIi4vZGJcIjtcclxuaW1wb3J0IHNlbmRBY2NvdW50UmVnaXN0ZXIgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcblxyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IFNlbmRNYWlsIGZyb20gXCIuLi8uLi9oZWxwZXIvc2VuZF9lbWFpbFwiO1xyXG5cclxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gMSBEYXlzXHJcbmNvbnN0IEpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQgPVxyXG4gIHByb2Nlc3MuZW52LkpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQgfHwgXCIzMGRcIjsgLy8gMzAgRGF5c1xyXG5cclxuY29uc3QgZXhwaXJlc0luID0gbXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDA7XHJcbmV4cG9ydCBjbGFzcyBDbGluaWNTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyQ2xpbmljKGZvcm1EYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IGVtYWlsRXhpc3RzID0gYXdhaXQgY2hlY2tFeGlzdENsaW5pYyhmb3JtRGF0YS5lbWFpbCk7XHJcblxyXG4gICAgaWYgKGVtYWlsRXhpc3RzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYCR7Zm9ybURhdGEuZW1haWx9IEVtYWlsIGFscmVhZHkgZXhpc3RzLCB0aHJvd2luZyBlcnJvci4uLmBcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChgJHtmb3JtRGF0YS5lbWFpbH0gaXMgYWxyZWFkeSBleGlzdC5gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSB2ZXJpZmljYXRpb24gY29kZVxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQ29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgZm9ybURhdGEudmVyaWZ5X2NvZGUgPSB2ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSBlbWFpbCB2ZXJpZmljYXRpb24gdG9rZW4gKHdpdGhvdXQgc3RvcmluZyB0aGUgY29kZSBpbnNpZGUgdGhlIEpXVClcclxuICAgIGNvbnN0IHRva2VuVmVyaWZ5ID0gand0LnNpZ24oXHJcbiAgICAgIHsgZW1haWw6IGZvcm1EYXRhLmVtYWlsIH0sXHJcbiAgICAgIEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLFxyXG4gICAgICB7IGV4cGlyZXNJbiB9XHJcbiAgICApO1xyXG4gICAgZm9ybURhdGEudG9rZW5fdmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICAvLyBTZW5kIHZlcmlmaWNhdGlvbiBlbWFpbFxyXG4gICAgXHJcbiAgICBjb25zdCBjbGluaWNEYXRhID0gYXdhaXQgcmVnaXN0ZXJDbGluaWMoZm9ybURhdGEpO1xyXG4gICAgaWYgKCFjbGluaWNEYXRhKSB7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgY2xpbmljLlwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBTZW5kTWFpbChuZXcgRW1haWxQcm92aWRlcigpKTtcclxuICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhLmVtYWlsLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBcIkNsaW5pYyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseS4gUGxlYXNlIHZlcmlmeSB5b3VyIGVtYWlsLlwiLFxyXG4gICAgICBuZXdVc2VyOiB7XHJcbiAgICAgICAgaWQ6IGNsaW5pY0RhdGEuaWQsXHJcbiAgICAgICAgZW1haWw6IGZvcm1EYXRhLmVtYWlsLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLGdCQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxJQUFBLEdBQUFILE9BQUE7QUFJQSxNQUFBSSxjQUFBLEdBQUFDLGVBQUEsQ0FBQUwsT0FBQTtBQUNBLE1BQUFNLElBQUEsR0FBQUQsZUFBQSxDQUFBTCxPQUFBO0FBQ0EsTUFBQU8sWUFBQSxHQUFBRixlQUFBLENBQUFMLE9BQUE7QUFFQSxNQUFNO0VBQUVRLHVCQUF1QjtFQUFFQztBQUF3QixDQUFFLEdBQVFDLE9BQU8sQ0FBQ0MsR0FBRztBQUU5RSxNQUFNQyx3QkFBd0IsR0FBR0YsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHdCQUF3QixJQUFJLElBQUksQ0FBQyxDQUFDO0FBQy9FLE1BQU1DLHlCQUF5QixHQUM3QkgsT0FBTyxDQUFDQyxHQUFHLENBQUNFLHlCQUF5QixJQUFJLEtBQUssQ0FBQyxDQUFDO0FBRWxELE1BQU1DLFNBQVMsR0FBRyxJQUFBUixJQUFBLENBQUFTLE9BQUUsRUFBQ0gsd0JBQXdCLENBQUMsR0FBRyxJQUFJO0FBQ3JELE1BQWFJLGFBQWE7RUFDakIsT0FBYUMsY0FBY0EsQ0FBQ0MsUUFBYTs7TUFDOUMsTUFBTUMsV0FBVyxHQUFHLE1BQU0sSUFBQWhCLElBQUEsQ0FBQWlCLGdCQUFnQixFQUFDRixRQUFRLENBQUNHLEtBQUssQ0FBQztNQUUxRCxJQUFJRixXQUFXLEVBQUU7UUFDZkcsT0FBTyxDQUFDQyxLQUFLLENBQ1gsR0FBR0wsUUFBUSxDQUFDRyxLQUFLLDBDQUEwQyxDQUM1RDtRQUNELE1BQU0sSUFBSW5CLGdCQUFBLENBQUFzQixhQUFhLENBQUNDLFVBQVUsQ0FBQyxHQUFHUCxRQUFRLENBQUNHLEtBQUssb0JBQW9CLENBQUM7TUFDM0U7TUFHQTtNQUNBLE1BQU1LLGdCQUFnQixHQUFHLElBQUF6QixRQUFBLENBQUEwQixlQUFlLEdBQUU7TUFDMUNULFFBQVEsQ0FBQ1UsV0FBVyxHQUFHRixnQkFBZ0I7TUFFdkM7TUFDQSxNQUFNRyxXQUFXLEdBQUd6QixjQUFBLENBQUFXLE9BQUcsQ0FBQ2UsSUFBSSxDQUMxQjtRQUFFVCxLQUFLLEVBQUVILFFBQVEsQ0FBQ0c7TUFBSyxDQUFFLEVBQ3pCYix1QkFBdUIsRUFDdkI7UUFBRU07TUFBUyxDQUFFLENBQ2Q7TUFDREksUUFBUSxDQUFDYSxZQUFZLEdBQUdGLFdBQVc7TUFDbkM7TUFFQSxNQUFNRyxVQUFVLEdBQUcsTUFBTSxJQUFBN0IsSUFBQSxDQUFBYyxjQUFjLEVBQUNDLFFBQVEsQ0FBQztNQUNqRCxJQUFJLENBQUNjLFVBQVUsRUFBRTtRQUNmLE1BQU0sSUFBSTlCLGdCQUFBLENBQUFzQixhQUFhLENBQUNDLFVBQVUsQ0FBQyw0QkFBNEIsQ0FBQztNQUNsRTtNQUNBLE1BQU1RLFlBQVksR0FBRyxJQUFJMUIsWUFBQSxDQUFBUSxPQUFRLENBQUMsSUFBSWhCLE9BQUEsQ0FBQW1DLGFBQWEsRUFBRSxDQUFDO01BQ3RELE1BQU1ELFlBQVksQ0FBQ0UsbUJBQW1CLENBQUNqQixRQUFRLENBQUNHLEtBQUssRUFBRUssZ0JBQWdCLENBQUM7TUFFeEUsT0FBTztRQUNMVSxPQUFPLEVBQUUsMkRBQTJEO1FBQ3BFQyxPQUFPLEVBQUU7VUFDUEMsRUFBRSxFQUFFTixVQUFVLENBQUNNLEVBQUU7VUFDakJqQixLQUFLLEVBQUVILFFBQVEsQ0FBQ0c7O09BRW5CO0lBQ0gsQ0FBQzs7O0FBdkNIa0IsT0FBQSxDQUFBdkIsYUFBQSxHQUFBQSxhQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["email_1","require","common_1","response_error_1","db_1","jsonwebtoken_1","__importDefault","ms_1","send_email_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","JWT_REFRESH_TOKEN_EXPIRED","expiresIn","default","ClinicService","registerClinic","formData","emailExists","checkExistClinic","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","message","newUser","id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/service.ts"],"sourcesContent":["import { EmailProvider } from \"../../config/email\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { checkExistClinic, registerClinic } from \"./db\";\r\nimport sendAccountRegister from \"../../helper/send_email\";\r\n\r\nimport bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport SendMail from \"../../helper/send_email\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\nconst JWT_REFRESH_TOKEN_EXPIRED =\r\n  process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\nexport class ClinicService {\r\n  public static async registerClinic(formData: any) {\r\n    const emailExists = await checkExistClinic(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    \r\n    // Generate a unique verification code\r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    // Generate email verification token (without storing the code inside the JWT)\r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerClinic(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AACA,MAAAG,IAAA,GAAAH,OAAA;AAIA,MAAAI,cAAA,GAAAC,eAAA,CAAAL,OAAA;AACA,MAAAM,IAAA,GAAAD,eAAA,CAAAL,OAAA;AACA,MAAAO,YAAA,GAAAF,eAAA,CAAAL,OAAA;AAEA,MAAM;EAAEQ,uBAAuB;EAAEC;AAAwB,CAAE,GAAQC,OAAO,CAACC,GAAG;AAE9E,MAAMC,wBAAwB,GAAGF,OAAO,CAACC,GAAG,CAACC,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAC/E,MAAMC,yBAAyB,GAC7BH,OAAO,CAACC,GAAG,CAACE,yBAAyB,IAAI,KAAK,CAAC,CAAC;AAElD,MAAMC,SAAS,GAAG,IAAAR,IAAA,CAAAS,OAAE,EAACH,wBAAwB,CAAC,GAAG,IAAI;AACrD,MAAaI,aAAa;EACjB,OAAaC,cAAcA,CAACC,QAAa;;MAC9C,MAAMC,WAAW,GAAG,MAAM,IAAAhB,IAAA,CAAAiB,gBAAgB,EAACF,QAAQ,CAACG,KAAK,CAAC;MAE1D,IAAIF,WAAW,EAAE;QACfG,OAAO,CAACC,KAAK,CACX,GAAGL,QAAQ,CAACG,KAAK,0CAA0C,CAC5D;QACD,MAAM,IAAInB,gBAAA,CAAAsB,aAAa,CAACC,UAAU,CAAC,GAAGP,QAAQ,CAACG,KAAK,oBAAoB,CAAC;MAC3E;MAGA;MACA,MAAMK,gBAAgB,GAAG,IAAAzB,QAAA,CAAA0B,eAAe,GAAE;MAC1CT,QAAQ,CAACU,WAAW,GAAGF,gBAAgB;MAEvC;MACA,MAAMG,WAAW,GAAGzB,cAAA,CAAAW,OAAG,CAACe,IAAI,CAC1B;QAAET,KAAK,EAAEH,QAAQ,CAACG;MAAK,CAAE,EACzBb,uBAAuB,EACvB;QAAEM;MAAS,CAAE,CACd;MACDI,QAAQ,CAACa,YAAY,GAAGF,WAAW;MACnC;MAEA,MAAMG,UAAU,GAAG,MAAM,IAAA7B,IAAA,CAAAc,cAAc,EAACC,QAAQ,CAAC;MACjD,IAAI,CAACc,UAAU,EAAE;QACf,MAAM,IAAI9B,gBAAA,CAAAsB,aAAa,CAACC,UAAU,CAAC,4BAA4B,CAAC;MAClE;MACA,MAAMQ,YAAY,GAAG,IAAI1B,YAAA,CAAAQ,OAAQ,CAAC,IAAIhB,OAAA,CAAAmC,aAAa,EAAE,CAAC;MACtD,MAAMD,YAAY,CAACE,mBAAmB,CAACjB,QAAQ,CAACG,KAAK,EAAEK,gBAAgB,CAAC;MAExE,OAAO;QACLU,OAAO,EAAE,2DAA2D;QACpEC,OAAO,EAAE;UACPC,EAAE,EAAEN,UAAU,CAACM,EAAE;UACjBjB,KAAK,EAAEH,QAAQ,CAACG;;OAEnB;IACH,CAAC;;;AAvCHkB,OAAA,CAAAvB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1738807223960},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistClinic = checkExistClinic;\nexports.registerClinic = registerClinic;\nexports.findClinicByEmail = findClinicByEmail;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistClinic(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if clinic exists:\", error);\n      throw new Error(\"An error occurred while checking clinic existence.\");\n    }\n  });\n}\nfunction registerClinic(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.clinic\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.name, data.owner_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.zip_code, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction findClinicByEmail(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`SELECT email FROM ${mysql_1.coreSchema}.clinic WHERE email ? LIMIT 1`, {\n        values: [email]\n      });\n      return result.length > 0 ? result[0] : null;\n    } catch (error) {\n      console.error(\"Error querying clinic by email:\", error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdENsaW5pYyIsInJlZ2lzdGVyQ2xpbmljIiwiZmluZENsaW5pY0J5RW1haWwiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJteXNxbF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImVtYWlsIiwicXVlcnlSZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0Iiwic2FsdFJvdW5kcyIsImhhc2hlZFBhc3N3b3JkIiwiZGVmYXVsdCIsImhhc2giLCJuZXdJZCIsInY0IiwicmVzdWx0IiwibmFtZSIsIm93bmVyX25hbWUiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiY2l0eSIsInN0YXRlIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiRGF0ZSIsIk9iamVjdCIsImFzc2lnbiIsImlkIiwibWVzc2FnZSIsIkludGVybmFsU2VydmVyIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnksIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBJQ2xpbmljIH0gZnJvbSBcIi4vSWNsaW5pY1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRXhpc3RDbGluaWMoZW1haWw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVyeVJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgMSBGUk9NICR7Y29yZVNjaGVtYX0uY2xpbmljIFdIRVJFIGVtYWlsID0gPyBMSU1JVCAxYCxcclxuICAgICAgeyB2YWx1ZXM6IFtlbWFpbF0gfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcXVlcnlSZXN1bHQubGVuZ3RoID4gMDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nIGlmIGNsaW5pYyBleGlzdHM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNoZWNraW5nIGNsaW5pYyBleGlzdGVuY2UuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyQ2xpbmljKGRhdGE6IElDbGluaWMpOiBQcm9taXNlPElDbGluaWM+IHtcclxuICBjb25zdCB7cGFzc3dvcmQgLCBjb25maXJtUGFzc3dvcmR9PSBkYXRhLnBhc3N3b3JkXHJcblxyXG4gIGlmIChwYXNzd29yZCAhPT0gY29uZmlybVBhc3N3b3JkKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaFwiKTtcclxuICB9XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jbGluaWNcclxuICAgICAgICAoaWQsbmFtZSxvd25lcl9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjaXR5LHN0YXRlLHppcF9jb2RlLGNvdW50cnksY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgICBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBkYXRhLm93bmVyX25hbWUsXHJcbiAgICAgICAgICBkYXRhLmVtYWlsLFxyXG4gICAgICAgICAgaGFzaGVkUGFzc3dvcmQgLFxyXG4gICAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEuY2l0eSxcclxuICAgICAgICAgIGRhdGEuc3RhdGUsXHJcbiAgICAgICAgICBkYXRhLnppcF9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5jb3VudHJ5LFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7IC4uLmRhdGEsIGlkOiBuZXdJZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBFcnJvcjpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBpbnNlcnQgY2xpbmljLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kQ2xpbmljQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgU0VMRUNUIGVtYWlsIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPyBMSU1JVCAxYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQubGVuZ3RoID4gMCA/IHJlc3VsdFswXSA6IG51bGw7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBxdWVyeWluZyBjbGluaWMgYnkgZW1haWw6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQUEsT0FBQSxDQUFBQyxnQkFBQSxHQUFBQSxnQkFBQTtBQWNBRCxPQUFBLENBQUFFLGNBQUEsR0FBQUEsY0FBQTtBQXdDQUYsT0FBQSxDQUFBRyxpQkFBQSxHQUFBQSxpQkFBQTtBQTVEQSxNQUFBQyxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGdCQUFBLEdBQUFILE9BQUE7QUFHQSxTQUFzQkwsZ0JBQWdCQSxD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","map":{"version":3,"names":["exports","checkExistClinic","registerClinic","findClinicByEmail","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","name","owner_name","token_verify","verify_code","phone","city","state","zip_code","country","Date","Object","assign","id","message","InternalServer"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IClinic } from \"./Iclinic\";\r\n\r\nexport async function checkExistClinic(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if clinic exists:\", error);\r\n    throw new Error(\"An error occurred while checking clinic existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerClinic(data: IClinic): Promise<IClinic> {\r\n  const {password , confirmPassword}= data.password\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.clinic\r\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.name,\r\n          data.owner_name,\r\n          data.email,\r\n          hashedPassword ,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.zip_code,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function findClinicByEmail(email: string): Promise<boolean> {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT email FROM ${coreSchema}.clinic WHERE email ? LIMIT 1`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return result.length > 0 ? result[0] : null;\r\n  } catch (error) {\r\n    console.error(\"Error querying clinic by email:\", error);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738807766698},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkIfClinicExists = checkIfClinicExists;\nexports.getClinicByPassword = getClinicByPassword;\nexports.getDoctorByPassword = getDoctorByPassword;\nexports.getPatientByPassword = getPatientByPassword;\nexports.getClinicVerificationCode = getClinicVerificationCode;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkIfClinicExists(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? \n  `, {\n      values: [email]\n    });\n    return result.length > 0;\n  });\n}\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       return null; // Email not found\n//     }\n//     const [doctor] = await query<RowDataPacket[]>(\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\n//       { values: [data.email, data.verify_code] }\n//     );\n//     if (!doctor) {\n//       return null;\n//     }\n//     const resultDoctor = await query<RowDataPacket[]>(\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\n//       { values: [1, new Date(), data.email] }\n//     );\n//     return resultDoctor;\n//   } catch (error) {\n//     console.error(\"Error confirming doctor email:\", error);\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\n//   }\n// }\n// export async function confirmClinicEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       throw new ResponseError.NotFound(\"Email not found\");\n//     }\n//     // Check if clinic exists with correct verify_code\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\n//       {\n//         values: [data.email],\n//       }\n//     );\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\n//     } else {\n//       await query<RowDataPacket[]>(\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\n//         {\n//           values: [1, new Date(), data.email],\n//         }\n//       );\n//     }\n//     return { success: true, message: \"Email confirmation successful\" };\n//   } catch (error) {\n//     return error;\n//   }\n// }\nfunction getClinicByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.clinic \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction getDoctorByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.patient \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction getPatientByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.doctors \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\n// export async function confirmEmailCode(email: string) {\n//   const result = await query<RowDataPacket>(\n//     `SELECT verify_code FROM ${coreSchema}.clinic WHERE email =?`,\n//     {\n//       values: [email],\n//     }\n//   );\n//   return result;\n// }\nfunction getClinicVerificationCode(clinicData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the clinic data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n      values: [clinicData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\"❌ Email not found in database:\", clinicData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(`🔍 Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`);\n    if (storedVerifyCode !== clinicData.verify_code) {\n      console.error(\"❌ Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.clinic SET signup_status = 1 WHERE email = ?`, {\n      values: [clinicData.email]\n    });\n    return rows;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tJZkNsaW5pY0V4aXN0cyIsImdldENsaW5pY0J5UGFzc3dvcmQiLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZ2V0UGF0aWVudEJ5UGFzc3dvcmQiLCJnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlIiwibXlzcWxfMSIsInJlcXVpcmUiLCJyZXNwb25zZV9lcnJvcl8xIiwiZW1haWwiLCJyZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJwYXNzd29yZCIsInVzZXIiLCJjbGluaWNEYXRhIiwicm93cyIsImNvbnNvbGUiLCJlcnJvciIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0Iiwic3RvcmVkVmVyaWZ5Q29kZSIsInZlcmlmeV9jb2RlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBDb25maXJtRW1haWwgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tJZkNsaW5pY0V4aXN0cyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IFxyXG4gIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQubGVuZ3RoID4gMDtcclxufVxyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1Eb2N0b3JFbWFpbChkYXRhOiBDb25maXJtRW1haWwpIHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBjaGVja0lmRW1haWxFeGlzdHMoZGF0YS5lbWFpbCk7XHJcbi8vICAgICBpZiAoIWVtYWlsRXhpc3RzKSB7XHJcbi8vICAgICAgIHJldHVybiBudWxsOyAvLyBFbWFpbCBub3QgZm91bmRcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCBbZG9jdG9yXSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgIGBTRUxFQ1QgaWQgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3RvciBXSEVSRSBlbWFpbCA9PyBBTkQgdmVyaWZ5X2NvZGUgPT9gLFxyXG4vLyAgICAgICB7IHZhbHVlczogW2RhdGEuZW1haWwsIGRhdGEudmVyaWZ5X2NvZGVdIH1cclxuLy8gICAgICk7XHJcbi8vICAgICBpZiAoIWRvY3Rvcikge1xyXG4vLyAgICAgICByZXR1cm4gbnVsbDtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCByZXN1bHREb2N0b3IgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yIFNFVCBzaWdudXBfc3RhdHVzPT8sIHVwZGF0ZWRfYXQ9PyBXSEVSRSBlbWFpbCA9P2AsXHJcbi8vICAgICAgIHsgdmFsdWVzOiBbMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0gfVxyXG4vLyAgICAgKTtcclxuXHJcbi8vICAgICByZXR1cm4gcmVzdWx0RG9jdG9yO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY29uZmlybWluZyBkb2N0b3IgZW1haWw6XCIsIGVycm9yKTtcclxuLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJGYWlsZWQgdG8gY29uZmlybSBkb2N0b3IgZW1haWxcIik7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uZmlybUNsaW5pY0VtYWlsKGRhdGE6IENvbmZpcm1FbWFpbCkge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrSWZFbWFpbEV4aXN0cyhkYXRhLmVtYWlsKTtcclxuLy8gICAgIGlmICghZW1haWxFeGlzdHMpIHtcclxuLy8gICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJFbWFpbCBub3QgZm91bmRcIik7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8gQ2hlY2sgaWYgY2xpbmljIGV4aXN0cyB3aXRoIGNvcnJlY3QgdmVyaWZ5X2NvZGVcclxuLy8gICAgIGNvbnN0IGNoZWNrRXhpc3RDbGluaWNWZXJpZnlDb2RlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/YCxcclxuLy8gICAgICAge1xyXG4vLyAgICAgICAgIHZhbHVlczogW2RhdGEuZW1haWxdLFxyXG4vLyAgICAgICB9XHJcbi8vICAgICApO1xyXG5cclxuLy8gICAgIGlmIChjaGVja0V4aXN0Q2xpbmljVmVyaWZ5Q29kZVswXS52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSkge1xyXG4vLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiSW52YWxpZCB2ZXJpZmljYXRpb24gY29kZVwiKTtcclxuLy8gICAgIH0gZWxzZSB7XHJcbi8vICAgICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmNsaW5pYyBTRVQgc2lnbnVwX3N0YXR1cz0/LCB1cGRhdGVkX2F0PT8gV0hFUkUgZW1haWw9P2AsXHJcbi8vICAgICAgICAge1xyXG4vLyAgICAgICAgICAgdmFsdWVzOiBbMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICApO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiRW1haWwgY29uZmlybWF0aW9uIHN1Y2Nlc3NmdWxcIiB9O1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICByZXR1cm4gZXJyb3I7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpbmljQnlQYXNzd29yZChcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBhc3N3b3JkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIC8vIGAgU0VMRUNUIHUuKiwgci4qLHAuKlxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0udXNlcl9yb2xlcyB1ciBPTiB1LmlkID0gdXIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVzIHIgT04gdXIucm9sZV9pZCA9IHIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVfcGVybWlzc2lvbnMgcnAgT04gci5pZCA9IHJwLnJvbGVfaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnBlcm1pc3Npb25zIHAgT04gcnAucGVybWlzc2lvbl9pZCAgPSBwLmlkXHJcbiAgICBgIFNFTEVDVCAqXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0uY2xpbmljIFxyXG4gICAgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3RvckJ5UGFzc3dvcmQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwYXNzd29yZDogc3RyaW5nXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAvLyBgIFNFTEVDVCB1LiosIHIuKixwLipcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnVzZXJfcm9sZXMgdXIgT04gdS5pZCA9IHVyLmlkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5yb2xlcyByIE9OIHVyLnJvbGVfaWQgPSByLmlkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5yb2xlX3Blcm1pc3Npb25zIHJwIE9OIHIuaWQgPSBycC5yb2xlX2lkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5wZXJtaXNzaW9ucyBwIE9OIHJwLnBlcm1pc3Npb25faWQgID0gcC5pZFxyXG4gICAgYCBTRUxFQ1QgKlxyXG4gICAgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnQgXHJcbiAgICBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnRCeVBhc3N3b3JkKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgLy8gYCBTRUxFQ1QgdS4qLCByLioscC4qXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS51c2VyX3JvbGVzIHVyIE9OIHUuaWQgPSB1ci5pZFxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZXMgciBPTiB1ci5yb2xlX2lkID0gci5pZFxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZV9wZXJtaXNzaW9ucyBycCBPTiByLmlkID0gcnAucm9sZV9pZFxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucGVybWlzc2lvbnMgcCBPTiBycC5wZXJtaXNzaW9uX2lkICA9IHAuaWRcclxuICAgIGAgU0VMRUNUICpcclxuICAgIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JzIFxyXG4gICAgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWxDb2RlKGVtYWlsOiBzdHJpbmcpIHtcclxuLy8gICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuLy8gICAgIGBTRUxFQ1QgdmVyaWZ5X2NvZGUgRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA9P2AsXHJcbi8vICAgICB7XHJcbi8vICAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuLy8gICAgIH1cclxuLy8gICApO1xyXG4vLyAgIHJldHVybiByZXN1bHQ7XHJcbi8vIH1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlKGNsaW5pY0RhdGE6IHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIEZldGNoIHRoZSBjbGluaWMgZGF0YVxyXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUIGVtYWlsLHZlcmlmeV9jb2RlIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCBjbGluaWNEYXRhLmVtYWlsKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJUaGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgaW5jb3JyZWN0IVwiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHN0b3JlZFZlcmlmeUNvZGUgPSByb3dzLnZlcmlmeV9jb2RlO1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYPCflI0gU3RvcmVkIENvZGU6ICR7c3RvcmVkVmVyaWZ5Q29kZX0sIFByb3ZpZGVkIENvZGU6ICR7Y2xpbmljRGF0YS52ZXJpZnlfY29kZX1gXHJcbiAgKTtcclxuXHJcbiAgaWYgKHN0b3JlZFZlcmlmeUNvZGUgIT09IGNsaW5pY0RhdGEudmVyaWZ5X2NvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVmVyaWZpY2F0aW9uIGNvZGUgbWlzbWF0Y2ghXCIpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBzaWdudXBfc3RhdHVzXHJcbiAgYXdhaXQgcXVlcnkoXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2xpbmljIFNFVCBzaWdudXBfc3RhdHVzID0gMSBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgeyB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJvd3M7IFxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQUEsT0FBQSxDQUFBQyxtQkFBQSxHQUFBQSxtQkFBQTtBQXVFQUQsT0FBQSxDQUFBRSxtQkFBQSxHQUFBQSxtQkFBQTtBQW1CQUYsT0FBQSxDQUFBRyxtQkFBQSxHQUFBQSxtQkFBQTtBQW9CQUgsT0FBQSxDQUFBSSxvQkFBQSxHQUFBQSxvQkFBQTtBQThCQUosT0FBQSxDQUFBSyx5QkFBQSxHQUFBQSx5QkFBQTtBQWhKQSxNQUFBQyxPQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFBQyxnQkFBQSxHQUFBRCxPQUFBO0FBRUEsU0FBc0JOLG1CQUFtQkEsQ0FBQ1EsS0FBYTs7SUFDckQsTUFBTUMsTUFBTSxHQUFHLE1BQU0sSUFBQUosT0FBQSxDQUFBSyxLQUFLLEVBQ3hCO29CQUNnQkwsT0FBQSxDQUFBTSxVQUFVO0dBQzNCLEVBQ0M7TUFDRUMsTUFBTSxFQUFFLENBQUNKLEtBQUs7S0FDZixDQUNGO0lBQ0QsT0FBT0MsTUFBTSxDQUFDSSxNQUFNLEdBQUcsQ0FBQztFQUMxQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtB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","map":{"version":3,"names":["exports","checkIfClinicExists","getClinicByPassword","getDoctorByPassword","getPatientByPassword","getClinicVerificationCode","mysql_1","require","response_error_1","email","result","query","coreSchema","values","length","password","user","clinicData","rows","console","error","ResponseError","BadRequest","storedVerifyCode","verify_code","log"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ConfirmEmail } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\n\r\nexport async function checkIfClinicExists(email: string): Promise<boolean> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? \r\n  `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result.length > 0;\r\n}\r\n\r\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       return null; // Email not found\r\n//     }\r\n\r\n//     const [doctor] = await query<RowDataPacket[]>(\r\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\r\n//       { values: [data.email, data.verify_code] }\r\n//     );\r\n//     if (!doctor) {\r\n//       return null;\r\n//     }\r\n\r\n//     const resultDoctor = await query<RowDataPacket[]>(\r\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\r\n//       { values: [1, new Date(), data.email] }\r\n//     );\r\n\r\n//     return resultDoctor;\r\n//   } catch (error) {\r\n//     console.error(\"Error confirming doctor email:\", error);\r\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\r\n//   }\r\n// }\r\n\r\n// export async function confirmClinicEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       throw new ResponseError.NotFound(\"Email not found\");\r\n//     }\r\n\r\n//     // Check if clinic exists with correct verify_code\r\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\r\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\r\n//       {\r\n//         values: [data.email],\r\n//       }\r\n//     );\r\n\r\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\r\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\r\n//     } else {\r\n//       await query<RowDataPacket[]>(\r\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\r\n//         {\r\n//           values: [1, new Date(), data.email],\r\n//         }\r\n//       );\r\n//     }\r\n\r\n//     return { success: true, message: \"Email confirmation successful\" };\r\n//   } catch (error) {\r\n//     return error;\r\n//   }\r\n// }\r\n\r\nexport async function getClinicByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.clinic \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\nexport async function getDoctorByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.patient \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function getPatientByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.doctors \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\n// export async function confirmEmailCode(email: string) {\r\n//   const result = await query<RowDataPacket>(\r\n//     `SELECT verify_code FROM ${coreSchema}.clinic WHERE email =?`,\r\n//     {\r\n//       values: [email],\r\n//     }\r\n//   );\r\n//   return result;\r\n// }\r\n\r\nexport async function getClinicVerificationCode(clinicData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the clinic data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [clinicData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\"❌ Email not found in database:\", clinicData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    `🔍 Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== clinicData.verify_code) {\r\n    console.error(\"❌ Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.clinic SET signup_status = 1 WHERE email = ?`,\r\n    { values: [clinicData.email] }\r\n  );\r\n\r\n  return rows; \r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738809454222},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.registerClinicSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerClinicSchema = yup.object().shape({\n  name: yup.string().required(\"name is required\"),\n  owner_name: yup.string().required(\"owner_name is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyQ2xpbmljU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJuYW1lIiwic3RyaW5nIiwicmVxdWlyZWQiLCJvd25lcl9uYW1lIiwiZW1haWwiLCJwaG9uZSIsIm51bGxhYmxlIiwidG9rZW5WZXJpZnkiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwiY3JlYXRlUGFzc3dvcmRTY2hlbWEiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1FbWFpbFNjaGVtYSIsInZlcmlmeV9jb2RlIiwibGVuZ3RoIiwiY2hlY2tFbWFpbFNjaGVtYSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJDbGluaWNTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIm5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgb3duZXJfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwib3duZXJfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgcGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcInBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQYXNzd29yZFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgbmV3UGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcIm5ld1Bhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbi8vIGV4cG9ydCBjb25zdCB1c2VyUm9sZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbi8vICAgZXhwb3J0ICBjb25zdCBsYXRlc3RUZW1wbGF0ZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIilcclxuICAgIC5yZXF1aXJlZChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmxlbmd0aCg0LCBcIlZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoYXJhY3RlcnNcIilcclxuICAgIC5yZXF1aXJlZChcIlZlcmlmeSBjb2RlIGlzIHJlcXVpcmVkXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0VtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxvQkFBb0IsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3JEQyxJQUFJLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQztFQUMvQ0MsVUFBVSxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsd0JBQXdCLENBQUM7RUFDM0RFLEtBQUssRUFBRVgsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0csS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDRixRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDeEVHLEtBQUssRUFBRVosR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0ssUUFBUSxFQUFFO0VBQzlCQyxXQUFXLEVBQUVkLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNLLFFBQVEsRUFBRTtFQUNwQ0UsUUFBUSxFQUFFZixHQUFHLENBQ1ZRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUM7RUFDcEVDLGVBQWUsRUFBRW5CLEdBQUcsQ0FDakJRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLDRCQUE0QjtDQUM3RCxDQUFDO0FBQ1dmLE9BQUEsQ0FBQWlCLG9CQUFvQixHQUFHcEIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3JEZSxXQUFXLEVBQUVyQixHQUFHLENBQ2JRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUM7RUFDcEVDLGVBQWUsRUFBRW5CLEdBQUcsQ0FDakJRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLDRCQUE0QjtDQUNoRSxDQUFDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRWFmLE9BQUEsQ0FBQW1CLGtCQUFrQixHQUFHdEIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ25ESyxLQUFLLEVBQUVYLEdBQUcsQ0FDUFEsTUFBTSxFQUFFLENBQ1JHLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUM3QkYsUUFBUSxDQUFDLG1CQUFtQixDQUFDO0VBQ2hDYyxXQUFXLEVBQUV2QixHQUFHLENBQ2JRLE1BQU0sRUFBRSxDQUNSZ0IsTUFBTSxDQUFDLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQyxDQUMvQ2YsUUFBUSxDQUFDLHlCQUF5QjtDQUN0QyxDQUFDO0FBRVdOLE9BQUEsQ0FBQXNCLGdCQUFnQixHQUFHekIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ2pESyxLQUFLLEVBQUVYLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxvQkFBb0I7Q0FDbEQsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerClinicSchema","object","shape","name","string","required","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const registerClinicSchema = yup.object().shape({\r\n  name: yup.string().required(\"name is required\"),\r\n  owner_name: yup.string().required(\"owner_name is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,oBAAoB,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDC,IAAI,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,kBAAkB,CAAC;EAC/CC,UAAU,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DE,KAAK,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACG,KAAK,CAAC,eAAe,CAAC,CAACF,QAAQ,CAAC,mBAAmB,CAAC;EACxEG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACK,QAAQ,EAAE;EAC9BC,WAAW,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACK,QAAQ,EAAE;EACpCE,QAAQ,EAAEf,GAAG,CACVQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEnB,GAAG,CACjBQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWf,OAAA,CAAAiB,oBAAoB,GAAGpB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDe,WAAW,EAAErB,GAAG,CACbQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEnB,GAAG,CACjBQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEaf,OAAA,CAAAmB,kBAAkB,GAAGtB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDK,KAAK,EAAEX,GAAG,CACPQ,MAAM,EAAE,CACRG,KAAK,CAAC,sBAAsB,CAAC,CAC7BF,QAAQ,CAAC,mBAAmB,CAAC;EAChCc,WAAW,EAAEvB,GAAG,CACbQ,MAAM,EAAE,CACRgB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/Cf,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAsB,gBAAgB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDK,KAAK,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738115497792},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.doctorSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  Specialization: yup.string().required(\"Specialization is required\"),\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImRvY3RvclNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlyc3RfbmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdF9uYW1lIiwiU3BlY2lhbGl6YXRpb24iLCJsaWNlbnNlTnVtYmVyIiwib3duZXJfbmFtZSIsImVtYWlsIiwicGhvbmUiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsImxlbmd0aCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZG9jdG9yU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXJzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXJzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxhc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIFNwZWNpYWxpemF0aW9uOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJTcGVjaWFsaXphdGlvbiBpcyByZXF1aXJlZFwiKSxcclxuICBsaWNlbnNlTnVtYmVyOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsaWNlbnNlTnVtYmVyIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG93bmVyX25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgcGhvbmU6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICBwYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuLy8gZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuLy8gICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAuZW1haWwoXCJJbnZhbGlkIGVtYWlsIGZvcm1hdFwiKVxyXG4gICAgLnJlcXVpcmVkKFwiRW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubGVuZ3RoKDQsIFwiVmVyaWZ5IGNvZGUgc2hvdWxkIGJlIDQgY2hhcmFjdGVyc1wiKVxyXG4gICAgLnJlcXVpcmVkKFwiVmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiksXHJcbn0pO1xyXG4i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","map":{"version":3,"names":["yup","__importStar","require","exports","doctorSchema","object","shape","first_name","string","required","last_name","Specialization","licenseNumber","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const doctorSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  Specialization: yup.string().required(\"Specialization is required\"),\r\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,cAAc,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,4BAA4B,CAAC;EACnEG,aAAa,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,2BAA2B,CAAC;EACjEI,UAAU,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDK,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACM,KAAK,CAAC,eAAe,CAAC,CAACL,QAAQ,CAAC,mBAAmB,CAAC;EACxEM,KAAK,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EAC9BC,WAAW,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EACpCE,QAAQ,EAAElB,GAAG,CACVQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWlB,OAAA,CAAAoB,oBAAoB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDkB,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEalB,OAAA,CAAAsB,kBAAkB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDQ,KAAK,EAAEd,GAAG,CACPQ,MAAM,EAAE,CACRM,KAAK,CAAC,sBAAsB,CAAC,CAC7BL,QAAQ,CAAC,mBAAmB,CAAC;EAChCiB,WAAW,EAAE1B,GAAG,CACbQ,MAAM,EAAE,CACRmB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ClB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAyB,gBAAgB,GAAG5B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDQ,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738381402102},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.patientSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.patientSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInBhdGllbnRTY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsImZpcnN0X25hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3RfbmFtZSIsIm93bmVyX25hbWUiLCJlbWFpbCIsInBob25lIiwibnVsbGFibGUiLCJ0b2tlblZlcmlmeSIsInBhc3N3b3JkIiwibWluIiwib25lT2YiLCJyZWYiLCJjb25maXJtUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybUVtYWlsU2NoZW1hIiwidmVyaWZ5X2NvZGUiLCJsZW5ndGgiLCJjaGVja0VtYWlsU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccGF0aWVudHNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0aWVudFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZmlyc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlyc3RfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBsYXN0X25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxhc3RfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBvd25lcl9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgcGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcInBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQYXNzd29yZFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgbmV3UGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcIm5ld1Bhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbi8vIGV4cG9ydCBjb25zdCB1c2VyUm9sZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbi8vICAgZXhwb3J0ICBjb25zdCBsYXRlc3RUZW1wbGF0ZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIilcclxuICAgIC5yZXF1aXJlZChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmxlbmd0aCg0LCBcIlZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoYXJhY3RlcnNcIilcclxuICAgIC5yZXF1aXJlZChcIlZlcmlmeSBjb2RlIGlzIHJlcXVpcmVkXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0VtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxhQUFhLEdBQUdKLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQUNDLEtBQUssQ0FBQztFQUM5Q0MsVUFBVSxFQUFFUCxHQUFHLENB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","map":{"version":3,"names":["yup","__importStar","require","exports","patientSchema","object","shape","first_name","string","required","last_name","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const patientSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,aAAa,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC9CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,UAAU,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACI,KAAK,CAAC,eAAe,CAAC,CAACH,QAAQ,CAAC,mBAAmB,CAAC;EACxEI,KAAK,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EAC9BC,WAAW,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EACpCE,QAAQ,EAAEhB,GAAG,CACVQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWhB,OAAA,CAAAkB,oBAAoB,GAAGrB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDgB,WAAW,EAAEtB,GAAG,CACbQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEahB,OAAA,CAAAoB,kBAAkB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDM,KAAK,EAAEZ,GAAG,CACPQ,MAAM,EAAE,CACRI,KAAK,CAAC,sBAAsB,CAAC,CAC7BH,QAAQ,CAAC,mBAAmB,CAAC;EAChCe,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRiB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ChB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAuB,gBAAgB,GAAG1B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDM,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738463217893}}