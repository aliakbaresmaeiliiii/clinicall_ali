{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = require(\"./routes/index\");\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = require(\"./middlewares/express_error_yup\");\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = require(\"./constants/constants_allowed_orginal\");\nconst express_error_response_1 = require(\"./middlewares/express_error_response\");\nconst express_auto_handle_transaction_1 = require(\"./middlewares/express_auto_handle_transaction\");\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.allowedOrigins,\n  methods: 'GET,POST,PUT,DELETE',\n  allowedHeaders: 'Content-Type,Authorization'\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set('views', path_1.default.join(`${__dirname}/../`, 'views'));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: '200mb',\n  type: 'application/json'\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, 'public')));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.routes);\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', express_error_yup_1.ExpressErrorYup);\napp.use('/v1', express_error_response_1.ExpressErrorResponse);\napp.use(express_auto_handle_transaction_1.ExpressAutoHandleTransaction);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvbl8xIiwib3B0Q29ycyIsIm9yaWdpbiIsImFsbG93ZWRPcmlnaW5zIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiYXBwIiwiZGVmYXVsdCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwibGltaXQiLCJ0eXBlIiwic3RhdGljIiwiZXhwcmVzcyIsIm13Iiwicm91dGVzIiwiRXhwcmVzc0Vycm9yWXVwIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IGhwcCBmcm9tICdocHAnO1xyXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcclxuaW1wb3J0IHJlcXVlc3RJcCBmcm9tICdyZXF1ZXN0LWlwJztcclxuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcclxuaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJ2h0dHAtZXJyb3JzJztcclxuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcclxuaW1wb3J0IHtyb3V0ZXN9IGZyb20gJy4vcm91dGVzL2luZGV4JztcclxuaW1wb3J0IHVzZXJBZ2VudCBmcm9tICdleHByZXNzLXVzZXJhZ2VudCc7XHJcbmltcG9ydCB7RXhwcmVzc0Vycm9yWXVwfSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwJztcclxuaW1wb3J0IGV4cHJlc3MsIHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQge2FsbG93ZWRPcmlnaW5zfSBmcm9tICcuL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsJztcclxuaW1wb3J0IHtFeHByZXNzRXJyb3JSZXNwb25zZX0gZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlJztcclxuaW1wb3J0IHtFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9ufSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24nO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xyXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogYWxsb3dlZE9yaWdpbnMsXHJcbiAgbWV0aG9kczogJ0dFVCxQT1NULFBVVCxERUxFVEUnLFxyXG4gIGFsbG93ZWRIZWFkZXJzOiAnQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb24nXHJcbn1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpXHJcblxyXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxyXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsICd2aWV3cycpKVxyXG4vLyBhcHAuc2V0KCd2aWV3IGVuZ2luZScsICdwdWcnKVxyXG5cclxuYXBwLnVzZShoZWxtZXQoKSlcclxuYXBwLnVzZShjb3JzKG9wdENvcnMpKVxyXG4vLyBhcHAudXNlKGxvZ2dlcignY29tYmluZWQnLCB7IHN0cmVhbTogd2luc3RvblN0cmVhbSB9KSlcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpIC8vIFRPRE8gOiAgY2hlY2sgaXQgc2hvdWxkIGJlIGZhbHNlIG9yIHRydWVcclxuYXBwLnVzZShcclxuICBleHByZXNzLmpzb24oe1xyXG4gICAgbGltaXQ6ICcyMDBtYicsXHJcbiAgICB0eXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfSlcclxuKVxyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKVxyXG5hcHAudXNlKGNvbXByZXNzaW9uKCkpXHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgJ3B1YmxpYycpKSlcclxuYXBwLnVzZShocHAoKSlcclxuYXBwLnVzZSh1c2VyQWdlbnQuZXhwcmVzcygpKVxyXG5hcHAudXNlKHJlcXVlc3RJcC5tdygpKVxyXG4vLyBUT0RPIDogYWRkIHRoaXMgbGF0ZXJcclxuXHJcblxyXG4vLyBJbml0aWFsIFJvdXRlXHJcbmFwcC51c2Uocm91dGVzKVxyXG5cclxuLy8gYXBwLnVzZSgnL3YxJywgaGFuZGxlUm9sbGJhY2tUcmFuc2FjdGlvbilcclxuYXBwLnVzZSgnL3YxJywgRXhwcmVzc0Vycm9yWXVwKVxyXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JSZXNwb25zZSlcclxuYXBwLnVzZShFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKVxyXG5cclxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZShmdW5jdGlvbiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcclxuICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpXHJcbn0pXHJcblxyXG4vLyBlcnJvciBoYW5kbGVyXHJcbmFwcC51c2UoZnVuY3Rpb24gKGVycjogYW55LCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xyXG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XHJcbiAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2VcclxuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge31cclxuXHJcbiAgLy8gcmVuZGVyIHRoZSBlcnJvciBwYWdlXHJcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgcmVzLmpzb24oe1xyXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICBlcnJvcjogZXJyXHJcbiAgfSk7XHJcbn0pXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0EsTUFBQUEsS0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLE1BQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxZQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFLLGFBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQU0sYUFBQSxHQUFBUCxlQUFBLENBQUFDLE9BQUE7QUFD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","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_auto_handle_transaction_1","optCors","origin","allowedOrigins","methods","allowedHeaders","app","default","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","routes","ExpressErrorYup","ExpressErrorResponse","ExpressAutoHandleTransaction","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport hpp from 'hpp';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport helmet from 'helmet';\r\nimport requestIp from 'request-ip';\r\nimport compression from 'compression';\r\nimport createError from 'http-errors';\r\nimport cookieParser from 'cookie-parser';\r\nimport {routes} from './routes/index';\r\nimport userAgent from 'express-useragent';\r\nimport {ExpressErrorYup} from './middlewares/express_error_yup';\r\nimport express, { NextFunction, Request, Response } from 'express';\r\nimport {allowedOrigins} from './constants/constants_allowed_orginal';\r\nimport {ExpressErrorResponse} from './middlewares/express_error_response';\r\nimport {ExpressAutoHandleTransaction} from './middlewares/express_auto_handle_transaction';\r\n\r\n// TODO: change to .ts\r\nconst optCors: cors.CorsOptions = {\r\n  origin: allowedOrigins,\r\n  methods: 'GET,POST,PUT,DELETE',\r\n  allowedHeaders: 'Content-Type,Authorization'\r\n}\r\nconst app = express()\r\n\r\n// view engine setup\r\napp.set('views', path.join(`${__dirname}/../`, 'views'))\r\n// app.set('view engine', 'pug')\r\n\r\napp.use(helmet())\r\napp.use(cors(optCors))\r\n// app.use(logger('combined', { stream: winstonStream }))\r\napp.use(express.urlencoded({ extended: false })) // TODO :  check it should be false or true\r\napp.use(\r\n  express.json({\r\n    limit: '200mb',\r\n    type: 'application/json',\r\n  })\r\n)\r\napp.use(cookieParser())\r\napp.use(compression())\r\napp.use(express.static(path.join(`${__dirname}/../`, 'public')))\r\napp.use(hpp())\r\napp.use(userAgent.express())\r\napp.use(requestIp.mw())\r\n// TODO : add this later\r\n\r\n\r\n// Initial Route\r\napp.use(routes)\r\n\r\n// app.use('/v1', handleRollbackTransaction)\r\napp.use('/v1', ExpressErrorYup)\r\napp.use('/v1', ExpressErrorResponse)\r\napp.use(ExpressAutoHandleTransaction)\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req: Request, res: Response, next: NextFunction) {\r\n  next(createError(404))\r\n})\r\n\r\n// error handler\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.json({\r\n    message: err.message,\r\n    error: err\r\n  });\r\n})\r\n\r\nmodule.exports = app"],"mappings":";;;;;;;;;;AAAA;AACA,MAAAA,KAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,MAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,QAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,MAAAI,YAAA,GAAAL,eAAA,CAAAC,OAAA;AACA,MAAAK,aAAA,GAAAN,eAAA,CAAAC,OAAA;AACA,MAAAM,aAAA,GAAAP,eAAA,CAAAC,OAAA;AACA,MAAAO,eAAA,GAAAR,eAAA,CAAAC,OAAA;AACA,MAAAQ,OAAA,GAAAR,OAAA;AACA,MAAAS,mBAAA,GAAAV,eAAA,CAAAC,OAAA;AACA,MAAAU,mBAAA,GAAAV,OAAA;AACA,MAAAW,SAAA,GAAAZ,eAAA,CAAAC,OAAA;AACA,MAAAY,2BAAA,GAAAZ,OAAA;AACA,MAAAa,wBAAA,GAAAb,OAAA;AACA,MAAAc,iCAAA,GAAAd,OAAA;AAEA;AACA,MAAMe,OAAO,GAAqB;EAChCC,MAAM,EAAEJ,2BAAA,CAAAK,cAAc;EACtBC,OAAO,EAAE,qBAAqB;EAC9BC,cAAc,EAAE;CACjB;AACD,MAAMC,GAAG,GAAG,IAAAT,SAAA,CAAAU,OAAO,GAAE;AAErB;AACAD,GAAG,CAACE,GAAG,CAAC,OAAO,EAAEpB,MAAA,CAAAmB,OAAI,CAACE,IAAI,CAAC,GAAGC,SAAS,MAAM,EAAE,OAAO,CAAC,CAAC;AACxD;AAEAJ,GAAG,CAACK,GAAG,CAAC,IAAAtB,QAAA,CAAAkB,OAAM,GAAE,CAAC;AACjBD,GAAG,CAACK,GAAG,CAAC,IAAAxB,MAAA,CAAAoB,OAAI,EAACN,OAAO,CAAC,CAAC;AACtB;AACAK,GAAG,CAACK,GAAG,CAACd,SAAA,CAAAU,OAAO,CAACK,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAE,CAAC,CAAC,EAAC;AACjDP,GAAG,CAACK,GAAG,CACLd,SAAA,CAAAU,OAAO,CAACO,IAAI,CAAC;EACXC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;CACP,CAAC,CACH;AACDV,GAAG,CAACK,GAAG,CAAC,IAAAlB,eAAA,CAAAc,OAAY,GAAE,CAAC;AACvBD,GAAG,CAACK,GAAG,CAAC,IAAApB,aAAA,CAAAgB,OAAW,GAAE,CAAC;AACtBD,GAAG,CAACK,GAAG,CAACd,SAAA,CAAAU,OAAO,CAACU,MAAM,CAAC7B,MAAA,CAAAmB,OAAI,CAACE,IAAI,CAAC,GAAGC,SAAS,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC;AAChEJ,GAAG,CAACK,GAAG,CAAC,IAAA3B,KAAA,CAAAuB,OAAG,GAAE,CAAC;AACdD,GAAG,CAACK,GAAG,CAAChB,mBAAA,CAAAY,OAAS,CAACW,OAAO,EAAE,CAAC;AAC5BZ,GAAG,CAACK,GAAG,CAACrB,YAAA,CAAAiB,OAAS,CAACY,EAAE,EAAE,CAAC;AACvB;AAGA;AACAb,GAAG,CAACK,GAAG,CAACjB,OAAA,CAAA0B,MAAM,CAAC;AAEf;AACAd,GAAG,CAACK,GAAG,CAAC,KAAK,EAAEf,mBAAA,CAAAyB,eAAe,CAAC;AAC/Bf,GAAG,CAACK,GAAG,CAAC,KAAK,EAAEZ,wBAAA,CAAAuB,oBAAoB,CAAC;AACpChB,GAAG,CAACK,GAAG,CAACX,iCAAA,CAAAuB,4BAA4B,CAAC;AAErC;AACAjB,GAAG,CAACK,GAAG,CAAC,UAAUa,GAAY,EAAEC,GAAa,EAAEC,IAAkB;EAC/DA,IAAI,CAAC,IAAAlC,aAAA,CAAAe,OAAW,EAAC,GAAG,CAAC,CAAC;AACxB,CAAC,CAAC;AAEF;AACAD,GAAG,CAACK,GAAG,CAAC,UAAUgB,GAAQ,EAAEH,GAAY,EAAEC,GAAa,EAAEC,IAAkB;EACzE;EACAD,GAAG,CAACG,MAAM,CAACC,OAAO,GAAGF,GAAG,CAACE,OAAO;EAChCJ,GAAG,CAACG,MAAM,CAACE,KAAK,GAAGN,GAAG,CAAClB,GAAG,CAACyB,GAAG,CAAC,KAAK,CAAC,KAAK,aAAa,GAAGJ,GAAG,GAAG,EAAE;EAElE;EACAF,GAAG,CAACO,MAAM,CAACL,GAAG,CAACK,MAAM,IAAI,GAAG,CAAC;EAC7BP,GAAG,CAACX,IAAI,CAAC;IACPe,OAAO,EAAEF,GAAG,CAACE,OAAO;IACpBC,KAAK,EAAEH;GACR,CAAC;AACJ,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAG5B,GAAG","ignoreList":[]}},"mtime":1727918232681},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.routes = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = require(\"./public\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nexports.routes = express_1.default.Router();\n/* Home Page. */\nexports.routes.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nexports.routes.get('/v1', function (req, res, next) {\n  throw new response_error_1.ResponseError.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nexports.routes.use('/v1', public_1.router);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZXhwb3J0cyIsInJvdXRlcyIsImRlZmF1bHQiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsIlJlc3BvbnNlRXJyb3IiLCJGb3JiaWRkZW4iLCJ1c2UiLCJyb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQge3JvdXRlcn0gZnJvbSAnLi9wdWJsaWMnO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZXhwb3J0IGNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEhvbWUgUGFnZS4gKi9cbnJvdXRlcy5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcblxuICAgIHJldHVybiByZXMuc2VuZChgPGgxPldlbGNvbWUgVG8gQ2xpY25pYyBTdXBwb3J0IENlbnRlciBzZXJ2ZXI8L2gxPjxici8+PGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkZpbmQgQXBpIGRvY3MgSGVyZSA6PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPjxhPi92MS9hcGktZG9jczwvYT48L2gzPmApXG4gIH0pXG5cbi8qIEZvcmJpZGRlbiBQYWdlLiAqL1xucm91dGVzLmdldCgnL3YxJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0ICkge1xuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkZvcmJpZGRlbignZm9yYmlkZGVuLCB3cm9uZyBhY2Nlc3MgZW5kcG9pbnQnKVxuICB9KVxuXG4vKiBEZWNsYXJlIFJvdXRlICovXG5yb3V0ZXMudXNlKCcvdjEnLCByb3V0ZXIpXG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVhRyxPQUFBLENBQUFDLE1BQU0sR0FBR04sU0FBQSxDQUFBTyxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUV0QztBQUNBSCxPQUFBLENBQUFDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsT0FBQSxDQUFBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFDdEMsTUFBTSxJQUFJUixnQkFBQSxDQUFBVSxhQUFhLENBQUNDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFSjtBQUNBVixPQUFBLENBQUFDLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLEtBQUssRUFBRWIsUUFBQSxDQUFBYyxNQUFNLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","exports","routes","default","Router","get","req","res","next","send","ResponseError","Forbidden","use","router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\nimport {router} from './public';\nimport {ResponseError} from '../modules/error/response_error';\n\nexport const routes = express.Router();\n\n/* Home Page. */\nroutes.get('/', function (req, res, next) {\n\n    return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`)\n  })\n\n/* Forbidden Page. */\nroutes.get('/v1', function (req, res, next ) {\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\n  })\n\n/* Declare Route */\nroutes.use('/v1', router)\n\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AAEaG,OAAA,CAAAC,MAAM,GAAGN,SAAA,CAAAO,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAH,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAR,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIR,gBAAA,CAAAU,aAAa,CAACC,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAV,OAAA,CAAAC,MAAM,CAACU,GAAG,CAAC,KAAK,EAAEb,QAAA,CAAAc,MAAM,CAAC","ignoreList":[]}},"mtime":1725677148456},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.router = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nexports.router = express_1.default.Router();\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\nrequire(\"../controller/doctors/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJvdXRlciIsImRlZmF1bHQiLCJSb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9wdWJsaWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gIEFQSXNcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL25hdi1pdGVtcy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hcHBvaW50bWVudC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9kb2N0b3JzL2NvbnRyb2xsZXJcIik7XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsTUFBTSxHQUFHSixTQUFBLENBQUFLLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXRDO0FBQ0FKLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUN4Q0EsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDN0NBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3pDQSxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDNUNBLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_1","__importDefault","require","exports","router","default","Router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nexport const router = express.Router();\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\nrequire(\"../controller/doctors/controller\");\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,MAAM,GAAGJ,SAAA,CAAAK,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAJ,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,kCAAkC,CAAC","ignoreList":[]}},"mtime":1725612729047},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.post(`/auth/sign-up`, (0, async_handler_1.asyncHandler)(function signUp(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.signUp(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/sign-in\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.signIn(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// router.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJzZXJ2aWNlXzEiLCJhc3luY19oYW5kbGVyXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJzaWduVXAiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJkYXRhIiwiQXV0aFNlcnZpY2UiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiZ2V0TmF2SXRlbXMiLCJzaWduSW4iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuXG5pbXBvcnQge0F1dGhTZXJ2aWNlfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge2FzeW5jSGFuZGxlcn0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuXG5yb3V0ZXIucG9zdChcbiAgYC9hdXRoL3NpZ24tdXBgLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gc2lnblVwKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLnNpZ25VcChmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcblxucm91dGVyLnBvc3QoXG4gIFwiL3NpZ24taW5cIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLnNpZ25Jbihmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcblxuLy8gcm91dGVyLnBvc3QoXG4vLyAgIGAvYXV0aC9yZWZyZXNoLXRva2VuYCxcbi8vICAgQXV0aG9yaXphdGlvbixcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGF1dGhSZWZyZXNoVG9rZW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4vLyAgICAgY29uc3QgeyBlbWFpbCwgcmVmcmVzaFRva2VuIH0gPSByZXEuYm9keSgpO1xuLy8gICB9KVxuLy8gKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxjQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFBQyxTQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxlQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFFQUcsUUFBQSxDQUFBQyxNQUFNLENBQUNDLElBQUksQ0FDVCxlQUFlLEVBQ2YsSUFBQUgsZUFBQSxDQUFBSSxZQUFZLEVBQUMsU0FBZUMsTUFBTUEsQ0FBQ0MsR0FBWSxFQUFFQyxHQUFhOztJQUM1RCxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVgsU0FBQSxDQUFBWSxXQUFXLENBQUNOLE1BQU0sQ0FBQ0csUUFBUSxDQUFDO0lBQy9DLE1BQU1JLGFBQWEsR0FBR2YsY0FBQSxDQUFBZ0IsYUFBYSxDQUFDQyxHQUFHLENBQUNKLElBQUksQ0FBQztJQUM3Q0gsR0FBRyxDQUFDUSxNQUFNLENBQUNILGFBQWEsQ0FBQ0ksSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0wsYUFBYSxDQUFDO0VBQ3BELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFgsUUFBQSxDQUFBQyxNQUFNLENBQUNDLElBQUksQ0FDVCxVQUFVLEVBQ1YsSUFBQUgsZUFBQSxDQUFBSSxZQUFZLEVBQUMsU0FBZWMsV0FBV0EsQ0FBQ1osR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVgsU0FBQSxDQUFBWSxXQUFXLENBQUNRLE1BQU0sQ0FBQ1gsUUFBUSxDQUFDO0lBQy9DLE1BQU1JLGFBQWEsR0FBRyxNQUFNZixjQUFBLENBQUFnQixhQUFhLENBQUNDLEdBQUcsQ0FBQ0osSUFBSSxDQUFDO0lBQ25ESCxHQUFHLENBQUNRLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFDcEQsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["app_response_1","require","service_1","async_handler_1","public_1","router","post","asyncHandler","signUp","req","res","formData","body","data","AuthService","buildResponse","BuildResponse","get","status","code","json","getNavItems","signIn"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\n\nimport {AuthService} from \"./service\";\nimport {asyncHandler} from \"../../helper/async-handler\";\nimport { router } from \"../../routes/public\";\n\nrouter.post(\n  `/auth/sign-up`,\n  asyncHandler(async function signUp(req: Request, res: Response) {\n    const formData = req.body;\n    const data = await AuthService.signUp(formData);\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\nrouter.post(\n  \"/sign-in\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.signIn(formData);\n    const buildResponse = await BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n// router.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,cAAA,GAAAC,OAAA;AAEA,MAAAC,SAAA,GAAAD,OAAA;AACA,MAAAE,eAAA,GAAAF,OAAA;AACA,MAAAG,QAAA,GAAAH,OAAA;AAEAG,QAAA,CAAAC,MAAM,CAACC,IAAI,CACT,eAAe,EACf,IAAAH,eAAA,CAAAI,YAAY,EAAC,SAAeC,MAAMA,CAACC,GAAY,EAAEC,GAAa;;IAC5D,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMX,SAAA,CAAAY,WAAW,CAACN,MAAM,CAACG,QAAQ,CAAC;IAC/C,MAAMI,aAAa,GAAGf,cAAA,CAAAgB,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7CH,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EACpD,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAC,MAAM,CAACC,IAAI,CACT,UAAU,EACV,IAAAH,eAAA,CAAAI,YAAY,EAAC,SAAec,WAAWA,CAACZ,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMX,SAAA,CAAAY,WAAW,CAACQ,MAAM,CAACX,QAAQ,CAAC;IAC/C,MAAMI,aAAa,GAAG,MAAMf,cAAA,CAAAgB,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IACnDH,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EACpD,CAAC;CAAA,CAAC,CACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1727928261521},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BuildResponse = void 0;\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.BuildResponse = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccmVzcG9uc2VcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xuXG50eXBlIERhdGFSZXNwb25zZSA9XG4gIHwge1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgY29kZT86IG51bWJlcjtcbiAgICB9XG4gIHwgYW55O1xuXG5leHBvcnQgY2xhc3MgQnVpbGRSZXNwb25zZSB7XG4gIHByaXZhdGUgc3RhdGljIGJhc2VSZXNwb25zZShkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1lc3NhZ2UgPSBcImRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQhXCIsXG4gICAgICBjb2RlID0gMjAwLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBkYXRhUmVzcG9uc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4ucmVzdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIFN1Y2Nlc3NcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyBnZXQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gdGhpcy5iYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBDcmVhdGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBjb2RkZTogMjAxLFxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVkIGFkZGVkXCIsXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzcG9uc2UgVXBkYXRlXG4gICAqL1xuXG4gIHB1YmxpYyBzdGF0aWMgdXBkYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcInRoZSBkYXRhIGhhcyBiZWVkIHVwZGF0ZWRcIixcbiAgICAgIC4uLmRhdGFSZXNwb25zZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBEZWxldGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcImRhdGEgaGFzIGJlZW4gZGVsZXRlZFwiLFxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhcHBSZXNwb25zZShkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxuICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlID8gZGF0YS5tZXNzYWdlIDogXCJcIixcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgPyBkYXRhLnN0YXR1cyA6IDAsXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VDb2RlOiBkYXRhLm1lc3NhZ2VDb2RlID8gZGF0YS5tZXNzYWdlQ29kZSA6IFwiXCIsXG4gICAgICBtZXNzYWdlS2luZDogZGF0YS5tZXNzYWdlS2luZCA/IGRhdGEubWVzc2FnZUtpbmQgOiBudWxsLFxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXG4gICAgICBkYXRhOiBkYXRhLmRhdGEgPyBkYXRhLmRhdGEgOiBudWxsLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIH1cbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVNBLE1BQWFBLGFBQWE7RUFDaEIsT0FBT0MsWUFBWUEsQ0FBQ0MsWUFBMEI7SUFDcEQsTUFBTTtRQUNKQyxPQUFPLEdBQUcseUJBQXlCO1FBQ25DQyxJQUFJLEdBQUc7TUFBRyxJQUVSRixZQUFZO01BRFhHLElBQUksR0FBQUMsTUFBQSxDQUNMSixZQUFZLEVBSlYsbUJBSUwsQ0FBZTtJQUNoQixPQUFBSyxNQUFBLENBQUFDLE1BQUE7TUFDRUosSUFBSTtNQUNKRDtJQUFPLEdBQ0pFLElBQUk7RUFFWDtFQUVBOzs7RUFJTyxPQUFPSSxHQUFHQSxDQUFDUCxZQUEwQjtJQUMxQyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxZQUFZLENBQUM7RUFDeEM7RUFFQTs7O0VBR08sT0FBT1EsT0FBT0EsQ0FBQ1IsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCRyxLQUFLLEVBQUUsR0FBRztNQUNWUixPQUFPLEVBQUU7SUFBcUIsR0FDM0JELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUlPLE9BQU9VLE9BQU9BLENBQUNWLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQTJCLEdBQ2pDRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFHTyxPQUFPVyxPQUFPQSxDQUFDWCxZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUF1QixHQUM3QkQsWUFBWSxFQUNmO0VBQ0o7RUFFTyxPQUFPWSxXQUFXQSxDQUFDQyxJQUFTO0lBQ2pDLE9BQU87TUFDTFgsSUFBSSxFQUFFVyxJQUFJLENBQUNYLElBQUksR0FBR1csSUFBSSxDQUFDWCxJQUFJLEdBQUcsR0FBRztNQUNqQ0QsT0FBTyxFQUFFWSxJQUFJLENBQUNaLE9BQU8sR0FBR1ksSUFBSSxDQUFDWixPQUFPLEdBQUcsRUFBRTtNQUN6Q2EsTUFBTSxFQUFFRCxJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFRixJQUFJLENBQUNFLFVBQVUsR0FBR0YsSUFBSSxDQUFDRSxVQUFVLEdBQUcsS0FBSztNQUNyREMsV0FBVyxFQUFFSCxJQUFJLENBQUNHLFdBQVcsR0FBR0gsSUFBSSxDQUFDRyxXQUFXLEdBQUcsRUFBRTtNQUNyREMsV0FBVyxFQUFFSixJQUFJLENBQUNJLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSTtNQUN2REMsYUFBYSxFQUFFTCxJQUFJLENBQUNLLGFBQWEsR0FBR0wsSUFBSSxDQUFDSyxhQUFhLEdBQUcsS0FBSztNQUM5REwsSUFBSSxFQUFFQSxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLEdBQUc7S0FDaEI7RUFDbEI7O0FBakVGTSxPQUFBLENBQUFyQixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\response\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\n\ntype DataResponse =\n  | {\n      message: string;\n      code?: number;\n    }\n  | any;\n\nexport class BuildResponse {\n  private static baseResponse(dataResponse: DataResponse) {\n    const {\n      message = \"data has been received!\",\n      code = 200,\n      ...rest\n    } = dataResponse;\n    return {\n      code,\n      message,\n      ...rest,\n    };\n  }\n\n  /**\n   * Response Success\n   */\n\n  public static get(dataResponse: DataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n\n  /**\n   * Response Create\n   */\n  public static created(dataResponse: DataResponse) {\n    return this.baseResponse({\n      codde: 201,\n      message: \"data has beed added\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Update\n   */\n\n  public static updated(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"the data has beed updated\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Delete\n   */\n  public static deleted(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"data has been deleted\",\n      ...dataResponse,\n    });\n  }\n\n  public static appResponse(data: any) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null,\n    } as AppResponse;\n  }\n}\n\n"],"mappings":";;;;;;;;;;;;;;AASA,MAAaA,aAAa;EAChB,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAjEFM,OAAA,CAAArB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830104},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = require(\"../../helper/send_email\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst sercvice_1 = require(\"../user/sercvice\");\nconst db_1 = require(\"../../bin/db\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass AuthService {\n  static signUp(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const currentUser = yield sercvice_1.UserService.validateUserEmail(formData.email);\n      if (currentUser) {\n        return {\n          message: \"the user already exist !\",\n          code: 400,\n          currentUser\n        };\n      }\n      // const getNickName = await UserService.checkNickName(formData.email);\n      // if (getNickName === formData.email) {\n      //   return {\n      //     message: \"the nickname is already exist!\",\n      //     code: 400,\n      //     getNickName,\n      //   };\n      // }\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.verify_code = (0, common_1.getUniqueCodev3)();\n      formData.tokenVerify = tokenVerify;\n      (0, use_validation_1.useValidation)(schema_1.registerSchema, formData);\n      const newUserId = yield (0, db_1.createUser)(formData);\n      if (!newUserId) throw new response_error_1.ResponseError.BadRequest(\"Cannot add user in the database !\");\n      send_email_1.SendEmail.AccountRegister(formData);\n      return {\n        message: null,\n        newUser: {\n          user_id: newUserId,\n          email: formData.email\n        }\n      };\n    });\n  }\n  static signIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const checkValidation = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n      const userData = yield (0, db_1.getUserByPassword)(checkValidation.email, checkValidation.password);\n      const match = yield new Promise((resolve, reject) => {\n        var _a;\n        bcrypt_1.default.compare(formData.password, (_a = userData[0]) === null || _a === void 0 ? void 0 : _a.password, (err, isMatch) => {\n          if (err) reject(err);\n          resolve(isMatch);\n        });\n      });\n      if (!match) {\n        throw new response_error_1.ResponseError.NotFound(\"account not found or has been deleted\");\n      }\n      if (!userData) {\n        throw new response_error_1.ResponseError.NotFound(\"account not found or has been deleted\");\n      } else if (userData.emailConfirmed === 0) {\n        throw new response_error_1.ResponseError.BadRequest(\"email is not confirmed\");\n      }\n      const comparePassword = true;\n      if (comparePassword) {\n        const user = {\n          user_id: userData[0].user_id,\n          userName: userData[0].userName,\n          email: userData[0].email,\n          imgUser: userData[0].imgUser,\n          mobile: userData[0].mobile,\n          address: userData[0].address,\n          dateOfBirth: userData[0].dateOfBirth,\n          tokenVerify: userData[0].tokenVerify,\n          roles: [],\n          permissions: []\n        };\n        userData.forEach(element => {\n          if (element.role_name && !user.roles.includes(element.role_name)) {\n            user.roles.push(element.role_name);\n          }\n          if (element.permission_name && !user.permissions.includes(element.permission_name)) {\n            user.permissions.push(element.permission_name);\n          }\n        });\n        return {\n          isSuccessfull: true,\n          showToUser: true,\n          messageCode: \"200\",\n          messageKind: 1,\n          message: \"login is successfully\",\n          data: user\n        };\n      } else {\n        throw new response_error_1.ResponseError.Unauthorized(\"Invalid password\");\n      }\n    });\n  }\n}\nexports.AuthService = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJjb21tb25fMSIsInNlbmRfZW1haWxfMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwic2NoZW1hXzEiLCJzZXJjdmljZV8xIiwiZGJfMSIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIiwicHJvY2VzcyIsImVudiIsIkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCIsIkpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQiLCJleHBpcmVzSW4iLCJkZWZhdWx0IiwiQXV0aFNlcnZpY2UiLCJzaWduVXAiLCJmb3JtRGF0YSIsImN1cnJlbnRVc2VyIiwiVXNlclNlcnZpY2UiLCJ2YWxpZGF0ZVVzZXJFbWFpbCIsImVtYWlsIiwibWVzc2FnZSIsImNvZGUiLCJnZW5lcmF0ZVRva2VuIiwiZ2V0VW5pcXVlQ29kZXYyIiwidG9rZW5WZXJpZnkiLCJzaWduIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwidmVyaWZ5X2NvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJ1c2VWYWxpZGF0aW9uIiwicmVnaXN0ZXJTY2hlbWEiLCJuZXdVc2VySWQiLCJjcmVhdGVVc2VyIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJTZW5kRW1haWwiLCJBY2NvdW50UmVnaXN0ZXIiLCJuZXdVc2VyIiwidXNlcl9pZCIsInNpZ25JbiIsImNoZWNrVmFsaWRhdGlvbiIsImxvZ2luU2NoZW1hIiwidXNlckRhdGEiLCJnZXRVc2VyQnlQYXNzd29yZCIsInBhc3N3b3JkIiwibWF0Y2giLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbXBhcmUiLCJfYSIsImVyciIsImlzTWF0Y2giLCJOb3RGb3VuZCIsImVtYWlsQ29uZmlybWVkIiwiY29tcGFyZVBhc3N3b3JkIiwidXNlciIsInVzZXJOYW1lIiwiaW1nVXNlciIsIm1vYmlsZSIsImFkZHJlc3MiLCJkYXRlT2ZCaXJ0aCIsInJvbGVzIiwicGVybWlzc2lvbnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJvbGVfbmFtZSIsImluY2x1ZGVzIiwicHVzaCIsInBlcm1pc3Npb25fbmFtZSIsImlzU3VjY2Vzc2Z1bGwiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImRhdGEiLCJVbmF1dGhvcml6ZWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgbXMgZnJvbSBcIm1zXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MiwgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHtTZW5kRW1haWx9IGZyb20gXCIuLi8uLi9oZWxwZXIvc2VuZF9lbWFpbFwiO1xyXG5pbXBvcnQge3VzZVZhbGlkYXRpb259IGZyb20gXCIuLi8uLi9oZWxwZXIvdXNlX3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHtsb2dpblNjaGVtYSwgcmVnaXN0ZXJTY2hlbWF9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5pbXBvcnQgeyBBcHBSZXNwb25zZSB9IGZyb20gXCIuLi8uLi90eXBlcy9yZXNwb25zZS5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHtVc2VyU2VydmljZX0gZnJvbSBcIi4uL3VzZXIvc2VyY3ZpY2VcIjtcclxuaW1wb3J0IHsgY3JlYXRlVXNlciwgZ2V0VXNlckJ5UGFzc3dvcmQgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5jb25zdCB7IEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLCBKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4gfTogYW55ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyAxIERheXNcclxuY29uc3QgSldUX1JFRlJFU0hfVE9LRU5fRVhQSVJFRCA9XHJcbiAgcHJvY2Vzcy5lbnYuSldUX1JFRlJFU0hfVE9LRU5fRVhQSVJFRCB8fCBcIjMwZFwiOyAvLyAzMCBEYXlzXHJcblxyXG5jb25zdCBleHBpcmVzSW4gPSBtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBBdXRoU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBzaWduVXAoZm9ybURhdGE6IENyZWF0ZVVzZXIpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlclNlcnZpY2UudmFsaWRhdGVVc2VyRW1haWwoZm9ybURhdGEuZW1haWwpO1xyXG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwidGhlIHVzZXIgYWxyZWFkeSBleGlzdCAhXCIsIGNvZGU6IDQwMCwgY3VycmVudFVzZXIgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zdCBnZXROaWNrTmFtZSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEuZW1haWwpO1xyXG4gICAgLy8gaWYgKGdldE5pY2tOYW1lID09PSBmb3JtRGF0YS5lbWFpbCkge1xyXG4gICAgLy8gICByZXR1cm4ge1xyXG4gICAgLy8gICAgIG1lc3NhZ2U6IFwidGhlIG5pY2tuYW1lIGlzIGFscmVhZHkgZXhpc3QhXCIsXHJcbiAgICAvLyAgICAgY29kZTogNDAwLFxyXG4gICAgLy8gICAgIGdldE5pY2tOYW1lLFxyXG4gICAgLy8gICB9O1xyXG4gICAgLy8gfVxyXG4gICAgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IHtcclxuICAgICAgY29kZTogZ2V0VW5pcXVlQ29kZXYyKCksXHJcbiAgICB9O1xyXG4gICAgY29uc3QgdG9rZW5WZXJpZnkgPSBqd3Quc2lnbihcclxuICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShnZW5lcmF0ZVRva2VuKSksXHJcbiAgICAgIEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLFxyXG4gICAgICB7XHJcbiAgICAgICAgZXhwaXJlc0luLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGZvcm1EYXRhLnZlcmlmeV9jb2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XHJcbiAgICBmb3JtRGF0YS50b2tlblZlcmlmeSA9IHRva2VuVmVyaWZ5O1xyXG4gICAgdXNlVmFsaWRhdGlvbihyZWdpc3RlclNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgY29uc3QgbmV3VXNlcklkID0gYXdhaXQgY3JlYXRlVXNlcihmb3JtRGF0YSk7XHJcbiAgICBpZiAoIW5ld1VzZXJJZClcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkNhbm5vdCBhZGQgdXNlciBpbiB0aGUgZGF0YWJhc2UgIVwiKTtcclxuICAgIFNlbmRFbWFpbC5BY2NvdW50UmVnaXN0ZXIoZm9ybURhdGEpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogbnVsbCxcclxuICAgICAgbmV3VXNlcjoge1xyXG4gICAgICAgIHVzZXJfaWQ6IG5ld1VzZXJJZCxcclxuICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBzaWduSW4oZm9ybURhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGNoZWNrVmFsaWRhdGlvbiA9IHVzZVZhbGlkYXRpb24obG9naW5TY2hlbWEsIGZvcm1EYXRhKTtcclxuXHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldFVzZXJCeVBhc3N3b3JkKFxyXG4gICAgICBjaGVja1ZhbGlkYXRpb24uZW1haWwsXHJcbiAgICAgIGNoZWNrVmFsaWRhdGlvbi5wYXNzd29yZFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBtYXRjaCA9IGF3YWl0IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgYmNyeXB0LmNvbXBhcmUoXHJcbiAgICAgICAgZm9ybURhdGEucGFzc3dvcmQsXHJcbiAgICAgICAgdXNlckRhdGFbMF0/LnBhc3N3b3JkLFxyXG4gICAgICAgIChlcnIsIGlzTWF0Y2gpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgcmVzb2x2ZShpc01hdGNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJhY2NvdW50IG5vdCBmb3VuZCBvciBoYXMgYmVlbiBkZWxldGVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlckRhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJhY2NvdW50IG5vdCBmb3VuZCBvciBoYXMgYmVlbiBkZWxldGVkXCIpO1xyXG4gICAgfSBlbHNlIGlmICh1c2VyRGF0YS5lbWFpbENvbmZpcm1lZCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiZW1haWwgaXMgbm90IGNvbmZpcm1lZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb21wYXJlUGFzc3dvcmQgPSB0cnVlO1xyXG5cclxuICAgIGlmIChjb21wYXJlUGFzc3dvcmQpIHtcclxuICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICB1c2VyX2lkOiB1c2VyRGF0YVswXS51c2VyX2lkLCBcclxuICAgICAgICB1c2VyTmFtZTogdXNlckRhdGFbMF0udXNlck5hbWUsIFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCxcclxuICAgICAgICBpbWdVc2VyOiB1c2VyRGF0YVswXS5pbWdVc2VyLFxyXG4gICAgICAgIG1vYmlsZTogdXNlckRhdGFbMF0ubW9iaWxlLFxyXG4gICAgICAgIGFkZHJlc3M6IHVzZXJEYXRhWzBdLmFkZHJlc3MsXHJcbiAgICAgICAgZGF0ZU9mQmlydGg6IHVzZXJEYXRhWzBdLmRhdGVPZkJpcnRoLFxyXG4gICAgICAgIHRva2VuVmVyaWZ5OiB1c2VyRGF0YVswXS50b2tlblZlcmlmeSxcclxuICAgICAgICByb2xlczogW10gYXMgc3RyaW5nW10sXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgICB9O1xyXG4gICAgICB1c2VyRGF0YS5mb3JFYWNoKChlbGVtZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoZWxlbWVudC5yb2xlX25hbWUgJiYgIXVzZXIucm9sZXMuaW5jbHVkZXMoZWxlbWVudC5yb2xlX25hbWUpKSB7XHJcbiAgICAgICAgICB1c2VyLnJvbGVzLnB1c2goZWxlbWVudC5yb2xlX25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBlbGVtZW50LnBlcm1pc3Npb25fbmFtZSAmJlxyXG4gICAgICAgICAgIXVzZXIucGVybWlzc2lvbnMuaW5jbHVkZXMoZWxlbWVudC5wZXJtaXNzaW9uX25hbWUpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB1c2VyLnBlcm1pc3Npb25zLnB1c2goZWxlbWVudC5wZXJtaXNzaW9uX25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgICAgICBzaG93VG9Vc2VyOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2VDb2RlOiBcIjIwMFwiLFxyXG4gICAgICAgIG1lc3NhZ2VLaW5kOiAxLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwibG9naW4gaXMgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgICAgZGF0YTogdXNlcixcclxuICAgICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgcGFzc3dvcmRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLElBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksWUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssZ0JBQUEsR0FBQUwsT0FBQTtBQUNBLE1BQUFNLGdCQUFBLEdBQUFOLE9BQUE7QUFFQSxNQUFBTyxRQUFBLEdBQUFQLE9BQUE7QUFFQSxNQUFBUSxVQUFBLEdBQUFSLE9BQUE7QUFDQSxNQUFBUyxJQUFBLEdBQUFULE9BQUE7QUFFQSxNQUFNO0VBQUVVLHVCQUF1QjtFQUFFQztBQUF3QixDQUFFLEdBQVFDLE9BQU8sQ0FBQ0MsR0FBRztBQUU5RSxNQUFNQyx3QkFB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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","common_1","send_email_1","use_validation_1","response_error_1","schema_1","sercvice_1","db_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","JWT_REFRESH_TOKEN_EXPIRED","expiresIn","default","AuthService","signUp","formData","currentUser","UserService","validateUserEmail","email","message","code","generateToken","getUniqueCodev2","tokenVerify","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","useValidation","registerSchema","newUserId","createUser","ResponseError","BadRequest","SendEmail","AccountRegister","newUser","user_id","signIn","checkValidation","loginSchema","userData","getUserByPassword","password","match","Promise","resolve","reject","compare","_a","err","isMatch","NotFound","emailConfirmed","comparePassword","user","userName","imgUser","mobile","address","dateOfBirth","roles","permissions","forEach","element","role_name","includes","push","permission_name","isSuccessfull","showToUser","messageCode","messageKind","data","Unauthorized","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/service.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport {SendEmail} from \"../../helper/send_email\";\r\nimport {useValidation} from \"../../helper/use_validation\";\r\nimport {ResponseError} from \"../../modules/error/response_error\";\r\nimport { CreateUser, User } from \"../../types/user\";\r\nimport {loginSchema, registerSchema} from \"./schema\";\r\nimport { AppResponse } from \"../../types/response.interface\";\r\nimport {UserService} from \"../user/sercvice\";\r\nimport { createUser, getUserByPassword } from \"../../bin/db\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\nconst JWT_REFRESH_TOKEN_EXPIRED =\r\n  process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class AuthService {\r\n  public static async signUp(formData: CreateUser) {\r\n    const currentUser = await UserService.validateUserEmail(formData.email);\r\n    if (currentUser) {\r\n      return { message: \"the user already exist !\", code: 400, currentUser };\r\n    }\r\n\r\n    // const getNickName = await UserService.checkNickName(formData.email);\r\n    // if (getNickName === formData.email) {\r\n    //   return {\r\n    //     message: \"the nickname is already exist!\",\r\n    //     code: 400,\r\n    //     getNickName,\r\n    //   };\r\n    // }\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    formData.verify_code = getUniqueCodev3();\r\n    formData.tokenVerify = tokenVerify;\r\n    useValidation(registerSchema, formData);\r\n    const newUserId = await createUser(formData);\r\n    if (!newUserId)\r\n      throw new ResponseError.BadRequest(\"Cannot add user in the database !\");\r\n    SendEmail.AccountRegister(formData);\r\n    return {\r\n      message: null,\r\n      newUser: {\r\n        user_id: newUserId,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n\r\n  public static async signIn(formData: User) {\r\n    const checkValidation = useValidation(loginSchema, formData);\r\n\r\n    const userData = await getUserByPassword(\r\n      checkValidation.email,\r\n      checkValidation.password\r\n    );\r\n\r\n    const match = await new Promise<boolean>((resolve, reject) => {\r\n      bcrypt.compare(\r\n        formData.password,\r\n        userData[0]?.password,\r\n        (err, isMatch) => {\r\n          if (err) reject(err);\r\n          resolve(isMatch);\r\n        }\r\n      );\r\n    });\r\n    if (!match) {\r\n      throw new ResponseError.NotFound(\"account not found or has been deleted\");\r\n    }\r\n\r\n    if (!userData) {\r\n      throw new ResponseError.NotFound(\"account not found or has been deleted\");\r\n    } else if (userData.emailConfirmed === 0) {\r\n      throw new ResponseError.BadRequest(\"email is not confirmed\");\r\n    }\r\n\r\n    const comparePassword = true;\r\n\r\n    if (comparePassword) {\r\n      const user = {\r\n        user_id: userData[0].user_id, \r\n        userName: userData[0].userName, \r\n        email: userData[0].email,\r\n        imgUser: userData[0].imgUser,\r\n        mobile: userData[0].mobile,\r\n        address: userData[0].address,\r\n        dateOfBirth: userData[0].dateOfBirth,\r\n        tokenVerify: userData[0].tokenVerify,\r\n        roles: [] as string[],\r\n        permissions: [] as string[],\r\n      };\r\n      userData.forEach((element: any) => {\r\n        if (element.role_name && !user.roles.includes(element.role_name)) {\r\n          user.roles.push(element.role_name);\r\n        }\r\n        if (\r\n          element.permission_name &&\r\n          !user.permissions.includes(element.permission_name)\r\n        ) {\r\n          user.permissions.push(element.permission_name);\r\n        }\r\n      });\r\n      return {\r\n        isSuccessfull: true,\r\n        showToUser: true,\r\n        messageCode: \"200\",\r\n        messageKind: 1,\r\n        message: \"login is successfully\",\r\n        data: user,\r\n      } as AppResponse;\r\n    } else {\r\n      throw new ResponseError.Unauthorized(\"Invalid password\");\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725677391413},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev3 = exports.getUniqueCodev2 = void 0;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev2 = getUniqueCodev2;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev3 = getUniqueCodev3;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVbmlxdWVDb2RldjIiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvY29tbW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcbiAqL1xuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYyKGxlbmd0aCA9IDMyKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxuICovXG5mdW5jdGlvbiBnZXRVbmlxdWVDb2RldjMobGVuZ3RoID0gNCkge1xuICAgIGxldCByZXN1bHQgPSAnJ1xuICAgIGNvbnN0IGNoYXJhY3RlcnMgPVxuICAgICAgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSdcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuZXhwb3J0IHtcbiAgICBnZXRVbmlxdWVDb2RldjIsXG4gICAgZ2V0VW5pcXVlQ29kZXYzXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUEsU0FBU0EsZUFBZUEsQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7RUFDbEMsSUFBSUMsTUFBTSxHQUFHLEVBQUU7RUFDZixNQUFNQyxVQUFVLEdBQ2QsZ0VBQWdFO0VBQ2xFLE1BQU1DLGdCQUFnQixHQUFHRCxVQUFVLENBQUNGLE1BQU07RUFDMUMsS0FBSyxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLE1BQU0sRUFBRUksQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUNsQ0gsTUFBTSxJQUFJQyxVQUFVLENBQUNHLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxFQUFFLEdBQUdMLGdCQUFnQixDQUFDLENBQUM7RUFDM0U7RUFDQSxPQUFPRixNQUFNO0FBQ2Y7QUFpQklRLE9BQUEsQ0FBQVYsZUFBQSxHQUFBQSxlQUFBO0FBZko7Ozs7QUFJQSxTQUFTVyxlQUFlQSxDQUFDVixNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZjtBQUdFUSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["getUniqueCodev2","length","result","characters","charactersLength","i","charAt","Math","floor","random","exports","getUniqueCodev3"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/common.ts"],"sourcesContent":["/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n    let result = ''\n    const characters =\n      'abcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i += 1) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\nexport {\n    getUniqueCodev2,\n    getUniqueCodev3\n  }"],"mappings":";;;;;;AAAA;;;;AAIA,SAASA,eAAeA,CAACC,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAiBIQ,OAAA,CAAAV,eAAA,GAAAA,eAAA;AAfJ;;;;AAIA,SAASW,eAAeA,CAACV,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAGEQ,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SendEmail = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst email_1 = require(\"../config/email\");\nconst file_1 = require(\"../helper/file\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nconst {\n  APP_NAME\n} = process.env;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nclass SendEmail {\n  static AccountRegister(formData) {\n    const {\n      email\n    } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path_1.default.resolve(__dirname, `../../public/template/email/emailverify.html`);\n    const subject = \"Clinic Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.EmailProvider();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.ResponseError.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n  static forgetPassToken(formData, token) {\n    const {\n      email\n    } = formData;\n    const TOKEN = token;\n    const pathTemplate = path_1.default.resolve(__dirname, `../public/template/email/reset-password.html`);\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.EmailProvider();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.ResponseError.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n}\nexports.SendEmail = SendEmail;\n_a = SendEmail;\nSendEmail.sendResetPasswordEmail = (email, userName, resetLink) => __awaiter(void 0, void 0, void 0, function* () {\n  // Read the HTML template\n  const templatePath = path_1.default.join(__dirname, \"templates\", \"../public/template/email/reset-password.html\");\n  const template = fs_1.default.readFileSync(templatePath, \"utf-8\");\n  // Replace placeholders with actual values\n  const htmlContent = template.replace(\"{{userName}}\", userName).replace(/{{resetLink}}/g, resetLink);\n  // Create a transporter\n  const transporter = nodemailer_1.default.createTransport({\n    host: \"smtp.example.com\",\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: \"aliakbaresmaeili98@gmail.com\",\n      // your SMTP username\n      pass: \"cgop ttip zuqz hqlr\" // your SMTP password\n    }\n  });\n  // Send email\n  const info = yield transporter.sendMail({\n    from: '\"Your Company\" <no-reply@yourcompany.com>',\n    to: email,\n    subject: \"Reset Your Password\",\n    html: htmlContent\n  });\n  console.log(\"Message sent: %s\", info.messageId);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImhhbmRsZWJhcnNfMSIsInBhdGhfMSIsImVtYWlsXzEiLCJmaWxlXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiQVBQX05BTUUiLCJwcm9jZXNzIiwiZW52Iiwibm9kZW1haWxlcl8xIiwiU2VuZEVtYWlsIiwiQWNjb3VudFJlZ2lzdGVyIiwiZm9ybURhdGEiLCJlbWFpbCIsIlRPS0VOIiwidmVyaWZ5X2NvZGUiLCJwYXRoVGVtcGxhdGUiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInN1YmplY3QiLCJkYXRhVGVtcGxhdGUiLCJFbWFpbCIsIkVtYWlsUHJvdmlkZXIiLCJyZWFkSFRNTEZpbGUiLCJlcnJvciIsImh0bWwiLCJSZXNwb25zZUVycm9yIiwiTm90Rm91bmQiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJodG1sVG9TZW5kIiwic2VuZCIsImZvcmdldFBhc3NUb2tlbiIsInRva2VuIiwiZXhwb3J0cyIsInNlbmRSZXNldFBhc3N3b3JkRW1haWwiLCJ1c2VyTmFtZSIsInJlc2V0TGluayIsIl9fYXdhaXRlciIsInRlbXBsYXRlUGF0aCIsImpvaW4iLCJyZWFkRmlsZVN5bmMiLCJodG1sQ29udGVudCIsInJlcGxhY2UiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiZnJvbSIsInRvIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL3NlbmRfZW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IGhhbmRsZWJhcnMgZnJvbSBcImhhbmRsZWJhcnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQge0VtYWlsUHJvdmlkZXJ9IGZyb20gXCIuLi9jb25maWcvZW1haWxcIjtcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuLi9oZWxwZXIvZmlsZVwiO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tIFwiLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XG5jb25zdCB7IEFQUF9OQU1FIH0gPSBwcm9jZXNzLmVudjtcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTZW5kRW1haWwge1xuICBwdWJsaWMgc3RhdGljIEFjY291bnRSZWdpc3Rlcihmb3JtRGF0YTogYW55KSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gICAgY29uc3QgVE9LRU4gPSBmb3JtRGF0YS52ZXJpZnlfY29kZTtcbiAgICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gICAgICBfX2Rpcm5hbWUsXG4gICAgICBgLi4vLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL2VtYWlsdmVyaWZ5Lmh0bWxgXG4gICAgKTtcblxuICAgIGNvbnN0IHN1YmplY3QgPSBcIkNsaW5pYyBSZWdpc3RlcmF0aW9uXCI7XG4gICAgLy8gY29uc3QgdXJsVG9rZW4gPSBgJHtCQVNFX1VSTF9DTElFTlR9L2VtYWlsL3ZlcmlmeT90b2tlbj0ke3Rva2VufWBcbiAgICBjb25zdCBkYXRhVGVtcGxhdGUgPSB7IEFQUF9OQU1FLCBUT0tFTiB9O1xuICAgIGNvbnN0IEVtYWlsID0gbmV3IEVtYWlsUHJvdmlkZXIoKTtcblxuICAgIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFwiZW1haWwgdGVtcGxhdGUgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZShkYXRhVGVtcGxhdGUpO1xuXG4gICAgICBFbWFpbC5zZW5kKGVtYWlsLCBzdWJqZWN0LCBodG1sVG9TZW5kKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZm9yZ2V0UGFzc1Rva2VuKGZvcm1EYXRhOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcbiAgICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gICAgICBfX2Rpcm5hbWUsXG4gICAgICBgLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL3Jlc2V0LXBhc3N3b3JkLmh0bWxgXG4gICAgKTtcblxuICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaXNob3BlZWUgUmVnaXN0ZXJhdGlvblwiO1xuICAgIC8vIGNvbnN0IHVybFRva2VuID0gYCR7QkFTRV9VUkxfQ0xJRU5UfS9lbWFpbC92ZXJpZnk/dG9rZW49JHt0b2tlbn1gXG4gICAgY29uc3QgZGF0YVRlbXBsYXRlID0geyBBUFBfTkFNRSwgVE9LRU4gfTtcbiAgICBjb25zdCBFbWFpbCA9IG5ldyBFbWFpbFByb3ZpZGVyKCk7XG5cbiAgICByZWFkSFRNTEZpbGUocGF0aFRlbXBsYXRlLCAoZXJyb3I6IEVycm9yLCBodG1sOiBhbnkpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcImVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XG4gICAgICBjb25zdCBodG1sVG9TZW5kID0gdGVtcGxhdGUoZGF0YVRlbXBsYXRlKTtcbiAgICAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBzZW5kUmVzZXRQYXNzd29yZEVtYWlsID0gYXN5bmMgKFxuICAgIGVtYWlsOiBzdHJpbmcsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgICByZXNldExpbms6IHN0cmluZ1xuICApID0+IHtcbiAgICAvLyBSZWFkIHRoZSBIVE1MIHRlbXBsYXRlXG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gcGF0aC5qb2luKFxuICAgICAgX19kaXJuYW1lLFxuICAgICAgXCJ0ZW1wbGF0ZXNcIixcbiAgICAgIFwiLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL3Jlc2V0LXBhc3N3b3JkLmh0bWxcIlxuICAgICk7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmModGVtcGxhdGVQYXRoLCBcInV0Zi04XCIpO1xuXG4gICAgLy8gUmVwbGFjZSBwbGFjZWhvbGRlcnMgd2l0aCBhY3R1YWwgdmFsdWVzXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSB0ZW1wbGF0ZVxuICAgICAgLnJlcGxhY2UoXCJ7e3VzZXJOYW1lfX1cIiwgdXNlck5hbWUpXG4gICAgICAucmVwbGFjZSgve3tyZXNldExpbmt9fS9nLCByZXNldExpbmspO1xuXG4gICAgLy8gQ3JlYXRlIGEgdHJhbnNwb3J0ZXJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgIGhvc3Q6IFwic210cC5leGFtcGxlLmNvbVwiLFxuICAgICAgcG9ydDogNTg3LFxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gdHJ1ZSBmb3IgNDY1LCBmYWxzZSBmb3Igb3RoZXIgcG9ydHNcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogXCJhbGlha2JhcmVzbWFlaWxpOThAZ21haWwuY29tXCIsIC8vIHlvdXIgU01UUCB1c2VybmFtZVxuICAgICAgICBwYXNzOiBcImNnb3AgdHRpcCB6dXF6IGhxbHJcIiwgLy8geW91ciBTTVRQIHBhc3N3b3JkXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gU2VuZCBlbWFpbFxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgICBmcm9tOiAnXCJZb3VyIENvbXBhbnlcIiA8bm8tcmVwbHlAeW91cmNvbXBhbnkuY29tPicsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiBcIlJlc2V0IFlvdXIgUGFzc3dvcmRcIixcbiAgICAgIGh0bWw6IGh0bWxDb250ZW50LFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJNZXNzYWdlIHNlbnQ6ICVzXCIsIGluZm8ubWVzc2FnZUlkKTtcbiAgfTtcbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFlBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsTUFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRyxPQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxNQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxnQkFBQSxHQUFBTCxPQUFBO0FBRUEsTUFBTTtFQUFFTTtBQUFRLENBQUUsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBQ2hDLE1BQUFDLFlBQUEsR0FBQVYsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBYVUsU0FBUztFQUNiLE9BQU9DLGVBQWVBLENBQUNDLFFBQWE7SUFDekMsTUFBTTtNQUFFQztJQUFLLENBQUUsR0FBR0QsUUFBUTtJQUMxQixN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","map":{"version":3,"names":["fs_1","__importDefault","require","handlebars_1","path_1","email_1","file_1","response_error_1","APP_NAME","process","env","nodemailer_1","SendEmail","AccountRegister","formData","email","TOKEN","verify_code","pathTemplate","default","resolve","__dirname","subject","dataTemplate","Email","EmailProvider","readHTMLFile","error","html","ResponseError","NotFound","template","compile","htmlToSend","send","forgetPassToken","token","exports","sendResetPasswordEmail","userName","resetLink","__awaiter","templatePath","join","readFileSync","htmlContent","replace","transporter","createTransport","host","port","secure","auth","user","pass","info","sendMail","from","to","console","log","messageId"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/send_email.ts"],"sourcesContent":["import fs from \"fs\";\nimport handlebars from \"handlebars\";\nimport path from \"path\";\nimport {EmailProvider} from \"../config/email\";\nimport { readHTMLFile } from \"../helper/file\";\nimport {ResponseError} from \"../modules/error/response_error\";\nimport { User } from \"../types/user\";\nconst { APP_NAME } = process.env;\nimport nodemailer from \"nodemailer\";\n\nexport class SendEmail {\n  public static AccountRegister(formData: any) {\n    const { email } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../../public/template/email/emailverify.html`\n    );\n\n    const subject = \"Clinic Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n\n  public static forgetPassToken(formData: User, token: string) {\n    const { email } = formData;\n    const TOKEN = token;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../public/template/email/reset-password.html`\n    );\n\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n\n  public static sendResetPasswordEmail = async (\n    email: string,\n    userName: string,\n    resetLink: string\n  ) => {\n    // Read the HTML template\n    const templatePath = path.join(\n      __dirname,\n      \"templates\",\n      \"../public/template/email/reset-password.html\"\n    );\n    const template = fs.readFileSync(templatePath, \"utf-8\");\n\n    // Replace placeholders with actual values\n    const htmlContent = template\n      .replace(\"{{userName}}\", userName)\n      .replace(/{{resetLink}}/g, resetLink);\n\n    // Create a transporter\n    const transporter = nodemailer.createTransport({\n      host: \"smtp.example.com\",\n      port: 587,\n      secure: false, // true for 465, false for other ports\n      auth: {\n        user: \"aliakbaresmaeili98@gmail.com\", // your SMTP username\n        pass: \"cgop ttip zuqz hqlr\", // your SMTP password\n      },\n    });\n\n    // Send email\n    const info = await transporter.sendMail({\n      from: '\"Your Company\" <no-reply@yourcompany.com>',\n      to: email,\n      subject: \"Reset Your Password\",\n      html: htmlContent,\n    });\n\n    console.log(\"Message sent: %s\", info.messageId);\n  };\n}\n\n"],"mappings":"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","ignoreList":[]}},"mtime":1725611830106},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmailProvider = void 0;\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = !lodash_1.default.isEmpty(MAILGUN_API_KEY) || !lodash_1.default.isEmpty(MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.send = (to, subject, template) => {\n      const dest = Array.isArray(to) ? to.join(\",\") : to;\n      const text = template;\n      // send an e-mail\n      this.sendMail(dest, subject, text);\n    };\n    this.setMailConfig = () => {\n      // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n      const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n      const configTransport = {\n        service: MAIL_DRIVER,\n        auth: {\n          user: gmailEmail,\n          pass: gmailAppPassword\n        }\n      };\n      if (isMailgunAPI) {\n        configTransport.auth.api_key = MAILGUN_API_KEY;\n        configTransport.auth.domain = MAILGUN_DOMAIN;\n      } else {\n        // SMTP Default\n        configTransport.host = MAIL_HOST;\n        configTransport.port = MAIL_PORT;\n        configTransport.auth.user = MAIL_USERNAME;\n        configTransport.auth.pass = MAIL_PASSWORD;\n      }\n      return configTransport;\n    };\n    this.setMailOptions = (dest, subject, text) => {\n      return {\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\n        to: dest,\n        subject,\n        html: text\n      };\n    };\n    this.sendMail = (dest, subject, text) => {\n      this.mailConfig = isMailgunAPI ? (0, nodemailer_mailgun_transport_1.default)(this.setMailConfig()) : this.setMailConfig();\n      this.mailOptions = this.setMailOptions(dest, subject, text);\n      // Nodemailer Transport\n      const transporter = nodemailer_1.default.createTransport(this.mailConfig);\n      transporter.sendMail(this.mailOptions,\n      // @ts-ignore\n      (error, info) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      });\n    };\n  }\n}\nexports.EmailProvider = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJub2RlbWFpbGVyXzEiLCJub2RlbWFpbGVyX21haWxndW5fdHJhbnNwb3J0XzEiLCJBUFBfTkFNRSIsIk1BSUxfRFJJVkVSIiwiTUFJTF9IT1NUIiwiTUFJTF9QT1JUIiwiTUFJTF9VU0VSTkFNRSIsIk1BSUxfUEFTU1dPUkQiLCJNQUlMX0FVVEhfVFlQRSIsIk1BSUxHVU5fQVBJX0tFWSIsIk1BSUxHVU5fRE9NQUlOIiwiT0FVVEhfQ0xJRU5UX0lEIiwiT0FVVEhfQ0xJRU5UX1NFQ1JFVCIsIk9BVVRIX1JFRlJFU0hfVE9LRU4iLCJPQVVUSF9SRURJUkVDVF9VUkwiLCJwcm9jZXNzIiwiZW52IiwiaXNNYWlsZ3VuQVBJIiwiZGVmYXVsdCIsImlzRW1wdHkiLCJFbWFpbFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJzZW5kIiwidG8iLCJzdWJqZWN0IiwidGVtcGxhdGUiLCJkZXN0IiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsInRleHQiLCJzZW5kTWFpbCIsInNldE1haWxDb25maWciLCJnbWFpbEVtYWlsIiwiZ21haWxBcHBQYXNzd29yZCIsImNvbmZpZ1RyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInBhc3MiLCJhcGlfa2V5IiwiZG9tYWluIiwiaG9zdCIsInBvcnQiLCJzZXRNYWlsT3B0aW9ucyIsImZyb20iLCJodG1sIiwibWFpbENvbmZpZyIsIm1haWxPcHRpb25zIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbmZpZ1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29uZmlnL2VtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XG5cbmNvbnN0IHtcbiAgQVBQX05BTUUsXG4gIE1BSUxfRFJJVkVSLFxuICBNQUlMX0hPU1QsXG4gIE1BSUxfUE9SVCxcbiAgTUFJTF9VU0VSTkFNRSxcbiAgTUFJTF9QQVNTV09SRCxcbiAgTUFJTF9BVVRIX1RZUEUsXG4gIE1BSUxHVU5fQVBJX0tFWSxcbiAgTUFJTEdVTl9ET01BSU4sXG4gIE9BVVRIX0NMSUVOVF9JRCxcbiAgT0FVVEhfQ0xJRU5UX1NFQ1JFVCxcbiAgT0FVVEhfUkVGUkVTSF9UT0tFTixcbiAgT0FVVEhfUkVESVJFQ1RfVVJMLFxufSA9IHByb2Nlc3MuZW52O1xuXG5jb25zdCBpc01haWxndW5BUEkgPSAhXy5pc0VtcHR5KE1BSUxHVU5fQVBJX0tFWSkgfHwgIV8uaXNFbXB0eShNQUlMR1VOX0RPTUFJTik7XG5cbmV4cG9ydCBjbGFzcyBFbWFpbFByb3ZpZGVyIHtcbiAgcHJpdmF0ZSBtYWlsQ29uZmlnOiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbztcbiAgcHJpdmF0ZSBtYWlsT3B0aW9uczogbm9kZW1haWxlci5TZW5kTWFpbE9wdGlvbnMgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIHNlbmQgPSAoXG4gICAgdG86IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIHN1YmplY3Q6IHN0cmluZyxcbiAgICB0ZW1wbGF0ZTogc3RyaW5nXG4gICk6IHZvaWQgfCBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3QgZGVzdDogc3RyaW5nID0gQXJyYXkuaXNBcnJheSh0bykgPyB0by5qb2luKFwiLFwiKSA6IHRvO1xuICAgIGNvbnN0IHRleHQ6IHN0cmluZyA9IHRlbXBsYXRlO1xuXG4gICAgLy8gc2VuZCBhbiBlLW1haWxcbiAgICB0aGlzLnNlbmRNYWlsKGRlc3QsIHN1YmplY3QsIHRleHQpO1xuICB9O1xuXG4gIHByaXZhdGUgc2V0TWFpbENvbmZpZyA9ICgpOiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbyA9PiB7XG4gICAgLy8gY29uc3QgZ21haWxFbWFpbCA9IFwiYWxpYWtiYXJlc21hZWlsaTk4QGdtYWlsLmNvbVwiO1xuICAgIC8vIGNvbnN0IGdtYWlsQXBwUGFzc3dvcmQgPSBcIm5mZnggaHJnYiB4b2xxIHZzZmFcIjtcblxuICAgIGNvbnN0IGdtYWlsRW1haWwgPSBcImFsaWFrYmFyZXNtYWVpbGk5OEBnbWFpbC5jb21cIjtcbiAgICBjb25zdCBnbWFpbEFwcFBhc3N3b3JkID0gXCJjZ29wIHR0aXAgenVxeiBocWxyXCI7XG4gICAgY29uc3QgY29uZmlnVHJhbnNwb3J0OiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbyA9IHtcbiAgICAgIHNlcnZpY2U6IE1BSUxfRFJJVkVSLFxuICAgICAgYXV0aDoge1xuICAgICAgICB1c2VyOiBnbWFpbEVtYWlsLFxuICAgICAgICBwYXNzOiBnbWFpbEFwcFBhc3N3b3JkLFxuICAgICAgfSxcbiAgICB9O1xuICAgIGlmIChpc01haWxndW5BUEkpIHtcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5hdXRoLmFwaV9rZXkgPSBNQUlMR1VOX0FQSV9LRVk7XG4gICAgICBjb25maWdUcmFuc3BvcnQuYXV0aC5kb21haW4gPSBNQUlMR1VOX0RPTUFJTjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU01UUCBEZWZhdWx0XG4gICAgICBjb25maWdUcmFuc3BvcnQuaG9zdCA9IE1BSUxfSE9TVDtcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5wb3J0ID0gTUFJTF9QT1JUO1xuICAgICAgY29uZmlnVHJhbnNwb3J0LmF1dGgudXNlciA9IE1BSUxfVVNFUk5BTUU7XG4gICAgICBjb25maWdUcmFuc3BvcnQuYXV0aC5wYXNzID0gTUFJTF9QQVNTV09SRDtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZ1RyYW5zcG9ydDtcbiAgfTtcblxuICBwcml2YXRlIHNldE1haWxPcHRpb25zID0gKFxuICAgIGRlc3Q6IHN0cmluZyxcbiAgICBzdWJqZWN0OiBzdHJpbmcsXG4gICAgdGV4dDogc3RyaW5nXG4gICk6IG5vZGVtYWlsZXIuU2VuZE1haWxPcHRpb25zID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbTogYCR7QVBQX05BTUV9IDwke01BSUxfVVNFUk5BTUV9PmAsXG4gICAgICB0bzogZGVzdCxcbiAgICAgIHN1YmplY3QsXG4gICAgICBodG1sOiB0ZXh0LFxuICAgIH07XG4gIH07XG5cbiAgcHJpdmF0ZSBzZW5kTWFpbCA9IChcbiAgICBkZXN0OiBzdHJpbmcsXG4gICAgc3ViamVjdDogc3RyaW5nLFxuICAgIHRleHQ6IHN0cmluZ1xuICApOiB2b2lkIHwgc3RyaW5nW10gPT4ge1xuICAgIHRoaXMubWFpbENvbmZpZyA9IGlzTWFpbGd1bkFQSVxuICAgICAgPyBtZyh0aGlzLnNldE1haWxDb25maWcoKSlcbiAgICAgIDogdGhpcy5zZXRNYWlsQ29uZmlnKCk7XG4gICAgdGhpcy5tYWlsT3B0aW9ucyA9IHRoaXMuc2V0TWFpbE9wdGlvbnMoZGVzdCwgc3ViamVjdCwgdGV4dCk7XG4gICAgLy8gTm9kZW1haWxlciBUcmFuc3BvcnRcbiAgICBjb25zdCB0cmFuc3BvcnRlcjogbm9kZW1haWxlci5UcmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KFxuICAgICAgdGhpcy5tYWlsQ29uZmlnXG4gICAgKTtcbiAgICB0cmFuc3BvcnRlci5zZW5kTWFpbChcbiAgICAgIHRoaXMubWFpbE9wdGlvbnMsXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAoZXJyb3I6IEVycm9yLCBpbmZvOiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbykgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzZnVsbHlcIiwgaW5mbyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsWUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSw4QkFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNO0VBQ0pHLFFBQVE7RUFDUkMsV0FBVztFQUNYQyxTQUFTO0VBQ1RDLFNBQVM7RUFDVEMsYUFBYTtFQUNiQyxhQUFhO0VBQ2JDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxjQUFjO0VBQ2RDLGVBQWU7RUFDZkMsbUJBQW1CO0VBQ25CQyxtQkFBbUI7RUFDbkJDO0FBQWtCLENBQ25CLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRztBQUVmLE1BQU1DLFlBQVksR0FBRyxDQUFDcEIsUUFBQSxDQUFBcUIsT0FBQyxDQUFDQyxPQUFPLENBQUNWLGVBQWUsQ0FBQyxJQUFJLENBQUNaLFFBQUEsQ0FBQXFCLE9BQUMsQ0FBQ0MsT0FBTyxDQUFDVCxjQUFjLENBQUM7QUFFOUUsTUFBYVUsYUFBYTtFQUExQkMsWUFBQTtJQUlTLEtBQUFDLElBQUksR0FBRyxDQUNaQyxFQUFxQixFQUNyQkMsT0FBZSxFQUNmQyxRQUFnQixLQUNHO01BQ25CLE1BQU1DLElBQUksR0FBV0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLEVBQUUsQ0FBQyxHQUFHQSxFQUFFLENBQUNNLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBR04sRUFBRTtNQUMxRCxNQUFNTyxJQUFJLEdBQVdMLFFBQVE7TUFFN0I7TUFDQSxJQUFJLENBQUNNLFFBQVEsQ0FBQ0wsSUFBSSxFQUFFRixPQUFPLEVBQUVNLElBQUksQ0FBQztJQUNwQyxDQUFDO0lBRU8sS0FBQUUsYUFBYSxHQUFHLE1BQWlDO01BQ3ZEO01BQ0E7TUFFQSxNQUFNQyxVQUFVLEdBQUcsOEJBQThCO01BQ2pELE1BQU1DLGdCQUFnQixHQUFHLHFCQUFxQjtNQUM5QyxNQUFNQyxlQUFlLEdBQStCO1FBQ2xEQyxPQUFPLEVBQUVqQyxXQUFXO1FBQ3BCa0MsSUFBSSxFQUFFO1VBQ0pDLElBQUksRUFBRUwsVUFBVTtVQUNoQk0sSUFBSSxFQUFFTDs7T0FFVDtNQUNELElBQUlqQixZQUFZLEVBQUU7UUFDaEJrQixlQUFlLENBQUNFLElBQUksQ0FBQ0csT0FBTyxHQUFHL0IsZUFBZTtRQUM5QzBCLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDSSxNQUFNLEdBQUcvQixjQUFjO01BQzlDLENBQUMsTUFBTTtRQUNMO1FBQ0F5QixlQUFlLENBQUNPLElBQUksR0FBR3RDLFNBQVM7UUFDaEMrQixlQUFlLENBQUNRLElBQUksR0FBR3RDLFNBQVM7UUFDaEM4QixlQUFlLENBQUNFLElBQUksQ0FBQ0MsSUFBSSxHQUFHaEMsYUFBYTtRQUN6QzZCLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDRSxJQUFJLEdBQUdoQyxhQUFhO01BQzNDO01BQ0EsT0FBTzRCLGVBQWU7SUFDeEIsQ0FBQztJQUVPLEtBQUFTLGNBQWMsR0FBRyxDQUN2QmxCLElBQVksRUFDWkYsT0FBZSxFQUNmTSxJQUFZLEtBQ2tCO01BQzlCLE9BQU87UUFDTGUsSUFBSSxFQUFFLEdBQUczQyxRQUFRLEtBQUtJLGFBQWEsR0FBRztRQUN0Q2lCLEVBQUUsRUFBRUcsSUFBSTtRQUNSRixPQUFPO1FBQ1BzQixJQUFJLEVBQUVoQjtPQUNQO0lBQ0gsQ0FBQztJQUVPLEtBQUFDLFFBQVEsR0FBRyxDQUNqQkwsSUFBWSxFQUNaRixPQUFlLEVBQ2ZNLElBQVksS0FDTztNQUNuQixJQUFJLENBQUNpQixVQUFVLEdBQUc5QixZQUFZLEdBQzFCLElBQUFoQiw4QkFBQSxDQUFBaUIsT0FBRSxFQUFDLElBQUksQ0FBQ2MsYUFBYSxFQUFFLENBQUMsR0FDeEIsSUFBSSxDQUFDQSxhQUFhLEVBQUU7TUFDeEIsSUFBSSxDQUFDZ0IsV0FBVyxHQUFHLElBQUksQ0FBQ0osY0FBYyxDQUFDbEIsSUFBSSxFQUFFRixPQUFPLEVBQUVNLElBQUksQ0FBQztNQUMzRDtNQUNBLE1BQU1tQixXQUFXLEdBQTJCakQsWUFBQSxDQUFBa0IsT0FBVSxDQUFDZ0MsZUFBZSxDQUNwRSxJQUFJLENBQUNILFVBQVUsQ0FDaEI7TUFDREUsV0FBVyxDQUFDbEIsUUFBUSxDQUNsQixJQUFJLENBQUNpQixXQUFXO01BQ2hCO01BQ0EsQ0FBQ0csS0FBWSxFQUFFQyxJQUFnQyxLQUFJO1FBQ2pELElBQUlELEtBQUssRUFBRTtVQUNURSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsS0FBSyxDQUFDO1FBQ3BCLENBQUMsTUFBTTtVQUNMRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxjQUFjLEVBQUVGLElBQUksQ0FBQztRQUNuQztNQUNGLENBQUMsQ0FDRjtJQUNILENBQUM7RUFDSDs7QUFoRkFHLE9BQUEsQ0FBQW5DLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["lodash_1","__importDefault","require","nodemailer_1","nodemailer_mailgun_transport_1","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","default","isEmpty","EmailProvider","constructor","send","to","subject","template","dest","Array","isArray","join","text","sendMail","setMailConfig","gmailEmail","gmailAppPassword","configTransport","service","auth","user","pass","api_key","domain","host","port","setMailOptions","from","html","mailConfig","mailOptions","transporter","createTransport","error","info","console","log","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\config\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/config/email.ts"],"sourcesContent":["import _ from 'lodash';\nimport nodemailer from \"nodemailer\";\nimport mg from \"nodemailer-mailgun-transport\";\n\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL,\n} = process.env;\n\nconst isMailgunAPI = !_.isEmpty(MAILGUN_API_KEY) || !_.isEmpty(MAILGUN_DOMAIN);\n\nexport class EmailProvider {\n  private mailConfig: nodemailer.SentMessageInfo;\n  private mailOptions: nodemailer.SendMailOptions | undefined;\n\n  public send = (\n    to: string | string[],\n    subject: string,\n    template: string\n  ): void | string[] => {\n    const dest: string = Array.isArray(to) ? to.join(\",\") : to;\n    const text: string = template;\n\n    // send an e-mail\n    this.sendMail(dest, subject, text);\n  };\n\n  private setMailConfig = (): nodemailer.SentMessageInfo => {\n    // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n\n    const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n    const configTransport: nodemailer.SentMessageInfo = {\n      service: MAIL_DRIVER,\n      auth: {\n        user: gmailEmail,\n        pass: gmailAppPassword,\n      },\n    };\n    if (isMailgunAPI) {\n      configTransport.auth.api_key = MAILGUN_API_KEY;\n      configTransport.auth.domain = MAILGUN_DOMAIN;\n    } else {\n      // SMTP Default\n      configTransport.host = MAIL_HOST;\n      configTransport.port = MAIL_PORT;\n      configTransport.auth.user = MAIL_USERNAME;\n      configTransport.auth.pass = MAIL_PASSWORD;\n    }\n    return configTransport;\n  };\n\n  private setMailOptions = (\n    dest: string,\n    subject: string,\n    text: string\n  ): nodemailer.SendMailOptions => {\n    return {\n      from: `${APP_NAME} <${MAIL_USERNAME}>`,\n      to: dest,\n      subject,\n      html: text,\n    };\n  };\n\n  private sendMail = (\n    dest: string,\n    subject: string,\n    text: string\n  ): void | string[] => {\n    this.mailConfig = isMailgunAPI\n      ? mg(this.setMailConfig())\n      : this.setMailConfig();\n    this.mailOptions = this.setMailOptions(dest, subject, text);\n    // Nodemailer Transport\n    const transporter: nodemailer.Transporter = nodemailer.createTransport(\n      this.mailConfig\n    );\n    transporter.sendMail(\n      this.mailOptions,\n      // @ts-ignore\n      (error: Error, info: nodemailer.SentMessageInfo) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      }\n    );\n  };\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1725674856324},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\file.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteUserPic = exports.readHTMLFile = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path, callback) {\n  fs_1.default.readFile(path, {\n    encoding: \"utf-8\"\n  }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nexports.readHTMLFile = readHTMLFile;\nfunction deleteUserPic(userId) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs_1.default.existsSync(path)) {\n    fs_1.default.unlinkSync(path);\n  }\n}\nexports.deleteUserPic = deleteUserPic;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInJlYWRIVE1MRmlsZSIsInBhdGgiLCJjYWxsYmFjayIsImRlZmF1bHQiLCJyZWFkRmlsZSIsImVuY29kaW5nIiwiZXJyIiwiaHRtbCIsImV4cG9ydHMiLCJkZWxldGVVc2VyUGljIiwidXNlcklkIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci9maWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHBhdGggLSBwYXRoIGZpbGUgdGVtcGxhdGUgaHRtbFxuICogQHBhcmFtIGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHJlYWRIVE1MRmlsZShwYXRoOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgZnMucmVhZEZpbGUocGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sIGZ1bmN0aW9uIChlcnIsIGh0bWwpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsLCBodG1sKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlVXNlclBpYyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBwYXRoID0gYHB1YmxpYy9wcm9kdWN0cy8ke3VzZXJJZH0uanBnYDtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aCkpIHtcbiAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xuICB9XG59XG5leHBvcnQgeyByZWFkSFRNTEZpbGUsIGRlbGV0ZVVzZXJQaWMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBOzs7OztBQUtBLFNBQVNDLFlBQVlBLENBQUNDLElBQVMsRUFBRUMsUUFBYTtFQUM1Q0wsSUFBQSxDQUFBTSxPQUFFLENBQUNDLFFBQVEsQ0FBQ0gsSUFBSSxFQUFFO0lBQUVJLFFBQVEsRUFBRTtFQUFPLENBQUUsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLElBQUk7SUFDMUQsSUFBSUQsR0FBRyxFQUFFO01BQ1BKLFFBQVEsQ0FBQ0ksR0FBRyxDQUFDO0lBQ2YsQ0FBQyxNQUFNO01BQ0xKLFFBQVEsQ0FBQyxJQUFJLEVBQUVLLElBQUksQ0FBQztJQUN0QjtFQUNGLENBQUMsQ0FBQztBQUNKO0FBT1NDLE9BQUEsQ0FBQVIsWUFBQSxHQUFBQSxZQUFBO0FBTlQsU0FBU1MsYUFBYUEsQ0FBQ0MsTUFBYztFQUNuQyxNQUFNVCxJQUFJLEdBQUcsbUJBQW1CUyxNQUFNLE1BQU07RUFDNUMsSUFBSWIsSUFBQSxDQUFBTSxPQUFFLENBQUNRLFVBQVUsQ0FBQ1YsSUFBSSxDQUFDLEVBQUU7SUFDdkJKLElBQUEsQ0FBQU0sT0FBRSxDQUFDUyxVQUFVLENBQUNYLElBQUksQ0FBQztFQUNyQjtBQUNGO0FBQ3VCTyxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["fs_1","__importDefault","require","readHTMLFile","path","callback","default","readFile","encoding","err","html","exports","deleteUserPic","userId","existsSync","unlinkSync"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/file.ts"],"sourcesContent":["import fs from \"fs\";\n\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path: any, callback: any) {\n  fs.readFile(path, { encoding: \"utf-8\" }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nfunction deleteUserPic(userId: string) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs.existsSync(path)) {\n    fs.unlinkSync(path);\n  }\n}\nexport { readHTMLFile, deleteUserPic };\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA;;;;;AAKA,SAASC,YAAYA,CAACC,IAAS,EAAEC,QAAa;EAC5CL,IAAA,CAAAM,OAAE,CAACC,QAAQ,CAACH,IAAI,EAAE;IAAEI,QAAQ,EAAE;EAAO,CAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI;IAC1D,IAAID,GAAG,EAAE;MACPJ,QAAQ,CAACI,GAAG,CAAC;IACf,CAAC,MAAM;MACLJ,QAAQ,CAAC,IAAI,EAAEK,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;AACJ;AAOSC,OAAA,CAAAR,YAAA,GAAAA,YAAA;AANT,SAASS,aAAaA,CAACC,MAAc;EACnC,MAAMT,IAAI,GAAG,mBAAmBS,MAAM,MAAM;EAC5C,IAAIb,IAAA,CAAAM,OAAE,CAACQ,UAAU,CAACV,IAAI,CAAC,EAAE;IACvBJ,IAAA,CAAAM,OAAE,CAACS,UAAU,CAACX,IAAI,CAAC;EACrB;AACF;AACuBO,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nconst base_response_1 = require(\"./base_response\");\nconst internal_server_1 = require(\"./internal_server\");\nconst unauthorized_1 = require(\"./unauthorized\");\nconst forbidden_1 = require(\"./forbidden\");\nconst not_found_1 = require(\"./not_found\");\nconst bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiZXhwb3J0cyIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tICcuL2Jhc2VfcmVzcG9uc2UnO1xuaW1wb3J0IHtJbnRlcm5hbFNlcnZlcn0gZnJvbSAnLi9pbnRlcm5hbF9zZXJ2ZXInO1xuaW1wb3J0IHtVbmF1dGhvcml6ZWR9IGZyb20gJy4vdW5hdXRob3JpemVkJztcbmltcG9ydCB7Rm9yYmlkZGVufSBmcm9tICcuL2ZvcmJpZGRlbic7XG5pbXBvcnQge05vdEZvdW5kfSBmcm9tICcuL25vdF9mb3VuZCc7XG5pbXBvcnQge0JhZFJlcXVlc3R9IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xuXG5leHBvcnQgY29uc3QgUmVzcG9uc2VFcnJvciA9IHtcbiAgICBCYXNlUmVzcG9uc2UsXG4gICAgQmFkUmVxdWVzdCxcbiAgICBOb3RGb3VuZCxcbiAgICBGb3JiaWRkZW4sXG4gICAgVW5hdXRob3JpemVkLFxuICAgIEludGVybmFsU2VydmVyLFxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGlCQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxXQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFFYU0sT0FBQSxDQUFBQyxhQUFhLEdBQUc7RUFDekJDLFlBQVksRUFBWlQsZUFBQSxDQUFBUyxZQUFZO0VBQ1pDLFVBQVUsRUFBVkosYUFBQSxDQUFBSSxVQUFVO0VBQ1ZDLFFBQVEsRUFBUk4sV0FBQSxDQUFBTSxRQUFRO0VBQ1JDLFNBQVMsRUFBVFIsV0FBQSxDQUFBUSxTQUFTO0VBQ1RDLFlBQVksRUFBWlYsY0FBQSxDQUFBVSxZQUFZO0VBQ1pDLGNBQWMsRUFBZFosaUJBQUEsQ0FBQVk7Q0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","exports","ResponseError","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/response_error.ts"],"sourcesContent":["import {BaseResponse} from './base_response';\nimport {InternalServer} from './internal_server';\nimport {Unauthorized} from './unauthorized';\nimport {Forbidden} from './forbidden';\nimport {NotFound} from './not_found';\nimport {BadRequest} from './bad_request';\n\nexport const ResponseError = {\n    BaseResponse,\n    BadRequest,\n    NotFound,\n    Forbidden,\n    Unauthorized,\n    InternalServer,\n}\n\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,aAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,aAAa,GAAG;EACzBC,YAAY,EAAZT,eAAA,CAAAS,YAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAI,UAAU;EACVC,QAAQ,EAARN,WAAA,CAAAM,QAAQ;EACRC,SAAS,EAATR,WAAA,CAAAQ,SAAS;EACTC,YAAY,EAAZV,cAAA,CAAAU,YAAY;EACZC,cAAc,EAAdZ,iBAAA,CAAAY;CACH","ignoreList":[]}},"mtime":1725611830108},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nclass BaseResponse extends Error {\n  constructor(message, starusCode = 500) {\n    super(message);\n    this.message = message;\n    this.statusCode = starusCode;\n    Object.setPrototypeOf(this, BaseResponse.prototype);\n  }\n}\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXJ1c0NvZGUiLCJzdGF0dXNDb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvYmFzZV9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQmFzZVJlc3BvbnNlIGV4dGVuZHMgRXJyb3Ige1xuICAgIHB1YmxpYyBzdGF0dXNDb2RlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXJ1c0NvZGUgPSA1MDApIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSlcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhcnVzQ29kZTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEJhc2VSZXNwb25zZS5wcm90b3R5cGUpXG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFhQSxZQUFhLFNBQVFDLEtBQUs7RUFHbkNDLFlBQVlDLE9BQWUsRUFBRUMsVUFBVSxHQUFHLEdBQUc7SUFDekMsS0FBSyxDQUFDRCxPQUFPLENBQUM7SUFDZCxJQUFJLENBQUNBLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNFLFVBQVUsR0FBR0QsVUFBVTtJQUM1QkUsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFUCxZQUFZLENBQUNRLFNBQVMsQ0FBQztFQUN2RDs7QUFSSkMsT0FBQSxDQUFBVCxZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BaseResponse","Error","constructor","message","starusCode","statusCode","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/base_response.ts"],"sourcesContent":["export class BaseResponse extends Error {\n    public statusCode: number;\n\n    constructor(message: string, starusCode = 500) {\n        super(message)\n        this.message = message;\n        this.statusCode = starusCode;\n        Object.setPrototypeOf(this, BaseResponse.prototype)\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAaA,YAAa,SAAQC,KAAK;EAGnCC,YAAYC,OAAe,EAAEC,UAAU,GAAG,GAAG;IACzC,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,UAAU,GAAGD,UAAU;IAC5BE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEP,YAAY,CAACQ,SAAS,CAAC;EACvD;;AARJC,OAAA,CAAAT,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1724460899778},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass InternalServer extends base_response_1.BaseResponse {\n  constructor(message) {\n    super(message, 500);\n    Object.setPrototypeOf(this, InternalServer.prototype);\n  }\n}\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9pbnRlcm5hbF9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtCYXNlUmVzcG9uc2V9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNTAwKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEludGVybmFsU2VydmVyLnByb3RvdHlwZSk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxjQUFlLFNBQVFGLGVBQUEsQ0FBQUcsWUFBWTtFQUM1Q0MsWUFBWUMsT0FBZTtJQUN2QixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7SUFDbkJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsY0FBYyxDQUFDTSxTQUFTLENBQUM7RUFDekQ7O0FBSkpDLE9BQUEsQ0FBQVAsY0FBQSxHQUFBQSxjQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","InternalServer","BaseResponse","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/internal_server.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\";\n\nexport class InternalServer extends BaseResponse {\n    constructor(message: string) {\n        super(message, 500);\n        Object.setPrototypeOf(this, InternalServer.prototype);\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,cAAe,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,cAAc,CAACM,SAAS,CAAC;EACzD;;AAJJC,OAAA,CAAAP,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1724460922114},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Unauthorized extends base_response_1.BaseResponse {\n  constructor(message) {\n    super(message, 401);\n    Object.setPrototypeOf(this, Unauthorized.prototype);\n  }\n}\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvdW5hdXRob3JpemVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCJcblxuZXhwb3J0IGNsYXNzIFVuYXV0aG9yaXplZCBleHRlbmRzIEJhc2VSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwMSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBVbmF1dGhvcml6ZWQucHJvdG90eXBlKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFlBQWEsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzFDQyxZQUFZQyxPQUFlO0lBQ3ZCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztJQUNuQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxZQUFZLENBQUNNLFNBQVMsQ0FBQztFQUN2RDs7QUFKSkMsT0FBQSxDQUFBUCxZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Unauthorized","BaseResponse","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\n\nexport class Unauthorized extends BaseResponse {\n    constructor(message: string) {\n        super(message, 401);\n        Object.setPrototypeOf(this, Unauthorized.prototype);\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,YAAa,SAAQF,eAAA,CAAAG,YAAY;EAC1CC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,YAAY,CAACM,SAAS,CAAC;EACvD;;AAJJC,OAAA,CAAAP,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1724460922114},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Forbidden extends base_response_1.BaseResponse {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2ZvcmJpZGRlbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Jhc2VSZXNwb25zZX0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiXG5cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc3NhZ2UsIDQwMylcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsU0FBVSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdkNDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFKSkMsT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Forbidden","BaseResponse","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/forbidden.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\n\nexport class Forbidden extends BaseResponse {\n    constructor(messsage: string) {\n        super(messsage, 403)\n        Object.setPrototypeOf(this, Forbidden.prototype);\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,SAAU,SAAQF,eAAA,CAAAG,YAAY;EACvCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAJJC,OAAA,CAAAP,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1724460922119},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass NotFound extends base_response_1.BaseResponse {\n  constructor(message) {\n    super(message, 404);\n    Object.setPrototypeOf(this, NotFound.prototype);\n  }\n}\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9ub3RfZm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtCYXNlUmVzcG9uc2V9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNDA0KTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE5vdEZvdW5kLnByb3RvdHlwZSlcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxRQUFTLFNBQVFGLGVBQUEsQ0FBQUcsWUFBWTtFQUN0Q0MsWUFBWUMsT0FBZTtJQUN2QixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7SUFDbkJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsUUFBUSxDQUFDTSxTQUFTLENBQUM7RUFDbkQ7O0FBSkpDLE9BQUEsQ0FBQVAsUUFBQSxHQUFBQSxRQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","NotFound","BaseResponse","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/not_found.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\";\n\nexport class NotFound extends BaseResponse {\n    constructor(message: string) {\n        super(message, 404);\n        Object.setPrototypeOf(this, NotFound.prototype)\n    }\n}"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,QAAS,SAAQF,eAAA,CAAAG,YAAY;EACtCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,QAAQ,CAACM,SAAS,CAAC;EACnD;;AAJJC,OAAA,CAAAP,QAAA,GAAAA,QAAA","ignoreList":[]}},"mtime":1724460922114},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass BadRequest extends base_response_1.BaseResponse {\n  constructor(message) {\n    super(message, 400);\n    Object.setPrototypeOf(this, BadRequest.prototype);\n  }\n}\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsIkJhc2VSZXNwb25zZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2JhZF9yZXF1ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNDAwKVxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgQmFkUmVxdWVzdC5wcm90b3R5cGUpXG4gICAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsVUFBVyxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDeENDLFlBQVlDLE9BQWU7SUFDdkIsS0FBSyxDQUFDQSxPQUFPLEVBQUUsR0FBRyxDQUFDO0lBQ25CQyxNQUFNLENBQUNDLGNBQWMsQ0FBQyxJQUFJLEVBQUVMLFVBQVUsQ0FBQ00sU0FBUyxDQUFDO0VBQ3JEOztBQUpKQyxPQUFBLENBQUFQLFVBQUEsR0FBQUEsVUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","BadRequest","BaseResponse","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/bad_request.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\";\n\nexport class BadRequest extends BaseResponse {\n    constructor(message: string) {\n        super(message, 400)\n        Object.setPrototypeOf(this, BadRequest.prototype)\n    }\n}"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,UAAW,SAAQF,eAAA,CAAAG,YAAY;EACxCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,UAAU,CAACM,SAAS,CAAC;EACrD;;AAJJC,OAAA,CAAAP,UAAA,GAAAA,UAAA","ignoreList":[]}},"mtime":1724460922119},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useValidation = void 0;\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\nexports.useValidation = useValidation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VWYWxpZGF0aW9uIiwic2NoZW1hIiwidmFsdWUiLCJvcHRpb25zIiwidmFsaWRhdGVTeW5jIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJvcnRFYXJseSIsInN0cmlwVW5rbm93biIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci91c2VfdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IFNjaGVtYSwgVmFsaWRhdGVPcHRpb25zIH0gZnJvbSAneXVwJ1xuXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWYWxpZGF0aW9uPFQ+KFxuICBzY2hlbWE6IFNjaGVtYTxUPixcbiAgdmFsdWU6IFQgfCBhbnksXG4gIG9wdGlvbnM/OiBWYWxpZGF0ZU9wdGlvbnNcbik6IFQge1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZSwge1xuICAgIGFib3J0RWFybHk6IGZhbHNlLFxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcbiAgICAuLi5vcHRpb25zLFxuICB9KVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLFNBQWdCQSxhQUFhQSxDQUMzQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0o7QUFWQU0sT0FBQSxDQUFBVCxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/use_validation.ts"],"sourcesContent":["\nimport { Schema, ValidateOptions } from 'yup'\n\n\nexport function useValidation<T>(\n  schema: Schema<T>,\n  value: T | any,\n  options?: ValidateOptions\n): T {\n  return schema.validateSync(value, {\n    abortEarly: false,\n    stripUnknown: true,\n    ...options,\n  })\n}\n\n"],"mappings":";;;;;;AAIA,SAAgBA,aAAaA,CAC3BC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ;AAVAM,OAAA,CAAAT,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830110},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loginSchema = exports.registerSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerSchema = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  // lastName: yup.string().required('lastName is required'),\n  // nickName: yup.string().required('nickName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  // phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nexports.loginSchema = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJ1c2VyTmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0b2tlblZlcmlmeSIsIm51bGxhYmxlIiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB5dXAgZnJvbSAneXVwJztcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICB1c2VyTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCd1c2VyTmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIC8vIGxhc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ2xhc3ROYW1lIGlzIHJlcXVpcmVkJyksXG4gICAgLy8gbmlja05hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnbmlja05hbWUgaXMgcmVxdWlyZWQnKSxcbiAgICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKCdpbnZhbGlkIGVtYWlsJykucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXG4gICAgLy8gcGhvbmVOdW1iZXI6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKCdjb25maXJtUGFzc3dvcmQnKV0sICdwYXNzd29yZCBhcmUgbm90IHRoZSBzYW1lJyksXG4gICAgY29uZmlybVBhc3N3b3JkOiB5dXAuc3RyaW5nKCkubWluKDgsICdhdCBsZWFzdCA4IGNoYXJlY3RlcnMnKVxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ3Bhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpXG59KTtcblxuZXhwb3J0ICBjb25zdCBsb2dpblNjaGVtYSA9IHl1cC5vYmplY3QoKVxuICAgIC5zaGFwZSh7XG4gICAgICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXG4gICAgICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkJyksXG4gICAgfSkucmVxdWlyZWQoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLEdBQUEsR0FBQUMsWUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsY0FBYyxHQUFHSixHQUFHLENBQUNLLE1BQU0sRUFBRSxDQUFDQyxLQUFLLENBQUM7RUFDN0NDLFFBQVEsRUFBRVAsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQixDQUFDO0VBQ3ZEO0VBQ0E7RUFDQUMsS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RTtFQUNBRSxXQUFXLEVBQUVYLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNJLFFBQVEsRUFBRTtFQUNwQ0MsUUFBUSxFQUFFYixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDTSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQ2pEQyxLQUFLLENBQUMsQ0FBQ2YsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUMsRUFBRSwyQkFBMkIsQ0FBQztFQUNyRUMsZUFBZSxFQUFFakIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ00sR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUN4REMsS0FBSyxDQUFDLENBQUNmLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLDJCQUEyQjtDQUNoRSxDQUFDO0FBRVliLE9BQUEsQ0FBQWUsV0FBVyxHQUFHbEIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FDbkNDLEtBQUssQ0FBQztFQUNISSxLQUFLLEVBQUVWLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUNqREksUUFBUSxFQUFFYixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsc0JBQXNCO0NBQ3pELENBQUMsQ0FBQ0EsUUFBUSxFQUFFIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["yup","__importStar","require","exports","registerSchema","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","loginSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\n\nexport const registerSchema = yup.object().shape({\n    userName: yup.string().required('userName is required'),\n    // lastName: yup.string().required('lastName is required'),\n    // nickName: yup.string().required('nickName is required'),\n    email: yup.string().email('invalid email').required('email is required'),\n    // phoneNumber: yup.string().nullable(),\n    tokenVerify: yup.string().nullable(),\n    password: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('password')], 'password are not the same')\n});\n\nexport  const loginSchema = yup.object()\n    .shape({\n        email: yup.string().required('email is required'),\n        password: yup.string().required('password is required'),\n    }).required();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,cAAc,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,QAAQ,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvD;EACA;EACAC,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxE;EACAE,WAAW,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEYb,OAAA,CAAAe,WAAW,GAAGlB,GAAG,CAACK,MAAM,EAAE,CACnCC,KAAK,CAAC;EACHI,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE","ignoreList":[]}},"mtime":1725613258459},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst send_email_1 = require(\"../../helper/send_email\");\nconst common_1 = require(\"../../helper/common\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield (0, db_1.getUserInfo)(email);\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  static confrimEmail(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const userData = (0, use_validation_1.useValidation)(schema_1.confirmEmailSchema, formData);\n      const confirmEmailResult = yield (0, db_1.confirmEmail)(userData);\n      return app_response_1.BuildResponse.appResponse(confirmEmailResult);\n    });\n  }\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      send_email_1.SendEmail.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getNewPassword = yield (0, db_1.comparePassword)(formData.email);\n      const pass = getNewPassword[0].password;\n      const getComparePassword = yield bcrypt_1.default.compare(formData.oldPassword, pass);\n      if (getComparePassword) {\n        const getNewPassword = yield (0, db_1.changePassword)(formData);\n        return getNewPassword;\n      }\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfileuser(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.tokenVerify = tokenVerify;\n      const result = yield (0, db_1.updateProfileUser)(userData);\n      if (!result) {\n        throw new response_error_1.ResponseError.BadRequest(\"Can Not Update profile...\");\n      } else {\n        return result;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.ResponseError.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.useValidation)(schema_1.checkEmailSchema, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.user_id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.UserService = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsInVzZV92YWxpZGF0aW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlbmRfZW1haWxfMSIsImNvbW1vbl8xIiwianNvbndlYnRva2VuXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJtc18xIiwicmVzcG9uc2VfZXJyb3JfMSIsImJjcnlwdF8xIiwic2NoZW1hXzEiLCJKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiIsIkpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJleHBpcmVzSW4iLCJkZWZhdWx0IiwiVXNlclNlcnZpY2UiLCJnZXRVc2VySW5mbyIsImVtYWlsIiwidmFsaWRhdGVVc2VyRW1haWwiLCJkYXRhIiwiY2hlY2tVc2VyRXhpc3QiLCJsZW5ndGgiLCJjb25mcmltRW1haWwiLCJmb3JtRGF0YSIsInVzZXJEYXRhIiwidXNlVmFsaWRhdGlvbiIsImNvbmZpcm1FbWFpbFNjaGVtYSIsImNvbmZpcm1FbWFpbFJlc3VsdCIsImNvbmZpcm1FbWFpbCIsIkJ1aWxkUmVzcG9uc2UiLCJhcHBSZXNwb25zZSIsImdldFZlcmlmeUNvZGUiLCJ0b2tlblZlcmlmeSIsInJlc3VsdCIsImdldE9UUCIsIlNlbmRFbWFpbCIsIkFjY291bnRSZWdpc3RlciIsImNoYW5nZVBhc3N3b3JkIiwiZ2V0TmV3UGFzc3dvcmQiLCJjb21wYXJlUGFzc3dvcmQiLCJwYXNzIiwicGFzc3dvcmQiLCJnZXRDb21wYXJlUGFzc3dvcmQiLCJjb21wYXJlIiwib2xkUGFzc3dvcmQiLCJ1cGRhdGVQcm9maWxldXNlciIsImdlbmVyYXRlVG9rZW4iLCJjb2RlIiwiZ2V0VW5pcXVlQ29kZXYyIiwic2lnbiIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwidXBkYXRlUHJvZmlsZVVzZXIiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsImNoZWNrTmlja05hbWUiLCJuaWNrTmFtZSIsImdldERhdGEiLCJzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbiIsImNoZWNrRW1haWxTY2hlbWEiLCJjdXJyZW50VXNlciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsImlzQWN0aXZlIiwibmV3Q29kZSIsInVwZGF0ZVVzZXJWZXJpZnlDb2RlIiwidXNlcl9pZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvc2VyY3ZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBjaGFuZ2VQYXNzd29yZCxcclxuICBjaGVja05pY2tOYW1lLFxyXG4gIGNoZWNrVXNlckV4aXN0LFxyXG4gIGNvbXBhcmVQYXNzd29yZCxcclxuICBjb25maXJtRW1haWwsXHJcbiAgZ2V0T1RQLFxyXG4gIGdldFVzZXJJbmZvLFxyXG4gIHVwZGF0ZVByb2ZpbGVVc2VyLFxyXG4gIHVwZGF0ZVVzZXJWZXJpZnlDb2RlLFxyXG59IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHt1c2VWYWxpZGF0aW9ufSBmcm9tIFwiLi4vLi4vaGVscGVyL3VzZV92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IENvbmZpcm1FbWFpbCwgVXNlciB9IGZyb20gXCIuLi8uLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7U2VuZEVtYWlsfSBmcm9tIFwiLi4vLi4vaGVscGVyL3NlbmRfZW1haWxcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQge1Jlc3BvbnNlRXJyb3J9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyBjaGVja0VtYWlsU2NoZW1hLCBjb25maXJtRW1haWxTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuXHJcbmNvbnN0IHsgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sIEpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiB9OiBhbnkgPSBwcm9jZXNzLmVudjtcclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gMSBEYXlzXHJcblxyXG5jb25zdCBleHBpcmVzSW4gPSBtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VySW5mbyhlbWFpbDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgZ2V0VXNlckluZm8oZW1haWwpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHZhbGlkYXRlVXNlckVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1VzZXJFeGlzdChlbWFpbCk7XHJcblxyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBkYXRhWzBdIGFzIFVzZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBmb3JtRGF0YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29uZnJpbUVtYWlsKGZvcm1EYXRhOiBDb25maXJtRW1haWwpIHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlVmFsaWRhdGlvbihjb25maXJtRW1haWxTY2hlbWEsIGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGNvbmZpcm1FbWFpbFJlc3VsdCA9IGF3YWl0IGNvbmZpcm1FbWFpbCh1c2VyRGF0YSk7XHJcbiAgICByZXR1cm4gQnVpbGRSZXNwb25zZS5hcHBSZXNwb25zZShjb25maXJtRW1haWxSZXN1bHQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFZlcmlmeUNvZGUodXNlckRhdGE6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gICAgLy8gY29uc3QgdXNlckRhdGEgPSB1c2VWYWxpZGF0aW9uKHNjaGVtYVVzZXIuY29uZmlybUVtYWlsLHVzZXJEYXRhKVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0T1RQKHVzZXJEYXRhLCB0b2tlblZlcmlmeSk7XHJcbiAgICBTZW5kRW1haWwuQWNjb3VudFJlZ2lzdGVyKHJlc3VsdCk7XHJcblxyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBlbWFpbFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKGZvcm1EYXRhLmVtYWlsKTtcclxuICAgIGNvbnN0IHBhc3MgPSBnZXROZXdQYXNzd29yZFswXS5wYXNzd29yZDtcclxuICAgIGNvbnN0IGdldENvbXBhcmVQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGZvcm1EYXRhLm9sZFBhc3N3b3JkLCBwYXNzKTtcclxuXHJcbiAgICBpZiAoZ2V0Q29tcGFyZVBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGEpO1xyXG4gICAgICByZXR1cm4gZ2V0TmV3UGFzc3dvcmRcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHVzZXJEYXRhXHJcbiAgICovXHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUHJvZmlsZXVzZXIodXNlckRhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdlbmVyYXRlVG9rZW4gPSB7XHJcbiAgICAgIGNvZGU6IGdldFVuaXF1ZUNvZGV2MigpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlbmVyYXRlVG9rZW4pKSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHtcclxuICAgICAgICBleHBpcmVzSW4sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdXNlckRhdGEudmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIHVzZXJEYXRhLnRva2VuVmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlVXNlcih1c2VyRGF0YSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiQ2FuIE5vdCBVcGRhdGUgcHJvZmlsZS4uLlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrTmlja05hbWUobmlja05hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgZ2V0RGF0YSA9IGF3YWl0IGNoZWNrTmlja05hbWUoKTtcclxuICAgIGlmIChnZXREYXRhWzBdLm5pY2tOYW1lID09PSBuaWNrTmFtZSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIG5pY2tOYW1lIGlzIGFscmVheSBleGlzdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHVzZVZhbGlkYXRpb24oY2hlY2tFbWFpbFNjaGVtYSwgeyBlbWFpbDogZW1haWwgfSk7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnZhbGlkYXRlVXNlckVtYWlsKGVtYWlsKTtcclxuICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybiB7IHN0YXR1czogMSwgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgdmFsaWQgIVwiIH07XHJcblxyXG4gICAgaWYgKGN1cnJlbnRVc2VyLmVtYWlsQ29uZmlybWVkID09PSAwKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN0YXR1czogMixcclxuICAgICAgICBtZXNzYWdlOiBcInRoaXMgZW1haWwgYWRkcmVzcyBpcyBub3QgY29uZmlybWVkIHlldCAhXCIsXHJcbiAgICAgIH07XHJcbiAgICBpZiAoY3VycmVudFVzZXIuc2lnbnVwU3RhdHVzID09PSAwKVxyXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDMsIG1lc3NhZ2U6IFwic2lnbnVwIHByb2Nlc3MgaXMgbm90IGNvbXBsZXRlIHlldCAhXCIgfTtcclxuICAgIC8vIFRPRE8gZm9yIGZpeCBpc0FjdGl2ZSB0byBib29sZWFuXHJcbiAgICBpZiAoY3VycmVudFVzZXIuaXNBY3RpdmUgPT09IDApXHJcbiAgICAgIHJldHVybiB7IHN0YXR1czogNCwgbWVzc2FnZTogXCJ0aGlzIGFjY291bnQgaXMgbm90IGFjdGl2ZSAhXCIgfTtcclxuICAgIGNvbnN0IG5ld0NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGF3YWl0IHVwZGF0ZVVzZXJWZXJpZnlDb2RlKGN1cnJlbnRVc2VyLnVzZXJfaWQsIG5ld0NvZGUpO1xyXG4gICAgLy8gc2VuZCBmb3Jnb3QgcGFzcyB0b2tlbiBjb2RlXHJcbiAgICAvLyBTZW5kTWFpbC5zZW5kUmVzZXRQYXNzd29yZEVtYWlsKGN1cnJlbnRVc2VyLCBuZXdDb2RlKTtcclxuICAgIHJldHVybiB7IHN0YXR1czogNSwgbWVzc2FnZTogXCJjb2RlIGhhcyBiZWVuIHNlbmQgc3VjY2Vzc2Z1bGx5ICFcIiB9O1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVdBLE1BQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFFQSxNQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxRQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxjQUFBLEdBQUFDLGVBQUEsQ0FBQU4sT0FBQTtBQUNBLE1BQUFPLElBQUEsR0FBQUQsZUFBQSxDQUFBTixPQUFBO0FBQ0EsTUFBQVEsZ0JBQUEsR0FBQVIsT0FBQTtBQUNBLE1BQUFTLFFBQUEsR0FBQUgsZUFBQSxDQUFBTixPQUFBO0FBQ0EsTUFBQVUsUUFBQSxHQUFBVixPQUFBO0FBRUEsTUFBTTtFQUFFVyx1QkFBdUI7RUFBRUM7QUFBd0IsQ0FBRSxHQUFRQyxPQUFPLENB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","map":{"version":3,"names":["db_1","require","use_validation_1","app_response_1","send_email_1","common_1","jsonwebtoken_1","__importDefault","ms_1","response_error_1","bcrypt_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","validateUserEmail","data","checkUserExist","length","confrimEmail","formData","userData","useValidation","confirmEmailSchema","confirmEmailResult","confirmEmail","BuildResponse","appResponse","getVerifyCode","tokenVerify","result","getOTP","SendEmail","AccountRegister","changePassword","getNewPassword","comparePassword","pass","password","getComparePassword","compare","oldPassword","updateProfileuser","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","updateProfileUser","ResponseError","BadRequest","checkNickName","nickName","getData","sendFrogetPasswordToken","checkEmailSchema","currentUser","status","message","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","user_id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/sercvice.ts"],"sourcesContent":["import {\r\n  changePassword,\r\n  checkNickName,\r\n  checkUserExist,\r\n  comparePassword,\r\n  confirmEmail,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfileUser,\r\n  updateUserVerifyCode,\r\n} from \"../../bin/db\";\r\nimport {useValidation} from \"../../helper/use_validation\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport { ConfirmEmail, User } from \"../../types/user\";\r\nimport {SendEmail} from \"../../helper/send_email\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport {ResponseError} from \"../../modules/error/response_error\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { checkEmailSchema, confirmEmailSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class UserService {\r\n  public static async getUserInfo(email: string) {\r\n    return await getUserInfo(email);\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async confrimEmail(formData: ConfirmEmail) {\r\n    const userData = useValidation(confirmEmailSchema, formData);\r\n    const confirmEmailResult = await confirmEmail(userData);\r\n    return BuildResponse.appResponse(confirmEmailResult);\r\n  }\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    SendEmail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(formData: User) {\r\n    const getNewPassword = await comparePassword(formData.email);\r\n    const pass = getNewPassword[0].password;\r\n    const getComparePassword = await bcrypt.compare(formData.oldPassword, pass);\r\n\r\n    if (getComparePassword) {\r\n      const getNewPassword = await changePassword(formData);\r\n      return getNewPassword\r\n    }\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n\r\n  public static async updateProfileuser(userData: User) {\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.tokenVerify = tokenVerify;\r\n    const result = await updateProfileUser(userData);\r\n    if (!result) {\r\n      throw new ResponseError.BadRequest(\"Can Not Update profile...\");\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(checkEmailSchema, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.user_id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725673927310},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.changePassword = exports.comparePassword = exports.updateDoctor = exports.doctorDetail = exports.addDoctor = exports.checkDoctorPhoneNumberExists = exports.getDoctors = exports.updatePatient = exports.deletePatient = exports.addPatient = exports.checkPhoneNumberExists = exports.patientDetail = exports.getPatients = exports.deleteAppointment = exports.updateAppointment = exports.getAppointment = exports.saveAppointment = exports.getUserInfo = exports.getNavItems = exports.updateProfileUser = exports.getOTP = exports.getAdmins = exports.updateUserVerifyCode = exports.getUserByGoogleId = exports.getUserByPassword = exports.confirmEmail = exports.createUser = exports.checkNickName = exports.checkUserExist = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"./mysql\");\nconst schema_1 = require(\"../controller/user/schema\");\n// ****** Auth ******\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT user_id,email FROM  ${mysql_1.coreSchema}.users\n      WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nexports.checkUserExist = checkUserExist;\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM Ali_DB.users`);\n    return getData;\n  });\n}\nexports.checkNickName = checkNickName;\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (user_id,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.userName, data.email, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nexports.createUser = createUser;\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * \n    FROM ${mysql_1.coreSchema}.users\n    WHERE email=? AND deletedAt IS NULL\n    `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.users\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\n        WHERE email =?\n        `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\n    WHERE email=?\n  `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nexports.confirmEmail = confirmEmail;\nfunction getUserByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(` SELECT u.*, r.*,p.*\n    FROM ${mysql_1.coreSchema}.users u\n    LEFT JOIN ${mysql_1.coreSchema}.user_roles ur ON u.user_id = ur.user_id\n    LEFT JOIN ${mysql_1.coreSchema}.roles r ON ur.role_id = r.id\n    LEFT JOIN ${mysql_1.coreSchema}.role_permissions rp ON r.id = rp.role_id\n    LEFT JOIN ${mysql_1.coreSchema}.permissions p ON rp.permission_id  = p.id\n\n    WHERE u.email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nexports.getUserByPassword = getUserByPassword;\nfunction getUserByGoogleId(googleId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`\n    SELECT * FROM${mysql_1.coreSchema}.users\n    WHERE google_id=?`, {\n      values: [googleId]\n    });\n    if (user.length < 1) return null;else return user[0];\n  });\n}\nexports.getUserByGoogleId = getUserByGoogleId;\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET verify_code=?,updatedAt=?\n    WHERE user_id=?\n    `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n      SELECT user_id,email,verify_code\n      FROM ${mysql_1.coreSchema}.users\n      WHERE user_id=?\n      `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nexports.updateUserVerifyCode = updateUserVerifyCode;\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nexports.getAdmins = getAdmins;\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nexports.getOTP = getOTP;\nfunction updateProfileUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET \n      userName = ?,\n      gender = ?,\n      phoneNumber = ?,\n      dateOfBirth = ?,\n      address = ?,\n      verify_code = ?,\n      tokenVerify = ?,\n      country = ?,\n      city = ?,\n      state = ?,\n      zipcode = ?\n    WHERE email = ?`, {\n      values: [data.userName, data.gender, data.phoneNumber, data.dateOfBirth, data.address, data.verify_code, data.tokenVerify, data.country, data.city, data.state, data.zipcode, data.email]\n    });\n    return result;\n  });\n}\nexports.updateProfileUser = updateProfileUser;\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getManu = yield (0, mysql_1.query)(`\n  SELECT\n    m.menu_id, \n    m.icon, \n    m.menu_name, \n    m.path, \n    s.submenu_id, \n    s.icon AS submenu_icon,\n    s.submenu_name, \n    s.url\n  FROM ${mysql_1.coreSchema}.menu m\n  LEFT JOIN ${mysql_1.coreSchema}.submenu s ON m.menu_id = s.menu_id\n  ORDER BY m.menu_id, s.submenu_id`);\n    const menuMap = new Map();\n    getManu.forEach(row => {\n      var _a;\n      const menuId = row.menu_id;\n      if (!menuMap.has(menuId)) {\n        menuMap.set(menuId, {\n          menu_id: row.menu_id,\n          icon: row.icon,\n          // Ensure this line is correct\n          menu_name: row.menu_name,\n          path: row.path,\n          submenus: []\n        });\n      }\n      if (row.submenu_id) {\n        const submenu = {\n          submenu_id: row.submenu_id,\n          submenu_name: row.submenu_name,\n          url: row.url,\n          icon: row.submenu_icon // Adjusted to submenu_icon to prevent confusion\n        };\n        (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n      }\n    });\n    return Array.from(menuMap.values());\n  });\n}\nexports.getNavItems = getNavItems;\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email=?`, {\n      values: [email]\n    });\n    if (data) return data;\n  });\n}\nexports.getUserInfo = getUserInfo;\nfunction saveAppointment(eventData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const insertEvent = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.calendar_events \n      (event_title, color, date, event_description)\n       VALUES (?, ?, ?, ?)`, {\n        values: [eventData.event_title, eventData.color, eventData.date, eventData.event_description]\n      });\n      return insertEvent;\n    } catch (error) {\n      throw new Error(`Error inserting event: ${error}`);\n    }\n  });\n}\nexports.saveAppointment = saveAppointment;\nfunction getAppointment() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getEventData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.calendar_events`);\n    return getEventData;\n  });\n}\nexports.getAppointment = getAppointment;\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.calendar_events\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`, {\n      values: [data.date, new Date(), data.event_id]\n    });\n    if (result) {\n      return result;\n    }\n  });\n}\nexports.updateAppointment = updateAppointment;\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\nexports.deleteAppointment = deleteAppointment;\n// ****** Patients ******\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT * FROM ${mysql_1.coreSchema}.patients\n  `);\n    return patients;\n  });\n}\nexports.getPatients = getPatients;\nfunction patientDetail(patientId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [patientId]\n    });\n    return result;\n  });\n}\nexports.patientDetail = patientDetail;\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nfunction addPatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patients\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\n        bloodGroup, bloodPressure, sugarLevel, injury, profileImage,heartBeat,\n        haemoglobin,doctor,treatment,charges,description,date)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n        values: [patientData.firstName, patientData.lastName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.maritalStatus, patientData.address, patientData.bloodGroup, patientData.bloodPressure, patientData.sugarLevel, patientData.injury, patientData.profileImage, patientData.heartBeat, patientData.haemoglobin, patientData.doctor, patientData.treatment, patientData.charges, patientData.description, new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.log();\n      console.error(\"Error inserting patient data:\", error);\n      throw error;\n    }\n  });\n}\nexports.addPatient = addPatient;\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nexports.deletePatient = deletePatient;\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET firstName = ?,\n          lastName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.firstName, patientData.lastName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nexports.updatePatient = updatePatient;\n// ***********Doctors *********\nfunction getDoctors() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const doctors = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.doctor`);\n    return doctors;\n  });\n}\nexports.getDoctors = getDoctors;\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.doctor\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nfunction addDoctor(doctorInfo) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor\n      (name,gender,mobile,degree,dateOfBirth,department,\n       age,email,address,profileImage,specialization,joingin_date)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n        values: [doctorInfo.name, doctorInfo.gender, doctorInfo.mobile, doctorInfo.degree, doctorInfo.dateOfBirth, doctorInfo.department, doctorInfo.age, doctorInfo.email, doctorInfo.address, doctorInfo.profileImage, doctorInfo.specialization, new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.log();\n      console.error(\"Error inserting doctor data:\", error);\n      throw error;\n    }\n  });\n}\nexports.addDoctor = addDoctor;\nfunction doctorDetail(doctorId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor d\n    LEFT JOIN \n    ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.doctor_id\n     WHERE \n    d.id = ?;\n`, {\n      values: [doctorId]\n    });\n    return result;\n  });\n}\nexports.doctorDetail = doctorDetail;\nfunction updateDoctor(doctortData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.doctor\n      SET name = ?,\n          gender = ?,\n          mobile = ?,\n          age = ?,\n          email = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [doctortData.name, doctortData.gender, doctortData.mobile, doctortData.dateOfBirth, doctortData.age, doctortData.email, doctortData.address, doctortData.id]\n    });\n    return result;\n  });\n}\nexports.updateDoctor = updateDoctor;\nfunction comparePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT password FROM ${mysql_1.coreSchema}.users\n    WHERE email=?\n    `, {\n      values: [data]\n    });\n    return result;\n  });\n}\nexports.comparePassword = comparePassword;\nfunction changePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      newPassword\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      newPassword,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const result = yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET password=?,updatedAt=?\n    WHERE email=?\n    `, {\n      values: [hash, new Date(), data.email]\n    });\n    return result;\n  });\n}\nexports.changePassword = changePassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJteXNxbF8xIiwic2NoZW1hXzEiLCJjaGVja1VzZXJFeGlzdCIsImVtYWlsIiwidXNlciIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImV4cG9ydHMiLCJjaGVja05pY2tOYW1lIiwiZ2V0RGF0YSIsImNyZWF0ZVVzZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaCIsImRlZmF1bHQiLCJoYXNoU3luYyIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJ1c2VyTmFtZSIsInZlcmlmeV9jb2RlIiwiRGF0ZSIsInRva2VuVmVyaWZ5IiwiY29uZmlybUVtYWlsIiwibGVuZ3RoIiwiaXNTdWNjZXNzZnVsbCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsImNvZGUiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImdldFVzZXJCeVBhc3N3b3JkIiwiZ2V0VXNlckJ5R29vZ2xlSWQiLCJnb29nbGVJZCIsInVwZGF0ZVVzZXJWZXJpZnlDb2RlIiwidXNlcklkIiwibmV3Q29kZSIsImdldEFkbWlucyIsInVzZXJBZG1pbiIsImdldE9UUCIsInVwZGF0ZURhdGEiLCJ1cGRhdGVQcm9maWxlVXNlciIsImdlbmRlciIsInBob25lTnVtYmVyIiwiZGF0ZU9mQmlydGgiLCJhZGRyZXNzIiwiY291bnRyeSIsImNpdHkiLCJzdGF0ZSIsInppcGNvZGUiLCJnZXROYXZJdGVtcyIsImdldE1hbnUiLCJtZW51TWFwIiwiTWFwIiwiZm9yRWFjaCIsInJvdyIsIm1lbnVJZCIsIm1lbnVfaWQiLCJoYXMiLCJzZXQiLCJpY29uIiwibWVudV9uYW1lIiwicGF0aCIsInN1Ym1lbnVzIiwic3VibWVudV9pZCIsInN1Ym1lbnUiLCJzdWJtZW51X25hbWUiLCJ1cmwiLCJzdWJtZW51X2ljb24iLCJfYSIsImdldCIsInB1c2giLCJBcnJheSIsImZyb20iLCJnZXRVc2VySW5mbyIsInNhdmVBcHBvaW50bWVudCIsImV2ZW50RGF0YSIsImluc2VydEV2ZW50IiwiZXZlbnRfdGl0bGUiLCJjb2xvciIsImRhdGUiLCJldmVudF9kZXNjcmlwdGlvbiIsImVycm9yIiwiRXJyb3IiLCJnZXRBcHBvaW50bWVudCIsImdldEV2ZW50RGF0YSIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXZlbnRfaWQiLCJkZWxldGVBcHBvaW50bWVudCIsImdldFBhdGllbnRzIiwicGF0aWVudHMiLCJwYXRpZW50RGV0YWlsIiwicGF0aWVudElkIiwiY2hlY2tQaG9uZU51bWJlckV4aXN0cyIsIm1vYmlsZSIsImFkZFBhdGllbnQiLCJwYXRpZW50RGF0YSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYWdlIiwibWFyaXRhbFN0YXR1cyIsImJsb29kR3JvdXAiLCJibG9vZFByZXNzdXJlIiwic3VnYXJMZXZlbCIsImluanVyeSIsInByb2ZpbGVJbWFnZSIsImhlYXJ0QmVhdCIsImhhZW1vZ2xvYmluIiwiZG9jdG9yIiwidHJlYXRtZW50IiwiY2hhcmdlcyIsImRlc2NyaXB0aW9uIiwiY29uc29sZSIsImxvZyIsImRlbGV0ZVBhdGllbnQiLCJpZCIsInVwZGF0ZVBhdGllbnQiLCJnZXREb2N0b3JzIiwiZG9jdG9ycyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJhZGREb2N0b3IiLCJkb2N0b3JJbmZvIiwibmFtZSIsImRlZ3JlZSIsImRlcGFydG1lbnQiLCJzcGVjaWFsaXphdGlvbiIsImRvY3RvckRldGFpbCIsImRvY3RvcklkIiwidXBkYXRlRG9jdG9yIiwiZG9jdG9ydERhdGEiLCJjb21wYXJlUGFzc3dvcmQiLCJjaGFuZ2VQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcYmluXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9iaW4vZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcbmltcG9ydCB7fSBmcm9tIFwiLi4vY29udHJvbGxlci91c2VyL3NjaGVtYVwiO1xyXG5pbXBvcnQgeyBBZG1pbkRUTyB9IGZyb20gXCIuLi9tb2RlbHMvYWRtaW5cIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuaW1wb3J0IHsgSUFwcG9pbnRtZW50IH0gZnJvbSBcIi4uL3R5cGVzL2FwcG9pbnRtZW50LmludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBNZW51LCBTdWJtZW51IH0gZnJvbSBcIi4uL3R5cGVzL25hdkl0ZW1cIjtcclxuaW1wb3J0IHsgQXBwUmVzcG9uc2UgfSBmcm9tIFwiLi4vdHlwZXMvcmVzcG9uc2UuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IENvbmZpcm1FbWFpbCwgQ3JlYXRlVXNlciwgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQsIGNvcmVTY2hlbWEsIHF1ZXJ5IH0gZnJvbSBcIi4vbXlzcWxcIjtcclxuaW1wb3J0IHsgRG9jdG9yc0RUTyB9IGZyb20gXCIuLi9tb2RlbHMvZG9jdG9yc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVQYXNzd29yZFNjaGVtYSB9IGZyb20gXCIuLi9jb250cm9sbGVyL3VzZXIvc2NoZW1hXCI7XHJcblxyXG4vLyAqKioqKiogQXV0aCAqKioqKipcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrVXNlckV4aXN0KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFJvd0RhdGFQYWNrZXRbXT4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCB1c2VyX2lkLGVtYWlsIEZST00gICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgV0hFUkUgZW1haWw9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZSgpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IGdldERhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihgU0VMRUNUICogRlJPTSBBbGlfREIudXNlcnNgKTtcclxuICByZXR1cm4gZ2V0RGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIoZGF0YTogYW55KSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGNyZWF0ZVBhc3N3b3JkU2NoZW1hLnZhbGlkYXRlU3luY0F0KFxyXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcclxuICAgIGZkUGFzc3dvcmRcclxuICApO1xyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoID0gYmNyeXB0Lmhhc2hTeW5jKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICh1c2VyX2lkLHVzZXJOYW1lLGVtYWlsLHBhc3N3b3JkLHNpZ251cFN0YXR1cyx2ZXJpZnlfY29kZSxjcmVhdGVkQXQsdXBkYXRlZEF0LHRva2VuVmVyaWZ5KVxyXG4gICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIG5ld0lkLFxyXG4gICAgICAgIGRhdGEudXNlck5hbWUsXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBoYXNoLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgZGF0YS50b2tlblZlcmlmeSxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAqIFxyXG4gICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICBXSEVSRSBlbWFpbD0/IEFORCBkZWxldGVkQXQgSVMgTlVMTFxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAocmVzdWx0Lmxlbmd0aCA8IDEpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiBmYWxzZSxcclxuICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICBtZXNzYWdlOiBcInVzZXIgbm90IGZvdW5kIVwiLFxyXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICBjb25zdCB1c2VyID0gcmVzdWx0WzBdIGFzIFVzZXI7XHJcbiAgaWYgKHVzZXIuZW1haWwgIT09IGRhdGEuZW1haWwpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiBmYWxzZSxcclxuICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICBtZXNzYWdlOiBcImVtYWlsIGlzIG5vdCBjb3JyZWN0XCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIGlmICh1c2VyLmVtYWlsQ29uZmlybWVkKSB7XHJcbiAgICBpZiAodXNlci5zaWdudXBTdGF0dXMgPT09IDEpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgXHJcbiAgICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBTRVQgc2lnbnVwU3RhdHVzPT8sZW1haWxDb25maXJtZWQ9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICAgIFdIRVJFIGVtYWlsID0/XHJcbiAgICAgICAgYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZXM6IFsxLCAxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiBcImVtYWlsIGFscmVhZHkgY29uZmlybWVkXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIH1cclxuICBpZiAodXNlci52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSlcclxuICAgIHJldHVybiB7IHN0YXR1czogZmFsc2UsIG1lc3NhZ2U6IFwiY29kZSBpcyBub3QgY29ycmVjdFwiLCBjb2RlOiA0MDAgfTtcclxuICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFNFVCBlbWFpbENvbmZpcm1lZD0xLCBzaWdudXBTdGF0dXM9Mix1cGRhdGVkQXQ9P1xyXG4gICAgV0hFUkUgZW1haWw9P1xyXG4gIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ldyBEYXRlKCksIGRhdGEuZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlzU3VjY2Vzc2Z1bGw6IHRydWUsXHJcbiAgICBzaG93VG9Vc2VyOiB0cnVlLFxyXG4gICAgbWVzc2FnZUNvZGU6IFwiTVNHXzAxXCIsXHJcbiAgICBtZXNzYWdlS2luZDogMSxcclxuICAgIG1lc3NhZ2U6IFwiZW1haWwgY29uZmlybWVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gIH0gYXMgQXBwUmVzcG9uc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlQYXNzd29yZChcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBhc3N3b3JkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGAgU0VMRUNUIHUuKiwgci4qLHAuKlxyXG4gICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzIHVcclxuICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnVzZXJfcm9sZXMgdXIgT04gdS51c2VyX2lkID0gdXIudXNlcl9pZFxyXG4gICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZXMgciBPTiB1ci5yb2xlX2lkID0gci5pZFxyXG4gICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZV9wZXJtaXNzaW9ucyBycCBPTiByLmlkID0gcnAucm9sZV9pZFxyXG4gICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucGVybWlzc2lvbnMgcCBPTiBycC5wZXJtaXNzaW9uX2lkICA9IHAuaWRcclxuXHJcbiAgICBXSEVSRSB1LmVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5R29vZ2xlSWQoZ29vZ2xlSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUICogRlJPTSR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGdvb2dsZV9pZD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZ29vZ2xlSWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHVzZXIubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XHJcbiAgZWxzZSByZXR1cm4gdXNlclswXSBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFNFVCB2ZXJpZnlfY29kZT0/LHVwZGF0ZWRBdD0/XHJcbiAgICBXSEVSRSB1c2VyX2lkPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgU0VMRUNUIHVzZXJfaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFdIRVJFIHVzZXJfaWQ9P1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFt1c2VySWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXJbMF0gYXMgQ3JlYXRlVXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWlucygpIHtcclxuICBjb25zdCB1c2VyQWRtaW4gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5hZG1pblxyXG4gICAgYCk7XHJcbiAgcmV0dXJuIHVzZXJBZG1pbiBhcyBBZG1pbkRUT1tdO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKGVtYWlsOiBhbnksIHRva2VuVmVyaWZ5OiBhbnkpIHtcclxuICBjb25zdCB1cGRhdGVEYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBVUERBVEUgICR7Y29yZVNjaGVtYX0udXNlcnMgU0VUIHZlcmlmeV9jb2RlPT8gV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdG9rZW5WZXJpZnksIGVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0WzBdIGFzIFVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihkYXRhOiBVc2VyKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgU0VUIFxyXG4gICAgICB1c2VyTmFtZSA9ID8sXHJcbiAgICAgIGdlbmRlciA9ID8sXHJcbiAgICAgIHBob25lTnVtYmVyID0gPyxcclxuICAgICAgZGF0ZU9mQmlydGggPSA/LFxyXG4gICAgICBhZGRyZXNzID0gPyxcclxuICAgICAgdmVyaWZ5X2NvZGUgPSA/LFxyXG4gICAgICB0b2tlblZlcmlmeSA9ID8sXHJcbiAgICAgIGNvdW50cnkgPSA/LFxyXG4gICAgICBjaXR5ID0gPyxcclxuICAgICAgc3RhdGUgPSA/LFxyXG4gICAgICB6aXBjb2RlID0gP1xyXG4gICAgV0hFUkUgZW1haWwgPSA/YCxcclxuXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIGRhdGEudXNlck5hbWUsXHJcbiAgICAgICAgZGF0YS5nZW5kZXIsXHJcbiAgICAgICAgZGF0YS5waG9uZU51bWJlcixcclxuICAgICAgICBkYXRhLmRhdGVPZkJpcnRoLFxyXG4gICAgICAgIGRhdGEuYWRkcmVzcyxcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIGRhdGEudG9rZW5WZXJpZnksXHJcbiAgICAgICAgZGF0YS5jb3VudHJ5LFxyXG4gICAgICAgIGRhdGEuY2l0eSxcclxuICAgICAgICBkYXRhLnN0YXRlLFxyXG4gICAgICAgIGRhdGEuemlwY29kZSxcclxuICAgICAgICBkYXRhLmVtYWlsLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKCkge1xyXG4gIGNvbnN0IGdldE1hbnUgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICBTRUxFQ1RcclxuICAgIG0ubWVudV9pZCwgXHJcbiAgICBtLmljb24sIFxyXG4gICAgbS5tZW51X25hbWUsIFxyXG4gICAgbS5wYXRoLCBcclxuICAgIHMuc3VibWVudV9pZCwgXHJcbiAgICBzLmljb24gQVMgc3VibWVudV9pY29uLFxyXG4gICAgcy5zdWJtZW51X25hbWUsIFxyXG4gICAgcy51cmxcclxuICBGUk9NICR7Y29yZVNjaGVtYX0ubWVudSBtXHJcbiAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uc3VibWVudSBzIE9OIG0ubWVudV9pZCA9IHMubWVudV9pZFxyXG4gIE9SREVSIEJZIG0ubWVudV9pZCwgcy5zdWJtZW51X2lkYCk7XHJcblxyXG4gIGNvbnN0IG1lbnVNYXAgPSBuZXcgTWFwPG51bWJlciwgTWVudT4oKTtcclxuICBnZXRNYW51LmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgY29uc3QgbWVudUlkID0gcm93Lm1lbnVfaWQ7XHJcbiAgICBpZiAoIW1lbnVNYXAuaGFzKG1lbnVJZCkpIHtcclxuICAgICAgbWVudU1hcC5zZXQobWVudUlkLCB7XHJcbiAgICAgICAgbWVudV9pZDogcm93Lm1lbnVfaWQsXHJcbiAgICAgICAgaWNvbjogcm93Lmljb24sIC8vIEVuc3VyZSB0aGlzIGxpbmUgaXMgY29ycmVjdFxyXG4gICAgICAgIG1lbnVfbmFtZTogcm93Lm1lbnVfbmFtZSxcclxuICAgICAgICBwYXRoOiByb3cucGF0aCxcclxuICAgICAgICBzdWJtZW51czogW10sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdy5zdWJtZW51X2lkKSB7XHJcbiAgICAgIGNvbnN0IHN1Ym1lbnU6IFN1Ym1lbnUgPSB7XHJcbiAgICAgICAgc3VibWVudV9pZDogcm93LnN1Ym1lbnVfaWQsXHJcbiAgICAgICAgc3VibWVudV9uYW1lOiByb3cuc3VibWVudV9uYW1lLFxyXG4gICAgICAgIHVybDogcm93LnVybCxcclxuICAgICAgICBpY29uOiByb3cuc3VibWVudV9pY29uLCAvLyBBZGp1c3RlZCB0byBzdWJtZW51X2ljb24gdG8gcHJldmVudCBjb25mdXNpb25cclxuICAgICAgfTtcclxuICAgICAgbWVudU1hcC5nZXQobWVudUlkKT8uc3VibWVudXMucHVzaChzdWJtZW51KTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbShtZW51TWFwLnZhbHVlcygpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJbmZvKGVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgZW1haWw9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIGlmIChkYXRhKSByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVBcHBvaW50bWVudChldmVudERhdGE6IElBcHBvaW50bWVudCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbnNlcnRFdmVudCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmNhbGVuZGFyX2V2ZW50cyBcclxuICAgICAgKGV2ZW50X3RpdGxlLCBjb2xvciwgZGF0ZSwgZXZlbnRfZGVzY3JpcHRpb24pXHJcbiAgICAgICBWQUxVRVMgKD8sID8sID8sID8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxyXG4gICAgICAgICAgZXZlbnREYXRhLmNvbG9yLFxyXG4gICAgICAgICAgZXZlbnREYXRhLmRhdGUsXHJcbiAgICAgICAgICBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gaW5zZXJ0RXZlbnQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgaW5zZXJ0aW5nIGV2ZW50OiAke2Vycm9yfWApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KCkge1xyXG4gIGNvbnN0IGdldEV2ZW50RGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmNhbGVuZGFyX2V2ZW50c2BcclxuICApO1xyXG4gIHJldHVybiBnZXRFdmVudERhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBcHBvaW50bWVudChcclxuICBkYXRhOiBJQXBwb2ludG1lbnRcclxuKTogUHJvbWlzZTxJQXBwb2ludG1lbnRbXSB8IHVuZGVmaW5lZD4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2FsZW5kYXJfZXZlbnRzXHJcbiAgICBTRVQgZGF0ZSA9ID8sIHVwZGF0ZWRfYXQgPSA/XHJcbiAgICBXSEVSRSBldmVudF9pZCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmRhdGUsIG5ldyBEYXRlKCksIGRhdGEuZXZlbnRfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHJlc3VsdCBhcyBJQXBwb2ludG1lbnRbXTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBcHBvaW50bWVudChldmVudF9pZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LmNhbGVuZGFyX2V2ZW50c1xyXG4gICAgICBXSEVSRSBldmVudF9pZD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZXZlbnRfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4vLyAqKioqKiogUGF0aWVudHMgKioqKioqXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXRpZW50cygpIHtcclxuICBjb25zdCBwYXRpZW50cyA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gIGApO1xyXG4gIHJldHVybiBwYXRpZW50cztcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGF0aWVudERldGFpbChwYXRpZW50SWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICBXSEVSRSBpZD0/YCxcclxuICAgIHsgdmFsdWVzOiBbcGF0aWVudElkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KHBhdGllbnREYXRhOiBQYXRpZW50RFRPKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICAgIChmaXJzdE5hbWUsIGxhc3ROYW1lLCBnZW5kZXIsIG1vYmlsZSwgZGF0ZU9mQmlydGgsIGFnZSwgZW1haWwsIG1hcml0YWxTdGF0dXMsIGFkZHJlc3MsXHJcbiAgICAgICAgYmxvb2RHcm91cCwgYmxvb2RQcmVzc3VyZSwgc3VnYXJMZXZlbCwgaW5qdXJ5LCBwcm9maWxlSW1hZ2UsaGVhcnRCZWF0LFxyXG4gICAgICAgIGhhZW1vZ2xvYmluLGRvY3Rvcix0cmVhdG1lbnQsY2hhcmdlcyxkZXNjcmlwdGlvbixkYXRlKVxyXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIHBhdGllbnREYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmxhc3ROYW1lLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuZ2VuZGVyLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEubW9iaWxlLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuZGF0ZU9mQmlydGgsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5hZ2UsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5lbWFpbCxcclxuICAgICAgICAgIHBhdGllbnREYXRhLm1hcml0YWxTdGF0dXMsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5hZGRyZXNzLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuYmxvb2RHcm91cCxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmJsb29kUHJlc3N1cmUsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5zdWdhckxldmVsLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuaW5qdXJ5LFxyXG4gICAgICAgICAgcGF0aWVudERhdGEucHJvZmlsZUltYWdlLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuaGVhcnRCZWF0LFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuaGFlbW9nbG9iaW4sXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5kb2N0b3IsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS50cmVhdG1lbnQsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5jaGFyZ2VzLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZygpO1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluc2VydGluZyBwYXRpZW50IGRhdGE6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChpZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgREVMRVRFIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgV0hFUkUgaWQgPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtpZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQYXRpZW50KHBhdGllbnREYXRhOiBQYXRpZW50RFRPKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudHNcclxuICAgICAgU0VUIGZpcnN0TmFtZSA9ID8sXHJcbiAgICAgICAgICBsYXN0TmFtZSA9ID8sXHJcbiAgICAgICAgICBnZW5kZXIgPSA/LFxyXG4gICAgICAgICAgbW9iaWxlID0gPyxcclxuICAgICAgICAgIGRhdGVPZkJpcnRoID0gPyxcclxuICAgICAgICAgIGFnZSA9ID8sXHJcbiAgICAgICAgICBlbWFpbCA9ID8sXHJcbiAgICAgICAgICBibG9vZFByZXNzdXJlID0gPyxcclxuICAgICAgICAgIGluanVyeSA9ID8sXHJcbiAgICAgICAgICBibG9vZEdyb3VwID0gPyxcclxuICAgICAgICAgIGFkZHJlc3MgPSA/XHJcbiAgICAgIFdIRVJFIGlkID0gP1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtcclxuICAgICAgICBwYXRpZW50RGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgcGF0aWVudERhdGEubGFzdE5hbWUsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZ2VuZGVyLFxyXG4gICAgICAgIHBhdGllbnREYXRhLm1vYmlsZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZ2UsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZW1haWwsXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RQcmVzc3VyZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5pbmp1cnksXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RHcm91cCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZGRyZXNzLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmlkLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLy8gKioqKioqKioqKipEb2N0b3JzICoqKioqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdG9ycygpOiBQcm9taXNlPERvY3RvcnNEVE9bXT4ge1xyXG4gIGNvbnN0IGRvY3RvcnMgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JgKTtcclxuICByZXR1cm4gZG9jdG9ycyBhcyBEb2N0b3JzRFRPW107XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMobW9iaWxlOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgIFNFTEVDVCBtb2JpbGUgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3RvclxyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGREb2N0b3IoZG9jdG9ySW5mbzogRG9jdG9yc0RUTykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5kb2N0b3JcclxuICAgICAgKG5hbWUsZ2VuZGVyLG1vYmlsZSxkZWdyZWUsZGF0ZU9mQmlydGgsZGVwYXJ0bWVudCxcclxuICAgICAgIGFnZSxlbWFpbCxhZGRyZXNzLHByb2ZpbGVJbWFnZSxzcGVjaWFsaXphdGlvbixqb2luZ2luX2RhdGUpXHJcbiAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgZG9jdG9ySW5mby5uYW1lLFxyXG4gICAgICAgICAgZG9jdG9ySW5mby5nZW5kZXIsXHJcbiAgICAgICAgICBkb2N0b3JJbmZvLm1vYmlsZSxcclxuICAgICAgICAgIGRvY3RvckluZm8uZGVncmVlLFxyXG4gICAgICAgICAgZG9jdG9ySW5mby5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICAgIGRvY3RvckluZm8uZGVwYXJ0bWVudCxcclxuICAgICAgICAgIGRvY3RvckluZm8uYWdlLFxyXG4gICAgICAgICAgZG9jdG9ySW5mby5lbWFpbCxcclxuICAgICAgICAgIGRvY3RvckluZm8uYWRkcmVzcyxcclxuICAgICAgICAgIGRvY3RvckluZm8ucHJvZmlsZUltYWdlLFxyXG4gICAgICAgICAgZG9jdG9ySW5mby5zcGVjaWFsaXphdGlvbixcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKCk7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5zZXJ0aW5nIGRvY3RvciBkYXRhOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvY3RvckRldGFpbChkb2N0b3JJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yIGRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICR7Y29yZVNjaGVtYX0ubG9jYXRpb25zX2RvY3RvcnMgbGQgT04gZC5pZCA9IGxkLmRvY3Rvcl9pZFxyXG4gICAgIFdIRVJFIFxyXG4gICAgZC5pZCA9ID87XHJcbmAsXHJcbiAgICB7IHZhbHVlczogW2RvY3RvcklkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEb2N0b3IoZG9jdG9ydERhdGE6IERvY3RvcnNEVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JcclxuICAgICAgU0VUIG5hbWUgPSA/LFxyXG4gICAgICAgICAgZ2VuZGVyID0gPyxcclxuICAgICAgICAgIG1vYmlsZSA9ID8sXHJcbiAgICAgICAgICBhZ2UgPSA/LFxyXG4gICAgICAgICAgZW1haWwgPSA/LFxyXG4gICAgICAgICAgYWRkcmVzcyA9ID9cclxuICAgICAgV0hFUkUgaWQgPSA/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIGRvY3RvcnREYXRhLm5hbWUsXHJcbiAgICAgICAgZG9jdG9ydERhdGEuZ2VuZGVyLFxyXG4gICAgICAgIGRvY3RvcnREYXRhLm1vYmlsZSxcclxuICAgICAgICBkb2N0b3J0RGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBkb2N0b3J0RGF0YS5hZ2UsXHJcbiAgICAgICAgZG9jdG9ydERhdGEuZW1haWwsXHJcbiAgICAgICAgZG9jdG9ydERhdGEuYWRkcmVzcyxcclxuICAgICAgICBkb2N0b3J0RGF0YS5pZCxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQoZGF0YTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIHBhc3N3b3JkIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgV0hFUkUgZW1haWw9P1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoZGF0YTogYW55KSB7XHJcbiAgY29uc3QgeyBuZXdQYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBuZXdQYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGNyZWF0ZVBhc3N3b3JkU2NoZW1hLnZhbGlkYXRlU3luY0F0KFxyXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcclxuICAgIGZkUGFzc3dvcmRcclxuICApO1xyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoID0gYmNyeXB0Lmhhc2hTeW5jKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFNFVCBwYXNzd29yZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICBXSEVSRSBlbWFpbD0/XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtoYXNoLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBUUEsTUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBRUEsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBRUE7QUFDQSxTQUFzQkksY0FBY0EsQ0FBQ0MsS0FBYTs7SUFDaEQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosT0FBQSxDQUFBSyxLQUFLLEVBQ3RCLDhCQUE4QkwsT0FBQSxDQUFBTSxVQUFVO29CQUN4QixFQUNoQjtNQUNFQyxNQUFNLEVB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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","uuid_1","mysql_1","schema_1","checkUserExist","email","user","query","coreSchema","values","exports","checkNickName","getData","createUser","data","password","confirmPassword","fdPassword","validPassword","createPasswordSchema","validateSyncAt","saltRounds","hash","default","hashSync","newId","v4","result","userName","verify_code","Date","tokenVerify","confirmEmail","length","isSuccessfull","status","message","emailConfirmed","signupStatus","code","showToUser","messageCode","messageKind","getUserByPassword","getUserByGoogleId","googleId","updateUserVerifyCode","userId","newCode","getAdmins","userAdmin","getOTP","updateData","updateProfileUser","gender","phoneNumber","dateOfBirth","address","country","city","state","zipcode","getNavItems","getManu","menuMap","Map","forEach","row","menuId","menu_id","has","set","icon","menu_name","path","submenus","submenu_id","submenu","submenu_name","url","submenu_icon","_a","get","push","Array","from","getUserInfo","saveAppointment","eventData","insertEvent","event_title","color","date","event_description","error","Error","getAppointment","getEventData","updateAppointment","event_id","deleteAppointment","getPatients","patients","patientDetail","patientId","checkPhoneNumberExists","mobile","addPatient","patientData","firstName","lastName","age","maritalStatus","bloodGroup","bloodPressure","sugarLevel","injury","profileImage","heartBeat","haemoglobin","doctor","treatment","charges","description","console","log","deletePatient","id","updatePatient","getDoctors","doctors","checkDoctorPhoneNumberExists","addDoctor","doctorInfo","name","degree","department","specialization","doctorDetail","doctorId","updateDoctor","doctortData","comparePassword","changePassword","newPassword"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport {} from \"../controller/user/schema\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { AppResponse } from \"../types/response.interface\";\r\nimport { ConfirmEmail, CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { DoctorsDTO } from \"../models/doctors\";\r\nimport { createPasswordSchema } from \"../controller/user/schema\";\r\n\r\n// ****** Auth ******\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT user_id,email FROM  ${coreSchema}.users\r\n      WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM Ali_DB.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function createUser(data: any) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (user_id,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.userName,\r\n        data.email,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * \r\n    FROM ${coreSchema}.users\r\n    WHERE email=? AND deletedAt IS NULL\r\n    `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n        UPDATE ${coreSchema}.users\r\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n        WHERE email =?\r\n        `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n    UPDATE ${coreSchema}.users\r\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n    WHERE email=?\r\n  `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getUserByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    ` SELECT u.*, r.*,p.*\r\n    FROM ${coreSchema}.users u\r\n    LEFT JOIN ${coreSchema}.user_roles ur ON u.user_id = ur.user_id\r\n    LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n\r\n    WHERE u.email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function getUserByGoogleId(googleId: string) {\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM${coreSchema}.users\r\n    WHERE google_id=?`,\r\n    {\r\n      values: [googleId],\r\n    }\r\n  );\r\n  if (user.length < 1) return null;\r\n  else return user[0] as User;\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    UPDATE ${coreSchema}.users\r\n    SET verify_code=?,updatedAt=?\r\n    WHERE user_id=?\r\n    `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT user_id,email,verify_code\r\n      FROM ${coreSchema}.users\r\n      WHERE user_id=?\r\n      `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function updateProfileUser(data: User): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET \r\n      userName = ?,\r\n      gender = ?,\r\n      phoneNumber = ?,\r\n      dateOfBirth = ?,\r\n      address = ?,\r\n      verify_code = ?,\r\n      tokenVerify = ?,\r\n      country = ?,\r\n      city = ?,\r\n      state = ?,\r\n      zipcode = ?\r\n    WHERE email = ?`,\r\n\r\n    {\r\n      values: [\r\n        data.userName,\r\n        data.gender,\r\n        data.phoneNumber,\r\n        data.dateOfBirth,\r\n        data.address,\r\n        data.verify_code,\r\n        data.tokenVerify,\r\n        data.country,\r\n        data.city,\r\n        data.state,\r\n        data.zipcode,\r\n        data.email,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getNavItems() {\r\n  const getManu = await query<RowDataPacket[]>(`\r\n  SELECT\r\n    m.menu_id, \r\n    m.icon, \r\n    m.menu_name, \r\n    m.path, \r\n    s.submenu_id, \r\n    s.icon AS submenu_icon,\r\n    s.submenu_name, \r\n    s.url\r\n  FROM ${coreSchema}.menu m\r\n  LEFT JOIN ${coreSchema}.submenu s ON m.menu_id = s.menu_id\r\n  ORDER BY m.menu_id, s.submenu_id`);\r\n\r\n  const menuMap = new Map<number, Menu>();\r\n  getManu.forEach((row) => {\r\n    const menuId = row.menu_id;\r\n    if (!menuMap.has(menuId)) {\r\n      menuMap.set(menuId, {\r\n        menu_id: row.menu_id,\r\n        icon: row.icon, // Ensure this line is correct\r\n        menu_name: row.menu_name,\r\n        path: row.path,\r\n        submenus: [],\r\n      });\r\n    }\r\n    if (row.submenu_id) {\r\n      const submenu: Submenu = {\r\n        submenu_id: row.submenu_id,\r\n        submenu_name: row.submenu_name,\r\n        url: row.url,\r\n        icon: row.submenu_icon, // Adjusted to submenu_icon to prevent confusion\r\n      };\r\n      menuMap.get(menuId)?.submenus.push(submenu);\r\n    }\r\n  });\r\n  return Array.from(menuMap.values());\r\n}\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  if (data) return data;\r\n}\r\n\r\nexport async function saveAppointment(eventData: IAppointment) {\r\n  try {\r\n    const insertEvent = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.calendar_events \r\n      (event_title, color, date, event_description)\r\n       VALUES (?, ?, ?, ?)`,\r\n      {\r\n        values: [\r\n          eventData.event_title,\r\n          eventData.color,\r\n          eventData.date,\r\n          eventData.event_description,\r\n        ],\r\n      }\r\n    );\r\n\r\n    return insertEvent;\r\n  } catch (error) {\r\n    throw new Error(`Error inserting event: ${error}`);\r\n  }\r\n}\r\n\r\nexport async function getAppointment() {\r\n  const getEventData = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.calendar_events`\r\n  );\r\n  return getEventData;\r\n}\r\n\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n): Promise<IAppointment[] | undefined> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `UPDATE ${coreSchema}.calendar_events\r\n    SET date = ?, updated_at = ?\r\n    WHERE event_id = ?`,\r\n    {\r\n      values: [data.date, new Date(), data.event_id],\r\n    }\r\n  );\r\n  if (result) {\r\n    return result as IAppointment[];\r\n  }\r\n}\r\n\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n// ****** Patients ******\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT * FROM ${coreSchema}.patients\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(patientId: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [patientId] }\r\n  );\r\n  return result;\r\n}\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addPatient(patientData: PatientDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.patients\r\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\r\n        bloodGroup, bloodPressure, sugarLevel, injury, profileImage,heartBeat,\r\n        haemoglobin,doctor,treatment,charges,description,date)\r\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n      {\r\n        values: [\r\n          patientData.firstName,\r\n          patientData.lastName,\r\n          patientData.gender,\r\n          patientData.mobile,\r\n          patientData.dateOfBirth,\r\n          patientData.age,\r\n          patientData.email,\r\n          patientData.maritalStatus,\r\n          patientData.address,\r\n          patientData.bloodGroup,\r\n          patientData.bloodPressure,\r\n          patientData.sugarLevel,\r\n          patientData.injury,\r\n          patientData.profileImage,\r\n          patientData.heartBeat,\r\n          patientData.haemoglobin,\r\n          patientData.doctor,\r\n          patientData.treatment,\r\n          patientData.charges,\r\n          patientData.description,\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log();\r\n    console.error(\"Error inserting patient data:\", error);\r\n    throw error;\r\n  }\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET firstName = ?,\r\n          lastName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.firstName,\r\n        patientData.lastName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// ***********Doctors *********\r\nexport async function getDoctors(): Promise<DoctorsDTO[]> {\r\n  const doctors = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.doctor`);\r\n  return doctors as DoctorsDTO[];\r\n}\r\nexport async function checkDoctorPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.doctor\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addDoctor(doctorInfo: DoctorsDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.doctor\r\n      (name,gender,mobile,degree,dateOfBirth,department,\r\n       age,email,address,profileImage,specialization,joingin_date)\r\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n      {\r\n        values: [\r\n          doctorInfo.name,\r\n          doctorInfo.gender,\r\n          doctorInfo.mobile,\r\n          doctorInfo.degree,\r\n          doctorInfo.dateOfBirth,\r\n          doctorInfo.department,\r\n          doctorInfo.age,\r\n          doctorInfo.email,\r\n          doctorInfo.address,\r\n          doctorInfo.profileImage,\r\n          doctorInfo.specialization,\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log();\r\n    console.error(\"Error inserting doctor data:\", error);\r\n    throw error;\r\n  }\r\n}\r\nexport async function doctorDetail(doctorId: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor d\r\n    LEFT JOIN \r\n    ${coreSchema}.locations_doctors ld ON d.id = ld.doctor_id\r\n     WHERE \r\n    d.id = ?;\r\n`,\r\n    { values: [doctorId] }\r\n  );\r\n  return result;\r\n}\r\nexport async function updateDoctor(doctortData: DoctorsDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.doctor\r\n      SET name = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          age = ?,\r\n          email = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        doctortData.name,\r\n        doctortData.gender,\r\n        doctortData.mobile,\r\n        doctortData.dateOfBirth,\r\n        doctortData.age,\r\n        doctortData.email,\r\n        doctortData.address,\r\n        doctortData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function comparePassword(data: any): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT password FROM ${coreSchema}.users\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [data],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function changePassword(data: any) {\r\n  const { newPassword } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { newPassword, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    UPDATE ${coreSchema}.users\r\n    SET password=?,updatedAt=?\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [hash, new Date(), data.email],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725669384622},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.query = exports.mysql = exports.pool = exports.coreSchema = void 0;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\nexports.query = query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJleHBvcnRzIiwiY29uZmlnIiwiY29yZVNjaGVtYSIsInByb2Nlc3MiLCJlbnYiLCJEQl9EQVRBQkFTRSIsInBvb2wiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInF1ZXJ5Iiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvYmluL215c3FsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgeyBSZXN1bHRTZXRIZWFkZXIsIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcbmltcG9ydCB7IFBvb2xDb25uZWN0aW9uIH0gZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IGNvcmVTY2hlbWEgPSBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRTtcblxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XG5cbmNvbnN0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUk5BTUUsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxuICBjb25uZWN0aW9uTGltaXQ6IDUwLFxuICBxdWV1ZUxpbWl0OiAwLFxuICBjaGFyc2V0OiBcInV0ZjhcIixcbiAgdGltZXpvbmU6IHByb2Nlc3MuZW52LkRCX1RJTUVaT05FLFxufSk7XG5cbnBvb2wub24oXCJjb25uZWN0aW9uXCIsIChjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbik6IHZvaWQgPT4ge1xuICBjb25uZWN0aW9uLmNvbmZpZy5uYW1lZFBsYWNlaG9sZGVycyA9IHRydWU7XG59KTtcblxuZXhwb3J0IHsgcG9vbCwgbXlzcWwgfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgZXh0ZW5kcyBSb3dEYXRhUGFja2V0W10gfCBSZXN1bHRTZXRIZWFkZXIgfCBhbnk+KFxuICBzcWw6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGNvbm5lY3Rpb24/OiBQb29sQ29ubmVjdGlvbjtcbiAgICBuZXN0VGFibGVzPzogYm9vbGVhbjtcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcbiAgfSA9IHt9LFxuICBhdHRlbXB0OiBudW1iZXIgPSAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdXNlRXh0ZXJuYWxDb25uZWN0aW9uID0gQm9vbGVhbihvcHRpb25zLmNvbm5lY3Rpb24pO1xuICBjb25zdCBjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbiA9XG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XG5cbiAgbGV0IHJlc3VsdDtcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xuXG4gIHRyeSB7XG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcbiAgICBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoe1xuICAgICAgc3FsLFxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcbiAgICAgIG5lc3RUYWJsZXM6IG9wdGlvbnMubmVzdFRhYmxlcyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gW107XG4gICAgfVxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBlLm1lc3NhZ2UgPSBgJHtlLmNvZGV9XFxuc3FsOiAke3NxbFF1ZXJ5fVxcbmVycm9yOiAke2UubWVzc2FnZX1cXG50aW1lOiB9YDtcblxuICAgIHRocm93IGU7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF1c2VFeHRlcm5hbENvbm5lY3Rpb24pIHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlRSxPQUFBLENBQUFELEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSyxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURMLE9BQUEsQ0FBQUUsVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR1AsS0FBSyxDQUFDUSxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU9uQixPQUFBLENBQUFNLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0JDLEtBQUtBLENBQUFDLEtBQUE7dURBQ3pCQyxHQUFXLEVBQ1hDLE9BQUEsR0FJSSxFQUFFLEVBQ05DLE9BQUEsR0FBa0IsQ0FBQztJQUVuQixNQUFNQyxxQkFBcUIsR0FBR0MsT0FBTyxDQUFDSCxPQUFPLENBQUNMLFVBQVUsQ0FBQztJQUN6RCxNQUFNQSxVQUFVLEdBQ2RLLE9BQU8sQ0FBQ0wsVUFBVSxLQUFLLE1BQU1mLElBQUksQ0FBQ3dCLGFBQWEsRUFBRSxDQUFDO0lBRXBELElBQUlDLE1BQU07SUFDVixJQUFJQyxRQUFRLEdBQUdQLEdBQUc7SUFFbEIsSUFBSTtNQUNGTyxRQUFRLEdBQUdYLFVBQVUsQ0FBQ1ksTUFBTSxDQUFDUixHQUFHLEVBQUVDLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDO01BQ2pELENBQUNILE1BQU0sQ0FBQyxHQUFHLE1BQU1WLFVBQVUsQ0FBQ0UsS0FBSyxDQUFDO1FBQ2hDRSxHQUFHO1FBQ0hTLE1BQU0sRUFBRVIsT0FBTyxDQUFDUSxNQUFNO1FBQ3RCQyxVQUFVLEVBQUVULE9BQU8sQ0FBQ1M7T0FDckIsQ0FBQztNQUNGLElBQUksQ0FBQ0osTUFBTSxFQUFFO1FBQ1hBLE1BQU0sR0FBRyxFQUFFO01BQ2I7SUFDRixDQUFDLENBQUMsT0FBT0ssQ0FBTSxFQUFFO01BQ2ZBLENBQUMsQ0FBQ0MsT0FBTyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsSUFBSSxVQUFVTixRQUFRLFlBQVlJLENBQUMsQ0FBQ0MsT0FBTyxXQUFXO01BRXZFLE1BQU1ELENBQUM7SUFDVCxDQUFDLFNBQVM7TUFDUixJQUFJLENBQUNSLHFCQUFxQixFQUFFO1FBQzFCUCxVQUFVLENBQUNrQixPQUFPLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE9BQU9SLE1BQVc7RUFDcEIsQ0FBQzs7QUFwQ0QvQixPQUFBLENBQUF1QixLQUFBLEdBQUFBLEtBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["dotenv","__importStar","require","mysql","exports","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","query","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\nimport * as mysql from \"mysql2/promise\";\nimport { PoolConnection } from \"mysql2/promise\";\n\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\n\nexport { ResultSetHeader, RowDataPacket, coreSchema };\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE,\n});\n\npool.on(\"connection\", (connection: PoolConnection): void => {\n  connection.config.namedPlaceholders = true;\n});\n\nexport { pool, mysql };\n\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\n  sql: string,\n  options: {\n    connection?: PoolConnection;\n    nestTables?: boolean;\n    values?: any[] | any;\n  } = {},\n  attempt: number = 0\n): Promise<T> {\n  const useExternalConnection = Boolean(options.connection);\n  const connection: PoolConnection =\n    options.connection || (await pool.getConnection());\n\n  let result;\n  let sqlQuery = sql;\n\n  try {\n    sqlQuery = connection.format(sql, options.values);\n    [result] = await connection.query({\n      sql,\n      values: options.values,\n      nestTables: options.nestTables,\n    });\n    if (!result) {\n      result = [];\n    }\n  } catch (e: any) {\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n\n    throw e;\n  } finally {\n    if (!useExternalConnection) {\n      connection.release();\n    }\n  }\n  return result as T;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeE,OAAA,CAAAD,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACK,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDL,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGP,KAAK,CAACQ,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOnB,OAAA,CAAAM,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsBC,KAAKA,CAAAC,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACL,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdK,OAAO,CAACL,UAAU,KAAK,MAAMf,IAAI,CAACwB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGX,UAAU,CAACY,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMV,UAAU,CAACE,KAAK,CAAC;QAChCE,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BP,UAAU,CAACkB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC;;AApCD/B,OAAA,CAAAuB,KAAA,GAAAA,KAAA","ignoreList":[]}},"mtime":1724414267123},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.latestTemplatesSchema = exports.userRolesSchema = exports.createPasswordSchema = exports.createSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.createSchema = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\nexports.userRolesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.latestTemplatesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlzdE5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwibmlja05hbWUiLCJnZW5kZXIiLCJiaXJ0aERheSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJ1c2VyUm9sZXNTY2hlbWEiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXNTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlzdE5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbGFzdE5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxhc3ROYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG5pY2tOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJuaWNrTmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBnZW5kZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImdlbmRlciBpcyByZXF1aXJlZFwiKSxcclxuICBiaXJ0aERheTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiYmlydGhEYXkgaXMgcmVxdWlyZWRcIiksXHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5lbWFpbChcImludmFsaWQgZW1haWxcIikucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBwaG9uZU51bWJlcjogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc3dvcmRTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5ld1Bhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJuZXdQYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgbGF0ZXN0VGVtcGxhdGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgY29uZmlybUVtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgLy8gaWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXIgaWQgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAucmVxdWlyZWQoXCJ2ZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKVxyXG4gICAgLm1pbig0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKVxyXG4gICAgLm1heCg0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tFbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkIVwi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","map":{"version":3,"names":["yup","__importStar","require","exports","createSchema","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","userRolesSchema","userId","latestTemplatesSchema","confirmEmailSchema","verify_code","max","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const createSchema = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\nexport const userRolesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const latestTemplatesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const confirmEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725669384622},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncHandler = void 0;\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nexports.asyncHandler = express_async_handler_1.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL2FzeW5jLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJ1xuXG5leHBvcnQgY29uc3QgYXN5bmNIYW5kbGVyID0gZXhwcmVzc0FzeW5jSGFuZGxlclxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsdUJBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsWUFBWSxHQUFHSix1QkFBQSxDQUFBSyxPQUFtQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","exports","asyncHandler","default"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\n\nexport const asyncHandler = expressAsyncHandler\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,uBAAA,CAAAK,OAAmB","ignoreList":[]}},"mtime":1725613484049},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst sercvice_1 = require(\"./sercvice\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/imgProfile\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// ***** checkNickName\npublic_1.router.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.asyncHandler)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.UserService.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.router.get(\"/getUserInfo/:email\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = req.params.email;\n    const userData = yield sercvice_1.UserService.getUserInfo(data);\n    const buildResponse = yield app_response_1.BuildResponse.get(userData);\n    return res.json(buildResponse);\n  });\n});\n// ***** confirm\npublic_1.router.post(\"/user/confirm\", (0, async_handler_1.asyncHandler)(function confirmEmail(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.confrimEmail(formData);\n    res.status(result.code).json(result);\n  });\n}));\n// ***** getOTP\npublic_1.router.get(\"/user/getOTP/:email\", (0, async_handler_1.asyncHandler)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.router.put(`/user/updateProfile`, (0, async_handler_1.asyncHandler)(function updateProfileUser(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.updateProfileuser(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.router.get(\"/user/forgot-passsword/:email\", (0, async_handler_1.asyncHandler)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.UserService.sendFrogetPasswordToken(email);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.json(buildResponse);\n  });\n}));\npublic_1.router.post(`/user/change-password`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = req.body;\n  const getData = yield sercvice_1.UserService.changePassword(data);\n  const buildResponse = app_response_1.BuildResponse.get(getData);\n  res.json(buildResponse);\n})));\n// **** uploadImage\npublic_1.router.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsIm11bHRlcl8xIiwiX19pbXBvcnREZWZhdWx0Iiwic3RvcmFnZSIsImRlZmF1bHQiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWRJbWdQcm9maWxlIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwiY2hlY2tOaWNrTmFtZSIsInJlcyIsImZvcm1EYXRhIiwicGFyYW1zIiwibmlja25hbWUiLCJyZXN1bHQiLCJVc2VyU2VydmljZSIsImpzb24iLCJnZXRBbGxVc2VyRGF0YSIsImRhdGEiLCJlbWFpbCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInBvc3QiLCJjb25maXJtRW1haWwiLCJib2R5IiwiY29uZnJpbUVtYWlsIiwic3RhdHVzIiwiY29kZSIsImdldE9UUCIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwiZ2V0VmVyaWZ5Q29kZSIsInB1dCIsInVwZGF0ZVByb2ZpbGVVc2VyIiwidXBkYXRlUHJvZmlsZXVzZXIiLCJmb3JnZXRQc3Nzd29yZCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwiX19hd2FpdGVyIiwiZ2V0RGF0YSIsImNoYW5nZVBhc3N3b3JkIiwic2luZ2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW1hZ2VQYXRoIiwicGF0aCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHVzZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHtVc2VyU2VydmljZX0gZnJvbSBcIi4vc2VyY3ZpY2VcIjtcclxuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XHJcblxyXG5cclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgXCJwdWJsaWMvaW1nUHJvZmlsZVwiKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgZmlsZS5vcmlnaW5hbG5hbWUpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkSW1nUHJvZmlsZSA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG4vLyAqKioqKiBjaGVja05pY2tOYW1lXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvdXNlci9jaGVja05pY2tOYW1lLzpuaWNrbmFtZVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjaGVja05pY2tOYW1lKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEucGFyYW1zLm5pY2tuYW1lO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UuY2hlY2tOaWNrTmFtZShmb3JtRGF0YSk7XHJcbiAgICByZXMuanNvbihyZXN1bHQpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKioqIGdldFVzZXJJbmZvXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0VXNlckluZm8vOmVtYWlsXCIsXHJcbiAgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVXNlckRhdGEocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBkYXRhID0gcmVxLnBhcmFtcy5lbWFpbDtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgVXNlclNlcnZpY2UuZ2V0VXNlckluZm8oZGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQodXNlckRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH1cclxuKTtcclxuLy8gKioqKiogY29uZmlybVxyXG5yb3V0ZXIucG9zdChcclxuICBcIi91c2VyL2NvbmZpcm1cIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY29uZmlybUVtYWlsKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNvbmZyaW1FbWFpbChmb3JtRGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKHJlc3VsdC5jb2RlKS5qc29uKHJlc3VsdCk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogZ2V0T1RQXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvdXNlci9nZXRPVFAvOmVtYWlsXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE9UUChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLnBhcmFtcy5lbWFpbDtcclxuICAgIGNvbnN0IHZlcmlmeV9jb2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRWZXJpZnlDb2RlKGZvcm1EYXRhLCB2ZXJpZnlfY29kZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcclxuICAgIHJlcy5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKioqIHVwZGF0ZVByb2ZpbGVcclxucm91dGVyLnB1dChcclxuICBgL3VzZXIvdXBkYXRlUHJvZmlsZWAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVVc2VyKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVByb2ZpbGV1c2VyKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKioqIGZvcmdvdC1wYXNzc3dvcmRcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvdXNlci9mb3Jnb3QtcGFzc3N3b3JkLzplbWFpbFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBmb3JnZXRQc3Nzd29yZChyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGVtYWlsID0gcmVxLnBhcmFtcy5lbWFpbDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5zZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbihlbWFpbCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgYC91c2VyL2NoYW5nZS1wYXNzd29yZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGdldERhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5jaGFuZ2VQYXNzd29yZChkYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChnZXREYXRhKTtcclxuICAgIHJlcy5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIHVwbG9hZEltYWdlXHJcbnJvdXRlci5wb3N0KFxyXG4gIFwiL2FkbWluL3VwbG9hZEltYWdlXCIsXHJcbiAgdXBsb2FkSW1nUHJvZmlsZS5zaW5nbGUoXCJmaWxlXCIpLFxyXG4gIChyZXEsIHJlcykgPT4ge1xyXG4gICAgaWYgKCFyZXEuZmlsZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJObyBmaWxlIHVwbG9hZGVkXCIgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IFwiRmlsZSB1cGxvYWRlZCBzZWNjZXNzZnVsbHlcIixcclxuICAgICAgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBpbWFnZVBhdGggPSByZXEuZmlsZS5wYXRoO1xyXG4gICAgcmVzLmpzb24oeyBpbWFnZVBhdGggfSk7XHJcbiAgfVxyXG4pOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGVBQUEs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","map":{"version":3,"names":["async_handler_1","require","common_1","app_response_1","public_1","sercvice_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","checkNickName","res","formData","params","nickname","result","UserService","json","getAllUserData","data","email","userData","getUserInfo","buildResponse","BuildResponse","post","confirmEmail","body","confrimEmail","status","code","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfileUser","updateProfileuser","forgetPsssword","sendFrogetPasswordToken","__awaiter","getData","changePassword","single","error","message","imagePath","path"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport {asyncHandler} from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport {router} from \"../../routes/public\";\r\nimport {UserService} from \"./sercvice\";\r\nimport multer from \"multer\";\r\n\r\n\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/imgProfile\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// ***** checkNickName\r\nrouter.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nrouter.get(\r\n  \"/getUserInfo/:email\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    const data = req.params.email;\r\n    const userData = await UserService.getUserInfo(data);\r\n    const buildResponse = await BuildResponse.get(userData);\r\n    return res.json(buildResponse);\r\n  }\r\n);\r\n// ***** confirm\r\nrouter.post(\r\n  \"/user/confirm\",\r\n  asyncHandler(async function confirmEmail(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.confrimEmail(formData);\r\n    res.status(result.code).json(result);\r\n  })\r\n);\r\n// ***** getOTP\r\nrouter.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n// ***** updateProfile\r\nrouter.put(\r\n  `/user/updateProfile`,\r\n  asyncHandler(async function updateProfileUser(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfileuser(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\nrouter.get(\r\n  \"/user/forgot-passsword/:email\",\r\n  asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n    const email = req.params.email;\r\n    const data = await UserService.sendFrogetPasswordToken(email);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/user/change-password`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const data = req.body;\r\n    const getData = await UserService.changePassword(data);\r\n    const buildResponse = BuildResponse.get(getData);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** uploadImage\r\nrouter.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,QAAA,GAAAH,OAAA;AACA,MAAAI,UAAA,GAAAJ,OAAA;AACA,MAAAK,QAAA,GAAAC,eAAA,CAAAN,OAAA;AAIA,MAAMO,OAAO,GAAGF,QAAA,CAAAG,OAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,EAAEA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAI;IAC7BA,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC;EAC/B,CAAC;EACDC,QAAQ,EAAEA,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAI;IAC1BA,EAAE,CAAC,IAAI,EAAED,IAAI,CAACG,YAAY,CAAC;EAC7B;CACD,CAAC;AAEF,MAAMC,gBAAgB,GAAG,IAAAX,QAAA,CAAAG,OAAM,EAAC;EAAED;AAAO,CAAE,CAAC;AAE5C;AACAJ,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAeC,aAAaA,CAACT,GAAY,EAAEU,GAAa;;IACnE,MAAMC,QAAQ,GAAGX,GAAG,CAACY,MAAM,CAACC,QAAQ;IACpC,MAAMC,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACN,aAAa,CAACE,QAAQ,CAAC;IACxDD,GAAG,CAACM,IAAI,CAACF,MAAM,CAAC;EAClB,CAAC;CAAA,CAAC,CACH;AACD;AACAtB,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,qBAAqB,EACrB,SAAeU,cAAcA,CAACjB,GAAY,EAAEU,GAAa;;IACvD,MAAMQ,IAAI,GAAGlB,GAAG,CAACY,MAAM,CAACO,KAAK;IAC7B,MAAMC,QAAQ,GAAG,MAAM3B,UAAA,CAAAsB,WAAW,CAACM,WAAW,CAACH,IAAI,CAAC;IACpD,MAAMI,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACa,QAAQ,CAAC;IACvD,OAAOV,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EAChC,CAAC;CAAA,CACF;AACD;AACA9B,QAAA,CAAAc,MAAM,CAACkB,IAAI,CACT,eAAe,EACf,IAAApC,eAAA,CAAAoB,YAAY,EAAC,SAAeiB,YAAYA,CAACzB,GAAY,EAAEU,GAAa;;IAClE,MAAMC,QAAQ,GAAGX,GAAG,CAAC0B,IAAI;IACzB,MAAMZ,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACY,YAAY,CAAChB,QAAQ,CAAC;IACvDD,GAAG,CAACkB,MAAM,CAACd,MAAM,CAACe,IAAI,CAAC,CAACb,IAAI,CAACF,MAAM,CAAC;EACtC,CAAC;CAAA,CAAC,CACH;AACD;AACAtB,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,qBAAqB,EACrB,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAesB,MAAMA,CAAC9B,GAAY,EAAEU,GAAa;;IAC5D,MAAMC,QAAQ,GAAGX,GAAG,CAACY,MAAM,CAACO,KAAK;IACjC,MAAMY,WAAW,GAAG,IAAAzC,QAAA,CAAA0C,eAAe,GAAE;IACrC,MAAMlB,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACkB,aAAa,CAACtB,QAAQ,EAAEoB,WAAW,CAAC;IACrE,MAAMT,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACO,MAAM,CAAC;IACrDJ,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AACD;AACA9B,QAAA,CAAAc,MAAM,CAAC4B,GAAG,CACR,qBAAqB,EACrB,IAAA9C,eAAA,CAAAoB,YAAY,EAAC,SAAe2B,iBAAiBA,CAACnC,GAAY,EAAEU,GAAa;;IACvE,MAAMC,QAAQ,GAAGX,GAAG,CAAC0B,IAAI;IACzB,MAAMZ,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACqB,iBAAiB,CAACzB,QAAQ,CAAC;IAC5D,MAAMW,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACO,MAAM,CAAC;IACrDJ,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AAED;AAEA9B,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAe6B,cAAcA,CAACrC,GAAQ,EAAEU,GAAQ;;IAC3D,MAAMS,KAAK,GAAGnB,GAAG,CAACY,MAAM,CAACO,KAAK;IAC9B,MAAMD,IAAI,GAAG,MAAMzB,UAAA,CAAAsB,WAAW,CAACuB,uBAAuB,CAACnB,KAAK,CAAC;IAC7D,MAAMG,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACW,IAAI,CAAC;IACnDR,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AAED9B,QAAA,CAAAc,MAAM,CAACkB,IAAI,CACT,uBAAuB,EACvB,IAAApC,eAAA,CAAAoB,YAAY,EAAC,CAAOR,GAAY,EAAEU,GAAa,KAAI6B,SAAA;EACjD,MAAMrB,IAAI,GAAGlB,GAAG,CAAC0B,IAAI;EACrB,MAAMc,OAAO,GAAG,MAAM/C,UAAA,CAAAsB,WAAW,CAAC0B,cAAc,CAACvB,IAAI,CAAC;EACtD,MAAMI,aAAa,GAAG/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACiC,OAAO,CAAC;EAChD9B,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;AACzB,CAAC,EAAC,CACH;AAED;AACA9B,QAAA,CAAAc,MAAM,CAACkB,IAAI,CACT,oBAAoB,EACpBnB,gBAAgB,CAACqC,MAAM,CAAC,MAAM,CAAC,EAC/B,CAAC1C,GAAG,EAAEU,GAAG,KAAI;EACX,IAAI,CAACV,GAAG,CAACC,IAAI,EAAE;IACb,OAAOS,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACZ,IAAI,CAAC;MAAE2B,KAAK,EAAE;IAAkB,CAAE,CAAC;EAC5D;EACAjC,GAAG,CAACM,IAAI,CAAC;IACP4B,OAAO,EAAE,4BAA4B;IACrCzC,QAAQ,EAAEH,GAAG,CAACC,IAAI,CAACE;GACpB,CAAC;EACF,MAAM0C,SAAS,GAAG7C,GAAG,CAACC,IAAI,CAAC6C,IAAI;EAC/BpC,GAAG,CAACM,IAAI,CAAC;IAAE6B;EAAS,CAAE,CAAC;AACzB,CAAC,CACF","ignoreList":[]}},"mtime":1725613636926},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/navItem\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxuYXYtaXRlbXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5pbXBvcnQgeyBOYXZJdGVtU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XG5cbnJvdXRlci5nZXQoXG4gIFwiL25hdkl0ZW1cIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBOYXZJdGVtU2VydmljZS5nZXRBbGxOYXZJdGVtcygpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBSCxPQUFBO0FBRUFDLFFBQUEsQ0FBQUcsTUFBTSxDQUFDQyxHQUFHLENBQ1IsVUFBVSxFQUNWLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQVMsY0FBYyxDQUFDQyxjQUFjLEVBQUU7SUFDbEQsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","public_1","service_1","app_response_1","router","get","asyncHandler","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","BuildResponse","status","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\nimport {router} from \"../../routes/public\";\nimport { NavItemService } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\n\nrouter.get(\n  \"/navItem\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await NavItemService.getAllNavItems();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAEAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAS,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1725613484048},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9uYXYtaXRlbXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXROYXZJdGVtcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuZXhwb3J0IGNsYXNzIE5hdkl0ZW1TZXJ2aWNlIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxOYXZJdGVtcygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TmF2SXRlbXMoKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsY0FBYztFQUNsQixPQUFhQyxjQUFjQSxDQUFBOztNQUNoQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFLLFdBQVcsR0FBRTtNQUNoQyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7OztBQVBIRyxPQUFBLENBQUFMLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\n\nexport class NavItemService {\n  public static async getAllNavItems() {\n    const data = await getNavItems();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,cAAc;EAClB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAPHG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1725626040905},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/insertAppointment\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield service_1.CalendarService.insertEvent(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.get(\"/getAppointment\", (0, async_handler_1.asyncHandler)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.CalendarService.getEventData();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.asyncHandler)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.CalendarService.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/updateAppointment/update\", (0, async_handler_1.asyncHandler)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.CalendarService.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJpbnNlcnRFdmVudCIsInJlcSIsInJlcyIsImV2ZW50RGF0YSIsImJvZHkiLCJkYXRhIiwiQ2FsZW5kYXJTZXJ2aWNlIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJqc29uIiwiZ2V0RXZlbnREYXRhIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJ1cGRhdGVkIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7YXN5bmNIYW5kbGVyfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcbmltcG9ydCB7Q2FsZW5kYXJTZXJ2aWNlfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5cbnJvdXRlci5wb3N0KFxuICBcIi9pbnNlcnRBcHBvaW50bWVudFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RXZlbnQocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5pbnNlcnRFdmVudChldmVudERhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG5cbnJvdXRlci5nZXQoXG4gIFwiL2dldEFwcG9pbnRtZW50XCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXRFdmVudERhdGEocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5nZXRFdmVudERhdGEoKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH0pXG4pO1xuXG5yb3V0ZXIuZGVsZXRlKFxuICBcIi9kZWxldGVBcHBvaW50bWVudC9kZWxldGUvOmlkXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBkZWxldGVBcHBvaW50bWVudChcbiAgICByZXE6IFJlcXVlc3QsXG4gICAgcmVzOiBSZXNwb25zZSxcbiAgICBuZXh0OiBOZXh0RnVuY3Rpb25cbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgIGF3YWl0IENhbGVuZGFyU2VydmljZS5kZWxldGVBcHBvaW50bWVudEl0ZW0oaWQpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmRlbGV0ZWQoe30pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5cbnJvdXRlci5wdXQoXG4gIFwiL3VwZGF0ZUFwcG9pbnRtZW50L3VwZGF0ZVwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlQXBwb2ludG1lbnRJdGVtKFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlXG4gICkgOiBQcm9taXNlPGFueT57XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLnVwZGF0ZUFwcG9pbnRtZW50SXRlbShmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsSUFBSSxDQUNULG9CQUFvQixFQUNwQixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLFNBQVMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0lBQzFCLE1BQU1DLElBQUksR0FBRyxNQUFNVCxTQUFBLENBQUFVLGVBQWUsQ0FBQ04sV0FBVyxDQUFDRyxTQUFTLENBQUM7SUFDekQsTUFBTUksYUFBYSxHQUFHYixjQUFBLENBQUFjLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDSixJQUFJLENBQUM7SUFDN0MsSUFBSUUsYUFBYSxFQUFFO01BQ2pCLE9BQU9MLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFosUUFBQSxDQUFBRSxNQUFNLENBQUNZLEdBQUcsQ0FDUixpQkFBaUIsRUFDakIsSUFBQWpCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVhLFlBQVlBLENBQUNYLEdBQVEsRUFBRUMsR0FBUTs7SUFDekQsTUFBTUcsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsZUFBZSxDQUFDTSxZQUFZLEVBQUU7SUFDakQsTUFBTUwsYUFBYSxHQUFHYixjQUFBLENBQUFjLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDSixJQUFJLENBQUM7SUFDN0MsSUFBSUUsYUFBYSxFQUFFO01BQ2pCLE9BQU9MLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFosUUFBQSxDQUFBRSxNQUFNLENBQUNnQixNQUFNLENBQ1gsK0JBQStCLEVBQy9CLElBQUFyQixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlZSxpQkFBaUJBLENBQzNDYixHQUFZLEVBQ1pDLEdBQWEsRUFDYmEsSUFBa0I7O0lBRWxCLE1BQU07TUFBRUM7SUFBRSxDQUFFLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQU07SUFDekIsTUFBTXJCLFNBQUEsQ0FBQVUsZUFBZSxDQUFDWSxxQkFBcUIsQ0FBQ0YsRUFBRSxDQUFDO0lBQy9DLE1BQU1ULGFBQWEsR0FBR2IsY0FBQSxDQUFBYyxhQUFhLENBQUNXLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDL0MsT0FBT2pCLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUM1QyxDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURaLFFBQUEsQ0FBQUUsTUFBTSxDQUFDdUIsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBNUIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZXNCLHFCQUFxQkEsQ0FDL0NwQixHQUFZLEVBQ1pDLEdBQWE7O0lBRWIsTUFBTW9CLFFBQVEsR0FBR3JCLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVQsU0FBQSxDQUFBVSxlQUFlLENBQUNlLHFCQUFxQixDQUFDQyxRQUFRLENBQUM7SUFDbEUsTUFBTWYsYUFBYSxHQUFHYixjQUFBLENBQUFjLGFBQWEsQ0FBQ2UsT0FBTyxDQUFDbEIsSUFBSSxDQUFDO0lBQ2pELE9BQU9ILEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUM1QyxDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","CalendarService","buildResponse","BuildResponse","get","status","json","getEventData","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","updated"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport {asyncHandler} from \"../../helper/async-handler\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\nimport {router} from \"../../routes/public\";\nimport {CalendarService} from \"./service\";\n\nrouter.post(\n  \"/insertAppointment\",\n  asyncHandler(async function insertEvent(req: any, res: any) {\n    const eventData = req.body;\n    const data = await CalendarService.insertEvent(eventData);\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nrouter.get(\n  \"/getAppointment\",\n  asyncHandler(async function getEventData(req: any, res: any) {\n    const data = await CalendarService.getEventData();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nrouter.delete(\n  \"/deleteAppointment/delete/:id\",\n  asyncHandler(async function deleteAppointment(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { id } = req.params;\n    await CalendarService.deleteAppointmentItem(id);\n    const buildResponse = BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  })\n);\n\nrouter.put(\n  \"/updateAppointment/update\",\n  asyncHandler(async function updateAppointmentItem(\n    req: Request,\n    res: Response\n  ) : Promise<any>{\n    const formData = req.body;\n    const data = await CalendarService.updateAppointmentItem(formData);\n    const buildResponse = BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACN,WAAW,CAACG,SAAS,CAAC;IACzD,MAAMI,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOL,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACY,GAAG,CACR,iBAAiB,EACjB,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAea,YAAYA,CAACX,GAAQ,EAAEC,GAAQ;;IACzD,MAAMG,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACM,YAAY,EAAE;IACjD,MAAML,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOL,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACgB,MAAM,CACX,+BAA+B,EAC/B,IAAArB,eAAA,CAAAO,YAAY,EAAC,SAAee,iBAAiBA,CAC3Cb,GAAY,EACZC,GAAa,EACba,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGf,GAAG,CAACgB,MAAM;IACzB,MAAMrB,SAAA,CAAAU,eAAe,CAACY,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMT,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACW,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOjB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACuB,GAAG,CACR,2BAA2B,EAC3B,IAAA5B,eAAA,CAAAO,YAAY,EAAC,SAAesB,qBAAqBA,CAC/CpB,GAAY,EACZC,GAAa;;IAEb,MAAMoB,QAAQ,GAAGrB,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACe,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMf,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACe,OAAO,CAAClB,IAAI,CAAC;IACjD,OAAOH,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1725613636924},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass CalendarService {\n  static insertEvent(eventData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.saveAppointment)(eventData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.CalendarService = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkNhbGVuZGFyU2VydmljZSIsImluc2VydEV2ZW50IiwiZXZlbnREYXRhIiwiZGF0YSIsInNhdmVBcHBvaW50bWVudCIsIm1lc3NhZ2UiLCJnZXRFdmVudERhdGEiLCJnZXRBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50SXRlbSIsImlkIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJ1cGRhdGVBcHBvaW50bWVudEl0ZW0iLCJkYXRhQXBwaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZGVsZXRlQXBwb2ludG1lbnQsXG4gIGdldEFwcG9pbnRtZW50LFxuICBzYXZlQXBwb2ludG1lbnQsXG4gIHVwZGF0ZUFwcG9pbnRtZW50LFxufSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBDYWxlbmRhclNlcnZpY2Uge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGluc2VydEV2ZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHNhdmVBcHBvaW50bWVudChldmVudERhdGEpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRFdmVudERhdGEoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFwcG9pbnRtZW50KCk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnRJdGVtKGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlQXBwb2ludG1lbnQoaWQpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVBcHBvaW50bWVudEl0ZW0oZGF0YUFwcGludG1lbnQ6IElBcHBvaW50bWVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVBcHBvaW50bWVudChkYXRhQXBwaW50bWVudCk7XG4gICAgZGF0YTtcbiAgfVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVFBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQ0MsU0FBdUI7O01BQ3JELE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFMLElBQUEsQ0FBQU0sZUFBZSxFQUFDRixTQUFTLENBQUM7TUFDN0MsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUVNLE9BQWFHLFlBQVlBLENBQUE7O01BQzlCLE1BQU1ILElBQUksR0FBRyxNQUFNLElBQUFMLElBQUEsQ0FBQVMsY0FBYyxHQUFFO01BQ25DLElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxxQkFBcUJBLENBQUNDLEVBQVU7O01BQ2xELE1BQU1OLElBQUksR0FBRyxNQUFNLElBQUFMLElBQUEsQ0FBQVksaUJBQWlCLEVBQUNELEVBQUUsQ0FBQztNQUN4QyxPQUFPTixJQUFJO0lBQ2IsQ0FBQzs7RUFFTSxPQUFhUSxxQkFBcUJBLENBQUNDLGNBQTRCOztNQUNwRSxNQUFNVCxJQUFJLEdBQUcsTUFBTSxJQUFBTCxJQUFBLENBQUFlLGlCQUFpQixFQUFDRCxjQUFjLENBQUM7TUFDcERULElBQUk7SUFDTixDQUFDOzs7QUF6QkhXLE9BQUEsQ0FBQWQsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","CalendarService","insertEvent","eventData","data","saveAppointment","message","getEventData","getAppointment","deleteAppointmentItem","id","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\n  deleteAppointment,\n  getAppointment,\n  saveAppointment,\n  updateAppointment,\n} from \"../../bin/db\";\nimport { IAppointment } from \"../../types/appointment.interface\";\n\nexport class CalendarService {\n  public static async insertEvent(eventData: IAppointment) {\n    const data = await saveAppointment(eventData);\n    if (data) {\n      return { message: \"ok\", data };\n    } else {\n      return null;\n    }\n  }\n\n  public static async getEventData() {\n    const data = await getAppointment();\n    if (data) {\n      return { message: \"ok\", data };\n    }\n  }\n\n  public static async deleteAppointmentItem(id: string) {\n    const data = await deleteAppointment(id);\n    return data;\n  }\n\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\n    const data = await updateAppointment(dataAppintment);\n    data;\n  }\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAQA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAACC,SAAuB;;MACrD,MAAMC,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAM,eAAe,EAACF,SAAS,CAAC;MAC7C,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaG,YAAYA,CAAA;;MAC9B,MAAMH,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAS,cAAc,GAAE;MACnC,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaK,qBAAqBA,CAACC,EAAU;;MAClD,MAAMN,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAY,iBAAiB,EAACD,EAAE,CAAC;MACxC,OAAON,IAAI;IACb,CAAC;;EAEM,OAAaQ,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMT,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAe,iBAAiB,EAACD,cAAc,CAAC;MACpDT,IAAI;IACN,CAAC;;;AAzBHW,OAAA,CAAAd,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1725611830113},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsImdldCIsInVzZXJBZG1pbiIsInJlcSIsInJlcyIsImRhdGEiLCJVc2VyQWRtaW4iLCJnZXRVc2VyQWRtaW4iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYWRtaW4vY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBVc2VyQWRtaW4gfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5cblxucm91dGVyLmdldChcbiAgYC9nZXRVc2VyQWRtaW5gLFxuICBhc3luYyBmdW5jdGlvbiB1c2VyQWRtaW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJBZG1pbi5nZXRVc2VyQWRtaW4oKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH1cbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBR0FFLFFBQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZUFBZSxFQUNmLFNBQWVDLFNBQVNBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsU0FBUyxDQUFDQyxZQUFZLEVBQUU7SUFDM0MsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0NELEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUNwRCxDQUFDO0NBQUEsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["service_1","require","app_response_1","public_1","router","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport { UserAdmin } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\nimport {router} from \"../../routes/public\";\n\n\nrouter.get(\n  `/getUserAdmin`,\n  async function userAdmin(req: Request, res: Response) {\n    const data = await UserAdmin.getUserAdmin();\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGAE,QAAA,CAAAC,MAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1725612317455},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFkbWlucyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuY2xhc3MgVXNlckFkbWluIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VyQWRtaW4oKSB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCBnZXRBZG1pbnMoKTtcbiAgICBpZiAoYWRtaW4pIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgYWRtaW4gfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IFVzZXJBZG1pbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\n\nclass UserAdmin {\n  public static async getUserAdmin() {\n    const admin = await getAdmins();\n    if (admin) {\n      return { message: \"ok\", admin };\n    } else {\n      return null;\n    }\n  }\n}\n\nexport { UserAdmin };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/imgProfile\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.router.get(\"/admin/patients\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.PatientService.getPatients();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.PatientService.checkExistMobile(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\npublic_1.router.post(`/admin/add-patient`, (0, async_handler_1.asyncHandler)(function addPatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.registerPatient(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** GetPatientDetial\npublic_1.router.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.PatientService.patientDetial(patientId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n  return;\n})));\n// **** uploadImage\n// routes.post(\n//   \"/admin/uploadImage\",\n//   uploadImgProfile.single(\"file\"),\n//   (req, res) => {\n//     if (!req.file) {\n//       return res.status(400).json({ error: \"No file uploaded\" });\n//     }\n//     res.json({\n//       message: \"File uploaded seccessfully\",\n//       filename: req.file.filename,\n//     });\n//     const imagePath = req.file.path;\n//     res.json({ imagePath });\n//   }\n// );\n// **** updatePatient\npublic_1.router.put(\"/admin/updatePatient\", (0, async_handler_1.asyncHandler)(function updatePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.updatePatient(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** deletePatient\npublic_1.router.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.asyncHandler)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.PatientService.deletePatient(idPateint);\n    const buildResponse = app_response_1.BuildResponse.deleted(idPateint);\n    return res.status(200).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJfX2F3YWl0ZXIiLCJtb2JpbGUiLCJwYXJhbXMiLCJjaGVja0V4aXN0TW9iaWxlIiwicG9zdCIsImFkZFBhdGllbnQiLCJmb3JtRGF0YSIsImJvZHkiLCJyZWdpc3RlclBhdGllbnQiLCJwYXRpZW50SWQiLCJwYXRpZW50RGV0aWFsIiwicHV0IiwidXBkYXRlUGF0aWVudCIsInVwZGF0ZWQiLCJkZWxldGUiLCJkZWxldGVQYXRpZW50IiwiaWRQYXRlaW50IiwiZGVsZXRlZCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQge1BhdGllbnRTZXJ2aWNlfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgXCJwdWJsaWMvaW1nUHJvZmlsZVwiKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgZmlsZS5vcmlnaW5hbG5hbWUpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkSW1nUHJvZmlsZSA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG4vLyAqKioqIEdldEFsbFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2FkbWluL3BhdGllbnRzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLmdldFBhdGllbnRzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogY2hlY2tQaG9uZU51bWJlckV4aXN0c1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2FkbWluL2NoZWNrLXBob25lLzpwaG9uZVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZSA9IHJlcS5wYXJhbXMubW9iaWxlO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLmNoZWNrRXhpc3RNb2JpbGUobW9iaWxlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiBidWlsZFJlc3BvbnNlO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIGFkZC1wYXRpZW50XHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vYWRkLXBhdGllbnRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5yZWdpc3RlclBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvcm1EYXRhO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIEdldFBhdGllbnREZXRpYWxcclxucm91dGVyLmdldChcclxuICBgL2FkbWluL3BhdGllbnQtZGV0aWFsLzpwYXRpZW50SWRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHBhdGllbnRJZCA9ICtyZXEucGFyYW1zLnBhdGllbnRJZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5wYXRpZW50RGV0aWFsKHBhdGllbnRJZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm47XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiB1cGxvYWRJbWFnZVxyXG4vLyByb3V0ZXMucG9zdChcclxuLy8gICBcIi9hZG1pbi91cGxvYWRJbWFnZVwiLFxyXG4vLyAgIHVwbG9hZEltZ1Byb2ZpbGUuc2luZ2xlKFwiZmlsZVwiKSxcclxuLy8gICAocmVxLCByZXMpID0+IHtcclxuLy8gICAgIGlmICghcmVxLmZpbGUpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmVzLmpzb24oe1xyXG4vLyAgICAgICBtZXNzYWdlOiBcIkZpbGUgdXBsb2FkZWQgc2VjY2Vzc2Z1bGx5XCIsXHJcbi8vICAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuLy8gICAgIH0pO1xyXG4vLyAgICAgY29uc3QgaW1hZ2VQYXRoID0gcmVxLmZpbGUucGF0aDtcclxuLy8gICAgIHJlcy5qc29uKHsgaW1hZ2VQYXRoIH0pO1xyXG4vLyAgIH1cclxuLy8gKTtcclxuLy8gKioqKiB1cGRhdGVQYXRpZW50XHJcbnJvdXRlci5wdXQoXHJcbiAgXCIvYWRtaW4vdXBkYXRlUGF0aWVudFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVQYXRpZW50KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS51cGRhdGVQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLnVwZGF0ZWQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiBkZWxldGVQYXRpZW50XHJcbnJvdXRlci5kZWxldGUoXHJcbiAgXCIvYWRtaW4vZGVsZXRlUGF0aWVudC86aWRQYXRlaW50XCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBhdGllbnQoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IGlkUGF0ZWludCA9ICtyZXEucGFyYW1zLmlkUGF0ZWludDtcclxuICAgIGF3YWl0IFBhdGllbnRTZXJ2aWNlLmRlbGV0ZVBhdGllbnQoaWRQYXRlaW50KTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmRlbGV0ZWQoaWRQYXRlaW50KTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFBRSxV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","map":{"version":3,"names":["async_handler_1","require","public_1","services_1","app_response_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","getNavItems","res","data","PatientService","getPatients","buildResponse","BuildResponse","status","json","__awaiter","mobile","params","checkExistMobile","post","addPatient","formData","body","registerPatient","patientId","patientDetial","put","updatePatient","updated","delete","deletePatient","idPateint","deleted"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\r\nimport {router} from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport {PatientService} from \"./services\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/imgProfile\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/admin/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }else{\r\n      return false\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\nrouter.post(\r\n  `/admin/add-patient`,\r\n  asyncHandler(async function addPatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.registerPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\n// **** GetPatientDetial\r\nrouter.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return;\r\n  })\r\n);\r\n// **** uploadImage\r\n// routes.post(\r\n//   \"/admin/uploadImage\",\r\n//   uploadImgProfile.single(\"file\"),\r\n//   (req, res) => {\r\n//     if (!req.file) {\r\n//       return res.status(400).json({ error: \"No file uploaded\" });\r\n//     }\r\n//     res.json({\r\n//       message: \"File uploaded seccessfully\",\r\n//       filename: req.file.filename,\r\n//     });\r\n//     const imagePath = req.file.path;\r\n//     res.json({ imagePath });\r\n//   }\r\n// );\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async function updatePatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n// **** deletePatient\r\nrouter.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(200).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725613636925},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PatientService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(patientId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(patientId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addPatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PatientService = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJkYXRhIiwibWVzc2FnZSIsInBhdGllbnREZXRpYWwiLCJwYXRpZW50SWQiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tFeGlzdE1vYmlsZSIsIm1vYmlsZSIsImNoZWNrUGhvbmVOdW1iZXJFeGlzdHMiLCJyZWdpc3RlclBhdGllbnQiLCJmb3JtRGF0YSIsImFkZFBhdGllbnQiLCJ1cGRhdGVQYXRpZW50IiwiZGVsZXRlUGF0aWVudCIsImlkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL3NlcnZpY2VzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgYWRkUGF0aWVudCxcclxuICBjaGVja1Bob25lTnVtYmVyRXhpc3RzLFxyXG4gIGRlbGV0ZVBhdGllbnQsXHJcbiAgZ2V0UGF0aWVudHMsXHJcbiAgcGF0aWVudERldGFpbCxcclxuICB1cGRhdGVQYXRpZW50LFxyXG59IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuZXhwb3J0IGNsYXNzIFBhdGllbnRTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFBhdGllbnRzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFBhdGllbnRzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcGF0aWVudERldGlhbChwYXRpZW50SWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHBhdGllbnREZXRhaWwocGF0aWVudElkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrRXhpc3RNb2JpbGUobW9iaWxlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhOiBQYXRpZW50RFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVQYXRpZW50KGZvcm1EYXRhOiBQYXRpZW50RFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkZWxldGVQYXRpZW50KGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkZWxldGVQYXRpZW50KGlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVNBLE1BQWFDLGNBQWM7RUFDbEIsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGFBQWFBLENBQUNDLFNBQWlCOztNQUNqRCxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFRLGFBQWEsRUFBQ0QsU0FBUyxDQUFDO01BQzNDLElBQUlILElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxnQkFBZ0JBLENBQUNDLE1BQWM7O01BQ2pELE1BQU1OLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVcsc0JBQXNCLEVBQUNELE1BQU0sQ0FBQztNQUNqRCxJQUFJTixJQUFJLEVBQUU7UUFDUixPQUFPLElBQUk7TUFDYixDQUFDLE1BQU07UUFDTCxPQUFPLEtBQUs7TUFDZDtJQUNGLENBQUM7O0VBRU0sT0FBYVEsZUFBZUEsQ0FBQ0MsUUFBb0I7O01BQ3RELE1BQU1ULElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQWMsVUFBVSxFQUFDRCxRQUFRLENBQUM7TUFDdkMsSUFBSVQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUVNLE9BQWFXLGFBQWFBLENBQUNGLFFBQW9COztNQUNwRCxNQUFNVCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFlLGFBQWEsRUFBQ0YsUUFBUSxDQUFDO01BQzFDLElBQUlULElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhWSxhQUFhQSxDQUFDQyxFQUFVOztNQUMxQyxNQUFNYixJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFnQixhQUFhLEVBQUNDLEVBQUUsQ0FBQztNQUNwQyxJQUFJYixJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQXBESGMsT0FBQSxDQUFBaEIsY0FBQSxHQUFBQSxjQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","PatientService","getPatients","data","message","patientDetial","patientId","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","addPatient","updatePatient","deletePatient","id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\nexport class PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(patientId: number) {\r\n    const data = await patientDetail(patientId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static async registerPatient(formData: PatientDTO) {\r\n    const data = await addPatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AASA,MAAaC,cAAc;EAClB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,aAAaA,CAACC,SAAiB;;MACjD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,aAAa,EAACD,SAAS,CAAC;MAC3C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaK,gBAAgBA,CAACC,MAAc;;MACjD,MAAMN,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAW,sBAAsB,EAACD,MAAM,CAAC;MACjD,IAAIN,IAAI,EAAE;QACR,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF,CAAC;;EAEM,OAAaQ,eAAeA,CAACC,QAAoB;;MACtD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAc,UAAU,EAACD,QAAQ,CAAC;MACvC,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaW,aAAaA,CAACF,QAAoB;;MACpD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAe,aAAa,EAACF,QAAQ,CAAC;MAC1C,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaY,aAAaA,CAACC,EAAU;;MAC1C,MAAMb,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAgB,aAAa,EAACC,EAAE,CAAC;MACpC,IAAIb,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AApDHc,OAAA,CAAAhB,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1725611830113},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\n// **** GetAll\npublic_1.router.get(\"/admin/doctors\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.DoctorsService.getDoctors();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield service_1.DoctorsService.checkDoctorPhoneNumberExists(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-doctor\npublic_1.router.post(`/admin/add-doctor`, (0, async_handler_1.asyncHandler)(function addDocror(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.DoctorsService.registerDoctor(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\npublic_1.router.get(`/admin/doctor-detial/:doctorId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctorId = +req.params.doctorId;\n  const data = yield service_1.DoctorsService.doctorDetial(doctorId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(200).json(buildResponse);\n})));\n// **** updatePatient\npublic_1.router.put(\"/admin/updateDoctor\", (0, async_handler_1.asyncHandler)(function updateDocror(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.DoctorsService.updateDoctor(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIkRvY3RvcnNTZXJ2aWNlIiwiZ2V0RG9jdG9ycyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsIl9fYXdhaXRlciIsIm1vYmlsZSIsInBhcmFtcyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJwb3N0IiwiYWRkRG9jcm9yIiwiZm9ybURhdGEiLCJib2R5IiwicmVnaXN0ZXJEb2N0b3IiLCJkb2N0b3JJZCIsImRvY3RvckRldGlhbCIsInB1dCIsInVwZGF0ZURvY3JvciIsInVwZGF0ZURvY3RvciIsInVwZGF0ZWQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2FzeW5jSGFuZGxlcn0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7cm91dGVyfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEb2N0b3JzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuLy8gKioqKiBHZXRBbGxcclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9kb2N0b3JzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldERvY3RvcnMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBjaGVja1Bob25lTnVtYmVyRXhpc3RzXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvYWRtaW4vY2hlY2stcGhvbmUvOnBob25lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlID0gcmVxLnBhcmFtcy5tb2JpbGU7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogYWRkLWRvY3RvclxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZC1kb2N0b3JgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGREb2Nyb3IocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLnJlZ2lzdGVyRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2FkbWluL2RvY3Rvci1kZXRpYWwvOmRvY3RvcklkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkb2N0b3JJZCA9ICtyZXEucGFyYW1zLmRvY3RvcklkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmRvY3RvckRldGlhbChkb2N0b3JJZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiB1cGRhdGVQYXRpZW50XHJcbnJvdXRlci5wdXQoXHJcbiAgXCIvYWRtaW4vdXBkYXRlRG9jdG9yXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURvY3JvcihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UudXBkYXRlRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLnVwZGF0ZWQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUdBO0FBQ0FFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZ0JBQWdCLEVBQ2hCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsY0FBYyxDQUFDQyxVQUFVLEVBQUU7SUFDOUMsTUFBTUMsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRDtBQUNBWCxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPRSxHQUFZLEVBQUVDLEdBQWEsS0FBa0JRLFNBQUE7RUFDL0QsTUFBTUMsTUFBTSxHQUFHVixHQUFHLENBQUNXLE1BQU0sQ0FBQ0QsTUFBTTtFQUNoQyxNQUFNUixJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxjQUFjLENBQUNTLDRCQUE0QixDQUFDRixNQUFNLENBQUM7RUFDdEUsTUFBTUwsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsSUFBSUcsYUFBYSxFQUFFO0lBQ2pCLE9BQU9BLGFBQWE7RUFDdEIsQ0FBQyxNQUFNO0lBQ0wsT0FBTyxLQUFLO0VBQ2Q7QUFDRixDQUFDLEVBQUMsQ0FDSDtBQUVEO0FBQ0FYLFFBQUEsQ0FBQUUsTUFBTSxDQUFDaUIsSUFBSSxDQUNULG1CQUFtQixFQUNuQixJQUFBdEIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZWdCLFNBQVNBLENBQUNkLEdBQVksRUFBRUMsR0FBYTs7SUFDL0QsTUFBTWMsUUFBUSxHQUFHZixHQUFHLENBQUNnQixJQUFJO0lBQ3pCLE1BQU1kLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGNBQWMsQ0FBQ2MsY0FBYyxDQUFDRixRQUFRLENBQUM7SUFDMUQsTUFBTVYsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztJQUNBLE9BQU9VLFFBQVE7RUFDakIsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEckIsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUixnQ0FBZ0MsRUFDaEMsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0UsR0FBWSxFQUFFQyxHQUFhLEtBQWtCUSxTQUFBO0VBQy9ELE1BQU1TLFFBQVEsR0FBRyxDQUFDbEIsR0FBRyxDQUFDVyxNQUFNLENBQUNPLFFBQVE7RUFDckMsTUFBTWhCLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGNBQWMsQ0FBQ2dCLFlBQVksQ0FBQ0QsUUFBUSxDQUFDO0VBQ3hELE1BQU1iLGFBQWEsR0FBR1osY0FBQSxDQUFBYSxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQzdDRCxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7QUFDckMsQ0FBQyxFQUFDLENBQ0g7QUFFRDtBQUNBWCxRQUFBLENBQUFFLE1BQU0sQ0FBQ3dCLEdBQUcsQ0FDUixxQkFBcUIsRUFDckIsSUFBQTdCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWV1QixZQUFZQSxDQUFDckIsR0FBWSxFQUFFQyxHQUFhOztJQUNsRSxNQUFNYyxRQUFRLEdBQUdmLEdBQUcsQ0FBQ2dCLElBQUk7SUFDekIsTUFBTWQsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsY0FBYyxDQUFDbUIsWUFBWSxDQUFDUCxRQUFRLENBQUM7SUFDeEQsTUFBTVYsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ2lCLE9BQU8sQ0FBQ3JCLElBQUksQ0FBQztJQUNqRCxJQUFJRyxhQUFhLEVBQUU7TUFDakIsT0FBT0osR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0lBQzVDO0lBQ0EsT0FBT1UsUUFBUTtFQUNqQixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","getNavItems","req","res","data","DoctorsService","getDoctors","buildResponse","BuildResponse","status","json","__awaiter","mobile","params","checkDoctorPhoneNumberExists","post","addDocror","formData","body","registerDoctor","doctorId","doctorDetial","put","updateDocror","updateDoctor","updated"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport {router} from \"../../routes/public\";\r\nimport { DoctorsService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/admin/doctors\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await DoctorsService.getDoctors();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await DoctorsService.checkDoctorPhoneNumberExists(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-doctor\r\nrouter.post(\r\n  `/admin/add-doctor`,\r\n  asyncHandler(async function addDocror(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.registerDoctor(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/doctor-detial/:doctorId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctorId = +req.params.doctorId;\r\n    const data = await DoctorsService.doctorDetial(doctorId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(200).json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updateDoctor\",\r\n  asyncHandler(async function updateDocror(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.updateDoctor(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1725613484046},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DoctorsService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass DoctorsService {\n  static getDoctors() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctors)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkDoctorPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorDetial(doctortId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorDetail)(doctortId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static updateDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.DoctorsService = DoctorsService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkRvY3RvcnNTZXJ2aWNlIiwiZ2V0RG9jdG9ycyIsImRhdGEiLCJtZXNzYWdlIiwiY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyIsIm1vYmlsZSIsInJlZ2lzdGVyRG9jdG9yIiwiZm9ybURhdGEiLCJhZGREb2N0b3IiLCJkb2N0b3JEZXRpYWwiLCJkb2N0b3J0SWQiLCJkb2N0b3JEZXRhaWwiLCJ1cGRhdGVEb2N0b3IiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBhZGREb2N0b3IsXHJcbiAgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyxcclxuICBkb2N0b3JEZXRhaWwsXHJcbiAgZ2V0RG9jdG9ycyxcclxuICB1cGRhdGVEb2N0b3IsXHJcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5pbXBvcnQgeyBEb2N0b3JzRFRPIH0gZnJvbSBcIi4uLy4uL21vZGVscy9kb2N0b3JzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdG9yc1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RG9jdG9ycygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXREb2N0b3JzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyRG9jdG9yKGZvcm1EYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZG9jdG9yRGV0aWFsKGRvY3RvcnRJZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yRGV0YWlsKGRvY3RvcnRJZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N0b3IoZm9ybURhdGE6IERvY3RvcnNEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVEb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFTQSxNQUFhQyxjQUFjO0VBQ2xCLE9BQWFDLFVBQVVBLENBQUE7O01BQzVCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsVUFBVSxHQUFFO01BQy9CLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRSw0QkFBNEJBLENBQUNDLE1BQWM7O01BQzdELE1BQU1ILElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQU0sNEJBQTRCLEVBQUNDLE1BQU0sQ0FBQztNQUN2RCxJQUFJSCxJQUFJLEVBQUU7UUFDUixPQUFPLElBQUk7TUFDYixDQUFDLE1BQU07UUFDTCxPQUFPLEtBQUs7TUFDZDtJQUNGLENBQUM7O0VBRU0sT0FBYUksY0FBY0EsQ0FBQ0MsUUFBb0I7O01BQ3JELE1BQU1MLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVUsU0FBUyxFQUFDRCxRQUFRLENBQUM7TUFDdEMsSUFBSUwsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUNNLE9BQWFPLFlBQVlBLENBQUNDLFNBQWlCOztNQUNoRCxNQUFNUixJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFhLFlBQVksRUFBQ0QsU0FBUyxDQUFDO01BQzFDLElBQUlSLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhVSxZQUFZQSxDQUFDTCxRQUFvQjs7TUFDbkQsTUFBTUwsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBYyxZQUFZLEVBQUNMLFFBQVEsQ0FBQztNQUN6QyxJQUFJTCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQTNDSFcsT0FBQSxDQUFBYixjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","DoctorsService","getDoctors","data","message","checkDoctorPhoneNumberExists","mobile","registerDoctor","formData","addDoctor","doctorDetial","doctortId","doctorDetail","updateDoctor","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/service.ts"],"sourcesContent":["import {\r\n  addDoctor,\r\n  checkDoctorPhoneNumberExists,\r\n  doctorDetail,\r\n  getDoctors,\r\n  updateDoctor,\r\n} from \"../../bin/db\";\r\nimport { DoctorsDTO } from \"../../models/doctors\";\r\n\r\nexport class DoctorsService {\r\n  public static async getDoctors() {\r\n    const data = await getDoctors();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkDoctorPhoneNumberExists(mobile: string): Promise<boolean> {\r\n    const data = await checkDoctorPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static async registerDoctor(formData: DoctorsDTO) {\r\n    const data = await addDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorDetial(doctortId: number) {\r\n    const data = await doctorDetail(doctortId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async updateDoctor(formData: DoctorsDTO) {\r\n    const data = await updateDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AASA,MAAaC,cAAc;EAClB,OAAaC,UAAUA,CAAA;;MAC5B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,UAAU,GAAE;MAC/B,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaE,4BAA4BA,CAACC,MAAc;;MAC7D,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,4BAA4B,EAACC,MAAM,CAAC;MACvD,IAAIH,IAAI,EAAE;QACR,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF,CAAC;;EAEM,OAAaI,cAAcA,CAACC,QAAoB;;MACrD,MAAML,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAU,SAAS,EAACD,QAAQ,CAAC;MACtC,IAAIL,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EACM,OAAaO,YAAYA,CAACC,SAAiB;;MAChD,MAAMR,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAa,YAAY,EAACD,SAAS,CAAC;MAC1C,IAAIR,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaU,YAAYA,CAACL,QAAoB;;MACnD,MAAML,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAc,YAAY,EAACL,QAAQ,CAAC;MACzC,IAAIL,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AA3CHW,OAAA,CAAAb,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1723710907509},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorYup = void 0;\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\nexports.ExpressErrorYup = ExpressErrorYup;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXBfMSIsInJlcXVpcmUiLCJFeHByZXNzRXJyb3JZdXAiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvcnMiLCJqb2luIiwiaW5uZXIiLCJsZW5ndGgiLCJyZWR1Y2UiLCJhY2MiLCJjdXJWYWwiLCJwYXRoIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yWXVwKFxyXG4gICAgZXJyOiBhbnksXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlLFxyXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXHJcbikge1xyXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBZVVAgVkFMSURBVElPTicpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0ge1xyXG4gICAgICAgICAgICBjb2RlOiA0MjIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5lcnJvcnMuam9pbignPGJyLz4nKSB8fCAnWXVwIFZhbGlkYXRpb24gRXJyb3IgIScsXHJcbiAgICAgICAgICAgIGVycm9yczpcclxuICAgICAgICAgICAgICAgIGVyci5pbm5lci5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlcnIuaW5uZXIucmVkdWNlKChhY2M6IGFueSwgY3VyVmFsOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2Ake2N1clZhbC5wYXRofWBdID0gY3VyVmFsLm1lc3NhZ2UgfHwgY3VyVmFsLnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogeyBbYCR7ZXJyLnBhdGh9YF06IGVyci5tZXNzYWdlIHx8IGVyci50eXBlIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKGVycm9yKTtcclxuICAgIH1cclxuICAgIG5leHQoZXJyKVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCQyxlQUFlQSxDQUNqQ0MsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWUgsS0FBQSxDQUFBTyxlQUFlLEVBQUU7TUFDaENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO01BQ25DLE1BQU1DLEtBQUssR0FBRztRQUNWQyxJQUFJLEVBQUUsR0FBRztRQUNUQyxPQUFPLEVBQUVULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksd0JBQXdCO1FBQzdERCxNQUFNLEVBQ0ZWLEdBQUcsQ0FBQ1ksS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxHQUNkYixHQUFHLENBQUNZLEtBQUssQ0FBQ0UsTUFBTSxDQUFDLENBQUNDLEdBQVEsRUFBRUMsTUFBVyxLQUFJO1VBQ3pDRCxHQUFHLENBQUMsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxHQUFHRCxNQUFNLENBQUNQLE9BQU8sSUFBSU8sTUFBTSxDQUFDRSxJQUFJO1VBQ3JELE9BQU9ILEdBQUc7UUFDZCxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQ0o7VUFBRSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2lCLElBQUksRUFBRSxHQUFHakIsR0FBRyxDQUFDUyxPQUFPLElBQUlULEdBQUcsQ0FBQ2tCO1FBQUk7T0FDdkQ7TUFDRCxPQUFPaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNiLEtBQUssQ0FBQztJQUN0QztJQUNBSixJQUFJLENBQUNILEdBQUcsQ0FBQztFQUViLENBQUM7O0FBdkJEcUIsT0FBQSxDQUFBdEIsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["yup_1","require","ExpressErrorYup","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { ValidationError } from \"yup\";\r\n\r\nexport async function ExpressErrorYup(\r\n    err: any,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    if (err instanceof ValidationError) {\r\n        console.log('ERROR YUP VALIDATION');\r\n        const error = {\r\n            code: 422,\r\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\r\n            errors:\r\n                err.inner.length > 0\r\n                    ? err.inner.reduce((acc: any, curVal: any) => {\r\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\r\n                        return acc\r\n                    }, {})\r\n                    : { [`${err.path}`]: err.message || err.type }\r\n        }\r\n        return res.status(422).json(error);\r\n    }\r\n    next(err)\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,KAAA,GAAAC,OAAA;AAEA,SAAsBC,eAAeA,CACjCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYH,KAAA,CAAAO,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC;;AAvBDqB,OAAA,CAAAtB,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1727917785623},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedOrigins = void 0;\nexports.allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://192.168.50.207:8000\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsb3dlZE9yaWdpbnMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25zdGFudHNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhbGxvd2VkT3JpZ2lucyA9IFtcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJywgLy8gRnJvbnRlbmQgV2ViXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxuICAgIFwiaHR0cDovLzE5Mi4xNjguNTAuMjA3OjgwMDBcIlxuICBdXG4gIFxuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFhQSxPQUFBLENBQUFDLGNBQWMsR0FBRyxDQUMxQix1QkFBdUI7QUFBRTtBQUN6Qix1QkFBdUI7QUFBRTtBQUN6Qiw0QkFBNEIsQ0FDN0IiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","allowedOrigins"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\constants\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["export const allowedOrigins = [\n    'http://localhost:4200', // Frontend Web\n    'http://localhost:3000', // Frontend Web\n    \"http://192.168.50.207:8000\"\n  ]\n  \n  "],"mappings":";;;;;;AAAaA,OAAA,CAAAC,cAAc,GAAG,CAC1B,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,4BAA4B,CAC7B","ignoreList":[]}},"mtime":1728031024987},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorResponse = void 0;\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nfunction generateErrorResponseError(e, code) {\n  return lodash_1.default.isObject(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.ResponseError.BaseResponse) {\n      return res.status(err.statusCode).json(generateErrorResponseError(err, err.statusCode));\n    }\n    next(err);\n  });\n}\nexports.ExpressErrorResponse = ExpressErrorResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiZGVmYXVsdCIsImlzT2JqZWN0IiwibWVzc2FnZSIsIkV4cHJlc3NFcnJvclJlc3BvbnNlIiwiZXJyIiwicmVxIiwicmVzIiwibmV4dCIsIk11bHRlckVycm9yIiwic3RhdHVzIiwianNvbiIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJzdGF0dXNDb2RlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7UmVzcG9uc2VFcnJvcn0gZnJvbSAnLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvcic7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGU6IEVycm9yLCBjb2RlOiBOdW1iZXIpIHtcbiAgcmV0dXJuIF8uaXNPYmplY3QoZS5tZXNzYWdlKSA/IGUubWVzc2FnZSA6IHsgY29kZSwgbWVzc2FnZTogZS5tZXNzYWdlIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NFcnJvclJlc3BvbnNlKFxuICBlcnI6IGFueSxcbiAgcmVxOiBSZXF1ZXN0LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb25cbikge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgNDAwKSlcbiAgfVxuXG4gIGlmIChlcnIgaW5zdGFuY2VvZiBSZXNwb25zZUVycm9yLkJhc2VSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoZXJyLnN0YXR1c0NvZGUpXG4gICAgICAuanNvbihnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvcihlcnIsIGVyci5zdGF0dXNDb2RlKSlcbiAgfVxuICBuZXh0KGVycilcbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFHQSxNQUFBRSxnQkFBQSxHQUFBRixPQUFBO0FBRUEsU0FBU0csMEJBQTBCQSxDQUFDQyxDQUFRLEVBQUVDLElBQVk7RUFDeEQsT0FBT0osUUFBQSxDQUFBSyxPQUFDLENBQUNDLFFBQVEsQ0FBQ0gsQ0FBQyxDQUFDSSxPQUFPLENBQUMsR0FBR0osQ0FBQyxDQUFDSSxPQUFPLEdBQUc7SUFBRUgsSUFBSTtJQUFFRyxPQUFPLEVBQUVKLENBQUMsQ0FBQ0k7RUFBTyxDQUFFO0FBQ3pFO0FBRUEsU0FBc0JDLG9CQUFvQkEsQ0FDeENDLEdBQVEsRUFDUkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQixJQUFJSCxHQUFHLFlBQVlaLFFBQUEsQ0FBQVEsT0FBTSxDQUFDUSxXQUFXLEVBQUU7TUFDckMsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ2IsMEJBQTBCLENBQUNPLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNuRTtJQUVBLElBQUlBLEdBQUcsWUFBWVIsZ0JBQUEsQ0FBQWUsYUFBYSxDQUFDQyxZQUFZLEVBQUU7TUFDN0MsT0FBT04sR0FBRyxDQUNQRyxNQUFNLENBQUNMLEdBQUcsQ0FBQ1MsVUFBVSxDQUFDLENBQ3RCSCxJQUFJLENBQUNiLDBCQUEwQixDQUFDTyxHQUFHLEVBQUVBLEdBQUcsQ0FBQ1MsVUFBVSxDQUFDLENBQUM7SUFDMUQ7SUFDQU4sSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFDWCxDQUFDOztBQWhCRFUsT0FBQSxDQUFBWCxvQkFBQSxHQUFBQSxvQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","default","isObject","message","ExpressErrorResponse","err","req","res","next","MulterError","status","json","ResponseError","BaseResponse","statusCode","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\nimport _ from 'lodash';\n\nimport { NextFunction, Request, Response } from 'express';\nimport {ResponseError} from '../modules/error/response_error';\n\nfunction generateErrorResponseError(e: Error, code: Number) {\n  return _.isObject(e.message) ? e.message : { code, message: e.message }\n}\n\nexport async function ExpressErrorResponse(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof multer.MulterError) {\n    return res.status(400).json(generateErrorResponseError(err, 400))\n  }\n\n  if (err instanceof ResponseError.BaseResponse) {\n    return res\n      .status(err.statusCode)\n      .json(generateErrorResponseError(err, err.statusCode))\n  }\n  next(err)\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAAE,gBAAA,GAAAF,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAOJ,QAAA,CAAAK,OAAC,CAACC,QAAQ,CAACH,CAAC,CAACI,OAAO,CAAC,GAAGJ,CAAC,CAACI,OAAO,GAAG;IAAEH,IAAI;IAAEG,OAAO,EAAEJ,CAAC,CAACI;EAAO,CAAE;AACzE;AAEA,SAAsBC,oBAAoBA,CACxCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYZ,QAAA,CAAAQ,OAAM,CAACQ,WAAW,EAAE;MACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,0BAA0B,CAACO,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYR,gBAAA,CAAAe,aAAa,CAACC,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPG,MAAM,CAACL,GAAG,CAACS,UAAU,CAAC,CACtBH,IAAI,CAACb,0BAA0B,CAACO,GAAG,EAAEA,GAAG,CAACS,UAAU,CAAC,CAAC;IAC1D;IACAN,IAAI,CAACH,GAAG,CAAC;EACX,CAAC;;AAhBDU,OAAA,CAAAX,oBAAA,GAAAA,oBAAA","ignoreList":[]}},"mtime":1725674857610},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressAutoHandleTransaction = void 0;\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once(\"finish\", () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log(\"AUTO COMMIT!!!\");\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\nexports.ExpressAutoHandleTransaction = ExpressAutoHandleTransaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsIl90cmFuc2FjdGlvbiIsIm9uY2UiLCJ0cmFuc2FjdGlvbktleXMiLCJPYmplY3QiLCJrZXlzIiwiaSIsImxlbmd0aCIsInR4biIsImZpbmlzaGVkIiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiY29tbWl0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2F1dG9faGFuZGxlX3RyYW5zYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcInNlcXVlbGl6ZVwiO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXNwb25zZSwgUmVxdWVzdCB9IGZyb20gXCJleHByZXNzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKFxuICByZXE6IGFueSxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxuICByZXEuX3RyYW5zYWN0aW9uID0gcmVxLl90cmFuc2FjdGlvbiB8fCB7fTtcblxuICByZXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB7XG4gICAgY29uc3QgeyBfdHJhbnNhY3Rpb24gfSA9IHJlcTtcblxuICAgIGlmICghX3RyYW5zYWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdHJhbnNhY3Rpb25LZXlzID0gT2JqZWN0LmtleXMoX3RyYW5zYWN0aW9uKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zYWN0aW9uS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdHhuID0gX3RyYW5zYWN0aW9uW3RyYW5zYWN0aW9uS2V5c1tpXV0gYXMgVHJhbnNhY3Rpb24gJiB7XG4gICAgICAgIGZpbmlzaGVkPzogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIGlmICghdHhuPy5maW5pc2hlZCkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IHJlcS5vcmlnaW5hbFVybDtcbiAgICAgICAgY29uc29sZS53YXJuKGBlbmRwb2ludCAke2VuZHBvaW50fSBwb3RlbnRpYWxseSBjYW4gbGVhZCB0byBidWdgKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBVVRPIENPTU1JVCEhIVwiKTtcbiAgICAgICAgdHhuLmNvbW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbmV4dCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxTQUFzQkEsNEJBQTRCQSxDQUNoREMsR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQjtJQUNBRixHQUFHLENBQUNHLFlBQVksR0FBR0gsR0FBRyxDQUFDRyxZQUFZLElBQUksRUFBRTtJQUV6Q0YsR0FBRyxDQUFDRyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQUs7TUFDdEIsTUFBTTtRQUFFRDtNQUFZLENBQUUsR0FBR0gsR0FBRztNQUU1QixJQUFJLENBQUNHLFlBQVksRUFBRTtRQUNqQjtNQUNGO01BRUEsTUFBTUUsZUFBZSxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ0osWUFBWSxDQUFDO01BQ2pELEtBQUssSUFBSUssQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxlQUFlLENBQUNJLE1BQU0sRUFBRUQsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsRCxNQUFNRSxHQUFHLEdBQUdQLFlBQVksQ0FBQ0UsZUFBZSxDQUFDRyxDQUFDLENBQUMsQ0FFMUM7UUFDRCxJQUFJLEVBQUNFLEdBQUcsYUFBSEEsR0FBRyx1QkFBSEEsR0FBRyxDQUFFQyxRQUFRLEdBQUU7VUFDbEIsTUFBTUMsUUFBUSxHQUFHWixHQUFHLENBQUNhLFdBQVc7VUFDaENDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLFlBQVlILFFBQVEsOEJBQThCLENBQUM7VUFDaEVFLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixDQUFDO1VBQzdCTixHQUFHLENBQUNPLE1BQU0sRUFBRTtRQUNkO01BQ0Y7SUFDRixDQUFDLENBQUM7SUFFRmYsSUFBSSxFQUFFO0VBQ1IsQ0FBQzs7QUE5QkRnQixPQUFBLENBQUFuQiw0QkFBQSxHQUFBQSw0QkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from \"sequelize\";\nimport { NextFunction, Response, Request } from \"express\";\n\nexport async function ExpressAutoHandleTransaction(\n  req: any,\n  res: Response,\n  next: NextFunction\n) {\n  // Ensure _transaction is initialized\n  req._transaction = req._transaction || {};\n\n  res.once(\"finish\", () => {\n    const { _transaction } = req;\n\n    if (!_transaction) {\n      return;\n    }\n\n    const transactionKeys = Object.keys(_transaction);\n    for (let i = 0; i < transactionKeys.length; i += 1) {\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\n        finished?: string;\n      };\n      if (!txn?.finished) {\n        const endpoint = req.originalUrl;\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n        console.log(\"AUTO COMMIT!!!\");\n        txn.commit();\n      }\n    }\n  });\n\n  next();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAsBA,4BAA4BA,CAChDC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC;;AA9BDgB,OAAA,CAAAnB,4BAAA,GAAAA,4BAAA","ignoreList":[]}},"mtime":1725611830099}}