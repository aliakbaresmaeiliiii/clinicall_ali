{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = require(\"./routes/index\");\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = require(\"./middlewares/express_error_yup\");\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = require(\"./constants/constants_allowed_orginal\");\nconst express_error_response_1 = require(\"./middlewares/express_error_response\");\nconst express_auto_handle_transaction_1 = require(\"./middlewares/express_auto_handle_transaction\");\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.allowedOrigins,\n  methods: 'GET,POST,PUT,DELETE',\n  allowedHeaders: 'Content-Type,Authorization'\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set('views', path_1.default.join(`${__dirname}/../`, 'views'));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: '200mb',\n  type: 'application/json'\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, 'public')));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.routes);\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', express_error_yup_1.ExpressErrorYup);\napp.use('/v1', express_error_response_1.ExpressErrorResponse);\napp.use(express_auto_handle_transaction_1.ExpressAutoHandleTransaction);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvbl8xIiwib3B0Q29ycyIsIm9yaWdpbiIsImFsbG93ZWRPcmlnaW5zIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiYXBwIiwiZGVmYXVsdCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwibGltaXQiLCJ0eXBlIiwic3RhdGljIiwiZXhwcmVzcyIsIm13Iiwicm91dGVzIiwiRXhwcmVzc0Vycm9yWXVwIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IGhwcCBmcm9tICdocHAnO1xyXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcclxuaW1wb3J0IHJlcXVlc3RJcCBmcm9tICdyZXF1ZXN0LWlwJztcclxuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcclxuaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJ2h0dHAtZXJyb3JzJztcclxuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcclxuaW1wb3J0IHtyb3V0ZXN9IGZyb20gJy4vcm91dGVzL2luZGV4JztcclxuaW1wb3J0IHVzZXJBZ2VudCBmcm9tICdleHByZXNzLXVzZXJhZ2VudCc7XHJcbmltcG9ydCB7RXhwcmVzc0Vycm9yWXVwfSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwJztcclxuaW1wb3J0IGV4cHJlc3MsIHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQge2FsbG93ZWRPcmlnaW5zfSBmcm9tICcuL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsJztcclxuaW1wb3J0IHtFeHByZXNzRXJyb3JSZXNwb25zZX0gZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlJztcclxuaW1wb3J0IHtFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9ufSBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24nO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xyXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogYWxsb3dlZE9yaWdpbnMsXHJcbiAgbWV0aG9kczogJ0dFVCxQT1NULFBVVCxERUxFVEUnLFxyXG4gIGFsbG93ZWRIZWFkZXJzOiAnQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb24nXHJcbn1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpXHJcblxyXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxyXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsICd2aWV3cycpKVxyXG4vLyBhcHAuc2V0KCd2aWV3IGVuZ2luZScsICdwdWcnKVxyXG5cclxuYXBwLnVzZShoZWxtZXQoKSlcclxuYXBwLnVzZShjb3JzKG9wdENvcnMpKVxyXG4vLyBhcHAudXNlKGxvZ2dlcignY29tYmluZWQnLCB7IHN0cmVhbTogd2luc3RvblN0cmVhbSB9KSlcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpIC8vIFRPRE8gOiAgY2hlY2sgaXQgc2hvdWxkIGJlIGZhbHNlIG9yIHRydWVcclxuYXBwLnVzZShcclxuICBleHByZXNzLmpzb24oe1xyXG4gICAgbGltaXQ6ICcyMDBtYicsXHJcbiAgICB0eXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfSlcclxuKVxyXG5cclxuXHJcblxyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKVxyXG5hcHAudXNlKGNvbXByZXNzaW9uKCkpXHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgJ3B1YmxpYycpKSlcclxuYXBwLnVzZShocHAoKSlcclxuYXBwLnVzZSh1c2VyQWdlbnQuZXhwcmVzcygpKVxyXG5hcHAudXNlKHJlcXVlc3RJcC5tdygpKVxyXG4vLyBUT0RPIDogYWRkIHRoaXMgbGF0ZXJcclxuXHJcblxyXG4vLyBJbml0aWFsIFJvdXRlXHJcbmFwcC51c2Uocm91dGVzKVxyXG5cclxuLy8gYXBwLnVzZSgnL3YxJywgaGFuZGxlUm9sbGJhY2tUcmFuc2FjdGlvbilcclxuYXBwLnVzZSgnL3YxJywgRXhwcmVzc0Vycm9yWXVwKVxyXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JSZXNwb25zZSlcclxuYXBwLnVzZShFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKVxyXG5cclxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZShmdW5jdGlvbiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcclxuICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpXHJcbn0pXHJcblxyXG4vLyBlcnJvciBoYW5kbGVyXHJcbmFwcC51c2UoZnVuY3Rpb24gKGVycjogYW55LCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xyXG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XHJcbiAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2VcclxuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge31cclxuXHJcbiAgLy8gcmVuZGVyIHRoZSBlcnJvciBwYWdlXHJcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgcmVzLmpzb24oe1xyXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICBlcnJvcjogZXJyXHJcbiAgfSk7XHJcbn0pXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0EsTUFBQUEsS0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLE1BQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxZQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFLLGFBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQU0sYUFBQSxHQUFBUCxlQUFBLENB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","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_auto_handle_transaction_1","optCors","origin","allowedOrigins","methods","allowedHeaders","app","default","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","routes","ExpressErrorYup","ExpressErrorResponse","ExpressAutoHandleTransaction","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport hpp from 'hpp';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport helmet from 'helmet';\r\nimport requestIp from 'request-ip';\r\nimport compression from 'compression';\r\nimport createError from 'http-errors';\r\nimport cookieParser from 'cookie-parser';\r\nimport {routes} from './routes/index';\r\nimport userAgent from 'express-useragent';\r\nimport {ExpressErrorYup} from './middlewares/express_error_yup';\r\nimport express, { NextFunction, Request, Response } from 'express';\r\nimport {allowedOrigins} from './constants/constants_allowed_orginal';\r\nimport {ExpressErrorResponse} from './middlewares/express_error_response';\r\nimport {ExpressAutoHandleTransaction} from './middlewares/express_auto_handle_transaction';\r\n\r\n// TODO: change to .ts\r\nconst optCors: cors.CorsOptions = {\r\n  origin: allowedOrigins,\r\n  methods: 'GET,POST,PUT,DELETE',\r\n  allowedHeaders: 'Content-Type,Authorization'\r\n}\r\nconst app = express()\r\n\r\n// view engine setup\r\napp.set('views', path.join(`${__dirname}/../`, 'views'))\r\n// app.set('view engine', 'pug')\r\n\r\napp.use(helmet())\r\napp.use(cors(optCors))\r\n// app.use(logger('combined', { stream: winstonStream }))\r\napp.use(express.urlencoded({ extended: false })) // TODO :  check it should be false or true\r\napp.use(\r\n  express.json({\r\n    limit: '200mb',\r\n    type: 'application/json',\r\n  })\r\n)\r\n\r\n\r\n\r\napp.use(cookieParser())\r\napp.use(compression())\r\napp.use(express.static(path.join(`${__dirname}/../`, 'public')))\r\napp.use(hpp())\r\napp.use(userAgent.express())\r\napp.use(requestIp.mw())\r\n// TODO : add this later\r\n\r\n\r\n// Initial Route\r\napp.use(routes)\r\n\r\n// app.use('/v1', handleRollbackTransaction)\r\napp.use('/v1', ExpressErrorYup)\r\napp.use('/v1', ExpressErrorResponse)\r\napp.use(ExpressAutoHandleTransaction)\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req: Request, res: Response, next: NextFunction) {\r\n  next(createError(404))\r\n})\r\n\r\n// error handler\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message\r\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.json({\r\n    message: err.message,\r\n    error: err\r\n  });\r\n})\r\n\r\nmodule.exports = app"],"mappings":"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","ignoreList":[]}},"mtime":1740529149974},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.routes = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = require(\"./public\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nexports.routes = express_1.default.Router();\n/* Home Page. */\nexports.routes.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nexports.routes.get('/v1', function (req, res, next) {\n  throw new response_error_1.ResponseError.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nexports.routes.use('/v1', public_1.router);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZXhwb3J0cyIsInJvdXRlcyIsImRlZmF1bHQiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsIlJlc3BvbnNlRXJyb3IiLCJGb3JiaWRkZW4iLCJ1c2UiLCJyb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQge3JvdXRlcn0gZnJvbSAnLi9wdWJsaWMnO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZXhwb3J0IGNvbnN0IHJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEhvbWUgUGFnZS4gKi9cbnJvdXRlcy5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcblxuICAgIHJldHVybiByZXMuc2VuZChgPGgxPldlbGNvbWUgVG8gQ2xpY25pYyBTdXBwb3J0IENlbnRlciBzZXJ2ZXI8L2gxPjxici8+PGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkZpbmQgQXBpIGRvY3MgSGVyZSA6PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGgzPjxhPi92MS9hcGktZG9jczwvYT48L2gzPmApXG4gIH0pXG5cbi8qIEZvcmJpZGRlbiBQYWdlLiAqL1xucm91dGVzLmdldCgnL3YxJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0ICkge1xuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkZvcmJpZGRlbignZm9yYmlkZGVuLCB3cm9uZyBhY2Nlc3MgZW5kcG9pbnQnKVxuICB9KVxuXG4vKiBEZWNsYXJlIFJvdXRlICovXG5yb3V0ZXMudXNlKCcvdjEnLCByb3V0ZXIpXG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVhRyxPQUFBLENBQUFDLE1BQU0sR0FBR04sU0FBQSxDQUFBTyxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUV0QztBQUNBSCxPQUFBLENBQUFDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsT0FBQSxDQUFBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFDdEMsTUFBTSxJQUFJUixnQkFBQSxDQUFBVSxhQUFhLENBQUNDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFSjtBQUNBVixPQUFBLENBQUFDLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLEtBQUssRUFBRWIsUUFBQSxDQUFBYyxNQUFNLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","exports","routes","default","Router","get","req","res","next","send","ResponseError","Forbidden","use","router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\nimport {router} from './public';\nimport {ResponseError} from '../modules/error/response_error';\n\nexport const routes = express.Router();\n\n/* Home Page. */\nroutes.get('/', function (req, res, next) {\n\n    return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`)\n  })\n\n/* Forbidden Page. */\nroutes.get('/v1', function (req, res, next ) {\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\n  })\n\n/* Declare Route */\nroutes.use('/v1', router)\n\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AAEaG,OAAA,CAAAC,MAAM,GAAGN,SAAA,CAAAO,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAH,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAR,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIR,gBAAA,CAAAU,aAAa,CAACC,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAV,OAAA,CAAAC,MAAM,CAACU,GAAG,CAAC,KAAK,EAAEb,QAAA,CAAAc,MAAM,CAAC","ignoreList":[]}},"mtime":1725677148456},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.router = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nexports.router = express_1.default.Router();\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\nrequire(\"../controller/doctors/controller\");\nrequire(\"../controller/medications/controller\");\nrequire(\"../controller/diseases/controller\");\nrequire(\"../controller/prescription-medicine/controller\");\nrequire(\"../controller/clinic_services/controller\");\nrequire(\"../controller/cities/controller\");\nrequire(\"../controller/insurance/controller\");\nrequire(\"../controller/clinic/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJvdXRlciIsImRlZmF1bHQiLCJSb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL3JvdXRlcy9wdWJsaWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gIEFQSXNcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL25hdi1pdGVtcy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hcHBvaW50bWVudC9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9kb2N0b3JzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL21lZGljYXRpb25zL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2Rpc2Vhc2VzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3ByZXNjcmlwdGlvbi1tZWRpY2luZS9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jbGluaWNfc2VydmljZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvY2l0aWVzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2luc3VyYW5jZS9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jbGluaWMvY29udHJvbGxlclwiKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsTUFBTSxHQUFHSixTQUFBLENBQUFLLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXRDO0FBQ0FKLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUN4Q0EsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDN0NBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3pDQSxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDNUNBLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztBQUMzQ0EsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBQy9DQSxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDNUNBLE9BQU8sQ0FBQyxnREFBZ0QsQ0FBQztBQUN6REEsT0FBTyxDQUFDLDBDQUEwQyxDQUFDO0FBQ25EQSxPQUFPLENBQUMsaUNBQWlDLENBQUM7QUFDMUNBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3Q0EsT0FBTyxDQUFDLGlDQUFpQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express_1","__importDefault","require","exports","router","default","Router"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nexport const router = express.Router();\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\nrequire(\"../controller/doctors/controller\");\r\nrequire(\"../controller/medications/controller\");\r\nrequire(\"../controller/diseases/controller\");\r\nrequire(\"../controller/prescription-medicine/controller\");\r\nrequire(\"../controller/clinic_services/controller\");\r\nrequire(\"../controller/cities/controller\");\r\nrequire(\"../controller/insurance/controller\");\r\nrequire(\"../controller/clinic/controller\");\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,MAAM,GAAGJ,SAAA,CAAAK,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAJ,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,kCAAkC,CAAC;AAC3CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,gDAAgD,CAAC;AACzDA,OAAO,CAAC,0CAA0C,CAAC;AACnDA,OAAO,CAAC,iCAAiC,CAAC;AAC1CA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,iCAAiC,CAAC","ignoreList":[]}},"mtime":1737888183606},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst service_2 = require(\"../clinic/service\");\nconst services_1 = require(\"../patients/services\");\n// ***** clinic sign-up *****\npublic_1.router.post(`/auth/clinic/register`, (0, async_handler_1.asyncHandler)(function clinicRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_2.ClinicService.registerClinic(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** patient sign-up *****\npublic_1.router.post(`/auth/patient/register`, (0, async_handler_1.asyncHandler)(function patientRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.registerPatient(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** confirm *****\npublic_1.router.post(\"/auth/verify-clinic-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmClinicEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/verify-patient-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmPatientEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** clinic-sign-in *****\npublic_1.router.post(\"/auth/clinic-sign-in\", (0, async_handler_1.asyncHandler)(function clinicSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.clinicSignIn(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** doctor-sign-in *****\npublic_1.router.post(\"/auth/doctor-sign-in\", (0, async_handler_1.asyncHandler)(function doctorSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.doctorSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/patient-sign-in\", (0, async_handler_1.asyncHandler)(function patientSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.patientSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJhc3luY19oYW5kbGVyXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInNlcnZpY2VfMiIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiY2xpbmljUmVnaXN0ZXIiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJkYXRhIiwiQ2xpbmljU2VydmljZSIsInJlZ2lzdGVyQ2xpbmljIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsInBhdGllbnRSZWdpc3RlciIsIlBhdGllbnRTZXJ2aWNlIiwicmVnaXN0ZXJQYXRpZW50IiwidmVyaWZ5RW1haWwiLCJuZXh0IiwiZW1haWwiLCJ2ZXJpZnlfY29kZSIsIkF1dGhTZXJ2aWNlIiwiY29uZmlybUNsaW5pY0VtYWlsIiwiY29uZmlybVBhdGllbnRFbWFpbCIsImNsaW5pY1NpZ25JbiIsImRvY3RvclNpZ25JbiIsInBhdGllbnRTaWduSW4iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcblxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDbGluaWNTZXJ2aWNlIH0gZnJvbSBcIi4uL2NsaW5pYy9zZXJ2aWNlXCI7XG5pbXBvcnQgeyBQYXRpZW50U2VydmljZSB9IGZyb20gXCIuLi9wYXRpZW50cy9zZXJ2aWNlc1wiO1xuXG4vLyAqKioqKiBjbGluaWMgc2lnbi11cCAqKioqKlxucm91dGVyLnBvc3QoXG4gIGAvYXV0aC9jbGluaWMvcmVnaXN0ZXJgLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2xpbmljUmVnaXN0ZXIocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2xpbmljU2VydmljZS5yZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4vLyAqKioqKiBwYXRpZW50IHNpZ24tdXAgKioqKipcbnJvdXRlci5wb3N0KFxuICBgL2F1dGgvcGF0aWVudC9yZWdpc3RlcmAsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBwYXRpZW50UmVnaXN0ZXIocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcbi8vICoqKioqIGNvbmZpcm0gKioqKipcbnJvdXRlci5wb3N0KFxuICBcIi9hdXRoL3ZlcmlmeS1jbGluaWMtZW1haWxcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUVtYWlsKFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5jb25maXJtQ2xpbmljRW1haWwoe2VtYWlsLCB2ZXJpZnlfY29kZX0pO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xucm91dGVyLnBvc3QoXG4gIFwiL2F1dGgvdmVyaWZ5LXBhdGllbnQtZW1haWxcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUVtYWlsKFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlIH0gPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuY29uZmlybVBhdGllbnRFbWFpbCh7ZW1haWwsIHZlcmlmeV9jb2RlfSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5cblxuLy8gKioqKiogY2xpbmljLXNpZ24taW4gKioqKipcbnJvdXRlci5wb3N0KFxuICBcIi9hdXRoL2NsaW5pYy1zaWduLWluXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjbGluaWNTaWduSW4ocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuY2xpbmljU2lnbkluKGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcbi8vICoqKioqIGRvY3Rvci1zaWduLWluICoqKioqXG5yb3V0ZXIucG9zdChcbiAgXCIvYXV0aC9kb2N0b3Itc2lnbi1pblwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2lnbkluKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmRvY3RvclNpZ25Jbihmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5yb3V0ZXIucG9zdChcbiAgXCIvYXV0aC9wYXRpZW50LXNpZ24taW5cIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHBhdGllbnRTaWduSW4ocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UucGF0aWVudFNpZ25Jbihmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5cbi8vIHJvdXRlci5nZXQoXG4vLyAgIFwiL2F1dGgvdmVyaWZ5LWVtYWlsLWNvZGVcIixcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1FbWFpbENvZGUocmVxOiBhbnksIHJlczogYW55KSB7XG4vLyAgICAgY29uc3QgZW1haWwgPSByZXEucXVlcnkuZW1haWw7XG4vLyAgICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmNvbmZpcm1FbWFpbENvZGUoZW1haWwpO1xuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4vLyAgIH0pXG4vLyApO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGNBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLFNBQUEsR0FBQUosT0FBQTtBQUNBLE1BQUFLLFVBQUEsR0FBQUwsT0FBQTtBQUVBO0FBQ0FFLFFBQUEsQ0FBQUksTUFBTSxDQUFDQyxJQUFJLENBQ1QsdUJBQXVCLEVBQ3ZCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLGNBQWNBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDM0QsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7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LFFBQVEsQ0FBQztJQUNyRCxNQUFNSyxhQUFhLEdBQUcsTUFBTWxCLGNBQUEsQ0FBQW1CLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDTCxJQUFJLENBQUM7SUFDbkQsT0FBT0gsR0FBRyxDQUFDUyxNQUFNLENBQUNILGFBQWEsQ0FBQ0ksSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0wsYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFDRDtBQUNBZixRQUFBLENBQUFJLE1BQU0sQ0FBQ0MsSUFBSSxDQUNULHNCQUFzQixFQUN0QixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlMEIsWUFBWUEsQ0FBQ3hCLEdBQVEsRUFBRUMsR0FBUTs7SUFDekQsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1YLFNBQUEsQ0FBQTJCLFdBQVcsQ0FBQ0ksWUFBWSxDQUFDdEIsUUFBUSxDQUFDO0lBQ3JELE1BQU1LLGFBQWEsR0FBR2xCLGNBQUEsQ0FBQW1CLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDTCxJQUFJLENBQUM7SUFDN0MsT0FBT0gsR0FBRyxDQUFDUyxNQUFNLENBQUNILGFBQWEsQ0FBQ0ksSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0wsYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFDRGYsUUFBQSxDQUFBSSxNQUFNLENBQUNDLElBQUksQ0FDVCx1QkFBdUIsRUFDdkIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZTJCLGFBQWFBLENBQUN6QixHQUFRLEVBQUVDLEdBQVE7O0lBQzFELE1BQU1DLFFBQVEsR0FBR0YsR0FBRyxDQUFDRyxJQUFJO0lBQ3pCLE1BQU1DLElBQUksR0FBRyxNQUFNWCxTQUFBLENBQUEyQixXQUFXLENBQUNLLGFBQWEsQ0FBQ3ZCLFFBQVEsQ0FBQztJQUN0RCxNQUFNSyxhQUFhLEdBQUdsQixjQUFBLENBQUFtQixhQUFhLENBQUNDLEdBQUcsQ0FBQ0wsSUFBSSxDQUFDO0lBQzdDLE9BQU9ILEdBQUcsQ0FBQ1MsTUFBTSxDQUFDSCxhQUFhLENBQUNJLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNMLGFBQWEsQ0FBQztFQUMzRCxDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["app_response_1","require","async_handler_1","public_1","service_1","service_2","services_1","router","post","asyncHandler","clinicRegister","req","res","formData","body","data","ClinicService","registerClinic","buildResponse","BuildResponse","get","status","code","json","patientRegister","PatientService","registerPatient","verifyEmail","next","email","verify_code","AuthService","confirmClinicEmail","confirmPatientEmail","clinicSignIn","doctorSignIn","patientSignIn"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { BuildResponse } from \"../../modules/response/app_response\";\n\nimport { asyncHandler } from \"../../helper/async-handler\";\nimport { router } from \"../../routes/public\";\nimport { AuthService } from \"./service\";\nimport { ClinicService } from \"../clinic/service\";\nimport { PatientService } from \"../patients/services\";\n\n// ***** clinic sign-up *****\nrouter.post(\n  `/auth/clinic/register`,\n  asyncHandler(async function clinicRegister(req: any, res: any) {\n    const formData = req.body;\n    const data = await ClinicService.registerClinic(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n// ***** patient sign-up *****\nrouter.post(\n  `/auth/patient/register`,\n  asyncHandler(async function patientRegister(req: any, res: any) {\n    const formData = req.body;\n    const data = await PatientService.registerPatient(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n// ***** confirm *****\nrouter.post(\n  \"/auth/verify-clinic-email\",\n  asyncHandler(async function verifyEmail(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { email, verify_code } = req.body;\n\n    const data = await AuthService.confirmClinicEmail({email, verify_code});\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\nrouter.post(\n  \"/auth/verify-patient-email\",\n  asyncHandler(async function verifyEmail(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { email, verify_code } = req.body;\n    const data = await AuthService.confirmPatientEmail({email, verify_code});\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n\n// ***** clinic-sign-in *****\nrouter.post(\n  \"/auth/clinic-sign-in\",\n  asyncHandler(async function clinicSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.clinicSignIn(formData);\n    const buildResponse = await BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n// ***** doctor-sign-in *****\nrouter.post(\n  \"/auth/doctor-sign-in\",\n  asyncHandler(async function doctorSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.doctorSignIn(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\nrouter.post(\n  \"/auth/patient-sign-in\",\n  asyncHandler(async function patientSignIn(req: any, res: any) {\n    const formData = req.body;\n    const data = await AuthService.patientSignIn(formData);\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n"],"mappings":"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","ignoreList":[]}},"mtime":1739626241820},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BuildResponse = void 0;\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.BuildResponse = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccmVzcG9uc2VcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xuXG50eXBlIERhdGFSZXNwb25zZSA9XG4gIHwge1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgY29kZT86IG51bWJlcjtcbiAgICB9XG4gIHwgYW55O1xuXG5leHBvcnQgY2xhc3MgQnVpbGRSZXNwb25zZSB7XG4gIHByaXZhdGUgc3RhdGljIGJhc2VSZXNwb25zZShkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1lc3NhZ2UgPSBcImRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQhXCIsXG4gICAgICBjb2RlID0gMjAwLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBkYXRhUmVzcG9uc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4ucmVzdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIFN1Y2Nlc3NcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyBnZXQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gdGhpcy5iYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBDcmVhdGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBjb2RkZTogMjAxLFxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVkIGFkZGVkXCIsXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzcG9uc2UgVXBkYXRlXG4gICAqL1xuXG4gIHB1YmxpYyBzdGF0aWMgdXBkYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcInRoZSBkYXRhIGhhcyBiZWVkIHVwZGF0ZWRcIixcbiAgICAgIC4uLmRhdGFSZXNwb25zZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBEZWxldGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcImRhdGEgaGFzIGJlZW4gZGVsZXRlZFwiLFxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhcHBSZXNwb25zZShkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxuICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlID8gZGF0YS5tZXNzYWdlIDogXCJcIixcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgPyBkYXRhLnN0YXR1cyA6IDAsXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VDb2RlOiBkYXRhLm1lc3NhZ2VDb2RlID8gZGF0YS5tZXNzYWdlQ29kZSA6IFwiXCIsXG4gICAgICBtZXNzYWdlS2luZDogZGF0YS5tZXNzYWdlS2luZCA/IGRhdGEubWVzc2FnZUtpbmQgOiBudWxsLFxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXG4gICAgICBkYXRhOiBkYXRhLmRhdGEgPyBkYXRhLmRhdGEgOiBudWxsLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIH1cbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVNBLE1BQWFBLGFBQWE7RUFDaEIsT0FBT0MsWUFBWUEsQ0FBQ0MsWUFBMEI7SUFDcEQsTUFBTTtRQUNKQyxPQUFPLEdBQUcseUJBQXlCO1FBQ25DQyxJQUFJLEdBQUc7TUFBRyxJQUVSRixZQUFZO01BRFhHLElBQUksR0FBQUMsTUFBQSxDQUNMSixZQUFZLEVBSlYsbUJBSUwsQ0FBZTtJQUNoQixPQUFBSyxNQUFBLENBQUFDLE1BQUE7TUFDRUosSUFBSTtNQUNKRDtJQUFPLEdBQ0pFLElBQUk7RUFFWDtFQUVBOzs7RUFJTyxPQUFPSSxHQUFHQSxDQUFDUCxZQUEwQjtJQUMxQyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxZQUFZLENBQUM7RUFDeEM7RUFFQTs7O0VBR08sT0FBT1EsT0FBT0EsQ0FBQ1IsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCRyxLQUFLLEVBQUUsR0FBRztNQUNWUixPQUFPLEVBQUU7SUFBcUIsR0FDM0JELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUlPLE9BQU9VLE9BQU9BLENBQUNWLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQTJCLEdBQ2pDRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFHTyxPQUFPVyxPQUFPQSxDQUFDWCxZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUF1QixHQUM3QkQsWUFBWSxFQUNmO0VBQ0o7RUFFTyxPQUFPWSxXQUFXQSxDQUFDQyxJQUFTO0lBQ2pDLE9BQU87TUFDTFgsSUFBSSxFQUFFVyxJQUFJLENBQUNYLElBQUksR0FBR1csSUFBSSxDQUFDWCxJQUFJLEdBQUcsR0FBRztNQUNqQ0QsT0FBTyxFQUFFWSxJQUFJLENBQUNaLE9BQU8sR0FBR1ksSUFBSSxDQUFDWixPQUFPLEdBQUcsRUFBRTtNQUN6Q2EsTUFBTSxFQUFFRCxJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFRixJQUFJLENBQUNFLFVBQVUsR0FBR0YsSUFBSSxDQUFDRSxVQUFVLEdBQUcsS0FBSztNQUNyREMsV0FBVyxFQUFFSCxJQUFJLENBQUNHLFdBQVcsR0FBR0gsSUFBSSxDQUFDRyxXQUFXLEdBQUcsRUFBRTtNQUNyREMsV0FBVyxFQUFFSixJQUFJLENBQUNJLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSTtNQUN2REMsYUFBYSxFQUFFTCxJQUFJLENBQUNLLGFBQWEsR0FBR0wsSUFBSSxDQUFDSyxhQUFhLEdBQUcsS0FBSztNQUM5REwsSUFBSSxFQUFFQSxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLEdBQUc7S0FDaEI7RUFDbEI7O0FBakVGTSxPQUFBLENBQUFyQixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\response\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\n\ntype DataResponse =\n  | {\n      message: string;\n      code?: number;\n    }\n  | any;\n\nexport class BuildResponse {\n  private static baseResponse(dataResponse: DataResponse) {\n    const {\n      message = \"data has been received!\",\n      code = 200,\n      ...rest\n    } = dataResponse;\n    return {\n      code,\n      message,\n      ...rest,\n    };\n  }\n\n  /**\n   * Response Success\n   */\n\n  public static get(dataResponse: DataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n\n  /**\n   * Response Create\n   */\n  public static created(dataResponse: DataResponse) {\n    return this.baseResponse({\n      codde: 201,\n      message: \"data has beed added\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Update\n   */\n\n  public static updated(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"the data has beed updated\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Delete\n   */\n  public static deleted(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"data has been deleted\",\n      ...dataResponse,\n    });\n  }\n\n  public static appResponse(data: any) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null,\n    } as AppResponse;\n  }\n}\n\n"],"mappings":";;;;;;;;;;;;;;AASA,MAAaA,aAAa;EAChB,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAjEFM,OAAA,CAAArB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830104},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN,\n  JWT_ACCESS_TOKEN_EXPIRED\n} = process.env;\nclass AuthService {\n  // public static generateToken(user: any) {\n  //   const payload = {\n  //     id: user.id,\n  //     email: user.email,\n  //     is_verified: user.is_verified, // Include verification status\n  //   };\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\n  // }\n  static clinicSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getClinicByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const clinicData = {\n          id: userData[0].id,\n          name: userData[0].name,\n          owner_name: userData[0].owner_name,\n          email: userData[0].email,\n          city: userData[0].city,\n          phone: userData[0].phone,\n          state: userData[0].state,\n          zip_code: userData[0].zip_code,\n          country: userData[0].country,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static doctorSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getDoctorByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        // if (!userData || userData.length === 0) {\n        //   throw new ResponseError.NotFound(\n        //     \"Account not found or has been deleted.\"\n        //   );\n        // }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.emailConfirmed) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          first_name: userData[0].name,\n          last_name: userData[0].owner_name,\n          email: userData[0].owner_name\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static patientSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getPatientByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const patientData = {\n          id: userData[0].id,\n          first_name: userData[0].first_name,\n          last_name: userData[0].last_name,\n          email: userData[0].email,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return patientData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  // *****confirmClinicEmail*****\n  static confirmClinicEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n  // *****confirmPatientEmail*****\n  static confirmPatientEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatientVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.AuthService = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiQXV0aFNlcnZpY2UiLCJjbGluaWNTaWduSW4iLCJmb3JtRGF0YSIsInZhbGlkYXRlRGF0YSIsInVzZVZhbGlkYXRpb24iLCJsb2dpblNjaGVtYSIsInVzZXJEYXRhIiwiZ2V0Q2xpbmljQnlQYXNzd29yZCIsImVtYWlsIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJSZXNwb25zZUVycm9yIiwiVW5hdXRob3JpemVkIiwicGxhaW5QYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiaXNNYXRjaCIsImRlZmF1bHQiLCJjb21wYXJlIiwiX2EiLCJzaWdudXBfc3RhdHVzIiwiQmFkUmVxdWVzdCIsIl9iIiwidG9rZW4iLCJzaWduIiwiaWQiLCJleHBpcmVzSW4iLCJjbGluaWNEYXRhIiwibmFtZSIsIm93bmVyX25hbWUiLCJjaXR5IiwicGhvbmUiLCJzdGF0ZSIsInppcF9jb2RlIiwiY291bnRyeSIsImVycm9yIiwiQmFzZVJlc3BvbnNlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJkb2N0b3JTaWduSW4iLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZW1haWxDb25maXJtZWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGF0aWVudFNpZ25JbiIsImdldFBhdGllbnRCeVBhc3N3b3JkIiwicGF0aWVudERhdGEiLCJjb25maXJtQ2xpbmljRW1haWwiLCJkYXRhIiwiZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSIsImNvbmZpcm1QYXRpZW50RW1haWwiLCJnZXRQYXRpZW50VmVyaWZpY2F0aW9uQ29kZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgdXNlVmFsaWRhdGlvbiB9IGZyb20gXCIuLi8uLi9oZWxwZXIvdXNlX3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgSUxvZ2luIH0gZnJvbSBcIi4uLy4uL21vZGVscy9hdXRoXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQge1xyXG4gIGdldENsaW5pY0J5UGFzc3dvcmQsXHJcbiAgZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSxcclxuICBnZXREb2N0b3JCeVBhc3N3b3JkLFxyXG4gIGdldFBhdGllbnRCeVBhc3N3b3JkLFxyXG4gIGdldFBhdGllbnRWZXJpZmljYXRpb25Db2RlLFxyXG59IGZyb20gXCIuL2RiXCI7XHJcbmltcG9ydCB7IGxvZ2luU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hXCI7XHJcbmltcG9ydCB7IElQYXRpZW50IH0gZnJvbSBcIi4uL3BhdGllbnRzL0lQYXRpZW50XCI7XHJcblxyXG5jb25zdCB7XHJcbiAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOLFxyXG4gIEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCxcclxufTogYW55ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5leHBvcnQgY2xhc3MgQXV0aFNlcnZpY2Uge1xyXG4gIC8vIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVUb2tlbih1c2VyOiBhbnkpIHtcclxuICAvLyAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgLy8gICAgIGlkOiB1c2VyLmlkLFxyXG4gIC8vICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAvLyAgICAgaXNfdmVyaWZpZWQ6IHVzZXIuaXNfdmVyaWZpZWQsIC8vIEluY2x1ZGUgdmVyaWZpY2F0aW9uIHN0YXR1c1xyXG4gIC8vICAgfTtcclxuXHJcbiAgLy8gICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgSldUX1JFRlJFU0hfVE9LRU5fRVhQSVJFRCk7XHJcbiAgLy8gfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2xpbmljU2lnbkluKGZvcm1EYXRhOiBJTG9naW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRlRGF0YSA9IHVzZVZhbGlkYXRpb24obG9naW5TY2hlbWEsIGZvcm1EYXRhKTtcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBnZXRDbGluaWNCeVBhc3N3b3JkKFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5lbWFpbCxcclxuICAgICAgICB2YWxpZGF0ZURhdGEucGFzc3dvcmRcclxuICAgICAgKTtcclxuICAgICAgaWYgKCF1c2VyRGF0YSB8fCB1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwbGFpblBhc3N3b3JkID0gdmFsaWRhdGVEYXRhLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHVzZXJEYXRhWzBdLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5QYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFxyXG4gICAgICAgICAgXCJlbWFpbCBvciBwYXNzd3JvZCBpcyBub3QgY29ycmVjdCFcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5zaWdudXBfc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgICB7IGlkOiB1c2VyRGF0YVswXS5pZCwgZW1haWw6IHVzZXJEYXRhWzBdLmVtYWlsIH0sIC8vIFBheWxvYWQgKHVzZXIgaW5mbylcclxuICAgICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgLy8gU2VjcmV0IGtleVxyXG4gICAgICAgIHsgZXhwaXJlc0luOiA2MCB9IC8vIEV4cGlyeSB0aW1lXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNsaW5pY0RhdGEgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIG5hbWU6IHVzZXJEYXRhWzBdLm5hbWUsXHJcbiAgICAgICAgb3duZXJfbmFtZTogdXNlckRhdGFbMF0ub3duZXJfbmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlckRhdGFbMF0uZW1haWwsXHJcbiAgICAgICAgY2l0eTogdXNlckRhdGFbMF0uY2l0eSxcclxuICAgICAgICBwaG9uZTogdXNlckRhdGFbMF0ucGhvbmUsXHJcbiAgICAgICAgc3RhdGU6IHVzZXJEYXRhWzBdLnN0YXRlLFxyXG4gICAgICAgIHppcF9jb2RlOiB1c2VyRGF0YVswXS56aXBfY29kZSxcclxuICAgICAgICBjb3VudHJ5OiB1c2VyRGF0YVswXS5jb3VudHJ5LFxyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIC8vIHJvbGVzOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucm9sZV9uYW1lKS5maWx0ZXIoQm9vbGVhbikpLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgICAgLy8gcGVybWlzc2lvbnM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQoXHJcbiAgICAgICAgLy8gICAgIHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucGVybWlzc2lvbl9uYW1lKS5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgICAvLyAgICksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIGNsaW5pY0RhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXNwb25zZUVycm9yLkJhc2VSZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBlcnJvcjsgLy8gUmUtdGhyb3cga25vd24gZXJyb3JzXHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JTaWduSW4oZm9ybURhdGE6IElMb2dpbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGVEYXRhID0gdXNlVmFsaWRhdGlvbihsb2dpblNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldERvY3RvckJ5UGFzc3dvcmQoXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLmVtYWlsLFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5wYXNzd29yZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKCF1c2VyRGF0YSB8fCB1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAvLyAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFxyXG4gICAgICAvLyAgICAgXCJBY2NvdW50IG5vdCBmb3VuZCBvciBoYXMgYmVlbiBkZWxldGVkLlwiXHJcbiAgICAgIC8vICAgKTtcclxuICAgICAgLy8gfVxyXG4gICAgICBjb25zdCBwbGFpblBhc3N3b3JkID0gdmFsaWRhdGVEYXRhLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHVzZXJEYXRhWzBdLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5QYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFxyXG4gICAgICAgICAgXCJlbWFpbCBvciBwYXNzd3JvZCBpcyBub3QgY29ycmVjdCFcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5lbWFpbENvbmZpcm1lZCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJFbWFpbCBpcyBub3QgY29uZmlybWVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjbGluaWNEYXRhID0ge1xyXG4gICAgICAgIGlkOiB1c2VyRGF0YVswXS5pZCxcclxuICAgICAgICBmaXJzdF9uYW1lOiB1c2VyRGF0YVswXS5uYW1lLFxyXG4gICAgICAgIGxhc3RfbmFtZTogdXNlckRhdGFbMF0ub3duZXJfbmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlckRhdGFbMF0ub3duZXJfbmFtZSxcclxuXHJcbiAgICAgICAgLy8gcm9sZXM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQodXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5yb2xlX25hbWUpLmZpbHRlcihCb29sZWFuKSksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgICAvLyBwZXJtaXNzaW9uczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldChcclxuICAgICAgICAvLyAgICAgdXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5wZXJtaXNzaW9uX25hbWUpLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgIC8vICAgKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gY2xpbmljRGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yOyAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBwYXRpZW50U2lnbkluKGZvcm1EYXRhOiBJTG9naW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRlRGF0YSA9IHVzZVZhbGlkYXRpb24obG9naW5TY2hlbWEsIGZvcm1EYXRhKTtcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBnZXRQYXRpZW50QnlQYXNzd29yZChcclxuICAgICAgICB2YWxpZGF0ZURhdGEuZW1haWwsXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLnBhc3N3b3JkXHJcbiAgICAgICk7XHJcbiAgICAgIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGxhaW5QYXNzd29yZCA9IHZhbGlkYXRlRGF0YS5wYXNzd29yZDtcclxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSB1c2VyRGF0YVswXS5wYXNzd29yZDtcclxuICAgICAgY29uc3QgaXNNYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBsYWluUGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcclxuXHJcbiAgICAgIGlmICghaXNNYXRjaCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcclxuICAgICAgICAgIFwiZW1haWwgb3IgcGFzc3dyb2QgaXMgbm90IGNvcnJlY3QhXCJcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1c2VyRGF0YVswXT8uc2lnbnVwX3N0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJFbWFpbCBpcyBub3QgY29uZmlybWVkLlwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5zaWdudXBfc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXHJcbiAgICAgICAgeyBpZDogdXNlckRhdGFbMF0uaWQsIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCB9LCAvLyBQYXlsb2FkICh1c2VyIGluZm8pXHJcbiAgICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sIC8vIFNlY3JldCBrZXlcclxuICAgICAgICB7IGV4cGlyZXNJbjogNjAgfSAvLyBFeHBpcnkgdGltZVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBwYXRpZW50RGF0YTogYW55ID0ge1xyXG4gICAgICAgIGlkOiB1c2VyRGF0YVswXS5pZCxcclxuICAgICAgICBmaXJzdF9uYW1lOiB1c2VyRGF0YVswXS5maXJzdF9uYW1lLFxyXG4gICAgICAgIGxhc3RfbmFtZTogdXNlckRhdGFbMF0ubGFzdF9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICAvLyByb2xlczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldCh1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnJvbGVfbmFtZSkuZmlsdGVyKEJvb2xlYW4pKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICAgIC8vIHBlcm1pc3Npb25zOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KFxyXG4gICAgICAgIC8vICAgICB1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnBlcm1pc3Npb25fbmFtZSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgLy8gICApLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBwYXRpZW50RGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yOyAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gKioqKipjb25maXJtQ2xpbmljRW1haWwqKioqKlxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29uZmlybUNsaW5pY0VtYWlsKGNsaW5pY0RhdGE6IHtcclxuICAgIGVtYWlsOiBzdHJpbmc7XHJcbiAgICB2ZXJpZnlfY29kZTogc3RyaW5nO1xyXG4gIH0pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlKGNsaW5pY0RhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gKioqKipjb25maXJtUGF0aWVudEVtYWlsKioqKipcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvbmZpcm1QYXRpZW50RW1haWwoY2xpbmljRGF0YToge1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFBhdGllbnRWZXJpZmljYXRpb25Db2RlKGNsaW5pY0RhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxP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RDtRQUNBLE1BQU1FLEtBQUssR0FBR2hDLGNBQUEsQ0FBQTBCLE9BQUcsQ0FBQ08sSUFBSSxDQUNwQjtVQUFFQyxFQUFFLEVBQUVsQixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNrQixFQUFFO1VBQUVoQixLQUFLLEVBQUVGLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0U7UUFBSyxDQUFFO1FBQUU7UUFDbERiLHVCQUF1QjtRQUFFO1FBQ3pCO1VBQUU4QixTQUFTLEVBQUU7UUFBRSxDQUFFLENBQUM7U0FDbkI7UUFDRCxNQUFNbUIsV0FBVyxHQUFRO1VBQ3ZCcEIsRUFBRSxFQUFFbEIsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDa0IsRUFBRTtVQUNsQmdCLFVBQVUsRUFBRWxDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ2tDLFVBQVU7VUFDbENDLFNBQVMsRUFBRW5DLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ21DLFNBQVM7VUFDaENqQyxLQUFLLEVBQUVGLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsS0FBSztVQUN4QmM7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1NBQ0Q7UUFDRCxPQUFPc0IsV0FBVztNQUNwQixDQUFDLENBQUMsT0FBT1YsS0FBSyxFQUFFO1FBQ2QsSUFBSUEsS0FBSyxZQUFZMUMsZ0JBQUEsQ0FBQW1CLGFBQWEsQ0FBQ3dCLFlBQVksRUFBRTtVQUMvQyxPQUFPRCxLQUFLLENBQUMsQ0FBQztRQUNoQjtRQUNBLE1BQU0sSUFBSTFDLGdCQUFBLENBQUFtQixhQUFhLENBQUN5QixjQUFjLENBQUMsK0JBQStCLENBQUM7TUFDekU7SUFDRixDQUFDOztFQUVEO0VBQ08sT0FBYVMsa0JBQWtCQSxDQUFDbkIsVUFHdEM7O01BQ0MsTUFBTW9CLElBQUksR0FBRyxNQUFNLElBQUFyRCxJQUFBLENBQUFzRCx5QkFBeUIsRUFBQ3JCLFVBQVUsQ0FBQztNQUN4RCxJQUFJb0IsSUFBSSxFQUFFO1FBQ1IsT0FBT0EsSUFBSTtNQUNiLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFDRDtFQUNPLE9BQWFFLG1CQUFtQkEsQ0FBQ3RCLFVBR3ZDOztNQUNDLE1BQU1vQixJQUFJLEdBQUcsTUFBTSxJQUFBckQsSUFBQSxDQUFBd0QsMEJBQTBCLEVBQUN2QixVQUFVLENBQUM7TUFDekQsSUFBSW9CLElBQUksRUFBRTtRQUNSLE9BQU9BLElBQUk7TUFDYixDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQXZNSEksT0FBQSxDQUFBbEQsV0FBQSxHQUFBQSxXQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","JWT_ACCESS_TOKEN_EXPIRED","process","env","AuthService","clinicSignIn","formData","validateData","useValidation","loginSchema","userData","getClinicByPassword","email","password","length","ResponseError","Unauthorized","plainPassword","hashedPassword","isMatch","default","compare","_a","signup_status","BadRequest","_b","token","sign","id","expiresIn","clinicData","name","owner_name","city","phone","state","zip_code","country","error","BaseResponse","InternalServer","doctorSignIn","getDoctorByPassword","emailConfirmed","first_name","last_name","patientSignIn","getPatientByPassword","patientData","confirmClinicEmail","data","getClinicVerificationCode","confirmPatientEmail","getPatientVerificationCode","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/service.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ILogin } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  getClinicByPassword,\r\n  getClinicVerificationCode,\r\n  getDoctorByPassword,\r\n  getPatientByPassword,\r\n  getPatientVerificationCode,\r\n} from \"./db\";\r\nimport { loginSchema } from \"./schema\";\r\nimport { IPatient } from \"../patients/IPatient\";\r\n\r\nconst {\r\n  JWT_SECRET_ACCESS_TOKEN,\r\n  JWT_SECRET_REFRESH_TOKEN,\r\n  JWT_ACCESS_TOKEN_EXPIRED,\r\n}: any = process.env;\r\n\r\nexport class AuthService {\r\n  // public static generateToken(user: any) {\r\n  //   const payload = {\r\n  //     id: user.id,\r\n  //     email: user.email,\r\n  //     is_verified: user.is_verified, // Include verification status\r\n  //   };\r\n\r\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\r\n  // }\r\n  public static async clinicSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getClinicByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        name: userData[0].name,\r\n        owner_name: userData[0].owner_name,\r\n        email: userData[0].email,\r\n        city: userData[0].city,\r\n        phone: userData[0].phone,\r\n        state: userData[0].state,\r\n        zip_code: userData[0].zip_code,\r\n        country: userData[0].country,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  public static async doctorSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getDoctorByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      // if (!userData || userData.length === 0) {\r\n      //   throw new ResponseError.NotFound(\r\n      //     \"Account not found or has been deleted.\"\r\n      //   );\r\n      // }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.emailConfirmed === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].name,\r\n        last_name: userData[0].owner_name,\r\n        email: userData[0].owner_name,\r\n\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  public static async patientSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getPatientByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const patientData: any = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].first_name,\r\n        last_name: userData[0].last_name,\r\n        email: userData[0].email,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return patientData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  // *****confirmClinicEmail*****\r\n  public static async confirmClinicEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getClinicVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // *****confirmPatientEmail*****\r\n  public static async confirmPatientEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getPatientVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1739073714792},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev3 = exports.getUniqueCodev2 = void 0;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev2 = getUniqueCodev2;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev3 = getUniqueCodev3;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVbmlxdWVDb2RldjIiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvY29tbW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcbiAqL1xuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYyKGxlbmd0aCA9IDMyKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxuICovXG5mdW5jdGlvbiBnZXRVbmlxdWVDb2RldjMobGVuZ3RoID0gNCkge1xuICAgIGxldCByZXN1bHQgPSAnJ1xuICAgIGNvbnN0IGNoYXJhY3RlcnMgPVxuICAgICAgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSdcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuZXhwb3J0IHtcbiAgICBnZXRVbmlxdWVDb2RldjIsXG4gICAgZ2V0VW5pcXVlQ29kZXYzXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUEsU0FBU0EsZUFBZUEsQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7RUFDbEMsSUFBSUMsTUFBTSxHQUFHLEVBQUU7RUFDZixNQUFNQyxVQUFVLEdBQ2QsZ0VBQWdFO0VBQ2xFLE1BQU1DLGdCQUFnQixHQUFHRCxVQUFVLENBQUNGLE1BQU07RUFDMUMsS0FBSyxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLE1BQU0sRUFBRUksQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUNsQ0gsTUFBTSxJQUFJQyxVQUFVLENBQUNHLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxFQUFFLEdBQUdMLGdCQUFnQixDQUFDLENBQUM7RUFDM0U7RUFDQSxPQUFPRixNQUFNO0FBQ2Y7QUFpQklRLE9BQUEsQ0FBQVYsZUFBQSxHQUFBQSxlQUFBO0FBZko7Ozs7QUFJQSxTQUFTVyxlQUFlQSxDQUFDVixNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZjtBQUdFUSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["getUniqueCodev2","length","result","characters","charactersLength","i","charAt","Math","floor","random","exports","getUniqueCodev3"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/common.ts"],"sourcesContent":["/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n    let result = ''\n    const characters =\n      'abcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i += 1) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\nexport {\n    getUniqueCodev2,\n    getUniqueCodev3\n  }"],"mappings":";;;;;;AAAA;;;;AAIA,SAASA,eAAeA,CAACC,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAiBIQ,OAAA,CAAAV,eAAA,GAAAA,eAAA;AAfJ;;;;AAIA,SAASW,eAAeA,CAACV,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAGEQ,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nconst promises_1 = __importDefault(require(\"fs/promises\"));\nconst {\n  APP_NAME\n} = process.env;\nclass SendMail {\n  constructor(emailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  loadTemplate(templateName, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const templatePath = path_1.default.resolve(__dirname, `../../public/template/email/${templateName}.html`);\n        const html = yield promises_1.default.readFile(templatePath, \"utf8\");\n        const template = handlebars_1.default.compile(html);\n        return template(data);\n      } catch (error) {\n        console.error(`Error loading email template (${templateName}):`, error);\n        throw new response_error_1.ResponseError.NotFound(\"Email template not found\");\n      }\n    });\n  }\n  sendAccountRegister(email, verifyCode) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"emailverify\", {\n          APP_NAME,\n          TOKEN: verifyCode\n        });\n        yield this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending registration email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n  sendForgetPassToken(user, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"register\", {\n          APP_NAME,\n          TOKEN: token\n        });\n        yield this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending password reset email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.default = SendMail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYW5kbGViYXJzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicGF0aF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsInByb21pc2VzXzEiLCJBUFBfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJTZW5kTWFpbCIsImNvbnN0cnVjdG9yIiwiZW1haWxQcm92aWRlciIsImxvYWRUZW1wbGF0ZSIsInRlbXBsYXRlTmFtZSIsImRhdGEiLCJ0ZW1wbGF0ZVBhdGgiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImh0bWwiLCJyZWFkRmlsZSIsInRlbXBsYXRlIiwiY29tcGlsZSIsImVycm9yIiwiY29uc29sZSIsIlJlc3BvbnNlRXJyb3IiLCJOb3RGb3VuZCIsInNlbmRBY2NvdW50UmVnaXN0ZXIiLCJlbWFpbCIsInZlcmlmeUNvZGUiLCJodG1sVG9TZW5kIiwiVE9LRU4iLCJzZW5kIiwiSW50ZXJuYWxTZXJ2ZXIiLCJzZW5kRm9yZ2V0UGFzc1Rva2VuIiwidXNlciIsInRva2VuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL3NlbmRfZW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhbmRsZWJhcnMgZnJvbSBcImhhbmRsZWJhcnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBFbWFpbFByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbmZpZy9lbWFpbFwiO1xuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcblxuY29uc3QgeyBBUFBfTkFNRSB9ID0gcHJvY2Vzcy5lbnY7XG5cbmNsYXNzIFNlbmRNYWlsIHtcbiAgcHJpdmF0ZSBlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyO1xuXG4gIGNvbnN0cnVjdG9yKGVtYWlsUHJvdmlkZXI6IEVtYWlsUHJvdmlkZXIpIHtcbiAgICB0aGlzLmVtYWlsUHJvdmlkZXIgPSBlbWFpbFByb3ZpZGVyO1xuICB9XG4gIHByaXZhdGUgYXN5bmMgbG9hZFRlbXBsYXRlKFxuICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxuICAgIGRhdGE6IG9iamVjdFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBwYXRoLnJlc29sdmUoXG4gICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgYC4uLy4uL3B1YmxpYy90ZW1wbGF0ZS9lbWFpbC8ke3RlbXBsYXRlTmFtZX0uaHRtbGBcbiAgICAgICk7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgZnMucmVhZEZpbGUodGVtcGxhdGVQYXRoLCBcInV0ZjhcIik7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBlbWFpbCB0ZW1wbGF0ZSAoJHt0ZW1wbGF0ZU5hbWV9KTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2VuZEFjY291bnRSZWdpc3RlcihlbWFpbDogc3RyaW5nLCB2ZXJpZnlDb2RlOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaHRtbFRvU2VuZCA9IGF3YWl0IHRoaXMubG9hZFRlbXBsYXRlKFwiZW1haWx2ZXJpZnlcIiwgeyBBUFBfTkFNRSwgVE9LRU46IHZlcmlmeUNvZGUgfSk7XG4gICAgICBhd2FpdCB0aGlzLmVtYWlsUHJvdmlkZXIuc2VuZChlbWFpbCwgXCJBbGkgRG9jdG9yIFJlZ2lzdHJhdGlvblwiLCBodG1sVG9TZW5kKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcmVnaXN0cmF0aW9uIGVtYWlsOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBzZW5kIGVtYWlsXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhOiBhbnkpIHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3QgeyBlbWFpbCwgdmVyaWZ5X2NvZGU6IFRPS0VOIH0gPSBmb3JtRGF0YTtcbiAgLy8gICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaSBEb2N0b3IgUmVnaXN0cmF0aW9uXCI7XG4gIC8vICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgICAgIF9fZGlybmFtZSxcbiAgLy8gICAgICAgXCIuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbFwiXG4gIC8vICAgICApO1xuXG4gIC8vICAgICAvLyBSZWFkIGVtYWlsIHRlbXBsYXRlIHVzaW5nIGFzeW5jL2F3YWl0XG4gIC8vICAgICBjb25zdCBodG1sID0gYXdhaXQgZnMucmVhZEZpbGUodGVtcGxhdGVQYXRoLCBcInV0ZjhcIik7XG4gIC8vICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZSh7IEFQUF9OQU1FLCBUT0tFTiB9KTtcblxuICAvLyAgICAgLy8gU2VuZCBlbWFpbFxuICAvLyAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gQWNjb3VudFJlZ2lzdGVyOlwiLCBlcnJvcik7XG4gIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YVxuICAvLyAgIC8vIGNvbnN0IFRPS0VOID0gZm9ybURhdGEudmVyaWZ5X2NvZGVcbiAgLy8gICAvLyBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgLy8gICBfX2Rpcm5hbWUsXG4gIC8vICAgLy8gICBgLi4vLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL2VtYWlsdmVyaWZ5Lmh0bWxgXG4gIC8vICAgLy8gKVxuXG4gIC8vICAgLy8gY29uc3Qgc3ViamVjdCA9ICdBbGkgRG9jdG9yIFJlZ2lzdHJhdGlvbidcbiAgLy8gICAvLyAvLyBjb25zdCB1cmxUb2tlbiA9IGAke0JBU0VfVVJMX0NMSUVOVH0vZW1haWwvdmVyaWZ5P3Rva2VuPSR7dG9rZW59YFxuICAvLyAgIC8vIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH1cbiAgLy8gICAvLyBjb25zdCBFbWFpbCA9IG5ldyBFbWFpbFByb3ZpZGVyKClcblxuICAvLyAgIC8vIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xuICAvLyAgIC8vICAgaWYgKGVycm9yKSB7XG4gIC8vICAgLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKCdlbWFpbCB0ZW1wbGF0ZSBub3QgZm91bmQnKVxuICAvLyAgIC8vICAgfVxuXG4gIC8vICAgLy8gICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKVxuICAvLyAgIC8vICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSlcblxuICAvLyAgIC8vICAgRW1haWwuc2VuZChlbWFpbCwgc3ViamVjdCwgaHRtbFRvU2VuZClcbiAgLy8gICAvLyB9KVxuICAvLyB9XG5cblxuICBwdWJsaWMgYXN5bmMgc2VuZEZvcmdldFBhc3NUb2tlbih1c2VyOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSBhd2FpdCB0aGlzLmxvYWRUZW1wbGF0ZShcInJlZ2lzdGVyXCIsIHsgQVBQX05BTUUsIFRPS0VOOiB0b2tlbiB9KTtcbiAgICAgIGF3YWl0IHRoaXMuZW1haWxQcm92aWRlci5zZW5kKHVzZXIuZW1haWwsIFwiWW91cnMgRG9jdG9yIFJlZ2lzdHJhdGlvblwiLCBodG1sVG9TZW5kKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcGFzc3dvcmQgcmVzZXQgZW1haWw6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIHNlbmQgZW1haWxcIik7XG4gICAgfVxuICB9XG4gIC8vIHB1YmxpYyBzdGF0aWMgZm9yZ2V0UGFzc1Rva2VuKGZvcm1EYXRhOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gIC8vICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gIC8vICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcbiAgLy8gICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gIC8vICAgICBfX2Rpcm5hbWUsXG4gIC8vICAgICBgLi4vLi4vcHVibGljL3RlbXBsYXRlcy9lbWFpbHMvcmVnaXN0ZXIuaHRtbGBcbiAgLy8gICApO1xuXG4gIC8vICAgY29uc3Qgc3ViamVjdCA9IFwiWW91cnMgRG9jdG9yIFJlZ2lzdGVyYXRpb25cIjtcbiAgLy8gICAvLyBjb25zdCB1cmxUb2tlbiA9IGAke0JBU0VfVVJMX0NMSUVOVH0vZW1haWwvdmVyaWZ5P3Rva2VuPSR7dG9rZW59YFxuICAvLyAgIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH07XG4gIC8vICAgY29uc3QgRW1haWwgPSBuZXcgRW1haWxQcm92aWRlcigpO1xuXG4gIC8vICAgcmVhZEhUTUxGaWxlKHBhdGhUZW1wbGF0ZSwgKGVycm9yOiBFcnJvciwgaHRtbDogYW55KSA9PiB7XG4gIC8vICAgICBpZiAoZXJyb3IpIHtcbiAgLy8gICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJlbWFpbCB0ZW1wbGF0ZSBub3QgZm91bmRcIik7XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIGNvbnN0IHRlbXBsYXRlID0gaGFuZGxlYmFycy5jb21waWxlKGh0bWwpO1xuICAvLyAgICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSk7XG5cbiAgLy8gICAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAvLyAgIH0pO1xuICAvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbmRNYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsWUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFFLGdCQUFBLEdBQUFGLE9BQUE7QUFHQSxNQUFBRyxVQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU07RUFBRUk7QUFBUSxDQUFFLEdBQUdDLE9B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","map":{"version":3,"names":["handlebars_1","__importDefault","require","path_1","response_error_1","promises_1","APP_NAME","process","env","SendMail","constructor","emailProvider","loadTemplate","templateName","data","templatePath","default","resolve","__dirname","html","readFile","template","compile","error","console","ResponseError","NotFound","sendAccountRegister","email","verifyCode","htmlToSend","TOKEN","send","InternalServer","sendForgetPassToken","user","token","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/send_email.ts"],"sourcesContent":["import handlebars from \"handlebars\";\nimport path from \"path\";\nimport { EmailProvider } from \"../config/email\";\nimport { ResponseError } from \"../modules/error/response_error\";\nimport { User } from \"../types/user\";\nimport { readHTMLFile } from \"./file\";\nimport fs from \"fs/promises\";\n\nconst { APP_NAME } = process.env;\n\nclass SendMail {\n  private emailProvider: EmailProvider;\n\n  constructor(emailProvider: EmailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  private async loadTemplate(\n    templateName: string,\n    data: object\n  ): Promise<string> {\n    try {\n      const templatePath = path.resolve(\n        __dirname,\n        `../../public/template/email/${templateName}.html`\n      );\n      const html = await fs.readFile(templatePath, \"utf8\");\n      const template = handlebars.compile(html);\n      return template(data);\n    } catch (error) {\n      console.error(`Error loading email template (${templateName}):`, error);\n      throw new ResponseError.NotFound(\"Email template not found\");\n    }\n  }\n\n  public async sendAccountRegister(email: string, verifyCode: string) {\n    try {\n      const htmlToSend = await this.loadTemplate(\"emailverify\", { APP_NAME, TOKEN: verifyCode });\n      await this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n    } catch (error) {\n      console.error(\"Error sending registration email:\", error);\n      throw new ResponseError.InternalServer(\"Failed to send email\");\n    }\n  }\n\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n\n\n  public async sendForgetPassToken(user: User, token: string) {\n    try {\n      const htmlToSend = await this.loadTemplate(\"register\", { APP_NAME, TOKEN: token });\n      await this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n    } catch (error) {\n      console.error(\"Error sending password reset email:\", error);\n      throw new ResponseError.InternalServer(\"Failed to send email\");\n    }\n  }\n  // public static forgetPassToken(formData: User, token: string) {\n  //   const { email } = formData;\n  //   const TOKEN = token;\n  //   const pathTemplate = path.resolve(\n  //     __dirname,\n  //     `../../public/templates/emails/register.html`\n  //   );\n\n  //   const subject = \"Yours Doctor Registeration\";\n  //   // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   const dataTemplate = { APP_NAME, TOKEN };\n  //   const Email = new EmailProvider();\n\n  //   readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //     if (error) {\n  //       throw new ResponseError.NotFound(\"email template not found\");\n  //     }\n\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template(dataTemplate);\n\n  //     Email.send(email, subject, htmlToSend);\n  //   });\n  // }\n}\n\nexport default SendMail;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,MAAAE,gBAAA,GAAAF,OAAA;AAGA,MAAAG,UAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEA,MAAM;EAAEI;AAAQ,CAAE,GAAGC,OAAO,CAACC,GAAG;AAEhC,MAAMC,QAAQ;EAGZC,YAAYC,aAA4B;IACtC,IAAI,CAACA,aAAa,GAAGA,aAAa;EACpC;EACcC,YAAYA,CACxBC,YAAoB,EACpBC,IAAY;;MAEZ,IAAI;QACF,MAAMC,YAAY,GAAGZ,MAAA,CAAAa,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,+BAA+BL,YAAY,OAAO,CACnD;QACD,MAAMM,IAAI,GAAG,MAAMd,UAAA,CAAAW,OAAE,CAACI,QAAQ,CAACL,YAAY,EAAE,MAAM,CAAC;QACpD,MAAMM,QAAQ,GAAGrB,YAAA,CAAAgB,OAAU,CAACM,OAAO,CAACH,IAAI,CAAC;QACzC,OAAOE,QAAQ,CAACP,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiCV,YAAY,IAAI,EAAEU,KAAK,CAAC;QACvE,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACC,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;IACF,CAAC;;EAEYC,mBAAmBA,CAACC,KAAa,EAAEC,UAAkB;;MAChE,IAAI;QACF,MAAMC,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,aAAa,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEF;QAAU,CAAE,CAAC;QAC1F,MAAM,IAAI,CAAClB,aAAa,CAACqB,IAAI,CAACJ,KAAK,EAAE,yBAAyB,EAAEE,UAAU,CAAC;MAC7E,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAGaC,mBAAmBA,CAACC,IAAU,EAAEC,KAAa;;MACxD,IAAI;QACF,MAAMN,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,UAAU,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEK;QAAK,CAAE,CAAC;QAClF,MAAM,IAAI,CAACzB,aAAa,CAACqB,IAAI,CAACG,IAAI,CAACP,KAAK,EAAE,2BAA2B,EAAEE,UAAU,CAAC;MACpF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;QAC3D,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;;AA2BHI,OAAA,CAAArB,OAAA,GAAeP,QAAQ","ignoreList":[]}},"mtime":1738657937067},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmailProvider = void 0;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst dotenv_1 = __importDefault(require(\"dotenv\"));\ndotenv_1.default.config(); // Load environment variables\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n  /**\n   * Create and configure the mail transporter\n   */\n  createTransporter() {\n    if (isMailgunAPI) {\n      return nodemailer_1.default.createTransport((0, nodemailer_mailgun_transport_1.default)({\n        auth: {\n          api_key: MAILGUN_API_KEY,\n          domain: MAILGUN_DOMAIN\n        }\n      }));\n    }\n    return nodemailer_1.default.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false,\n      // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD\n      }\n    });\n  }\n  /**\n   * Sends an email\n   */\n  send(to, subject, template) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const recipient = Array.isArray(to) ? to.join(\", \") : to;\n        const mailOptions = {\n          from: `${APP_NAME} <${MAIL_USERNAME}>`,\n          to: recipient,\n          subject,\n          html: template\n        };\n        const info = yield this.transporter.sendMail(mailOptions);\n        console.log(\" Email sent successfully:\", info.messageId);\n        return info;\n      } catch (error) {\n        console.error(\" Error sending email:\", error);\n        throw new Error(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.EmailProvider = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwibm9kZW1haWxlcl9tYWlsZ3VuX3RyYW5zcG9ydF8xIiwiZG90ZW52XzEiLCJkZWZhdWx0IiwiY29uZmlnIiwiQVBQX05BTUUiLCJNQUlMX0RSSVZFUiIsIk1BSUxfSE9TVCIsIk1BSUxfUE9SVCIsIk1BSUxfVVNFUk5BTUUiLCJNQUlMX1BBU1NXT1JEIiwiTUFJTF9BVVRIX1RZUEUiLCJNQUlMR1VOX0FQSV9LRVkiLCJNQUlMR1VOX0RPTUFJTiIsIk9BVVRIX0NMSUVOVF9JRCIsIk9BVVRIX0NMSUVOVF9TRUNSRVQiLCJPQVVUSF9SRUZSRVNIX1RPS0VOIiwiT0FVVEhfUkVESVJFQ1RfVVJMIiwicHJvY2VzcyIsImVudiIsImlzTWFpbGd1bkFQSSIsIkJvb2xlYW4iLCJFbWFpbFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiYXV0aCIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsIk51bWJlciIsInNlY3VyZSIsInVzZXIiLCJwYXNzIiwic2VuZCIsInRvIiwic3ViamVjdCIsInRlbXBsYXRlIiwicmVjaXBpZW50IiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIm1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJpbmZvIiwic2VuZE1haWwiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZUlkIiwiZXJyb3IiLCJFcnJvciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25maWdcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbmZpZy9lbWFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcblxuZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuXG5jb25zdCB7XG4gIEFQUF9OQU1FLFxuICBNQUlMX0RSSVZFUixcbiAgTUFJTF9IT1NULFxuICBNQUlMX1BPUlQsXG4gIE1BSUxfVVNFUk5BTUUsXG4gIE1BSUxfUEFTU1dPUkQsXG4gIE1BSUxfQVVUSF9UWVBFLFxuICBNQUlMR1VOX0FQSV9LRVksXG4gIE1BSUxHVU5fRE9NQUlOLFxuICBPQVVUSF9DTElFTlRfSUQsXG4gIE9BVVRIX0NMSUVOVF9TRUNSRVQsXG4gIE9BVVRIX1JFRlJFU0hfVE9LRU4sXG4gIE9BVVRIX1JFRElSRUNUX1VSTCxcbn0gPSBwcm9jZXNzLmVudjtcblxuY29uc3QgaXNNYWlsZ3VuQVBJID0gQm9vbGVhbihNQUlMR1VOX0FQSV9LRVkgJiYgTUFJTEdVTl9ET01BSU4pO1xuXG5leHBvcnQgY2xhc3MgRW1haWxQcm92aWRlciB7XG4gIHByaXZhdGUgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50cmFuc3BvcnRlciA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0ZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgbWFpbCB0cmFuc3BvcnRlclxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRlcigpOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyIHtcbiAgICBpZiAoaXNNYWlsZ3VuQVBJKSB7XG4gICAgICByZXR1cm4gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoXG4gICAgICAgIG1nKHtcbiAgICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICBhcGlfa2V5OiBNQUlMR1VOX0FQSV9LRVkhLFxuICAgICAgICAgICAgZG9tYWluOiBNQUlMR1VOX0RPTUFJTiEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgIGhvc3Q6IE1BSUxfSE9TVCxcbiAgICAgIHBvcnQ6IE51bWJlcihNQUlMX1BPUlQpLFxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gU2V0IGB0cnVlYCBmb3IgcG9ydCA0NjUgKFNTTClcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogTUFJTF9VU0VSTkFNRSxcbiAgICAgICAgcGFzczogTUFJTF9QQVNTV09SRCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYW4gZW1haWxcbiAgICovXG4gIHB1YmxpYyBhc3luYyBzZW5kKHRvOiBzdHJpbmcgfCBzdHJpbmdbXSwgc3ViamVjdDogc3RyaW5nLCB0ZW1wbGF0ZTogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IEFycmF5LmlzQXJyYXkodG8pID8gdG8uam9pbihcIiwgXCIpIDogdG87XG4gICAgICBjb25zdCBtYWlsT3B0aW9uczogbm9kZW1haWxlci5TZW5kTWFpbE9wdGlvbnMgPSB7XG4gICAgICAgIGZyb206IGAke0FQUF9OQU1FfSA8JHtNQUlMX1VTRVJOQU1FfT5gLFxuICAgICAgICB0bzogcmVjaXBpZW50LFxuICAgICAgICBzdWJqZWN0LFxuICAgICAgICBodG1sOiB0ZW1wbGF0ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5OlwiLCBpbmZvLm1lc3NhZ2VJZCk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBzZW5kaW5nIGVtYWlsOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxZQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLDhCQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUFFLFFBQUEsQ0FBQUMsT0FBTSxDQUFDQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBRWpCLE1BQU07RUFDSkMsUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLFNBQVM7RUFDVEMsU0FBUztFQUNUQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxtQkFBbUI7RUFDbkJDLG1CQUFtQjtFQUNuQkM7QUFBa0IsQ0FDbkIsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWYsTUFBTUMsWUFBWSxHQUFHQyxPQUFPLENBQUNULGVBQWUsSUFBSUMsY0FBYyxDQUFDO0FBRS9ELE1BQWFTLGFBQWE7RUFHeEJDLFlBQUE7SUFDRSxJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixFQUFFO0VBQzdDO0VBRUE7OztFQUdRQSxpQkFBaUJBLENBQUE7SUFDdkIsSUFBSUwsWUFBWSxFQUFFO01BQ2hCLE9BQU90QixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FDL0IsSUFBQXpCLDhCQUFBLENBQUFFLE9BQUUsRUFBQztRQUNEd0IsSUFBSSxFQUFFO1VBQ0pDLE9BQU8sRUFBRWhCLGVBQWdCO1VBQ3pCaUIsTUFBTSxFQUFFaEI7O09BRVgsQ0FBQyxDQUNIO0lBQ0g7SUFFQSxPQUFPZixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FBQztNQUNoQ0ksSUFBSSxFQUFFdkIsU0FBUztNQUNmd0IsSUFBSSxFQUFFQyxNQUFNLENBQUN4QixTQUFTLENBQUM7TUFDdkJ5QixNQUFNLEVBQUUsS0FBSztNQUFFO01BQ2ZOLElBQUksRUFBRTtRQUNKTyxJQUFJLEVBQUV6QixhQUFhO1FBQ25CMEIsSUFBSSxFQUFFekI7O0tBRVQsQ0FBQztFQUNKO0VBRUE7OztFQUdhMEIsSUFBSUEsQ0FBQ0MsRUFBcUIsRUFBRUMsT0FBZSxFQUFFQyxRQUFnQjs7TUFDeEUsSUFBSTtRQUNGLE1BQU1DLFNBQVMsR0FBR0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLEVBQUUsQ0FBQyxHQUFHQSxFQUFFLENBQUNNLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR04sRUFBRTtRQUN4RCxNQUFNTyxXQUFXLEdBQStCO1VBQzlDQyxJQUFJLEVBQUUsR0FBR3hDLFFBQVEsS0FBS0ksYUFBYSxHQUFHO1VBQ3RDNEIsRUFBRSxFQUFFRyxTQUFTO1VBQ2JGLE9BQU87VUFDUFEsSUFBSSxFQUFFUDtTQUNQO1FBRUQsTUFBTVEsSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDdkIsV0FBVyxDQUFDd0IsUUFBUSxDQUFDSixXQUFXLENBQUM7UUFDekRLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFSCxJQUFJLENBQUNJLFNBQVMsQ0FBQztRQUN6RCxPQUFPSixJQUFJO01BQ2IsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtRQUNkSCxPQUFPLENBQUNHLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO1FBQzlDLE1BQU0sSUFBSUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BQ3pDO0lBQ0YsQ0FBQzs7O0FBckRIQyxPQUFBLENBQUFoQyxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["nodemailer_1","__importDefault","require","nodemailer_mailgun_transport_1","dotenv_1","default","config","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","Boolean","EmailProvider","constructor","transporter","createTransporter","createTransport","auth","api_key","domain","host","port","Number","secure","user","pass","send","to","subject","template","recipient","Array","isArray","join","mailOptions","from","html","info","sendMail","console","log","messageId","error","Error","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\config\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/config/email.ts"],"sourcesContent":["import _ from \"lodash\";\nimport nodemailer from \"nodemailer\";\nimport mg from \"nodemailer-mailgun-transport\";\nimport dotenv from \"dotenv\";\n\ndotenv.config(); // Load environment variables\n\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL,\n} = process.env;\n\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\n\nexport class EmailProvider {\n  private transporter: nodemailer.Transporter;\n\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n\n  /**\n   * Create and configure the mail transporter\n   */\n  private createTransporter(): nodemailer.Transporter {\n    if (isMailgunAPI) {\n      return nodemailer.createTransport(\n        mg({\n          auth: {\n            api_key: MAILGUN_API_KEY!,\n            domain: MAILGUN_DOMAIN!,\n          },\n        })\n      );\n    }\n\n    return nodemailer.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false, // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD,\n      },\n    });\n  }\n\n  /**\n   * Sends an email\n   */\n  public async send(to: string | string[], subject: string, template: string) {\n    try {\n      const recipient = Array.isArray(to) ? to.join(\", \") : to;\n      const mailOptions: nodemailer.SendMailOptions = {\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\n        to: recipient,\n        subject,\n        html: template,\n      };\n\n      const info = await this.transporter.sendMail(mailOptions);\n      console.log(\" Email sent successfully:\", info.messageId);\n      return info;\n    } catch (error) {\n      console.error(\" Error sending email:\", error);\n      throw new Error(\"Failed to send email\");\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,8BAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAC,OAAM,CAACC,MAAM,EAAE,CAAC,CAAC;AAEjB,MAAM;EACJC,QAAQ;EACRC,WAAW;EACXC,SAAS;EACTC,SAAS;EACTC,aAAa;EACbC,aAAa;EACbC,cAAc;EACdC,eAAe;EACfC,cAAc;EACdC,eAAe;EACfC,mBAAmB;EACnBC,mBAAmB;EACnBC;AAAkB,CACnB,GAAGC,OAAO,CAACC,GAAG;AAEf,MAAMC,YAAY,GAAGC,OAAO,CAACT,eAAe,IAAIC,cAAc,CAAC;AAE/D,MAAaS,aAAa;EAGxBC,YAAA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,iBAAiB,EAAE;EAC7C;EAEA;;;EAGQA,iBAAiBA,CAAA;IACvB,IAAIL,YAAY,EAAE;MAChB,OAAOtB,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAC/B,IAAAzB,8BAAA,CAAAE,OAAE,EAAC;QACDwB,IAAI,EAAE;UACJC,OAAO,EAAEhB,eAAgB;UACzBiB,MAAM,EAAEhB;;OAEX,CAAC,CACH;IACH;IAEA,OAAOf,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAAC;MAChCI,IAAI,EAAEvB,SAAS;MACfwB,IAAI,EAAEC,MAAM,CAACxB,SAAS,CAAC;MACvByB,MAAM,EAAE,KAAK;MAAE;MACfN,IAAI,EAAE;QACJO,IAAI,EAAEzB,aAAa;QACnB0B,IAAI,EAAEzB;;KAET,CAAC;EACJ;EAEA;;;EAGa0B,IAAIA,CAACC,EAAqB,EAAEC,OAAe,EAAEC,QAAgB;;MACxE,IAAI;QACF,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,IAAI,CAAC,IAAI,CAAC,GAAGN,EAAE;QACxD,MAAMO,WAAW,GAA+B;UAC9CC,IAAI,EAAE,GAAGxC,QAAQ,KAAKI,aAAa,GAAG;UACtC4B,EAAE,EAAEG,SAAS;UACbF,OAAO;UACPQ,IAAI,EAAEP;SACP;QAED,MAAMQ,IAAI,GAAG,MAAM,IAAI,CAACvB,WAAW,CAACwB,QAAQ,CAACJ,WAAW,CAAC;QACzDK,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAACI,SAAS,CAAC;QACzD,OAAOJ,IAAI;MACb,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MACzC;IACF,CAAC;;;AArDHC,OAAA,CAAAhC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1738383138790},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\file.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteUserPic = exports.readHTMLFile = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path, callback) {\n  fs_1.default.readFile(path, {\n    encoding: \"utf-8\"\n  }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nexports.readHTMLFile = readHTMLFile;\nfunction deleteUserPic(userId) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs_1.default.existsSync(path)) {\n    fs_1.default.unlinkSync(path);\n  }\n}\nexports.deleteUserPic = deleteUserPic;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInJlYWRIVE1MRmlsZSIsInBhdGgiLCJjYWxsYmFjayIsImRlZmF1bHQiLCJyZWFkRmlsZSIsImVuY29kaW5nIiwiZXJyIiwiaHRtbCIsImV4cG9ydHMiLCJkZWxldGVVc2VyUGljIiwidXNlcklkIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci9maWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHBhdGggLSBwYXRoIGZpbGUgdGVtcGxhdGUgaHRtbFxuICogQHBhcmFtIGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHJlYWRIVE1MRmlsZShwYXRoOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgZnMucmVhZEZpbGUocGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sIGZ1bmN0aW9uIChlcnIsIGh0bWwpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsLCBodG1sKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlVXNlclBpYyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBwYXRoID0gYHB1YmxpYy9wcm9kdWN0cy8ke3VzZXJJZH0uanBnYDtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aCkpIHtcbiAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xuICB9XG59XG5leHBvcnQgeyByZWFkSFRNTEZpbGUsIGRlbGV0ZVVzZXJQaWMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBOzs7OztBQUtBLFNBQVNDLFlBQVlBLENBQUNDLElBQVMsRUFBRUMsUUFBYTtFQUM1Q0wsSUFBQSxDQUFBTSxPQUFFLENBQUNDLFFBQVEsQ0FBQ0gsSUFBSSxFQUFFO0lBQUVJLFFBQVEsRUFBRTtFQUFPLENBQUUsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLElBQUk7SUFDMUQsSUFBSUQsR0FBRyxFQUFFO01BQ1BKLFFBQVEsQ0FBQ0ksR0FBRyxDQUFDO0lBQ2YsQ0FBQyxNQUFNO01BQ0xKLFFBQVEsQ0FBQyxJQUFJLEVBQUVLLElBQUksQ0FBQztJQUN0QjtFQUNGLENBQUMsQ0FBQztBQUNKO0FBT1NDLE9BQUEsQ0FBQVIsWUFBQSxHQUFBQSxZQUFBO0FBTlQsU0FBU1MsYUFBYUEsQ0FBQ0MsTUFBYztFQUNuQyxNQUFNVCxJQUFJLEdBQUcsbUJBQW1CUyxNQUFNLE1BQU07RUFDNUMsSUFBSWIsSUFBQSxDQUFBTSxPQUFFLENBQUNRLFVBQVUsQ0FBQ1YsSUFBSSxDQUFDLEVBQUU7SUFDdkJKLElBQUEsQ0FBQU0sT0FBRSxDQUFDUyxVQUFVLENBQUNYLElBQUksQ0FBQztFQUNyQjtBQUNGO0FBQ3VCTyxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["fs_1","__importDefault","require","readHTMLFile","path","callback","default","readFile","encoding","err","html","exports","deleteUserPic","userId","existsSync","unlinkSync"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/file.ts"],"sourcesContent":["import fs from \"fs\";\n\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path: any, callback: any) {\n  fs.readFile(path, { encoding: \"utf-8\" }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nfunction deleteUserPic(userId: string) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs.existsSync(path)) {\n    fs.unlinkSync(path);\n  }\n}\nexport { readHTMLFile, deleteUserPic };\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA;;;;;AAKA,SAASC,YAAYA,CAACC,IAAS,EAAEC,QAAa;EAC5CL,IAAA,CAAAM,OAAE,CAACC,QAAQ,CAACH,IAAI,EAAE;IAAEI,QAAQ,EAAE;EAAO,CAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI;IAC1D,IAAID,GAAG,EAAE;MACPJ,QAAQ,CAACI,GAAG,CAAC;IACf,CAAC,MAAM;MACLJ,QAAQ,CAAC,IAAI,EAAEK,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;AACJ;AAOSC,OAAA,CAAAR,YAAA,GAAAA,YAAA;AANT,SAASS,aAAaA,CAACC,MAAc;EACnC,MAAMT,IAAI,GAAG,mBAAmBS,MAAM,MAAM;EAC5C,IAAIb,IAAA,CAAAM,OAAE,CAACQ,UAAU,CAACV,IAAI,CAAC,EAAE;IACvBJ,IAAA,CAAAM,OAAE,CAACS,UAAU,CAACX,IAAI,CAAC;EACrB;AACF;AACuBO,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nconst base_response_1 = require(\"./base_response\");\nconst internal_server_1 = require(\"./internal_server\");\nconst unauthorized_1 = require(\"./unauthorized\");\nconst forbidden_1 = require(\"./forbidden\");\nconst not_found_1 = require(\"./not_found\");\nconst bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiZXhwb3J0cyIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tICcuL2Jhc2VfcmVzcG9uc2UnO1xuaW1wb3J0IHtJbnRlcm5hbFNlcnZlcn0gZnJvbSAnLi9pbnRlcm5hbF9zZXJ2ZXInO1xuaW1wb3J0IHtVbmF1dGhvcml6ZWR9IGZyb20gJy4vdW5hdXRob3JpemVkJztcbmltcG9ydCB7Rm9yYmlkZGVufSBmcm9tICcuL2ZvcmJpZGRlbic7XG5pbXBvcnQge05vdEZvdW5kfSBmcm9tICcuL25vdF9mb3VuZCc7XG5pbXBvcnQge0JhZFJlcXVlc3R9IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xuXG5leHBvcnQgY29uc3QgUmVzcG9uc2VFcnJvciA9IHtcbiAgICBCYXNlUmVzcG9uc2UsXG4gICAgQmFkUmVxdWVzdCxcbiAgICBOb3RGb3VuZCxcbiAgICBGb3JiaWRkZW4sXG4gICAgVW5hdXRob3JpemVkLFxuICAgIEludGVybmFsU2VydmVyLFxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGlCQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxXQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFFYU0sT0FBQSxDQUFBQyxhQUFhLEdBQUc7RUFDekJDLFlBQVksRUFBWlQsZUFBQSxDQUFBUyxZQUFZO0VBQ1pDLFVBQVUsRUFBVkosYUFBQSxDQUFBSSxVQUFVO0VBQ1ZDLFFBQVEsRUFBUk4sV0FBQSxDQUFBTSxRQUFRO0VBQ1JDLFNBQVMsRUFBVFIsV0FBQSxDQUFBUSxTQUFTO0VBQ1RDLFlBQVksRUFBWlYsY0FBQSxDQUFBVSxZQUFZO0VBQ1pDLGNBQWMsRUFBZFosaUJBQUEsQ0FBQVk7Q0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","exports","ResponseError","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/response_error.ts"],"sourcesContent":["import {BaseResponse} from './base_response';\nimport {InternalServer} from './internal_server';\nimport {Unauthorized} from './unauthorized';\nimport {Forbidden} from './forbidden';\nimport {NotFound} from './not_found';\nimport {BadRequest} from './bad_request';\n\nexport const ResponseError = {\n    BaseResponse,\n    BadRequest,\n    NotFound,\n    Forbidden,\n    Unauthorized,\n    InternalServer,\n}\n\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,aAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,aAAa,GAAG;EACzBC,YAAY,EAAZT,eAAA,CAAAS,YAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAI,UAAU;EACVC,QAAQ,EAARN,WAAA,CAAAM,QAAQ;EACRC,SAAS,EAATR,WAAA,CAAAQ,SAAS;EACTC,YAAY,EAAZV,cAAA,CAAAU,YAAY;EACZC,cAAc,EAAdZ,iBAAA,CAAAY;CACH","ignoreList":[]}},"mtime":1725611830108},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nclass BaseResponse extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJuZXciLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvYmFzZV9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQmFzZVJlc3BvbnNlIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLmNvZGUgPSBzdGF0dXNDb2RlO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBYUEsWUFBYSxTQUFRQyxLQUFLO0VBR3JDQyxZQUFZQyxPQUFlLEVBQUVDLFVBQWtCO0lBQzdDLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDQSxPQUFPLEdBQUdBLE9BQU87SUFDdEIsSUFBSSxDQUFDRSxJQUFJLEdBQUdELFVBQVU7SUFDdEJFLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUMsR0FBRyxDQUFDQyxNQUFNLENBQUNDLFNBQVMsQ0FBQztFQUNuRDs7QUFSRkMsT0FBQSxDQUFBWCxZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BaseResponse","Error","constructor","message","statusCode","code","Object","setPrototypeOf","new","target","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/base_response.ts"],"sourcesContent":["export class BaseResponse extends Error {\n  public code: number;\n\n  constructor(message: string, statusCode: number) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAaA,YAAa,SAAQC,KAAK;EAGrCC,YAAYC,OAAe,EAAEC,UAAkB;IAC7C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,IAAI,GAAGD,UAAU;IACtBE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEC,GAAG,CAACC,MAAM,CAACC,SAAS,CAAC;EACnD;;AARFC,OAAA,CAAAX,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1738401089752},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass InternalServer extends base_response_1.BaseResponse {\n  constructor(message = \"Internal server error\") {\n    super(message, 500);\n  }\n}\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvaW50ZXJuYWxfc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIikge1xuICAgICAgc3VwZXIobWVzc2FnZSwgNTAwKTtcbiAgICB9XG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGNBQWUsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzVDQyxZQUFZQyxPQUFPLEdBQUcsdUJBQXVCO0lBQzNDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFISkMsT0FBQSxDQUFBSixjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","InternalServer","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/internal_server.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class InternalServer extends BaseResponse {\n    constructor(message = \"Internal server error\") {\n      super(message, 500);\n    }\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,cAAe,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,uBAAuB;IAC3C,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Unauthorized extends base_response_1.BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3VuYXV0aG9yaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUmVzcG9uc2UgfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWQgZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJVbmF1dGhvcml6ZWQgYWNjZXNzXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDEpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFlBQWEsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzVDQyxZQUFZQyxPQUFPLEdBQUcscUJBQXFCO0lBQ3pDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFIRkMsT0FBQSxDQUFBSixZQUFBLEdBQUFBLFlBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Unauthorized","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class Unauthorized extends BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,YAAa,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,qBAAqB;IACzC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Forbidden extends base_response_1.BaseResponse {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2ZvcmJpZGRlbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Jhc2VSZXNwb25zZX0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiXG5cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc3NhZ2UsIDQwMylcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsU0FBVSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdkNDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFKSkMsT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Forbidden","BaseResponse","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/forbidden.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\n\nexport class Forbidden extends BaseResponse {\n    constructor(messsage: string) {\n        super(messsage, 403)\n        Object.setPrototypeOf(this, Forbidden.prototype);\n    }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,SAAU,SAAQF,eAAA,CAAAG,YAAY;EACvCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAJJC,OAAA,CAAAP,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1724460922119},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass NotFound extends base_response_1.BaseResponse {\n  constructor(message = \"Not found\") {\n    super(message, 404);\n  }\n}\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3Ivbm90X2ZvdW5kLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJOb3QgZm91bmRcIikge1xuICAgICAgc3VwZXIobWVzc2FnZSwgNDA0KTtcbiAgICB9XG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFFBQVMsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQ3RDQyxZQUFZQyxPQUFPLEdBQUcsV0FBVztJQUMvQixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEpDLE9BQUEsQ0FBQUosUUFBQSxHQUFBQSxRQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","NotFound","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/not_found.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class NotFound extends BaseResponse {\n    constructor(message = \"Not found\") {\n      super(message, 404);\n    }\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,QAAS,SAAQF,eAAA,CAAAG,YAAY;EACtCC,YAAYC,OAAO,GAAG,WAAW;IAC/B,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,QAAA,GAAAA,QAAA","ignoreList":[]}},"mtime":1738397043196},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass BadRequest extends base_response_1.BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsIkJhc2VSZXNwb25zZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9iYWRfcmVxdWVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUmVzcG9uc2UgfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiQmFkIHJlcXVlc3RcIikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwMCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsVUFBVyxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDMUNDLFlBQVlDLE9BQU8sR0FBRyxhQUFhO0lBQ2pDLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFIRkMsT0FBQSxDQUFBSixVQUFBLEdBQUFBLFVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","BadRequest","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/modules/error/bad_request.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\n\nexport class BadRequest extends BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,UAAW,SAAQF,eAAA,CAAAG,YAAY;EAC1CC,YAAYC,OAAO,GAAG,aAAa;IACjC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,UAAA,GAAAA,UAAA","ignoreList":[]}},"mtime":1738396936529},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useValidation = void 0;\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\nexports.useValidation = useValidation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VWYWxpZGF0aW9uIiwic2NoZW1hIiwidmFsdWUiLCJvcHRpb25zIiwidmFsaWRhdGVTeW5jIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJvcnRFYXJseSIsInN0cmlwVW5rbm93biIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci91c2VfdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IFNjaGVtYSwgVmFsaWRhdGVPcHRpb25zIH0gZnJvbSAneXVwJ1xuXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWYWxpZGF0aW9uPFQ+KFxuICBzY2hlbWE6IFNjaGVtYTxUPixcbiAgdmFsdWU6IFQgfCBhbnksXG4gIG9wdGlvbnM/OiBWYWxpZGF0ZU9wdGlvbnNcbik6IFQge1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZSwge1xuICAgIGFib3J0RWFybHk6IGZhbHNlLFxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcbiAgICAuLi5vcHRpb25zLFxuICB9KVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLFNBQWdCQSxhQUFhQSxDQUMzQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0o7QUFWQU0sT0FBQSxDQUFBVCxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/use_validation.ts"],"sourcesContent":["\nimport { Schema, ValidateOptions } from 'yup'\n\n\nexport function useValidation<T>(\n  schema: Schema<T>,\n  value: T | any,\n  options?: ValidateOptions\n): T {\n  return schema.validateSync(value, {\n    abortEarly: false,\n    stripUnknown: true,\n    ...options,\n  })\n}\n\n"],"mappings":";;;;;;AAIA,SAAgBA,aAAaA,CAC3BC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ;AAVAM,OAAA,CAAAT,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1725611830110},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loginSchema = exports.registerSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerSchema = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nexports.loginSchema = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJ1c2VyTmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0b2tlblZlcmlmeSIsIm51bGxhYmxlIiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB5dXAgZnJvbSAneXVwJztcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICB1c2VyTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCd1c2VyTmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoJ2ludmFsaWQgZW1haWwnKS5yZXF1aXJlZCgnZW1haWwgaXMgcmVxdWlyZWQnKSxcbiAgICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgcGFzc3dvcmQ6IHl1cC5zdHJpbmcoKS5taW4oOCwgJ2F0IGxlYXN0IDggY2hhcmVjdGVycycpXG4gICAgICAgIC5vbmVPZihbeXVwLnJlZignY29uZmlybVBhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpLFxuICAgIGNvbmZpcm1QYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKCdwYXNzd29yZCcpXSwgJ3Bhc3N3b3JkIGFyZSBub3QgdGhlIHNhbWUnKVxufSk7XG5cbmV4cG9ydCAgY29uc3QgbG9naW5TY2hlbWEgPSB5dXAub2JqZWN0KClcbiAgICAuc2hhcGUoe1xuICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdlbWFpbCBpcyByZXF1aXJlZCcpLFxuICAgICAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdwYXNzd29yZCBpcyByZXF1aXJlZCcpLFxuICAgIH0pLnJlcXVpcmVkKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGNBQWMsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzdDQyxRQUFRLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQztFQUN2REMsS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RUUsV0FBVyxFQUFFWCxHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDSSxRQUFRLEVBQUU7RUFDcENDLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ00sR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUNqREMsS0FBSyxDQUFDLENBQUNmLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDckVDLGVBQWUsRUFBRWpCLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDeERDLEtBQUssQ0FBQyxDQUFDZixHQUFHLENBQUNnQixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSwyQkFBMkI7Q0FDaEUsQ0FBQztBQUVZYixPQUFBLENBQUFlLFdBQVcsR0FBR2xCLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQ25DQyxLQUFLLENBQUM7RUFDSEksS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDakRJLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQjtDQUN6RCxDQUFDLENBQUNBLFFBQVEsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerSchema","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","loginSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\n\nexport const registerSchema = yup.object().shape({\n    userName: yup.string().required('userName is required'),\n    email: yup.string().email('invalid email').required('email is required'),\n    tokenVerify: yup.string().nullable(),\n    password: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('password')], 'password are not the same')\n});\n\nexport  const loginSchema = yup.object()\n    .shape({\n        email: yup.string().required('email is required'),\n        password: yup.string().required('password is required'),\n    }).required();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,cAAc,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,QAAQ,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvDC,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxEE,WAAW,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEYb,OAAA,CAAAe,WAAW,GAAGlB,GAAG,CAACK,MAAM,EAAE,CACnCC,KAAK,CAAC;EACHI,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE","ignoreList":[]}},"mtime":1730104515985},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst common_1 = require(\"../../helper/common\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getUserInfo)(email);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      // SendMail.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getNewPassword = yield (0, db_1.comparePassword)(formData.email);\n      const pass = getNewPassword[0].password;\n      const getComparePassword = yield bcrypt_1.default.compare(formData.oldPassword, pass);\n      if (getComparePassword) {\n        const getNewPassword = yield (0, db_1.changePassword)(formData);\n        return getNewPassword;\n      }\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfileuser(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.tokenVerify = tokenVerify;\n      const result = yield (0, db_1.updateProfileUser)(userData);\n      if (!result) {\n        throw new response_error_1.ResponseError.BadRequest(\"Can Not Update profile...\");\n      } else {\n        return result;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.ResponseError.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.useValidation)(schema_1.checkEmailSchema, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.UserService = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJjb21tb25fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsImRhdGEiLCJtZXNzYWdlIiwidmFsaWRhdGVVc2VyRW1haWwiLCJjaGVja1VzZXJFeGlzdCIsImxlbmd0aCIsImdldFZlcmlmeUNvZGUiLCJ1c2VyRGF0YSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiY2hhbmdlUGFzc3dvcmQiLCJmb3JtRGF0YSIsImdldE5ld1Bhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkIiwicGFzcyIsInBhc3N3b3JkIiwiZ2V0Q29tcGFyZVBhc3N3b3JkIiwiY29tcGFyZSIsIm9sZFBhc3N3b3JkIiwidXBkYXRlUHJvZmlsZXVzZXIiLCJnZW5lcmF0ZVRva2VuIiwiY29kZSIsImdldFVuaXF1ZUNvZGV2MiIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInVwZGF0ZVByb2ZpbGVVc2VyIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJjaGVja05pY2tOYW1lIiwibmlja05hbWUiLCJnZXREYXRhIiwic2VuZEZyb2dldFBhc3N3b3JkVG9rZW4iLCJ1c2VWYWxpZGF0aW9uIiwiY2hlY2tFbWFpbFNjaGVtYSIsImN1cnJlbnRVc2VyIiwic3RhdHVzIiwiZW1haWxDb25maXJtZWQiLCJzaWdudXBTdGF0dXMiLCJpc0FjdGl2ZSIsIm5ld0NvZGUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImlkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHVzZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zZXJjdmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcbmltcG9ydCB7IHVzZVZhbGlkYXRpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVyL3VzZV92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHtcclxuICBjaGFuZ2VQYXNzd29yZCxcclxuICBjaGVja05pY2tOYW1lLFxyXG4gIGNoZWNrVXNlckV4aXN0LFxyXG4gIGNvbXBhcmVQYXNzd29yZCxcclxuICBnZXRPVFAsXHJcbiAgZ2V0VXNlckluZm8sXHJcbiAgdXBkYXRlUHJvZmlsZVVzZXIsXHJcbiAgdXBkYXRlVXNlclZlcmlmeUNvZGVcclxufSBmcm9tIFwiLi9kYlwiO1xyXG5pbXBvcnQgeyBjaGVja0VtYWlsU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hXCI7XHJcblxyXG5jb25zdCB7IEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLCBKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4gfTogYW55ID0gcHJvY2Vzcy5lbnY7XHJcbmNvbnN0IEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCA9IHByb2Nlc3MuZW52LkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCB8fCBcIjFkXCI7IC8vIDEgRGF5c1xyXG5cclxuY29uc3QgZXhwaXJlc0luID0gbXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDA7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlclNlcnZpY2Uge1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJJbmZvKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRVc2VySW5mbyhlbWFpbCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHZhbGlkYXRlVXNlckVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1VzZXJFeGlzdChlbWFpbCk7XHJcblxyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBkYXRhWzBdIGFzIFVzZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBmb3JtRGF0YVxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFZlcmlmeUNvZGUodXNlckRhdGE6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gICAgLy8gY29uc3QgdXNlckRhdGEgPSB1c2VWYWxpZGF0aW9uKHNjaGVtYVVzZXIuY29uZmlybUVtYWlsLHVzZXJEYXRhKVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0T1RQKHVzZXJEYXRhLCB0b2tlblZlcmlmeSk7XHJcbiAgICAvLyBTZW5kTWFpbC5BY2NvdW50UmVnaXN0ZXIocmVzdWx0KTtcclxuXHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YTogVXNlcikge1xyXG4gICAgY29uc3QgZ2V0TmV3UGFzc3dvcmQgPSBhd2FpdCBjb21wYXJlUGFzc3dvcmQoZm9ybURhdGEuZW1haWwpO1xyXG4gICAgY29uc3QgcGFzcyA9IGdldE5ld1Bhc3N3b3JkWzBdLnBhc3N3b3JkO1xyXG4gICAgY29uc3QgZ2V0Q29tcGFyZVBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoZm9ybURhdGEub2xkUGFzc3dvcmQsIHBhc3MpO1xyXG5cclxuICAgIGlmIChnZXRDb21wYXJlUGFzc3dvcmQpIHtcclxuICAgICAgY29uc3QgZ2V0TmV3UGFzc3dvcmQgPSBhd2FpdCBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YSk7XHJcbiAgICAgIHJldHVybiBnZXROZXdQYXNzd29yZDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHVzZXJEYXRhXHJcbiAgICovXHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUHJvZmlsZXVzZXIodXNlckRhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdlbmVyYXRlVG9rZW4gPSB7XHJcbiAgICAgIGNvZGU6IGdldFVuaXF1ZUNvZGV2MigpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlbmVyYXRlVG9rZW4pKSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHtcclxuICAgICAgICBleHBpcmVzSW4sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdXNlckRhdGEudmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIHVzZXJEYXRhLnRva2VuVmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlVXNlcih1c2VyRGF0YSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiQ2FuIE5vdCBVcGRhdGUgcHJvZmlsZS4uLlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrTmlja05hbWUobmlja05hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgZ2V0RGF0YSA9IGF3YWl0IGNoZWNrTmlja05hbWUoKTtcclxuICAgIGlmIChnZXREYXRhWzBdLm5pY2tOYW1lID09PSBuaWNrTmFtZSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIG5pY2tOYW1lIGlzIGFscmVheSBleGlzdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHVzZVZhbGlkYXRpb24oY2hlY2tFbWFpbFNjaGVtYSwgeyBlbWFpbDogZW1haWwgfSk7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnZhbGlkYXRlVXNlckVtYWlsKGVtYWlsKTtcclxuICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybiB7IHN0YXR1czogMSwgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgdmFsaWQgIVwiIH07XHJcblxyXG4gICAgaWYgKGN1cnJlbnRVc2VyLmVtYWlsQ29uZmlybWVkID09PSAwKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN0YXR1czogMixcclxuICAgICAgICBtZXNzYWdlOiBcInRoaXMgZW1haWwgYWRkcmVzcyBpcyBub3QgY29uZmlybWVkIHlldCAhXCIsXHJcbiAgICAgIH07XHJcbiAgICBpZiAoY3VycmVudFVzZXIuc2lnbnVwU3RhdHVzID09PSAwKVxyXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDMsIG1lc3NhZ2U6IFwic2lnbnVwIHByb2Nlc3MgaXMgbm90IGNvbXBsZXRlIHlldCAhXCIgfTtcclxuICAgIC8vIFRPRE8gZm9yIGZpeCBpc0FjdGl2ZSB0byBib29sZWFuXHJcbiAgICBpZiAoY3VycmVudFVzZXIuaXNBY3RpdmUgPT09IDApXHJcbiAgICAgIHJldHVybiB7IHN0YXR1czogNCwgbWVzc2FnZTogXCJ0aGlzIGFjY291bnQgaXMgbm90IGFjdGl2ZSAhXCIgfTtcclxuICAgIGNvbnN0IG5ld0NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGF3YWl0IHVwZGF0ZVVzZXJWZXJpZnlDb2RlKGN1cnJlbnRVc2VyLmlkLCBuZXdDb2RlKTtcclxuICAgIC8vIHNlbmQgZm9yZ290IHBhc3MgdG9rZW4gY29kZVxyXG4gICAgLy8gU2VuZE1haWwuc2VuZFJlc2V0UGFzc3dvcmRFbWFpbChjdXJyZW50VXNlciwgbmV3Q29kZSk7XHJcbiAgICByZXR1cm4geyBzdGF0dXM6IDUsIG1lc3NhZ2U6IFwiY29kZSBoYXMgYmVlbiBz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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","common_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","data","message","validateUserEmail","checkUserExist","length","getVerifyCode","userData","tokenVerify","result","getOTP","changePassword","formData","getNewPassword","comparePassword","pass","password","getComparePassword","compare","oldPassword","updateProfileuser","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","updateProfileUser","ResponseError","BadRequest","checkNickName","nickName","getData","sendFrogetPasswordToken","useValidation","checkEmailSchema","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/sercvice.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { User } from \"../../types/user\";\r\nimport {\r\n  changePassword,\r\n  checkNickName,\r\n  checkUserExist,\r\n  comparePassword,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfileUser,\r\n  updateUserVerifyCode\r\n} from \"./db\";\r\nimport { checkEmailSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class UserService {\r\n\r\n  public static async getUserInfo(email: string) {\r\n    const data = await getUserInfo(email);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    // SendMail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(formData: User) {\r\n    const getNewPassword = await comparePassword(formData.email);\r\n    const pass = getNewPassword[0].password;\r\n    const getComparePassword = await bcrypt.compare(formData.oldPassword, pass);\r\n\r\n    if (getComparePassword) {\r\n      const getNewPassword = await changePassword(formData);\r\n      return getNewPassword;\r\n    }\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n\r\n  public static async updateProfileuser(userData: User) {\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.tokenVerify = tokenVerify;\r\n    const result = await updateProfileUser(userData);\r\n    if (!result) {\r\n      throw new ResponseError.BadRequest(\"Can Not Update profile...\");\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(checkEmailSchema, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738657967050},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUser = createUser;\nexports.getUserByGoogleId = getUserByGoogleId;\nexports.getAdmins = getAdmins;\nexports.getNavItems = getNavItems;\nexports.getAppointment = getAppointment;\nexports.updateAppointment = updateAppointment;\nexports.deleteAppointment = deleteAppointment;\nexports.getPatients = getPatients;\nexports.patientDetail = patientDetail;\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nexports.addPatient = addPatient;\nexports.deletePatient = deletePatient;\nexports.updatePatient = updatePatient;\nexports.getMedicine = getMedicine;\nexports.getDisease = getDisease;\nexports.getDiseaseSubcategories = getDiseaseSubcategories;\nexports.updateIsFavorite = updateIsFavorite;\nexports.addPrescriptionMedicine = addPrescriptionMedicine;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = require(\"../controller/user/schema\");\nconst mysql_1 = require(\"./mysql\");\nconst schema_2 = require(\"../controller/patients/schema\");\nconst response_error_1 = require(\"../modules/error/response_error\");\n// ****** Auth ******\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.createSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [data.firstName, data.lastName, data.userName, data.email, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nfunction getUserByGoogleId(googleId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`\n    SELECT * FROM${mysql_1.coreSchema}.users\n    WHERE google_id=?`, {\n      values: [googleId]\n    });\n    if (user.length < 1) return null;else return user[0];\n  });\n}\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const getManu = yield (0, mysql_1.query)(`SELECT \n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\n      FROM ${mysql_1.coreSchema}.menu m\n      LEFT JOIN ${mysql_1.coreSchema}.submenu s ON m.id = s.menu_id\n    ORDER BY m.id, s.id`);\n      const menuMap = new Map();\n      const iconMap = {\n        \"Appointments\": \"appointment-icon\",\n        \"Dashboard\": \"dashboard-icon\",\n        \"Doctors\": \"doctor-icon\",\n        \"Services\": \"services-icon\",\n        \"Patients\": \"patient-icon\",\n        \"Prescriptions\": \"prescriptions-icon\",\n        \"Billing & Payments\": \"billing-icon\",\n        \"Reports & Analytics\": \"report-icon\",\n        \"Settings\": \"settings-icon\",\n        \"Staff Management\": \"staff-icon\",\n        \"Inventory\": \"inventory-icon\"\n      };\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            id: row.menu_id,\n            icon: iconMap[row.menu_name] || 'default-icon',\n            name: row.menu_name,\n            path: row.menu_path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            id: row.submenu_id,\n            name: row.submenu_name,\n            path: row.submenu_url,\n            icon: row.submenu_icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (e) {\n      console.log(e);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction getAppointment() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getEventData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.appointments`);\n    return getEventData;\n  });\n}\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.appointments\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`, {\n      values: [data.date, new Date(), data.event_id]\n    });\n    if (result) {\n      return result;\n    }\n  });\n}\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\n// ****** Patients ******\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT * FROM ${mysql_1.coreSchema}.patients\n  `);\n    return patients;\n  });\n}\nfunction patientDetail(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nfunction addPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_2.patientSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.first_name, data.last_name, data.phone, data.email, hashedPassword, data.token_verify, data.verify_code, new Date(), new Date()]\n    });\n    return result;\n  });\n}\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET patientName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.patientName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nfunction getMedicine() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.medications\n    `);\n    return result;\n  });\n}\nfunction getDisease() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases`);\n    return result;\n  });\n}\nfunction getDiseaseSubcategories(disease_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases d \n      LEFT JOIN ${mysql_1.coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\n    WHERE d.disease_id = ?`, {\n      values: [disease_id]\n    });\n    return result;\n  });\n}\nfunction updateIsFavorite(medication_id, isFavorite) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`, {\n      values: [isFavorite, medication_id]\n    });\n    return result;\n  });\n}\nfunction addPrescriptionMedicine(formData, medicine_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    INSERT INTO ${mysql_1.coreSchema}.prescription_medicine\n     (\n      id,\n      medicine_id,\n      prescribed_date\n    ) VALUES (?, ?, ?)\n    `, {\n      values: [formData.id, medicine_id, formData.prescribed_date]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY3JlYXRlVXNlciIsImdldFVzZXJCeUdvb2dsZUlkIiwiZ2V0QWRtaW5zIiwiZ2V0TmF2SXRlbXMiLCJnZXRBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZGVsZXRlQXBwb2ludG1lbnQiLCJnZXRQYXRpZW50cyIsInBhdGllbnREZXRhaWwiLCJjaGVja1Bob25lTnVtYmVyRXhpc3RzIiwiYWRkUGF0aWVudCIsImRlbGV0ZVBhdGllbnQiLCJ1cGRhdGVQYXRpZW50IiwiZ2V0TWVkaWNpbmUiLCJnZXREaXNlYXNlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJzY2hlbWFfMSIsIm15c3FsXzEiLCJzY2hlbWFfMiIsInJlc3BvbnNlX2Vycm9yXzEiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImNyZWF0ZVNjaGVtYSIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJkZWZhdWx0IiwiaGFzaFN5bmMiLCJuZXdJZCIsInY0IiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwidmFsdWVzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ1c2VyTmFtZSIsImVtYWlsIiwidmVyaWZ5X2NvZGUiLCJEYXRlIiwidG9rZW5WZXJpZnkiLCJnb29nbGVJZCIsInVzZXIiLCJsZW5ndGgiLCJ1c2VyQWRtaW4iLCJnZXRNYW51IiwibWVudU1hcCIsIk1hcCIsImljb25NYXAiLCJmb3JFYWNoIiwicm93IiwibWVudUlkIiwibWVudV9pZCIsImhhcyIsInNldCIsImlkIiwiaWNvbiIsIm1lbnVfbmFtZSIsIm5hbWUiLCJwYXRoIiwibWVudV9wYXRoIiwic3VibWVudXMiLCJzdWJtZW51X2lkIiwic3VibWVudSIsInN1Ym1lbnVfbmFtZSIsInN1Ym1lbnVfdXJsIiwic3VibWVudV9pY29uIiwiX2EiLCJnZXQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJSZXNwb25zZUVycm9yIiwiSW50ZXJuYWxTZXJ2ZXIiLCJnZXRFdmVudERhdGEiLCJkYXRlIiwiZXZlbnRfaWQiLCJwYXRpZW50cyIsIm1vYmlsZSIsInBhdGllbnRTY2hlbWEiLCJoYXNoZWRQYXNzd29yZCIsImVycm9yIiwiVW5hdXRob3JpemVkIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInBob25lIiwidG9rZW5fdmVyaWZ5IiwicGF0aWVudERhdGEiLCJwYXRpZW50TmFtZSIsImdlbmRlciIsImRhdGVPZkJpcnRoIiwiYWdlIiwiYmxvb2RQcmVzc3VyZSIsImluanVyeSIsImJsb29kR3JvdXAiLCJhZGRyZXNzIiwiZGlzZWFzZV9pZCIsIm1lZGljYXRpb25faWQiLCJpc0Zhdm9yaXRlIiwiZm9ybURhdGEiLCJtZWRpY2luZV9pZCIsInByZXNjcmliZWRfZGF0ZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvYmluL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgeyBjcmVhdGVTY2hlbWEgfSBmcm9tIFwiLi4vY29udHJvbGxlci91c2VyL3NjaGVtYVwiO1xyXG5pbXBvcnQgeyBBZG1pbkRUTyB9IGZyb20gXCIuLi9tb2RlbHMvYWRtaW5cIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuaW1wb3J0IHsgUHJlc2NyaXB0aW9uTWVkaWNpbmUgfSBmcm9tIFwiLi4vbW9kZWxzL3ByZXNjcmlwdGlvbl9tZWRpY2luZVwiO1xyXG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IE1lbnUsIFN1Ym1lbnUgfSBmcm9tIFwiLi4vdHlwZXMvbmF2SXRlbVwiO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHsgUm93RGF0YVBhY2tldCwgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi9teXNxbFwiO1xyXG5pbXBvcnQgeyBwYXRpZW50U2NoZW1hIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXIvcGF0aWVudHMvc2NoZW1hXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5cclxuLy8gKioqKioqIEF1dGggKioqKioqXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihkYXRhOiBDcmVhdGVVc2VyKSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGNyZWF0ZVNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaCA9IGJjcnlwdC5oYXNoU3luYyh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAoZmlyc3ROYW1lLGxhc3ROYW1lLHVzZXJOYW1lLGVtYWlsLHBhc3N3b3JkLHNpZ251cFN0YXR1cyx2ZXJpZnlfY29kZSxjcmVhdGVkQXQsdXBkYXRlZEF0LHRva2VuVmVyaWZ5KVxyXG4gICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBkYXRhLnVzZXJOYW1lLFxyXG4gICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgaGFzaCxcclxuICAgICAgICAwLFxyXG4gICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGRhdGEudG9rZW5WZXJpZnksXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5R29vZ2xlSWQoZ29vZ2xlSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUICogRlJPTSR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGdvb2dsZV9pZD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZ29vZ2xlSWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHVzZXIubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XHJcbiAgZWxzZSByZXR1cm4gdXNlclswXSBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWRtaW5zKCkge1xyXG4gIGNvbnN0IHVzZXJBZG1pbiA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmFkbWluXHJcbiAgICBgKTtcclxuICByZXR1cm4gdXNlckFkbWluIGFzIEFkbWluRFRPW107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZ2V0TWFudSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgXHJcbiAgICAgIG0uaWQgQVMgbWVudV9pZCwgbS5uYW1lIEFTIG1lbnVfbmFtZSwgbS5pY29uIEFTIG1lbnVfaWNvbiwgbS5yb3V0ZSBBUyBtZW51X3BhdGgsXHJcbiAgICAgIHMuaWQgQVMgc3VibWVudV9pZCwgcy5uYW1lIEFTIHN1Ym1lbnVfbmFtZSwgcy5yb3V0ZSBBUyBzdWJtZW51X3VybFxyXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0ubWVudSBtXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnN1Ym1lbnUgcyBPTiBtLmlkID0gcy5tZW51X2lkXHJcbiAgICBPUkRFUiBCWSBtLmlkLCBzLmlkYFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBtZW51TWFwID0gbmV3IE1hcDxudW1iZXIsIE1lbnU+KCk7XHJcblxyXG4gICAgY29uc3QgaWNvbk1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICAgXCJBcHBvaW50bWVudHNcIjogXCJhcHBvaW50bWVudC1pY29uXCIsXHJcbiAgICAgIFwiRGFzaGJvYXJkXCI6IFwiZGFzaGJvYXJkLWljb25cIixcclxuICAgICAgXCJEb2N0b3JzXCI6IFwiZG9jdG9yLWljb25cIixcclxuICAgICAgXCJTZXJ2aWNlc1wiOiBcInNlcnZpY2VzLWljb25cIixcclxuICAgICAgXCJQYXRpZW50c1wiOiBcInBhdGllbnQtaWNvblwiLFxyXG4gICAgICBcIlByZXNjcmlwdGlvbnNcIjogXCJwcmVzY3JpcHRpb25zLWljb25cIixcclxuICAgICAgXCJCaWxsaW5nICYgUGF5bWVudHNcIjogXCJiaWxsaW5nLWljb25cIixcclxuICAgICAgXCJSZXBvcnRzICYgQW5hbHl0aWNzXCI6IFwicmVwb3J0LWljb25cIixcclxuICAgICAgXCJTZXR0aW5nc1wiOiBcInNldHRpbmdzLWljb25cIixcclxuICAgICAgXCJTdGFmZiBNYW5hZ2VtZW50XCI6IFwic3RhZmYtaWNvblwiLFxyXG4gICAgICBcIkludmVudG9yeVwiOiBcImludmVudG9yeS1pY29uXCIsXHJcbiAgICB9O1xyXG4gICAgZ2V0TWFudS5mb3JFYWNoKChyb3cpID0+IHtcclxuICAgICAgY29uc3QgbWVudUlkID0gcm93Lm1lbnVfaWQ7XHJcbiAgICAgIGlmICghbWVudU1hcC5oYXMobWVudUlkKSkge1xyXG4gICAgICAgIG1lbnVNYXAuc2V0KG1lbnVJZCwge1xyXG4gICAgICAgICAgaWQ6IHJvdy5tZW51X2lkLFxyXG4gICAgICAgICAgaWNvbjogaWNvbk1hcFtyb3cubWVudV9uYW1lXSB8fCAnZGVmYXVsdC1pY29uJyxcclxuICAgICAgICAgIG5hbWU6IHJvdy5tZW51X25hbWUsXHJcbiAgICAgICAgICBwYXRoOiByb3cubWVudV9wYXRoLFxyXG4gICAgICAgICAgc3VibWVudXM6IFtdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyb3cuc3VibWVudV9pZCkge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnU6IFN1Ym1lbnUgPSB7XHJcbiAgICAgICAgICBpZDogcm93LnN1Ym1lbnVfaWQsXHJcbiAgICAgICAgICBuYW1lOiByb3cuc3VibWVudV9uYW1lLFxyXG4gICAgICAgICAgcGF0aDogcm93LnN1Ym1lbnVfdXJsLFxyXG4gICAgICAgICAgaWNvbjogcm93LnN1Ym1lbnVfaWNvbixcclxuICAgICAgICB9O1xyXG4gICAgICAgIG1lbnVNYXAuZ2V0KG1lbnVJZCk/LnN1Ym1lbnVzLnB1c2goc3VibWVudSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20obWVudU1hcC52YWx1ZXMoKSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwb2ludG1lbnQoKSB7XHJcbiAgY29uc3QgZ2V0RXZlbnREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzYFxyXG4gICk7XHJcbiAgcmV0dXJuIGdldEV2ZW50RGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50KFxyXG4gIGRhdGE6IElBcHBvaW50bWVudFxyXG4pOiBQcm9taXNlPElBcHBvaW50bWVudFtdIHwgdW5kZWZpbmVkPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5hcHBvaW50bWVudHNcclxuICAgIFNFVCBkYXRlID0gPywgdXBkYXRlZF9hdCA9ID9cclxuICAgIFdIRVJFIGV2ZW50X2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZGF0ZSwgbmV3IERhdGUoKSwgZGF0YS5ldmVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAocmVzdWx0KSB7XHJcbiAgICByZXR1cm4gcmVzdWx0IGFzIElBcHBvaW50bWVudFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KGV2ZW50X2lkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0uY2FsZW5kYXJfZXZlbnRzXHJcbiAgICAgIFdIRVJFIGV2ZW50X2lkPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtldmVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbi8vICoqKioqKiBQYXRpZW50cyAqKioqKipcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnRzKCkge1xyXG4gIGNvbnN0IHBhdGllbnRzID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHBhdGllbnRzO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXRpZW50RGV0YWlsKGlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgV0hFUkUgaWQ9P2AsXHJcbiAgICB7IHZhbHVlczogW2lkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KGRhdGE6IFBhdGllbnREVE8pIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gcGF0aWVudFNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiUGFzc3dvcmQgaXMgaW52YWxpZFwiKTtcclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRcclxuICAgICAgKGlkLGZpcnN0X25hbWUsbGFzdF9uYW1lLHBob25lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXHJcbiAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgZGF0YS5maXJzdF9uYW1lLFxyXG4gICAgICAgIGRhdGEubGFzdF9uYW1lLFxyXG4gICAgICAgIGRhdGEucGhvbmUsXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBhdGllbnQoaWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudHNcclxuICAgIFdIRVJFIGlkID0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGF0aWVudChwYXRpZW50RGF0YTogUGF0aWVudERUTyk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICAgIFNFVCBwYXRpZW50TmFtZSA9ID8sXHJcbiAgICAgICAgICBnZW5kZXIgPSA/LFxyXG4gICAgICAgICAgbW9iaWxlID0gPyxcclxuICAgICAgICAgIGRhdGVPZkJpcnRoID0gPyxcclxuICAgICAgICAgIGFnZSA9ID8sXHJcbiAgICAgICAgICBlbWFpbCA9ID8sXHJcbiAgICAgICAgICBibG9vZFByZXNzdXJlID0gPyxcclxuICAgICAgICAgIGluanVyeSA9ID8sXHJcbiAgICAgICAgICBibG9vZEdyb3VwID0gPyxcclxuICAgICAgICAgIGFkZHJlc3MgPSA/XHJcbiAgICAgIFdIRVJFIGlkID0gP1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtcclxuICAgICAgICBwYXRpZW50RGF0YS5wYXRpZW50TmFtZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5nZW5kZXIsXHJcbiAgICAgICAgcGF0aWVudERhdGEubW9iaWxlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmRhdGVPZkJpcnRoLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFnZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5lbWFpbCxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZFByZXNzdXJlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmluanVyeSxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZEdyb3VwLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFkZHJlc3MsXHJcbiAgICAgICAgcGF0aWVudERhdGEuaWQsXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWVkaWNpbmUoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0ubWVkaWNhdGlvbnNcclxuICAgIGApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREaXNlYXNlKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmRpc2Vhc2VzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmRpc2Vhc2VzIGQgXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LmRpc2Vhc2Vfc3ViY2F0ZWdvcmllcyBkcyBPTiBkLmRpc2Vhc2VfaWQgPSBkcy5kaXNlYXNlX2lkXHJcbiAgICBXSEVSRSBkLmRpc2Vhc2VfaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGlzZWFzZV9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSXNGYXZvcml0ZShcclxuICBtZWRpY2F0aW9uX2lkOiBzdHJpbmcsXHJcbiAgaXNGYXZvcml0ZTogYm9vbGVhblxyXG4pIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBVUERBVEUgICR7Y29yZVNjaGVtYX0ubWVkaWNhdGlvbnMgU0VUIGlzRmF2b3JpdGUgPSA/IFdIRVJFIG1lZGljYXRpb25faWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaXNGYXZvcml0ZSwgbWVkaWNhdGlvbl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUoXHJcbiAgZm9ybURhdGE6IFByZXNjcmlwdGlvbk1lZGljaW5lLFxyXG4gIG1lZGljaW5lX2lkOiBudW1iZXJcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5wcmVzY3JpcHRpb25fbWVkaWNpbmVcclxuICAgICAoXHJcbiAgICAgIGlkLFxyXG4gICAgICBtZWRpY2luZV9pZCxcclxuICAgICAgcHJlc2NyaWJlZF9kYXRlXHJcbiAgICApIFZBTFVFUyAoPywgPywgPylcclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2Zvcm1EYXRhLmlkLCBtZWRpY2luZV9pZCwgZm9ybURhdGEucHJlc2NyaWJlZF9kYXRlXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUFBLE9BQUEsQ0FBQUMsVUFBQSxHQUFBQSxVQUFBO0FBa0NBRCxPQUFBLENBQUFFLGlCQUFBLEdBQUFBLGlCQUFBO0FBYUFGLE9BQUEsQ0FBQUcsU0FBQSxHQUFBQSxTQUFBO0FBT0FILE9BQUEsQ0FBQUksV0FBQSxHQUFBQSxXQUFBO0FBc0RBSixPQUFBLENBQUFLLGNBQUEsR0FBQUEsY0FBQTtBQU9BTCxPQUFBLENBQUFNLGlCQUFBLEdBQUFBLGlCQUFBO0FBZ0JBTixPQUFBLENBQUFPLGlCQUFBLEdBQUFBLGlCQUFBO0FBV0FQLE9BQUEsQ0FBQVEsV0FBQSxHQUFBQSxXQUFBO0FBTUFSLE9BQUEsQ0FBQVMsYUFBQSxHQUFBQSxhQUFBO0FBUUFULE9BQUEsQ0FBQVUsc0JBQUEsR0FBQUEsc0JBQUE7QUFZQVYsT0FBQSxDQUFBVyxVQUFBLEdBQUFBLFVBQUE7QUFvQ0FYLE9BQUEsQ0FBQVksYUFBQSxHQUFBQSxhQUFBO0FBVUFaLE9BQUEsQ0FBQWEsYUFBQSxHQUFBQSxhQUFBO0FBbUNBYixPQUFBLENBQUFjLFdBQUEsR0FBQUEsV0FBQTtBQU9BZCxPQUFBLENBQUFlLFVBQUEsR0FBQUEsVUFBQTtBQU9BZixPQUFBLENBQUFnQix1QkFBQSxHQUFBQSx1QkFBQTtB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RUFDdEJQLFdBQVcsQ0FBQ1EsT0FBTyxFQUNuQlIsV0FBVyxDQUFDbkMsRUFBRTtLQUVqQixDQUNGO0lBQ0QsT0FBT3pCLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCMUIsV0FBV0EsQ0FBQTs7SUFDL0IsTUFBTTBCLE1BQU0sR0FBRyxNQUFNLElBQUFoQixPQUFBLENBQUFpQixLQUFLLEVBQWtCO29CQUMxQmpCLE9BQUEsQ0FBQWtCLFVBQVU7S0FDekIsQ0FBQztJQUNKLE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCekIsVUFBVUEsQ0FBQTs7SUFDOUIsTUFBTXlCLE1BQU0sR0FBRyxNQUFNLElBQUFoQixPQUFBLENBQUFpQixLQUFLLEVBQ3hCLGlCQUFpQmpCLE9BQUEsQ0FBQWtCLFVBQVUsV0FBVyxDQUN2QztJQUNELE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUVELFNBQXNCeEIsdUJBQXVCQSxDQUFDNkYsVUFBa0I7O0lBQzlELE1BQU1yRSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QixpQkFBaUJqQixPQUFBLENBQUFrQixVQUFVO2tCQUNibEIsT0FBQSxDQUFBa0IsVUFBVTsyQkFDRCxFQUN2QjtNQUNFQyxNQUFNLEVBQUUsQ0FBQ2tFLFVBQVU7S0FDcEIsQ0FDRjtJQUNELE9BQU9yRSxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQnZCLGdCQUFnQkEsQ0FDcEM2RixhQUFxQixFQUNyQkMsVUFBbUI7O0lBRW5CLE1BQU12RSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QixXQUFXakIsT0FBQSxDQUFBa0IsVUFBVSx5REFBeUQsRUFDOUU7TUFDRUMsTUFBTSxFQUFFLENBQUNvRSxVQUFVLEVBQUVELGFBQWE7S0FDbkMsQ0FDRjtJQUNELE9BQU90RSxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQnRCLHVCQUF1QkEsQ0FDM0M4RixRQUE4QixFQUM5QkMsV0FBbUI7O0lBRW5CLE1BQU16RSxNQUFNLEdBQUcsTUFBTSxJQUFBaEIsT0FBQSxDQUFBaUIsS0FBSyxFQUN4QjtrQkFDY2pCLE9BQUEsQ0FBQWtCLFVBQVU7Ozs7OztLQU12QixFQUNEO01BQ0VDLE1BQU0sRUFBRSxDQUFDcUUsUUFBUSxDQUFDL0MsRUFBRSxFQUFFZ0QsV0FBVyxFQUFFRCxRQUFRLENBQUNFLGVBQWU7S0FDNUQsQ0FDRjtJQUNELE9BQU8xRSxNQUFNO0VBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","createUser","getUserByGoogleId","getAdmins","getNavItems","getAppointment","updateAppointment","deleteAppointment","getPatients","patientDetail","checkPhoneNumberExists","addPatient","deletePatient","updatePatient","getMedicine","getDisease","getDiseaseSubcategories","updateIsFavorite","addPrescriptionMedicine","bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","schema_2","response_error_1","data","password","confirmPassword","fdPassword","validPassword","createSchema","validateSyncAt","saltRounds","hash","default","hashSync","newId","v4","result","query","coreSchema","values","firstName","lastName","userName","email","verify_code","Date","tokenVerify","googleId","user","length","userAdmin","getManu","menuMap","Map","iconMap","forEach","row","menuId","menu_id","has","set","id","icon","menu_name","name","path","menu_path","submenus","submenu_id","submenu","submenu_name","submenu_url","submenu_icon","_a","get","push","Array","from","e","console","log","ResponseError","InternalServer","getEventData","date","event_id","patients","mobile","patientSchema","hashedPassword","error","Unauthorized","first_name","last_name","phone","token_verify","patientData","patientName","gender","dateOfBirth","age","bloodPressure","injury","bloodGroup","address","disease_id","medication_id","isFavorite","formData","medicine_id","prescribed_date"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { createSchema } from \"../controller/user/schema\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { PrescriptionMedicine } from \"../models/prescription_medicine\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { patientSchema } from \"../controller/patients/schema\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\n\r\n// ****** Auth ******\r\n\r\nexport async function createUser(data: CreateUser) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = createSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.userName,\r\n        data.email,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getUserByGoogleId(googleId: string) {\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM${coreSchema}.users\r\n    WHERE google_id=?`,\r\n    {\r\n      values: [googleId],\r\n    }\r\n  );\r\n  if (user.length < 1) return null;\r\n  else return user[0] as User;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getNavItems() {\r\n  try {\r\n    const getManu = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\r\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\r\n      FROM ${coreSchema}.menu m\r\n      LEFT JOIN ${coreSchema}.submenu s ON m.id = s.menu_id\r\n    ORDER BY m.id, s.id`\r\n    );\r\n\r\n    const menuMap = new Map<number, Menu>();\r\n\r\n    const iconMap: { [key: string]: string } = {\r\n      \"Appointments\": \"appointment-icon\",\r\n      \"Dashboard\": \"dashboard-icon\",\r\n      \"Doctors\": \"doctor-icon\",\r\n      \"Services\": \"services-icon\",\r\n      \"Patients\": \"patient-icon\",\r\n      \"Prescriptions\": \"prescriptions-icon\",\r\n      \"Billing & Payments\": \"billing-icon\",\r\n      \"Reports & Analytics\": \"report-icon\",\r\n      \"Settings\": \"settings-icon\",\r\n      \"Staff Management\": \"staff-icon\",\r\n      \"Inventory\": \"inventory-icon\",\r\n    };\r\n    getManu.forEach((row) => {\r\n      const menuId = row.menu_id;\r\n      if (!menuMap.has(menuId)) {\r\n        menuMap.set(menuId, {\r\n          id: row.menu_id,\r\n          icon: iconMap[row.menu_name] || 'default-icon',\r\n          name: row.menu_name,\r\n          path: row.menu_path,\r\n          submenus: [],\r\n        });\r\n      }\r\n      if (row.submenu_id) {\r\n        const submenu: Submenu = {\r\n          id: row.submenu_id,\r\n          name: row.submenu_name,\r\n          path: row.submenu_url,\r\n          icon: row.submenu_icon,\r\n        };\r\n        menuMap.get(menuId)?.submenus.push(submenu);\r\n      }\r\n    });\r\n    return Array.from(menuMap.values());\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\")\r\n  }\r\n}\r\n\r\nexport async function getAppointment() {\r\n  const getEventData = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.appointments`\r\n  );\r\n  return getEventData;\r\n}\r\n\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n): Promise<IAppointment[] | undefined> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `UPDATE ${coreSchema}.appointments\r\n    SET date = ?, updated_at = ?\r\n    WHERE event_id = ?`,\r\n    {\r\n      values: [data.date, new Date(), data.event_id],\r\n    }\r\n  );\r\n  if (result) {\r\n    return result as IAppointment[];\r\n  }\r\n}\r\n\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n// ****** Patients ******\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT * FROM ${coreSchema}.patients\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(id: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [id] }\r\n  );\r\n  return result;\r\n}\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addPatient(data: PatientDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = patientSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.patient\r\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.first_name,\r\n        data.last_name,\r\n        data.phone,\r\n        data.email,\r\n        hashedPassword,\r\n        data.token_verify,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET patientName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.patientName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getMedicine() {\r\n  const result = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.medications\r\n    `);\r\n  return result;\r\n}\r\n\r\nexport async function getDisease() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getDiseaseSubcategories(disease_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases d \r\n      LEFT JOIN ${coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\r\n    WHERE d.disease_id = ?`,\r\n    {\r\n      values: [disease_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateIsFavorite(\r\n  medication_id: string,\r\n  isFavorite: boolean\r\n) {\r\n  const result = await query<RowDataPacket>(\r\n    `UPDATE  ${coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`,\r\n    {\r\n      values: [isFavorite, medication_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function addPrescriptionMedicine(\r\n  formData: PrescriptionMedicine,\r\n  medicine_id: number\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    INSERT INTO ${coreSchema}.prescription_medicine\r\n     (\r\n      id,\r\n      medicine_id,\r\n      prescribed_date\r\n    ) VALUES (?, ?, ?)\r\n    `,\r\n    {\r\n      values: [formData.id, medicine_id, formData.prescribed_date],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738836836397},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.query = exports.mysql = exports.pool = exports.coreSchema = void 0;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\nexports.query = query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJleHBvcnRzIiwiY29uZmlnIiwiY29yZVNjaGVtYSIsInByb2Nlc3MiLCJlbnYiLCJEQl9EQVRBQkFTRSIsInBvb2wiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInF1ZXJ5Iiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvYmluL215c3FsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgeyBSZXN1bHRTZXRIZWFkZXIsIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcbmltcG9ydCB7IFBvb2xDb25uZWN0aW9uIH0gZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IGNvcmVTY2hlbWEgPSBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRTtcblxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XG5cbmNvbnN0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUk5BTUUsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxuICBjb25uZWN0aW9uTGltaXQ6IDUwLFxuICBxdWV1ZUxpbWl0OiAwLFxuICBjaGFyc2V0OiBcInV0ZjhcIixcbiAgdGltZXpvbmU6IHByb2Nlc3MuZW52LkRCX1RJTUVaT05FLFxufSk7XG5cbnBvb2wub24oXCJjb25uZWN0aW9uXCIsIChjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbik6IHZvaWQgPT4ge1xuICBjb25uZWN0aW9uLmNvbmZpZy5uYW1lZFBsYWNlaG9sZGVycyA9IHRydWU7XG59KTtcblxuZXhwb3J0IHsgcG9vbCwgbXlzcWwgfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgZXh0ZW5kcyBSb3dEYXRhUGFja2V0W10gfCBSZXN1bHRTZXRIZWFkZXIgfCBhbnk+KFxuICBzcWw6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGNvbm5lY3Rpb24/OiBQb29sQ29ubmVjdGlvbjtcbiAgICBuZXN0VGFibGVzPzogYm9vbGVhbjtcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcbiAgfSA9IHt9LFxuICBhdHRlbXB0OiBudW1iZXIgPSAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdXNlRXh0ZXJuYWxDb25uZWN0aW9uID0gQm9vbGVhbihvcHRpb25zLmNvbm5lY3Rpb24pO1xuICBjb25zdCBjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbiA9XG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XG5cbiAgbGV0IHJlc3VsdDtcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xuXG4gIHRyeSB7XG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcbiAgICBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoe1xuICAgICAgc3FsLFxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcbiAgICAgIG5lc3RUYWJsZXM6IG9wdGlvbnMubmVzdFRhYmxlcyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gW107XG4gICAgfVxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBlLm1lc3NhZ2UgPSBgJHtlLmNvZGV9XFxuc3FsOiAke3NxbFF1ZXJ5fVxcbmVycm9yOiAke2UubWVzc2FnZX1cXG50aW1lOiB9YDtcblxuICAgIHRocm93IGU7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF1c2VFeHRlcm5hbENvbm5lY3Rpb24pIHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlRSxPQUFBLENBQUFELEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSyxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURMLE9BQUEsQ0FBQUUsVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR1AsS0FBSyxDQUFDUSxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU9uQixPQUFBLENBQUFNLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0JDLEtBQUtBLENBQUFDLEtBQUE7dURBQ3pCQyxHQUFXLEVBQ1hDLE9BQUEsR0FJSSxFQUFFLEVBQ05DLE9BQUEsR0FBa0IsQ0FBQztJQUVuQixNQUFNQyxxQkFBcUIsR0FBR0MsT0FBTyxDQUFDSCxPQUFPLENBQUNMLFVBQVUsQ0FBQztJQUN6RCxNQUFNQSxVQUFVLEdBQ2RLLE9BQU8sQ0FBQ0wsVUFBVSxLQUFLLE1BQU1mLElBQUksQ0FBQ3dCLGFBQWEsRUFBRSxDQUFDO0lBRXBELElBQUlDLE1BQU07SUFDVixJQUFJQyxRQUFRLEdBQUdQLEdBQUc7SUFFbEIsSUFBSTtNQUNGTyxRQUFRLEdBQUdYLFVBQVUsQ0FBQ1ksTUFBTSxDQUFDUixHQUFHLEVBQUVDLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDO01BQ2pELENBQUNILE1BQU0sQ0FBQyxHQUFHLE1BQU1WLFVBQVUsQ0FBQ0UsS0FBSyxDQUFDO1FBQ2hDRSxHQUFHO1FBQ0hTLE1BQU0sRUFBRVIsT0FBTyxDQUFDUSxNQUFNO1FBQ3RCQyxVQUFVLEVBQUVULE9BQU8sQ0FBQ1M7T0FDckIsQ0FBQztNQUNGLElBQUksQ0FBQ0osTUFBTSxFQUFFO1FBQ1hBLE1BQU0sR0FBRyxFQUFFO01BQ2I7SUFDRixDQUFDLENBQUMsT0FBT0ssQ0FBTSxFQUFFO01BQ2ZBLENBQUMsQ0FBQ0MsT0FBTyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsSUFBSSxVQUFVTixRQUFRLFlBQVlJLENBQUMsQ0FBQ0MsT0FBTyxXQUFXO01BRXZFLE1BQU1ELENBQUM7SUFDVCxDQUFDLFNBQVM7TUFDUixJQUFJLENBQUNSLHFCQUFxQixFQUFFO1FBQzFCUCxVQUFVLENBQUNrQixPQUFPLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE9BQU9SLE1BQVc7RUFDcEIsQ0FBQzs7QUFwQ0QvQixPQUFBLENBQUF1QixLQUFBLEdBQUFBLEtBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["dotenv","__importStar","require","mysql","exports","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","query","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\nimport * as mysql from \"mysql2/promise\";\nimport { PoolConnection } from \"mysql2/promise\";\n\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\n\nexport { ResultSetHeader, RowDataPacket, coreSchema };\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE,\n});\n\npool.on(\"connection\", (connection: PoolConnection): void => {\n  connection.config.namedPlaceholders = true;\n});\n\nexport { pool, mysql };\n\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\n  sql: string,\n  options: {\n    connection?: PoolConnection;\n    nestTables?: boolean;\n    values?: any[] | any;\n  } = {},\n  attempt: number = 0\n): Promise<T> {\n  const useExternalConnection = Boolean(options.connection);\n  const connection: PoolConnection =\n    options.connection || (await pool.getConnection());\n\n  let result;\n  let sqlQuery = sql;\n\n  try {\n    sqlQuery = connection.format(sql, options.values);\n    [result] = await connection.query({\n      sql,\n      values: options.values,\n      nestTables: options.nestTables,\n    });\n    if (!result) {\n      result = [];\n    }\n  } catch (e: any) {\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n\n    throw e;\n  } finally {\n    if (!useExternalConnection) {\n      connection.release();\n    }\n  }\n  return result as T;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeE,OAAA,CAAAD,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACK,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDL,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGP,KAAK,CAACQ,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOnB,OAAA,CAAAM,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsBC,KAAKA,CAAAC,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACL,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdK,OAAO,CAACL,UAAU,KAAK,MAAMf,IAAI,CAACwB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGX,UAAU,CAACY,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMV,UAAU,CAACE,KAAK,CAAC;QAChCE,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BP,UAAU,CAACkB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC;;AApCD/B,OAAA,CAAAuB,KAAA,GAAAA,KAAA","ignoreList":[]}},"mtime":1724414267123},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.latestTemplatesSchema = exports.userRolesSchema = exports.createPasswordSchema = exports.createSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.createSchema = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\nexports.userRolesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.latestTemplatesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlzdE5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwibmlja05hbWUiLCJnZW5kZXIiLCJiaXJ0aERheSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJ1c2VyUm9sZXNTY2hlbWEiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXNTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlzdE5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbGFzdE5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxhc3ROYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG5pY2tOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJuaWNrTmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBnZW5kZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImdlbmRlciBpcyByZXF1aXJlZFwiKSxcclxuICBiaXJ0aERheTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiYmlydGhEYXkgaXMgcmVxdWlyZWRcIiksXHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5lbWFpbChcImludmFsaWQgZW1haWxcIikucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBwaG9uZU51bWJlcjogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG5wYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4gIC5vYmplY3QoKVxyXG4gIC5zaGFwZSh7XHJcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuICB9KVxyXG4gIC5yZXF1aXJlZCgpO1xyXG5cclxuICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4gIC5vYmplY3QoKVxyXG4gIC5zaGFwZSh7XHJcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuICB9KVxyXG4gIC5yZXF1aXJlZCgpO1xyXG5cclxuICBleHBvcnQgIGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIC8vIGlkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VyIGlkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLnJlcXVpcmVkKFwidmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIilcclxuICAgIC5taW4oNCwgXCJ2ZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaHJcIilcclxuICAgIC5tYXgoNCwgXCJ2ZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaHJcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiks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","map":{"version":3,"names":["yup","__importStar","require","exports","createSchema","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","userRolesSchema","userId","latestTemplatesSchema","confirmEmailSchema","verify_code","max","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const createSchema = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\npassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\nexport const userRolesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const latestTemplatesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const confirmEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1730105124731},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncHandler = void 0;\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nexports.asyncHandler = express_async_handler_1.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL2FzeW5jLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJ1xuXG5leHBvcnQgY29uc3QgYXN5bmNIYW5kbGVyID0gZXhwcmVzc0FzeW5jSGFuZGxlclxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsdUJBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRWFDLE9BQUEsQ0FBQUMsWUFBWSxHQUFHSix1QkFBQSxDQUFBSyxPQUFtQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","exports","asyncHandler","default"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\n\nexport const asyncHandler = expressAsyncHandler\n\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,uBAAA,CAAAK,OAAmB","ignoreList":[]}},"mtime":1725613484049},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst sercvice_1 = require(\"./sercvice\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// ***** checkNickName\npublic_1.router.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.asyncHandler)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.UserService.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.router.get(\"/getUserInfo/:email\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = req.params.email;\n    const userData = yield sercvice_1.UserService.getUserInfo(data);\n    const buildResponse = app_response_1.BuildResponse.get(userData);\n    return res.json(buildResponse);\n  });\n});\n// ***** confirm\n// ***** getOTP\npublic_1.router.get(\"/user/getOTP/:email\", (0, async_handler_1.asyncHandler)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.router.put(`/user/updateProfile`, (0, async_handler_1.asyncHandler)(function updateProfileUser(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.updateProfileuser(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.router.get(\"/user/forgot-passsword/:email\", (0, async_handler_1.asyncHandler)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.UserService.sendFrogetPasswordToken(email);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.json(buildResponse);\n  });\n}));\npublic_1.router.post(`/user/change-password`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = req.body;\n  const getData = yield sercvice_1.UserService.changePassword(data);\n  const buildResponse = app_response_1.BuildResponse.get(getData);\n  res.json(buildResponse);\n})));\n// **** uploadImage\npublic_1.router.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsIm11bHRlcl8xIiwiX19pbXBvcnREZWZhdWx0Iiwic3RvcmFnZSIsImRlZmF1bHQiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWRJbWdQcm9maWxlIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwiY2hlY2tOaWNrTmFtZSIsInJlcyIsImZvcm1EYXRhIiwicGFyYW1zIiwibmlja25hbWUiLCJyZXN1bHQiLCJVc2VyU2VydmljZSIsImpzb24iLCJnZXRBbGxVc2VyRGF0YSIsImRhdGEiLCJlbWFpbCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldE9UUCIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwiZ2V0VmVyaWZ5Q29kZSIsInB1dCIsInVwZGF0ZVByb2ZpbGVVc2VyIiwiYm9keSIsInVwZGF0ZVByb2ZpbGV1c2VyIiwiZm9yZ2V0UHNzc3dvcmQiLCJzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbiIsInBvc3QiLCJfX2F3YWl0ZXIiLCJnZXREYXRhIiwiY2hhbmdlUGFzc3dvcmQiLCJzaW5nbGUiLCJzdGF0dXMiLCJlcnJvciIsIm1lc3NhZ2UiLCJpbWFnZVBhdGgiLCJwYXRoIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBVc2VyU2VydmljZSB9IGZyb20gXCIuL3NlcmN2aWNlXCI7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSBcIm11bHRlclwiO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBcInB1YmxpYy9pbWFnZXNcIik7XHJcbiAgfSxcclxuICBmaWxlbmFtZTogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNiKG51bGwsIGZpbGUub3JpZ2luYWxuYW1lKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZEltZ1Byb2ZpbGUgPSBtdWx0ZXIoeyBzdG9yYWdlIH0pO1xyXG5cclxuLy8gKioqKiogY2hlY2tOaWNrTmFtZVxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvY2hlY2tOaWNrTmFtZS86bmlja25hbWVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLnBhcmFtcy5uaWNrbmFtZTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEpO1xyXG4gICAgcmVzLmpzb24ocmVzdWx0KTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiBnZXRVc2VySW5mb1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldFVzZXJJbmZvLzplbWFpbFwiLFxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJEYXRhKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZGF0YSA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KHVzZXJEYXRhKTtcclxuICAgIHJldHVybiByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9XHJcbik7XHJcbi8vICoqKioqIGNvbmZpcm1cclxuXHJcbi8vICoqKioqIGdldE9UUFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZ2V0T1RQLzplbWFpbFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXRPVFAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCB2ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UuZ2V0VmVyaWZ5Q29kZShmb3JtRGF0YSwgdmVyaWZ5X2NvZGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KHJlc3VsdCk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiB1cGRhdGVQcm9maWxlXHJcbnJvdXRlci5wdXQoXHJcbiAgYC91c2VyL3VwZGF0ZVByb2ZpbGVgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS51cGRhdGVQcm9maWxldXNlcihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcclxuICAgIHJlcy5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqKiBmb3Jnb3QtcGFzc3N3b3JkXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZm9yZ290LXBhc3Nzd29yZC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZm9yZ2V0UHNzc3dvcmQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlclNlcnZpY2Uuc2VuZEZyb2dldFBhc3N3b3JkVG9rZW4oZW1haWwpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvdXNlci9jaGFuZ2UtcGFzc3dvcmRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBnZXREYXRhID0gYXdhaXQgVXNlclNlcnZpY2UuY2hhbmdlUGFzc3dvcmQoZGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZ2V0RGF0YSk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiB1cGxvYWRJbWFnZVxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hZG1pbi91cGxvYWRJbWFnZVwiLFxyXG4gIHVwbG9hZEltZ1Byb2ZpbGUuc2luZ2xlKFwiZmlsZVwiKSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIGlmICghcmVxLmZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkZpbGUgdXBsb2FkZWQgc2VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaW1hZ2VQYXRoID0gcmVxLmZpbGUucGF0aDtcclxuICAgIHJlcy5qc29uKHsgaW1hZ2VQYXRoIH0pO1xyXG4gIH1cclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssUUFBQSxHQUFBQyxlQUFBLENBQUFOLE9BQUE7QUFFQSxNQUFNTyxPQUFPLEdBQUdGLFFBQUEsQ0FBQUcsT0FBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsRUFBRUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUM3QkEsRUFBRSxDQUFDLElBQUksRUFBRSxlQUFlLENBQUM7RUFDM0IsQ0FB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RUFBRVUsR0FBUTs7SUFDM0QsTUFBTVMsS0FBSyxHQUFHbkIsR0FBRyxDQUFDWSxNQUFNLENBQUNPLEtBQUs7SUFDOUIsTUFBTUQsSUFBSSxHQUFHLE1BQU16QixVQUFBLENBQUFzQixXQUFXLENBQUNrQix1QkFBdUIsQ0FBQ2QsS0FBSyxDQUFDO0lBQzdELE1BQU1HLGFBQWEsR0FBRyxNQUFNL0IsY0FBQSxDQUFBZ0MsYUFBYSxDQUFDaEIsR0FBRyxDQUFDVyxJQUFJLENBQUM7SUFDbkRSLEdBQUcsQ0FBQ00sSUFBSSxDQUFDTSxhQUFhLENBQUM7RUFDekIsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEOUIsUUFBQSxDQUFBYyxNQUFNLENBQUM0QixJQUFJLENBQ1QsdUJBQXVCLEVBQ3ZCLElBQUE5QyxlQUFBLENBQUFvQixZQUFZLEVBQUMsQ0FBT1IsR0FBWSxFQUFFVSxHQUFhLEtBQUl5QixTQUFBO0VBQ2pELE1BQU1qQixJQUFJLEdBQUdsQixHQUFHLENBQUM4QixJQUFJO0VBQ3JCLE1BQU1NLE9BQU8sR0FBRyxNQUFNM0MsVUFBQSxDQUFBc0IsV0FBVyxDQUFDc0IsY0FBYyxDQUFDbkIsSUFBSSxDQUFDO0VBQ3RELE1BQU1JLGFBQWEsR0FBRy9CLGNBQUEsQ0FBQWdDLGFBQWEsQ0FBQ2hCLEdBQUcsQ0FBQzZCLE9BQU8sQ0FBQztFQUNoRDFCLEdBQUcsQ0FBQ00sSUFBSSxDQUFDTSxhQUFhLENBQUM7QUFDekIsQ0FBQyxFQUFDLENBQ0g7QUFFRDtBQUNBOUIsUUFBQSxDQUFBYyxNQUFNLENBQUM0QixJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCN0IsZ0JBQWdCLENBQUNpQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQy9CLENBQUN0QyxHQUFHLEVBQUVVLEdBQUcsS0FBSTtFQUNYLElBQUksQ0FBQ1YsR0FBRyxDQUFDQyxJQUFJLEVBQUU7SUFDYixPQUFPUyxHQUFHLENBQUM2QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN2QixJQUFJLENBQUM7TUFBRXdCLEtBQUssRUFBRTtJQUFrQixDQUFFLENBQUM7RUFDNUQ7RUFDQTlCLEdBQUcsQ0FBQ00sSUFBSSxDQUFDO0lBQ1B5QixPQUFPLEVBQUUsNEJBQTRCO0lBQ3JDdEMsUUFBUSxFQUFFSCxHQUFHLENBQUNDLElBQUksQ0FBQ0U7R0FDcEIsQ0FBQztFQUNGLE1BQU11QyxTQUFTLEdBQUcxQyxHQUFHLENBQUNDLElBQUksQ0FBQzBDLElBQUk7RUFDL0JqQyxHQUFHLENBQUNNLElBQUksQ0FBQztJQUFFMEI7RUFBUyxDQUFFLENBQUM7QUFDekIsQ0FBQyxDQUNGIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","common_1","app_response_1","public_1","sercvice_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","checkNickName","res","formData","params","nickname","result","UserService","json","getAllUserData","data","email","userData","getUserInfo","buildResponse","BuildResponse","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfileUser","body","updateProfileuser","forgetPsssword","sendFrogetPasswordToken","post","__awaiter","getData","changePassword","single","status","error","message","imagePath","path"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { UserService } from \"./sercvice\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// ***** checkNickName\r\nrouter.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nrouter.get(\r\n  \"/getUserInfo/:email\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    const data = req.params.email;\r\n    const userData = await UserService.getUserInfo(data);\r\n    const buildResponse = BuildResponse.get(userData);\r\n    return res.json(buildResponse);\r\n  }\r\n);\r\n// ***** confirm\r\n\r\n// ***** getOTP\r\nrouter.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n// ***** updateProfile\r\nrouter.put(\r\n  `/user/updateProfile`,\r\n  asyncHandler(async function updateProfileUser(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfileuser(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\nrouter.get(\r\n  \"/user/forgot-passsword/:email\",\r\n  asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n    const email = req.params.email;\r\n    const data = await UserService.sendFrogetPasswordToken(email);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/user/change-password`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const data = req.body;\r\n    const getData = await UserService.changePassword(data);\r\n    const buildResponse = BuildResponse.get(getData);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** uploadImage\r\nrouter.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,QAAA,GAAAH,OAAA;AACA,MAAAI,UAAA,GAAAJ,OAAA;AACA,MAAAK,QAAA,GAAAC,eAAA,CAAAN,OAAA;AAEA,MAAMO,OAAO,GAAGF,QAAA,CAAAG,OAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,EAAEA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAI;IAC7BA,EAAE,CAAC,IAAI,EAAE,eAAe,CAAC;EAC3B,CAAC;EACDC,QAAQ,EAAEA,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAI;IAC1BA,EAAE,CAAC,IAAI,EAAED,IAAI,CAACG,YAAY,CAAC;EAC7B;CACD,CAAC;AAEF,MAAMC,gBAAgB,GAAG,IAAAX,QAAA,CAAAG,OAAM,EAAC;EAAED;AAAO,CAAE,CAAC;AAE5C;AACAJ,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAeC,aAAaA,CAACT,GAAY,EAAEU,GAAa;;IACnE,MAAMC,QAAQ,GAAGX,GAAG,CAACY,MAAM,CAACC,QAAQ;IACpC,MAAMC,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACN,aAAa,CAACE,QAAQ,CAAC;IACxDD,GAAG,CAACM,IAAI,CAACF,MAAM,CAAC;EAClB,CAAC;CAAA,CAAC,CACH;AACD;AACAtB,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,qBAAqB,EACrB,SAAeU,cAAcA,CAACjB,GAAY,EAAEU,GAAa;;IACvD,MAAMQ,IAAI,GAAGlB,GAAG,CAACY,MAAM,CAACO,KAAK;IAC7B,MAAMC,QAAQ,GAAG,MAAM3B,UAAA,CAAAsB,WAAW,CAACM,WAAW,CAACH,IAAI,CAAC;IACpD,MAAMI,aAAa,GAAG/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACa,QAAQ,CAAC;IACjD,OAAOV,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EAChC,CAAC;CAAA,CACF;AACD;AAEA;AACA9B,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,qBAAqB,EACrB,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAegB,MAAMA,CAACxB,GAAY,EAAEU,GAAa;;IAC5D,MAAMC,QAAQ,GAAGX,GAAG,CAACY,MAAM,CAACO,KAAK;IACjC,MAAMM,WAAW,GAAG,IAAAnC,QAAA,CAAAoC,eAAe,GAAE;IACrC,MAAMZ,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACY,aAAa,CAAChB,QAAQ,EAAEc,WAAW,CAAC;IACrE,MAAMH,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACO,MAAM,CAAC;IACrDJ,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AACD;AACA9B,QAAA,CAAAc,MAAM,CAACsB,GAAG,CACR,qBAAqB,EACrB,IAAAxC,eAAA,CAAAoB,YAAY,EAAC,SAAeqB,iBAAiBA,CAAC7B,GAAY,EAAEU,GAAa;;IACvE,MAAMC,QAAQ,GAAGX,GAAG,CAAC8B,IAAI;IACzB,MAAMhB,MAAM,GAAG,MAAMrB,UAAA,CAAAsB,WAAW,CAACgB,iBAAiB,CAACpB,QAAQ,CAAC;IAC5D,MAAMW,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACO,MAAM,CAAC;IACrDJ,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AAED;AAEA9B,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAoB,YAAY,EAAC,SAAewB,cAAcA,CAAChC,GAAQ,EAAEU,GAAQ;;IAC3D,MAAMS,KAAK,GAAGnB,GAAG,CAACY,MAAM,CAACO,KAAK;IAC9B,MAAMD,IAAI,GAAG,MAAMzB,UAAA,CAAAsB,WAAW,CAACkB,uBAAuB,CAACd,KAAK,CAAC;IAC7D,MAAMG,aAAa,GAAG,MAAM/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAACW,IAAI,CAAC;IACnDR,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;EACzB,CAAC;CAAA,CAAC,CACH;AAED9B,QAAA,CAAAc,MAAM,CAAC4B,IAAI,CACT,uBAAuB,EACvB,IAAA9C,eAAA,CAAAoB,YAAY,EAAC,CAAOR,GAAY,EAAEU,GAAa,KAAIyB,SAAA;EACjD,MAAMjB,IAAI,GAAGlB,GAAG,CAAC8B,IAAI;EACrB,MAAMM,OAAO,GAAG,MAAM3C,UAAA,CAAAsB,WAAW,CAACsB,cAAc,CAACnB,IAAI,CAAC;EACtD,MAAMI,aAAa,GAAG/B,cAAA,CAAAgC,aAAa,CAAChB,GAAG,CAAC6B,OAAO,CAAC;EAChD1B,GAAG,CAACM,IAAI,CAACM,aAAa,CAAC;AACzB,CAAC,EAAC,CACH;AAED;AACA9B,QAAA,CAAAc,MAAM,CAAC4B,IAAI,CACT,oBAAoB,EACpB7B,gBAAgB,CAACiC,MAAM,CAAC,MAAM,CAAC,EAC/B,CAACtC,GAAG,EAAEU,GAAG,KAAI;EACX,IAAI,CAACV,GAAG,CAACC,IAAI,EAAE;IACb,OAAOS,GAAG,CAAC6B,MAAM,CAAC,GAAG,CAAC,CAACvB,IAAI,CAAC;MAAEwB,KAAK,EAAE;IAAkB,CAAE,CAAC;EAC5D;EACA9B,GAAG,CAACM,IAAI,CAAC;IACPyB,OAAO,EAAE,4BAA4B;IACrCtC,QAAQ,EAAEH,GAAG,CAACC,IAAI,CAACE;GACpB,CAAC;EACF,MAAMuC,SAAS,GAAG1C,GAAG,CAACC,IAAI,CAAC0C,IAAI;EAC/BjC,GAAG,CAACM,IAAI,CAAC;IAAE0B;EAAS,CAAE,CAAC;AACzB,CAAC,CACF","ignoreList":[]}},"mtime":1738053170811},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/navItem\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbmF2LWl0ZW1zXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL25hdi1pdGVtcy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXN5bmNIYW5kbGVyfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCB7cm91dGVyfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IHsgTmF2SXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuXG5yb3V0ZXIuZ2V0KFxuICBcIi9uYXZJdGVtXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcyhyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTmF2SXRlbVNlcnZpY2UuZ2V0QWxsTmF2SXRlbXMoKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH0pXG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFNBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUVBQyxRQUFBLENBQUFHLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLFVBQVUsRUFDVixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLElBQUksR0FBRyxNQUFNUixTQUFBLENBQUFTLGNBQWMsQ0FBQ0MsY0FBYyxFQUFFO0lBQ2xELE1BQU1DLGFBQWEsR0FBR1YsY0FBQSxDQUFBVyxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0lBQzdDLElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNNLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7SUFDM0Q7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","public_1","service_1","app_response_1","router","get","asyncHandler","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\nimport {router} from \"../../routes/public\";\nimport { NavItemService } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\n\nrouter.get(\n  \"/navItem\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await NavItemService.getAllNavItems();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAEAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAS,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC3D;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1738828168392},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9uYXYtaXRlbXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXROYXZJdGVtcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuZXhwb3J0IGNsYXNzIE5hdkl0ZW1TZXJ2aWNlIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxOYXZJdGVtcygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TmF2SXRlbXMoKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsY0FBYztFQUNsQixPQUFhQyxjQUFjQSxDQUFBOztNQUNoQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFLLFdBQVcsR0FBRTtNQUNoQyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7OztBQVBIRyxPQUFBLENBQUFMLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\n\nexport class NavItemService {\n  public static async getAllNavItems() {\n    const data = await getNavItems();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,cAAc;EAClB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAPHG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1725626040905},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/insertAppointment\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield service_1.CalendarService.insertEvent(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.get(\"/getAppointment\", (0, async_handler_1.asyncHandler)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.CalendarService.getEventData();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.asyncHandler)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.CalendarService.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.BuildResponse.deleted({});\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/updateAppointment/update\", (0, async_handler_1.asyncHandler)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.CalendarService.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJpbnNlcnRFdmVudCIsInJlcSIsInJlcyIsImV2ZW50RGF0YSIsImJvZHkiLCJkYXRhIiwiQ2FsZW5kYXJTZXJ2aWNlIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsImdldEV2ZW50RGF0YSIsImRlbGV0ZSIsImRlbGV0ZUFwcG9pbnRtZW50IiwibmV4dCIsImlkIiwicGFyYW1zIiwiZGVsZXRlQXBwb2ludG1lbnRJdGVtIiwiZGVsZXRlZCIsInB1dCIsInVwZGF0ZUFwcG9pbnRtZW50SXRlbSIsImZvcm1EYXRhIiwidXBkYXRlZCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5pbXBvcnQgeyBDYWxlbmRhclNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5cbnJvdXRlci5wb3N0KFxuICBcIi9pbnNlcnRBcHBvaW50bWVudFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RXZlbnQocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5pbnNlcnRFdmVudChldmVudERhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcblxuICB9KVxuKTtcblxucm91dGVyLmdldChcbiAgXCIvZ2V0QXBwb2ludG1lbnRcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldEV2ZW50RGF0YShyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmdldEV2ZW50RGF0YSgpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG5cbiAgfSlcbik7XG5cbnJvdXRlci5kZWxldGUoXG4gIFwiL2RlbGV0ZUFwcG9pbnRtZW50L2RlbGV0ZS86aWRcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZCh7fSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcblxucm91dGVyLnB1dChcbiAgXCIvdXBkYXRlQXBwb2ludG1lbnQvdXBkYXRlXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVBcHBvaW50bWVudEl0ZW0oXG4gICAgcmVxOiBSZXF1ZXN0LFxuICAgIHJlczogUmVzcG9uc2VcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBDYWxlbmRhclNlcnZpY2UudXBkYXRlQXBwb2ludG1lbnRJdGVtKGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS51cGRhdGVkKGRhdGEpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsU0FBUyxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDMUIsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsZUFBZSxDQUFDTixXQUFXLENBQUNHLFNBQVMsQ0FBQztJQUN6RCxNQUFNSSxhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDQyxHQUFHLENBQUNKLElBQUksQ0FBQztJQUM5QyxPQUFPSCxHQUFHLENBQUNRLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFFMUQsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWixRQUFBLENBQUFFLE1BQU0sQ0FBQ1ksR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBakIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZWMsWUFBWUEsQ0FBQ1osR0FBUSxFQUFFQyxHQUFROztJQUN6RCxNQUFNRyxJQUFJLEdBQUcsTUFBTVQsU0FBQSxDQUFBVSxlQUFlLENBQUNPLFlBQVksRUFBRTtJQUNqRCxNQUFNTixhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDQyxHQUFHLENBQUNKLElBQUksQ0FBQztJQUM3QyxPQUFPSCxHQUFHLENBQUNRLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWixRQUFBLENBQUFFLE1BQU0sQ0FBQ2lCLE1BQU0sQ0FDWCwrQkFBK0IsRUFDL0IsSUFBQXRCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVnQixpQkFBaUJBLENBQzNDZCxHQUFZLEVBQ1pDLEdBQWEsRUFDYmMsSUFBa0I7O0lBRWxCLE1BQU07TUFBRUM7SUFBRSxDQUFFLEdBQUdoQixHQUFHLENBQUNpQixNQUFNO0lBQ3pCLE1BQU10QixTQUFBLENBQUFVLGVBQWUsQ0FBQ2EscUJBQXFCLENBQUNGLEVBQUUsQ0FBQztJQUMvQyxNQUFNVixhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDWSxPQUFPLENBQUMsRUFBRSxDQUFDO0lBQy9DLE9BQU9sQixHQUFHLENBQUNRLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFDM0QsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWixRQUFBLENBQUFFLE1BQU0sQ0FBQ3dCLEdBQUcsQ0FDUiwyQkFBMkIsRUFDM0IsSUFBQTdCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWV1QixxQkFBcUJBLENBQy9DckIsR0FBWSxFQUNaQyxHQUFhOztJQUViLE1BQU1xQixRQUFRLEdBQUd0QixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsZUFBZSxDQUFDZ0IscUJBQXFCLENBQUNDLFFBQVEsQ0FBQztJQUNsRSxNQUFNaEIsYUFBYSxHQUFHYixjQUFBLENBQUFjLGFBQWEsQ0FBQ2dCLE9BQU8sQ0FBQ25CLElBQUksQ0FBQztJQUNqRCxPQUFPSCxHQUFHLENBQUNRLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFDM0QsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","CalendarService","buildResponse","BuildResponse","get","status","code","json","getEventData","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","updated"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { asyncHandler } from \"../../helper/async-handler\";\nimport { BuildResponse } from \"../../modules/response/app_response\";\nimport { router } from \"../../routes/public\";\nimport { CalendarService } from \"./service\";\n\nrouter.post(\n  \"/insertAppointment\",\n  asyncHandler(async function insertEvent(req: any, res: any) {\n    const eventData = req.body;\n    const data = await CalendarService.insertEvent(eventData);\n    const buildResponse = BuildResponse.get(data);\n   return res.status(buildResponse.code).json(buildResponse);\n\n  })\n);\n\nrouter.get(\n  \"/getAppointment\",\n  asyncHandler(async function getEventData(req: any, res: any) {\n    const data = await CalendarService.getEventData();\n    const buildResponse = BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n\n  })\n);\n\nrouter.delete(\n  \"/deleteAppointment/delete/:id\",\n  asyncHandler(async function deleteAppointment(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { id } = req.params;\n    await CalendarService.deleteAppointmentItem(id);\n    const buildResponse = BuildResponse.deleted({});\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n\nrouter.put(\n  \"/updateAppointment/update\",\n  asyncHandler(async function updateAppointmentItem(\n    req: Request,\n    res: Response\n  ): Promise<any> {\n    const formData = req.body;\n    const data = await CalendarService.updateAppointmentItem(formData);\n    const buildResponse = BuildResponse.updated(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACN,WAAW,CAACG,SAAS,CAAC;IACzD,MAAMI,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC9C,OAAOH,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAE1D,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACY,GAAG,CACR,iBAAiB,EACjB,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAec,YAAYA,CAACZ,GAAQ,EAAEC,GAAQ;;IACzD,MAAMG,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACO,YAAY,EAAE;IACjD,MAAMN,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACC,GAAG,CAACJ,IAAI,CAAC;IAC7C,OAAOH,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACiB,MAAM,CACX,+BAA+B,EAC/B,IAAAtB,eAAA,CAAAO,YAAY,EAAC,SAAegB,iBAAiBA,CAC3Cd,GAAY,EACZC,GAAa,EACbc,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGhB,GAAG,CAACiB,MAAM;IACzB,MAAMtB,SAAA,CAAAU,eAAe,CAACa,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMV,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACY,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOlB,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH;AAEDZ,QAAA,CAAAE,MAAM,CAACwB,GAAG,CACR,2BAA2B,EAC3B,IAAA7B,eAAA,CAAAO,YAAY,EAAC,SAAeuB,qBAAqBA,CAC/CrB,GAAY,EACZC,GAAa;;IAEb,MAAMqB,QAAQ,GAAGtB,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,eAAe,CAACgB,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMhB,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACgB,OAAO,CAACnB,IAAI,CAAC;IACjD,OAAOH,GAAG,CAACQ,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1739626768893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst db_2 = require(\"./db\");\nconst moment = require(\"moment\");\nclass CalendarService {\n  static insertEvent(eventData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const receivedStartDate = new Date(eventData.start_date);\n      const receivedEndDate = new Date(eventData.end_date);\n      const receivedAppointmentDate = new Date(eventData.appointmentDate);\n      const startLocalDate = moment(receivedStartDate).local().format(\"YYYY-MM-DD\");\n      const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n      const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n      const payload = {\n        appointmentDate: appointmentLocalDate,\n        start_date: startLocalDate,\n        end_date: endLocalDate,\n        campaignTime: eventData.campaignTime,\n        date: eventData.date,\n        id: eventData.id,\n        event_description: eventData.event_description,\n        event_title: eventData.event_title,\n        priority: eventData.priority\n      };\n      const data = yield (0, db_2.saveAppointment)(payload);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.CalendarService = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImRiXzIiLCJtb21lbnQiLCJDYWxlbmRhclNlcnZpY2UiLCJpbnNlcnRFdmVudCIsImV2ZW50RGF0YSIsInJlY2VpdmVkU3RhcnREYXRlIiwiRGF0ZSIsInN0YXJ0X2RhdGUiLCJyZWNlaXZlZEVuZERhdGUiLCJlbmRfZGF0ZSIsInJlY2VpdmVkQXBwb2ludG1lbnREYXRlIiwiYXBwb2ludG1lbnREYXRlIiwic3RhcnRMb2NhbERhdGUiLCJsb2NhbCIsImZvcm1hdCIsImVuZExvY2FsRGF0ZSIsImFwcG9pbnRtZW50TG9jYWxEYXRlIiwicGF5bG9hZCIsImNhbXBhaWduVGltZSIsImRhdGUiLCJpZCIsImV2ZW50X2Rlc2NyaXB0aW9uIiwiZXZlbnRfdGl0bGUiLCJwcmlvcml0eSIsImRhdGEiLCJzYXZlQXBwb2ludG1lbnQiLCJtZXNzYWdlIiwiZ2V0RXZlbnREYXRhIiwiZ2V0QXBwb2ludG1lbnQiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50SXRlbSIsImRhdGFBcHBpbnRtZW50IiwidXBkYXRlQXBwb2ludG1lbnQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBkZWxldGVBcHBvaW50bWVudCxcbiAgZ2V0QXBwb2ludG1lbnQsXG4gIHVwZGF0ZUFwcG9pbnRtZW50LFxufSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBzYXZlQXBwb2ludG1lbnQgfSBmcm9tIFwiLi9kYlwiO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcblxuZXhwb3J0IGNsYXNzIENhbGVuZGFyU2VydmljZSB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0RXZlbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcblxuICAgIGNvbnN0IHJlY2VpdmVkU3RhcnREYXRlID0gbmV3IERhdGUoZXZlbnREYXRhLnN0YXJ0X2RhdGUpO1xuICAgIGNvbnN0IHJlY2VpdmVkRW5kRGF0ZSA9IG5ldyBEYXRlKGV2ZW50RGF0YS5lbmRfZGF0ZSk7XG4gICAgY29uc3QgcmVjZWl2ZWRBcHBvaW50bWVudERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnREYXRlKTtcbiAgICBjb25zdCBzdGFydExvY2FsRGF0ZSA9IG1vbWVudChyZWNlaXZlZFN0YXJ0RGF0ZSlcbiAgICAgIC5sb2NhbCgpXG4gICAgICAuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICBjb25zdCBlbmRMb2NhbERhdGUgPSBtb21lbnQocmVjZWl2ZWRFbmREYXRlKS5sb2NhbCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgXG4gICAgY29uc3QgYXBwb2ludG1lbnRMb2NhbERhdGUgPSBtb21lbnQocmVjZWl2ZWRBcHBvaW50bWVudERhdGUpLmxvY2FsKCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblxuXG4gICAgY29uc3QgcGF5bG9hZDogYW55ID0ge1xuICAgICAgYXBwb2ludG1lbnREYXRlOiBhcHBvaW50bWVudExvY2FsRGF0ZSxcbiAgICAgIHN0YXJ0X2RhdGU6IHN0YXJ0TG9jYWxEYXRlLFxuICAgICAgZW5kX2RhdGU6IGVuZExvY2FsRGF0ZSxcbiAgICAgIGNhbXBhaWduVGltZTogZXZlbnREYXRhLmNhbXBhaWduVGltZSxcbiAgICAgIGRhdGU6IGV2ZW50RGF0YS5kYXRlLFxuICAgICAgaWQ6IGV2ZW50RGF0YS5pZCxcbiAgICAgIGV2ZW50X2Rlc2NyaXB0aW9uOiBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXG4gICAgICBldmVudF90aXRsZTogZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxuICAgICAgcHJpb3JpdHk6IGV2ZW50RGF0YS5wcmlvcml0eSxcbiAgICB9O1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHNhdmVBcHBvaW50bWVudChwYXlsb2FkKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RXZlbnREYXRhKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBcHBvaW50bWVudCgpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRlbGV0ZUFwcG9pbnRtZW50KGlkKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlQXBwb2ludG1lbnRJdGVtKGRhdGFBcHBpbnRtZW50OiBJQXBwb2ludG1lbnQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlQXBwb2ludG1lbnQoZGF0YUFwcGludG1lbnQpO1xuICAgIGRhdGE7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBTUEsTUFBQUMsSUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsUUFBUSxDQUFDO0FBRWhDLE1BQWFHLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQ0MsU0FBdUI7O01BRXJELE1BQU1DLGlCQUFpQixHQUFHLElBQUlDLElBQUksQ0FBQ0YsU0FBUyxDQUFDRyxVQUFVLENBQUM7TUFDeEQsTUFBTUMsZUFBZSxHQUFHLElBQUlGLElBQUksQ0FBQ0YsU0FBUyxDQUFDSyxRQUFRLENBQUM7TUFDcEQsTUFBTUMsdUJBQXVCLEdBQUcsSUFBSUosSUFBSSxDQUFDRixTQUFTLENBQUNPLGVBQWUsQ0FBQztNQUNuRSxNQUFNQyxjQUFjLEdBQUdYLE1BQU0sQ0FBQ0ksaUJBQWlCLENBQUMsQ0FDN0NRLEtBQUssRUFBRSxDQUNQQyxNQUFNLENBQUMsWUFBWSxDQUFDO01BQ3ZCLE1BQU1DLFlBQVksR0FBR2QsTUFBTSxDQUFDTyxlQUFlLENBQUMsQ0FBQ0ssS0FBSyxFQUFFLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFFekUsTUFBTUUsb0JBQW9CLEdBQUdmLE1BQU0sQ0FBQ1MsdUJBQXVCLENBQUMsQ0FBQ0csS0FBSyxFQUFFLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFHekYsTUFBTUcsT0FBTyxHQUFRO1FBQ25CTixlQUFlLEVBQUVLLG9CQUFvQjtRQUNyQ1QsVUFBVSxFQUFFSyxjQUFjO1FBQzFCSCxRQUFRLEVBQUVNLFlBQVk7UUFDdEJHLFlBQVksRUFBRWQsU0FBUyxDQUFDYyxZQUFZO1FBQ3BDQyxJQUFJLEVBQUVmLFNBQVMsQ0FBQ2UsSUFBSTtRQUNwQkMsRUFBRSxFQUFFaEIsU0FBUyxDQUFDZ0IsRUFBRTtRQUNoQkMsaUJBQWlCLEVBQUVqQixTQUFTLENBQUNpQixpQkFBaUI7UUFDOUNDLFdBQVcsRUFBRWxCLFNBQVMsQ0FBQ2tCLFdBQVc7UUFDbENDLFFBQVEsRUFBRW5CLFNBQVMsQ0FBQ21CO09BQ3JCO01BRUQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQXhCLElBQUEsQ0FBQXlCLGVBQWUsRUFBQ1IsT0FBTyxDQUFDO01BQzNDLElBQUlPLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRyxZQUFZQSxDQUFBOztNQUM5QixNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBMUIsSUFBQSxDQUFBOEIsY0FBYyxHQUFFO01BQ25DLElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxxQkFBcUJBLENBQUNULEVBQVU7O01BQ2xELE1BQU1JLElBQUksR0FBRyxNQUFNLElBQUExQixJQUFBLENBQUFnQyxpQkFBaUIsRUFBQ1YsRUFBRSxDQUFDO01BQ3hDLE9BQU9JLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFPLHFCQUFxQkEsQ0FBQ0MsY0FBNEI7O01BQ3BFLE1BQU1SLElBQUksR0FBRyxNQUFNLElBQUExQixJQUFBLENBQUFtQyxpQkFBaUIsRUFBQ0QsY0FBYyxDQUFDO01BQ3BEUixJQUFJO0lBQ04sQ0FBQzs7O0FBakRIVSxPQUFBLENBQUFoQyxlQUFBLEdBQUFBLGVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","db_2","moment","CalendarService","insertEvent","eventData","receivedStartDate","Date","start_date","receivedEndDate","end_date","receivedAppointmentDate","appointmentDate","startLocalDate","local","format","endLocalDate","appointmentLocalDate","payload","campaignTime","date","id","event_description","event_title","priority","data","saveAppointment","message","getEventData","getAppointment","deleteAppointmentItem","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\n  deleteAppointment,\n  getAppointment,\n  updateAppointment,\n} from \"../../bin/db\";\nimport { IAppointment } from \"../../types/appointment.interface\";\nimport { saveAppointment } from \"./db\";\nconst moment = require(\"moment\");\n\nexport class CalendarService {\n  public static async insertEvent(eventData: IAppointment) {\n\n    const receivedStartDate = new Date(eventData.start_date);\n    const receivedEndDate = new Date(eventData.end_date);\n    const receivedAppointmentDate = new Date(eventData.appointmentDate);\n    const startLocalDate = moment(receivedStartDate)\n      .local()\n      .format(\"YYYY-MM-DD\");\n    const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n    \n    const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n\n\n    const payload: any = {\n      appointmentDate: appointmentLocalDate,\n      start_date: startLocalDate,\n      end_date: endLocalDate,\n      campaignTime: eventData.campaignTime,\n      date: eventData.date,\n      id: eventData.id,\n      event_description: eventData.event_description,\n      event_title: eventData.event_title,\n      priority: eventData.priority,\n    };\n\n    const data = await saveAppointment(payload);\n    if (data) {\n      return { message: \"ok\", data };\n    } else {\n      return null;\n    }\n  }\n\n  public static async getEventData() {\n    const data = await getAppointment();\n    if (data) {\n      return { message: \"ok\", data };\n    }\n  }\n\n  public static async deleteAppointmentItem(id: string) {\n    const data = await deleteAppointment(id);\n    return data;\n  }\n\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\n    const data = await updateAppointment(dataAppintment);\n    data;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAMA,MAAAC,IAAA,GAAAD,OAAA;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAaG,eAAe;EACnB,OAAaC,WAAWA,CAACC,SAAuB;;MAErD,MAAMC,iBAAiB,GAAG,IAAIC,IAAI,CAACF,SAAS,CAACG,UAAU,CAAC;MACxD,MAAMC,eAAe,GAAG,IAAIF,IAAI,CAACF,SAAS,CAACK,QAAQ,CAAC;MACpD,MAAMC,uBAAuB,GAAG,IAAIJ,IAAI,CAACF,SAAS,CAACO,eAAe,CAAC;MACnE,MAAMC,cAAc,GAAGX,MAAM,CAACI,iBAAiB,CAAC,CAC7CQ,KAAK,EAAE,CACPC,MAAM,CAAC,YAAY,CAAC;MACvB,MAAMC,YAAY,GAAGd,MAAM,CAACO,eAAe,CAAC,CAACK,KAAK,EAAE,CAACC,MAAM,CAAC,YAAY,CAAC;MAEzE,MAAME,oBAAoB,GAAGf,MAAM,CAACS,uBAAuB,CAAC,CAACG,KAAK,EAAE,CAACC,MAAM,CAAC,YAAY,CAAC;MAGzF,MAAMG,OAAO,GAAQ;QACnBN,eAAe,EAAEK,oBAAoB;QACrCT,UAAU,EAAEK,cAAc;QAC1BH,QAAQ,EAAEM,YAAY;QACtBG,YAAY,EAAEd,SAAS,CAACc,YAAY;QACpCC,IAAI,EAAEf,SAAS,CAACe,IAAI;QACpBC,EAAE,EAAEhB,SAAS,CAACgB,EAAE;QAChBC,iBAAiB,EAAEjB,SAAS,CAACiB,iBAAiB;QAC9CC,WAAW,EAAElB,SAAS,CAACkB,WAAW;QAClCC,QAAQ,EAAEnB,SAAS,CAACmB;OACrB;MAED,MAAMC,IAAI,GAAG,MAAM,IAAAxB,IAAA,CAAAyB,eAAe,EAACR,OAAO,CAAC;MAC3C,IAAIO,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaG,YAAYA,CAAA;;MAC9B,MAAMH,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAA8B,cAAc,GAAE;MACnC,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaK,qBAAqBA,CAACT,EAAU;;MAClD,MAAMI,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAAgC,iBAAiB,EAACV,EAAE,CAAC;MACxC,OAAOI,IAAI;IACb,CAAC;;EAEM,OAAaO,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMR,IAAI,GAAG,MAAM,IAAA1B,IAAA,CAAAmC,iBAAiB,EAACD,cAAc,CAAC;MACpDR,IAAI;IACN,CAAC;;;AAjDHU,OAAA,CAAAhC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1738463217893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsImdldCIsInVzZXJBZG1pbiIsInJlcSIsInJlcyIsImRhdGEiLCJVc2VyQWRtaW4iLCJnZXRVc2VyQWRtaW4iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYWRtaW4vY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBVc2VyQWRtaW4gfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XG5cblxucm91dGVyLmdldChcbiAgYC9nZXRVc2VyQWRtaW5gLFxuICBhc3luYyBmdW5jdGlvbiB1c2VyQWRtaW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJBZG1pbi5nZXRVc2VyQWRtaW4oKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH1cbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBR0FFLFFBQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZUFBZSxFQUNmLFNBQWVDLFNBQVNBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsU0FBUyxDQUFDQyxZQUFZLEVBQUU7SUFDM0MsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0NELEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUNwRCxDQUFDO0NBQUEsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["service_1","require","app_response_1","public_1","router","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport { UserAdmin } from \"./service\";\nimport {BuildResponse} from \"../../modules/response/app_response\";\nimport {router} from \"../../routes/public\";\n\n\nrouter.get(\n  `/getUserAdmin`,\n  async function userAdmin(req: Request, res: Response) {\n    const data = await UserAdmin.getUserAdmin();\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGAE,QAAA,CAAAC,MAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1725612317455},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFkbWlucyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuY2xhc3MgVXNlckFkbWluIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VyQWRtaW4oKSB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCBnZXRBZG1pbnMoKTtcbiAgICBpZiAoYWRtaW4pIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgYWRtaW4gfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IFVzZXJBZG1pbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\n\nclass UserAdmin {\n  public static async getUserAdmin() {\n    const admin = await getAdmins();\n    if (admin) {\n      return { message: \"ok\", admin };\n    } else {\n      return null;\n    }\n  }\n}\n\nexport { UserAdmin };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.router.get(\"/admin/patients\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.PatientService.getPatients();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.PatientService.checkExistMobile(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\n// router.post(\n//   `/admin/add-patient`,\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\n//     const formData = req.body;\n//     const data = await PatientService.registerPatient(formData);\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return formData;\n//   })\n// );\n// **** GetPatientDetial\npublic_1.router.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.PatientService.patientDetial(patientId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** uploadImage\n// routes.post(\n//   \"/admin/uploadImage\",\n//   uploadImgProfile.single(\"file\"),\n//   (req, res) => {\n//     if (!req.file) {\n//       return res.status(400).json({ error: \"No file uploaded\" });\n//     }\n//     res.json({\n//       message: \"File uploaded seccessfully\",\n//       filename: req.file.filename,\n//     });\n//     const imagePath = req.file.path;\n//     res.json({ imagePath });\n//   }\n// );\n// **** updatePatient\npublic_1.router.put(\"/admin/updatePatient\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield services_1.PatientService.updatePatient(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** deletePatient\npublic_1.router.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.asyncHandler)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.PatientService.deletePatient(idPateint);\n    const buildResponse = app_response_1.BuildResponse.deleted(idPateint);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post('/admin/add_favorite', (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    patient_id,\n    doctor_id\n  } = req.body;\n  const formData = {\n    patient_id,\n    doctor_id\n  };\n  const data = yield services_1.PatientService.addFavorite(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiX19hd2FpdGVyIiwibW9iaWxlIiwicGFyYW1zIiwiY2hlY2tFeGlzdE1vYmlsZSIsInBhdGllbnRJZCIsInBhdGllbnREZXRpYWwiLCJwdXQiLCJmb3JtRGF0YSIsImJvZHkiLCJ1cGRhdGVQYXRpZW50IiwidXBkYXRlZCIsImRlbGV0ZSIsImRlbGV0ZVBhdGllbnQiLCJpZFBhdGVpbnQiLCJkZWxldGVkIiwicG9zdCIsInBhdGllbnRfaWQiLCJkb2N0b3JfaWQiLCJhZGRGYXZvcml0ZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgUGF0aWVudFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSBcIm11bHRlclwiO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBcInB1YmxpYy9pbWFnZXNcIik7XHJcbiAgfSxcclxuICBmaWxlbmFtZTogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNiKG51bGwsIGZpbGUub3JpZ2luYWxuYW1lKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZEltZ1Byb2ZpbGUgPSBtdWx0ZXIoeyBzdG9yYWdlIH0pO1xyXG5cclxuLy8gKioqKiBHZXRBbGxcclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9wYXRpZW50c1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcyhyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5nZXRQYXRpZW50cygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIGNoZWNrUGhvbmVOdW1iZXJFeGlzdHNcclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9jaGVjay1waG9uZS86cGhvbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGUgPSByZXEucGFyYW1zLm1vYmlsZTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5jaGVja0V4aXN0TW9iaWxlKG1vYmlsZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gYnVpbGRSZXNwb25zZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBhZGQtcGF0aWVudFxyXG4vLyByb3V0ZXIucG9zdChcclxuLy8gICBgL2FkbWluL2FkZC1wYXRpZW50YCxcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gYWRkUGF0aWVudChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuLy8gICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBmb3JtRGF0YTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxuLy8gKioqKiBHZXRQYXRpZW50RGV0aWFsXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9wYXRpZW50LWRldGlhbC86cGF0aWVudElkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBwYXRpZW50SWQgPSArcmVxLnBhcmFtcy5wYXRpZW50SWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucGF0aWVudERldGlhbChwYXRpZW50SWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKiogdXBsb2FkSW1hZ2VcclxuLy8gcm91dGVzLnBvc3QoXHJcbi8vICAgXCIvYWRtaW4vdXBsb2FkSW1hZ2VcIixcclxuLy8gICB1cGxvYWRJbWdQcm9maWxlLnNpbmdsZShcImZpbGVcIiksXHJcbi8vICAgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgICBpZiAoIXJlcS5maWxlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5vIGZpbGUgdXBsb2FkZWRcIiB9KTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJlcy5qc29uKHtcclxuLy8gICAgICAgbWVzc2FnZTogXCJGaWxlIHVwbG9hZGVkIHNlY2Nlc3NmdWxseVwiLFxyXG4vLyAgICAgICBmaWxlbmFtZTogcmVxLmZpbGUuZmlsZW5hbWUsXHJcbi8vICAgICB9KTtcclxuLy8gICAgIGNvbnN0IGltYWdlUGF0aCA9IHJlcS5maWxlLnBhdGg7XHJcbi8vICAgICByZXMuanNvbih7IGltYWdlUGF0aCB9KTtcclxuLy8gICB9XHJcbi8vICk7XHJcbi8vICoqKiogdXBkYXRlUGF0aWVudFxyXG5yb3V0ZXIucHV0KFxyXG4gIFwiL2FkbWluL3VwZGF0ZVBhdGllbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIGRlbGV0ZVBhdGllbnRcclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9hZG1pbi9kZWxldGVQYXRpZW50LzppZFBhdGVpbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaWRQYXRlaW50ID0gK3JlcS5wYXJhbXMuaWRQYXRlaW50O1xyXG4gICAgYXdhaXQgUGF0aWVudFNlcnZpY2UuZGVsZXRlUGF0aWVudChpZFBhdGVpbnQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZChpZFBhdGVpbnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICAnL2FkbWluL2FkZF9mYXZvcml0ZScsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgeyBwYXRpZW50X2lkLCBkb2N0b3JfaWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSB7cGF0aWVudF9pZCxkb2N0b3JfaWR9XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuYWRkRmF2b3JpdGUoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUVBLE1BQUFFLFVBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLFFBQUEsR0FBQUMsZUFBQSxDQUFBTCxPQUFBO0FBRUEsTUFBTU0sT0FBTyxHQUFHRixRQUFBLENBQUFHLE9BQU0sQ0FBQ0MsV0FBVyxDQUFDO0VBQ2pDQyxXQUFXLEVBQUVBLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEtBQUk7SUFDN0JBLEVBQUUsQ0FBQyxJQUFJLEVBQUUsZUFBZSxDQUFDO0VBQzNCLENBQUM7RUFDREMsUUFBUSxFQUFFQSxDQUFDSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxLQUFJO0lBQzFCQSxFQUFFLENBQUMsSUFBSSxFQUFFRCxJQUFJLENBQUNHLFlBQVksQ0FBQztFQUM3QjtDQUNELENBQUM7QUFFRixNQUFNQyxnQkFBZ0IsR0FBRyxJQUFBWCxRQUFBLENBQUFHLE9BQU0sRUFBQztFQUFFRDtBQUFPLENBQUUsQ0FBQztBQUU1QztBQUNBTCxRQUFBLENBQUFlLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBbEIsZUFBQSxDQUFBbUIsWUFBWSxFQUFDLFNBQWVDLFdBQVdB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","map":{"version":3,"names":["async_handler_1","require","public_1","services_1","app_response_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","getNavItems","res","data","PatientService","getPatients","buildResponse","BuildResponse","status","code","json","__awaiter","mobile","params","checkExistMobile","patientId","patientDetial","put","formData","body","updatePatient","updated","delete","deletePatient","idPateint","deleted","post","patient_id","doctor_id","addFavorite"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { PatientService } from \"./services\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/admin/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\n// router.post(\r\n//   `/admin/add-patient`,\r\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\r\n//     const formData = req.body;\r\n//     const data = await PatientService.registerPatient(formData);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return formData;\r\n//   })\r\n// );\r\n\r\n// **** GetPatientDetial\r\nrouter.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** uploadImage\r\n// routes.post(\r\n//   \"/admin/uploadImage\",\r\n//   uploadImgProfile.single(\"file\"),\r\n//   (req, res) => {\r\n//     if (!req.file) {\r\n//       return res.status(400).json({ error: \"No file uploaded\" });\r\n//     }\r\n//     res.json({\r\n//       message: \"File uploaded seccessfully\",\r\n//       filename: req.file.filename,\r\n//     });\r\n//     const imagePath = req.file.path;\r\n//     res.json({ imagePath });\r\n//   }\r\n// );\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** deletePatient\r\nrouter.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  '/admin/add_favorite',\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const { patient_id, doctor_id } = req.body;\r\n    const formData = {patient_id,doctor_id}\r\n    const data = await PatientService.addFavorite(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1739869343117},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PatientService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst patients_db_1 = require(\"./patients.db\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst email_1 = require(\"../../config/email\");\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  // ****\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, patients_db_1.checkExistPatient)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, patients_db_1.registerPatient)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n  // ****\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addFavorite(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, patients_db_1.addFavorite)(formData.patient_id, formData.doctor_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PatientService = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImpzb253ZWJ0b2tlbl8xIiwiX19pbXBvcnREZWZhdWx0IiwibXNfMSIsInBhdGllbnRzX2RiXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiY29tbW9uXzEiLCJzZW5kX2VtYWlsXzEiLCJlbWFpbF8xIiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiZXhwaXJlc0luIiwidGVzdCIsIk1hdGgiLCJmbG9vciIsImRlZmF1bHQiLCJQYXRpZW50U2VydmljZSIsImdldFBhdGllbnRzIiwiZGF0YSIsIm1lc3NhZ2UiLCJwYXRpZW50RGV0aWFsIiwiaWQiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tFeGlzdE1vYmlsZSIsIm1vYmlsZSIsImNoZWNrUGhvbmVOdW1iZXJFeGlzdHMiLCJyZWdpc3RlclBhdGllbnQiLCJmb3JtRGF0YSIsImVtYWlsRXhpc3RzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJlbWFpbCIsImNvbnNvbGUiLCJlcnJvciIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0IiwidmVyaWZpY2F0aW9uQ29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInZlcmlmeV9jb2RlIiwidG9rZW5WZXJpZnkiLCJzaWduIiwidG9rZW5fdmVyaWZ5IiwiY2xpbmljRGF0YSIsImVtYWlsU2VydmljZSIsIkVtYWlsUHJvdmlkZXIiLCJzZW5kQWNjb3VudFJlZ2lzdGVyIiwibmV3VXNlciIsInVwZGF0ZVBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwiYWRkRmF2b3JpdGUiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL3NlcnZpY2VzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgYWRkUGF0aWVudCxcclxuICBjaGVja1Bob25lTnVtYmVyRXhpc3RzLFxyXG4gIGRlbGV0ZVBhdGllbnQsXHJcbiAgZ2V0UGF0aWVudHMsXHJcbiAgcGF0aWVudERldGFpbCxcclxuICB1cGRhdGVQYXRpZW50LFxyXG59IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgYWRkRmF2b3JpdGUsIGNoZWNrRXhpc3RQYXRpZW50LCByZWdpc3RlclBhdGllbnQgfSBmcm9tIFwiLi9wYXRpZW50cy5kYlwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IFNlbmRNYWlsIGZyb20gXCIuLi8uLi9oZWxwZXIvc2VuZF9lbWFpbFwiO1xyXG5pbXBvcnQgeyBFbWFpbFByb3ZpZGVyIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9lbWFpbFwiO1xyXG5cclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gRGVmYXVsdCAxIGRheVxyXG5jb25zdCBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIHx8IFwieW91ci1zZWNyZXQta2V5XCI7XHJcblxyXG4vLyBDaGVjayBpZiBleHBpcmF0aW9uIG5lZWRzIGNvbnZlcnNpb25cclxuY29uc3QgZXhwaXJlc0luID1cclxuICB0eXBlb2YgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID09PSBcInN0cmluZ1wiICYmXHJcbiAgL15bMC05XStbc21oZHd5XSQvaS50ZXN0KEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRClcclxuICAgID8gTWF0aC5mbG9vcihtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMClcclxuICAgIDogSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEO1xyXG5cclxuXHJcbiAgICBcclxuZXhwb3J0IGNsYXNzIFBhdGllbnRTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFBhdGllbnRzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFBhdGllbnRzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcGF0aWVudERldGlhbChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcGF0aWVudERldGFpbChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja0V4aXN0TW9iaWxlKG1vYmlsZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gKioqKlxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IGVtYWlsRXhpc3RzID0gYXdhaXQgY2hlY2tFeGlzdFBhdGllbnQoZm9ybURhdGEuZW1haWwpO1xyXG5cclxuICAgIGlmIChlbWFpbEV4aXN0cykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIGAke2Zvcm1EYXRhLmVtYWlsfSBFbWFpbCBhbHJlYWR5IGV4aXN0cywgdGhyb3dpbmcgZXJyb3IuLi5gXHJcbiAgICAgICk7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoYCR7Zm9ybURhdGEuZW1haWx9IGlzIGFscmVhZHkgZXhpc3QuYCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkNvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGZvcm1EYXRhLnZlcmlmeV9jb2RlID0gdmVyaWZpY2F0aW9uQ29kZTtcclxuICAgIFxyXG4gICAgY29uc3QgdG9rZW5WZXJpZnkgPSBqd3Quc2lnbihcclxuICAgICAgeyBlbWFpbDogZm9ybURhdGEuZW1haWwgfSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHsgZXhwaXJlc0luIH1cclxuICAgICk7XHJcbiAgICBmb3JtRGF0YS50b2tlbl92ZXJpZnkgPSB0b2tlblZlcmlmeTtcclxuICAgIC8vIFNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXHJcbiAgICBcclxuICAgIGNvbnN0IGNsaW5pY0RhdGEgPSBhd2FpdCByZWdpc3RlclBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKCFjbGluaWNEYXRhKSB7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgY2xpbmljLlwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBTZW5kTWFpbChuZXcgRW1haWxQcm92aWRlcigpKTtcclxuICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhLmVtYWlsLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBcIkNsaW5pYyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseS4gUGxlYXNlIHZlcmlmeSB5b3VyIGVtYWlsLlwiLFxyXG4gICAgICBuZXdVc2VyOiB7XHJcbiAgICAgICAgaWQ6IGNsaW5pY0RhdGEuaWQsXHJcbiAgICAgICAgZW1haWw6IGZvcm1EYXRhLmVtYWlsLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcbiAgLy8gKioqKlxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZVBhdGllbnQoZm9ybURhdGE6IFBhdGllbnREVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlbGV0ZVBhdGllbnQoaWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRlbGV0ZVBhdGllbnQoaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgYWRkRmF2b3JpdGUoZm9ybURhdGE6IHtcclxuICAgIHBhdGllbnRfaWQ6IG51bWJlcjtcclxuICAgIGRvY3Rvcl9pZDogbnVtYmVyO1xyXG4gIH0pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGRGYXZvcml0ZShmb3JtRGF0YS5wYXRpZW50X2lkLCBmb3JtRGF0YS5kb2N0b3JfaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFTQSxNQUFBQyxjQUFBLEdBQUFDLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFHLElBQUEsR0FBQUQsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUksYUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssZ0JBQUEsR0FBQUwsT0FBQTtBQUNBLE1BQUFNLFFBQUEsR0FBQU4sT0FBQTtBQUNBLE1BQUFPLFlBQUEsR0FBQUwsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQVEsT0FBQSxHQUFBUixPQUFBO0FBRUEsTUFBTVMsd0JBQXdCLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRix3QkFBd0IsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUMvRSxNQUFNRyx1QkFBdUIsR0FBR0YsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHVCQUF1QixJQUFJLGlCQUFpQjtBQUV4RjtBQUNBLE1BQU1DLFNBQVMsR0FDYixPQUFPSix3QkFBd0IsS0FBSyxRQUFRLElBQzVDLG1CQUFtQixDQUFDSyxJQUFJLENBQUNMLHdCQUF3QixDQUFDLEdBQzlDTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxJQUFBYixJQUFBLENBQUFjLE9BQUUsRUFBQ1Isd0JBQXdCLENBQUMsR0FBRyxJQUFJLENBQUMsR0FDL0NBLHdCQUF3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","map":{"version":3,"names":["db_1","require","jsonwebtoken_1","__importDefault","ms_1","patients_db_1","response_error_1","common_1","send_email_1","email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","PatientService","getPatients","data","message","patientDetial","id","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","emailExists","checkExistPatient","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","newUser","updatePatient","deletePatient","addFavorite","patient_id","doctor_id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { addFavorite, checkExistPatient, registerPatient } from \"./patients.db\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { EmailProvider } from \"../../config/email\";\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n\r\n\r\n    \r\nexport class PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(id: number) {\r\n    const data = await patientDetail(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  // ****\r\n  public static async registerPatient(formData: any) {\r\n    const emailExists = await checkExistPatient(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerPatient(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n  // ****\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addFavorite(formData: {\r\n    patient_id: number;\r\n    doctor_id: number;\r\n  }) {\r\n    const data = await addFavorite(formData.patient_id, formData.doctor_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1739868102765},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/doctors\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const filters = {\n    name: req.query.name,\n    service_id: req.query.service_id,\n    specialty_id: req.query.specialty_id,\n    city_id: req.query.city_id,\n    doctor_id: req.query.doctor_id,\n    minRating: req.query.minRating ? parseFloat(req.query.minRating) : undefined,\n    maxRating: req.query.maxRating ? parseFloat(req.query.maxRating) : undefined\n  };\n  const data = yield service_1.DoctorsService.getDoctors(filters);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/getMostPopularDoctor\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getMostPopularDoctors();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield service_1.DoctorsService.checkDoctorPhoneNumberExists(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/add-doctor`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.registerDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/doctor-detial/:doctorId`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const doctorId = +req.params.doctorId;\n//     const data = await DoctorsService.doctorDetial(doctorId);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.put(\"/admin/updateDoctor\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.updateDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/countDoctorClick`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const id = req.body.id;\n  const data = service_1.DoctorsService.recordDoctorProfileView(id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/addComment`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const comment = req.body.comment;\n  const data = yield service_1.DoctorsService.addComment(comment);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/admin/getSpecialties`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getSpecialties();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/get-sub-specialties/:specialtyId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const specialtyId = parseInt(req.params.specialtyId, 10);\n  if (isNaN(specialtyId)) {\n    return res.status(400).json({\n      error: \"Invalid specialty ID\"\n    });\n  }\n  const data = yield service_1.DoctorsService.getSubSpecialtiesById(specialtyId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/filterSpecialtyById/:id`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const queryParams = +req.params.id;\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.get(`/admin/filterServicesById/:id`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const queryParams = +req.params.id;\n  const data = yield service_1.DoctorsService.filterServicesById(queryParams);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/insertReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const dataReviews = req.body;\n  const data = yield service_1.DoctorsService.insertReviews(dataReviews);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/getReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getReviews();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:id/doctor_schedules\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctor_id = +req.params.id;\n  const consultation_types = req.query.consultation_types;\n  const data = yield service_1.DoctorsService.doctorSchadules(doctor_id, consultation_types);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:scheduleID/schedule-time-availability\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const scheduleID = +req.params.scheduleID;\n  const data = yield service_1.DoctorsService.doctorScheduleTimeAvailability(scheduleID);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/doctors/:doctor_id/like`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const likes = req.body.formData;\n  const data = yield service_1.DoctorsService.toggleLike(likes);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.put(`/doctors/:id/booked`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const id = +req.params.id;\n  const data = yield service_1.DoctorsService.booked(id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/doctors/services`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.fetchServices();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImZpbHRlcnMiLCJuYW1lIiwicXVlcnkiLCJzZXJ2aWNlX2lkIiwic3BlY2lhbHR5X2lkIiwiY2l0eV9pZCIsImRvY3Rvcl9pZCIsIm1pblJhdGluZyIsInBhcnNlRmxvYXQiLCJ1bmRlZmluZWQiLCJtYXhSYXRpbmciLCJkYXRhIiwiRG9jdG9yc1NlcnZpY2UiLCJnZXREb2N0b3JzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsImdldE1vc3RQb3B1bGFyRG9jdG9ycyIsIm1vYmlsZSIsInBhcmFtcyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJwb3N0IiwiZm9ybURhdGEiLCJib2R5IiwicmVnaXN0ZXJEb2N0b3IiLCJwdXQiLCJ1cGRhdGVEb2N0b3IiLCJ1cGRhdGVkIiwiaWQiLCJyZWNvcmREb2N0b3JQcm9maWxlVmlldyIsImNvbW1lbnQiLCJhZGRDb21tZW50IiwiZ2V0U3BlY2lhbHRpZXMiLCJzcGVjaWFsdHlJZCIsInBhcnNlSW50IiwiaXNOYU4iLCJlcnJvciIsImdldFN1YlNwZWNpYWx0aWVzQnlJZCIsInF1ZXJ5UGFyYW1zIiwiZmlsdGVyU2VydmljZXNCeUlkIiwiZGF0YVJldmlld3MiLCJpbnNlcnRSZXZpZXdzIiwiZ2V0UmV2aWV3cyIsImNvbnN1bHRhdGlvbl90eXBlcyIsImRvY3RvclNjaGFkdWxlcyIsInNjaGVkdWxlSUQiLCJkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkiLCJsaWtlcyIsInRvZ2dsZUxpa2UiLCJib29rZWQiLCJmZXRjaFNlcnZpY2VzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQXV0aG9yaXphdGlvbiB9IGZyb20gXCIuLi8uLi9taWRkbGV3YXJlcy9hdXRob3JpemF0aW9uXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgRG9jdG9yc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2RvY3RvcnNcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgZmlsdGVycyA9IHtcclxuICAgICAgbmFtZTogcmVxLnF1ZXJ5Lm5hbWUgYXMgc3RyaW5nLFxyXG4gICAgICBzZXJ2aWNlX2lkOiByZXEucXVlcnkuc2VydmljZV9pZCBhcyBzdHJpbmcsXHJcbiAgICAgIHNwZWNpYWx0eV9pZDogcmVxLnF1ZXJ5LnNwZWNpYWx0eV9pZCBhcyBzdHJpbmcsXHJcbiAgICAgIGNpdHlfaWQ6IHJlcS5xdWVyeS5jaXR5X2lkIGFzIHN0cmluZyxcclxuICAgICAgZG9jdG9yX2lkOiByZXEucXVlcnkuZG9jdG9yX2lkIGFzIHN0cmluZyxcclxuICAgICAgbWluUmF0aW5nOiByZXEucXVlcnkubWluUmF0aW5nID8gcGFyc2VGbG9hdChyZXEucXVlcnkubWluUmF0aW5nIGFzIHN0cmluZykgOiB1bmRlZmluZWQsXHJcbiAgICAgIG1heFJhdGluZzogcmVxLnF1ZXJ5Lm1heFJhdGluZyA/IHBhcnNlRmxvYXQocmVxLnF1ZXJ5Lm1heFJhdGluZyBhcyBzdHJpbmcpIDogdW5kZWZpbmVkLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXREb2N0b3JzKGZpbHRlcnMpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldE1vc3RQb3B1bGFyRG9jdG9yXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXRNb3N0UG9wdWxhckRvY3RvcnMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9jaGVjay1waG9uZS86cGhvbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGUgPSByZXEucGFyYW1zLm1vYmlsZTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5jaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzKG1vYmlsZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vYWRkLWRvY3RvcmAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5yZWdpc3RlckRvY3Rvcihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgYC9hZG1pbi9kb2N0b3ItZGV0aWFsLzpkb2N0b3JJZGAsXHJcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4vLyAgICAgY29uc3QgZG9jdG9ySWQgPSArcmVxLnBhcmFtcy5kb2N0b3JJZDtcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5kb2N0b3JEZXRpYWwoZG9jdG9ySWQpO1xyXG4vLyAgICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgIH0pXHJcbi8vICk7XHJcblxyXG5yb3V0ZXIucHV0KFxyXG4gIFwiL2FkbWluL3VwZGF0ZURvY3RvclwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UudXBkYXRlRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLnVwZGF0ZWQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vY291bnREb2N0b3JDbGlja2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgaWQgPSByZXEuYm9keS5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBEb2N0b3JzU2VydmljZS5yZWNvcmREb2N0b3JQcm9maWxlVmlldyhpZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vYWRkQ29tbWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHJlcS5ib2R5LmNvbW1lbnQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuYWRkQ29tbWVudChjb21tZW50KTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2FkbWluL2dldFNwZWNpYWx0aWVzYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0U3BlY2lhbHRpZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2dldC1zdWItc3BlY2lhbHRpZXMvOnNwZWNpYWx0eUlkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBzcGVjaWFsdHlJZCA9IHBhcnNlSW50KHJlcS5wYXJhbXMuc3BlY2lhbHR5SWQsIDEwKTtcclxuXHJcbiAgICBpZiAoaXNOYU4oc3BlY2lhbHR5SWQpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgc3BlY2lhbHR5IElEXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFN1YlNwZWNpYWx0aWVzQnlJZChzcGVjaWFsdHlJZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBgL2FkbWluL2ZpbHRlclNwZWNpYWx0eUJ5SWQvOmlkYCxcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbi8vICAgICBjb25zdCBxdWVyeVBhcmFtcyA9ICtyZXEucGFyYW1zLmlkO1xyXG4vLyAgICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmZpbHRlclNwZWNpYWx0eUJ5SWQocXVlcnlQYXJhbXMpO1xyXG4vLyAgICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgIH0pXHJcbi8vICk7XHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9maWx0ZXJTZXJ2aWNlc0J5SWQvOmlkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9ICtyZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmZpbHRlclNlcnZpY2VzQnlJZChxdWVyeVBhcmFtcyk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLnBvc3QoXHJcbiAgYC9hZG1pbi9pbnNlcnRSZXZpZXdzYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkYXRhUmV2aWV3cyA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmluc2VydFJldmlld3MoZGF0YVJldmlld3MpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5nZXQoXHJcbiAgYC9nZXRSZXZpZXdzYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0UmV2aWV3cygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2RvY3RvcnMvOmlkL2RvY3Rvcl9zY2hlZHVsZXNcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkb2N0b3JfaWQgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGNvbnN1bHRhdGlvbl90eXBlcyA9IHJlcS5xdWVyeS5jb25zdWx0YXRpb25fdHlwZXM7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZG9jdG9yU2NoYWR1bGVzKFxyXG4gICAgICBkb2N0b3JfaWQsXHJcbiAgICAgIGNvbnN1bHRhdGlvbl90eXBlc1xyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2RvY3RvcnMvOnNjaGVkdWxlSUQvc2NoZWR1bGUtdGltZS1hdmFpbGFiaWxpdHlcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBzY2hlZHVsZUlEID0gK3JlcS5wYXJhbXMuc2NoZWR1bGVJRDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5kb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkoXHJcbiAgICAgIHNjaGVkdWxlSURcclxuICAgICk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvZG9jdG9ycy86ZG9jdG9yX2lkL2xpa2VgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGxpa2VzID0gcmVxLmJvZHkuZm9ybURhdGE7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UudG9nZ2xlTGlrZShsaWtlcyk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcblxyXG5yb3V0ZXIucHV0KFxyXG4gIGAvZG9jdG9ycy86aWQvYm9va2VkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBpZCA9ICtyZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmJvb2tlZChpZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBgL2RvY3RvcnMvc2VydmljZXNgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5mZXRjaFNlcnZpY2VzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFBQyxjQUFBLEdB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","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","filters","name","query","service_id","specialty_id","city_id","doctor_id","minRating","parseFloat","undefined","maxRating","data","DoctorsService","getDoctors","buildResponse","BuildResponse","status","code","json","getMostPopularDoctors","mobile","params","checkDoctorPhoneNumberExists","post","formData","body","registerDoctor","put","updateDoctor","updated","id","recordDoctorProfileView","comment","addComment","getSpecialties","specialtyId","parseInt","isNaN","error","getSubSpecialtiesById","queryParams","filterServicesById","dataReviews","insertReviews","getReviews","consultation_types","doctorSchadules","scheduleID","doctorScheduleTimeAvailability","likes","toggleLike","booked","fetchServices"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { Authorization } from \"../../middlewares/authorization\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DoctorsService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/doctors\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const filters = {\r\n      name: req.query.name as string,\r\n      service_id: req.query.service_id as string,\r\n      specialty_id: req.query.specialty_id as string,\r\n      city_id: req.query.city_id as string,\r\n      doctor_id: req.query.doctor_id as string,\r\n      minRating: req.query.minRating ? parseFloat(req.query.minRating as string) : undefined,\r\n      maxRating: req.query.maxRating ? parseFloat(req.query.maxRating as string) : undefined,\r\n    };\r\n    const data = await DoctorsService.getDoctors(filters);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/getMostPopularDoctor\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DoctorsService.getMostPopularDoctors();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await DoctorsService.checkDoctorPhoneNumberExists(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/add-doctor`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.registerDoctor(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/doctor-detial/:doctorId`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const doctorId = +req.params.doctorId;\r\n//     const data = await DoctorsService.doctorDetial(doctorId);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n\r\nrouter.put(\r\n  \"/admin/updateDoctor\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.updateDoctor(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/countDoctorClick`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const id = req.body.id;\r\n    const data = DoctorsService.recordDoctorProfileView(id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/addComment`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const comment = req.body.comment;\r\n    const data = await DoctorsService.addComment(comment);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/getSpecialties`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getSpecialties();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/get-sub-specialties/:specialtyId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const specialtyId = parseInt(req.params.specialtyId, 10);\r\n\r\n    if (isNaN(specialtyId)) {\r\n      return res.status(400).json({ error: \"Invalid specialty ID\" });\r\n    }\r\n\r\n    const data = await DoctorsService.getSubSpecialtiesById(specialtyId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/filterSpecialtyById/:id`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const queryParams = +req.params.id;\r\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\nrouter.get(\r\n  `/admin/filterServicesById/:id`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const queryParams = +req.params.id;\r\n    const data = await DoctorsService.filterServicesById(queryParams);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  `/admin/insertReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const dataReviews = req.body;\r\n    const data = await DoctorsService.insertReviews(dataReviews);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/getReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getReviews();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/doctors/:id/doctor_schedules\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctor_id = +req.params.id;\r\n    const consultation_types = req.query.consultation_types;\r\n    const data = await DoctorsService.doctorSchadules(\r\n      doctor_id,\r\n      consultation_types\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  \"/doctors/:scheduleID/schedule-time-availability\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const scheduleID = +req.params.scheduleID;\r\n    const data = await DoctorsService.doctorScheduleTimeAvailability(\r\n      scheduleID\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/doctors/:doctor_id/like`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const likes = req.body.formData;\r\n    const data = await DoctorsService.toggleLike(likes);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n\r\nrouter.put(\r\n  `/doctors/:id/booked`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const id = +req.params.id;\r\n    const data = await DoctorsService.booked(id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/doctors/services`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.fetchServices();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1740631163522},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DoctorsService = void 0;\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nclass DoctorsService {\n  static getDoctors(filters) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctors)(filters);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getMostPopularDoctors() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMostPopularDoctors)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkDoctorPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  // public static async doctorDetial(doctortId: number) {\n  //   const data = await doctorDetail(doctortId);\n  //   if (data) {\n  //     return { message: \"ok\", data };\n  //   } else {\n  //     return null;\n  //   }\n  // }\n  static updateDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static recordDoctorProfileView(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.recordDoctorProfileView)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addComment(comment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addComment)(comment);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSpecialties() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSpecialties)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSubSpecialtiesById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSubSpecialtiesById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterSpecialtyById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterSpecialtyById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterServicesById(serviceId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterServicesById)(serviceId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static insertReviews(reviewData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const checkExistingFeedback = yield (0, db_1.existingFeedback)(reviewData);\n      if (checkExistingFeedback.length > 0) {\n        throw new response_error_1.ResponseError.BadRequest(\"You have already submitted feedback for this doctor.\");\n      } else {\n        const data = yield (0, db_1.insertReviews)(reviewData);\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static getReviews() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getReviews)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorSchadules(doctor_id, consultation_types) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorSchadules)(doctor_id, consultation_types);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorScheduleTimeAvailability(scheduleID) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorScheduleTimeAvailability)(scheduleID);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static booked(timeID) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.booked)(timeID);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static fetchServices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getServices)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static toggleLike(likeInfo) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.like)(likeInfo);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.DoctorsService = DoctorsService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNwb25zZV9lcnJvcl8xIiwicmVxdWlyZSIsImRiXzEiLCJEb2N0b3JzU2VydmljZSIsImdldERvY3RvcnMiLCJmaWx0ZXJzIiwiZGF0YSIsIm1lc3NhZ2UiLCJnZXRNb3N0UG9wdWxhckRvY3RvcnMiLCJjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzIiwibW9iaWxlIiwicmVnaXN0ZXJEb2N0b3IiLCJmb3JtRGF0YSIsImFkZERvY3RvciIsInVwZGF0ZURvY3RvciIsInJlY29yZERvY3RvclByb2ZpbGVWaWV3IiwiaWQiLCJhZGRDb21tZW50IiwiY29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwiZ2V0U3ViU3BlY2lhbHRpZXNCeUlkIiwic3BlY2lhbHR5SWQiLCJmaWx0ZXJTcGVjaWFsdHlCeUlkIiwiZmlsdGVyU2VydmljZXNCeUlkIiwic2VydmljZUlkIiwiaW5zZXJ0UmV2aWV3cyIsInJldmlld0RhdGEiLCJjaGVja0V4aXN0aW5nRmVlZGJhY2siLCJleGlzdGluZ0ZlZWRiYWNrIiwibGVuZ3RoIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yX2lkIiwiY29uc3VsdGF0aW9uX3R5cGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5Iiwic2NoZWR1bGVJRCIsImJvb2tlZCIsInRpbWVJRCIsImZldGNoU2VydmljZXMiLCJnZXRTZXJ2aWNlcyIsInRvZ2dsZUxpa2UiLCJsaWtlSW5mbyIsImxpa2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21tZW50c0RUTyxcclxuICBEb2N0b3JzRFRPLFxyXG4gIGxpa2VEVE8sXHJcbiAgUmV2aWV3c0RUTyxcclxufSBmcm9tIFwiLi4vLi4vbW9kZWxzL2RvY3RvcnNcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7XHJcbiAgYWRkQ29tbWVudCxcclxuICBhZGREb2N0b3IsXHJcbiAgYm9va2VkLFxyXG4gIGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMsXHJcbiAgZG9jdG9yU2NoYWR1bGVzLFxyXG4gIGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eSxcclxuICBleGlzdGluZ0ZlZWRiYWNrLFxyXG4gIGZpbHRlclNlcnZpY2VzQnlJZCxcclxuICBmaWx0ZXJTcGVjaWFsdHlCeUlkLFxyXG4gIGdldERvY3RvcnMsXHJcbiAgZ2V0TW9zdFBvcHVsYXJEb2N0b3JzLFxyXG4gIGdldFJldmlld3MsXHJcbiAgZ2V0U2VydmljZXMsXHJcbiAgZ2V0U3BlY2lhbHRpZXMsXHJcbiAgZ2V0U3ViU3BlY2lhbHRpZXNCeUlkLFxyXG4gIGluc2VydFJldmlld3MsXHJcbiAgbGlrZSxcclxuICByZWNvcmREb2N0b3JQcm9maWxlVmlldyxcclxuICB1cGRhdGVEb2N0b3IsXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEb2N0b3JzU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXREb2N0b3JzKGZpbHRlcnM6IHtcclxuICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIGNpdHlfaWQ/OiBzdHJpbmc7XHJcbiAgICBkb2N0b3JfaWQ/OiBzdHJpbmc7XHJcbiAgICBtaW5SYXRpbmc/OiBudW1iZXI7XHJcbiAgICBtYXhSYXRpbmc/OiBudW1iZXI7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERvY3RvcnMoZmlsdGVycyk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRNb3N0UG9wdWxhckRvY3RvcnMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TW9zdFBvcHVsYXJEb2N0b3JzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMoXHJcbiAgICBtb2JpbGU6IHN0cmluZ1xyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMobW9iaWxlKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyRG9jdG9yKGZvcm1EYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgZG9jdG9yRGV0aWFsKGRvY3RvcnRJZDogbnVtYmVyKSB7XHJcbiAgLy8gICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yRGV0YWlsKGRvY3RvcnRJZCk7XHJcbiAgLy8gICBpZiAoZGF0YSkge1xyXG4gIC8vICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAvLyAgIH0gZWxzZSB7XHJcbiAgLy8gICAgIHJldHVybiBudWxsO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZURvY3Rvcihmb3JtRGF0YTogRG9jdG9yc0RUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZURvY3Rvcihmb3JtRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWNvcmREb2N0b3JQcm9maWxlVmlldyhpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcoaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgYWRkQ29tbWVudChjb21tZW50OiBDb21tZW50c0RUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZENvbW1lbnQoY29tbWVudCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFNwZWNpYWx0aWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFNwZWNpYWx0aWVzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFN1YlNwZWNpYWx0aWVzQnlJZChzcGVjaWFsdHlJZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0U3ViU3BlY2lhbHRpZXNCeUlkKHNwZWNpYWx0eUlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZmlsdGVyU3BlY2lhbHR5QnlJZChzcGVjaWFsdHlJZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZmlsdGVyU3BlY2lhbHR5QnlJZChzcGVjaWFsdHlJZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGZpbHRlclNlcnZpY2VzQnlJZChzZXJ2aWNlSWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbHRlclNlcnZpY2VzQnlJZChzZXJ2aWNlSWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhOiBSZXZpZXdzRFRPKSB7XHJcbiAgICBjb25zdCBjaGVja0V4aXN0aW5nRmVlZGJhY2sgPSBhd2FpdCBleGlzdGluZ0ZlZWRiYWNrKHJldmlld0RhdGEpO1xyXG4gICAgaWYgKGNoZWNrRXhpc3RpbmdGZWVkYmFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXHJcbiAgICAgICAgXCJZb3UgaGF2ZSBhbHJlYWR5IHN1Ym1pdHRlZCBmZWVkYmFjayBmb3IgdGhpcyBkb2N0b3IuXCJcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBpbnNlcnRSZXZpZXdzKHJldmlld0RhdGEpO1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UmV2aWV3cygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRSZXZpZXdzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JTY2hhZHVsZXMoXHJcbiAgICBkb2N0b3JfaWQ6IG51bWJlcixcclxuICAgIGNvbnN1bHRhdGlvbl90eXBlczogYW55XHJcbiAgKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yU2NoYWR1bGVzKGRvY3Rvcl9pZCwgY29uc3VsdGF0aW9uX3R5cGVzKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KHNjaGVkdWxlSUQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eShzY2hlZHVsZUlEKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGJvb2tlZCh0aW1lSUQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGJvb2tlZCh0aW1lSUQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmZXRjaFNlcnZpY2VzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFNlcnZpY2VzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB0b2dnbGVMaWtlKGxpa2VJbmZvOiBsaWtlRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgbGlrZShsaWtlSW5mbyk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLE1BQUFBLGdCQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxJQUFBLEdBQUFELE9BQUE7QUFzQkEsTUFBYUUsY0FBYztFQUNsQixPQUFhQyxVQUFVQSxDQUFDQyxPQU85Qjs7TUFDQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFFLFVBQVUsRUFBQ0MsT0FBTyxDQUFDO01BQ3RDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRSxxQkFBcUJBLENBQUE7O01BQ3ZDLE1BQU1GLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQU0scUJBQXFCLEdBQUU7TUFDMUMsSUFBSUYsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUNNLE9BQWFHLDRCQUE0QkEsQ0FDOUNDLE1BQWM7O01BRWQsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTyw0QkFBNEIsRUFBQ0MsTUFBTSxDQUFDO01BQ3ZELElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU8sSUFBSTtNQUNiLENBQUMsTUFBTTtRQUNMLE9BQU8sS0FBSztNQUNkO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhSyxjQUFjQSxDQUFDQyxRQUFvQjs7TUFDckQsTUFBTU4sSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBVyxTQUFTLEVBQUNELFFBQVEsQ0FBQztN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","map":{"version":3,"names":["response_error_1","require","db_1","DoctorsService","getDoctors","filters","data","message","getMostPopularDoctors","checkDoctorPhoneNumberExists","mobile","registerDoctor","formData","addDoctor","updateDoctor","recordDoctorProfileView","id","addComment","comment","getSpecialties","getSubSpecialtiesById","specialtyId","filterSpecialtyById","filterServicesById","serviceId","insertReviews","reviewData","checkExistingFeedback","existingFeedback","length","ResponseError","BadRequest","getReviews","doctorSchadules","doctor_id","consultation_types","doctorScheduleTimeAvailability","scheduleID","booked","timeID","fetchServices","getServices","toggleLike","likeInfo","like","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/service.ts"],"sourcesContent":["import {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  addComment,\r\n  addDoctor,\r\n  booked,\r\n  checkDoctorPhoneNumberExists,\r\n  doctorSchadules,\r\n  doctorScheduleTimeAvailability,\r\n  existingFeedback,\r\n  filterServicesById,\r\n  filterSpecialtyById,\r\n  getDoctors,\r\n  getMostPopularDoctors,\r\n  getReviews,\r\n  getServices,\r\n  getSpecialties,\r\n  getSubSpecialtiesById,\r\n  insertReviews,\r\n  like,\r\n  recordDoctorProfileView,\r\n  updateDoctor,\r\n} from \"./db\";\r\n\r\nexport class DoctorsService {\r\n  public static async getDoctors(filters: {\r\n    name?: string;\r\n    id?: string;\r\n    city_id?: string;\r\n    doctor_id?: string;\r\n    minRating?: number;\r\n    maxRating?: number;\r\n  }) {\r\n    const data = await getDoctors(filters);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async getMostPopularDoctors() {\r\n    const data = await getMostPopularDoctors();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async checkDoctorPhoneNumberExists(\r\n    mobile: string\r\n  ): Promise<boolean> {\r\n    const data = await checkDoctorPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  public static async registerDoctor(formData: DoctorsDTO) {\r\n    const data = await addDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // public static async doctorDetial(doctortId: number) {\r\n  //   const data = await doctorDetail(doctortId);\r\n  //   if (data) {\r\n  //     return { message: \"ok\", data };\r\n  //   } else {\r\n  //     return null;\r\n  //   }\r\n  // }\r\n  public static async updateDoctor(formData: DoctorsDTO) {\r\n    const data = await updateDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async recordDoctorProfileView(id: number) {\r\n    const data = await recordDoctorProfileView(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addComment(comment: CommentsDTO) {\r\n    const data = await addComment(comment);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSpecialties() {\r\n    const data = await getSpecialties();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSubSpecialtiesById(specialtyId: number) {\r\n    const data = await getSubSpecialtiesById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterSpecialtyById(specialtyId: number) {\r\n    const data = await filterSpecialtyById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterServicesById(serviceId: number) {\r\n    const data = await filterServicesById(serviceId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async insertReviews(reviewData: ReviewsDTO) {\r\n    const checkExistingFeedback = await existingFeedback(reviewData);\r\n    if (checkExistingFeedback.length > 0) {\r\n      throw new ResponseError.BadRequest(\r\n        \"You have already submitted feedback for this doctor.\"\r\n      );\r\n    } else {\r\n      const data = await insertReviews(reviewData);\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async getReviews() {\r\n    const data = await getReviews();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async doctorSchadules(\r\n    doctor_id: number,\r\n    consultation_types: any\r\n  ) {\r\n    const data = await doctorSchadules(doctor_id, consultation_types);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorScheduleTimeAvailability(scheduleID: number) {\r\n    const data = await doctorScheduleTimeAvailability(scheduleID);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async booked(timeID: number) {\r\n    const data = await booked(timeID);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async fetchServices() {\r\n    const data = await getServices();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async toggleLike(likeInfo: likeDTO) {\r\n    const data = await like(likeInfo);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1740631171487},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorYup = void 0;\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\nexports.ExpressErrorYup = ExpressErrorYup;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXBfMSIsInJlcXVpcmUiLCJFeHByZXNzRXJyb3JZdXAiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvcnMiLCJqb2luIiwiaW5uZXIiLCJsZW5ndGgiLCJyZWR1Y2UiLCJhY2MiLCJjdXJWYWwiLCJwYXRoIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yWXVwKFxyXG4gICAgZXJyOiBhbnksXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlLFxyXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXHJcbikge1xyXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBZVVAgVkFMSURBVElPTicpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0ge1xyXG4gICAgICAgICAgICBjb2RlOiA0MjIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5lcnJvcnMuam9pbignPGJyLz4nKSB8fCAnWXVwIFZhbGlkYXRpb24gRXJyb3IgIScsXHJcbiAgICAgICAgICAgIGVycm9yczpcclxuICAgICAgICAgICAgICAgIGVyci5pbm5lci5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlcnIuaW5uZXIucmVkdWNlKChhY2M6IGFueSwgY3VyVmFsOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2Ake2N1clZhbC5wYXRofWBdID0gY3VyVmFsLm1lc3NhZ2UgfHwgY3VyVmFsLnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogeyBbYCR7ZXJyLnBhdGh9YF06IGVyci5tZXNzYWdlIHx8IGVyci50eXBlIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKGVycm9yKTtcclxuICAgIH1cclxuICAgIG5leHQoZXJyKVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCQyxlQUFlQSxDQUNqQ0MsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWUgsS0FBQSxDQUFBTyxlQUFlLEVBQUU7TUFDaENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO01BQ25DLE1BQU1DLEtBQUssR0FBRztRQUNWQyxJQUFJLEVBQUUsR0FBRztRQUNUQyxPQUFPLEVBQUVULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksd0JBQXdCO1FBQzdERCxNQUFNLEVBQ0ZWLEdBQUcsQ0FBQ1ksS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxHQUNkYixHQUFHLENBQUNZLEtBQUssQ0FBQ0UsTUFBTSxDQUFDLENBQUNDLEdBQVEsRUFBRUMsTUFBVyxLQUFJO1VBQ3pDRCxHQUFHLENBQUMsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxHQUFHRCxNQUFNLENBQUNQLE9BQU8sSUFBSU8sTUFBTSxDQUFDRSxJQUFJO1VBQ3JELE9BQU9ILEdBQUc7UUFDZCxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQ0o7VUFBRSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2lCLElBQUksRUFBRSxHQUFHakIsR0FBRyxDQUFDUyxPQUFPLElBQUlULEdBQUcsQ0FBQ2tCO1FBQUk7T0FDdkQ7TUFDRCxPQUFPaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNiLEtBQUssQ0FBQztJQUN0QztJQUNBSixJQUFJLENBQUNILEdBQUcsQ0FBQztFQUViLENBQUM7O0FBdkJEcUIsT0FBQSxDQUFBdEIsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["yup_1","require","ExpressErrorYup","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { ValidationError } from \"yup\";\r\n\r\nexport async function ExpressErrorYup(\r\n    err: any,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    if (err instanceof ValidationError) {\r\n        console.log('ERROR YUP VALIDATION');\r\n        const error = {\r\n            code: 422,\r\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\r\n            errors:\r\n                err.inner.length > 0\r\n                    ? err.inner.reduce((acc: any, curVal: any) => {\r\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\r\n                        return acc\r\n                    }, {})\r\n                    : { [`${err.path}`]: err.message || err.type }\r\n        }\r\n        return res.status(422).json(error);\r\n    }\r\n    next(err)\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,KAAA,GAAAC,OAAA;AAEA,SAAsBC,eAAeA,CACjCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYH,KAAA,CAAAO,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC;;AAvBDqB,OAAA,CAAAtB,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1727917785623},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedOrigins = void 0;\nexports.allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://192.168.50.207:8000\", \"http://172.26.144.1:8000\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsb3dlZE9yaWdpbnMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25zdGFudHNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhbGxvd2VkT3JpZ2lucyA9IFtcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJywgLy8gRnJvbnRlbmQgV2ViXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxuICAgIFwiaHR0cDovLzE5Mi4xNjguNTAuMjA3OjgwMDBcIixcbiAgICBcImh0dHA6Ly8xNzIuMjYuMTQ0LjE6ODAwMFwiXG4gICBdXG4gIFxuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFhQSxPQUFBLENBQUFDLGNBQWMsR0FBRyxDQUMxQix1QkFBdUI7QUFBRTtBQUN6Qix1QkFBdUI7QUFBRTtBQUN6Qiw0QkFBNEIsRUFDNUIsMEJBQTBCLENBQzFCIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","allowedOrigins"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\constants\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["export const allowedOrigins = [\n    'http://localhost:4200', // Frontend Web\n    'http://localhost:3000', // Frontend Web\n    \"http://192.168.50.207:8000\",\n    \"http://172.26.144.1:8000\"\n   ]\n  \n  "],"mappings":";;;;;;AAAaA,OAAA,CAAAC,cAAc,GAAG,CAC1B,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,4BAA4B,EAC5B,0BAA0B,CAC1B","ignoreList":[]}},"mtime":1729496606113},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorResponse = ExpressErrorResponse;\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nfunction generateErrorResponseError(e, code) {\n  return lodash_1.default.isObject(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.ResponseError.BaseResponse) {\n      return res.status(err.code).json(generateErrorResponseError(err, err.code));\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiZGVmYXVsdCIsImlzT2JqZWN0IiwibWVzc2FnZSIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJNdWx0ZXJFcnJvciIsInN0YXR1cyIsImpzb24iLCJSZXNwb25zZUVycm9yIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZnVuY3Rpb24gZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZTogRXJyb3IsIGNvZGU6IE51bWJlcikge1xuICByZXR1cm4gXy5pc09iamVjdChlLm1lc3NhZ2UpID8gZS5tZXNzYWdlIDogeyBjb2RlLCBtZXNzYWdlOiBlLm1lc3NhZ2UgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yUmVzcG9uc2UoXG4gIGVycjogYW55LFxuICByZXE6IFJlcXVlc3QsXG4gIHJlczogUmVzcG9uc2UsXG4gIG5leHQ6IE5leHRGdW5jdGlvblxuKSB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBtdWx0ZXIuTXVsdGVyRXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZXJyLCA0MDApKVxuICB9XG5cbiAgaWYgKGVyciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyhlcnIuY29kZSlcbiAgICAgIC5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgZXJyLmNvZGUpKVxuICB9XG4gIG5leHQoZXJyKVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQUEsT0FBQSxDQUFBQyxvQkFBQSxHQUFBQSxvQkFBQTtBQVZBLE1BQUFDLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFHQSxNQUFBRSxnQkFBQSxHQUFBRixPQUFBO0FBRUEsU0FBU0csMEJBQTBCQSxDQUFDQyxDQUFRLEVBQUVDLElBQVk7RUFDeEQsT0FBT0osUUFBQSxDQUFBSyxPQUFDLENBQUNDLFFBQVEsQ0FBQ0gsQ0FBQyxDQUFDSSxPQUFPLENBQUMsR0FBR0osQ0FBQyxDQUFDSSxPQUFPLEdBQUc7SUFBRUgsSUFBSTtJQUFFRyxPQUFPLEVBQUVKLENBQUMsQ0FBQ0k7RUFBTyxDQUFFO0FBQ3pFO0FBRUEsU0FBc0JYLG9CQUFvQkEsQ0FDeENZLEdBQVEsRUFDUkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQixJQUFJSCxHQUFHLFlBQVlYLFFBQUEsQ0FBQVEsT0FBTSxDQUFDTyxXQUFXLEVBQUU7TUFDckMsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1osMEJBQTBCLENBQUNNLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNuRTtJQUVBLElBQUlBLEdBQUcsWUFBWVAsZ0JBQUEsQ0FBQWMsYUFBYSxDQUFDQyxZQUFZLEVBQUU7TUFDN0MsT0FBT04sR0FBRyxDQUNQRyxNQUFNLENBQUNMLEdBQUcsQ0FBQ0osSUFBSSxDQUFDLENBQ2hCVSxJQUFJLENBQUNaLDBCQUEwQixDQUFDTSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0osSUFBSSxDQUFDLENBQUM7SUFDcEQ7SUFDQU8sSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFDWCxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressErrorResponse","multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","default","isObject","message","err","req","res","next","MulterError","status","json","ResponseError","BaseResponse"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\nimport _ from 'lodash';\n\nimport { NextFunction, Request, Response } from 'express';\nimport {ResponseError} from '../modules/error/response_error';\n\nfunction generateErrorResponseError(e: Error, code: Number) {\n  return _.isObject(e.message) ? e.message : { code, message: e.message }\n}\n\nexport async function ExpressErrorResponse(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof multer.MulterError) {\n    return res.status(400).json(generateErrorResponseError(err, 400))\n  }\n\n  if (err instanceof ResponseError.BaseResponse) {\n    return res\n      .status(err.code)\n      .json(generateErrorResponseError(err, err.code))\n  }\n  next(err)\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUAA,OAAA,CAAAC,oBAAA,GAAAA,oBAAA;AAVA,MAAAC,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAAE,gBAAA,GAAAF,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAOJ,QAAA,CAAAK,OAAC,CAACC,QAAQ,CAACH,CAAC,CAACI,OAAO,CAAC,GAAGJ,CAAC,CAACI,OAAO,GAAG;IAAEH,IAAI;IAAEG,OAAO,EAAEJ,CAAC,CAACI;EAAO,CAAE;AACzE;AAEA,SAAsBX,oBAAoBA,CACxCY,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAQ,OAAM,CAACO,WAAW,EAAE;MACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAc,aAAa,CAACC,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPG,MAAM,CAACL,GAAG,CAACJ,IAAI,CAAC,CAChBU,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACJ,IAAI,CAAC,CAAC;IACpD;IACAO,IAAI,CAACH,GAAG,CAAC;EACX,CAAC","ignoreList":[]}},"mtime":1738401141055},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressAutoHandleTransaction = void 0;\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once(\"finish\", () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log(\"AUTO COMMIT!!!\");\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\nexports.ExpressAutoHandleTransaction = ExpressAutoHandleTransaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsIl90cmFuc2FjdGlvbiIsIm9uY2UiLCJ0cmFuc2FjdGlvbktleXMiLCJPYmplY3QiLCJrZXlzIiwiaSIsImxlbmd0aCIsInR4biIsImZpbmlzaGVkIiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiY29tbWl0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2F1dG9faGFuZGxlX3RyYW5zYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSBcInNlcXVlbGl6ZVwiO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXNwb25zZSwgUmVxdWVzdCB9IGZyb20gXCJleHByZXNzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKFxuICByZXE6IGFueSxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxuICByZXEuX3RyYW5zYWN0aW9uID0gcmVxLl90cmFuc2FjdGlvbiB8fCB7fTtcblxuICByZXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB7XG4gICAgY29uc3QgeyBfdHJhbnNhY3Rpb24gfSA9IHJlcTtcblxuICAgIGlmICghX3RyYW5zYWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdHJhbnNhY3Rpb25LZXlzID0gT2JqZWN0LmtleXMoX3RyYW5zYWN0aW9uKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zYWN0aW9uS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdHhuID0gX3RyYW5zYWN0aW9uW3RyYW5zYWN0aW9uS2V5c1tpXV0gYXMgVHJhbnNhY3Rpb24gJiB7XG4gICAgICAgIGZpbmlzaGVkPzogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIGlmICghdHhuPy5maW5pc2hlZCkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IHJlcS5vcmlnaW5hbFVybDtcbiAgICAgICAgY29uc29sZS53YXJuKGBlbmRwb2ludCAke2VuZHBvaW50fSBwb3RlbnRpYWxseSBjYW4gbGVhZCB0byBidWdgKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJBVVRPIENPTU1JVCEhIVwiKTtcbiAgICAgICAgdHhuLmNvbW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbmV4dCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxTQUFzQkEsNEJBQTRCQSxDQUNoREMsR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQjtJQUNBRixHQUFHLENBQUNHLFlBQVksR0FBR0gsR0FBRyxDQUFDRyxZQUFZLElBQUksRUFBRTtJQUV6Q0YsR0FBRyxDQUFDRyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQUs7TUFDdEIsTUFBTTtRQUFFRDtNQUFZLENBQUUsR0FBR0gsR0FBRztNQUU1QixJQUFJLENBQUNHLFlBQVksRUFBRTtRQUNqQjtNQUNGO01BRUEsTUFBTUUsZUFBZSxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ0osWUFBWSxDQUFDO01BQ2pELEtBQUssSUFBSUssQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxlQUFlLENBQUNJLE1BQU0sRUFBRUQsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsRCxNQUFNRSxHQUFHLEdBQUdQLFlBQVksQ0FBQ0UsZUFBZSxDQUFDRyxDQUFDLENBQUMsQ0FFMUM7UUFDRCxJQUFJLEVBQUNFLEdBQUcsYUFBSEEsR0FBRyx1QkFBSEEsR0FBRyxDQUFFQyxRQUFRLEdBQUU7VUFDbEIsTUFBTUMsUUFBUSxHQUFHWixHQUFHLENBQUNhLFdBQVc7VUFDaENDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLFlBQVlILFFBQVEsOEJBQThCLENBQUM7VUFDaEVFLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixDQUFDO1VBQzdCTixHQUFHLENBQUNPLE1BQU0sRUFBRTtRQUNkO01BQ0Y7SUFDRixDQUFDLENBQUM7SUFFRmYsSUFBSSxFQUFFO0VBQ1IsQ0FBQzs7QUE5QkRnQixPQUFBLENBQUFuQiw0QkFBQSxHQUFBQSw0QkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from \"sequelize\";\nimport { NextFunction, Response, Request } from \"express\";\n\nexport async function ExpressAutoHandleTransaction(\n  req: any,\n  res: Response,\n  next: NextFunction\n) {\n  // Ensure _transaction is initialized\n  req._transaction = req._transaction || {};\n\n  res.once(\"finish\", () => {\n    const { _transaction } = req;\n\n    if (!_transaction) {\n      return;\n    }\n\n    const transactionKeys = Object.keys(_transaction);\n    for (let i = 0; i < transactionKeys.length; i += 1) {\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\n        finished?: string;\n      };\n      if (!txn?.finished) {\n        const endpoint = req.originalUrl;\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n        console.log(\"AUTO COMMIT!!!\");\n        txn.commit();\n      }\n    }\n  });\n\n  next();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAsBA,4BAA4BA,CAChDC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC;;AA9BDgB,OAAA,CAAAnB,4BAAA,GAAAA,4BAAA","ignoreList":[]}},"mtime":1725611830099},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medicine\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.router.put(\"/medicine/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const {\n      id\n    } = req.params;\n    const data = yield service_1.MedicineService.updateIsFavorite(id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsInB1dCIsInVwZGF0ZUlzRmF2b3JpdGUiLCJpc0Zhdm9yaXRlIiwiYm9keSIsImlkIiwicGFyYW1zIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbWVkaWNpbmUvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyBNZWRpY2luZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvbWVkaWNpbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TWVkaWNpbmUocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLmdldE1lZGljaW5lKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wdXQoXHJcbiAgXCIvbWVkaWNpbmUvOmlkL2Zhdm9yaXRlXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUlzRmF2b3JpdGUoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHsgaXNGYXZvcml0ZSB9ID0gcmVxLmJvZHk7IC8vIEdldCB0aGUgaXNGYXZvcml0ZSB2YWx1ZSBmcm9tIHRoZSByZXF1ZXN0IGJvZHlcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLnVwZGF0ZUlzRmF2b3JpdGUoaWQsIGlzRmF2b3JpdGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUMsUUFBQSxDQUFBRyxNQUFNLENBQUNDLEdBQUcsQ0FDUixXQUFXLEVBQ1gsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNKLFdBQVcsRUFBRTtJQUNoRCxNQUFNSyxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxJQUFJRSxhQUFhLEVBQUU7TUFDakIsT0FBT0gsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWCxRQUFBLENBQUFHLE1BQU0sQ0FBQ1ksR0FBRyxDQUNSLHdCQUF3QixFQUN4QixJQUFBakIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZVcsZ0JBQWdCQSxDQUMxQ1QsR0FBWSxFQUNaQyxHQUFhOztJQUViLE1BQU07TUFBRVM7SUFBVSxDQUFFLEdBQUdWLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLENBQUM7SUFDakMsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR1osR0FBRyxDQUFDYSxNQUFNO0lBQ3pCLE1BQU1YLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ00sZ0JBQWdCLENBQUNHLEVBQUUsRUFBRUYsVUFBVSxDQUFDO0lBQ25FLE1BQU1OLGFBQWEsR0FBR1YsY0FBQSxDQUFBVyxhQUFhLENBQUNSLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0lBQzdDLElBQUlFLGFBQWEsRUFBRTtNQUNqQixPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","json","put","updateIsFavorite","isFavorite","body","id","params"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medicine/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medicine\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medicine/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const { id } = req.params;\r\n    const data = await MedicineService.updateIsFavorite(id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,WAAW,EACX,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACY,GAAG,CACR,wBAAwB,EACxB,IAAAjB,eAAA,CAAAO,YAAY,EAAC,SAAeW,gBAAgBA,CAC1CT,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAES;IAAU,CAAE,GAAGV,GAAG,CAACW,IAAI,CAAC,CAAC;IACjC,MAAM;MAAEC;IAAE,CAAE,GAAGZ,GAAG,CAACa,MAAM;IACzB,MAAMX,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACM,gBAAgB,CAACG,EAAE,EAAEF,UAAU,CAAC;IACnE,MAAMN,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIE,aAAa,EAAE;MACjB,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1729594162966},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medicine\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiaWQiLCJpc0Zhdm9yaXRlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG1lZGljaW5lXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL21lZGljaW5lL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TWVkaWNpbmUsIHVwZGF0ZUlzRmF2b3JpdGUgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVkaWNpbmVTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldE1lZGljaW5lKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE1lZGljaW5lKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlSXNGYXZvcml0ZShpZDogc3RyaW5nLCBpc0Zhdm9yaXRlOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlSXNGYXZvcml0ZShpZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGdCQUFnQkEsQ0FBQ0MsRUFBVSxFQUFFQyxVQUFtQjs7TUFDbEUsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTSxnQkFBZ0IsRUFBQ0MsRUFBRSxFQUFFQyxVQUFVLENBQUM7TUFDbkQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","id","isFavorite","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medicine/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,EAAU,EAAEC,UAAmB;;MAClE,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,EAAE,EAAEC,UAAU,CAAC;MACnD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729593055038},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllDiseases\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DiseasesService.getAllDiseases();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/getDiseaseSubcategories/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const disease_id = req.params.id;\n  const data = yield service_1.DiseasesService.getDiseaseSubcategories(disease_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJEaXNlYXNlc1NlcnZpY2UiLCJnZXRBbGxEaXNlYXNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJkaXNlYXNlX2lkIiwicGFyYW1zIiwiaWQiLCJnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRpc2Vhc2VzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2Rpc2Vhc2VzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgRGlzZWFzZXNTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9nZXRBbGxEaXNlYXNlc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRGlzZWFzZXNTZXJ2aWNlLmdldEFsbERpc2Vhc2VzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMvOmlkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRpc2Vhc2VfaWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERpc2Vhc2VzU2VydmljZS5nZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNDLGNBQWMsRUFBRTtFQUNuRCxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0g7QUFDRFgsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUiw4QkFBOEIsRUFDOUIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTVMsVUFBVSxHQUFHWCxHQUFHLENBQUNZLE1BQU0sQ0FBQ0MsRUFBRTtFQUNoQyxNQUFNVixJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNVLHVCQUF1QixDQUFDSCxVQUFVLENBQUM7RUFDdEUsTUFBTUwsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsT0FBT0YsR0FBRyxDQUFDTyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0FBRTNELENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","DiseasesService","getAllDiseases","buildResponse","BuildResponse","status","code","json","disease_id","params","id","getDiseaseSubcategories"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/diseases/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DiseasesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllDiseases\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DiseasesService.getAllDiseases();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/getDiseaseSubcategories/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const disease_id = req.params.id;\r\n    const data = await DiseasesService.getDiseaseSubcategories(disease_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACC,cAAc,EAAE;EACnD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,8BAA8B,EAC9B,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,UAAU,GAAGX,GAAG,CAACY,MAAM,CAACC,EAAE;EAChC,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACU,uBAAuB,CAACH,UAAU,CAAC;EACtE,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1739626768893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DiseasesService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass DiseasesService {\n  static getAllDiseases() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDisease)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static getDiseaseSubcategories(disease_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDiseaseSubcategories)(disease_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.DiseasesService = DiseasesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkRpc2Vhc2VzU2VydmljZSIsImdldEFsbERpc2Vhc2VzIiwiZGF0YSIsImdldERpc2Vhc2UiLCJtZXNzYWdlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJkaXNlYXNlX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRpc2Vhc2VzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2Rpc2Vhc2VzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGlzZWFzZSwgZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGlzZWFzZXNTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbERpc2Vhc2VzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERpc2Vhc2UoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxlQUFlO0VBQ25CLE9BQWFDLGNBQWNBLENBQUE7O01BQ2hDLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUssVUFBVSxHQUFFO01BQy9CLElBQUlELElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUUsT0FBTyxFQUFFLGVBQWU7VUFBRUYsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7O0VBQ00sT0FBYUcsdUJBQXVCQSxDQUFDQyxVQUFrQjs7TUFDNUQsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTyx1QkFBdUIsRUFBQ0MsVUFBVSxDQUFDO01BQ3RELElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUUsT0FBTyxFQUFFLGVBQWU7VUFBRUYsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7OztBQWhCSEssT0FBQSxDQUFBUCxlQUFBLEdBQUFBLGVBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","DiseasesService","getAllDiseases","data","getDisease","message","getDiseaseSubcategories","disease_id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/diseases/service.ts"],"sourcesContent":["import { getDisease, getDiseaseSubcategories } from \"../../bin/db\";\r\n\r\nexport class DiseasesService {\r\n  public static async getAllDiseases() {\r\n    const data = await getDisease();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async getDiseaseSubcategories(disease_id: string) {\r\n    const data = await getDiseaseSubcategories(disease_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,UAAU,GAAE;MAC/B,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaG,uBAAuBA,CAACC,UAAkB;;MAC5D,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAO,uBAAuB,EAACC,UAAU,CAAC;MACtD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729493177934},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medications\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/medications/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const medication_id = req.params.id;\n    const data = yield service_1.MedicineService.updateIsFavorite(medication_id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJwdXQiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiaXNGYXZvcml0ZSIsImJvZHkiLCJtZWRpY2F0aW9uX2lkIiwicGFyYW1zIiwiaWQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxtZWRpY2F0aW9uc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9tZWRpY2F0aW9ucy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IE1lZGljaW5lU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9tZWRpY2F0aW9uc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXRNZWRpY2luZShyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBNZWRpY2luZVNlcnZpY2UuZ2V0TWVkaWNpbmUoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wdXQoXHJcbiAgXCIvbWVkaWNhdGlvbnMvOmlkL2Zhdm9yaXRlXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUlzRmF2b3JpdGUoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHsgaXNGYXZvcml0ZSB9ID0gcmVxLmJvZHk7IC8vIEdldCB0aGUgaXNGYXZvcml0ZSB2YWx1ZSBmcm9tIHRoZSByZXF1ZXN0IGJvZHlcclxuICAgIGNvbnN0IG1lZGljYXRpb25faWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IE1lZGljaW5lU2VydmljZS51cGRhdGVJc0Zhdm9yaXRlKG1lZGljYXRpb25faWQsIGlzRmF2b3JpdGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBR0FDLFFBQUEsQ0FBQUcsTUFBTSxDQUFDQyxHQUFHLENBQ1IsY0FBYyxFQUNkLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDSixXQUFXLEVBQUU7SUFDaEQsTUFBTUssYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBRTNELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFgsUUFBQSxDQUFBRyxNQUFNLENBQUNhLEdBQUcsQ0FDUiwyQkFBMkIsRUFDM0IsSUFBQWxCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVZLGdCQUFnQkEsQ0FDMUNWLEdBQVksRUFDWkMsR0FBYTs7SUFFYixNQUFNO01BQUVVO0lBQVUsQ0FBRSxHQUFHWCxHQUFHLENBQUNZLElBQUksQ0FBQyxDQUFDO0lBQ2pDLE1BQU1DLGFBQWEsR0FBR2IsR0FBRyxDQUFDYyxNQUFNLENBQUNDLEVBQUU7SUFDbkMsTUFBTWIsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDTyxnQkFBZ0IsQ0FBQ0csYUFBYSxFQUFFRixVQUFVLENBQUM7SUFDOUUsTUFBTVAsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBRTNELENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","code","json","put","updateIsFavorite","isFavorite","body","medication_id","params","id"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medications/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medications\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medications/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const medication_id = req.params.id;\r\n    const data = await MedicineService.updateIsFavorite(medication_id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACa,GAAG,CACR,2BAA2B,EAC3B,IAAAlB,eAAA,CAAAO,YAAY,EAAC,SAAeY,gBAAgBA,CAC1CV,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAEU;IAAU,CAAE,GAAGX,GAAG,CAACY,IAAI,CAAC,CAAC;IACjC,MAAMC,aAAa,GAAGb,GAAG,CAACc,MAAM,CAACC,EAAE;IACnC,MAAMb,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACO,gBAAgB,CAACG,aAAa,EAAEF,UAAU,CAAC;IAC9E,MAAMP,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1739626768870},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(medication_id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(medication_id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwibWVkaWNhdGlvbl9pZCIsImlzRmF2b3JpdGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNhdGlvbnNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbWVkaWNhdGlvbnMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRNZWRpY2luZSwgdXBkYXRlSXNGYXZvcml0ZSB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZWRpY2luZVNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0TWVkaWNpbmUoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TWVkaWNpbmUoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBva2AsIGRhdGEgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVJc0Zhdm9yaXRlKG1lZGljYXRpb25faWQ6IHN0cmluZywgaXNGYXZvcml0ZTogYm9vbGVhbikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGdCQUFnQkEsQ0FBQ0MsYUFBcUIsRUFBRUMsVUFBbUI7O01BQzdFLE1BQU1KLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQU0sZ0JBQWdCLEVBQUNDLGFBQWEsRUFBRUMsVUFBVSxDQUFDO01BQzlELElBQUlKLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","medication_id","isFavorite","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/medications/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(medication_id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(medication_id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,aAAqB,EAAEC,UAAmB;;MAC7E,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,aAAa,EAAEC,UAAU,CAAC;MAC9D,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1729845346693},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\npublic_1.router.post(\"/prescription-medicine\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield services_1.PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccHJlc2NyaXB0aW9uLW1lZGljaW5lXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3ByZXNjcmlwdGlvbi1tZWRpY2luZS9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXNcIjtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIFwiL3ByZXNjcmlwdGlvbi1tZWRpY2luZVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBpbnNlcnRFdmVudChyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGV2ZW50RGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZS5BZGRQcmVzY3JpcHRpb25NZWRpY25lKGV2ZW50RGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsVUFBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxJQUFJLENBQ1Qsd0JBQXdCLEVBQ3hCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsU0FBUyxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDMUIsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFVBQUEsQ0FBQVUsMkJBQTJCLENBQUNDLHNCQUFzQixDQUFDSixTQUFTLENBQUM7SUFDaEYsTUFBTUssYUFBYSxHQUFHZCxjQUFBLENBQUFlLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDTCxJQUFJLENBQUM7SUFDN0MsT0FBT0gsR0FBRyxDQUFDUyxNQUFNLENBQUNILGFBQWEsQ0FBQ0ksSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0wsYUFBYSxDQUFDO0VBRTNELENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","services_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","PrescriptionMedicineService","AddPrescriptionMedicne","buildResponse","BuildResponse","get","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/prescription-medicine/controller.ts"],"sourcesContent":["\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { PrescriptionMedicineService } from \"./services\";\r\n\r\nrouter.post(\r\n  \"/prescription-medicine\",\r\n  asyncHandler(async function insertEvent(req: any, res: any) {\r\n    const eventData = req.body;\r\n    const data = await PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,UAAA,CAAAU,2BAA2B,CAACC,sBAAsB,CAACJ,SAAS,CAAC;IAChF,MAAMK,aAAa,GAAGd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,IAAI,CAAC;IAC7C,OAAOH,GAAG,CAACS,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1739626768870},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrescriptionMedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PrescriptionMedicineService {\n  static AddPrescriptionMedicne(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const results = [];\n      for (const medicine of formData.medicine_name) {\n        const medicine_id = medicine.medication_id;\n        const data = yield (0, db_1.addPrescriptionMedicine)(formData, medicine_id);\n        results.push({\n          medicine_id,\n          result: data\n        });\n      }\n      if (results.length) {\n        return {\n          message: \"Insertaions completed\",\n          results\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PrescriptionMedicineService = PrescriptionMedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJmb3JtRGF0YSIsInJlc3VsdHMiLCJtZWRpY2luZSIsIm1lZGljaW5lX25hbWUiLCJtZWRpY2luZV9pZCIsIm1lZGljYXRpb25faWQiLCJkYXRhIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJwdXNoIiwicmVzdWx0IiwibGVuZ3RoIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwcmVzY3JpcHRpb24tbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL3NlcnZpY2VzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZFByZXNjcmlwdGlvbk1lZGljaW5lIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBBZGRQcmVzY3JpcHRpb25NZWRpY25lKGZvcm1EYXRhOiBhbnkpIHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgbWVkaWNpbmUgb2YgZm9ybURhdGEubWVkaWNpbmVfbmFtZSkge1xyXG4gICAgICBjb25zdCBtZWRpY2luZV9pZCA9IG1lZGljaW5lLm1lZGljYXRpb25faWQ7XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUoZm9ybURhdGEsIG1lZGljaW5lX2lkKTtcclxuICAgICAgcmVzdWx0cy5wdXNoKHsgbWVkaWNpbmVfaWQsIHJlc3VsdDogZGF0YSB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIkluc2VydGFpb25zIGNvbXBsZXRlZFwiLCByZXN1bHRzIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQywyQkFBMkI7RUFDL0IsT0FBYUMsc0JBQXNCQSxDQUFDQyxRQUFhOztNQUN0RCxNQUFNQyxPQUFPLEdBQUcsRUFBRTtNQUNsQixLQUFLLE1BQU1DLFFBQVEsSUFBSUYsUUFBUSxDQUFDRyxhQUFhLEVBQUU7UUFDN0MsTUFBTUMsV0FBVyxHQUFHRixRQUFRLENBQUNHLGFBQWE7UUFFMUMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQVYsSUFBQSxDQUFBVyx1QkFBdUIsRUFBQ1AsUUFBUSxFQUFFSSxXQUFXLENBQUM7UUFDakVILE9BQU8sQ0FBQ08sSUFBSSxDQUFDO1VBQUVKLFdBQVc7VUFBRUssTUFBTSxFQUFFSDtRQUFJLENBQUUsQ0FBQztNQUM3QztNQUNBLElBQUlMLE9BQU8sQ0FBQ1MsTUFBTSxFQUFFO1FBQ2xCLE9BQU87VUFBRUMsT0FBTyxFQUFFLHVCQUF1QjtVQUFFVjtRQUFPLENBQUU7TUFDdEQsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFkSFcsT0FBQSxDQUFBZCwyQkFBQSxHQUFBQSwyQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","PrescriptionMedicineService","AddPrescriptionMedicne","formData","results","medicine","medicine_name","medicine_id","medication_id","data","addPrescriptionMedicine","push","result","length","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/prescription-medicine/services.ts"],"sourcesContent":["import { addPrescriptionMedicine } from \"../../bin/db\";\r\n\r\nexport class PrescriptionMedicineService {\r\n  public static async AddPrescriptionMedicne(formData: any) {\r\n    const results = [];\r\n    for (const medicine of formData.medicine_name) {\r\n      const medicine_id = medicine.medication_id;\r\n\r\n      const data = await addPrescriptionMedicine(formData, medicine_id);\r\n      results.push({ medicine_id, result: data });\r\n    }\r\n    if (results.length) {\r\n      return { message: \"Insertaions completed\", results };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,2BAA2B;EAC/B,OAAaC,sBAAsBA,CAACC,QAAa;;MACtD,MAAMC,OAAO,GAAG,EAAE;MAClB,KAAK,MAAMC,QAAQ,IAAIF,QAAQ,CAACG,aAAa,EAAE;QAC7C,MAAMC,WAAW,GAAGF,QAAQ,CAACG,aAAa;QAE1C,MAAMC,IAAI,GAAG,MAAM,IAAAV,IAAA,CAAAW,uBAAuB,EAACP,QAAQ,EAAEI,WAAW,CAAC;QACjEH,OAAO,CAACO,IAAI,CAAC;UAAEJ,WAAW;UAAEK,MAAM,EAAEH;QAAI,CAAE,CAAC;MAC7C;MACA,IAAIL,OAAO,CAACS,MAAM,EAAE;QAClB,OAAO;UAAEC,OAAO,EAAE,uBAAuB;UAAEV;QAAO,CAAE;MACtD,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAdHW,OAAA,CAAAd,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1731313183961},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.saveAppointment = saveAppointment;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction saveAppointment(eventData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const insertEvent = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.appointments \n        (id, id,appointment_date, priority,event_title,created_at,updated_at,event_description,start_date,end_date,start_time,end_time)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n      values: [eventData.id, eventData.id, eventData.appointmentDate, eventData.priority, eventData.event_title, new Date(), new Date(), eventData.event_description, eventData.start_date, eventData.end_date, eventData.campaignTime.start_time, eventData.campaignTime.end_time]\n    });\n    return insertEvent;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwic2F2ZUFwcG9pbnRtZW50IiwibXlzcWxfMSIsInJlcXVpcmUiLCJldmVudERhdGEiLCJpbnNlcnRFdmVudCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImlkIiwiYXBwb2ludG1lbnREYXRlIiwicHJpb3JpdHkiLCJldmVudF90aXRsZSIsIkRhdGUiLCJldmVudF9kZXNjcmlwdGlvbiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsImNhbXBhaWduVGltZSIsInN0YXJ0X3RpbWUiLCJlbmRfdGltZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUFwcG9pbnRtZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XHJcbiAgY29uc3QgaW5zZXJ0RXZlbnQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzIFxyXG4gICAgICAgIChpZCwgaWQsYXBwb2ludG1lbnRfZGF0ZSwgcHJpb3JpdHksZXZlbnRfdGl0bGUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0LGV2ZW50X2Rlc2NyaXB0aW9uLHN0YXJ0X2RhdGUsZW5kX2RhdGUsc3RhcnRfdGltZSxlbmRfdGltZSlcclxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIGV2ZW50RGF0YS5pZCxcclxuICAgICAgICBldmVudERhdGEuaWQsXHJcbiAgICAgICAgZXZlbnREYXRhLmFwcG9pbnRtZW50RGF0ZSxcclxuICAgICAgICBldmVudERhdGEucHJpb3JpdHksXHJcbiAgICAgICAgZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXHJcbiAgICAgICAgZXZlbnREYXRhLnN0YXJ0X2RhdGUsXHJcbiAgICAgICAgZXZlbnREYXRhLmVuZF9kYXRlLFxyXG4gICAgICAgIGV2ZW50RGF0YS5jYW1wYWlnblRpbWUuc3RhcnRfdGltZSxcclxuICAgICAgICBldmVudERhdGEuY2FtcGFpZ25UaW1lLmVuZF90aW1lLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBpbnNlcnRFdmVudDtcclxufVxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUFBLE9BQUEsQ0FBQUMsZUFBQSxHQUFBQSxlQUFBO0FBRkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JGLGVBQWVBLENBQUNHLFNBQXVCOztJQUMzRCxNQUFNQyxXQUFXLEdBQUcsTUFBTSxJQUFBSCxPQUFBLENBQUFJLEtBQUssRUFDN0IsZUFBZUosT0FBQSxDQUFBSyxVQUFVOztxREFFd0IsRUFDakQ7TUFDRUMsTUFBTSxFQUFFLENBQ05KLFNBQVMsQ0FBQ0ssRUFBRSxFQUNaTCxTQUFTLENBQUNLLEVBQUUsRUFDWkwsU0FBUyxDQUFDTSxlQUFlLEVBQ3pCTixTQUFTLENBQUNPLFFBQVEsRUFDbEJQLFNBQVMsQ0FBQ1EsV0FBVyxFQUNyQixJQUFJQyxJQUFJLEVBQUUsRUFDVixJQUFJQSxJQUFJLEVBQUUsRUFDVlQsU0FBUyxDQUFDVSxpQkFBaUIsRUFDM0JWLFNBQVMsQ0FBQ1csVUFBVSxFQUNwQlgsU0FBUyxDQUFDWSxRQUFRLEVBQ2xCWixTQUFTLENBQUNhLFlBQVksQ0FBQ0MsVUFBVSxFQUNqQ2QsU0FBUyxDQUFDYSxZQUFZLENBQUNFLFFBQVE7S0FFbEMsQ0FDRjtJQUVELE9BQU9kLFdBQVc7RUFDcEIsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","saveAppointment","mysql_1","require","eventData","insertEvent","query","coreSchema","values","id","appointmentDate","priority","event_title","Date","event_description","start_date","end_date","campaignTime","start_time","end_time"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/appointment/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\nexport async function saveAppointment(eventData: IAppointment) {\r\n  const insertEvent = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.appointments \r\n        (id, id,appointment_date, priority,event_title,created_at,updated_at,event_description,start_date,end_date,start_time,end_time)\r\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n    {\r\n      values: [\r\n        eventData.id,\r\n        eventData.id,\r\n        eventData.appointmentDate,\r\n        eventData.priority,\r\n        eventData.event_title,\r\n        new Date(),\r\n        new Date(),\r\n        eventData.event_description,\r\n        eventData.start_date,\r\n        eventData.end_date,\r\n        eventData.campaignTime.start_time,\r\n        eventData.campaignTime.end_time,\r\n      ],\r\n    }\r\n  );\r\n\r\n  return insertEvent;\r\n}\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIAA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,eAAeA,CAACG,SAAuB;;IAC3D,MAAMC,WAAW,GAAG,MAAM,IAAAH,OAAA,CAAAI,KAAK,EAC7B,eAAeJ,OAAA,CAAAK,UAAU;;qDAEwB,EACjD;MACEC,MAAM,EAAE,CACNJ,SAAS,CAACK,EAAE,EACZL,SAAS,CAACK,EAAE,EACZL,SAAS,CAACM,eAAe,EACzBN,SAAS,CAACO,QAAQ,EAClBP,SAAS,CAACQ,WAAW,EACrB,IAAIC,IAAI,EAAE,EACV,IAAIA,IAAI,EAAE,EACVT,SAAS,CAACU,iBAAiB,EAC3BV,SAAS,CAACW,UAAU,EACpBX,SAAS,CAACY,QAAQ,EAClBZ,SAAS,CAACa,YAAY,CAACC,UAAU,EACjCd,SAAS,CAACa,YAAY,CAACE,QAAQ;KAElC,CACF;IAED,OAAOd,WAAW;EACpB,CAAC","ignoreList":[]}},"mtime":1738463217893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addDoctor = addDoctor;\nexports.like = like;\nexports.getDoctors = getDoctors;\nexports.getServices = getServices;\nexports.getMostPopularDoctors = getMostPopularDoctors;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.updateDoctor = updateDoctor;\nexports.recordDoctorProfileView = recordDoctorProfileView;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.getSubSpecialtiesById = getSubSpecialtiesById;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.getSuggestionsBySpecialty = getSuggestionsBySpecialty;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorSchadules = doctorSchadules;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nfunction addDoctor(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctors\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, new Date(), new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction like(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const existingLike = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ? AND patient_id = ?`, {\n      values: [data.doctor_id, data.patient_id]\n    });\n    if (existingLike.length > 0) {\n      // Unlike the doctor: Remove the like\n      yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.doctor_likes \n       WHERE doctor_id = ? AND patient_id = ?`, {\n        values: [data.doctor_id, data.patient_id]\n      });\n    } else {\n      // Like the doctor: Insert new like record\n      yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \n       VALUES (?, ?, ?)`, {\n        values: [data.doctor_id, data.patient_id, 1]\n      });\n    }\n    // Update the doctor's is_liked status based on the total likes\n    const totalLikes = yield (0, mysql_1.query)(`SELECT COUNT(*) AS count FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ?`, {\n      values: [data.doctor_id]\n    });\n    const isLiked = totalLikes[0].count > 0 ? 1 : 0;\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.doctors \n     SET is_liked = ? \n     WHERE id = ?`, {\n      values: [isLiked, data.doctor_id]\n    });\n    return {\n      success: true,\n      isLiked\n    };\n  });\n}\nfunction getDoctors(filters) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      let sql = `\n    SELECT \n      d.id, d.first_name,d.last_name,d.profile_img,  d.email, d.phone, d.specialty_id, d.insurance_id, d.click_count,\n      sp.name AS specialty_name, \n      i.name AS insurance_name,  \n      (SELECT AVG(rating) FROM ${mysql_1.coreSchema}.doctor_reviews r WHERE r.doctor_id = d.id) AS average_rating,\n      COUNT(r.id) AS total_reviews,\n      COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\n      COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\n      COALESCE(AVG(r.skill), 0) AS avg_skill,\n      COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\n      COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\n      CASE \n        WHEN EXISTS (SELECT 1 FROM ${mysql_1.coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \n        THEN 1 ELSE 0\n      END AS isLiked,\n\n      JSON_ARRAYAGG(\n        JSON_OBJECT(\n          'country', ld.country,\n          'latitude', ld.latitude,\n          'longitude', ld.longitude,\n          'address_line1', ld.address_line1,\n          'address_line2', ld.address_line2,\n          'zipcode', ld.zipcode,\n          'city',ci.name,\n          'state',ci.state\n        )\n      ) AS addresses\n\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialties sp ON d.specialty_id = sp.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_reviews r ON d.id = r.doctor_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_services ds ON d.service_id = ds.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.services s ON sp.id = s.specialty_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.insurances i ON d.insurance_id = i.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.cities ci ON ld.city_id = ci.id\n  `;\n      const conditions = [];\n      const values = [];\n      if (filters.doctor_id) {\n        conditions.push(\"d.id = ?\");\n        values.push(filters.doctor_id);\n      }\n      if (filters.name) {\n        conditions.push(\"CONCAT(d.first_name, ' ', d.last_name) LIKE ?\");\n        values.push(`%${filters.name}%`);\n      }\n      if (filters.specialty_id) {\n        conditions.push(\"sp.id = ?\");\n        values.push(filters.specialty_id);\n      }\n      if (filters.service_id) {\n        conditions.push(\"d.service_id = ?\");\n        values.push(filters.service_id);\n      }\n      if (filters.city_id) {\n        conditions.push(\"ld.city_id = ?\");\n        values.push(filters.city_id);\n      }\n      if (conditions.length) {\n        sql += \" WHERE \" + conditions.join(\" AND \");\n      }\n      sql += ` GROUP BY d.id, d.first_name, d.last_name,d.profile_img,d.email, d.phone, d.specialty_id, d.insurance_id, sp.name, i.name;`;\n      const havingConditions = [];\n      if (filters.minRating !== undefined) {\n        havingConditions.push(\"average_rating >= ?\");\n        values.push(filters.minRating);\n      }\n      if (filters.maxRating !== undefined) {\n        havingConditions.push(\"average_rating <= ?\");\n        values.push(filters.maxRating);\n      }\n      if (havingConditions.length) {\n        sql += \" HAVING \" + havingConditions.join(\" AND \");\n      }\n      console.log(\"Generated SQL:\", sql, values);\n      const result = yield (0, mysql_1.query)(sql, {\n        values: values\n      });\n      // if (filters.doctor_id) {\n      //   return result.length ? result[0] : null;\n      // }\n      return result ? result : null;\n    } catch (error) {\n      console.error(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction getServices() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.services`);\n    return result;\n  });\n}\nfunction getMostPopularDoctors() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT \n        d.*, \n        COALESCE(ld.id, 'No Location') AS location,\n        s.name AS specialty_name,\n        (SELECT AVG(r.rating) \n         FROM ${mysql_1.coreSchema}.ratings r \n         WHERE r.id = d.id) AS average_rating,\n        (SELECT COUNT(r.rating) \n         FROM ${mysql_1.coreSchema}.ratings r \n         WHERE r.id = d.id) AS total_ratings\n      FROM \n        ${mysql_1.coreSchema}.doctors d\n      LEFT JOIN \n        ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.id\n      LEFT JOIN \n        ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n      HAVING \n        total_ratings > 3\n      ORDER BY \n        average_rating DESC,\n        total_ratings DESC\n      LIMIT 10;\n      `);\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT mobile FROM ${mysql_1.coreSchema}.doctors\n      where mobile=?\n      `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\n// export async function doctorDetail(doctorId: number): Promise<any> {\n//   try {\n//     const sql = `\n//       SELECT \n//         d.*, \n//         COALESCE(ld.country, '') AS country,\n//         COALESCE(ld.latitude, 0) AS latitude,\n//         COALESCE(ld.longitude, 0) AS longitude,\n//         COALESCE(ld.address_line1, '') AS address_line1,\n//         COALESCE(ld.address_line2, '') AS address_line2,\n//         COALESCE(ld.zipcode, '') AS zipcode,\n//         COALESCE(AVG(r.rating), 0) AS average_rating,\n//         COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\n//         COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\n//         COALESCE(AVG(r.skill), 0) AS avg_skill,\n//         COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\n//         COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\n//         COUNT(r.id) AS total_reviews,\n//         COALESCE(GROUP_CONCAT(DISTINCT r.comment SEPARATOR ' | '), 'No comments') AS comments,\n//         s.name AS specialty_name,\n//         i.name AS insurance_name,\n//         CASE \n//           WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \n//           THEN 1 ELSE 0\n//         END AS isLiked\n//         JSON_ARRAYAGG(\n//         JSON_OBJECT(\n//           'country', ld.country,\n//           'latitude', ld.latitude,\n//           'longitude', ld.longitude,\n//           'address_line1', ld.address_line1,\n//           'address_line2', ld.address_line2,\n//           'zipcode', ld.zipcode,\n//           'city',ci.name,\n//           'state',ci.state\n//         )\n//       ) AS addresses\n//       FROM \n//         ${coreSchema}.doctors d\n//       LEFT JOIN \n//         ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id AND ld.is_primary = 1\n//       LEFT JOIN \n//         ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\n//       LEFT JOIN \n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       LEFT JOIN\n//         ${coreSchema}.insurances i ON d.insurance_id = i.id\n//       WHERE \n//         d.id = ?\n//       GROUP BY \n//         d.id,  ld.country, ld.latitude, ld.longitude, ld.address_line1, \n//         ld.address_line2, ld.zipcode, s.name, i.name;\n//     `;\n//     const result = await query<RowDataPacket[]>(sql, { values: [doctorId] });\n//     if (!result || result.length === 0) {\n//       return { message: \"Doctor not found\" };\n//     }\n//     return result[0]; // Return single doctor object instead of an array\n//   } catch (error) {\n//     console.error(\"Error fetching doctor details:\", error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction updateDoctor(doctorData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.doctors\n        SET name = ?\n        WHERE id = ?\n      `, {\n      values: [doctorData.first_name, doctorData.id]\n    });\n    return result;\n  });\n}\nfunction recordDoctorProfileView(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const updateResult = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.doctors\n      SET click_count = click_count + 1\n      WHERE id = ?\n      `, {\n        values: [id]\n      });\n      return updateResult;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction addComment(comment) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.comments\n     (id, id, comment_text, rating)\n         VALUES (?, ?, ?, ?)`, {\n      values: [comment.id, comment.id, comment.comment_text, comment.rating]\n    });\n    return result;\n  });\n}\nfunction getSpecialties() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT *\n       FROM ${mysql_1.coreSchema}.specialties`);\n    return result;\n  });\n}\nfunction getSubSpecialtiesById(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const limit = 20; // Default limit\n      const offset = 0; // Default offset\n      const result = yield (0, mysql_1.query)(`SELECT \n      s.id AS specialty_id,\n      s.name AS specialty_name,\n      s.images AS specialty_image,\n      ss.id AS sub_specialty_id,\n      ss.name AS sub_specialty_name,\n      ss.image_url AS sub_specialty_image\n    FROM ${mysql_1.coreSchema}.specialties s\n    LEFT JOIN ${mysql_1.coreSchema}.sub_specialties ss \n    ON s.id = ss.specialty_id\n    WHERE s.id = ? \n    ORDER BY ss.id;`, {\n        values: [specialtyId]\n      });\n      return result.map(row => ({\n        id: row.sub_specialty_id || null,\n        name: row.sub_specialty_name || \"N/A\",\n        images: row.sub_specialty_image || \"default_image.jpeg\"\n      }));\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterSpecialtyById(specialty) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n       SELECT \n        d.*, \n        COALESCE(ld.location, 'No Location') AS location,\n        s.name AS specialty_name,\n        (SELECT AVG(rating) \n         FROM ${mysql_1.coreSchema}.ratings r \n         WHERE r.id = d.id) AS average_rating\n      FROM \n        ${mysql_1.coreSchema}.doctors d\n      LEFT JOIN \n        ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.id\n      LEFT JOIN \n        ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n  \n      WHERE \n      s.id = ?;\n      `, {\n        values: [specialty]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"...\");\n    }\n  });\n}\nfunction getSuggestionsBySpecialty(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\n      FROM clinic_db.suggestions s\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\n      WHERE sp.id = ?;\n    `, [specialtyId]);\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterServicesById(serviceId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n   SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n    JOIN \n      ${mysql_1.coreSchema}.services srv  ON srv.specialty_id = s.id\n    WHERE \n    srv.id = ?;\n    `, {\n      values: [serviceId]\n    });\n    return result;\n  });\n}\nfunction existingFeedback(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`, {\n      values: [reviewData.user_id, reviewData.doctor_id]\n    });\n    return result;\n  });\n}\nfunction insertReviews(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_reviews\n        (doctor_id,\n          user_id,\n          comment,\n          recommendations,\n          rating,\n          professional_demeanor,\n          sufficient_time,\n          skill,\n          staff_behavior,\n          clinic_condition)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`, {\n        values: [reviewData.doctor_id, reviewData.user_id, reviewData.comment, reviewData.rating, reviewData.recommendations, reviewData.ratings.professional_demeanor, reviewData.ratings.sufficient_time, reviewData.ratings.skill, reviewData.ratings.staff_behavior, reviewData.ratings.clinic_condition]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction getReviews() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.reviews\n    `);\n    return result;\n  });\n}\nfunction doctorSchadules(doctor_id, consultation_types) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT id, doctor_id,appointment_date, day_of_week, start_time, end_time, is_available, consultation_types, consultation_mode \n      FROM ${mysql_1.coreSchema}.doctor_schedules\n      WHERE doctor_id = ? AND consultation_types = ?`, {\n        values: [doctor_id, consultation_types]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction doctorScheduleTimeAvailability(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT\n         dat.available_time,\n         dat.is_booked,\n         dat.id\n      FROM\n         ${mysql_1.coreSchema}.doctor_available_times dat\n      JOIN\n         ${mysql_1.coreSchema}.doctor_schedules ds\n      ON\n         ds.id = dat.doctor_schedule_id\n      WHERE\n         ds.id = ?;\n      `, {\n        values: [id]\n      });\n      return result;\n    } catch (error) {\n      console.error(error); // Better to use console.error for errors\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    }\n  });\n}\nfunction booked(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.doctor_available_times\n        SET is_booked = 1\n        WHERE id = ?;\n      `, {\n        values: [id]\n      });\n      return result;\n    } catch (error) {\n      console.error(error); // Better to use console.error for errors\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWRkRG9jdG9yIiwibGlrZSIsImdldERvY3RvcnMiLCJnZXRTZXJ2aWNlcyIsImdldE1vc3RQb3B1bGFyRG9jdG9ycyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJ1cGRhdGVEb2N0b3IiLCJyZWNvcmREb2N0b3JQcm9maWxlVmlldyIsImFkZENvbW1lbnQiLCJnZXRTcGVjaWFsdGllcyIsImdldFN1YlNwZWNpYWx0aWVzQnlJZCIsImZpbHRlclNwZWNpYWx0eUJ5SWQiLCJnZXRTdWdnZXN0aW9uc0J5U3BlY2lhbHR5IiwiZmlsdGVyU2VydmljZXNCeUlkIiwiZXhpc3RpbmdGZWVkYmFjayIsImluc2VydFJldmlld3MiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5IiwiYm9va2VkIiwibXlzcWxfMSIsInJlcXVpcmUiLCJyZXNwb25zZV9lcnJvcl8xIiwic2NoZW1hXzEiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInV1aWRfMSIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImZkUGFzc3dvcmQiLCJ2YWxpZFBhc3N3b3JkIiwiZG9jdG9yU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsImVycm9yIiwiUmVzcG9uc2VFcnJvciIsIlVuYXV0aG9yaXplZCIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiRGF0ZSIsImNvbnNvbGUiLCJtZXNzYWdlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJleGlzdGluZ0xpa2UiLCJkb2N0b3JfaWQiLCJwYXRpZW50X2lkIiwibGVuZ3RoIiwidG90YWxMaWtlcyIsImlzTGlrZWQiLCJjb3VudCIsInN1Y2Nlc3MiLCJmaWx0ZXJzIiwic3FsIiwiY29uZGl0aW9ucyIsInB1c2giLCJuYW1lIiwic3BlY2lhbHR5X2lkIiwic2VydmljZV9pZCIsImNpdHlfaWQiLCJqb2luIiwiaGF2aW5nQ29uZGl0aW9ucyIsIm1pblJhdGluZyIsInVuZGVmaW5lZCIsIm1heFJhdGluZyIsImxvZyIsIm1vYmlsZSIsImRvY3RvckRhdGEiLCJpZCIsInVwZGF0ZVJlc3VsdCIsImNvbW1lbnQiLCJjb21tZW50X3RleHQiLCJyYXRpbmciLCJzcGVjaWFsdHlJZCIsImxpbWl0Iiwib2Zmc2V0IiwibWFwIiwicm93Iiwic3ViX3NwZWNpYWx0eV9pZCIsInN1Yl9zcGVjaWFsdHlfbmFtZSIsImltYWdlcyIsInN1Yl9zcGVjaWFsdHlfaW1hZ2UiLCJzcGVjaWFsdHkiLCJzZXJ2aWNlSWQiLCJyZXZpZXdEYXRhIiwidXNlcl9pZCIsInJlY29tbWVuZGF0aW9ucyIsInJhdGluZ3MiLCJwcm9mZXNzaW9uYWxfZGVtZWFub3IiLCJzdWZmaWNpZW50X3RpbWUiLCJza2lsbCIsInN0YWZmX2JlaGF2aW9yIiwiY2xpbmljX2NvbmRpdGlvbiIsImNvbnN1bHRhdGlvbl90eXBlcyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRvY3RvcnNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZG9jdG9ycy9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuaW1wb3J0IHtcclxuICBDb21tZW50c0RUTyxcclxuICBEb2N0b3JzRFRPLFxyXG4gIGxpa2VEVE8sXHJcbiAgUmV2aWV3c0RUTyxcclxuICBTdWJTcGVjaWFsdHksXHJcbn0gZnJvbSBcIi4uLy4uL21vZGVscy9kb2N0b3JzXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBkb2N0b3JTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkRG9jdG9yKGRhdGE6IERvY3RvcnNEVE8pIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG5cclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGRvY3RvclNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuXHJcbiAgaWYgKHZhbGlkUGFzc3dvcmQuZXJyb3IpIHtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIlBhc3N3b3JkIGlzIGludmFsaWRcIik7XHJcbiAgfVxyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgICAgKGlkLGZpcnN0X25hbWUsbGFzdF9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXHJcbiAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgICBkYXRhLmZpcnN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgICBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICAgIGRhdGEudG9rZW5fdmVyaWZ5LFxyXG4gICAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICAgIGRhdGEucGhvbmUsXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgRXJyb3I6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gaW5zZXJ0IGNsaW5pYy5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlrZShkYXRhOiBsaWtlRFRPKSB7XHJcbiAgY29uc3QgZXhpc3RpbmdMaWtlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBcclxuICAgICBXSEVSRSBkb2N0b3JfaWQgPSA/IEFORCBwYXRpZW50X2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZG9jdG9yX2lkLCBkYXRhLnBhdGllbnRfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmIChleGlzdGluZ0xpa2UubGVuZ3RoID4gMCkge1xyXG4gICAgLy8gVW5saWtlIHRoZSBkb2N0b3I6IFJlbW92ZSB0aGUgbGlrZVxyXG4gICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBcclxuICAgICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID8gQU5EIHBhdGllbnRfaWQgPSA/YCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2RhdGEuZG9jdG9yX2lkLCBkYXRhLnBhdGllbnRfaWRdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBMaWtlIHRoZSBkb2N0b3I6IEluc2VydCBuZXcgbGlrZSByZWNvcmRcclxuICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgKGRvY3Rvcl9pZCwgcGF0aWVudF9pZCwgaXNMaWtlKSBcclxuICAgICAgIFZBTFVFUyAoPywgPywgPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZGF0YS5kb2N0b3JfaWQsIGRhdGEucGF0aWVudF9pZCwgMV0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGUgdGhlIGRvY3RvcidzIGlzX2xpa2VkIHN0YXR1cyBiYXNlZCBvbiB0aGUgdG90YWwgbGlrZXNcclxuICBjb25zdCB0b3RhbExpa2VzID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUIENPVU5UKCopIEFTIGNvdW50IEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgXHJcbiAgICAgV0hFUkUgZG9jdG9yX2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZG9jdG9yX2lkXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBjb25zdCBpc0xpa2VkID0gdG90YWxMaWtlc1swXS5jb3VudCA+IDAgPyAxIDogMDtcclxuXHJcbiAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBcclxuICAgICBTRVQgaXNfbGlrZWQgPSA/IFxyXG4gICAgIFdIRVJFIGlkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lzTGlrZWQsIGRhdGEuZG9jdG9yX2lkXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpc0xpa2VkIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREb2N0b3JzKGZpbHRlcnM6IHtcclxuICBuYW1lPzogc3RyaW5nO1xyXG4gIHNlcnZpY2VfaWQ/OiBzdHJpbmc7XHJcbiAgZG9jdG9yX2lkPzogc3RyaW5nO1xyXG4gIHNwZWNpYWx0eV9pZD86IHN0cmluZztcclxuICBjaXR5X2lkPzogc3RyaW5nO1xyXG4gIG1pblJhdGluZz86IG51bWJlcjtcclxuICBtYXhSYXRpbmc/OiBudW1iZXI7XHJcbn0pOiBQcm9taXNlPERvY3RvcnNEVE9bXSB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgbGV0IHNxbCA9IGBcclxuICAgIFNFTEVDVCBcclxuICAgICAgZC5pZCwgZC5maXJzdF9uYW1lLGQubGFzdF9uYW1lLGQucHJvZmlsZV9pbWcsICBkLmVtYWlsLCBkLnBob25lLCBkLnNwZWNpYWx0eV9pZCwgZC5pbnN1cmFuY2VfaWQsIGQuY2xpY2tfY291bnQsXHJcbiAgICAgIHNwLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsIFxyXG4gICAgICBpLm5hbWUgQVMgaW5zdXJhbmNlX25hbWUsICBcclxuICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3MgciBXSEVSRSByLmRvY3Rvcl9pZCA9IGQuaWQpIEFTIGF2ZXJhZ2VfcmF0aW5nLFxyXG4gICAgICBDT1VOVChyLmlkKSBBUyB0b3RhbF9yZXZpZXdzLFxyXG4gICAgICBDT0FMRVNDRShBVkcoci5wcm9mZXNzaW9uYWxfZGVtZWFub3IpLCAwKSBBUyBhdmdfcHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxyXG4gICAgICBDT0FMRVNDRShBVkcoci5zdWZmaWNpZW50X3RpbWUpLCAwKSBBUyBhdmdfc3VmZmljaWVudF90aW1lLFxyXG4gICAgICBDT0FMRVNDRShBVkcoci5za2lsbCksIDApIEFTIGF2Z19za2lsbCxcclxuICAgICAgQ09BTEVTQ0UoQVZHKHIuc3RhZmZfYmVoYXZpb3IpLCAwKSBBUyBhdmdfc3RhZmZfYmVoYXZpb3IsXHJcbiAgICAgIENPQUxFU0NFKEFWRyhyLmNsaW5pY19jb25kaXRpb24pLCAwKSBBUyBhdmdfY2xpbmljX2NvbmRpdGlvbixcclxuICAgICAgQ0FTRSBcclxuICAgICAgICBXSEVOIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBkbCBXSEVSRSBkbC5kb2N0b3JfaWQgPSBkLmlkKSBcclxuICAgICAgICBUSEVOIDEgRUxTRSAwXHJcbiAgICAgIEVORCBBUyBpc0xpa2VkLFxyXG5cclxuICAgICAgSlNPTl9BUlJBWUFHRyhcclxuICAgICAgICBKU09OX09CSkVDVChcclxuICAgICAgICAgICdjb3VudHJ5JywgbGQuY291bnRyeSxcclxuICAgICAgICAgICdsYXRpdHVkZScsIGxkLmxhdGl0dWRlLFxyXG4gICAgICAgICAgJ2xvbmdpdHVkZScsIGxkLmxvbmdpdHVkZSxcclxuICAgICAgICAgICdhZGRyZXNzX2xpbmUxJywgbGQuYWRkcmVzc19saW5lMSxcclxuICAgICAgICAgICdhZGRyZXNzX2xpbmUyJywgbGQuYWRkcmVzc19saW5lMixcclxuICAgICAgICAgICd6aXBjb2RlJywgbGQuemlwY29kZSxcclxuICAgICAgICAgICdjaXR5JyxjaS5uYW1lLFxyXG4gICAgICAgICAgJ3N0YXRlJyxjaS5zdGF0ZVxyXG4gICAgICAgIClcclxuICAgICAgKSBBUyBhZGRyZXNzZXNcclxuXHJcbiAgICBGUk9NIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9sb2NhdGlvbnMgbGQgT04gZC5pZCA9IGxkLmRvY3Rvcl9pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LnNwZWNpYWx0aWVzIHNwIE9OIGQuc3BlY2lhbHR5X2lkID0gc3AuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3cyByIE9OIGQuaWQgPSByLmRvY3Rvcl9pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9zZXJ2aWNlcyBkcyBPTiBkLnNlcnZpY2VfaWQgPSBkcy5pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LnNlcnZpY2VzIHMgT04gc3AuaWQgPSBzLnNwZWNpYWx0eV9pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9Lmluc3VyYW5jZXMgaSBPTiBkLmluc3VyYW5jZV9pZCA9IGkuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5jaXRpZXMgY2kgT04gbGQuY2l0eV9pZCA9IGNpLmlkXHJcbiAgYDtcclxuXHJcbiAgICBjb25zdCBjb25kaXRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGlmIChmaWx0ZXJzLmRvY3Rvcl9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJkLmlkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5kb2N0b3JfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMubmFtZSkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJDT05DQVQoZC5maXJzdF9uYW1lLCAnICcsIGQubGFzdF9uYW1lKSBMSUtFID9cIik7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGAlJHtmaWx0ZXJzLm5hbWV9JWApO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuc3BlY2lhbHR5X2lkKSB7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChcInNwLmlkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5zcGVjaWFsdHlfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuc2VydmljZV9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJkLnNlcnZpY2VfaWQgPSA/XCIpO1xyXG4gICAgICB2YWx1ZXMucHVzaChmaWx0ZXJzLnNlcnZpY2VfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuY2l0eV9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJsZC5jaXR5X2lkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5jaXR5X2lkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgc3FsICs9IFwiIFdIRVJFIFwiICsgY29uZGl0aW9ucy5qb2luKFwiIEFORCBcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3FsICs9IGAgR1JPVVAgQlkgZC5pZCwgZC5maXJzdF9uYW1lLCBkLmxhc3RfbmFtZSxkLnByb2ZpbGVfaW1nLGQuZW1haWwsIGQucGhvbmUsIGQuc3BlY2lhbHR5X2lkLCBkLmluc3VyYW5jZV9pZCwgc3AubmFtZSwgaS5uYW1lO2A7XHJcblxyXG4gICAgY29uc3QgaGF2aW5nQ29uZGl0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgIGlmIChmaWx0ZXJzLm1pblJhdGluZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGhhdmluZ0NvbmRpdGlvbnMucHVzaChcImF2ZXJhZ2VfcmF0aW5nID49ID9cIik7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGZpbHRlcnMubWluUmF0aW5nKTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLm1heFJhdGluZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGhhdmluZ0NvbmRpdGlvbnMucHVzaChcImF2ZXJhZ2VfcmF0aW5nIDw9ID9cIik7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGZpbHRlcnMubWF4UmF0aW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGF2aW5nQ29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgc3FsICs9IFwiIEhBVklORyBcIiArIGhhdmluZ0NvbmRpdGlvbnMuam9pbihcIiBBTkQgXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIFNRTDpcIiwgc3FsLCB2YWx1ZXMpO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oc3FsLCB7XHJcbiAgICAgIHZhbHVlczogdmFsdWVzLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gaWYgKGZpbHRlcnMuZG9jdG9yX2lkKSB7XHJcbiAgICAvLyAgIHJldHVybiByZXN1bHQubGVuZ3RoID8gcmVzdWx0WzBdIDogbnVsbDtcclxuICAgIC8vIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0ID8gKHJlc3VsdCBhcyB1bmtub3duIGFzIERvY3RvcnNEVE9bXSkgOiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmljZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uc2VydmljZXNgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TW9zdFBvcHVsYXJEb2N0b3JzKCk6IFByb21pc2U8YW55PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGQuKiwgXHJcbiAgICAgICAgQ09BTEVTQ0UobGQuaWQsICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxyXG4gICAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgICAoU0VMRUNUIEFWRyhyLnJhdGluZykgXHJcbiAgICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5yYXRpbmdzIHIgXHJcbiAgICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZyxcclxuICAgICAgICAoU0VMRUNUIENPVU5UKHIucmF0aW5nKSBcclxuICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgciBcclxuICAgICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIHRvdGFsX3JhdGluZ3NcclxuICAgICAgRlJPTSBcclxuICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfbG9jYXRpb25zIGxkIE9OIGQuaWQgPSBsZC5pZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gICAgICBIQVZJTkcgXHJcbiAgICAgICAgdG90YWxfcmF0aW5ncyA+IDNcclxuICAgICAgT1JERVIgQlkgXHJcbiAgICAgICAgYXZlcmFnZV9yYXRpbmcgREVTQyxcclxuICAgICAgICB0b3RhbF9yYXRpbmdzIERFU0NcclxuICAgICAgTElNSVQgMTA7XHJcbiAgICAgIGBcclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMoXHJcbiAgbW9iaWxlOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgU0VMRUNUIG1vYmlsZSBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgICB3aGVyZSBtb2JpbGU9P1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFttb2JpbGVdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvY3RvckRldGFpbChkb2N0b3JJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3Qgc3FsID0gYFxyXG4vLyAgICAgICBTRUxFQ1QgXHJcbi8vICAgICAgICAgZC4qLCBcclxuLy8gICAgICAgICBDT0FMRVNDRShsZC5jb3VudHJ5LCAnJykgQVMgY291bnRyeSxcclxuLy8gICAgICAgICBDT0FMRVNDRShsZC5sYXRpdHVkZSwgMCkgQVMgbGF0aXR1ZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQubG9uZ2l0dWRlLCAwKSBBUyBsb25naXR1ZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuYWRkcmVzc19saW5lMSwgJycpIEFTIGFkZHJlc3NfbGluZTEsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuYWRkcmVzc19saW5lMiwgJycpIEFTIGFkZHJlc3NfbGluZTIsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuemlwY29kZSwgJycpIEFTIHppcGNvZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UoQVZHKHIucmF0aW5nKSwgMCkgQVMgYXZlcmFnZV9yYXRpbmcsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UoQVZHKHIucHJvZmVzc2lvbmFsX2RlbWVhbm9yKSwgMCkgQVMgYXZnX3Byb2Zlc3Npb25hbF9kZW1lYW5vcixcclxuLy8gICAgICAgICBDT0FMRVNDRShBVkcoci5zdWZmaWNpZW50X3RpbWUpLCAwKSBBUyBhdmdfc3VmZmljaWVudF90aW1lLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLnNraWxsKSwgMCkgQVMgYXZnX3NraWxsLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLnN0YWZmX2JlaGF2aW9yKSwgMCkgQVMgYXZnX3N0YWZmX2JlaGF2aW9yLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLmNsaW5pY19jb25kaXRpb24pLCAwKSBBUyBhdmdfY2xpbmljX2NvbmRpdGlvbixcclxuLy8gICAgICAgICBDT1VOVChyLmlkKSBBUyB0b3RhbF9yZXZpZXdzLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEdST1VQX0NPTkNBVChESVNUSU5DVCByLmNvbW1lbnQgU0VQQVJBVE9SICcgfCAnKSwgJ05vIGNvbW1lbnRzJykgQVMgY29tbWVudHMsXHJcbi8vICAgICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4vLyAgICAgICAgIGkubmFtZSBBUyBpbnN1cmFuY2VfbmFtZSxcclxuLy8gICAgICAgICBDQVNFIFxyXG4vLyAgICAgICAgICAgV0hFTiBFWElTVFMgKFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgZGwgV0hFUkUgZGwuZG9jdG9yX2lkID0gZC5pZCkgXHJcbi8vICAgICAgICAgICBUSEVOIDEgRUxTRSAwXHJcbi8vICAgICAgICAgRU5EIEFTIGlzTGlrZWRcclxuLy8gICAgICAgICBKU09OX0FSUkFZQUdHKFxyXG4vLyAgICAgICAgIEpTT05fT0JKRUNUKFxyXG4vLyAgICAgICAgICAgJ2NvdW50cnknLCBsZC5jb3VudHJ5LFxyXG4vLyAgICAgICAgICAgJ2xhdGl0dWRlJywgbGQubGF0aXR1ZGUsXHJcbi8vICAgICAgICAgICAnbG9uZ2l0dWRlJywgbGQubG9uZ2l0dWRlLFxyXG4vLyAgICAgICAgICAgJ2FkZHJlc3NfbGluZTEnLCBsZC5hZGRyZXNzX2xpbmUxLFxyXG4vLyAgICAgICAgICAgJ2FkZHJlc3NfbGluZTInLCBsZC5hZGRyZXNzX2xpbmUyLFxyXG4vLyAgICAgICAgICAgJ3ppcGNvZGUnLCBsZC56aXBjb2RlLFxyXG4vLyAgICAgICAgICAgJ2NpdHknLGNpLm5hbWUsXHJcbi8vICAgICAgICAgICAnc3RhdGUnLGNpLnN0YXRlXHJcbi8vICAgICAgICAgKVxyXG4vLyAgICAgICApIEFTIGFkZHJlc3Nlc1xyXG4vLyAgICAgICBGUk9NIFxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbi8vICAgICAgIExFRlQgSk9JTiBcclxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9sb2NhdGlvbnMgbGQgT04gZC5pZCA9IGxkLmRvY3Rvcl9pZCBBTkQgbGQuaXNfcHJpbWFyeSA9IDFcclxuLy8gICAgICAgTEVGVCBKT0lOIFxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3MgciBPTiBkLmlkID0gci5kb2N0b3JfaWRcclxuLy8gICAgICAgTEVGVCBKT0lOIFxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgcyBPTiBkLnNwZWNpYWx0eV9pZCA9IHMuaWRcclxuLy8gICAgICAgTEVGVCBKT0lOXHJcbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5pbnN1cmFuY2VzIGkgT04gZC5pbnN1cmFuY2VfaWQgPSBpLmlkXHJcbi8vICAgICAgIFdIRVJFIFxyXG4vLyAgICAgICAgIGQuaWQgPSA/XHJcbi8vICAgICAgIEdST1VQIEJZIFxyXG4vLyAgICAgICAgIGQuaWQsICBsZC5jb3VudHJ5LCBsZC5sYXRpdHVkZSwgbGQubG9uZ2l0dWRlLCBsZC5hZGRyZXNzX2xpbmUxLCBcclxuLy8gICAgICAgICBsZC5hZGRyZXNzX2xpbmUyLCBsZC56aXBjb2RlLCBzLm5hbWUsIGkubmFtZTtcclxuLy8gICAgIGA7XHJcblxyXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihzcWwsIHsgdmFsdWVzOiBbZG9jdG9ySWRdIH0pO1xyXG5cclxuLy8gICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC5sZW5ndGggPT09IDApIHtcclxuLy8gICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJEb2N0b3Igbm90IGZvdW5kXCIgfTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICByZXR1cm4gcmVzdWx0WzBdOyAvLyBSZXR1cm4gc2luZ2xlIGRvY3RvciBvYmplY3QgaW5zdGVhZCBvZiBhbiBhcnJheVxyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZG9jdG9yIGRldGFpbHM6XCIsIGVycm9yKTtcclxuLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRG9jdG9yKGRvY3RvckRhdGE6IERvY3RvcnNEVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgICBTRVQgbmFtZSA9ID9cclxuICAgICAgICBXSEVSRSBpZCA9ID9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZG9jdG9yRGF0YS5maXJzdF9uYW1lLCBkb2N0b3JEYXRhLmlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWNvcmREb2N0b3JQcm9maWxlVmlldyhpZDogYW55KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgU0VUIGNsaWNrX2NvdW50ID0gY2xpY2tfY291bnQgKyAxXHJcbiAgICAgIFdIRVJFIGlkID0gP1xyXG4gICAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVwZGF0ZVJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRDb21tZW50KGNvbW1lbnQ6IENvbW1lbnRzRFRPKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jb21tZW50c1xyXG4gICAgIChpZCwgaWQsIGNvbW1lbnRfdGV4dCwgcmF0aW5nKVxyXG4gICAgICAgICBWQUxVRVMgKD8sID8sID8sID8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbY29tbWVudC5pZCwgY29tbWVudC5pZCwgY29tbWVudC5jb21tZW50X3RleHQsIGNvbW1lbnQucmF0aW5nXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTcGVjaWFsdGllcygpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqXHJcbiAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXNgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBsaW1pdCA9IDIwOyAvLyBEZWZhdWx0IGxpbWl0XHJcbiAgICBjb25zdCBvZmZzZXQgPSAwOyAvLyBEZWZhdWx0IG9mZnNldFxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCBcclxuICAgICAgcy5pZCBBUyBzcGVjaWFsdHlfaWQsXHJcbiAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgcy5pbWFnZXMgQVMgc3BlY2lhbHR5X2ltYWdlLFxyXG4gICAgICBzcy5pZCBBUyBzdWJfc3BlY2lhbHR5X2lkLFxyXG4gICAgICBzcy5uYW1lIEFTIHN1Yl9zcGVjaWFsdHlfbmFtZSxcclxuICAgICAgc3MuaW1hZ2VfdXJsIEFTIHN1Yl9zcGVjaWFsdHlfaW1hZ2VcclxuICAgIEZST00gJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzXHJcbiAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5zdWJfc3BlY2lhbHRpZXMgc3MgXHJcbiAgICBPTiBzLmlkID0gc3Muc3BlY2lhbHR5X2lkXHJcbiAgICBXSEVSRSBzLmlkID0gPyBcclxuICAgIE9SREVSIEJZIHNzLmlkO2AsXHJcbiAgICAgIHsgdmFsdWVzOiBbc3BlY2lhbHR5SWRdIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0Lm1hcCgocm93KSA9PiAoe1xyXG4gICAgICBpZDogcm93LnN1Yl9zcGVjaWFsdHlfaWQgfHwgbnVsbCxcclxuICAgICAgbmFtZTogcm93LnN1Yl9zcGVjaWFsdHlfbmFtZSB8fCBcIk4vQVwiLFxyXG4gICAgICBpbWFnZXM6IHJvdy5zdWJfc3BlY2lhbHR5X2ltYWdlIHx8IFwiZGVmYXVsdF9pbWFnZS5qcGVnXCIsXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsdGVyU3BlY2lhbHR5QnlJZChzcGVjaWFsdHk6IGFueSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGQuKiwgXHJcbiAgICAgICAgQ09BTEVTQ0UobGQubG9jYXRpb24sICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxyXG4gICAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIFxyXG4gICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByIFxyXG4gICAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcclxuICAgICAgRlJPTSBcclxuICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfbG9jYXRpb25zIGxkIE9OIGQuaWQgPSBsZC5pZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gIFxyXG4gICAgICBXSEVSRSBcclxuICAgICAgcy5pZCA9ID87XHJcbiAgICAgIGAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtzcGVjaWFsdHldLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCIuLi5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNCeVNwZWNpYWx0eShzcGVjaWFsdHlJZDogbnVtYmVyKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHMuaWQgQVMgc3VnZ2VzdGlvbl9pZCwgcy50aXRsZSwgcy5kZXNjcmlwdGlvbiwgc3MubmFtZSBBUyBzdWJfc3BlY2lhbHR5X25hbWVcclxuICAgICAgRlJPTSBjbGluaWNfZGIuc3VnZ2VzdGlvbnMgc1xyXG4gICAgICBKT0lOIGNsaW5pY19kYi5zdWJfc3BlY2lhbHRpZXMgc3MgT04gcy5zdWJfc3BlY2lhbHR5X2lkID0gc3MuaWRcclxuICAgICAgSk9JTiBjbGluaWNfZGIuc3BlY2lhbHRpZXMgc3AgT04gc3Muc3BlY2lhbHR5X2lkID0gc3AuaWRcclxuICAgICAgV0hFUkUgc3AuaWQgPSA/O1xyXG4gICAgYCxcclxuICAgICAgW3NwZWNpYWx0eUlkXVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbHRlclNlcnZpY2VzQnlJZChzZXJ2aWNlSWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICBTRUxFQ1QgXHJcbiAgICAgIGQuKiwgXHJcbiAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcclxuICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIFxyXG4gICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgciBcclxuICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZ1xyXG4gICAgRlJPTSBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5sb2NhdGlvbnNfZG9jdG9ycyBsZCBPTiBkLmlkID0gbGQuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gICAgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zZXJ2aWNlcyBzcnYgIE9OIHNydi5zcGVjaWFsdHlfaWQgPSBzLmlkXHJcbiAgICBXSEVSRSBcclxuICAgIHNydi5pZCA9ID87XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtzZXJ2aWNlSWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4aXN0aW5nRmVlZGJhY2socmV2aWV3RGF0YTogUmV2aWV3c0RUTykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3cyBXSEVSRSB1c2VyX2lkID0gPyBBTkQgZG9jdG9yX2lkID0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbcmV2aWV3RGF0YS51c2VyX2lkLCByZXZpZXdEYXRhLmRvY3Rvcl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhOiBSZXZpZXdzRFRPKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3c1xyXG4gICAgICAgIChkb2N0b3JfaWQsXHJcbiAgICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgICAgY29tbWVudCxcclxuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucyxcclxuICAgICAgICAgIHJhdGluZyxcclxuICAgICAgICAgIHByb2Zlc3Npb25hbF9kZW1lYW5vcixcclxuICAgICAgICAgIHN1ZmZpY2llbnRfdGltZSxcclxuICAgICAgICAgIHNraWxsLFxyXG4gICAgICAgICAgc3RhZmZfYmVoYXZpb3IsXHJcbiAgICAgICAgICBjbGluaWNfY29uZGl0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIHJldmlld0RhdGEuZG9jdG9yX2lkLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS51c2VyX2lkLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5jb21tZW50LFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmcsXHJcbiAgICAgICAgICByZXZpZXdEYXRhLnJlY29tbWVuZGF0aW9ucyxcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5wcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3Muc3VmZmljaWVudF90aW1lLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnNraWxsLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnN0YWZmX2JlaGF2aW9yLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLmNsaW5pY19jb25kaXRpb24sXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgc2VydmVyIEVycm9yXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJldmlld3MoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5yZXZpZXdzXHJcbiAgICBgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2NoYWR1bGVzKFxyXG4gIGRvY3Rvcl9pZDogbnVtYmVyLFxyXG4gIGNvbnN1bHRhdGlvbl90eXBlcz86IHN0cmluZ1xyXG4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgaWQsIGRvY3Rvcl9pZCxhcHBvaW50bWVudF9kYXRlLCBkYXlfb2Zfd2Vlaywgc3RhcnRfdGltZSwgZW5kX3RpbWUsIGlzX2F2YWlsYWJsZSwgY29uc3VsdGF0aW9uX3R5cGVzLCBjb25zdWx0YXRpb25fbW9kZSBcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9zY2hlZHVsZXNcclxuICAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgY29uc3VsdGF0aW9uX3R5cGVzID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtkb2N0b3JfaWQsIGNvbnN1bHRhdGlvbl90eXBlc10sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkludGVybmFsIHNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkoaWQ6IG51bWJlcikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVFxyXG4gICAgICAgICBkYXQuYXZhaWxhYmxlX3RpbWUsXHJcbiAgICAgICAgIGRhdC5pc19ib29rZWQsXHJcbiAgICAgICAgIGRhdC5pZFxyXG4gICAgICBGUk9NXHJcbiAgICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX2F2YWlsYWJsZV90aW1lcyBkYXRcclxuICAgICAgSk9JTlxyXG4gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9zY2hlZHVsZXMgZHNcclxuICAgICAgT05cclxuICAgICAgICAgZHMuaWQgPSBkYXQuZG9jdG9yX3NjaGVkdWxlX2lkXHJcbiAgICAgIFdIRVJFXHJcbiAgICAgICAgIGRzLmlkID0gPztcclxuICAgICAgYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBCZXR0ZXIgdG8gdXNlIGNvbnNvbGUuZXJyb3IgZm9yIGVycm9yc1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYm9va2VkKGlkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBcclxuICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yX2F2YWlsYWJsZV90aW1lc1xyXG4gICAgICAgIFNFVCBpc19ib29rZWQgPSAxXHJcbiAgICAgICAgV0hFUkUgaWQgPSA/O1xyXG4gICAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIEJldHRlciB0byB1c2UgY29uc29sZS5lcnJvciBmb3IgZXJyb3JzXHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkludGVybmFsIFNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBYUFBLE9BQUEsQ0FBQUMsU0FBQSxHQUFBQSxTQUFBO0FBNENBRCxPQUFBLENBQUFFLElBQUEsR0FBQUEsSUFBQTtBQW9EQUYsT0FBQSxDQUFBRyxVQUFBLEdBQUFBLFVBQUE7QUF1SEFILE9BQUEsQ0FBQUksV0FBQSxHQUFBQSxXQUFBO0FBT0FKLE9BQUEsQ0FBQUsscUJBQUEsR0FBQUEscUJBQUE7QUFtQ0FMLE9BQUEsQ0FBQU0sNEJBQUEsR0FBQUEsNEJBQUE7QUFrRkFOLE9BQUEsQ0FBQU8sWUFBQSxHQUFBQSxZQUFBO0FBY0FQLE9BQUEsQ0FBQVEsdUJBQUEsR0FBQUEsdUJBQUE7QUFtQkFSLE9BQUEsQ0FBQVMsVUFBQSxHQUFBQSxVQUFBO0FBWUFULE9BQUEsQ0FBQVUsY0FBQSxHQUFBQSxjQUFBO0FBT0FWLE9BQUEsQ0FBQVcscUJBQUEsR0FBQUEscUJBQUE7QUE4QkFYLE9BQUEsQ0FBQVksbUJBQUEsR0FBQUEsbUJBQUE7QUFnQ0FaLE9BQUEsQ0FBQWEseUJBQUEsR0FBQUEseUJBQUE7QUFvQkFiLE9BQUEsQ0FBQWMsa0JBQUEsR0FBQUEsa0JBQUE7QUE0QkFkLE9BQUEsQ0FBQWUsZ0JBQUEsR0FBQUEsZ0JBQUE7QUFVQWYsT0FBQSxDQUFBZ0IsYUFBQSxHQUFBQSxhQUFBO0FBcUNBaEIsT0FBQSxDQUFBaUIsVUFBQSxHQUFBQSxVQUFBO0FBU0FqQixPQUFBLENBQUFrQixlQUFBLEdBQUFBLGVBQUE7QUFxQkFsQixPQUFBLENBQUFtQiw4QkFBQSxHQUFBQSw4QkFBQTtBQTRCQW5CLE9BQUEsQ0FBQW9CLE1BQUEsR0FBQUEsTUFBQTtBQTNtQkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBUUEsTUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUNB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","map":{"version":3,"names":["exports","addDoctor","like","getDoctors","getServices","getMostPopularDoctors","checkDoctorPhoneNumberExists","updateDoctor","recordDoctorProfileView","addComment","getSpecialties","getSubSpecialtiesById","filterSpecialtyById","getSuggestionsBySpecialty","filterServicesById","existingFeedback","insertReviews","getReviews","doctorSchadules","doctorScheduleTimeAvailability","booked","mysql_1","require","response_error_1","schema_1","bcrypt_1","__importDefault","uuid_1","data","password","confirmPassword","fdPassword","validPassword","doctorSchema","validateSyncAt","saltRounds","hashedPassword","default","hash","error","ResponseError","Unauthorized","newId","v4","result","query","coreSchema","values","first_name","last_name","email","token_verify","verify_code","phone","Date","console","message","InternalServer","existingLike","doctor_id","patient_id","length","totalLikes","isLiked","count","success","filters","sql","conditions","push","name","specialty_id","service_id","city_id","join","havingConditions","minRating","undefined","maxRating","log","mobile","doctorData","id","updateResult","comment","comment_text","rating","specialtyId","limit","offset","map","row","sub_specialty_id","sub_specialty_name","images","sub_specialty_image","specialty","serviceId","reviewData","user_id","recommendations","ratings","professional_demeanor","sufficient_time","skill","staff_behavior","clinic_condition","consultation_types"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n  SubSpecialty,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { doctorSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport async function addDoctor(data: DoctorsDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = doctorSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.doctors\r\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function like(data: likeDTO) {\r\n  const existingLike = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ? AND patient_id = ?`,\r\n    {\r\n      values: [data.doctor_id, data.patient_id],\r\n    }\r\n  );\r\n\r\n  if (existingLike.length > 0) {\r\n    // Unlike the doctor: Remove the like\r\n    await query<RowDataPacket>(\r\n      `DELETE FROM ${coreSchema}.doctor_likes \r\n       WHERE doctor_id = ? AND patient_id = ?`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id],\r\n      }\r\n    );\r\n  } else {\r\n    // Like the doctor: Insert new like record\r\n    await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \r\n       VALUES (?, ?, ?)`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id, 1],\r\n      }\r\n    );\r\n  }\r\n\r\n  // Update the doctor's is_liked status based on the total likes\r\n  const totalLikes = await query<RowDataPacket>(\r\n    `SELECT COUNT(*) AS count FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ?`,\r\n    {\r\n      values: [data.doctor_id],\r\n    }\r\n  );\r\n\r\n  const isLiked = totalLikes[0].count > 0 ? 1 : 0;\r\n\r\n  await query<RowDataPacket>(\r\n    `UPDATE ${coreSchema}.doctors \r\n     SET is_liked = ? \r\n     WHERE id = ?`,\r\n    {\r\n      values: [isLiked, data.doctor_id],\r\n    }\r\n  );\r\n\r\n  return { success: true, isLiked };\r\n}\r\n\r\nexport async function getDoctors(filters: {\r\n  name?: string;\r\n  service_id?: string;\r\n  doctor_id?: string;\r\n  specialty_id?: string;\r\n  city_id?: string;\r\n  minRating?: number;\r\n  maxRating?: number;\r\n}): Promise<DoctorsDTO[] | null> {\r\n  try {\r\n    let sql = `\r\n    SELECT \r\n      d.id, d.first_name,d.last_name,d.profile_img,  d.email, d.phone, d.specialty_id, d.insurance_id, d.click_count,\r\n      sp.name AS specialty_name, \r\n      i.name AS insurance_name,  \r\n      (SELECT AVG(rating) FROM ${coreSchema}.doctor_reviews r WHERE r.doctor_id = d.id) AS average_rating,\r\n      COUNT(r.id) AS total_reviews,\r\n      COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\r\n      COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\r\n      COALESCE(AVG(r.skill), 0) AS avg_skill,\r\n      COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\r\n      COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\r\n      CASE \r\n        WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \r\n        THEN 1 ELSE 0\r\n      END AS isLiked,\r\n\r\n      JSON_ARRAYAGG(\r\n        JSON_OBJECT(\r\n          'country', ld.country,\r\n          'latitude', ld.latitude,\r\n          'longitude', ld.longitude,\r\n          'address_line1', ld.address_line1,\r\n          'address_line2', ld.address_line2,\r\n          'zipcode', ld.zipcode,\r\n          'city',ci.name,\r\n          'state',ci.state\r\n        )\r\n      ) AS addresses\r\n\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialties sp ON d.specialty_id = sp.id\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_services ds ON d.service_id = ds.id\r\n    LEFT JOIN \r\n      ${coreSchema}.services s ON sp.id = s.specialty_id\r\n    LEFT JOIN \r\n      ${coreSchema}.insurances i ON d.insurance_id = i.id\r\n    LEFT JOIN \r\n      ${coreSchema}.cities ci ON ld.city_id = ci.id\r\n  `;\r\n\r\n    const conditions: string[] = [];\r\n    const values: any[] = [];\r\n\r\n    if (filters.doctor_id) {\r\n      conditions.push(\"d.id = ?\");\r\n      values.push(filters.doctor_id);\r\n    }\r\n    if (filters.name) {\r\n      conditions.push(\"CONCAT(d.first_name, ' ', d.last_name) LIKE ?\");\r\n      values.push(`%${filters.name}%`);\r\n    }\r\n    if (filters.specialty_id) {\r\n      conditions.push(\"sp.id = ?\");\r\n      values.push(filters.specialty_id);\r\n    }\r\n    if (filters.service_id) {\r\n      conditions.push(\"d.service_id = ?\");\r\n      values.push(filters.service_id);\r\n    }\r\n    if (filters.city_id) {\r\n      conditions.push(\"ld.city_id = ?\");\r\n      values.push(filters.city_id);\r\n    }\r\n\r\n    if (conditions.length) {\r\n      sql += \" WHERE \" + conditions.join(\" AND \");\r\n    }\r\n\r\n    sql += ` GROUP BY d.id, d.first_name, d.last_name,d.profile_img,d.email, d.phone, d.specialty_id, d.insurance_id, sp.name, i.name;`;\r\n\r\n    const havingConditions: string[] = [];\r\n    if (filters.minRating !== undefined) {\r\n      havingConditions.push(\"average_rating >= ?\");\r\n      values.push(filters.minRating);\r\n    }\r\n    if (filters.maxRating !== undefined) {\r\n      havingConditions.push(\"average_rating <= ?\");\r\n      values.push(filters.maxRating);\r\n    }\r\n\r\n    if (havingConditions.length) {\r\n      sql += \" HAVING \" + havingConditions.join(\" AND \");\r\n    }\r\n\r\n    console.log(\"Generated SQL:\", sql, values);\r\n\r\n    const result = await query<RowDataPacket[]>(sql, {\r\n      values: values,\r\n    });\r\n\r\n    // if (filters.doctor_id) {\r\n    //   return result.length ? result[0] : null;\r\n    // }\r\n\r\n    return result ? (result as unknown as DoctorsDTO[]) : null;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function getServices() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.services`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getMostPopularDoctors(): Promise<any> {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT \r\n        d.*, \r\n        COALESCE(ld.id, 'No Location') AS location,\r\n        s.name AS specialty_name,\r\n        (SELECT AVG(r.rating) \r\n         FROM ${coreSchema}.ratings r \r\n         WHERE r.id = d.id) AS average_rating,\r\n        (SELECT COUNT(r.rating) \r\n         FROM ${coreSchema}.ratings r \r\n         WHERE r.id = d.id) AS total_ratings\r\n      FROM \r\n        ${coreSchema}.doctors d\r\n      LEFT JOIN \r\n        ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n      LEFT JOIN \r\n        ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n      HAVING \r\n        total_ratings > 3\r\n      ORDER BY \r\n        average_rating DESC,\r\n        total_ratings DESC\r\n      LIMIT 10;\r\n      `\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function checkDoctorPhoneNumberExists(\r\n  mobile: string\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      SELECT mobile FROM ${coreSchema}.doctors\r\n      where mobile=?\r\n      `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function doctorDetail(doctorId: number): Promise<any> {\r\n//   try {\r\n//     const sql = `\r\n//       SELECT \r\n//         d.*, \r\n//         COALESCE(ld.country, '') AS country,\r\n//         COALESCE(ld.latitude, 0) AS latitude,\r\n//         COALESCE(ld.longitude, 0) AS longitude,\r\n//         COALESCE(ld.address_line1, '') AS address_line1,\r\n//         COALESCE(ld.address_line2, '') AS address_line2,\r\n//         COALESCE(ld.zipcode, '') AS zipcode,\r\n//         COALESCE(AVG(r.rating), 0) AS average_rating,\r\n//         COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\r\n//         COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\r\n//         COALESCE(AVG(r.skill), 0) AS avg_skill,\r\n//         COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\r\n//         COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\r\n//         COUNT(r.id) AS total_reviews,\r\n//         COALESCE(GROUP_CONCAT(DISTINCT r.comment SEPARATOR ' | '), 'No comments') AS comments,\r\n//         s.name AS specialty_name,\r\n//         i.name AS insurance_name,\r\n//         CASE \r\n//           WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \r\n//           THEN 1 ELSE 0\r\n//         END AS isLiked\r\n//         JSON_ARRAYAGG(\r\n//         JSON_OBJECT(\r\n//           'country', ld.country,\r\n//           'latitude', ld.latitude,\r\n//           'longitude', ld.longitude,\r\n//           'address_line1', ld.address_line1,\r\n//           'address_line2', ld.address_line2,\r\n//           'zipcode', ld.zipcode,\r\n//           'city',ci.name,\r\n//           'state',ci.state\r\n//         )\r\n//       ) AS addresses\r\n//       FROM \r\n//         ${coreSchema}.doctors d\r\n//       LEFT JOIN \r\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id AND ld.is_primary = 1\r\n//       LEFT JOIN \r\n//         ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\r\n//       LEFT JOIN \r\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n//       LEFT JOIN\r\n//         ${coreSchema}.insurances i ON d.insurance_id = i.id\r\n//       WHERE \r\n//         d.id = ?\r\n//       GROUP BY \r\n//         d.id,  ld.country, ld.latitude, ld.longitude, ld.address_line1, \r\n//         ld.address_line2, ld.zipcode, s.name, i.name;\r\n//     `;\r\n\r\n//     const result = await query<RowDataPacket[]>(sql, { values: [doctorId] });\r\n\r\n//     if (!result || result.length === 0) {\r\n//       return { message: \"Doctor not found\" };\r\n//     }\r\n\r\n//     return result[0]; // Return single doctor object instead of an array\r\n//   } catch (error) {\r\n//     console.error(\"Error fetching doctor details:\", error);\r\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n//   }\r\n// }\r\n\r\nexport async function updateDoctor(doctorData: DoctorsDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n        UPDATE ${coreSchema}.doctors\r\n        SET name = ?\r\n        WHERE id = ?\r\n      `,\r\n    {\r\n      values: [doctorData.first_name, doctorData.id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function recordDoctorProfileView(id: any) {\r\n  try {\r\n    const updateResult = await query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.doctors\r\n      SET click_count = click_count + 1\r\n      WHERE id = ?\r\n      `,\r\n      {\r\n        values: [id],\r\n      }\r\n    );\r\n    return updateResult;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function addComment(comment: CommentsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.comments\r\n     (id, id, comment_text, rating)\r\n         VALUES (?, ?, ?, ?)`,\r\n    {\r\n      values: [comment.id, comment.id, comment.comment_text, comment.rating],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getSpecialties() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT *\r\n       FROM ${coreSchema}.specialties`\r\n  );\r\n  return result;\r\n}\r\nexport async function getSubSpecialtiesById(specialtyId: number) {\r\n  try {\r\n    const limit = 20; // Default limit\r\n    const offset = 0; // Default offset\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      s.id AS specialty_id,\r\n      s.name AS specialty_name,\r\n      s.images AS specialty_image,\r\n      ss.id AS sub_specialty_id,\r\n      ss.name AS sub_specialty_name,\r\n      ss.image_url AS sub_specialty_image\r\n    FROM ${coreSchema}.specialties s\r\n    LEFT JOIN ${coreSchema}.sub_specialties ss \r\n    ON s.id = ss.specialty_id\r\n    WHERE s.id = ? \r\n    ORDER BY ss.id;`,\r\n      { values: [specialtyId] }\r\n    );\r\n    return result.map((row) => ({\r\n      id: row.sub_specialty_id || null,\r\n      name: row.sub_specialty_name || \"N/A\",\r\n      images: row.sub_specialty_image || \"default_image.jpeg\",\r\n    }));\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterSpecialtyById(specialty: any) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `\r\n       SELECT \r\n        d.*, \r\n        COALESCE(ld.location, 'No Location') AS location,\r\n        s.name AS specialty_name,\r\n        (SELECT AVG(rating) \r\n         FROM ${coreSchema}.ratings r \r\n         WHERE r.id = d.id) AS average_rating\r\n      FROM \r\n        ${coreSchema}.doctors d\r\n      LEFT JOIN \r\n        ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n      LEFT JOIN \r\n        ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n  \r\n      WHERE \r\n      s.id = ?;\r\n      `,\r\n      {\r\n        values: [specialty],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"...\");\r\n  }\r\n}\r\n\r\nexport async function getSuggestionsBySpecialty(specialtyId: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\r\n      FROM clinic_db.suggestions s\r\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\r\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\r\n      WHERE sp.id = ?;\r\n    `,\r\n      [specialtyId]\r\n    );\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterServicesById(serviceId: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n   SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n    JOIN \r\n      ${coreSchema}.services srv  ON srv.specialty_id = s.id\r\n    WHERE \r\n    srv.id = ?;\r\n    `,\r\n    {\r\n      values: [serviceId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function existingFeedback(reviewData: ReviewsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`,\r\n    {\r\n      values: [reviewData.user_id, reviewData.doctor_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function insertReviews(reviewData: ReviewsDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_reviews\r\n        (doctor_id,\r\n          user_id,\r\n          comment,\r\n          recommendations,\r\n          rating,\r\n          professional_demeanor,\r\n          sufficient_time,\r\n          skill,\r\n          staff_behavior,\r\n          clinic_condition)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`,\r\n      {\r\n        values: [\r\n          reviewData.doctor_id,\r\n          reviewData.user_id,\r\n          reviewData.comment,\r\n          reviewData.rating,\r\n          reviewData.recommendations,\r\n          reviewData.ratings.professional_demeanor,\r\n          reviewData.ratings.sufficient_time,\r\n          reviewData.ratings.skill,\r\n          reviewData.ratings.staff_behavior,\r\n          reviewData.ratings.clinic_condition,\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function getReviews() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM ${coreSchema}.reviews\r\n    `\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function doctorSchadules(\r\n  doctor_id: number,\r\n  consultation_types?: string\r\n) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT id, doctor_id,appointment_date, day_of_week, start_time, end_time, is_available, consultation_types, consultation_mode \r\n      FROM ${coreSchema}.doctor_schedules\r\n      WHERE doctor_id = ? AND consultation_types = ?`,\r\n      {\r\n        values: [doctor_id, consultation_types],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function doctorScheduleTimeAvailability(id: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT\r\n         dat.available_time,\r\n         dat.is_booked,\r\n         dat.id\r\n      FROM\r\n         ${coreSchema}.doctor_available_times dat\r\n      JOIN\r\n         ${coreSchema}.doctor_schedules ds\r\n      ON\r\n         ds.id = dat.doctor_schedule_id\r\n      WHERE\r\n         ds.id = ?;\r\n      `,\r\n      {\r\n        values: [id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error); // Better to use console.error for errors\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  }\r\n}\r\n\r\nexport async function booked(id: number) {\r\n  try {\r\n    const result = query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.doctor_available_times\r\n        SET is_booked = 1\r\n        WHERE id = ?;\r\n      `,\r\n      {\r\n        values: [id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error); // Better to use console.error for errors\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1740642823574},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkUserExist = checkUserExist;\nexports.confirmEmail = confirmEmail;\nexports.getOTP = getOTP;\nexports.comparePassword = comparePassword;\nexports.updateProfileUser = updateProfileUser;\nexports.checkNickName = checkNickName;\nexports.updateUserVerifyCode = updateUserVerifyCode;\nexports.changePassword = changePassword;\nexports.getUserInfo = getUserInfo;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT id,email FROM  ${mysql_1.coreSchema}.users\n        WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT * \n      FROM ${mysql_1.coreSchema}.users\n      WHERE email=? AND deletedAt IS NULL\n      `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n          UPDATE ${mysql_1.coreSchema}.users\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\n          WHERE email =?\n          `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\n      WHERE email=?\n    `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nfunction comparePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT password FROM ${mysql_1.coreSchema}.users\n    WHERE email=?\n    `, {\n      values: [data]\n    });\n    return result;\n  });\n}\nfunction updateProfileUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Perform the update query\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET \n        firstName = ?,\n        lastName = ?,\n        national_code = ?,\n        dateOfBirth = ?,\n        gender = ?,\n        city = ?,\n        phoneNumber = ?,\n        verify_code = ?,\n        tokenVerify = ?\n      WHERE id = ?;\n    `, {\n      values: [data.firstName, data.lastName, data.national_code, data.dateOfBirth, data.gender, data.city, data.phoneNumber, data.verify_code, data.tokenVerify, data.id]\n    });\n    // Fetch the updated user profile\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE id = ?`, {\n      values: [data.id]\n    });\n    return result[0]; // Assuming result is an array of rows\n  });\n}\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users`);\n    return getData;\n  });\n}\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET verify_code=?,updatedAt=?\n      WHERE id=?\n      `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n        SELECT id,email,verify_code\n        FROM ${mysql_1.coreSchema}.users\n        WHERE id=?\n        `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nfunction changePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      newPassword\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      newPassword,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET password=?,updatedAt=?\n      WHERE email=?\n      `, {\n      values: [hash, new Date(), data.email]\n    });\n    return result;\n  });\n}\n// export async function getUserInfo(email: string) {\n//   const data = await query<RowDataPacket[]>(\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\n//     {\n//       values: [email],\n//     }\n//   );\n//   if (data) return data;\n// }\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`\n     SELECT \n       u.*, \n       c.comment, \n       c.created_at AS comment_created_at\n     FROM ${mysql_1.coreSchema}.users u\n     LEFT JOIN \n     ${mysql_1.coreSchema}.comments c\n     ON \n     u.id = c.id\n     WHERE \n     u.email =?\n     LIMIT 1;\n\n    `, {\n      values: [email]\n    });\n    if (!data || data.length === 0) {\n      return null; // Return null if no data is found\n    }\n    const userMap = new Map();\n    data.forEach(row => {\n      if (!userMap.has(row.id)) {\n        userMap.set(row.id, Object.assign(Object.assign({}, data), {\n          comments: []\n        }));\n      }\n      if (row.comment_text) {\n        userMap.get(row.id).comments.push({\n          text: row.comment_text,\n          createdAt: row.comment_created_at\n        });\n      }\n    });\n    return Array.from(userMap.values());\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tVc2VyRXhpc3QiLCJjb25maXJtRW1haWwiLCJnZXRPVFAiLCJjb21wYXJlUGFzc3dvcmQiLCJ1cGRhdGVQcm9maWxlVXNlciIsImNoZWNrTmlja05hbWUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImNoYW5nZVBhc3N3b3JkIiwiZ2V0VXNlckluZm8iLCJteXNxbF8xIiwicmVxdWlyZSIsInNjaGVtYV8xIiwiYmNyeXB0XzEiLCJfX2ltcG9ydERlZmF1bHQiLCJlbWFpbCIsInVzZXIiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJkYXRhIiwicmVzdWx0IiwibGVuZ3RoIiwiaXNTdWNjZXNzZnVsbCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsIkRhdGUiLCJ2ZXJpZnlfY29kZSIsImNvZGUiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsInRva2VuVmVyaWZ5IiwidXBkYXRlRGF0YSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibmF0aW9uYWxfY29kZSIsImRhdGVPZkJpcnRoIiwiZ2VuZGVyIiwiY2l0eSIsInBob25lTnVtYmVyIiwiaWQiLCJnZXREYXRhIiwidXNlcklkIiwibmV3Q29kZSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiZmRQYXNzd29yZCIsInZhbGlkUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJkZWZhdWx0IiwiaGFzaFN5bmMiLCJ1c2VyTWFwIiwiTWFwIiwiZm9yRWFjaCIsInJvdyIsImhhcyIsInNldCIsIk9iamVjdCIsImFzc2lnbiIsImNvbW1lbnRzIiwiY29tbWVudF90ZXh0IiwiZ2V0IiwicHVzaCIsInRleHQiLCJjcmVhdGVkQXQiLCJjb21tZW50X2NyZWF0ZWRfYXQiLCJBcnJheSIsImZyb20iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnksIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcbmltcG9ydCB7IENvbmZpcm1FbWFpbCB9IGZyb20gXCIuLi8uLi9tb2RlbHMvYXV0aFwiO1xyXG5pbXBvcnQgeyBBcHBSZXNwb25zZSB9IGZyb20gXCIuLi8uLi90eXBlcy9yZXNwb25zZS5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgIENyZWF0ZVVzZXIsIFVzZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXMvdXNlclwiO1xyXG5pbXBvcnQgeyBjcmVhdGVQYXNzd29yZFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1VzZXJFeGlzdChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxSb3dEYXRhUGFja2V0W10+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgaWQsZW1haWwgRlJPTSAgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICAgIFdIRVJFIGVtYWlsPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1FbWFpbChkYXRhOiBDb25maXJtRW1haWwpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgICBTRUxFQ1QgKiBcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFdIRVJFIGVtYWlsPT8gQU5EIGRlbGV0ZWRBdCBJUyBOVUxMXHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGEuZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHJlc3VsdC5sZW5ndGggPCAxKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZmFsc2UsXHJcbiAgICAgIHN0YXR1czogMSxcclxuICAgICAgbWVzc2FnZTogXCJ1c2VyIG5vdCBmb3VuZCFcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgY29uc3QgdXNlciA9IHJlc3VsdFswXSBhcyBVc2VyO1xyXG4gIGlmICh1c2VyLmVtYWlsICE9PSBkYXRhLmVtYWlsKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZmFsc2UsXHJcbiAgICAgIHN0YXR1czogMSxcclxuICAgICAgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgY29ycmVjdFwiLFxyXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICBpZiAodXNlci5lbWFpbENvbmZpcm1lZCkge1xyXG4gICAgaWYgKHVzZXIuc2lnbnVwU3RhdHVzID09PSAxKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFxyXG4gICAgICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICAgIFNFVCBzaWdudXBTdGF0dXM9PyxlbWFpbENvbmZpcm1lZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgICAgICBXSEVSRSBlbWFpbCA9P1xyXG4gICAgICAgICAgYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZXM6IFsxLCAxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiBcImVtYWlsIGFscmVhZHkgY29uZmlybWVkXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIH1cclxuICBpZiAodXNlci52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSlcclxuICAgIHJldHVybiB7IHN0YXR1czogZmFsc2UsIG1lc3NhZ2U6IFwiY29kZSBpcyBub3QgY29ycmVjdFwiLCBjb2RlOiA0MDAgfTtcclxuICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgZW1haWxDb25maXJtZWQ9MSwgc2lnbnVwU3RhdHVzPTIsdXBkYXRlZEF0PT9cclxuICAgICAgV0hFUkUgZW1haWw9P1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgIHNob3dUb1VzZXI6IHRydWUsXHJcbiAgICBtZXNzYWdlQ29kZTogXCJNU0dfMDFcIixcclxuICAgIG1lc3NhZ2VLaW5kOiAxLFxyXG4gICAgbWVzc2FnZTogXCJlbWFpbCBjb25maXJtZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgfSBhcyBBcHBSZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9UUChlbWFpbDogYW55LCB0b2tlblZlcmlmeTogYW55KSB7XHJcbiAgY29uc3QgdXBkYXRlRGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgVVBEQVRFICAke2NvcmVTY2hlbWF9LnVzZXJzIFNFVCB2ZXJpZnlfY29kZT0/IFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3Rva2VuVmVyaWZ5LCBlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdFswXSBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcGFyZVBhc3N3b3JkKGRhdGE6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCBwYXNzd29yZCBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGVtYWlsPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RhdGFdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVVc2VyKGRhdGE6IFVzZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZSBxdWVyeVxyXG4gIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgXHJcbiAgICAgICAgZmlyc3ROYW1lID0gPyxcclxuICAgICAgICBsYXN0TmFtZSA9ID8sXHJcbiAgICAgICAgbmF0aW9uYWxfY29kZSA9ID8sXHJcbiAgICAgICAgZGF0ZU9mQmlydGggPSA/LFxyXG4gICAgICAgIGdlbmRlciA9ID8sXHJcbiAgICAgICAgY2l0eSA9ID8sXHJcbiAgICAgICAgcGhvbmVOdW1iZXIgPSA/LFxyXG4gICAgICAgIHZlcmlmeV9jb2RlID0gPyxcclxuICAgICAgICB0b2tlblZlcmlmeSA9ID9cclxuICAgICAgV0hFUkUgaWQgPSA/O1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBkYXRhLm5hdGlvbmFsX2NvZGUsXHJcbiAgICAgICAgZGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBkYXRhLmdlbmRlcixcclxuICAgICAgICBkYXRhLmNpdHksXHJcbiAgICAgICAgZGF0YS5waG9uZU51bWJlcixcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIGRhdGEudG9rZW5WZXJpZnksXHJcbiAgICAgICAgZGF0YS5pZCxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICAvLyBGZXRjaCB0aGUgdXBkYXRlZCB1c2VyIHByb2ZpbGVcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YS5pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdFswXTsgLy8gQXNzdW1pbmcgcmVzdWx0IGlzIGFuIGFycmF5IG9mIHJvd3NcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUoKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCBnZXREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc2ApO1xyXG4gIHJldHVybiBnZXREYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgdmVyaWZ5X2NvZGU9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICBXSEVSRSBpZD0/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgICBTRUxFQ1QgaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBpZD0/XHJcbiAgICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdXNlcklkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyWzBdIGFzIENyZWF0ZVVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChkYXRhOiBhbnkpIHtcclxuICBjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlUGFzc3dvcmRTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFNFVCBwYXNzd29yZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaGFzaCwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4vLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgIHtcclxuLy8gICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4vLyAgICAgfVxyXG4vLyAgICk7XHJcbi8vICAgaWYgKGRhdGEpIHJldHVybiBkYXRhO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCBcclxuICAgICAgIHUuKiwgXHJcbiAgICAgICBjLmNvbW1lbnQsIFxyXG4gICAgICAgYy5jcmVhdGVkX2F0IEFTIGNvbW1lbnRfY3JlYXRlZF9hdFxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyB1XHJcbiAgICAgTEVGVCBKT0lOIFxyXG4gICAgICR7Y29yZVNjaGVtYX0uY29tbWVudHMgY1xyXG4gICAgIE9OIFxyXG4gICAgIHUuaWQgPSBjLmlkXHJcbiAgICAgV0hFUkUgXHJcbiAgICAgdS5lbWFpbCA9P1xyXG4gICAgIExJTUlUIDE7XHJcblxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIGRhdGEgaXMgZm91bmRcclxuICB9XHJcblxyXG4gIGNvbnN0IHVzZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xyXG5cclxuICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgaWYgKCF1c2VyTWFwLmhhcyhyb3cuaWQpKSB7XHJcbiAgICAgIHVzZXJNYXAuc2V0KHJvdy5pZCwge1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93LmNvbW1lbnRfdGV4dCkge1xyXG4gICAgICB1c2VyTWFwLmdldChyb3cuaWQpLmNvbW1lbnRzLnB1c2goe1xyXG4gICAgICAgIHRleHQ6IHJvdy5jb21tZW50X3RleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY29tbWVudF9jcmVhdGVkX2F0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbSh1c2VyTWFwLnZhbHVlcygpKTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQUEsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFXQUQsT0FBQSxDQUFBRSxZQUFBLEdBQUFBLFlBQUE7QUErREFGLE9BQUEsQ0FBQUcs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","map":{"version":3,"names":["exports","checkUserExist","confirmEmail","getOTP","comparePassword","updateProfileUser","checkNickName","updateUserVerifyCode","changePassword","getUserInfo","mysql_1","require","schema_1","bcrypt_1","__importDefault","email","user","query","coreSchema","values","data","result","length","isSuccessfull","status","message","emailConfirmed","signupStatus","Date","verify_code","code","showToUser","messageCode","messageKind","tokenVerify","updateData","firstName","lastName","national_code","dateOfBirth","gender","city","phoneNumber","id","getData","userId","newCode","newPassword","confirmPassword","fdPassword","validPassword","createPasswordSchema","validateSyncAt","saltRounds","hash","default","hashSync","userMap","Map","forEach","row","has","set","Object","assign","comments","comment_text","get","push","text","createdAt","comment_created_at","Array","from"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/user/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ConfirmEmail } from \"../../models/auth\";\r\nimport { AppResponse } from \"../../types/response.interface\";\r\nimport {  CreateUser, User } from \"../../types/user\";\r\nimport { createPasswordSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT id,email FROM  ${coreSchema}.users\r\n        WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT * \r\n      FROM ${coreSchema}.users\r\n      WHERE email=? AND deletedAt IS NULL\r\n      `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n          UPDATE ${coreSchema}.users\r\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n          WHERE email =?\r\n          `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n      WHERE email=?\r\n    `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function comparePassword(data: any): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT password FROM ${coreSchema}.users\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [data],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateProfileUser(data: User): Promise<any> {\r\n  // Perform the update query\r\n  await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET \r\n        firstName = ?,\r\n        lastName = ?,\r\n        national_code = ?,\r\n        dateOfBirth = ?,\r\n        gender = ?,\r\n        city = ?,\r\n        phoneNumber = ?,\r\n        verify_code = ?,\r\n        tokenVerify = ?\r\n      WHERE id = ?;\r\n    `,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.national_code,\r\n        data.dateOfBirth,\r\n        data.gender,\r\n        data.city,\r\n        data.phoneNumber,\r\n        data.verify_code,\r\n        data.tokenVerify,\r\n        data.id,\r\n      ],\r\n    }\r\n  );\r\n\r\n  // Fetch the updated user profile\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE id = ?`,\r\n    {\r\n      values: [data.id],\r\n    }\r\n  );\r\n\r\n  return result[0]; // Assuming result is an array of rows\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM ${coreSchema}.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET verify_code=?,updatedAt=?\r\n      WHERE id=?\r\n      `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n        SELECT id,email,verify_code\r\n        FROM ${coreSchema}.users\r\n        WHERE id=?\r\n        `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function changePassword(data: any) {\r\n  const { newPassword } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { newPassword, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET password=?,updatedAt=?\r\n      WHERE email=?\r\n      `,\r\n    {\r\n      values: [hash, new Date(), data.email],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getUserInfo(email: string) {\r\n//   const data = await query<RowDataPacket[]>(\r\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n//     {\r\n//       values: [email],\r\n//     }\r\n//   );\r\n//   if (data) return data;\r\n// }\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT \r\n       u.*, \r\n       c.comment, \r\n       c.created_at AS comment_created_at\r\n     FROM ${coreSchema}.users u\r\n     LEFT JOIN \r\n     ${coreSchema}.comments c\r\n     ON \r\n     u.id = c.id\r\n     WHERE \r\n     u.email =?\r\n     LIMIT 1;\r\n\r\n    `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n\r\n  if (!data || data.length === 0) {\r\n    return null; // Return null if no data is found\r\n  }\r\n\r\n  const userMap = new Map<number, any>();\r\n\r\n  data.forEach((row) => {\r\n    if (!userMap.has(row.id)) {\r\n      userMap.set(row.id, {\r\n        ...data,\r\n        comments: [],\r\n      });\r\n    }\r\n\r\n    if (row.comment_text) {\r\n      userMap.get(row.id).comments.push({\r\n        text: row.comment_text,\r\n        createdAt: row.comment_created_at,\r\n      });\r\n    }\r\n  });\r\n  return Array.from(userMap.values());\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738053415838},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// router.get(\n//   \"/getClinicServices\",\n//   asyncHandler(async (req: Request, res: Response) => {\n//     const data = await clinicService.getClinicService();\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return buildResponse;\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljX3NlcnZpY2VzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pY19zZXJ2aWNlcy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IGNsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgXCIvZ2V0Q2xpbmljU2VydmljZXNcIixcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xyXG4vLyAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNsaW5pY1NlcnZpY2UuZ2V0Q2xpbmljU2VydmljZSgpO1xyXG4vLyAgICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4vLyAgICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbi8vICAgfSlcclxuLy8gKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":[],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { clinicService } from \"./service\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n// router.get(\r\n//   \"/getClinicServices\",\r\n//   asyncHandler(async (req: Request, res: Response) => {\r\n//     const data = await clinicService.getClinicService();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return buildResponse;\r\n//   })\r\n// );\r\n"],"mappings":";;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1737887267636},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clinicService = void 0;\nconst db_1 = require(\"./db\");\nclass clinicService {\n  static getClinicService() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicServices)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.clinicService = clinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNsaW5pY1NlcnZpY2UiLCJnZXRDbGluaWNTZXJ2aWNlIiwiZGF0YSIsImdldENsaW5pY1NlcnZpY2VzIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjbGluaWNfc2VydmljZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljX3NlcnZpY2VzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q2xpbmljU2VydmljZXMgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIGNsaW5pY1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q2xpbmljU2VydmljZSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRDbGluaWNTZXJ2aWNlcygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxhQUFhO0VBQ2pCLE9BQWFDLGdCQUFnQkEsQ0FBQTs7TUFDbEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxpQkFBaUIsR0FBRTtNQUN0QyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQVJIRyxPQUFBLENBQUFMLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","clinicService","getClinicService","data","getClinicServices","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/service.ts"],"sourcesContent":["import { getClinicServices } from \"./db\";\r\n\r\nexport class clinicService {\r\n  public static async getClinicService() {\r\n    const data = await getClinicServices();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,iBAAiB,GAAE;MACtC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AARHG,OAAA,CAAAL,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1736242761488},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getClinicServices = getClinicServices;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getClinicServices() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT *, \n    CONCAT('/public/image_speciality/', img) AS image_url\n    FROM ${mysql_1.coreSchema}.services\n  `);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0Q2xpbmljU2VydmljZXMiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY19zZXJ2aWNlc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWNfc2VydmljZXMvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm93RGF0YVBhY2tldCB9IGZyb20gXCJteXNxbDJcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpbmljU2VydmljZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFxyXG4gICAgU0VMRUNUICosIFxyXG4gICAgQ09OQ0FUKCcvcHVibGljL2ltYWdlX3NwZWNpYWxpdHkvJywgaW1nKSBBUyBpbWFnZV91cmxcclxuICAgIEZST00gJHtjb3JlU2NoZW1hfS5zZXJ2aWNlc1xyXG4gIGApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyxpQkFBQSxHQUFBQSxpQkFBQTtBQUZBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCRixpQkFBaUJBLENBQUE7O0lBQ3JDLE1BQU1HLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUFnQjs7O1dBR2pDSCxPQUFBLENBQUFJLFVBQVU7R0FDbEIsQ0FBQztJQUNGLE9BQU9GLE1BQU07RUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","getClinicServices","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic_services/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\nexport async function getClinicServices() {\r\n  const result = await query<RowDataPacket>(`\r\n    SELECT *, \r\n    CONCAT('/public/image_speciality/', img) AS image_url\r\n    FROM ${coreSchema}.services\r\n  `);\r\n  return result;\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,iBAAA,GAAAA,iBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,iBAAiBA,CAAA;;IACrC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EAAgB;;;WAGjCH,OAAA,CAAAI,UAAU;GAClB,CAAC;IACF,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1737450350398},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllCities\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.citiesService.getAllCities();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/filtered_neighbor/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const city_id = +req.params.id;\n  const data = yield service_1.citiesService.filtered_neighbor(city_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJjaXRpZXNTZXJ2aWNlIiwiZ2V0QWxsQ2l0aWVzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsImNpdHlfaWQiLCJwYXJhbXMiLCJpZCIsImZpbHRlcmVkX25laWdoYm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NpdGllcy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IGNpdGllc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldEFsbENpdGllc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2l0aWVzU2VydmljZS5nZXRBbGxDaXRpZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBcIi9maWx0ZXJlZF9uZWlnaGJvci86aWRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgY2l0eV9pZCA9ICtyZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNpdGllc1NlcnZpY2UuZmlsdGVyZWRfbmVpZ2hib3IoY2l0eV9pZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUixlQUFlLEVBQ2YsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsYUFBYSxDQUFDQyxZQUFZLEVBQUU7RUFDL0MsTUFBTUMsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsT0FBT0YsR0FBRyxDQUFDTyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0FBRTNELENBQUMsRUFBQyxDQUNIO0FBQ0RYLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1Isd0JBQXdCLEVBQ3hCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1TLE9BQU8sR0FBRyxDQUFDWCxHQUFHLENBQUNZLE1BQU0sQ0FBQ0MsRUFBRTtFQUM5QixNQUFNVixJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxhQUFhLENBQUNVLGlCQUFpQixDQUFDSCxPQUFPLENBQUM7RUFDM0QsTUFBTUwsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsT0FBT0YsR0FBRyxDQUFDTyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0FBRTNELENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","citiesService","getAllCities","buildResponse","BuildResponse","status","code","json","city_id","params","id","filtered_neighbor"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { citiesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllCities\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await citiesService.getAllCities();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/filtered_neighbor/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const city_id = +req.params.id;\r\n    const data = await citiesService.filtered_neighbor(city_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,eAAe,EACf,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACC,YAAY,EAAE;EAC/C,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,OAAO,GAAG,CAACX,GAAG,CAACY,MAAM,CAACC,EAAE;EAC9B,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACU,iBAAiB,CAACH,OAAO,CAAC;EAC3D,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1739626768893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.citiesService = void 0;\nconst db_1 = require(\"./db\");\nclass citiesService {\n  static getAllCities() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllCities)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static filtered_neighbor(city_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.GetNeighborhoods)(city_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.citiesService = citiesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNpdGllc1NlcnZpY2UiLCJnZXRBbGxDaXRpZXMiLCJkYXRhIiwibWVzc2FnZSIsImZpbHRlcmVkX25laWdoYm9yIiwiY2l0eV9pZCIsIkdldE5laWdoYm9yaG9vZHMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NpdGllcy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFsbENpdGllcywgR2V0TmVpZ2hib3Job29kcyB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgY2l0aWVzU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxDaXRpZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QWxsQ2l0aWVzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiTm8gZGF0YSBmb3VuZFwiLCBkYXRhOiBudWxsIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZmlsdGVyZWRfbmVpZ2hib3IoY2l0eV9pZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgR2V0TmVpZ2hib3Job29kcyhjaXR5X2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxhQUFhO0VBQ2pCLE9BQWFDLFlBQVlBLENBQUE7O01BQzlCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsWUFBWSxHQUFFO01BQ2pDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU87VUFBRUMsT0FBTyxFQUFFLGVBQWU7VUFBRUQsSUFBSSxFQUFFO1FBQUksQ0FBRTtNQUNqRDtJQUNGLENBQUM7O0VBQ00sT0FBYUUsaUJBQWlCQSxDQUFDQyxPQUFlOztNQUNuRCxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFRLGdCQUFnQixFQUFDRCxPQUFPLENBQUM7TUFDNUMsSUFBSUgsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","citiesService","getAllCities","data","message","filtered_neighbor","city_id","GetNeighborhoods","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/service.ts"],"sourcesContent":["import { getAllCities, GetNeighborhoods } from \"./db\";\r\n\r\nexport class citiesService {\r\n  public static async getAllCities() {\r\n    const data = await getAllCities();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async filtered_neighbor(city_id: number) {\r\n    const data = await GetNeighborhoods(city_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,YAAY,GAAE;MACjC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaE,iBAAiBA,CAACC,OAAe;;MACnD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,gBAAgB,EAACD,OAAO,CAAC;MAC5C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1736319456133},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllCities = getAllCities;\nexports.GetNeighborhoods = GetNeighborhoods;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllCities() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.cities`);\n    return result;\n  });\n}\nfunction GetNeighborhoods(city_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const adjustedCityId = city_id + 1;\n    const result = yield (0, mysql_1.query)(`\n     SELECT * FROM ${mysql_1.coreSchema}.neighborhoods\n     WHERE city_id = ?\n    `, {\n      values: [adjustedCityId]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsQ2l0aWVzIiwiR2V0TmVpZ2hib3Job29kcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwiY2l0eV9pZCIsImFkanVzdGVkQ2l0eUlkIiwidmFsdWVzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NpdGllcy9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxDaXRpZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uY2l0aWVzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldE5laWdoYm9yaG9vZHMoY2l0eV9pZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgYWRqdXN0ZWRDaXR5SWQgPSBjaXR5X2lkICsgMTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5uZWlnaGJvcmhvb2RzXHJcbiAgICAgV0hFUkUgY2l0eV9pZCA9ID9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2FkanVzdGVkQ2l0eUlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBQSxPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQU9BRCxPQUFBLENBQUFFLGdCQUFBLEdBQUFBLGdCQUFBO0FBVEEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JILFlBQVlBLENBQUE7O0lBQ2hDLE1BQU1JLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QixpQkFBaUJILE9BQUEsQ0FBQUksVUFBVSxTQUFTLENBQ3JDO0lBQ0QsT0FBT0YsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0JILGdCQUFnQkEsQ0FBQ00sT0FBZTs7SUFDcEQsTUFBTUMsY0FBYyxHQUFHRCxPQUFPLEdBQUcsQ0FBQztJQUNsQyxNQUFNSCxNQUFNLEdBQUcsTUFBTSxJQUFBRixPQUFBLENBQUFHLEtBQUssRUFDeEI7cUJBQ2lCSCxPQUFBLENBQUFJLFVBQVU7O0tBRTFCLEVBQ0Q7TUFDRUcsTUFBTSxFQUFFLENBQUNELGNBQWM7S0FDeEIsQ0FDRjtJQUNELE9BQU9KLE1BQU07RUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","getAllCities","GetNeighborhoods","mysql_1","require","result","query","coreSchema","city_id","adjustedCityId","values"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/cities/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllCities() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.cities`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function GetNeighborhoods(city_id: number) {\r\n  const adjustedCityId = city_id + 1;\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT * FROM ${coreSchema}.neighborhoods\r\n     WHERE city_id = ?\r\n    `,\r\n    {\r\n      values: [adjustedCityId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAOAD,OAAA,CAAAE,gBAAA,GAAAA,gBAAA;AATA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBH,YAAYA,CAAA;;IAChC,MAAMI,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,SAAS,CACrC;IACD,OAAOF,MAAM;EACf,CAAC;;AAED,SAAsBH,gBAAgBA,CAACM,OAAe;;IACpD,MAAMC,cAAc,GAAGD,OAAO,GAAG,CAAC;IAClC,MAAMH,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB;qBACiBH,OAAA,CAAAI,UAAU;;KAE1B,EACD;MACEG,MAAM,EAAE,CAACD,cAAc;KACxB,CACF;IACD,OAAOJ,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1740611236228},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllInsurances\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.InsuranceService.getAllInsurances();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJJbnN1cmFuY2VTZXJ2aWNlIiwiZ2V0QWxsSW5zdXJhbmNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxpbnN1cmFuY2VcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvaW5zdXJhbmNlL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgSW5zdXJhbmNlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QWxsSW5zdXJhbmNlc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgSW5zdXJhbmNlU2VydmljZS5nZXRBbGxJbnN1cmFuY2VzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLG1CQUFtQixFQUNuQixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxnQkFBZ0IsQ0FBQ0MsZ0JBQWdCLEVBQUU7RUFDdEQsTUFBTUMsYUFBYSxHQUFHWixjQUFBLENBQUFhLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7RUFDN0MsT0FBT0YsR0FBRyxDQUFDTyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0FBRTNELENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","InsuranceService","getAllInsurances","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { InsuranceService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllInsurances\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await InsuranceService.getAllInsurances();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,mBAAmB,EACnB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,gBAAgB,CAACC,gBAAgB,EAAE;EACtD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1739626768870},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InsuranceService = void 0;\nconst db_1 = require(\"./db\");\nclass InsuranceService {\n  static getAllInsurances() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllInsurances)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.InsuranceService = InsuranceService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkluc3VyYW5jZVNlcnZpY2UiLCJnZXRBbGxJbnN1cmFuY2VzIiwiZGF0YSIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2luc3VyYW5jZS9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFsbEluc3VyYW5jZXMgfSBmcm9tIFwiLi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEluc3VyYW5jZVNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxsSW5zdXJhbmNlcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbGxJbnN1cmFuY2VzKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiTm8gZGF0YSBmb3VuZFwiLCBkYXRhOiBudWxsIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGdCQUFnQjtFQUNwQixPQUFhQyxnQkFBZ0JBLENBQUE7O01BQ2xDLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsZ0JBQWdCLEdBQUU7TUFDckMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBUkhFLE9BQUEsQ0FBQUosZ0JBQUEsR0FBQUEsZ0JBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","InsuranceService","getAllInsurances","data","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/service.ts"],"sourcesContent":["import { getAllInsurances } from \"./db\";\r\n\r\nexport class InsuranceService {\r\n  public static async getAllInsurances() {\r\n    const data = await getAllInsurances();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,gBAAgB;EACpB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,gBAAgB,GAAE;MACrC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AARHE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1736325526769},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllInsurances = getAllInsurances;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllInsurances() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.insurances`);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsSW5zdXJhbmNlcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2luc3VyYW5jZS9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxJbnN1cmFuY2VzKCkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5pbnN1cmFuY2VzYFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQUEsT0FBQSxDQUFBQyxnQkFBQSxHQUFBQSxnQkFBQTtBQUZBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQUVBLFNBQXNCRixnQkFBZ0JBLENBQUE7O0lBQ2xDLE1BQU1HLE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QixpQkFBaUJILE9BQUEsQ0FBQUksVUFBVSxhQUFhLENBQ3pDO0lBQ0QsT0FBT0YsTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","getAllInsurances","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/insurance/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllInsurances() {\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.insurances`\r\n    );\r\n    return result;\r\n  }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,gBAAgBA,CAAA;;IAClC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,aAAa,CACzC;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1740612080365},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/clinics/add\", (0, async_handler_1.asyncHandler)(function addNewClinic(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield service_1.ClinicService.registerClinic(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    if (buildResponse) {\n      return buildResponse;\n    }\n    return result;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJhZGROZXdDbGluaWMiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJyZXN1bHQiLCJDbGluaWNTZXJ2aWNlIiwicmVnaXN0ZXJDbGluaWMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBDbGluaWNTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9jbGluaWNzL2FkZFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGROZXdDbGluaWMocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2xpbmljU2VydmljZS5yZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiBidWlsZFJlc3BvbnNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBR0FFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxJQUFJLENBQ1QsY0FBYyxFQUNkLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFlBQVlBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEUsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsTUFBTSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsYUFBYSxDQUFDQyxjQUFjLENBQUNKLFFBQVEsQ0FBQztJQUMzRCxNQUFNSyxhQUFhLEdBQUcsTUFBTWQsY0FBQSxDQUFBZSxhQUFhLENBQUNDLEdBQUcsQ0FBQ0wsTUFBTSxDQUFDO0lBQ3JELElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPQSxhQUFhO0lBQ3RCO0lBQ0EsT0FBT0gsTUFBTTtFQUNmLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","addNewClinic","req","res","formData","body","result","ClinicService","registerClinic","buildResponse","BuildResponse","get"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { ClinicService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.post(\r\n  \"/clinics/add\",\r\n  asyncHandler(async function addNewClinic(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await ClinicService.registerClinic(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }\r\n    return result;\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAY,EAAEC,GAAa;;IAClE,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,MAAM,GAAG,MAAMT,SAAA,CAAAU,aAAa,CAACC,cAAc,CAACJ,QAAQ,CAAC;IAC3D,MAAMK,aAAa,GAAG,MAAMd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,MAAM,CAAC;IACrD,IAAIG,aAAa,EAAE;MACjB,OAAOA,aAAa;IACtB;IACA,OAAOH,MAAM;EACf,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1738463266950},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClinicService = void 0;\nconst email_1 = require(\"../../config/email\");\nconst common_1 = require(\"../../helper/common\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass ClinicService {\n  static registerClinic(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, db_1.checkExistClinic)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      // Generate a unique verification code\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      // Generate email verification token (without storing the code inside the JWT)\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, db_1.registerClinic)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n}\nexports.ClinicService = ClinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbF8xIiwicmVxdWlyZSIsImNvbW1vbl8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImRiXzEiLCJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsIm1zXzEiLCJzZW5kX2VtYWlsXzEiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJleHBpcmVzSW4iLCJ0ZXN0IiwiTWF0aCIsImZsb29yIiwiZGVmYXVsdCIsIkNsaW5pY1NlcnZpY2UiLCJyZWdpc3RlckNsaW5pYyIsImZvcm1EYXRhIiwiZW1haWxFeGlzdHMiLCJjaGVja0V4aXN0Q2xpbmljIiwiZW1haWwiLCJjb25zb2xlIiwiZXJyb3IiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInZlcmlmaWNhdGlvbkNvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJ2ZXJpZnlfY29kZSIsInRva2VuVmVyaWZ5Iiwic2lnbiIsInRva2VuX3ZlcmlmeSIsImNsaW5pY0RhdGEiLCJlbWFpbFNlcnZpY2UiLCJFbWFpbFByb3ZpZGVyIiwic2VuZEFjY291bnRSZWdpc3RlciIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiaWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtYWlsUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2VtYWlsXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MyB9IGZyb20gXCIuLi8uLi9oZWxwZXIvY29tbW9uXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBjaGVja0V4aXN0Q2xpbmljLCByZWdpc3RlckNsaW5pYyB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcblxyXG5cclxuXHJcbmNvbnN0IEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCA9IHByb2Nlc3MuZW52LkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCB8fCBcIjFkXCI7IC8vIERlZmF1bHQgMSBkYXlcclxuY29uc3QgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4gPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiB8fCBcInlvdXItc2VjcmV0LWtleVwiO1xyXG5cclxuLy8gQ2hlY2sgaWYgZXhwaXJhdGlvbiBuZWVkcyBjb252ZXJzaW9uXHJcbmNvbnN0IGV4cGlyZXNJbiA9XHJcbiAgdHlwZW9mIEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gIC9eWzAtOV0rW3NtaGR3eV0kL2kudGVzdChKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpXHJcbiAgICA/IE1hdGguZmxvb3IobXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDApXHJcbiAgICA6IEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRDtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuZXhwb3J0IGNsYXNzIENsaW5pY1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJDbGluaWMoZm9ybURhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBjaGVja0V4aXN0Q2xpbmljKGZvcm1EYXRhLmVtYWlsKTtcclxuXHJcbiAgICBpZiAoZW1haWxFeGlzdHMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBgJHtmb3JtRGF0YS5lbWFpbH0gRW1haWwgYWxyZWFkeSBleGlzdHMsIHRocm93aW5nIGVycm9yLi4uYFxyXG4gICAgICApO1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KGAke2Zvcm1EYXRhLmVtYWlsfSBpcyBhbHJlYWR5IGV4aXN0LmApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIHZlcmlmaWNhdGlvbiBjb2RlXHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25Db2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XHJcbiAgICBmb3JtRGF0YS52ZXJpZnlfY29kZSA9IHZlcmlmaWNhdGlvbkNvZGU7XHJcbiAgICBcclxuICAgIC8vIEdlbmVyYXRlIGVtYWlsIHZlcmlmaWNhdGlvbiB0b2tlbiAod2l0aG91dCBzdG9yaW5nIHRoZSBjb2RlIGluc2lkZSB0aGUgSldUKVxyXG4gICAgY29uc3QgdG9rZW5WZXJpZnkgPSBqd3Quc2lnbihcclxuICAgICAgeyBlbWFpbDogZm9ybURhdGEuZW1haWwgfSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHsgZXhwaXJlc0luIH1cclxuICAgICk7XHJcbiAgICBmb3JtRGF0YS50b2tlbl92ZXJpZnkgPSB0b2tlblZlcmlmeTtcclxuICAgIC8vIFNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXHJcbiAgICBcclxuICAgIGNvbnN0IGNsaW5pY0RhdGEgPSBhd2FpdCByZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XHJcbiAgICBpZiAoIWNsaW5pY0RhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkZhaWxlZCB0byByZWdpc3RlciBjbGluaWMuXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZW1haWxTZXJ2aWNlID0gbmV3IFNlbmRNYWlsKG5ldyBFbWFpbFByb3ZpZGVyKCkpO1xyXG4gICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRBY2NvdW50UmVnaXN0ZXIoZm9ybURhdGEuZW1haWwsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IFwiQ2xpbmljIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5LiBQbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwuXCIsXHJcbiAgICAgIG5ld1VzZXI6IHtcclxuICAgICAgICBpZDogY2xpbmljRGF0YS5pZCxcclxuICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLElBQUEsR0FBQUgsT0FBQTtBQUVBLE1BQUFJLGNBQUEsR0FBQUMsZUFBQSxDQUFBTCxPQUFBO0FBQ0EsTUFBQU0sSUFBQSxHQUFBRCxlQUFBLENBQUFMLE9BQUE7QUFDQSxNQUFBTyxZQUFBLEdBQUFGLGVBQUEsQ0FBQUwsT0FBQTtBQUlBLE1BQU1RLHdCQUF3QixHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0Ysd0JBQXdCLElBQUksSUFBSSxDQUFDLENBQUM7QUFDL0UsTUFBTUcsdUJBQXVCLEdBQUdGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyx1QkFBdUIsSUFBSSxpQkFBaUI7QUFFeEY7QUFDQSxNQUFNQyxTQUFTLEdBQ2IsT0FBT0osd0JBQXdCLEtBQUssUUFBUSxJQUM1QyxtQkFBbUIsQ0FBQ0ssSUFBSSxDQUFDTCx3QkFBd0IsQ0FBQyxHQUM5Q00sSUFBSSxDQUFDQyxLQUFLLENBQUMsSUFBQVQsSUFBQSxDQUFBVSxPQUFFLEVBQUNSLHdCQUF3QixDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQy9DQSx3QkFBd0I7QUFJOUIsTUFBYVMsYUFBYTtFQUNqQixPQUFhQyxjQUFjQSxDQUFDQyxRQUFhOztNQUM5QyxNQUFNQyxXQUFXLEdBQUcsTUFBTSxJQUFBakIsSUFBQSxDQUFBa0IsZ0JBQWdCLEVBQUNGLFFBQVEsQ0FBQ0csS0FBSyxDQUFDO01BRTFELElBQUlGLFdBQVcsRUFBRTtRQUNmRyxPQUFPLENBQUNDLEtBQUssQ0FDWCxHQUFHTCxRQUFRLENBQUNHLEtBQUssMENBQTBDLENBQzVEO1FBQ0QsTUFBTSxJQUFJcEIsZ0JBQUEsQ0FBQXVCLGFBQWEsQ0FBQ0MsVUFBVSxDQUFDLEdBQUdQLFFBQVEsQ0FBQ0csS0FBSyxvQkFBb0IsQ0FBQztNQUMzRTtNQUdBO01BQ0EsTUFBTUssZ0JBQWdCLEdBQUcsSUFBQTFCLFFBQUEsQ0FBQTJCLGVBQWUsR0FBRTtNQUMxQ1QsUUFBUSxDQUFDVSxXQUFXLEdBQUdGLGdCQUFnQjtNQUV2QztNQUNBLE1BQU1HLFdBQVcsR0FBRzFCLGNBQUEsQ0FBQVksT0FBRyxDQUFDZSxJQUFJLENBQzFCO1FBQUVULEtBQUssRUFBRUgsUUFBUSxDQUFDRztNQUFLLENBQUUsRUFDekJYLHVCQUF1QixFQUN2QjtRQUFFQztNQUFTLENBQUUsQ0FDZDtNQUNETyxRQUFRLENBQUNhLFlBQVksR0FBR0YsV0FBVztNQUNuQztNQUVBLE1BQU1HLFVBQVUsR0FBRyxNQUFNLElBQUE5QixJQUFBLENBQUFlLGNBQWMsRUFBQ0MsUUFBUSxDQUFDO01BQ2pELElBQUksQ0FBQ2MsVUFBVSxFQUFFO1FBQ2YsTUFBTSxJQUFJL0IsZ0JBQUEsQ0FBQXVCLGFBQWEsQ0FBQ0MsVUFBVSxDQUFDLDRCQUE0QixDQUFDO01BQ2xFO01BQ0EsTUFBTVEsWUFBWSxHQUFHLElBQUkzQixZQUFBLENBQUFTLE9BQVEsQ0FBQyxJQUFJakIsT0FBQSxDQUFBb0MsYUFBYSxFQUFFLENBQUM7TUFDdEQsTUFBTUQsWUFBWSxDQUFDRSxtQkFBbUIsQ0FBQ2pCLFFBQVEsQ0FBQ0csS0FBSyxFQUFFSyxnQkFBZ0IsQ0FBQztNQUV4RSxPQUFPO1FBQ0xVLE9BQU8sRUFBRSwyREFBMkQ7UUFDcEVDLE9BQU8sRUFBRTtVQUNQQyxFQUFFLEVBQUVOLFVBQVUsQ0FBQ00sRUFBRTtVQUNqQmpCLEtBQUssRUFBRUgsUUFBUSxDQUFDRzs7T0FFbkI7SUFDSCxDQUFDOzs7QUF2Q0hrQixPQUFBLENBQUF2QixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["email_1","require","common_1","response_error_1","db_1","jsonwebtoken_1","__importDefault","ms_1","send_email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","ClinicService","registerClinic","formData","emailExists","checkExistClinic","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","message","newUser","id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/service.ts"],"sourcesContent":["import { EmailProvider } from \"../../config/email\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { checkExistClinic, registerClinic } from \"./db\";\r\n\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport SendMail from \"../../helper/send_email\";\r\n\r\n\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n    \r\n    \r\n    \r\nexport class ClinicService {\r\n  public static async registerClinic(formData: any) {\r\n    const emailExists = await checkExistClinic(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    \r\n    // Generate a unique verification code\r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    // Generate email verification token (without storing the code inside the JWT)\r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerClinic(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AACA,MAAAG,IAAA,GAAAH,OAAA;AAEA,MAAAI,cAAA,GAAAC,eAAA,CAAAL,OAAA;AACA,MAAAM,IAAA,GAAAD,eAAA,CAAAL,OAAA;AACA,MAAAO,YAAA,GAAAF,eAAA,CAAAL,OAAA;AAIA,MAAMQ,wBAAwB,GAAGC,OAAO,CAACC,GAAG,CAACF,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAC/E,MAAMG,uBAAuB,GAAGF,OAAO,CAACC,GAAG,CAACC,uBAAuB,IAAI,iBAAiB;AAExF;AACA,MAAMC,SAAS,GACb,OAAOJ,wBAAwB,KAAK,QAAQ,IAC5C,mBAAmB,CAACK,IAAI,CAACL,wBAAwB,CAAC,GAC9CM,IAAI,CAACC,KAAK,CAAC,IAAAT,IAAA,CAAAU,OAAE,EAACR,wBAAwB,CAAC,GAAG,IAAI,CAAC,GAC/CA,wBAAwB;AAI9B,MAAaS,aAAa;EACjB,OAAaC,cAAcA,CAACC,QAAa;;MAC9C,MAAMC,WAAW,GAAG,MAAM,IAAAjB,IAAA,CAAAkB,gBAAgB,EAACF,QAAQ,CAACG,KAAK,CAAC;MAE1D,IAAIF,WAAW,EAAE;QACfG,OAAO,CAACC,KAAK,CACX,GAAGL,QAAQ,CAACG,KAAK,0CAA0C,CAC5D;QACD,MAAM,IAAIpB,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,GAAGP,QAAQ,CAACG,KAAK,oBAAoB,CAAC;MAC3E;MAGA;MACA,MAAMK,gBAAgB,GAAG,IAAA1B,QAAA,CAAA2B,eAAe,GAAE;MAC1CT,QAAQ,CAACU,WAAW,GAAGF,gBAAgB;MAEvC;MACA,MAAMG,WAAW,GAAG1B,cAAA,CAAAY,OAAG,CAACe,IAAI,CAC1B;QAAET,KAAK,EAAEH,QAAQ,CAACG;MAAK,CAAE,EACzBX,uBAAuB,EACvB;QAAEC;MAAS,CAAE,CACd;MACDO,QAAQ,CAACa,YAAY,GAAGF,WAAW;MACnC;MAEA,MAAMG,UAAU,GAAG,MAAM,IAAA9B,IAAA,CAAAe,cAAc,EAACC,QAAQ,CAAC;MACjD,IAAI,CAACc,UAAU,EAAE;QACf,MAAM,IAAI/B,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,4BAA4B,CAAC;MAClE;MACA,MAAMQ,YAAY,GAAG,IAAI3B,YAAA,CAAAS,OAAQ,CAAC,IAAIjB,OAAA,CAAAoC,aAAa,EAAE,CAAC;MACtD,MAAMD,YAAY,CAACE,mBAAmB,CAACjB,QAAQ,CAACG,KAAK,EAAEK,gBAAgB,CAAC;MAExE,OAAO;QACLU,OAAO,EAAE,2DAA2D;QACpEC,OAAO,EAAE;UACPC,EAAE,EAAEN,UAAU,CAACM,EAAE;UACjBjB,KAAK,EAAEH,QAAQ,CAACG;;OAEnB;IACH,CAAC;;;AAvCHkB,OAAA,CAAAvB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1739067731334},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistClinic = checkExistClinic;\nexports.registerClinic = registerClinic;\nexports.findClinicByEmail = findClinicByEmail;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistClinic(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if clinic exists:\", error);\n      throw new Error(\"An error occurred while checking clinic existence.\");\n    }\n  });\n}\nfunction registerClinic(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.clinic\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.name, data.owner_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.zip_code, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction findClinicByEmail(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`SELECT email FROM ${mysql_1.coreSchema}.clinic WHERE email ? LIMIT 1`, {\n        values: [email]\n      });\n      return result.length > 0 ? result[0] : null;\n    } catch (error) {\n      console.error(\"Error querying clinic by email:\", error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdENsaW5pYyIsInJlZ2lzdGVyQ2xpbmljIiwiZmluZENsaW5pY0J5RW1haWwiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJteXNxbF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImVtYWlsIiwicXVlcnlSZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0Iiwic2FsdFJvdW5kcyIsImhhc2hlZFBhc3N3b3JkIiwiZGVmYXVsdCIsImhhc2giLCJuZXdJZCIsInY0IiwicmVzdWx0IiwibmFtZSIsIm93bmVyX25hbWUiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiY2l0eSIsInN0YXRlIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiRGF0ZSIsIk9iamVjdCIsImFzc2lnbiIsImlkIiwibWVzc2FnZSIsIkludGVybmFsU2VydmVyIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnksIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBJQ2xpbmljIH0gZnJvbSBcIi4vSWNsaW5pY1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRXhpc3RDbGluaWMoZW1haWw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVyeVJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgMSBGUk9NICR7Y29yZVNjaGVtYX0uY2xpbmljIFdIRVJFIGVtYWlsID0gPyBMSU1JVCAxYCxcclxuICAgICAgeyB2YWx1ZXM6IFtlbWFpbF0gfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcXVlcnlSZXN1bHQubGVuZ3RoID4gMDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nIGlmIGNsaW5pYyBleGlzdHM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNoZWNraW5nIGNsaW5pYyBleGlzdGVuY2UuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyQ2xpbmljKGRhdGE6IElDbGluaWMpOiBQcm9taXNlPElDbGluaWM+IHtcclxuICBjb25zdCB7cGFzc3dvcmQgLCBjb25maXJtUGFzc3dvcmR9PSBkYXRhLnBhc3N3b3JkXHJcblxyXG4gIGlmIChwYXNzd29yZCAhPT0gY29uZmlybVBhc3N3b3JkKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaFwiKTtcclxuICB9XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jbGluaWNcclxuICAgICAgICAoaWQsbmFtZSxvd25lcl9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjaXR5LHN0YXRlLHppcF9jb2RlLGNvdW50cnksY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgICBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBkYXRhLm93bmVyX25hbWUsXHJcbiAgICAgICAgICBkYXRhLmVtYWlsLFxyXG4gICAgICAgICAgaGFzaGVkUGFzc3dvcmQgLFxyXG4gICAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEuY2l0eSxcclxuICAgICAgICAgIGRhdGEuc3RhdGUsXHJcbiAgICAgICAgICBkYXRhLnppcF9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5jb3VudHJ5LFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7IC4uLmRhdGEsIGlkOiBuZXdJZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBFcnJvcjpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBpbnNlcnQgY2xpbmljLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kQ2xpbmljQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgU0VMRUNUIGVtYWlsIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPyBMSU1JVCAxYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQubGVuZ3RoID4gMCA/IHJlc3VsdFswXSA6IG51bGw7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBxdWVyeWluZyBjbGluaWMgYnkgZW1haWw6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQUEsT0FBQSxDQUFBQyxnQkFBQSxHQUFBQSxnQkFBQTtBQWNBRCxPQUFBLENBQUFFLGNBQUEsR0FBQUEsY0FBQTtBQXdDQUYsT0FBQSxDQUFBRyxpQkFBQSxHQUFBQSxpQkFBQTtBQTVEQSxNQUFBQyxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGdCQUFBLEdBQUFILE9BQUE7QUFHQSxTQUFzQkwsZ0JBQWdCQSxD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","map":{"version":3,"names":["exports","checkExistClinic","registerClinic","findClinicByEmail","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","name","owner_name","token_verify","verify_code","phone","city","state","zip_code","country","Date","Object","assign","id","message","InternalServer"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IClinic } from \"./Iclinic\";\r\n\r\nexport async function checkExistClinic(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if clinic exists:\", error);\r\n    throw new Error(\"An error occurred while checking clinic existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerClinic(data: IClinic): Promise<IClinic> {\r\n  const {password , confirmPassword}= data.password\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.clinic\r\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.name,\r\n          data.owner_name,\r\n          data.email,\r\n          hashedPassword ,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.zip_code,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function findClinicByEmail(email: string): Promise<boolean> {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT email FROM ${coreSchema}.clinic WHERE email ? LIMIT 1`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return result.length > 0 ? result[0] : null;\r\n  } catch (error) {\r\n    console.error(\"Error querying clinic by email:\", error);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1738807766698},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkIfClinicExists = checkIfClinicExists;\nexports.getClinicByPassword = getClinicByPassword;\nexports.getDoctorByPassword = getDoctorByPassword;\nexports.getPatientByPassword = getPatientByPassword;\nexports.getClinicVerificationCode = getClinicVerificationCode;\nexports.getPatientVerificationCode = getPatientVerificationCode;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkIfClinicExists(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? \n  `, {\n      values: [email]\n    });\n    return result.length > 0;\n  });\n}\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       return null; // Email not found\n//     }\n//     const [doctor] = await query<RowDataPacket[]>(\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\n//       { values: [data.email, data.verify_code] }\n//     );\n//     if (!doctor) {\n//       return null;\n//     }\n//     const resultDoctor = await query<RowDataPacket[]>(\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\n//       { values: [1, new Date(), data.email] }\n//     );\n//     return resultDoctor;\n//   } catch (error) {\n//     console.error(\"Error confirming doctor email:\", error);\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\n//   }\n// }\n// export async function confirmClinicEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       throw new ResponseError.NotFound(\"Email not found\");\n//     }\n//     // Check if clinic exists with correct verify_code\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\n//       {\n//         values: [data.email],\n//       }\n//     );\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\n//     } else {\n//       await query<RowDataPacket[]>(\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\n//         {\n//           values: [1, new Date(), data.email],\n//         }\n//       );\n//     }\n//     return { success: true, message: \"Email confirmation successful\" };\n//   } catch (error) {\n//     return error;\n//   }\n// }\nfunction getClinicByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(\n      // ` SELECT u.*, r.*,p.*\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n      ` SELECT *\n      FROM ${mysql_1.coreSchema}.clinic \n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\nfunction getDoctorByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.patient \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction getPatientByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(` SELECT *\n      FROM ${mysql_1.coreSchema}.patient \n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n// *****getClinicVerificationCode*****\nfunction getClinicVerificationCode(clinicData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the clinic data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n      values: [clinicData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", clinicData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`);\n    if (storedVerifyCode !== clinicData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.clinic SET signup_status = 1 WHERE email = ?`, {\n      values: [clinicData.email]\n    });\n    return rows;\n  });\n}\n// *****getPatientVerificationCode*****\nfunction getPatientVerificationCode(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the patient data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n      values: [patientData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", patientData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`);\n    if (storedVerifyCode !== patientData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET signup_status = 1 WHERE email = ?`, {\n      values: [patientData.email]\n    });\n    return rows;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tJZkNsaW5pY0V4aXN0cyIsImdldENsaW5pY0J5UGFzc3dvcmQiLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZ2V0UGF0aWVudEJ5UGFzc3dvcmQiLCJnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlIiwiZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJlbWFpbCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsInBhc3N3b3JkIiwidXNlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImNsaW5pY0RhdGEiLCJyb3dzIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzdG9yZWRWZXJpZnlDb2RlIiwidmVyaWZ5X2NvZGUiLCJwYXRpZW50RGF0YSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tJZkNsaW5pY0V4aXN0cyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IFxyXG4gIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQubGVuZ3RoID4gMDtcclxufVxyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1Eb2N0b3JFbWFpbChkYXRhOiBDb25maXJtRW1haWwpIHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBjaGVja0lmRW1haWxFeGlzdHMoZGF0YS5lbWFpbCk7XHJcbi8vICAgICBpZiAoIWVtYWlsRXhpc3RzKSB7XHJcbi8vICAgICAgIHJldHVybiBudWxsOyAvLyBFbWFpbCBub3QgZm91bmRcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCBbZG9jdG9yXSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgIGBTRUxFQ1QgaWQgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3RvciBXSEVSRSBlbWFpbCA9PyBBTkQgdmVyaWZ5X2NvZGUgPT9gLFxyXG4vLyAgICAgICB7IHZhbHVlczogW2RhdGEuZW1haWwsIGRhdGEudmVyaWZ5X2NvZGVdIH1cclxuLy8gICAgICk7XHJcbi8vICAgICBpZiAoIWRvY3Rvcikge1xyXG4vLyAgICAgICByZXR1cm4gbnVsbDtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCByZXN1bHREb2N0b3IgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uZG9jdG9yIFNFVCBzaWdudXBfc3RhdHVzPT8sIHVwZGF0ZWRfYXQ9PyBXSEVSRSBlbWFpbCA9P2AsXHJcbi8vICAgICAgIHsgdmFsdWVzOiBbMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0gfVxyXG4vLyAgICAgKTtcclxuXHJcbi8vICAgICByZXR1cm4gcmVzdWx0RG9jdG9yO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY29uZmlybWluZyBkb2N0b3IgZW1haWw6XCIsIGVycm9yKTtcclxuLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJGYWlsZWQgdG8gY29uZmlybSBkb2N0b3IgZW1haWxcIik7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uZmlybUNsaW5pY0VtYWlsKGRhdGE6IENvbmZpcm1FbWFpbCkge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrSWZFbWFpbEV4aXN0cyhkYXRhLmVtYWlsKTtcclxuLy8gICAgIGlmICghZW1haWxFeGlzdHMpIHtcclxuLy8gICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJFbWFpbCBub3QgZm91bmRcIik7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8gQ2hlY2sgaWYgY2xpbmljIGV4aXN0cyB3aXRoIGNvcnJlY3QgdmVyaWZ5X2NvZGVcclxuLy8gICAgIGNvbnN0IGNoZWNrRXhpc3RDbGluaWNWZXJpZnlDb2RlID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/YCxcclxuLy8gICAgICAge1xyXG4vLyAgICAgICAgIHZhbHVlczogW2RhdGEuZW1haWxdLFxyXG4vLyAgICAgICB9XHJcbi8vICAgICApO1xyXG5cclxuLy8gICAgIGlmIChjaGVja0V4aXN0Q2xpbmljVmVyaWZ5Q29kZVswXS52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSkge1xyXG4vLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiSW52YWxpZCB2ZXJpZmljYXRpb24gY29kZVwiKTtcclxuLy8gICAgIH0gZWxzZSB7XHJcbi8vICAgICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmNsaW5pYyBTRVQgc2lnbnVwX3N0YXR1cz0/LCB1cGRhdGVkX2F0PT8gV0hFUkUgZW1haWw9P2AsXHJcbi8vICAgICAgICAge1xyXG4vLyAgICAgICAgICAgdmFsdWVzOiBbMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICApO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiRW1haWwgY29uZmlybWF0aW9uIHN1Y2Nlc3NmdWxcIiB9O1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICByZXR1cm4gZXJyb3I7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpbmljQnlQYXNzd29yZChcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBhc3N3b3JkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIC8vIGAgU0VMRUNUIHUuKiwgci4qLHAuKlxyXG4gICAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS51c2VyX3JvbGVzIHVyIE9OIHUuaWQgPSB1ci5pZFxyXG4gICAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5yb2xlcyByIE9OIHVyLnJvbGVfaWQgPSByLmlkXHJcbiAgICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVfcGVybWlzc2lvbnMgcnAgT04gci5pZCA9IHJwLnJvbGVfaWRcclxuICAgICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucGVybWlzc2lvbnMgcCBPTiBycC5wZXJtaXNzaW9uX2lkICA9IHAuaWRcclxuICAgICAgYCBTRUxFQ1QgKlxyXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0uY2xpbmljIFxyXG4gICAgICBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3RvckJ5UGFzc3dvcmQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwYXNzd29yZDogc3RyaW5nXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAvLyBgIFNFTEVDVCB1LiosIHIuKixwLipcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnVzZXJfcm9sZXMgdXIgT04gdS5pZCA9IHVyLmlkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5yb2xlcyByIE9OIHVyLnJvbGVfaWQgPSByLmlkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5yb2xlX3Blcm1pc3Npb25zIHJwIE9OIHIuaWQgPSBycC5yb2xlX2lkXHJcbiAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5wZXJtaXNzaW9ucyBwIE9OIHJwLnBlcm1pc3Npb25faWQgID0gcC5pZFxyXG4gICAgYCBTRUxFQ1QgKlxyXG4gICAgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnQgXHJcbiAgICBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnRCeVBhc3N3b3JkKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYCBTRUxFQ1QgKlxyXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudCBcclxuICAgICAgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB1c2VyO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vLyAqKioqKmdldENsaW5pY1ZlcmlmaWNhdGlvbkNvZGUqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZShjbGluaWNEYXRhOiB7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICB2ZXJpZnlfY29kZTogc3RyaW5nO1xyXG59KTogUHJvbWlzZTxhbnk+IHtcclxuICAvLyBGZXRjaCB0aGUgY2xpbmljIGRhdGFcclxuICBjb25zdCBbcm93c10gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCBlbWFpbCx2ZXJpZnlfY29kZSBGUk9NICR7Y29yZVNjaGVtYX0uY2xpbmljIFdIRVJFIGVtYWlsID0gPyBMSU1JVCAxYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbY2xpbmljRGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVtYWlsIG5vdCBmb3VuZCBpbiBkYXRhYmFzZTpcIiwgY2xpbmljRGF0YS5lbWFpbCk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIGluY29ycmVjdCFcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdG9yZWRWZXJpZnlDb2RlID0gcm93cy52ZXJpZnlfY29kZTtcclxuICBjb25zb2xlLmxvZyhcclxuICAgIGDwn5SNIFN0b3JlZCBDb2RlOiAke3N0b3JlZFZlcmlmeUNvZGV9LCBQcm92aWRlZCBDb2RlOiAke2NsaW5pY0RhdGEudmVyaWZ5X2NvZGV9YFxyXG4gICk7XHJcblxyXG4gIGlmIChzdG9yZWRWZXJpZnlDb2RlICE9PSBjbGluaWNEYXRhLnZlcmlmeV9jb2RlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFZlcmlmaWNhdGlvbiBjb2RlIG1pc21hdGNoIVwiKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJUaGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgaW5jb3JyZWN0IVwiKTtcclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSB0aGUgc2lnbnVwX3N0YXR1c1xyXG4gIGF3YWl0IHF1ZXJ5KFxyXG4gICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmNsaW5pYyBTRVQgc2lnbnVwX3N0YXR1cyA9IDEgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHsgdmFsdWVzOiBbY2xpbmljRGF0YS5lbWFpbF0gfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiByb3dzO1xyXG59XHJcblxyXG4vLyAqKioqKmdldFBhdGllbnRWZXJpZmljYXRpb25Db2RlKioqKipcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnRWZXJpZmljYXRpb25Db2RlKHBhdGllbnREYXRhOiB7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICB2ZXJpZnlfY29kZTogc3RyaW5nO1xyXG59KTogUHJvbWlzZTxhbnk+IHtcclxuICAvLyBGZXRjaCB0aGUgcGF0aWVudCBkYXRhXHJcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgZW1haWwsdmVyaWZ5X2NvZGUgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnQgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtwYXRpZW50RGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVtYWlsIG5vdCBmb3VuZCBpbiBkYXRhYmFzZTpcIiwgcGF0aWVudERhdGEuZW1haWwpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3RvcmVkVmVyaWZ5Q29kZSA9IHJvd3MudmVyaWZ5X2NvZGU7XHJcbiAgY29uc29sZS5sb2coXHJcbiAgICBg8J+UjSBTdG9yZWQgQ29kZTogJHtzdG9yZWRWZXJpZnlDb2RlfSwgUHJvdmlkZWQgQ29kZTogJHtwYXRpZW50RGF0YS52ZXJpZnlfY29kZX1gXHJcbiAgKTtcclxuXHJcbiAgaWYgKHN0b3JlZFZlcmlmeUNvZGUgIT09IHBhdGllbnREYXRhLnZlcmlmeV9jb2RlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFZlcmlmaWNhdGlvbiBjb2RlIG1pc21hdGNoIVwiKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJUaGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgaW5jb3JyZWN0IVwiKTtcclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSB0aGUgc2lnbnVwX3N0YXR1c1xyXG4gIGF3YWl0IHF1ZXJ5KFxyXG4gICAgYFVQREFURSAke2NvcmVTY2hlbWF9LnBhdGllbnQgU0VUIHNpZ251cF9zdGF0dXMgPSAxIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7IHZhbHVlczogW3BhdGllbnREYXRhLmVtYWlsXSB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJvd3M7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBQSxPQUFBLENBQUFDLG1CQUFBLEdBQUFBLG1CQUFBO0FBdUVBRCxPQUFBLENBQUFFLG1CQUFBLEdBQUFBLG1CQUFBO0FBdUJBRixPQUFBLENBQUFHLG1CQUFBLEdBQUFBLG1CQUFBO0FBb0JBSCxPQUFBLENBQUFJLG9CQUFBLEdBQUFBLG9CQUFBO0FBb0JBSixPQUFBLENBQUFLLHlCQUFBLEdBQUFBLHlCQUFBO0FBcUNBTCxPQUFBLENBQUFNLDBCQUFBLEdBQUFBLDBCQUFBO0FBOUtBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFFQSxTQUFzQlAsbUJBQW1CQSxDQUFDUyxLQUFhOztJQUNyRCxNQUFNQyxNQUFNLEdBQUcsTUFBTSxJQUFBSixPQUFBLENBQUFLLEtBQUssRUFDeEI7b0JBQ2dCTCxPQUFBLENBQUFNLFVBQVU7R0FDM0IsRUFDQztNQUNFQyxNQUFNLEVBQUUsQ0FBQ0osS0FBSztLQUNmLENBQ0Y7SUFDRCxPQUFPQyxNQUFNLENBQUNJLE1BQU0sR0FBRyxDQUFDO0VBQzFCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsU0FBc0JiLG1CQUFtQkEsQ0FD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","map":{"version":3,"names":["exports","checkIfClinicExists","getClinicByPassword","getDoctorByPassword","getPatientByPassword","getClinicVerificationCode","getPatientVerificationCode","mysql_1","require","response_error_1","email","result","query","coreSchema","values","length","password","user","error","console","log","clinicData","rows","ResponseError","BadRequest","storedVerifyCode","verify_code","patientData"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/auth/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\n\r\nexport async function checkIfClinicExists(email: string): Promise<boolean> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? \r\n  `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result.length > 0;\r\n}\r\n\r\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       return null; // Email not found\r\n//     }\r\n\r\n//     const [doctor] = await query<RowDataPacket[]>(\r\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\r\n//       { values: [data.email, data.verify_code] }\r\n//     );\r\n//     if (!doctor) {\r\n//       return null;\r\n//     }\r\n\r\n//     const resultDoctor = await query<RowDataPacket[]>(\r\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\r\n//       { values: [1, new Date(), data.email] }\r\n//     );\r\n\r\n//     return resultDoctor;\r\n//   } catch (error) {\r\n//     console.error(\"Error confirming doctor email:\", error);\r\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\r\n//   }\r\n// }\r\n\r\n// export async function confirmClinicEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       throw new ResponseError.NotFound(\"Email not found\");\r\n//     }\r\n\r\n//     // Check if clinic exists with correct verify_code\r\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\r\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\r\n//       {\r\n//         values: [data.email],\r\n//       }\r\n//     );\r\n\r\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\r\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\r\n//     } else {\r\n//       await query<RowDataPacket[]>(\r\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\r\n//         {\r\n//           values: [1, new Date(), data.email],\r\n//         }\r\n//       );\r\n//     }\r\n\r\n//     return { success: true, message: \"Email confirmation successful\" };\r\n//   } catch (error) {\r\n//     return error;\r\n//   }\r\n// }\r\n\r\nexport async function getClinicByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      // ` SELECT u.*, r.*,p.*\r\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n      ` SELECT *\r\n      FROM ${coreSchema}.clinic \r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nexport async function getDoctorByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.patient \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function getPatientByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      ` SELECT *\r\n      FROM ${coreSchema}.patient \r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\n// *****getClinicVerificationCode*****\r\nexport async function getClinicVerificationCode(clinicData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the clinic data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [clinicData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", clinicData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== clinicData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.clinic SET signup_status = 1 WHERE email = ?`,\r\n    { values: [clinicData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n\r\n// *****getPatientVerificationCode*****\r\nexport async function getPatientVerificationCode(patientData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the patient data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [patientData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", patientData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== patientData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.patient SET signup_status = 1 WHERE email = ?`,\r\n    { values: [patientData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1740021988986},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.registerClinicSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerClinicSchema = yup.object().shape({\n  name: yup.string().required(\"name is required\"),\n  owner_name: yup.string().required(\"owner_name is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyQ2xpbmljU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJuYW1lIiwic3RyaW5nIiwicmVxdWlyZWQiLCJvd25lcl9uYW1lIiwiZW1haWwiLCJwaG9uZSIsIm51bGxhYmxlIiwidG9rZW5WZXJpZnkiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwiY3JlYXRlUGFzc3dvcmRTY2hlbWEiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1FbWFpbFNjaGVtYSIsInZlcmlmeV9jb2RlIiwibGVuZ3RoIiwiY2hlY2tFbWFpbFNjaGVtYSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9jbGluaWMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJDbGluaWNTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIm5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgb3duZXJfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwib3duZXJfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgcGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcInBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQYXNzd29yZFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgbmV3UGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcIm5ld1Bhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbi8vIGV4cG9ydCBjb25zdCB1c2VyUm9sZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbi8vICAgZXhwb3J0ICBjb25zdCBsYXRlc3RUZW1wbGF0ZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIilcclxuICAgIC5yZXF1aXJlZChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmxlbmd0aCg0LCBcIlZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoYXJhY3RlcnNcIilcclxuICAgIC5yZXF1aXJlZChcIlZlcmlmeSBjb2RlIGlzIHJlcXVpcmVkXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0VtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxvQkFBb0IsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3JEQyxJQUFJLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQztFQUMvQ0MsVUFBVSxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsd0JBQXdCLENBQUM7RUFDM0RFLEtBQUssRUFBRVgsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0csS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDRixRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDeEVHLEtBQUssRUFBRVosR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0ssUUFBUSxFQUFFO0VBQzlCQyxXQUFXLEVBQUVkLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNLLFFBQVEsRUFBRTtFQUNwQ0UsUUFBUSxFQUFFZixHQUFHLENBQ1ZRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUM7RUFDcEVDLGVBQWUsRUFBRW5CLEdBQUcsQ0FDakJRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLDRCQUE0QjtDQUM3RCxDQUFDO0FBQ1dmLE9BQUEsQ0FBQWlCLG9CQUFvQixHQUFHcEIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3JEZSxXQUFXLEVBQUVyQixHQUFHLENBQ2JRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUM7RUFDcEVDLGVBQWUsRUFBRW5CLEdBQUcsQ0FDakJRLE1BQU0sRUFBRSxDQUNSUSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLDRCQUE0QjtDQUNoRSxDQUFDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRWFmLE9BQUEsQ0FBQW1CLGtCQUFrQixHQUFHdEIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ25ESyxLQUFLLEVBQUVYLEdBQUcsQ0FDUFEsTUFBTSxFQUFFLENBQ1JHLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUM3QkYsUUFBUSxDQUFDLG1CQUFtQixDQUFDO0VBQ2hDYyxXQUFXLEVBQUV2QixHQUFHLENBQ2JRLE1BQU0sRUFBRSxDQUNSZ0IsTUFBTSxDQUFDLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQyxDQUMvQ2YsUUFBUSxDQUFDLHlCQUF5QjtDQUN0QyxDQUFDO0FBRVdOLE9BQUEsQ0FBQXNCLGdCQUFnQixHQUFHekIsR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ2pESyxLQUFLLEVBQUVYLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxvQkFBb0I7Q0FDbEQsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerClinicSchema","object","shape","name","string","required","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/clinic/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const registerClinicSchema = yup.object().shape({\r\n  name: yup.string().required(\"name is required\"),\r\n  owner_name: yup.string().required(\"owner_name is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,oBAAoB,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDC,IAAI,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,kBAAkB,CAAC;EAC/CC,UAAU,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DE,KAAK,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACG,KAAK,CAAC,eAAe,CAAC,CAACF,QAAQ,CAAC,mBAAmB,CAAC;EACxEG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACK,QAAQ,EAAE;EAC9BC,WAAW,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACK,QAAQ,EAAE;EACpCE,QAAQ,EAAEf,GAAG,CACVQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEnB,GAAG,CACjBQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWf,OAAA,CAAAiB,oBAAoB,GAAGpB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDe,WAAW,EAAErB,GAAG,CACbQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEnB,GAAG,CACjBQ,MAAM,EAAE,CACRQ,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACjB,GAAG,CAACkB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEaf,OAAA,CAAAmB,kBAAkB,GAAGtB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDK,KAAK,EAAEX,GAAG,CACPQ,MAAM,EAAE,CACRG,KAAK,CAAC,sBAAsB,CAAC,CAC7BF,QAAQ,CAAC,mBAAmB,CAAC;EAChCc,WAAW,EAAEvB,GAAG,CACbQ,MAAM,EAAE,CACRgB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/Cf,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAsB,gBAAgB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDK,KAAK,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738115497792},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.doctorSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  Specialization: yup.string().required(\"Specialization is required\"),\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImRvY3RvclNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlyc3RfbmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdF9uYW1lIiwiU3BlY2lhbGl6YXRpb24iLCJsaWNlbnNlTnVtYmVyIiwib3duZXJfbmFtZSIsImVtYWlsIiwicGhvbmUiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsImxlbmd0aCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZG9jdG9yU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXJzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXJzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxhc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIFNwZWNpYWxpemF0aW9uOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJTcGVjaWFsaXphdGlvbiBpcyByZXF1aXJlZFwiKSxcclxuICBsaWNlbnNlTnVtYmVyOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsaWNlbnNlTnVtYmVyIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG93bmVyX25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgcGhvbmU6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICBwYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuLy8gZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuLy8gICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAuZW1haWwoXCJJbnZhbGlkIGVtYWlsIGZvcm1hdFwiKVxyXG4gICAgLnJlcXVpcmVkKFwiRW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubGVuZ3RoKDQsIFwiVmVyaWZ5IGNvZGUgc2hvdWxkIGJlIDQgY2hhcmFjdGVyc1wiKVxyXG4gICAgLnJlcXVpcmVkKFwiVmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiksXHJcbn0pO1xyXG4i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","map":{"version":3,"names":["yup","__importStar","require","exports","doctorSchema","object","shape","first_name","string","required","last_name","Specialization","licenseNumber","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/doctors/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const doctorSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  Specialization: yup.string().required(\"Specialization is required\"),\r\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,cAAc,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,4BAA4B,CAAC;EACnEG,aAAa,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,2BAA2B,CAAC;EACjEI,UAAU,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDK,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACM,KAAK,CAAC,eAAe,CAAC,CAACL,QAAQ,CAAC,mBAAmB,CAAC;EACxEM,KAAK,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EAC9BC,WAAW,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EACpCE,QAAQ,EAAElB,GAAG,CACVQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWlB,OAAA,CAAAoB,oBAAoB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDkB,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEalB,OAAA,CAAAsB,kBAAkB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDQ,KAAK,EAAEd,GAAG,CACPQ,MAAM,EAAE,CACRM,KAAK,CAAC,sBAAsB,CAAC,CAC7BL,QAAQ,CAAC,mBAAmB,CAAC;EAChCiB,WAAW,EAAE1B,GAAG,CACbQ,MAAM,EAAE,CACRmB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ClB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAyB,gBAAgB,GAAG5B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDQ,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738381402102},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.patientSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.patientSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInBhdGllbnRTY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsImZpcnN0X25hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3RfbmFtZSIsIm93bmVyX25hbWUiLCJlbWFpbCIsInBob25lIiwibnVsbGFibGUiLCJ0b2tlblZlcmlmeSIsInBhc3N3b3JkIiwibWluIiwib25lT2YiLCJyZWYiLCJjb25maXJtUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybUVtYWlsU2NoZW1hIiwidmVyaWZ5X2NvZGUiLCJsZW5ndGgiLCJjaGVja0VtYWlsU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccGF0aWVudHNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tIFwieXVwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGF0aWVudFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZmlyc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlyc3RfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBsYXN0X25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxhc3RfbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBvd25lcl9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgcGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcInBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQYXNzd29yZFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgbmV3UGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG4gIGNvbmZpcm1QYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcIm5ld1Bhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxufSk7XHJcbi8vIGV4cG9ydCBjb25zdCB1c2VyUm9sZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbi8vICAgZXhwb3J0ICBjb25zdCBsYXRlc3RUZW1wbGF0ZXNTY2hlbWEgPSB5dXBcclxuLy8gICAub2JqZWN0KClcclxuLy8gICAuc2hhcGUoe1xyXG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbi8vICAgfSlcclxuLy8gICAucmVxdWlyZWQoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIilcclxuICAgIC5yZXF1aXJlZChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHZlcmlmeV9jb2RlOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLmxlbmd0aCg0LCBcIlZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoYXJhY3RlcnNcIilcclxuICAgIC5yZXF1aXJlZChcIlZlcmlmeSBjb2RlIGlzIHJlcXVpcmVkXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja0VtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxhQUFhLEdBQUdKLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQUNDLEtBQUssQ0FBQztFQUM5Q0MsVUFBVSxFQUFFUCxHQUFHLENB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","map":{"version":3,"names":["yup","__importStar","require","exports","patientSchema","object","shape","first_name","string","required","last_name","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const patientSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,aAAa,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC9CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,UAAU,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACI,KAAK,CAAC,eAAe,CAAC,CAACH,QAAQ,CAAC,mBAAmB,CAAC;EACxEI,KAAK,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EAC9BC,WAAW,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EACpCE,QAAQ,EAAEhB,GAAG,CACVQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWhB,OAAA,CAAAkB,oBAAoB,GAAGrB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDgB,WAAW,EAAEtB,GAAG,CACbQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEahB,OAAA,CAAAoB,kBAAkB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDM,KAAK,EAAEZ,GAAG,CACPQ,MAAM,EAAE,CACRI,KAAK,CAAC,sBAAsB,CAAC,CAC7BH,QAAQ,CAAC,mBAAmB,CAAC;EAChCe,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRiB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ChB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAuB,gBAAgB,GAAG1B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDM,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1738463217893},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\patients.db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistPatient = checkExistPatient;\nexports.registerPatient = registerPatient;\nexports.addFavorite = addFavorite;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistPatient(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if patient exists:\", error);\n      throw new Error(\"An error occurred while checking patient existence.\");\n    }\n  });\n}\nfunction registerPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction addFavorite(patient_id, doctor_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const existingFavorite = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patient_favorites\n         WHERE patient_id = ? AND doctor_id = ?`, {\n        values: [patient_id, doctor_id]\n      });\n      if (existingFavorite.length > 0) {\n        yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patient_favorites\n            WHERE doctor_id = ? AND patient_id = ?`, {\n          values: [doctor_id, patient_id]\n        });\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = NULL WHERE id = ?`, [patient_id]);\n        return {\n          message: \"Favorite removed\"\n        };\n      } else {\n        const favoriteResult = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient_favorites (patient_id, doctor_id) \n         VALUES (?, ?)`, {\n          values: [patient_id, doctor_id]\n        });\n        const favorite_id = favoriteResult.insertId;\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = ? WHERE id = ?`, [favorite_id, patient_id]);\n        return {\n          favorite_id\n        };\n      }\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to add favorite.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJyZWdpc3RlclBhdGllbnQiLCJhZGRGYXZvcml0ZSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInV1aWRfMSIsIm15c3FsXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZW1haWwiLCJxdWVyeVJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwidG9rZW5fdmVyaWZ5IiwidmVyaWZ5X2NvZGUiLCJwaG9uZSIsImNpdHkiLCJzdGF0ZSIsImNvdW50cnkiLCJEYXRlIiwiT2JqZWN0IiwiYXNzaWduIiwiaWQiLCJtZXNzYWdlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhpc3RpbmdGYXZvcml0ZSIsImZhdm9yaXRlUmVzdWx0IiwiZmF2b3JpdGVfaWQiLCJpbnNlcnRJZCIsImxvZyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL3BhdGllbnRzLmRiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IElQYXRpZW50IH0gZnJvbSBcIi4vSVBhdGllbnRcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0V4aXN0UGF0aWVudChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50IFdIRVJFIGVtYWlsID0gPyBMSU1JVCAxYCxcclxuICAgICAgeyB2YWx1ZXM6IFtlbWFpbF0gfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcXVlcnlSZXN1bHQubGVuZ3RoID4gMDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nIGlmIHBhdGllbnQgZXhpc3RzOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjaGVja2luZyBwYXRpZW50IGV4aXN0ZW5jZS5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJQYXRpZW50KGRhdGE6IElQYXRpZW50KTogUHJvbWlzZTxJUGF0aWVudD4ge1xyXG4gIGNvbnN0IHsgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YS5wYXNzd29yZDtcclxuXHJcbiAgaWYgKHBhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJQYXNzd29yZHMgZG8gbm90IG1hdGNoXCIpO1xyXG4gIH1cclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRcclxuICAgICAgICAgIChmaXJzdF9uYW1lLGxhc3RfbmFtZSxlbWFpbCxwYXNzd29yZCx0b2tlbl92ZXJpZnksdmVyaWZ5X2NvZGUscGhvbmUsY2l0eSxzdGF0ZSxjb3VudHJ5LGNyZWF0ZWRfYXQsdXBkYXRlZF9hdClcclxuICAgICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBkYXRhLmZpcnN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgICBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICAgIGRhdGEudG9rZW5fdmVyaWZ5LFxyXG4gICAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICAgIGRhdGEucGhvbmUsXHJcbiAgICAgICAgICBkYXRhLmNpdHksXHJcbiAgICAgICAgICBkYXRhLnN0YXRlLFxyXG4gICAgICAgICAgZGF0YS5jb3VudHJ5LFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7IC4uLmRhdGEsIGlkOiBuZXdJZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBFcnJvcjpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBpbnNlcnQgY2xpbmljLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRGYXZvcml0ZShwYXRpZW50X2lkOiBudW1iZXIsIGRvY3Rvcl9pZDogbnVtYmVyKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nRmF2b3JpdGUgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRfZmF2b3JpdGVzXHJcbiAgICAgICAgIFdIRVJFIHBhdGllbnRfaWQgPSA/IEFORCBkb2N0b3JfaWQgPSA/YCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW3BhdGllbnRfaWQsIGRvY3Rvcl9pZF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBpZiAoZXhpc3RpbmdGYXZvcml0ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRfZmF2b3JpdGVzXHJcbiAgICAgICAgICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID8gQU5EIHBhdGllbnRfaWQgPSA/YCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YWx1ZXM6IFtkb2N0b3JfaWQsIHBhdGllbnRfaWRdLFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgICAgYFVQREFURSAke2NvcmVTY2hlbWF9LnBhdGllbnQgU0VUIGZhdm9yaXRlX2lkID0gTlVMTCBXSEVSRSBpZCA9ID9gLFxyXG4gICAgICAgIFtwYXRpZW50X2lkXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJGYXZvcml0ZSByZW1vdmVkXCIgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGZhdm9yaXRlUmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucGF0aWVudF9mYXZvcml0ZXMgKHBhdGllbnRfaWQsIGRvY3Rvcl9pZCkgXHJcbiAgICAgICAgIFZBTFVFUyAoPywgPylgLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZhbHVlczogW3BhdGllbnRfaWQsIGRvY3Rvcl9pZF0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBmYXZvcml0ZV9pZCA9IChmYXZvcml0ZVJlc3VsdCBhcyBhbnkpLmluc2VydElkO1xyXG4gICAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudCBTRVQgZmF2b3JpdGVfaWQgPSA/IFdIRVJFIGlkID0gP2AsXHJcbiAgICAgICAgW2Zhdm9yaXRlX2lkLCBwYXRpZW50X2lkXVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4geyBmYXZvcml0ZV9pZCB9O1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBhZGQgZmF2b3JpdGUuXCIpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQUEsT0FBQSxDQUFBQyxpQkFBQSxHQUFBQSxpQkFBQTtBQWNBRCxPQUFBLENBQUFFLGVBQUEsR0FBQUEsZUFBQTtBQXNDQUYsT0FBQSxDQUFBRyxXQUFBLEdBQUFBLFdB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","map":{"version":3,"names":["exports","checkExistPatient","registerPatient","addFavorite","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","first_name","last_name","token_verify","verify_code","phone","city","state","country","Date","Object","assign","id","message","InternalServer","patient_id","doctor_id","existingFavorite","favoriteResult","favorite_id","insertId","log"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/controller/patients/patients.db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IPatient } from \"./IPatient\";\r\n\r\nexport async function checkExistPatient(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if patient exists:\", error);\r\n    throw new Error(\"An error occurred while checking patient existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerPatient(data: IPatient): Promise<IPatient> {\r\n  const { password, confirmPassword } = data.password;\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.patient\r\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\r\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function addFavorite(patient_id: number, doctor_id: number) {\r\n  try {\r\n    const existingFavorite = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.patient_favorites\r\n         WHERE patient_id = ? AND doctor_id = ?`,\r\n      {\r\n        values: [patient_id, doctor_id],\r\n      }\r\n    );\r\n    if (existingFavorite.length > 0) {\r\n      await query<RowDataPacket>(\r\n        `DELETE FROM ${coreSchema}.patient_favorites\r\n            WHERE doctor_id = ? AND patient_id = ?`,\r\n        {\r\n          values: [doctor_id, patient_id],\r\n        }\r\n      );\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = NULL WHERE id = ?`,\r\n        [patient_id]\r\n      );\r\n\r\n      return { message: \"Favorite removed\" };\r\n    } else {\r\n      const favoriteResult = await query<RowDataPacket>(\r\n        `INSERT INTO ${coreSchema}.patient_favorites (patient_id, doctor_id) \r\n         VALUES (?, ?)`,\r\n        {\r\n          values: [patient_id, doctor_id],\r\n        }\r\n      );\r\n      const favorite_id = (favoriteResult as any).insertId;\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = ? WHERE id = ?`,\r\n        [favorite_id, patient_id]\r\n      );\r\n      return { favorite_id };\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Failed to add favorite.\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1740530445709},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\authorization.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Authorization = Authorization;\nconst jsonwebtoken_1 = __importStar(require(\"jsonwebtoken\"));\nconst token_1 = require(\"../helper/token\");\n// export async function Authorization(req: any, res: Response, next: NextFunction) {\n//   const getToken = currentToken(req);\n//   const token = verifyAccessToken(getToken);\n//   if (isEmpty(token?.data)) {\n//     return res.status(401).json({\n//       code: 401,\n//       message: token?.message,\n//     })\n//   }\n//   req.setState({ userLogin: token?.data })\n//   next()\n// }\nfunction Authorization(req, res, next) {\n  const token = (0, token_1.extractToken)(req);\n  if (!token) {\n    return res.status(401).json({\n      code: 401,\n      message: \"Unauthorized: No token provided\"\n    });\n  }\n  try {\n    const decoded = jsonwebtoken_1.default.verify(token, process.env.JWT_SECRET_ACCESS_TOKEN);\n    req.user = decoded; //  Attach user data to `req`\n    next();\n  } catch (error) {\n    if (error instanceof jsonwebtoken_1.TokenExpiredError) {\n      return res.status(401).json({\n        code: 401,\n        message: \"Unauthorized: Token expired\"\n      });\n    }\n    if (error instanceof jsonwebtoken_1.JsonWebTokenError || error instanceof jsonwebtoken_1.NotBeforeError) {\n      return res.status(403).json({\n        code: 403,\n        message: \"Forbidden: Invalid token\"\n      });\n    }\n    return res.status(500).json({\n      code: 500,\n      message: \"Internal Server Error\"\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiQXV0aG9yaXphdGlvbiIsImpzb253ZWJ0b2tlbl8xIiwiX19pbXBvcnRTdGFyIiwicmVxdWlyZSIsInRva2VuXzEiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJleHRyYWN0VG9rZW4iLCJzdGF0dXMiLCJqc29uIiwiY29kZSIsIm1lc3NhZ2UiLCJkZWNvZGVkIiwiZGVmYXVsdCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiIsInVzZXIiLCJlcnJvciIsIlRva2VuRXhwaXJlZEVycm9yIiwiSnNvbldlYlRva2VuRXJyb3IiLCJOb3RCZWZvcmVFcnJvciJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9taWRkbGV3YXJlcy9hdXRob3JpemF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGp3dCwge1xuICBKc29uV2ViVG9rZW5FcnJvcixcbiAgTm90QmVmb3JlRXJyb3IsXG4gIFRva2VuRXhwaXJlZEVycm9yLFxufSBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyBleHRyYWN0VG9rZW4gfSBmcm9tIFwiLi4vaGVscGVyL3Rva2VuXCI7XG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gQXV0aG9yaXphdGlvbihyZXE6IGFueSwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4vLyAgIGNvbnN0IGdldFRva2VuID0gY3VycmVudFRva2VuKHJlcSk7XG4vLyAgIGNvbnN0IHRva2VuID0gdmVyaWZ5QWNjZXNzVG9rZW4oZ2V0VG9rZW4pO1xuXG4vLyAgIGlmIChpc0VtcHR5KHRva2VuPy5kYXRhKSkge1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4vLyAgICAgICBjb2RlOiA0MDEsXG4vLyAgICAgICBtZXNzYWdlOiB0b2tlbj8ubWVzc2FnZSxcbi8vICAgICB9KVxuLy8gICB9XG5cbi8vICAgcmVxLnNldFN0YXRlKHsgdXNlckxvZ2luOiB0b2tlbj8uZGF0YSB9KVxuLy8gICBuZXh0KClcbi8vIH1cblxuXG5leHBvcnQgZnVuY3Rpb24gQXV0aG9yaXphdGlvbihcbiAgcmVxOiBhbnkgLFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb25cbikge1xuICBjb25zdCB0b2tlbiA9IGV4dHJhY3RUb2tlbihyZXEpO1xuICBpZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyg0MDEpXG4gICAgICAuanNvbih7IGNvZGU6IDQwMSwgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWQ6IE5vIHRva2VuIHByb3ZpZGVkXCIgfSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeShcbiAgICAgIHRva2VuLFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4gYXMgc3RyaW5nXG4gICAgKTtcbiAgICByZXEudXNlciA9IGRlY29kZWQ7IC8vIOKchSBBdHRhY2ggdXNlciBkYXRhIHRvIGByZXFgXG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRva2VuRXhwaXJlZEVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAuanNvbih7IGNvZGU6IDQwMSwgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWQ6IFRva2VuIGV4cGlyZWRcIiB9KTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgSnNvbldlYlRva2VuRXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBOb3RCZWZvcmVFcnJvcikge1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDQwMylcbiAgICAgICAgLmpzb24oeyBjb2RlOiA0MDMsIG1lc3NhZ2U6IFwiRm9yYmlkZGVuOiBJbnZhbGlkIHRva2VuXCIgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgLmpzb24oeyBjb2RlOiA1MDAsIG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBQSxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQTtBQXRCQSxNQUFBQyxjQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUtBLE1BQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBLFNBQWdCSCxhQUFhQSxDQUMzQkssR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCO0VBRWxCLE1BQU1DLEtBQUssR0FBRyxJQUFBSixPQUFBLENBQUFLLFlBQVksRUFBQ0osR0FBRyxDQUFDO0VBQy9CLElBQUksQ0FBQ0csS0FBSyxFQUFFO0lBQ1YsT0FBT0YsR0FBRyxDQUNQSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztNQUFFQyxJQUFJLEVBQUUsR0FBRztNQUFFQyxPQUFPLEVBQUU7SUFBaUMsQ0FBRSxDQUFDO0VBQ3BFO0VBQ0EsSUFBSTtJQUNGLE1BQU1DLE9BQU8sR0FBR2IsY0FBQSxDQUFBYyxPQUFHLENBQUNDLE1BQU0sQ0FDeEJSLEtBQUssRUFDTFMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHVCQUFpQyxDQUM5QztJQUNEZCxHQUFHLENBQUNlLElBQUksR0FBR04sT0FBTyxDQUFDLENBQUM7SUFDcEJQLElBQUksRUFBRTtFQUNSLENBQUMsQ0FBQyxPQUFPYyxLQUFLLEVBQUU7SUFDZCxJQUFJQSxLQUFLLFlBQVlwQixjQUFBLENBQUFxQixpQkFBaUIsRUFBRTtNQUN0QyxPQUFPaEIsR0FBRyxDQUNQSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztRQUFFQyxJQUFJLEVBQUUsR0FBRztRQUFFQyxPQUFPLEVBQUU7TUFBNkIsQ0FBRSxDQUFDO0lBQ2hFO0lBQ0EsSUFBSVEsS0FBSyxZQUFZcEIsY0FBQSxDQUFBc0IsaUJBQWlCLElBQUlGLEtBQUssWUFBWXBCLGNBQUEsQ0FBQXVCLGNBQWMsRUFBRTtNQUN6RSxPQUFPbEIsR0FBRyxDQUNQSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztRQUFFQyxJQUFJLEVBQUUsR0FBRztRQUFFQyxPQUFPLEVBQUU7TUFBMEIsQ0FBRSxDQUFDO0lBQzdEO0lBQ0EsT0FBT1AsR0FBRyxDQUNQSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztNQUFFQyxJQUFJLEVBQUUsR0FBRztNQUFFQyxPQUFPLEVBQUU7SUFBdUIsQ0FBRSxDQUFDO0VBQzFEO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","Authorization","jsonwebtoken_1","__importStar","require","token_1","req","res","next","token","extractToken","status","json","code","message","decoded","default","verify","process","env","JWT_SECRET_ACCESS_TOKEN","user","error","TokenExpiredError","JsonWebTokenError","NotBeforeError"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/middlewares/authorization.ts"],"sourcesContent":["import { NextFunction, Response } from \"express\";\nimport jwt, {\n  JsonWebTokenError,\n  NotBeforeError,\n  TokenExpiredError,\n} from \"jsonwebtoken\";\nimport { extractToken } from \"../helper/token\";\n// export async function Authorization(req: any, res: Response, next: NextFunction) {\n//   const getToken = currentToken(req);\n//   const token = verifyAccessToken(getToken);\n\n//   if (isEmpty(token?.data)) {\n//     return res.status(401).json({\n//       code: 401,\n//       message: token?.message,\n//     })\n//   }\n\n//   req.setState({ userLogin: token?.data })\n//   next()\n// }\n\n\nexport function Authorization(\n  req: any ,\n  res: Response,\n  next: NextFunction\n) {\n  const token = extractToken(req);\n  if (!token) {\n    return res\n      .status(401)\n      .json({ code: 401, message: \"Unauthorized: No token provided\" });\n  }\n  try {\n    const decoded = jwt.verify(\n      token,\n      process.env.JWT_SECRET_ACCESS_TOKEN as string\n    );\n    req.user = decoded; //  Attach user data to `req`\n    next();\n  } catch (error) {\n    if (error instanceof TokenExpiredError) {\n      return res\n        .status(401)\n        .json({ code: 401, message: \"Unauthorized: Token expired\" });\n    }\n    if (error instanceof JsonWebTokenError || error instanceof NotBeforeError) {\n      return res\n        .status(403)\n        .json({ code: 403, message: \"Forbidden: Invalid token\" });\n    }\n    return res\n      .status(500)\n      .json({ code: 500, message: \"Internal Server Error\" });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBAA,OAAA,CAAAC,aAAA,GAAAA,aAAA;AAtBA,MAAAC,cAAA,GAAAC,YAAA,CAAAC,OAAA;AAKA,MAAAC,OAAA,GAAAD,OAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA,SAAgBH,aAAaA,CAC3BK,GAAQ,EACRC,GAAa,EACbC,IAAkB;EAElB,MAAMC,KAAK,GAAG,IAAAJ,OAAA,CAAAK,YAAY,EAACJ,GAAG,CAAC;EAC/B,IAAI,CAACG,KAAK,EAAE;IACV,OAAOF,GAAG,CACPI,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAEC,IAAI,EAAE,GAAG;MAAEC,OAAO,EAAE;IAAiC,CAAE,CAAC;EACpE;EACA,IAAI;IACF,MAAMC,OAAO,GAAGb,cAAA,CAAAc,OAAG,CAACC,MAAM,CACxBR,KAAK,EACLS,OAAO,CAACC,GAAG,CAACC,uBAAiC,CAC9C;IACDd,GAAG,CAACe,IAAI,GAAGN,OAAO,CAAC,CAAC;IACpBP,IAAI,EAAE;EACR,CAAC,CAAC,OAAOc,KAAK,EAAE;IACd,IAAIA,KAAK,YAAYpB,cAAA,CAAAqB,iBAAiB,EAAE;MACtC,OAAOhB,GAAG,CACPI,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QAAEC,IAAI,EAAE,GAAG;QAAEC,OAAO,EAAE;MAA6B,CAAE,CAAC;IAChE;IACA,IAAIQ,KAAK,YAAYpB,cAAA,CAAAsB,iBAAiB,IAAIF,KAAK,YAAYpB,cAAA,CAAAuB,cAAc,EAAE;MACzE,OAAOlB,GAAG,CACPI,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QAAEC,IAAI,EAAE,GAAG;QAAEC,OAAO,EAAE;MAA0B,CAAE,CAAC;IAC7D;IACA,OAAOP,GAAG,CACPI,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAEC,IAAI,EAAE,GAAG;MAAEC,OAAO,EAAE;IAAuB,CAAE,CAAC;EAC1D;AACF","ignoreList":[]}},"mtime":1739431695137},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\token.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getToken = getToken;\nexports.extractToken = extractToken;\nexports.verifyAccessToken = verifyAccessToken;\nexports.verifyRefreshToken = verifyRefreshToken;\nconst jsonwebtoken_1 = __importStar(require(\"jsonwebtoken\"));\nrequire('dotenv').config();\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\n/**\n *\n * @param headers - Get Token from headers\n */\nfunction getToken(headers) {\n  if (headers && headers.authorization) {\n    const parted = headers.authorization.split(' ');\n    // Check Bearer xxx || JWT xxx\n    if (parted[0] === 'Bearer' || parted[0] === 'JWT') {\n      if (parted.length === 2) {\n        return parted[1];\n      }\n    }\n    return null;\n  }\n  return null;\n}\n/**\n *\n * @param req - Request\n */\nfunction extractToken(req) {\n  var _a, _b;\n  const tokenFromCookie = (_a = req.cookies) === null || _a === void 0 ? void 0 : _a.token;\n  const tokenFromHeader = (_b = req.headers.authorization) === null || _b === void 0 ? void 0 : _b.split(\" \")[1]; // Get Bearer token\n  return tokenFromCookie || tokenFromHeader || null;\n}\n/**\n *\n * @param token - Verify Token\n */\nfunction verifyAccessToken(token) {\n  try {\n    if (!token) {\n      return {\n        data: null,\n        message: 'Unauthorized!'\n      };\n    }\n    const data = jsonwebtoken_1.default.verify(token, JWT_SECRET_ACCESS_TOKEN);\n    return {\n      data,\n      message: 'Token is verify'\n    };\n  } catch (err) {\n    if (err instanceof jsonwebtoken_1.TokenExpiredError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n    if (err instanceof jsonwebtoken_1.JsonWebTokenError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n    if (err instanceof jsonwebtoken_1.NotBeforeError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n  }\n}\n/**\n *\n * @param token - Verify Token\n */\nfunction verifyRefreshToken(token) {\n  try {\n    if (!token) {\n      return {\n        data: null,\n        message: 'Unauthorized!'\n      };\n    }\n    const data = jsonwebtoken_1.default.verify(token, JWT_SECRET_REFRESH_TOKEN);\n    return {\n      data,\n      message: 'Token is verify'\n    };\n  } catch (err) {\n    if (err instanceof jsonwebtoken_1.TokenExpiredError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n    if (err instanceof jsonwebtoken_1.JsonWebTokenError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n    if (err instanceof jsonwebtoken_1.NotBeforeError) {\n      return {\n        data: null,\n        message: `Token ${err.message}`\n      };\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0VG9rZW4iLCJleHRyYWN0VG9rZW4iLCJ2ZXJpZnlBY2Nlc3NUb2tlbiIsInZlcmlmeVJlZnJlc2hUb2tlbiIsImpzb253ZWJ0b2tlbl8xIiwiX19pbXBvcnRTdGFyIiwicmVxdWlyZSIsImNvbmZpZyIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIiwicHJvY2VzcyIsImVudiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicGFydGVkIiwic3BsaXQiLCJsZW5ndGgiLCJyZXEiLCJ0b2tlbkZyb21Db29raWUiLCJfYSIsImNvb2tpZXMiLCJ0b2tlbiIsInRva2VuRnJvbUhlYWRlciIsIl9iIiwiZGF0YSIsIm1lc3NhZ2UiLCJkZWZhdWx0IiwidmVyaWZ5IiwiZXJyIiwiVG9rZW5FeHBpcmVkRXJyb3IiLCJKc29uV2ViVG9rZW5FcnJvciIsIk5vdEJlZm9yZUVycm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvdG9rZW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgand0LCB7XG4gIFRva2VuRXhwaXJlZEVycm9yLFxuICBKc29uV2ViVG9rZW5FcnJvcixcbiAgTm90QmVmb3JlRXJyb3IsXG59IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gtZXMnXG5cbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5cbmNvbnN0IHsgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sIEpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiB9OiBhbnkgPSBwcm9jZXNzLmVudlxuXG4vKipcbiAqXG4gKiBAcGFyYW0gaGVhZGVycyAtIEdldCBUb2tlbiBmcm9tIGhlYWRlcnNcbiAqL1xuZnVuY3Rpb24gZ2V0VG9rZW4oaGVhZGVyczogYW55KSB7XG4gIGlmIChoZWFkZXJzICYmIGhlYWRlcnMuYXV0aG9yaXphdGlvbikge1xuICAgIGNvbnN0IHBhcnRlZCA9IGhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpXG5cbiAgICAvLyBDaGVjayBCZWFyZXIgeHh4IHx8IEpXVCB4eHhcbiAgICBpZiAocGFydGVkWzBdID09PSAnQmVhcmVyJyB8fCBwYXJ0ZWRbMF0gPT09ICdKV1QnKSB7XG4gICAgICBpZiAocGFydGVkLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gcGFydGVkWzFdXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVxIC0gUmVxdWVzdFxuICovXG4gZnVuY3Rpb24gZXh0cmFjdFRva2VuKHJlcTogUmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCB0b2tlbkZyb21Db29raWUgPSByZXEuY29va2llcz8udG9rZW47XG4gIGNvbnN0IHRva2VuRnJvbUhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KFwiIFwiKVsxXTsgLy8gR2V0IEJlYXJlciB0b2tlblxuXG4gIHJldHVybiB0b2tlbkZyb21Db29raWUgfHwgdG9rZW5Gcm9tSGVhZGVyIHx8IG51bGw7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0b2tlbiAtIFZlcmlmeSBUb2tlblxuICovXG5mdW5jdGlvbiB2ZXJpZnlBY2Nlc3NUb2tlbih0b2tlbjogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCEnIH1cbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4pXG4gICAgcmV0dXJuIHsgZGF0YSwgbWVzc2FnZTogJ1Rva2VuIGlzIHZlcmlmeScgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVG9rZW5FeHBpcmVkRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIG1lc3NhZ2U6IGBUb2tlbiAke2Vyci5tZXNzYWdlfWAgfVxuICAgIH1cblxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBKc29uV2ViVG9rZW5FcnJvcikge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgbWVzc2FnZTogYFRva2VuICR7ZXJyLm1lc3NhZ2V9YCB9XG4gICAgfVxuXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIE5vdEJlZm9yZUVycm9yKSB7XG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBtZXNzYWdlOiBgVG9rZW4gJHtlcnIubWVzc2FnZX1gIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHRva2VuIC0gVmVyaWZ5IFRva2VuXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeVJlZnJlc2hUb2tlbih0b2tlbjogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCEnIH1cbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOKVxuICAgIHJldHVybiB7IGRhdGEsIG1lc3NhZ2U6ICdUb2tlbiBpcyB2ZXJpZnknIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFRva2VuRXhwaXJlZEVycm9yKSB7XG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBtZXNzYWdlOiBgVG9rZW4gJHtlcnIubWVzc2FnZX1gIH1cbiAgICB9XG5cbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgSnNvbldlYlRva2VuRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIG1lc3NhZ2U6IGBUb2tlbiAke2Vyci5tZXNzYWdlfWAgfVxuICAgIH1cblxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBOb3RCZWZvcmVFcnJvcikge1xuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgbWVzc2FnZTogYFRva2VuICR7ZXJyLm1lc3NhZ2V9YCB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IGdldFRva2VuLCBleHRyYWN0VG9rZW4sIHZlcmlmeUFjY2Vzc1Rva2VuLCB2ZXJpZnlSZWZyZXNoVG9rZW4gfVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpR1NBLE9BQUEsQ0FBQUMsUUFBQSxHQUFBQSxRQUFBO0FBQVVELE9BQUEsQ0FBQUUsWUFBQSxHQUFBQSxZQUFBO0FBQWNGLE9BQUEsQ0FBQUcsaUJBQUEsR0FBQUEsaUJBQUE7QUFBbUJILE9BQUEsQ0FBQUksa0JBQUEsR0FBQUEsa0JBQUE7QUFoR3BELE1BQUFDLGNBQUEsR0FBQUMsWUFBQSxDQUFBQyxPQUFBO0FBT0FBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxFQUFFO0FBRTFCLE1BQU07RUFBRUMsdUJBQXVCO0VBQUVDO0FBQXdCLENBQUUsR0FBUUMsT0FBTyxDQUFDQyxHQUFHO0FBRTlFOzs7O0FBSUEsU0FBU1gsUUFBUUEsQ0FBQ1ksT0FBWTtFQUM1QixJQUFJQSxPQUFPLElBQUlBLE9BQU8sQ0FBQ0MsYUFBYSxFQUFFO0lBQ3BDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDQyxhQUFhLENBQUNFLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFFL0M7SUFDQSxJQUFJRCxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxJQUFJQSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFO01BQ2pELElBQUlBLE1BQU0sQ0FBQ0Us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","map":{"version":3,"names":["exports","getToken","extractToken","verifyAccessToken","verifyRefreshToken","jsonwebtoken_1","__importStar","require","config","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","headers","authorization","parted","split","length","req","tokenFromCookie","_a","cookies","token","tokenFromHeader","_b","data","message","default","verify","err","TokenExpiredError","JsonWebTokenError","NotBeforeError"],"sourceRoot":"D:\\Personal\\My-projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Personal/My-projects/clinicall_ali/server/src/helper/token.ts"],"sourcesContent":["import { Request } from 'express'\nimport jwt, {\n  TokenExpiredError,\n  JsonWebTokenError,\n  NotBeforeError,\n} from 'jsonwebtoken'\nimport { isEmpty } from 'lodash-es'\n\nrequire('dotenv').config()\n\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env\n\n/**\n *\n * @param headers - Get Token from headers\n */\nfunction getToken(headers: any) {\n  if (headers && headers.authorization) {\n    const parted = headers.authorization.split(' ')\n\n    // Check Bearer xxx || JWT xxx\n    if (parted[0] === 'Bearer' || parted[0] === 'JWT') {\n      if (parted.length === 2) {\n        return parted[1]\n      }\n    }\n\n    return null\n  }\n  return null\n}\n\n/**\n *\n * @param req - Request\n */\n function extractToken(req: Request): string | null {\n  const tokenFromCookie = req.cookies?.token;\n  const tokenFromHeader = req.headers.authorization?.split(\" \")[1]; // Get Bearer token\n\n  return tokenFromCookie || tokenFromHeader || null;\n}\n\n/**\n *\n * @param token - Verify Token\n */\nfunction verifyAccessToken(token: string) {\n  try {\n    if (!token) {\n      return { data: null, message: 'Unauthorized!' }\n    }\n\n    const data = jwt.verify(token, JWT_SECRET_ACCESS_TOKEN)\n    return { data, message: 'Token is verify' }\n  } catch (err) {\n    if (err instanceof TokenExpiredError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n\n    if (err instanceof JsonWebTokenError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n\n    if (err instanceof NotBeforeError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n  }\n}\n\n/**\n *\n * @param token - Verify Token\n */\nfunction verifyRefreshToken(token: string) {\n  try {\n    if (!token) {\n      return { data: null, message: 'Unauthorized!' }\n    }\n\n    const data = jwt.verify(token, JWT_SECRET_REFRESH_TOKEN)\n    return { data, message: 'Token is verify' }\n  } catch (err) {\n    if (err instanceof TokenExpiredError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n\n    if (err instanceof JsonWebTokenError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n\n    if (err instanceof NotBeforeError) {\n      return { data: null, message: `Token ${err.message}` }\n    }\n  }\n}\n\nexport { getToken, extractToken, verifyAccessToken, verifyRefreshToken }\n"],"mappings":"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","ignoreList":[]}},"mtime":1739431695137},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst compression_1 = __importDefault(require(\"compression\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst express_1 = __importDefault(require(\"express\"));\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst constants_allowed_orginal_1 = require(\"./constants/constants_allowed_orginal\");\nconst express_auto_handle_transaction_1 = require(\"./middlewares/express_auto_handle_transaction\");\nconst express_error_response_1 = require(\"./middlewares/express_error_response\");\nconst express_error_yup_1 = require(\"./middlewares/express_error_yup\");\nconst index_1 = require(\"./routes/index\");\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.allowedOrigins,\n  methods: \"GET,POST,PUT,DELETE\",\n  allowedHeaders: \"Content-Type,Authorization\"\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set(\"views\", path_1.default.join(`${__dirname}/../`, \"views\"));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: true\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: \"200mb\",\n  type: \"application/json\"\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, \"public\")));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.routes);\n// app.use('/v1', handleRollbackTransaction)\napp.use(\"/v1\", express_error_yup_1.ExpressErrorYup);\napp.use(\"/v1\", express_error_response_1.ExpressErrorResponse);\napp.use(express_auto_handle_transaction_1.ExpressAutoHandleTransaction);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get(\"env\") === \"development\" ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21wcmVzc2lvbl8xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImNvb2tpZV9wYXJzZXJfMSIsImNvcnNfMSIsImV4cHJlc3NfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJoZWxtZXRfMSIsImhwcF8xIiwiaHR0cF9lcnJvcnNfMSIsInBhdGhfMSIsInJlcXVlc3RfaXBfMSIsImNvbnN0YW50c19hbGxvd2VkX29yZ2luYWxfMSIsImV4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb25fMSIsImV4cHJlc3NfZXJyb3JfcmVzcG9uc2VfMSIsImV4cHJlc3NfZXJyb3JfeXVwXzEiLCJpbmRleF8xIiwib3B0Q29ycyIsIm9yaWdpbiIsImFsbG93ZWRPcmlnaW5zIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiYXBwIiwiZGVmYXVsdCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwibGltaXQiLCJ0eXBlIiwic3RhdGljIiwiZXhwcmVzcyIsIm13Iiwicm91dGVzIiwiRXhwcmVzc0Vycm9yWXVwIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5pbXBvcnQgY29tcHJlc3Npb24gZnJvbSBcImNvbXByZXNzaW9uXCI7XHJcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IGV4cHJlc3MsIHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB1c2VyQWdlbnQgZnJvbSBcImV4cHJlc3MtdXNlcmFnZW50XCI7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSBcImhlbG1ldFwiO1xyXG5pbXBvcnQgaHBwIGZyb20gXCJocHBcIjtcclxuaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gXCJodHRwLWVycm9yc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgcmVxdWVzdElwIGZyb20gXCJyZXF1ZXN0LWlwXCI7XHJcbmltcG9ydCB7IGFsbG93ZWRPcmlnaW5zIH0gZnJvbSBcIi4vY29uc3RhbnRzL2NvbnN0YW50c19hbGxvd2VkX29yZ2luYWxcIjtcclxuaW1wb3J0IHsgRXhwcmVzc0F1dG9IYW5kbGVUcmFuc2FjdGlvbiB9IGZyb20gXCIuL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb25cIjtcclxuaW1wb3J0IHsgRXhwcmVzc0Vycm9yUmVzcG9uc2UgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IEV4cHJlc3NFcnJvcll1cCB9IGZyb20gXCIuL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwXCI7XHJcbmltcG9ydCB7IHJvdXRlcyB9IGZyb20gXCIuL3JvdXRlcy9pbmRleFwiO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xyXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogYWxsb3dlZE9yaWdpbnMsXHJcbiAgbWV0aG9kczogXCJHRVQsUE9TVCxQVVQsREVMRVRFXCIsXHJcbiAgYWxsb3dlZEhlYWRlcnM6IFwiQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb25cIixcclxufTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuXHJcblxyXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxyXG5hcHAuc2V0KFwidmlld3NcIiwgcGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgXCJ2aWV3c1wiKSk7XHJcbi8vIGFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ3B1ZycpXHJcblxyXG5hcHAudXNlKGhlbG1ldCgpKTtcclxuYXBwLnVzZShjb3JzKG9wdENvcnMpKTtcclxuLy8gYXBwLnVzZShsb2dnZXIoJ2NvbWJpbmVkJywgeyBzdHJlYW06IHdpbnN0b25TdHJlYW0gfSkpXHJcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpOyAvLyBUT0RPIDogIGNoZWNrIGl0IHNob3VsZCBiZSBmYWxzZSBvciB0cnVlXHJcbmFwcC51c2UoXHJcbiAgZXhwcmVzcy5qc29uKHtcclxuICAgIGxpbWl0OiBcIjIwMG1iXCIsXHJcbiAgICB0eXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9KVxyXG4pO1xyXG5cclxuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XHJcbmFwcC51c2UoY29tcHJlc3Npb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgXCJwdWJsaWNcIikpKTtcclxuYXBwLnVzZShocHAoKSk7XHJcbmFwcC51c2UodXNlckFnZW50LmV4cHJlc3MoKSk7XHJcbmFwcC51c2UocmVxdWVzdElwLm13KCkpO1xyXG4vLyBUT0RPIDogYWRkIHRoaXMgbGF0ZXJcclxuXHJcbi8vIEluaXRpYWwgUm91dGVcclxuYXBwLnVzZShyb3V0ZXMpO1xyXG5cclxuLy8gYXBwLnVzZSgnL3YxJywgaGFuZGxlUm9sbGJhY2tUcmFuc2FjdGlvbilcclxuYXBwLnVzZShcIi92MVwiLCBFeHByZXNzRXJyb3JZdXApO1xyXG5hcHAudXNlKFwiL3YxXCIsIEV4cHJlc3NFcnJvclJlc3BvbnNlKTtcclxuYXBwLnVzZShFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKTtcclxuXHJcbi8vIGNhdGNoIDQwNCBhbmQgZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyXHJcbmFwcC51c2UoZnVuY3Rpb24gKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XHJcbiAgbmV4dChjcmVhdGVFcnJvcig0MDQpKTtcclxufSk7XHJcblxyXG4vLyBlcnJvciBoYW5kbGVyXHJcbmFwcC51c2UoZnVuY3Rpb24gKGVycjogYW55LCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xyXG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XHJcbiAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XHJcbiAgcmVzLmxvY2Fscy5lcnJvciA9IHJlcS5hcHAuZ2V0KFwiZW52XCIpID09PSBcImRldmVsb3BtZW50XCIgPyBlcnIgOiB7fTtcclxuXHJcbiAgLy8gcmVuZGVyIHRoZSBlcnJvciBwYWdlXHJcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgcmVzLmpzb24oe1xyXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICBlcnJvcjogZXJyLFxyXG4gIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBLE1BQUFBLGFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsZUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxNQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUosZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUksbUJBQUEsR0FBQUwsZUFBQSxDQUFBQyxP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","map":{"version":3,"names":["compression_1","__importDefault","require","cookie_parser_1","cors_1","express_1","express_useragent_1","helmet_1","hpp_1","http_errors_1","path_1","request_ip_1","constants_allowed_orginal_1","express_auto_handle_transaction_1","express_error_response_1","express_error_yup_1","index_1","optCors","origin","allowedOrigins","methods","allowedHeaders","app","default","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","routes","ExpressErrorYup","ExpressErrorResponse","ExpressAutoHandleTransaction","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport compression from \"compression\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport cors from \"cors\";\r\nimport express, { NextFunction, Request, Response } from \"express\";\r\nimport userAgent from \"express-useragent\";\r\nimport helmet from \"helmet\";\r\nimport hpp from \"hpp\";\r\nimport createError from \"http-errors\";\r\nimport path from \"path\";\r\nimport requestIp from \"request-ip\";\r\nimport { allowedOrigins } from \"./constants/constants_allowed_orginal\";\r\nimport { ExpressAutoHandleTransaction } from \"./middlewares/express_auto_handle_transaction\";\r\nimport { ExpressErrorResponse } from \"./middlewares/express_error_response\";\r\nimport { ExpressErrorYup } from \"./middlewares/express_error_yup\";\r\nimport { routes } from \"./routes/index\";\r\n\r\n// TODO: change to .ts\r\nconst optCors: cors.CorsOptions = {\r\n  origin: allowedOrigins,\r\n  methods: \"GET,POST,PUT,DELETE\",\r\n  allowedHeaders: \"Content-Type,Authorization\",\r\n};\r\nconst app = express();\r\n\r\n\r\n\r\n// view engine setup\r\napp.set(\"views\", path.join(`${__dirname}/../`, \"views\"));\r\n// app.set('view engine', 'pug')\r\n\r\napp.use(helmet());\r\napp.use(cors(optCors));\r\n// app.use(logger('combined', { stream: winstonStream }))\r\napp.use(express.urlencoded({ extended: true })); // TODO :  check it should be false or true\r\napp.use(\r\n  express.json({\r\n    limit: \"200mb\",\r\n    type: \"application/json\",\r\n  })\r\n);\r\n\r\napp.use(cookieParser());\r\napp.use(compression());\r\napp.use(express.static(path.join(`${__dirname}/../`, \"public\")));\r\napp.use(hpp());\r\napp.use(userAgent.express());\r\napp.use(requestIp.mw());\r\n// TODO : add this later\r\n\r\n// Initial Route\r\napp.use(routes);\r\n\r\n// app.use('/v1', handleRollbackTransaction)\r\napp.use(\"/v1\", ExpressErrorYup);\r\napp.use(\"/v1\", ExpressErrorResponse);\r\napp.use(ExpressAutoHandleTransaction);\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req: Request, res: Response, next: NextFunction) {\r\n  next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message;\r\n  res.locals.error = req.app.get(\"env\") === \"development\" ? err : {};\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.json({\r\n    message: err.message,\r\n    error: err,\r\n  });\r\n});\r\n\r\nmodule.exports = app;\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742283312068},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.routes = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = require(\"./public\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nexports.routes = express_1.default.Router();\n/* Home Page. */\nexports.routes.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nexports.routes.get('/v1', function (req, res, next) {\n  throw new response_error_1.ResponseError.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nexports.routes.use('/v1', public_1.router);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZXhwb3J0cyIsInJvdXRlcyIsImRlZmF1bHQiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsIlJlc3BvbnNlRXJyb3IiLCJGb3JiaWRkZW4iLCJ1c2UiLCJyb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xccm91dGVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvcm91dGVzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gJy4vcHVibGljJztcclxuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZXMgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLyogSG9tZSBQYWdlLiAqL1xyXG5yb3V0ZXMuZ2V0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zZW5kKGA8aDE+V2VsY29tZSBUbyBDbGljbmljIFN1cHBvcnQgQ2VudGVyIHNlcnZlcjwvaDE+PGJyLz48YnIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMz5GaW5kIEFwaSBkb2NzIEhlcmUgOjwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPjxhPi92MS9hcGktZG9jczwvYT48L2gzPmApXHJcbiAgfSlcclxuXHJcbi8qIEZvcmJpZGRlbiBQYWdlLiAqL1xyXG5yb3V0ZXMuZ2V0KCcvdjEnLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQgKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Gb3JiaWRkZW4oJ2ZvcmJpZGRlbiwgd3JvbmcgYWNjZXNzIGVuZHBvaW50JylcclxuICB9KVxyXG5cclxuLyogRGVjbGFyZSBSb3V0ZSAqL1xyXG5yb3V0ZXMudXNlKCcvdjEnLCByb3V0ZXIpXHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVhRyxPQUFBLENBQUFDLE1BQU0sR0FBR04sU0FBQSxDQUFBTyxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUV0QztBQUNBSCxPQUFBLENBQUFDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsT0FBQSxDQUFBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFDdEMsTUFBTSxJQUFJUixnQkFBQSxDQUFBVSxhQUFhLENBQUNDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFSjtBQUNBVixPQUFBLENBQUFDLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLEtBQUssRUFBRWIsUUFBQSxDQUFBYyxNQUFNLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","exports","routes","default","Router","get","req","res","next","send","ResponseError","Forbidden","use","router"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\r\nimport {router} from './public';\r\nimport {ResponseError} from '../modules/error/response_error';\r\n\r\nexport const routes = express.Router();\r\n\r\n/* Home Page. */\r\nroutes.get('/', function (req, res, next) {\r\n\r\n    return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\r\n                    <h3>Find Api docs Here :</h3>\r\n                    <h3><a>/v1/api-docs</a></h3>`)\r\n  })\r\n\r\n/* Forbidden Page. */\r\nroutes.get('/v1', function (req, res, next ) {\r\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\r\n  })\r\n\r\n/* Declare Route */\r\nroutes.use('/v1', router)\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AAEaG,OAAA,CAAAC,MAAM,GAAGN,SAAA,CAAAO,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAH,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAR,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIR,gBAAA,CAAAU,aAAa,CAACC,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAV,OAAA,CAAAC,MAAM,CAACU,GAAG,CAAC,KAAK,EAAEb,QAAA,CAAAc,MAAM,CAAC","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.router = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nexports.router = express_1.default.Router();\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\nrequire(\"../controller/doctors/controller\");\nrequire(\"../controller/medications/controller\");\nrequire(\"../controller/diseases/controller\");\nrequire(\"../controller/prescription-medicine/controller\");\nrequire(\"../controller/clinic_services/controller\");\nrequire(\"../controller/cities/controller\");\nrequire(\"../controller/insurance/controller\");\nrequire(\"../controller/clinic/controller\");\nrequire(\"../controller/elastic-search/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJvdXRlciIsImRlZmF1bHQiLCJSb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xccm91dGVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvcm91dGVzL3B1YmxpYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vLyAgQVBJc1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hdXRoL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3VzZXIvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FwcG9pbnRtZW50L2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FkbWluL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvbWVkaWNhdGlvbnMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvZGlzZWFzZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2NsaW5pY19zZXJ2aWNlcy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jaXRpZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvaW5zdXJhbmNlL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2NsaW5pYy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9lbGFzdGljLXNlYXJjaC9jb250cm9sbGVyXCIpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsU0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxNQUFNLEdBQUdKLFNBQUEsQ0FBQUssT0FBTyxDQUFDQyxNQUFNLEVBQUU7QUFFdEM7QUFDQUosT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDeENBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3Q0EsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBQy9DQSxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFDekNBLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUM1Q0EsT0FBTyxDQUFDLGtDQUFrQyxDQUFDO0FBQzNDQSxPQUFPLENBQUMsc0NBQXNDLENBQUM7QUFDL0NBLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUM1Q0EsT0FBTyxDQUFDLGdEQUFnRCxDQUFDO0FBQ3pEQSxPQUFPLENBQUMsMENBQTBDLENBQUM7QUFDbkRBLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztBQUMxQ0EsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQzdDQSxPQUFPLENBQUMsaUNBQWlDLENBQUM7QUFDMUNBLE9BQU8sQ0FBQyx5Q0FBeUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_1","__importDefault","require","exports","router","default","Router"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nexport const router = express.Router();\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\nrequire(\"../controller/doctors/controller\");\r\nrequire(\"../controller/medications/controller\");\r\nrequire(\"../controller/diseases/controller\");\r\nrequire(\"../controller/prescription-medicine/controller\");\r\nrequire(\"../controller/clinic_services/controller\");\r\nrequire(\"../controller/cities/controller\");\r\nrequire(\"../controller/insurance/controller\");\r\nrequire(\"../controller/clinic/controller\");\r\nrequire(\"../controller/elastic-search/controller\");\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,MAAM,GAAGJ,SAAA,CAAAK,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAJ,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,kCAAkC,CAAC;AAC3CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,gDAAgD,CAAC;AACzDA,OAAO,CAAC,0CAA0C,CAAC;AACnDA,OAAO,CAAC,iCAAiC,CAAC;AAC1CA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,iCAAiC,CAAC;AAC1CA,OAAO,CAAC,yCAAyC,CAAC","ignoreList":[]}},"mtime":1742127727884},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst service_2 = require(\"../clinic/service\");\nconst services_1 = require(\"../patients/services\");\nconst axios_1 = __importDefault(require(\"axios\"));\n// ***** clinic sign-up *****\npublic_1.router.post(`/auth/clinic/register`, (0, async_handler_1.asyncHandler)(function clinicRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_2.ClinicService.registerClinic(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** patient sign-up *****\npublic_1.router.post(`/auth/patient/register`, (0, async_handler_1.asyncHandler)(function patientRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.registerPatient(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/verify-recaptcha\", (0, async_handler_1.asyncHandler)(function verifyRecaptcha(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      token\n    } = req.body;\n    const secretKey = '6Lfts_AqAAAAAJ6Rct_LzxLQC5Ox5G1tOJHS_Bhr';\n    if (!token) {\n      return res.status(400).json({\n        success: false,\n        message: \"Token is required\"\n      });\n    }\n    try {\n      const response = yield axios_1.default.post(`https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${token}`);\n      if (response.data.success) {\n        return res.status(200).json({\n          success: true\n        });\n      } else {\n        return res.status(400).json({\n          success: false,\n          message: \"Recaptcha verification failed\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Recaptcha verification error:\", error);\n      return res.status(500).json({\n        success: false,\n        message: \"Server error\"\n      });\n    }\n  });\n}));\n// ***** confirm *****\npublic_1.router.post(\"/auth/verify-clinic-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmClinicEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/verify-patient-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmPatientEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** clinic-sign-in *****\npublic_1.router.post(\"/auth/clinic-sign-in\", (0, async_handler_1.asyncHandler)(function clinicSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.clinicSignIn(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** doctor-sign-in *****\npublic_1.router.post(\"/auth/doctor-sign-in\", (0, async_handler_1.asyncHandler)(function doctorSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.doctorSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/patient-sign-in\", (0, async_handler_1.asyncHandler)(function patientSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.patientSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJhc3luY19oYW5kbGVyXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInNlcnZpY2VfMiIsInNlcnZpY2VzXzEiLCJheGlvc18xIiwiX19pbXBvcnREZWZhdWx0Iiwicm91dGVyIiwicG9zdCIsImFzeW5jSGFuZGxlciIsImNsaW5pY1JlZ2lzdGVyIiwicmVxIiwicmVzIiwiZm9ybURhdGEiLCJib2R5IiwiZGF0YSIsIkNsaW5pY1NlcnZpY2UiLCJyZWdpc3RlckNsaW5pYyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwiZ2V0Iiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJwYXRpZW50UmVnaXN0ZXIiLCJQYXRpZW50U2VydmljZSIsInJlZ2lzdGVyUGF0aWVudCIsInZlcmlmeVJlY2FwdGNoYSIsInRva2VuIiwic2VjcmV0S2V5Iiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsImRlZmF1bHQiLCJlcnJvciIsImNvbnNvbGUiLCJ2ZXJpZnlFbWFpbCIsIm5leHQiLCJlbWFpbCIsInZlcmlmeV9jb2RlIiwiQXV0aFNlcnZpY2UiLCJjb25maXJtQ2xpbmljRW1haWwiLCJjb25maXJtUGF0aWVudEVtYWlsIiwiY2xpbmljU2lnbkluIiwiZG9jdG9yU2lnbkluIiwicGF0aWVudFNpZ25JbiJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuXHJcbmltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgQ2xpbmljU2VydmljZSB9IGZyb20gXCIuLi9jbGluaWMvc2VydmljZVwiO1xyXG5pbXBvcnQgeyBQYXRpZW50U2VydmljZSB9IGZyb20gXCIuLi9wYXRpZW50cy9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcblxyXG4vLyAqKioqKiBjbGluaWMgc2lnbi11cCAqKioqKlxyXG5yb3V0ZXIucG9zdChcclxuICBgL2F1dGgvY2xpbmljL3JlZ2lzdGVyYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2xpbmljUmVnaXN0ZXIocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENsaW5pY1NlcnZpY2UucmVnaXN0ZXJDbGluaWMoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKioqIHBhdGllbnQgc2lnbi11cCAqKioqKlxyXG5yb3V0ZXIucG9zdChcclxuICBgL2F1dGgvcGF0aWVudC9yZWdpc3RlcmAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHBhdGllbnRSZWdpc3RlcihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC92ZXJpZnktcmVjYXB0Y2hhXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVJlY2FwdGNoYShyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3Qgc2VjcmV0S2V5ID0gJzZMZnRzX0FxQUFBQUFKNlJjdF9MenhMUUM1T3g1RzF0T0pIU19CaHInO1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVG9rZW4gaXMgcmVxdWlyZWRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoXHJcbiAgICAgICAgYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9zaXRldmVyaWZ5P3NlY3JldD0ke3NlY3JldEtleX0mcmVzcG9uc2U9JHt0b2tlbn1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJSZWNhcHRjaGEgdmVyaWZpY2F0aW9uIGZhaWxlZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiUmVjYXB0Y2hhIHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJTZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiogY29uZmlybSAqKioqKlxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hdXRoL3ZlcmlmeS1jbGluaWMtZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdmVyaWZ5RW1haWwoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlLFxyXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuY29uZmlybUNsaW5pY0VtYWlsKHsgZW1haWwsIHZlcmlmeV9jb2RlIH0pO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5wb3N0KFxyXG4gIFwiL2F1dGgvdmVyaWZ5LXBhdGllbnQtZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdmVyaWZ5RW1haWwoXHJcbiAgICByZXE6IFJlcXVlc3QsXHJcbiAgICByZXM6IFJlc3BvbnNlLFxyXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5jb25maXJtUGF0aWVudEVtYWlsKHsgZW1haWwsIHZlcmlmeV9jb2RlIH0pO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqKiBjbGluaWMtc2lnbi1pbiAqKioqKlxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hdXRoL2NsaW5pYy1zaWduLWluXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNsaW5pY1NpZ25JbihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuY2xpbmljU2lnbkluKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiBkb2N0b3Itc2lnbi1pbiAqKioqKlxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hdXRoL2RvY3Rvci1zaWduLWluXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRvY3RvclNpZ25JbihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuZG9jdG9yU2lnbkluKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hdXRoL3BhdGllbnQtc2lnbi1pblwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBwYXRpZW50U2lnbkluKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5wYXRpZW50U2lnbkluKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9hdXRoL3ZlcmlmeS1lbWFpbC1jb2RlXCIsXHJcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1FbWFpbENvZGUocmVxOiBhbnksIHJlczogYW55KSB7XHJcbi8vICAgICBjb25zdCBlbWFpbCA9IHJlcS5xdWVyeS5lbWFpbDtcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5jb25maXJtRW1haWxDb2RlKGVtYWlsKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJl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","map":{"version":3,"names":["app_response_1","require","async_handler_1","public_1","service_1","service_2","services_1","axios_1","__importDefault","router","post","asyncHandler","clinicRegister","req","res","formData","body","data","ClinicService","registerClinic","buildResponse","BuildResponse","get","status","code","json","patientRegister","PatientService","registerPatient","verifyRecaptcha","token","secretKey","success","message","response","default","error","console","verifyEmail","next","email","verify_code","AuthService","confirmClinicEmail","confirmPatientEmail","clinicSignIn","doctorSignIn","patientSignIn"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/auth/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { AuthService } from \"./service\";\r\nimport { ClinicService } from \"../clinic/service\";\r\nimport { PatientService } from \"../patients/services\";\r\nimport axios from \"axios\";\r\n\r\n// ***** clinic sign-up *****\r\nrouter.post(\r\n  `/auth/clinic/register`,\r\n  asyncHandler(async function clinicRegister(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await ClinicService.registerClinic(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// ***** patient sign-up *****\r\nrouter.post(\r\n  `/auth/patient/register`,\r\n  asyncHandler(async function patientRegister(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await PatientService.registerPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  \"/auth/verify-recaptcha\",\r\n  asyncHandler(async function verifyRecaptcha(req: any, res: any) {\r\n    const { token } = req.body;\r\n    const secretKey = '6Lfts_AqAAAAAJ6Rct_LzxLQC5Ox5G1tOJHS_Bhr';\r\n\r\n    if (!token) {\r\n      return res.status(400).json({ success: false, message: \"Token is required\" });\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${token}`\r\n      );\r\n\r\n      if (response.data.success) {\r\n        return res.status(200).json({ success: true });\r\n      } else {\r\n        return res.status(400).json({ success: false, message: \"Recaptcha verification failed\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Recaptcha verification error:\", error);\r\n      return res.status(500).json({ success: false, message: \"Server error\" });\r\n    }\r\n  })\r\n);\r\n\r\n// ***** confirm *****\r\nrouter.post(\r\n  \"/auth/verify-clinic-email\",\r\n  asyncHandler(async function verifyEmail(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { email, verify_code } = req.body;\r\n\r\n    const data = await AuthService.confirmClinicEmail({ email, verify_code });\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  \"/auth/verify-patient-email\",\r\n  asyncHandler(async function verifyEmail(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { email, verify_code } = req.body;\r\n    const data = await AuthService.confirmPatientEmail({ email, verify_code });\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** clinic-sign-in *****\r\nrouter.post(\r\n  \"/auth/clinic-sign-in\",\r\n  asyncHandler(async function clinicSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.clinicSignIn(formData);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// ***** doctor-sign-in *****\r\nrouter.post(\r\n  \"/auth/doctor-sign-in\",\r\n  asyncHandler(async function doctorSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.doctorSignIn(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  \"/auth/patient-sign-in\",\r\n  asyncHandler(async function patientSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.patientSignIn(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   \"/auth/verify-email-code\",\r\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\r\n//     const email = req.query.email;\r\n//     const data = await AuthService.confirmEmailCode(email);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741663336626},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BuildResponse = void 0;\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.BuildResponse = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXHJlc3BvbnNlXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vdHlwZXMvcmVzcG9uc2UuaW50ZXJmYWNlXCI7XHJcblxyXG50eXBlIERhdGFSZXNwb25zZSA9XHJcbiAgfCB7XHJcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgY29kZT86IG51bWJlcjtcclxuICAgIH1cclxuICB8IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsZFJlc3BvbnNlIHtcclxuICBwcml2YXRlIHN0YXRpYyBiYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbWVzc2FnZSA9IFwiZGF0YSBoYXMgYmVlbiByZWNlaXZlZCFcIixcclxuICAgICAgY29kZSA9IDIwMCxcclxuICAgICAgLi4ucmVzdFxyXG4gICAgfSA9IGRhdGFSZXNwb25zZTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvZGUsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIC4uLnJlc3QsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzcG9uc2UgU3VjY2Vzc1xyXG4gICAqL1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKGRhdGFSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNwb25zZSBDcmVhdGVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZWQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XHJcbiAgICAgIGNvZGRlOiAyMDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZGF0YSBoYXMgYmVlZCBhZGRlZFwiLFxyXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3BvbnNlIFVwZGF0ZVxyXG4gICAqL1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHVwZGF0ZWQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XHJcbiAgICAgIG1lc3NhZ2U6IFwidGhlIGRhdGEgaGFzIGJlZWQgdXBkYXRlZFwiLFxyXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3BvbnNlIERlbGV0ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKHtcclxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVuIGRlbGV0ZWRcIixcclxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFwcFJlc3BvbnNlKGRhdGE6IGFueSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxyXG4gICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgPyBkYXRhLm1lc3NhZ2UgOiBcIlwiLFxyXG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzID8gZGF0YS5zdGF0dXMgOiAwLFxyXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZUNvZGU6IGRhdGEubWVzc2FnZUNvZGUgPyBkYXRhLm1lc3NhZ2VDb2RlIDogXCJcIixcclxuICAgICAgbWVzc2FnZUtpbmQ6IGRhdGEubWVzc2FnZUtpbmQgPyBkYXRhLm1lc3NhZ2VLaW5kIDogbnVsbCxcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXHJcbiAgICAgIGRhdGE6IGRhdGEuZGF0YSA/IGRhdGEuZGF0YSA6IG51bGwsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVNBLE1BQWFBLGFBQWE7RUFDaEIsT0FBT0MsWUFBWUEsQ0FBQ0MsWUFBMEI7SUFDcEQsTUFBTTtRQUNKQyxPQUFPLEdBQUcseUJBQXlCO1FBQ25DQyxJQUFJLEdBQUc7TUFBRyxJQUVSRixZQUFZO01BRFhHLElBQUksR0FBQUMsTUFBQSxDQUNMSixZQUFZLEVBSlYsbUJBSUwsQ0FBZTtJQUNoQixPQUFBSyxNQUFBLENBQUFDLE1BQUE7TUFDRUosSUFBSTtNQUNKRDtJQUFPLEdBQ0pFLElBQUk7RUFFWDtFQUVBOzs7RUFJTyxPQUFPSSxHQUFHQSxDQUFDUCxZQUEwQjtJQUMxQyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxZQUFZLENBQUM7RUFDeEM7RUFFQTs7O0VBR08sT0FBT1EsT0FBT0EsQ0FBQ1IsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCRyxLQUFLLEVBQUUsR0FBRztNQUNWUixPQUFPLEVBQUU7SUFBcUIsR0FDM0JELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUlPLE9BQU9VLE9BQU9BLENBQUNWLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQTJCLEdBQ2pDRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFHTyxPQUFPVyxPQUFPQSxDQUFDWCxZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUF1QixHQUM3QkQsWUFBWSxFQUNmO0VBQ0o7RUFFTyxPQUFPWSxXQUFXQSxDQUFDQyxJQUFTO0lBQ2pDLE9BQU87TUFDTFgsSUFBSSxFQUFFVyxJQUFJLENBQUNYLElBQUksR0FBR1csSUFBSSxDQUFDWCxJQUFJLEdBQUcsR0FBRztNQUNqQ0QsT0FBTyxFQUFFWSxJQUFJLENBQUNaLE9BQU8sR0FBR1ksSUFBSSxDQUFDWixPQUFPLEdBQUcsRUFBRTtNQUN6Q2EsTUFBTSxFQUFFRCxJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFRixJQUFJLENBQUNFLFVBQVUsR0FBR0YsSUFBSSxDQUFDRSxVQUFVLEdBQUcsS0FBSztNQUNyREMsV0FBVyxFQUFFSCxJQUFJLENBQUNHLFdBQVcsR0FBR0gsSUFBSSxDQUFDRyxXQUFXLEdBQUcsRUFBRTtNQUNyREMsV0FBVyxFQUFFSixJQUFJLENBQUNJLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSTtNQUN2REMsYUFBYSxFQUFFTCxJQUFJLENBQUNLLGFBQWEsR0FBR0wsSUFBSSxDQUFDSyxhQUFhLEdBQUcsS0FBSztNQUM5REwsSUFBSSxFQUFFQSxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLEdBQUc7S0FDaEI7RUFDbEI7O0FBakVGTSxPQUFBLENBQUFyQixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\response\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\r\n\r\ntype DataResponse =\r\n  | {\r\n      message: string;\r\n      code?: number;\r\n    }\r\n  | any;\r\n\r\nexport class BuildResponse {\r\n  private static baseResponse(dataResponse: DataResponse) {\r\n    const {\r\n      message = \"data has been received!\",\r\n      code = 200,\r\n      ...rest\r\n    } = dataResponse;\r\n    return {\r\n      code,\r\n      message,\r\n      ...rest,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Response Success\r\n   */\r\n\r\n  public static get(dataResponse: DataResponse) {\r\n    return this.baseResponse(dataResponse);\r\n  }\r\n\r\n  /**\r\n   * Response Create\r\n   */\r\n  public static created(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      codde: 201,\r\n      message: \"data has beed added\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Response Update\r\n   */\r\n\r\n  public static updated(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      message: \"the data has beed updated\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Response Delete\r\n   */\r\n  public static deleted(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      message: \"data has been deleted\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  public static appResponse(data: any) {\r\n    return {\r\n      code: data.code ? data.code : 200,\r\n      message: data.message ? data.message : \"\",\r\n      status: data.status ? data.status : 0,\r\n      showToUser: data.showToUser ? data.showToUser : false,\r\n      messageCode: data.messageCode ? data.messageCode : \"\",\r\n      messageKind: data.messageKind ? data.messageKind : null,\r\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\r\n      data: data.data ? data.data : null,\r\n    } as AppResponse;\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;AASA,MAAaA,aAAa;EAChB,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAjEFM,OAAA,CAAArB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncHandler = void 0;\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nexports.asyncHandler = express_async_handler_1.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvYXN5bmMtaGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInXHJcblxyXG5leHBvcnQgY29uc3QgYXN5bmNIYW5kbGVyID0gZXhwcmVzc0FzeW5jSGFuZGxlclxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLHVCQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLFlBQVksR0FBR0osdUJBQUEsQ0FBQUssT0FBbUIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","exports","asyncHandler","default"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\r\n\r\nexport const asyncHandler = expressAsyncHandler\r\n\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,uBAAA,CAAAK,OAAmB","ignoreList":[]}},"mtime":1741655050589},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN,\n  JWT_ACCESS_TOKEN_EXPIRED\n} = process.env;\nclass AuthService {\n  // public static generateToken(user: any) {\n  //   const payload = {\n  //     id: user.id,\n  //     email: user.email,\n  //     is_verified: user.is_verified, // Include verification status\n  //   };\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\n  // }\n  static clinicSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getClinicByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const clinicData = {\n          id: userData[0].id,\n          name: userData[0].name,\n          owner_name: userData[0].owner_name,\n          email: userData[0].email,\n          city: userData[0].city,\n          phone: userData[0].phone,\n          state: userData[0].state,\n          zip_code: userData[0].zip_code,\n          country: userData[0].country,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static doctorSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getDoctorByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        // if (!userData || userData.length === 0) {\n        //   throw new ResponseError.NotFound(\n        //     \"Account not found or has been deleted.\"\n        //   );\n        // }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.emailConfirmed) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          first_name: userData[0].name,\n          last_name: userData[0].owner_name,\n          email: userData[0].owner_name\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static patientSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getPatientByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const patientData = {\n          id: userData[0].id,\n          first_name: userData[0].first_name,\n          last_name: userData[0].last_name,\n          email: userData[0].email,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return patientData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  // *****confirmClinicEmail*****\n  static confirmClinicEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n  // *****confirmPatientEmail*****\n  static confirmPatientEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatientVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.AuthService = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiQXV0aFNlcnZpY2UiLCJjbGluaWNTaWduSW4iLCJmb3JtRGF0YSIsInZhbGlkYXRlRGF0YSIsInVzZVZhbGlkYXRpb24iLCJsb2dpblNjaGVtYSIsInVzZXJEYXRhIiwiZ2V0Q2xpbmljQnlQYXNzd29yZCIsImVtYWlsIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJSZXNwb25zZUVycm9yIiwiVW5hdXRob3JpemVkIiwicGxhaW5QYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiaXNNYXRjaCIsImRlZmF1bHQiLCJjb21wYXJlIiwiX2EiLCJzaWdudXBfc3RhdHVzIiwiQmFkUmVxdWVzdCIsIl9iIiwidG9rZW4iLCJzaWduIiwiaWQiLCJleHBpcmVzSW4iLCJjbGluaWNEYXRhIiwibmFtZSIsIm93bmVyX25hbWUiLCJjaXR5IiwicGhvbmUiLCJzdGF0ZSIsInppcF9jb2RlIiwiY291bnRyeSIsImVycm9yIiwiQmFzZVJlc3BvbnNlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJkb2N0b3JTaWduSW4iLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZW1haWxDb25maXJtZWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGF0aWVudFNpZ25JbiIsImdldFBhdGllbnRCeVBhc3N3b3JkIiwicGF0aWVudERhdGEiLCJjb25maXJtQ2xpbmljRW1haWwiLCJkYXRhIiwiZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSIsImNvbmZpcm1QYXRpZW50RW1haWwiLCJnZXRQYXRpZW50VmVyaWZpY2F0aW9uQ29kZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgeyB1c2VWYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgeyBJTG9naW4gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q2xpbmljQnlQYXNzd29yZCxcclxuICBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlLFxyXG4gIGdldERvY3RvckJ5UGFzc3dvcmQsXHJcbiAgZ2V0UGF0aWVudEJ5UGFzc3dvcmQsXHJcbiAgZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUsXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuaW1wb3J0IHsgbG9naW5TY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuaW1wb3J0IHsgSVBhdGllbnQgfSBmcm9tIFwiLi4vcGF0aWVudHMvSVBhdGllbnRcIjtcclxuXHJcbmNvbnN0IHtcclxuICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICBKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4sXHJcbiAgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVELFxyXG59OiBhbnkgPSBwcm9jZXNzLmVudjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBdXRoU2VydmljZSB7XHJcbiAgLy8gcHVibGljIHN0YXRpYyBnZW5lcmF0ZVRva2VuKHVzZXI6IGFueSkge1xyXG4gIC8vICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAvLyAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgLy8gICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gIC8vICAgICBpc192ZXJpZmllZDogdXNlci5pc192ZXJpZmllZCwgLy8gSW5jbHVkZSB2ZXJpZmljYXRpb24gc3RhdHVzXHJcbiAgLy8gICB9O1xyXG5cclxuICAvLyAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEKTtcclxuICAvLyB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjbGluaWNTaWduSW4oZm9ybURhdGE6IElMb2dpbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGVEYXRhID0gdXNlVmFsaWRhdGlvbihsb2dpblNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldENsaW5pY0J5UGFzc3dvcmQoXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLmVtYWlsLFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5wYXNzd29yZFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1c2VyRGF0YVswXT8uc2lnbnVwX3N0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJFbWFpbCBpcyBub3QgY29uZmlybWVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICAgIHsgaWQ6IHVzZXJEYXRhWzBdLmlkLCBlbWFpbDogdXNlckRhdGFbMF0uZW1haWwgfSwgLy8gUGF5bG9hZCAodXNlciBpbmZvKVxyXG4gICAgICAgIEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLCAvLyBTZWNyZXQga2V5XHJcbiAgICAgICAgeyBleHBpcmVzSW46IDYwIH0gLy8gRXhwaXJ5IHRpbWVcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgY2xpbmljRGF0YSA9IHtcclxuICAgICAgICBpZDogdXNlckRhdGFbMF0uaWQsXHJcbiAgICAgICAgbmFtZTogdXNlckRhdGFbMF0ubmFtZSxcclxuICAgICAgICBvd25lcl9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCxcclxuICAgICAgICBjaXR5OiB1c2VyRGF0YVswXS5jaXR5LFxyXG4gICAgICAgIHBob25lOiB1c2VyRGF0YVswXS5waG9uZSxcclxuICAgICAgICBzdGF0ZTogdXNlckRhdGFbMF0uc3RhdGUsXHJcbiAgICAgICAgemlwX2NvZGU6IHVzZXJEYXRhWzBdLnppcF9jb2RlLFxyXG4gICAgICAgIGNvdW50cnk6IHVzZXJEYXRhWzBdLmNvdW50cnksXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgLy8gcm9sZXM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQodXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5yb2xlX25hbWUpLmZpbHRlcihCb29sZWFuKSksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgICAvLyBwZXJtaXNzaW9uczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldChcclxuICAgICAgICAvLyAgICAgdXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5wZXJtaXNzaW9uX25hbWUpLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgIC8vICAgKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gY2xpbmljRGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yOyAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvclNpZ25Jbihmb3JtRGF0YTogSUxvZ2luKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2YWxpZGF0ZURhdGEgPSB1c2VWYWxpZGF0aW9uKGxvZ2luU2NoZW1hLCBmb3JtRGF0YSk7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICAgICAgICB2YWxpZGF0ZURhdGEuZW1haWwsXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLnBhc3N3b3JkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXHJcbiAgICAgIC8vICAgICBcIkFjY291bnQgbm90IGZvdW5kIG9yIGhhcyBiZWVuIGRlbGV0ZWQuXCJcclxuICAgICAgLy8gICApO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LmVtYWlsQ29uZmlybWVkID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNsaW5pY0RhdGEgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLm5hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG5cclxuICAgICAgICAvLyByb2xlczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldCh1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnJvbGVfbmFtZSkuZmlsdGVyKEJvb2xlYW4pKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICAgIC8vIHBlcm1pc3Npb25zOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KFxyXG4gICAgICAgIC8vICAgICB1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnBlcm1pc3Npb25fbmFtZSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgLy8gICApLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBjbGluaWNEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHBhdGllbnRTaWduSW4oZm9ybURhdGE6IElMb2dpbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGVEYXRhID0gdXNlVmFsaWRhdGlvbihsb2dpblNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldFBhdGllbnRCeVBhc3N3b3JkKFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5lbWFpbCxcclxuICAgICAgICB2YWxpZGF0ZURhdGEucGFzc3dvcmRcclxuICAgICAgKTtcclxuICAgICAgaWYgKCF1c2VyRGF0YSB8fCB1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwbGFpblBhc3N3b3JkID0gdmFsaWRhdGVEYXRhLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHVzZXJEYXRhWzBdLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5QYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFxyXG4gICAgICAgICAgXCJlbWFpbCBvciBwYXNzd3JvZCBpcyBub3QgY29ycmVjdCFcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5zaWdudXBfc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgICB7IGlkOiB1c2VyRGF0YVswXS5pZCwgZW1haWw6IHVzZXJEYXRhWzBdLmVtYWlsIH0sIC8vIFBheWxvYWQgKHVzZXIgaW5mbylcclxuICAgICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgLy8gU2VjcmV0IGtleVxyXG4gICAgICAgIHsgZXhwaXJlc0luOiA2MCB9IC8vIEV4cGlyeSB0aW1lXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHBhdGllbnREYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLmZpcnN0X25hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5sYXN0X25hbWUsXHJcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhWzBdLmVtYWlsLFxyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIC8vIHJvbGVzOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucm9sZV9uYW1lKS5maWx0ZXIoQm9vbGVhbikpLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgICAgLy8gcGVybWlzc2lvbnM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQoXHJcbiAgICAgICAgLy8gICAgIHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucGVybWlzc2lvbl9uYW1lKS5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgICAvLyAgICksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHBhdGllbnREYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAqKioqKmNvbmZpcm1DbGluaWNFbWFpbCoqKioqXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjb25maXJtQ2xpbmljRW1haWwoY2xpbmljRGF0YToge1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldENsaW5pY1ZlcmlmaWNhdGlvbkNvZGUoY2xpbmljRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyAqKioqKmNvbmZpcm1QYXRpZW50RW1haWwqKioqKlxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29uZmlybVBhdGllbnRFbWFpbChjbGluaWNEYXRhOiB7XHJcbiAgICBlbWFpbDogc3RyaW5nO1xyXG4gICAgdmVyaWZ5X2NvZGU6IHN0cmluZztcclxuICB9KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUoY2xpbmljRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxj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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","JWT_ACCESS_TOKEN_EXPIRED","process","env","AuthService","clinicSignIn","formData","validateData","useValidation","loginSchema","userData","getClinicByPassword","email","password","length","ResponseError","Unauthorized","plainPassword","hashedPassword","isMatch","default","compare","_a","signup_status","BadRequest","_b","token","sign","id","expiresIn","clinicData","name","owner_name","city","phone","state","zip_code","country","error","BaseResponse","InternalServer","doctorSignIn","getDoctorByPassword","emailConfirmed","first_name","last_name","patientSignIn","getPatientByPassword","patientData","confirmClinicEmail","data","getClinicVerificationCode","confirmPatientEmail","getPatientVerificationCode","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/auth/service.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ILogin } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  getClinicByPassword,\r\n  getClinicVerificationCode,\r\n  getDoctorByPassword,\r\n  getPatientByPassword,\r\n  getPatientVerificationCode,\r\n} from \"./db\";\r\nimport { loginSchema } from \"./schema\";\r\nimport { IPatient } from \"../patients/IPatient\";\r\n\r\nconst {\r\n  JWT_SECRET_ACCESS_TOKEN,\r\n  JWT_SECRET_REFRESH_TOKEN,\r\n  JWT_ACCESS_TOKEN_EXPIRED,\r\n}: any = process.env;\r\n\r\nexport class AuthService {\r\n  // public static generateToken(user: any) {\r\n  //   const payload = {\r\n  //     id: user.id,\r\n  //     email: user.email,\r\n  //     is_verified: user.is_verified, // Include verification status\r\n  //   };\r\n\r\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\r\n  // }\r\n  public static async clinicSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getClinicByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        name: userData[0].name,\r\n        owner_name: userData[0].owner_name,\r\n        email: userData[0].email,\r\n        city: userData[0].city,\r\n        phone: userData[0].phone,\r\n        state: userData[0].state,\r\n        zip_code: userData[0].zip_code,\r\n        country: userData[0].country,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  public static async doctorSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getDoctorByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      // if (!userData || userData.length === 0) {\r\n      //   throw new ResponseError.NotFound(\r\n      //     \"Account not found or has been deleted.\"\r\n      //   );\r\n      // }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.emailConfirmed === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].name,\r\n        last_name: userData[0].owner_name,\r\n        email: userData[0].owner_name,\r\n\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  public static async patientSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getPatientByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const patientData: any = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].first_name,\r\n        last_name: userData[0].last_name,\r\n        email: userData[0].email,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return patientData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  // *****confirmClinicEmail*****\r\n  public static async confirmClinicEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getClinicVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // *****confirmPatientEmail*****\r\n  public static async confirmPatientEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getPatientVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useValidation = useValidation;\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwidXNlVmFsaWRhdGlvbiIsInNjaGVtYSIsInZhbHVlIiwib3B0aW9ucyIsInZhbGlkYXRlU3luYyIsIk9iamVjdCIsImFzc2lnbiIsImFib3J0RWFybHkiLCJzdHJpcFVua25vd24iXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL3VzZV92YWxpZGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBTY2hlbWEsIFZhbGlkYXRlT3B0aW9ucyB9IGZyb20gJ3l1cCdcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlVmFsaWRhdGlvbjxUPihcclxuICBzY2hlbWE6IFNjaGVtYTxUPixcclxuICB2YWx1ZTogVCB8IGFueSxcclxuICBvcHRpb25zPzogVmFsaWRhdGVPcHRpb25zXHJcbik6IFQge1xyXG4gIHJldHVybiBzY2hlbWEudmFsaWRhdGVTeW5jKHZhbHVlLCB7XHJcbiAgICBhYm9ydEVhcmx5OiBmYWxzZSxcclxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcclxuICAgIC4uLm9wdGlvbnMsXHJcbiAgfSlcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUlBQSxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQTtBQUFBLFNBQWdCQSxhQUFhQSxDQUMzQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/helper/use_validation.ts"],"sourcesContent":["\r\nimport { Schema, ValidateOptions } from 'yup'\r\n\r\n\r\nexport function useValidation<T>(\r\n  schema: Schema<T>,\r\n  value: T | any,\r\n  options?: ValidateOptions\r\n): T {\r\n  return schema.validateSync(value, {\r\n    abortEarly: false,\r\n    stripUnknown: true,\r\n    ...options,\r\n  })\r\n}\r\n\r\n"],"mappings":";;;;;AAIAA,OAAA,CAAAC,aAAA,GAAAA,aAAA;AAAA,SAAgBA,aAAaA,CAC3BC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ","ignoreList":[]}},"mtime":1741655050590},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nconst base_response_1 = require(\"./base_response\");\nconst internal_server_1 = require(\"./internal_server\");\nconst unauthorized_1 = require(\"./unauthorized\");\nconst forbidden_1 = require(\"./forbidden\");\nconst not_found_1 = require(\"./not_found\");\nconst bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiZXhwb3J0cyIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtCYXNlUmVzcG9uc2V9IGZyb20gJy4vYmFzZV9yZXNwb25zZSc7XHJcbmltcG9ydCB7SW50ZXJuYWxTZXJ2ZXJ9IGZyb20gJy4vaW50ZXJuYWxfc2VydmVyJztcclxuaW1wb3J0IHtVbmF1dGhvcml6ZWR9IGZyb20gJy4vdW5hdXRob3JpemVkJztcclxuaW1wb3J0IHtGb3JiaWRkZW59IGZyb20gJy4vZm9yYmlkZGVuJztcclxuaW1wb3J0IHtOb3RGb3VuZH0gZnJvbSAnLi9ub3RfZm91bmQnO1xyXG5pbXBvcnQge0JhZFJlcXVlc3R9IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJlc3BvbnNlRXJyb3IgPSB7XHJcbiAgICBCYXNlUmVzcG9uc2UsXHJcbiAgICBCYWRSZXF1ZXN0LFxyXG4gICAgTm90Rm91bmQsXHJcbiAgICBGb3JiaWRkZW4sXHJcbiAgICBVbmF1dGhvcml6ZWQsXHJcbiAgICBJbnRlcm5hbFNlcnZlcixcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxpQkFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsV0FBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksV0FBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssYUFBQSxHQUFBTCxPQUFBO0FBRWFNLE9BQUEsQ0FBQUMsYUFBYSxHQUFHO0VBQ3pCQyxZQUFZLEVBQVpULGVBQUEsQ0FBQVMsWUFBWTtFQUNaQyxVQUFVLEVBQVZKLGFBQUEsQ0FBQUksVUFBVTtFQUNWQyxRQUFRLEVBQVJOLFdBQUEsQ0FBQU0sUUFBUTtFQUNSQyxTQUFTLEVBQVRSLFdBQUEsQ0FBQVEsU0FBUztFQUNUQyxZQUFZLEVBQVpWLGNBQUEsQ0FBQVUsWUFBWTtFQUNaQyxjQUFjLEVBQWRaLGlCQUFBLENBQUFZO0NBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","exports","ResponseError","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/response_error.ts"],"sourcesContent":["import {BaseResponse} from './base_response';\r\nimport {InternalServer} from './internal_server';\r\nimport {Unauthorized} from './unauthorized';\r\nimport {Forbidden} from './forbidden';\r\nimport {NotFound} from './not_found';\r\nimport {BadRequest} from './bad_request';\r\n\r\nexport const ResponseError = {\r\n    BaseResponse,\r\n    BadRequest,\r\n    NotFound,\r\n    Forbidden,\r\n    Unauthorized,\r\n    InternalServer,\r\n}\r\n\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,aAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,aAAa,GAAG;EACzBC,YAAY,EAAZT,eAAA,CAAAS,YAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAI,UAAU;EACVC,QAAQ,EAARN,WAAA,CAAAM,QAAQ;EACRC,SAAS,EAATR,WAAA,CAAAQ,SAAS;EACTC,YAAY,EAAZV,cAAA,CAAAU,YAAY;EACZC,cAAc,EAAdZ,iBAAA,CAAAY;CACH","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nclass BaseResponse extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJuZXciLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9iYXNlX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBCYXNlUmVzcG9uc2UgZXh0ZW5kcyBFcnJvciB7XHJcbiAgcHVibGljIGNvZGU6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlOiBudW1iZXIpIHtcclxuICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgIHRoaXMuY29kZSA9IHN0YXR1c0NvZGU7XHJcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQWFBLFlBQWEsU0FBUUMsS0FBSztFQUdyQ0MsWUFBWUMsT0FBZSxFQUFFQyxVQUFrQjtJQUM3QyxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUNkLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxPQUFPO0lBQ3RCLElBQUksQ0FBQ0UsSUFBSSxHQUFHRCxVQUFVO0lBQ3RCRSxNQUFNLENBQUNDLGNBQWMsQ0FBQyxJQUFJLEVBQUVDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxTQUFTLENBQUM7RUFDbkQ7O0FBUkZDLE9BQUEsQ0FBQVgsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["BaseResponse","Error","constructor","message","statusCode","code","Object","setPrototypeOf","new","target","prototype","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/base_response.ts"],"sourcesContent":["export class BaseResponse extends Error {\r\n  public code: number;\r\n\r\n  constructor(message: string, statusCode: number) {\r\n    super(message);\r\n    this.message = message;\r\n    this.code = statusCode;\r\n    Object.setPrototypeOf(this, new.target.prototype);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAaA,YAAa,SAAQC,KAAK;EAGrCC,YAAYC,OAAe,EAAEC,UAAkB;IAC7C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,IAAI,GAAGD,UAAU;IACtBE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEC,GAAG,CAACC,MAAM,CAACC,SAAS,CAAC;EACnD;;AARFC,OAAA,CAAAX,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass InternalServer extends base_response_1.BaseResponse {\n  constructor(message = \"Internal server error\") {\n    super(message, 500);\n  }\n}\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9pbnRlcm5hbF9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJlc3BvbnNlIH0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIkludGVybmFsIHNlcnZlciBlcnJvclwiKSB7XHJcbiAgICAgIHN1cGVyKG1lc3NhZ2UsIDUwMCk7XHJcbiAgICB9XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsY0FBZSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDNUNDLFlBQVlDLE9BQU8sR0FBRyx1QkFBdUI7SUFDM0MsS0FBSyxDQUFDQSxPQUFPLEVBQUUsR0FBRyxDQUFDO0VBQ3JCOztBQUhKQyxPQUFBLENBQUFKLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","InternalServer","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/internal_server.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class InternalServer extends BaseResponse {\r\n    constructor(message = \"Internal server error\") {\r\n      super(message, 500);\r\n    }\r\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,cAAe,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,uBAAuB;IAC3C,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Unauthorized extends base_response_1.BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvdW5hdXRob3JpemVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWQgZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIlVuYXV0aG9yaXplZCBhY2Nlc3NcIikge1xyXG4gICAgc3VwZXIobWVzc2FnZSwgNDAxKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxZQUFhLFNBQVFGLGVBQUEsQ0FBQUcsWUFBWTtFQUM1Q0MsWUFBWUMsT0FBTyxHQUFHLHFCQUFxQjtJQUN6QyxLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEZDLE9BQUEsQ0FBQUosWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","Unauthorized","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class Unauthorized extends BaseResponse {\r\n  constructor(message = \"Unauthorized access\") {\r\n    super(message, 401);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,YAAa,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,qBAAqB;IACzC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Forbidden extends base_response_1.BaseResponse {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvZm9yYmlkZGVuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xyXG4gICAgY29uc3RydWN0b3IobWVzc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKG1lc3NzYWdlLCA0MDMpXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsU0FBVSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdkNDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFKSkMsT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Forbidden","BaseResponse","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/forbidden.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\r\n\r\nexport class Forbidden extends BaseResponse {\r\n    constructor(messsage: string) {\r\n        super(messsage, 403)\r\n        Object.setPrototypeOf(this, Forbidden.prototype);\r\n    }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,SAAU,SAAQF,eAAA,CAAAG,YAAY;EACvCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAJJC,OAAA,CAAAP,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass NotFound extends base_response_1.BaseResponse {\n  constructor(message = \"Not found\") {\n    super(message, 404);\n  }\n}\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9ub3RfZm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJlc3BvbnNlIH0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIk5vdCBmb3VuZFwiKSB7XHJcbiAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwNCk7XHJcbiAgICB9XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsUUFBUyxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdENDLFlBQVlDLE9BQU8sR0FBRyxXQUFXO0lBQy9CLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFISkMsT0FBQSxDQUFBSixRQUFBLEdBQUFBLFFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","NotFound","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/not_found.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class NotFound extends BaseResponse {\r\n    constructor(message = \"Not found\") {\r\n      super(message, 404);\r\n    }\r\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,QAAS,SAAQF,eAAA,CAAAG,YAAY;EACtCC,YAAYC,OAAO,GAAG,WAAW;IAC/B,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,QAAA,GAAAA,QAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass BadRequest extends base_response_1.BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsIkJhc2VSZXNwb25zZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2JhZF9yZXF1ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJCYWQgcmVxdWVzdFwiKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlLCA0MDApO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFVBQVcsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzFDQyxZQUFZQyxPQUFPLEdBQUcsYUFBYTtJQUNqQyxLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEZDLE9BQUEsQ0FBQUosVUFBQSxHQUFBQSxVQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","BadRequest","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/modules/error/bad_request.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class BadRequest extends BaseResponse {\r\n  constructor(message = \"Bad request\") {\r\n    super(message, 400);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,UAAW,SAAQF,eAAA,CAAAG,YAAY;EAC1CC,YAAYC,OAAO,GAAG,aAAa;IACjC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,UAAA,GAAAA,UAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkIfClinicExists = checkIfClinicExists;\nexports.getClinicByPassword = getClinicByPassword;\nexports.getDoctorByPassword = getDoctorByPassword;\nexports.getPatientByPassword = getPatientByPassword;\nexports.getClinicVerificationCode = getClinicVerificationCode;\nexports.getPatientVerificationCode = getPatientVerificationCode;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkIfClinicExists(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? \n  `, {\n      values: [email]\n    });\n    return result.length > 0;\n  });\n}\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       return null; // Email not found\n//     }\n//     const [doctor] = await query<RowDataPacket[]>(\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\n//       { values: [data.email, data.verify_code] }\n//     );\n//     if (!doctor) {\n//       return null;\n//     }\n//     const resultDoctor = await query<RowDataPacket[]>(\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\n//       { values: [1, new Date(), data.email] }\n//     );\n//     return resultDoctor;\n//   } catch (error) {\n//     console.error(\"Error confirming doctor email:\", error);\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\n//   }\n// }\n// export async function confirmClinicEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       throw new ResponseError.NotFound(\"Email not found\");\n//     }\n//     // Check if clinic exists with correct verify_code\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\n//       {\n//         values: [data.email],\n//       }\n//     );\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\n//     } else {\n//       await query<RowDataPacket[]>(\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\n//         {\n//           values: [1, new Date(), data.email],\n//         }\n//       );\n//     }\n//     return { success: true, message: \"Email confirmation successful\" };\n//   } catch (error) {\n//     return error;\n//   }\n// }\nfunction getClinicByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(\n      // ` SELECT u.*, r.*,p.*\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n      ` SELECT *\n      FROM ${mysql_1.coreSchema}.clinic \n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\nfunction getDoctorByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.patient \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction getPatientByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(` SELECT *\n      FROM ${mysql_1.coreSchema}.patients\n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n// *****getClinicVerificationCode*****\nfunction getClinicVerificationCode(clinicData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the clinic data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n      values: [clinicData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", clinicData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`);\n    if (storedVerifyCode !== clinicData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.clinic SET signup_status = 1 WHERE email = ?`, {\n      values: [clinicData.email]\n    });\n    return rows;\n  });\n}\n// *****getPatientVerificationCode*****\nfunction getPatientVerificationCode(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the patient data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n      values: [patientData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", patientData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`);\n    if (storedVerifyCode !== patientData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET signup_status = 1 WHERE email = ?`, {\n      values: [patientData.email]\n    });\n    return rows;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tJZkNsaW5pY0V4aXN0cyIsImdldENsaW5pY0J5UGFzc3dvcmQiLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZ2V0UGF0aWVudEJ5UGFzc3dvcmQiLCJnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlIiwiZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJlbWFpbCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsInBhc3N3b3JkIiwidXNlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImNsaW5pY0RhdGEiLCJyb3dzIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzdG9yZWRWZXJpZnlDb2RlIiwidmVyaWZ5X2NvZGUiLCJwYXRpZW50RGF0YSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0lmQ2xpbmljRXhpc3RzKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA9ID8gXHJcbiAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwO1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uZmlybURvY3RvckVtYWlsKGRhdGE6IENvbmZpcm1FbWFpbCkge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrSWZFbWFpbEV4aXN0cyhkYXRhLmVtYWlsKTtcclxuLy8gICAgIGlmICghZW1haWxFeGlzdHMpIHtcclxuLy8gICAgICAgcmV0dXJuIG51bGw7IC8vIEVtYWlsIG5vdCBmb3VuZFxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IFtkb2N0b3JdID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgYFNFTEVDVCBpZCBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yIFdIRVJFIGVtYWlsID0/IEFORCB2ZXJpZnlfY29kZSA9P2AsXHJcbi8vICAgICAgIHsgdmFsdWVzOiBbZGF0YS5lbWFpbCwgZGF0YS52ZXJpZnlfY29kZV0gfVxyXG4vLyAgICAgKTtcclxuLy8gICAgIGlmICghZG9jdG9yKSB7XHJcbi8vICAgICAgIHJldHVybiBudWxsO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IHJlc3VsdERvY3RvciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3IgU0VUIHNpZ251cF9zdGF0dXM9PywgdXBkYXRlZF9hdD0/IFdIRVJFIGVtYWlsID0/YCxcclxuLy8gICAgICAgeyB2YWx1ZXM6IFsxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSB9XHJcbi8vICAgICApO1xyXG5cclxuLy8gICAgIHJldHVybiByZXN1bHREb2N0b3I7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb25maXJtaW5nIGRvY3RvciBlbWFpbDpcIiwgZXJyb3IpO1xyXG4vLyAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkZhaWxlZCB0byBjb25maXJtIGRvY3RvciBlbWFpbFwiKTtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtQ2xpbmljRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IGVtYWlsRXhpc3RzID0gYXdhaXQgY2hlY2tJZkVtYWlsRXhpc3RzKGRhdGEuZW1haWwpO1xyXG4vLyAgICAgaWYgKCFlbWFpbEV4aXN0cykge1xyXG4vLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIG5vdCBmb3VuZFwiKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyBDaGVjayBpZiBjbGluaWMgZXhpc3RzIHdpdGggY29ycmVjdCB2ZXJpZnlfY29kZVxyXG4vLyAgICAgY29uc3QgY2hlY2tFeGlzdENsaW5pY1ZlcmlmeUNvZGUgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4vLyAgICAgICB7XHJcbi8vICAgICAgICAgdmFsdWVzOiBbZGF0YS5lbWFpbF0sXHJcbi8vICAgICAgIH1cclxuLy8gICAgICk7XHJcblxyXG4vLyAgICAgaWYgKGNoZWNrRXhpc3RDbGluaWNWZXJpZnlDb2RlWzBdLnZlcmlmeV9jb2RlICE9PSBkYXRhLnZlcmlmeV9jb2RlKSB7XHJcbi8vICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJJbnZhbGlkIHZlcmlmaWNhdGlvbiBjb2RlXCIpO1xyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2xpbmljIFNFVCBzaWdudXBfc3RhdHVzPT8sIHVwZGF0ZWRfYXQ9PyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgICAgICB7XHJcbi8vICAgICAgICAgICB2YWx1ZXM6IFsxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJFbWFpbCBjb25maXJtYXRpb24gc3VjY2Vzc2Z1bFwiIH07XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIHJldHVybiBlcnJvcjtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGluaWNCeVBhc3N3b3JkKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgLy8gYCBTRUxFQ1QgdS4qLCByLioscC4qXHJcbiAgICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnVzZXJfcm9sZXMgdXIgT04gdS5pZCA9IHVyLmlkXHJcbiAgICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVzIHIgT04gdXIucm9sZV9pZCA9IHIuaWRcclxuICAgICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZV9wZXJtaXNzaW9ucyBycCBPTiByLmlkID0gcnAucm9sZV9pZFxyXG4gICAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5wZXJtaXNzaW9ucyBwIE9OIHJwLnBlcm1pc3Npb25faWQgID0gcC5pZFxyXG4gICAgICBgIFNFTEVDVCAqXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgXHJcbiAgICAgIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBhc3N3b3JkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIC8vIGAgU0VMRUNUIHUuKiwgci4qLHAuKlxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0udXNlcl9yb2xlcyB1ciBPTiB1LmlkID0gdXIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVzIHIgT04gdXIucm9sZV9pZCA9IHIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVfcGVybWlzc2lvbnMgcnAgT04gci5pZCA9IHJwLnJvbGVfaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnBlcm1pc3Npb25zIHAgT04gcnAucGVybWlzc2lvbl9pZCAgPSBwLmlkXHJcbiAgICBgIFNFTEVDVCAqXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudCBcclxuICAgIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudEJ5UGFzc3dvcmQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwYXNzd29yZDogc3RyaW5nXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgIFNFTEVDVCAqXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8vICoqKioqZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSoqKioqXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlKGNsaW5pY0RhdGE6IHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIEZldGNoIHRoZSBjbGluaWMgZGF0YVxyXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUIGVtYWlsLHZlcmlmeV9jb2RlIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCBjbGluaWNEYXRhLmVtYWlsKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJUaGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgaW5jb3JyZWN0IVwiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHN0b3JlZFZlcmlmeUNvZGUgPSByb3dzLnZlcmlmeV9jb2RlO1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYPCflI0gU3RvcmVkIENvZGU6ICR7c3RvcmVkVmVyaWZ5Q29kZX0sIFByb3ZpZGVkIENvZGU6ICR7Y2xpbmljRGF0YS52ZXJpZnlfY29kZX1gXHJcbiAgKTtcclxuXHJcbiAgaWYgKHN0b3JlZFZlcmlmeUNvZGUgIT09IGNsaW5pY0RhdGEudmVyaWZ5X2NvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVmVyaWZpY2F0aW9uIGNvZGUgbWlzbWF0Y2ghXCIpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBzaWdudXBfc3RhdHVzXHJcbiAgYXdhaXQgcXVlcnkoXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2xpbmljIFNFVCBzaWdudXBfc3RhdHVzID0gMSBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgeyB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJvd3M7XHJcbn1cclxuXHJcbi8vICoqKioqZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUocGF0aWVudERhdGE6IHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIEZldGNoIHRoZSBwYXRpZW50IGRhdGFcclxuICBjb25zdCBbcm93c10gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCBlbWFpbCx2ZXJpZnlfY29kZSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudCBXSEVSRSBlbWFpbCA9ID8gTElNSVQgMWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3BhdGllbnREYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCBwYXRpZW50RGF0YS5lbWFpbCk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIGluY29ycmVjdCFcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdG9yZWRWZXJpZnlDb2RlID0gcm93cy52ZXJpZnlfY29kZTtcclxuICBjb25zb2xlLmxvZyhcclxuICAgIGDwn5SNIFN0b3JlZCBDb2RlOiAke3N0b3JlZFZlcmlmeUNvZGV9LCBQcm92aWRlZCBDb2RlOiAke3BhdGllbnREYXRhLnZlcmlmeV9jb2RlfWBcclxuICApO1xyXG5cclxuICBpZiAoc3RvcmVkVmVyaWZ5Q29kZSAhPT0gcGF0aWVudERhdGEudmVyaWZ5X2NvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVmVyaWZpY2F0aW9uIGNvZGUgbWlzbWF0Y2ghXCIpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBzaWdudXBfc3RhdHVzXHJcbiAgYXdhaXQgcXVlcnkoXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudCBTRVQgc2lnbnVwX3N0YXR1cyA9IDEgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHsgdmFsdWVzOiBbcGF0aWVudERhdGEuZW1haWxdIH1cclxuICApO1xyXG5cclxuICByZXR1cm4gcm93cztcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0FBLE9BQUEsQ0FBQUMsbUJBQUEsR0FBQUEsbUJBQUE7QUF1RUFELE9BQUEsQ0FBQUUsbUJBQUEsR0FBQUEsbUJBQUE7QUF1QkFGLE9BQUEsQ0FBQUcsbUJBQUEsR0FBQUEsbUJBQUE7QUFvQkFILE9BQUEsQ0FBQUksb0JBQUEsR0FBQUEsb0JBQUE7QUFvQkFKLE9BQUEsQ0FBQUsseUJBQUEsR0FBQUEseUJBQUE7QUFxQ0FMLE9BQUEsQ0FBQU0sMEJBQUEsR0FBQUEsMEJBQUE7QUE5S0EsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUVBLFNBQXNCUCxtQkFBbUJBLENBQUNTLEtBQWE7O0lBQ3JELE1BQU1DLE1BQU0sR0FBRyxNQUFNLElBQUFKLE9BQUEsQ0FBQUssS0FBSyxFQUN4QjtvQkFDZ0JMLE9BQUEsQ0FBQU0sVUFBVTtHQUMzQixFQUNDO01BQ0VDLE1BQU0sRUFBRSxDQUFDSixLQUFLO0tBQ2YsQ0FDRjtJQUNELE9BQU9DLE1BQU0sQ0FBQ0ksTUFBTSxHQUFHLENBQUM7RUFDMUIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFzQmIsbUJBQW1CQSxDQUN2Q1EsS0FBYSxFQUNiTSxR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","map":{"version":3,"names":["exports","checkIfClinicExists","getClinicByPassword","getDoctorByPassword","getPatientByPassword","getClinicVerificationCode","getPatientVerificationCode","mysql_1","require","response_error_1","email","result","query","coreSchema","values","length","password","user","error","console","log","clinicData","rows","ResponseError","BadRequest","storedVerifyCode","verify_code","patientData"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/auth/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\n\r\nexport async function checkIfClinicExists(email: string): Promise<boolean> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? \r\n  `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result.length > 0;\r\n}\r\n\r\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       return null; // Email not found\r\n//     }\r\n\r\n//     const [doctor] = await query<RowDataPacket[]>(\r\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\r\n//       { values: [data.email, data.verify_code] }\r\n//     );\r\n//     if (!doctor) {\r\n//       return null;\r\n//     }\r\n\r\n//     const resultDoctor = await query<RowDataPacket[]>(\r\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\r\n//       { values: [1, new Date(), data.email] }\r\n//     );\r\n\r\n//     return resultDoctor;\r\n//   } catch (error) {\r\n//     console.error(\"Error confirming doctor email:\", error);\r\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\r\n//   }\r\n// }\r\n\r\n// export async function confirmClinicEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       throw new ResponseError.NotFound(\"Email not found\");\r\n//     }\r\n\r\n//     // Check if clinic exists with correct verify_code\r\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\r\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\r\n//       {\r\n//         values: [data.email],\r\n//       }\r\n//     );\r\n\r\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\r\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\r\n//     } else {\r\n//       await query<RowDataPacket[]>(\r\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\r\n//         {\r\n//           values: [1, new Date(), data.email],\r\n//         }\r\n//       );\r\n//     }\r\n\r\n//     return { success: true, message: \"Email confirmation successful\" };\r\n//   } catch (error) {\r\n//     return error;\r\n//   }\r\n// }\r\n\r\nexport async function getClinicByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      // ` SELECT u.*, r.*,p.*\r\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n      ` SELECT *\r\n      FROM ${coreSchema}.clinic \r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nexport async function getDoctorByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.patient \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function getPatientByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      ` SELECT *\r\n      FROM ${coreSchema}.patients\r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\n// *****getClinicVerificationCode*****\r\nexport async function getClinicVerificationCode(clinicData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the clinic data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [clinicData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", clinicData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== clinicData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.clinic SET signup_status = 1 WHERE email = ?`,\r\n    { values: [clinicData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n\r\n// *****getPatientVerificationCode*****\r\nexport async function getPatientVerificationCode(patientData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the patient data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [patientData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", patientData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== patientData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.patient SET signup_status = 1 WHERE email = ?`,\r\n    { values: [patientData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mysql = exports.pool = exports.coreSchema = void 0;\nexports.query = query;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwicXVlcnkiLCJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJjb25maWciLCJjb3JlU2NoZW1hIiwicHJvY2VzcyIsImVudiIsIkRCX0RBVEFCQVNFIiwicG9vbCIsImNyZWF0ZVBvb2wiLCJob3N0IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSTkFNRSIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJkYXRhYmFzZSIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJjaGFyc2V0IiwidGltZXpvbmUiLCJEQl9USU1FWk9ORSIsIm9uIiwiY29ubmVjdGlvbiIsIm5hbWVkUGxhY2Vob2xkZXJzIiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxiaW5cXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9iaW4vbXlzcWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuaW1wb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIm15c3FsMlwiO1xyXG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcclxuaW1wb3J0IHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuY29uc3QgY29yZVNjaGVtYSA9IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFO1xyXG5cclxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XHJcblxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSTkFNRSxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXHJcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxyXG4gIGNvbm5lY3Rpb25MaW1pdDogNTAsXHJcbiAgcXVldWVMaW1pdDogMCxcclxuICBjaGFyc2V0OiBcInV0ZjhcIixcclxuICB0aW1lem9uZTogcHJvY2Vzcy5lbnYuREJfVElNRVpPTkUsXHJcbn0pO1xyXG5cclxucG9vbC5vbihcImNvbm5lY3Rpb25cIiwgKGNvbm5lY3Rpb246IFBvb2xDb25uZWN0aW9uKTogdm9pZCA9PiB7XHJcbiAgY29ubmVjdGlvbi5jb25maWcubmFtZWRQbGFjZWhvbGRlcnMgPSB0cnVlO1xyXG59KTtcclxuXHJcbmV4cG9ydCB7IHBvb2wsIG15c3FsIH07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCBleHRlbmRzIFJvd0RhdGFQYWNrZXRbXSB8IFJlc3VsdFNldEhlYWRlciB8IGFueT4oXHJcbiAgc3FsOiBzdHJpbmcsXHJcbiAgb3B0aW9uczoge1xyXG4gICAgY29ubmVjdGlvbj86IFBvb2xDb25uZWN0aW9uO1xyXG4gICAgbmVzdFRhYmxlcz86IGJvb2xlYW47XHJcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcclxuICB9ID0ge30sXHJcbiAgYXR0ZW1wdDogbnVtYmVyID0gMFxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCB1c2VFeHRlcm5hbENvbm5lY3Rpb24gPSBCb29sZWFuKG9wdGlvbnMuY29ubmVjdGlvbik7XHJcbiAgY29uc3QgY29ubmVjdGlvbjogUG9vbENvbm5lY3Rpb24gPVxyXG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XHJcblxyXG4gIGxldCByZXN1bHQ7XHJcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xyXG5cclxuICB0cnkge1xyXG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcclxuICAgIFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeSh7XHJcbiAgICAgIHNxbCxcclxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcclxuICAgICAgbmVzdFRhYmxlczogb3B0aW9ucy5uZXN0VGFibGVzLFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICByZXN1bHQgPSBbXTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIGUubWVzc2FnZSA9IGAke2UuY29kZX1cXG5zcWw6ICR7c3FsUXVlcnl9XFxuZXJyb3I6ICR7ZS5tZXNzYWdlfVxcbnRpbWU6IH1gO1xyXG5cclxuICAgIHRocm93IGU7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGlmICghdXNlRXh0ZXJuYWxDb25uZWN0aW9uKSB7XHJcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkJBQSxPQUFBLENBQUFDLEtBQUEsR0FBQUEsS0FBQTtBQTNCQSxNQUFBQyxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlSixPQUFBLENBQUFLLEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSSxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURWLE9BQUEsQ0FBQU8sVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR04sS0FBSyxDQUFDTyxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU94QixPQUFBLENBQUFXLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0IxQixLQUFLQSxDQUFBMkIsS0FBQTt1REFDekJDLEdBQVcsRUFDWEMsT0FBQSxHQUlJLEVBQUUsRUFDTkMsT0FBQSxHQUFrQixDQUFDO0lBRW5CLE1BQU1DLHFCQUFxQixHQUFHQyxPQUFPLENBQUNILE9BQU8sQ0FBQ0osVUFBVSxDQUFDO0lBQ3pELE1BQU1BLFVBQVUsR0FDZEksT0FBTyxDQUFDSixVQUFVLEtBQUssTUFBTWYsSUFBSSxDQUFDdUIsYUFBYSxFQUFFLENBQUM7SUFFcEQsSUFBSUMsTUFBTTtJQUNWLElBQUlDLFFBQVEsR0FBR1AsR0FBRztJQUVsQixJQUFJO01BQ0ZPLFFBQVEsR0FBR1YsVUFBVSxDQUFDVyxNQUFNLENBQUNSLEdBQUcsRUFBRUMsT0FBTyxDQUFDUSxNQUFNLENBQUM7TUFDakQsQ0FBQ0gsTUFBTSxDQUFDLEdBQUcsTUFBTVQsVUFBVSxDQUFDekIsS0FBSyxDQUFDO1FBQ2hDNEIsR0FBRztRQUNIUyxNQUFNLEVBQUVSLE9BQU8sQ0FBQ1EsTUFBTTtRQUN0QkMsVUFBVSxFQUFFVCxPQUFPLENBQUNTO09BQ3JCLENBQUM7TUFDRixJQUFJLENBQUNKLE1BQU0sRUFBRTtRQUNYQSxNQUFNLEdBQUcsRUFBRTtNQUNiO0lBQ0YsQ0FBQyxDQUFDLE9BQU9LLENBQU0sRUFBRTtNQUNmQSxDQUFDLENBQUNDLE9BQU8sR0FBRyxHQUFHRCxDQUFDLENBQUNFLElBQUksVUFBVU4sUUFBUSxZQUFZSSxDQUFDLENBQUNDLE9BQU8sV0FBVztNQUV2RSxNQUFNRCxDQUFDO0lBQ1QsQ0FBQyxTQUFTO01BQ1IsSUFBSSxDQUFDUixxQkFBcUIsRUFBRTtRQUMxQk4sVUFBVSxDQUFDaUIsT0FBTyxFQUFFO01BQ3RCO0lBQ0Y7SUFDQSxPQUFPUixNQUFXO0VBQ3BCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","query","dotenv","__importStar","require","mysql","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\r\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\r\nimport * as mysql from \"mysql2/promise\";\r\nimport { PoolConnection } from \"mysql2/promise\";\r\n\r\ndotenv.config();\r\nconst coreSchema = process.env.DB_DATABASE;\r\n\r\nexport { ResultSetHeader, RowDataPacket, coreSchema };\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST,\r\n  user: process.env.DB_USERNAME,\r\n  password: process.env.DB_PASSWORD,\r\n  database: process.env.DB_DATABASE,\r\n  connectionLimit: 50,\r\n  queueLimit: 0,\r\n  charset: \"utf8\",\r\n  timezone: process.env.DB_TIMEZONE,\r\n});\r\n\r\npool.on(\"connection\", (connection: PoolConnection): void => {\r\n  connection.config.namedPlaceholders = true;\r\n});\r\n\r\nexport { pool, mysql };\r\n\r\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\r\n  sql: string,\r\n  options: {\r\n    connection?: PoolConnection;\r\n    nestTables?: boolean;\r\n    values?: any[] | any;\r\n  } = {},\r\n  attempt: number = 0\r\n): Promise<T> {\r\n  const useExternalConnection = Boolean(options.connection);\r\n  const connection: PoolConnection =\r\n    options.connection || (await pool.getConnection());\r\n\r\n  let result;\r\n  let sqlQuery = sql;\r\n\r\n  try {\r\n    sqlQuery = connection.format(sql, options.values);\r\n    [result] = await connection.query({\r\n      sql,\r\n      values: options.values,\r\n      nestTables: options.nestTables,\r\n    });\r\n    if (!result) {\r\n      result = [];\r\n    }\r\n  } catch (e: any) {\r\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\r\n\r\n    throw e;\r\n  } finally {\r\n    if (!useExternalConnection) {\r\n      connection.release();\r\n    }\r\n  }\r\n  return result as T;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BAA,OAAA,CAAAC,KAAA,GAAAA,KAAA;AA3BA,MAAAC,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeJ,OAAA,CAAAK,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACI,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDV,OAAA,CAAAO,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGN,KAAK,CAACO,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOxB,OAAA,CAAAW,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsB1B,KAAKA,CAAA2B,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACJ,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdI,OAAO,CAACJ,UAAU,KAAK,MAAMf,IAAI,CAACuB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGV,UAAU,CAACW,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMT,UAAU,CAACzB,KAAK,CAAC;QAChC4B,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BN,UAAU,CAACiB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC","ignoreList":[]}},"mtime":1741655050578},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loginSchema = exports.registerSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerSchema = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nexports.loginSchema = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJ1c2VyTmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0b2tlblZlcmlmeSIsIm51bGxhYmxlIiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tICd5dXAnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICAgIHVzZXJOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3VzZXJOYW1lIGlzIHJlcXVpcmVkJyksXHJcbiAgICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKCdpbnZhbGlkIGVtYWlsJykucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXHJcbiAgICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcclxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ2NvbmZpcm1QYXNzd29yZCcpXSwgJ3Bhc3N3b3JkIGFyZSBub3QgdGhlIHNhbWUnKSxcclxuICAgIGNvbmZpcm1QYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcclxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ3Bhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpXHJcbn0pO1xyXG5cclxuZXhwb3J0ICBjb25zdCBsb2dpblNjaGVtYSA9IHl1cC5vYmplY3QoKVxyXG4gICAgLnNoYXBlKHtcclxuICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdlbWFpbCBpcyByZXF1aXJlZCcpLFxyXG4gICAgICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkJyksXHJcbiAgICB9KS5yZXF1aXJlZCgpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGNBQWMsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzdDQyxRQUFRLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQztFQUN2REMsS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RUUsV0FBVyxFQUFFWCxHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDSSxRQUFRLEVBQUU7RUFDcENDLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ00sR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUNqREMsS0FBSyxDQUFDLENBQUNmLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDckVDLGVBQWUsRUFBRWpCLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDeERDLEtBQUssQ0FBQyxDQUFDZixHQUFHLENBQUNnQixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSwyQkFBMkI7Q0FDaEUsQ0FBQztBQUVZYixPQUFBLENBQUFlLFdBQVcsR0FBR2xCLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQ25DQyxLQUFLLENBQUM7RUFDSEksS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDakRJLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQjtDQUN6RCxDQUFDLENBQUNBLFFBQVEsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerSchema","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","loginSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\r\n\r\nexport const registerSchema = yup.object().shape({\r\n    userName: yup.string().required('userName is required'),\r\n    email: yup.string().email('invalid email').required('email is required'),\r\n    tokenVerify: yup.string().nullable(),\r\n    password: yup.string().min(8, 'at least 8 charecters')\r\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\r\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\r\n        .oneOf([yup.ref('password')], 'password are not the same')\r\n});\r\n\r\nexport  const loginSchema = yup.object()\r\n    .shape({\r\n        email: yup.string().required('email is required'),\r\n        password: yup.string().required('password is required'),\r\n    }).required();\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,cAAc,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,QAAQ,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvDC,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxEE,WAAW,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEYb,OAAA,CAAAe,WAAW,GAAGlB,GAAG,CAACK,MAAM,EAAE,CACnCC,KAAK,CAAC;EACHI,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClinicService = void 0;\nconst email_1 = require(\"../../config/email\");\nconst common_1 = require(\"../../helper/common\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass ClinicService {\n  static registerClinic(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, db_1.checkExistClinic)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      // Generate a unique verification code\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      // Generate email verification token (without storing the code inside the JWT)\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, db_1.registerClinic)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n}\nexports.ClinicService = ClinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbF8xIiwicmVxdWlyZSIsImNvbW1vbl8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImRiXzEiLCJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsIm1zXzEiLCJzZW5kX2VtYWlsXzEiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJleHBpcmVzSW4iLCJ0ZXN0IiwiTWF0aCIsImZsb29yIiwiZGVmYXVsdCIsIkNsaW5pY1NlcnZpY2UiLCJyZWdpc3RlckNsaW5pYyIsImZvcm1EYXRhIiwiZW1haWxFeGlzdHMiLCJjaGVja0V4aXN0Q2xpbmljIiwiZW1haWwiLCJjb25zb2xlIiwiZXJyb3IiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInZlcmlmaWNhdGlvbkNvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJ2ZXJpZnlfY29kZSIsInRva2VuVmVyaWZ5Iiwic2lnbiIsInRva2VuX3ZlcmlmeSIsImNsaW5pY0RhdGEiLCJlbWFpbFNlcnZpY2UiLCJFbWFpbFByb3ZpZGVyIiwic2VuZEFjY291bnRSZWdpc3RlciIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiaWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1haWxQcm92aWRlciB9IGZyb20gXCIuLi8uLi9jb25maWcvZW1haWxcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IGNoZWNrRXhpc3RDbGluaWMsIHJlZ2lzdGVyQ2xpbmljIH0gZnJvbSBcIi4vZGJcIjtcclxuXHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgbXMgZnJvbSBcIm1zXCI7XHJcbmltcG9ydCBTZW5kTWFpbCBmcm9tIFwiLi4vLi4vaGVscGVyL3NlbmRfZW1haWxcIjtcclxuXHJcblxyXG5cclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gRGVmYXVsdCAxIGRheVxyXG5jb25zdCBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIHx8IFwieW91ci1zZWNyZXQta2V5XCI7XHJcblxyXG4vLyBDaGVjayBpZiBleHBpcmF0aW9uIG5lZWRzIGNvbnZlcnNpb25cclxuY29uc3QgZXhwaXJlc0luID1cclxuICB0eXBlb2YgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID09PSBcInN0cmluZ1wiICYmXHJcbiAgL15bMC05XStbc21oZHd5XSQvaS50ZXN0KEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRClcclxuICAgID8gTWF0aC5mbG9vcihtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMClcclxuICAgIDogSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG5leHBvcnQgY2xhc3MgQ2xpbmljU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWdpc3RlckNsaW5pYyhmb3JtRGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrRXhpc3RDbGluaWMoZm9ybURhdGEuZW1haWwpO1xyXG5cclxuICAgIGlmIChlbWFpbEV4aXN0cykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIGAke2Zvcm1EYXRhLmVtYWlsfSBFbWFpbCBhbHJlYWR5IGV4aXN0cywgdGhyb3dpbmcgZXJyb3IuLi5gXHJcbiAgICAgICk7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoYCR7Zm9ybURhdGEuZW1haWx9IGlzIGFscmVhZHkgZXhpc3QuYCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkNvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGZvcm1EYXRhLnZlcmlmeV9jb2RlID0gdmVyaWZpY2F0aW9uQ29kZTtcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgZW1haWwgdmVyaWZpY2F0aW9uIHRva2VuICh3aXRob3V0IHN0b3JpbmcgdGhlIGNvZGUgaW5zaWRlIHRoZSBKV1QpXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICB7IGVtYWlsOiBmb3JtRGF0YS5lbWFpbCB9LFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW4gfVxyXG4gICAgKTtcclxuICAgIGZvcm1EYXRhLnRva2VuX3ZlcmlmeSA9IHRva2VuVmVyaWZ5O1xyXG4gICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgIFxyXG4gICAgY29uc3QgY2xpbmljRGF0YSA9IGF3YWl0IHJlZ2lzdGVyQ2xpbmljKGZvcm1EYXRhKTtcclxuICAgIGlmICghY2xpbmljRGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGNsaW5pYy5cIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgU2VuZE1haWwobmV3IEVtYWlsUHJvdmlkZXIoKSk7XHJcbiAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZEFjY291bnRSZWdpc3Rlcihmb3JtRGF0YS5lbWFpbCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogXCJDbGluaWMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkuIFBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbC5cIixcclxuICAgICAgbmV3VXNlcjoge1xyXG4gICAgICAgIGlkOiBjbGluaWNEYXRhLmlkLFxyXG4gICAgICAgIGVtYWlsOiBmb3JtRGF0YS5lbWFpbCxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxnQkFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBSCxPQUFBO0FBRUEsTUFBQUksY0FBQSxHQUFBQyxlQUFBLENBQUFMLE9BQUE7QUFDQSxNQUFBTSxJQUFBLEdBQUFELGVBQUEsQ0FBQUwsT0FBQTtBQUNBLE1BQUFPLFlBQUEsR0FBQUYsZUFBQSxDQUFBTCxPQUFBO0FBSUEsTUFBTVEsd0JBQXdCLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRix3QkFBd0IsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUMvRSxNQUFNRyx1QkFBdUIsR0FBR0YsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHVCQUF1QixJQUFJLGlCQUFpQjtBQUV4RjtBQUNBLE1BQU1DLFNBQVMsR0FDYixPQUFPSix3QkFBd0IsS0FBSyxRQUFRLElBQzVDLG1CQUFtQixDQUFDSyxJQUFJLENBQUNMLHdCQUF3QixDQUFDLEdBQzlDTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxJQUFBVCxJQUFBLENBQUFVLE9BQUUsRUFBQ1Isd0JBQXdCLENBQUMsR0FBRyxJQUFJLENBQUMsR0FDL0NBLHdCQUF3QjtBQUk5QixNQUFhUyxhQUFhO0VBQ2pCLE9BQWFDLGNBQWNBLENBQUNDLFFBQWE7O01BQzlDLE1BQU1DLFdBQVcsR0FBRyxNQUFNLElBQUFqQixJQUFBLENBQUFrQixnQkFBZ0IsRUFBQ0YsUUFBUSxDQUFDRyxLQUFLLENBQUM7TUFFMUQsSUFBSUYsV0FBVyxFQUFFO1FBQ2ZHLE9BQU8sQ0FBQ0MsS0FBSyxDQUNYLEdBQUdMLFFBQVEsQ0FBQ0csS0FBSywwQ0FBMEMsQ0FDNUQ7UUFDRCxNQUFNLElBQUlwQixnQkFBQSxDQUFBdUIsYUFBYSxDQUFDQyxVQUFVLENBQUMsR0FBR1AsUUFBUSxDQUFDRyxLQUFLLG9CQUFvQixDQUFDO01BQzNFO01BR0E7TUFDQSxNQUFNSyxnQkFBZ0IsR0FBRyxJQUFBMUIsUUFBQSxDQUFBMkIsZUFBZSxHQUFFO01BQzFDVCxRQUFRLENBQUNVLFdBQVcsR0FBR0YsZ0JBQWdCO01BRXZDO01BQ0EsTUFBTUcsV0FBVyxHQUFHMUIsY0FBQSxDQUFBWSxPQUFHLENBQUNlLElBQUksQ0FDMUI7UUFBRVQsS0FBSyxFQUFFSCxRQUFRLENBQUNHO01BQUssQ0FBRSxFQUN6QlgsdUJBQXVCLEVBQ3ZCO1FBQUVDO01BQVMsQ0FBRSxDQUNkO01BQ0RPLFFBQVEsQ0FBQ2EsWUFBWSxHQUFHRixXQUFXO01BQ25DO01BRUEsTUFBTUcsVUFBVSxHQUFHLE1BQU0sSUFBQTlCLElBQUEsQ0FBQWUsY0FBYyxFQUFDQyxRQUFRLENBQUM7TUFDakQsSUFBSSxDQUFDYyxVQUFVLEVBQUU7UUFDZixNQUFNLElBQUkvQixnQkFBQSxDQUFBdUIsYUFBYSxDQUFDQyxVQUFVLENBQUMsNEJBQTRCLENBQUM7TUFDbEU7TUFDQSxNQUFNUSxZQUFZLEdBQUcsSUFBSTNCLFlBQUEsQ0FBQVMsT0FBUSxDQUFDLElBQUlqQixPQUFBLENBQUFvQyxhQUFhLEVBQUUsQ0FBQztNQUN0RCxNQUFNRCxZQUFZLENBQUNFLG1CQUFtQixDQUFDakIsUUFBUSxDQUFDRyxLQUFLLEVBQUVLLGdCQUFnQixDQUFDO01BRXhFLE9BQU87UUFDTFUsT0FBTyxFQUFFLDJEQUEyRDtRQUNwRUMsT0FBTyxFQUFFO1VBQ1BDLEVBQUUsRUFBRU4sVUFBVSxDQUFDTSxFQUFFO1VBQ2pCakIsS0FBSyxFQUFFSCxRQUFRLENBQUNHOztPQUVuQjtJQUNILENBQUM7OztBQXZDSGtCLE9BQUEsQ0FBQXZCLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["email_1","require","common_1","response_error_1","db_1","jsonwebtoken_1","__importDefault","ms_1","send_email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","ClinicService","registerClinic","formData","emailExists","checkExistClinic","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","message","newUser","id","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/clinic/service.ts"],"sourcesContent":["import { EmailProvider } from \"../../config/email\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { checkExistClinic, registerClinic } from \"./db\";\r\n\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport SendMail from \"../../helper/send_email\";\r\n\r\n\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n    \r\n    \r\n    \r\nexport class ClinicService {\r\n  public static async registerClinic(formData: any) {\r\n    const emailExists = await checkExistClinic(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    \r\n    // Generate a unique verification code\r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    // Generate email verification token (without storing the code inside the JWT)\r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerClinic(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AACA,MAAAG,IAAA,GAAAH,OAAA;AAEA,MAAAI,cAAA,GAAAC,eAAA,CAAAL,OAAA;AACA,MAAAM,IAAA,GAAAD,eAAA,CAAAL,OAAA;AACA,MAAAO,YAAA,GAAAF,eAAA,CAAAL,OAAA;AAIA,MAAMQ,wBAAwB,GAAGC,OAAO,CAACC,GAAG,CAACF,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAC/E,MAAMG,uBAAuB,GAAGF,OAAO,CAACC,GAAG,CAACC,uBAAuB,IAAI,iBAAiB;AAExF;AACA,MAAMC,SAAS,GACb,OAAOJ,wBAAwB,KAAK,QAAQ,IAC5C,mBAAmB,CAACK,IAAI,CAACL,wBAAwB,CAAC,GAC9CM,IAAI,CAACC,KAAK,CAAC,IAAAT,IAAA,CAAAU,OAAE,EAACR,wBAAwB,CAAC,GAAG,IAAI,CAAC,GAC/CA,wBAAwB;AAI9B,MAAaS,aAAa;EACjB,OAAaC,cAAcA,CAACC,QAAa;;MAC9C,MAAMC,WAAW,GAAG,MAAM,IAAAjB,IAAA,CAAAkB,gBAAgB,EAACF,QAAQ,CAACG,KAAK,CAAC;MAE1D,IAAIF,WAAW,EAAE;QACfG,OAAO,CAACC,KAAK,CACX,GAAGL,QAAQ,CAACG,KAAK,0CAA0C,CAC5D;QACD,MAAM,IAAIpB,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,GAAGP,QAAQ,CAACG,KAAK,oBAAoB,CAAC;MAC3E;MAGA;MACA,MAAMK,gBAAgB,GAAG,IAAA1B,QAAA,CAAA2B,eAAe,GAAE;MAC1CT,QAAQ,CAACU,WAAW,GAAGF,gBAAgB;MAEvC;MACA,MAAMG,WAAW,GAAG1B,cAAA,CAAAY,OAAG,CAACe,IAAI,CAC1B;QAAET,KAAK,EAAEH,QAAQ,CAACG;MAAK,CAAE,EACzBX,uBAAuB,EACvB;QAAEC;MAAS,CAAE,CACd;MACDO,QAAQ,CAACa,YAAY,GAAGF,WAAW;MACnC;MAEA,MAAMG,UAAU,GAAG,MAAM,IAAA9B,IAAA,CAAAe,cAAc,EAACC,QAAQ,CAAC;MACjD,IAAI,CAACc,UAAU,EAAE;QACf,MAAM,IAAI/B,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,4BAA4B,CAAC;MAClE;MACA,MAAMQ,YAAY,GAAG,IAAI3B,YAAA,CAAAS,OAAQ,CAAC,IAAIjB,OAAA,CAAAoC,aAAa,EAAE,CAAC;MACtD,MAAMD,YAAY,CAACE,mBAAmB,CAACjB,QAAQ,CAACG,KAAK,EAAEK,gBAAgB,CAAC;MAExE,OAAO;QACLU,OAAO,EAAE,2DAA2D;QACpEC,OAAO,EAAE;UACPC,EAAE,EAAEN,UAAU,CAACM,EAAE;UACjBjB,KAAK,EAAEH,QAAQ,CAACG;;OAEnB;IACH,CAAC;;;AAvCHkB,OAAA,CAAAvB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmailProvider = void 0;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst dotenv_1 = __importDefault(require(\"dotenv\"));\ndotenv_1.default.config(); // Load environment variables\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n  /**\n   * Create and configure the mail transporter\n   */\n  createTransporter() {\n    if (isMailgunAPI) {\n      return nodemailer_1.default.createTransport((0, nodemailer_mailgun_transport_1.default)({\n        auth: {\n          api_key: MAILGUN_API_KEY,\n          domain: MAILGUN_DOMAIN\n        }\n      }));\n    }\n    return nodemailer_1.default.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false,\n      // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD\n      }\n    });\n  }\n  /**\n   * Sends an email\n   */\n  send(to, subject, template) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const recipient = Array.isArray(to) ? to.join(\", \") : to;\n        const mailOptions = {\n          from: `${APP_NAME} <${MAIL_USERNAME}>`,\n          to: recipient,\n          subject,\n          html: template\n        };\n        const info = yield this.transporter.sendMail(mailOptions);\n        console.log(\" Email sent successfully:\", info.messageId);\n        return info;\n      } catch (error) {\n        console.error(\" Error sending email:\", error);\n        throw new Error(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.EmailProvider = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwibm9kZW1haWxlcl9tYWlsZ3VuX3RyYW5zcG9ydF8xIiwiZG90ZW52XzEiLCJkZWZhdWx0IiwiY29uZmlnIiwiQVBQX05BTUUiLCJNQUlMX0RSSVZFUiIsIk1BSUxfSE9TVCIsIk1BSUxfUE9SVCIsIk1BSUxfVVNFUk5BTUUiLCJNQUlMX1BBU1NXT1JEIiwiTUFJTF9BVVRIX1RZUEUiLCJNQUlMR1VOX0FQSV9LRVkiLCJNQUlMR1VOX0RPTUFJTiIsIk9BVVRIX0NMSUVOVF9JRCIsIk9BVVRIX0NMSUVOVF9TRUNSRVQiLCJPQVVUSF9SRUZSRVNIX1RPS0VOIiwiT0FVVEhfUkVESVJFQ1RfVVJMIiwicHJvY2VzcyIsImVudiIsImlzTWFpbGd1bkFQSSIsIkJvb2xlYW4iLCJFbWFpbFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiYXV0aCIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsIk51bWJlciIsInNlY3VyZSIsInVzZXIiLCJwYXNzIiwic2VuZCIsInRvIiwic3ViamVjdCIsInRlbXBsYXRlIiwicmVjaXBpZW50IiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIm1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJpbmZvIiwic2VuZE1haWwiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZUlkIiwiZXJyb3IiLCJFcnJvciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29uZmlnL2VtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSBcIm5vZGVtYWlsZXJcIjtcclxuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5cclxuZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5cclxuY29uc3Qge1xyXG4gIEFQUF9OQU1FLFxyXG4gIE1BSUxfRFJJVkVSLFxyXG4gIE1BSUxfSE9TVCxcclxuICBNQUlMX1BPUlQsXHJcbiAgTUFJTF9VU0VSTkFNRSxcclxuICBNQUlMX1BBU1NXT1JELFxyXG4gIE1BSUxfQVVUSF9UWVBFLFxyXG4gIE1BSUxHVU5fQVBJX0tFWSxcclxuICBNQUlMR1VOX0RPTUFJTixcclxuICBPQVVUSF9DTElFTlRfSUQsXHJcbiAgT0FVVEhfQ0xJRU5UX1NFQ1JFVCxcclxuICBPQVVUSF9SRUZSRVNIX1RPS0VOLFxyXG4gIE9BVVRIX1JFRElSRUNUX1VSTCxcclxufSA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgaXNNYWlsZ3VuQVBJID0gQm9vbGVhbihNQUlMR1VOX0FQSV9LRVkgJiYgTUFJTEdVTl9ET01BSU4pO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVtYWlsUHJvdmlkZXIge1xyXG4gIHByaXZhdGUgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy50cmFuc3BvcnRlciA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0ZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhbmQgY29uZmlndXJlIHRoZSBtYWlsIHRyYW5zcG9ydGVyXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRlcigpOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyIHtcclxuICAgIGlmIChpc01haWxndW5BUEkpIHtcclxuICAgICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KFxyXG4gICAgICAgIG1nKHtcclxuICAgICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgICAgYXBpX2tleTogTUFJTEdVTl9BUElfS0VZISxcclxuICAgICAgICAgICAgZG9tYWluOiBNQUlMR1VOX0RPTUFJTiEsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgaG9zdDogTUFJTF9IT1NULFxyXG4gICAgICBwb3J0OiBOdW1iZXIoTUFJTF9QT1JUKSxcclxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gU2V0IGB0cnVlYCBmb3IgcG9ydCA0NjUgKFNTTClcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IE1BSUxfVVNFUk5BTUUsXHJcbiAgICAgICAgcGFzczogTUFJTF9QQVNTV09SRCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYW4gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgc2VuZCh0bzogc3RyaW5nIHwgc3RyaW5nW10sIHN1YmplY3Q6IHN0cmluZywgdGVtcGxhdGU6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVjaXBpZW50ID0gQXJyYXkuaXNBcnJheSh0bykgPyB0by5qb2luKFwiLCBcIikgOiB0bztcclxuICAgICAgY29uc3QgbWFpbE9wdGlvbnM6IG5vZGVtYWlsZXIuU2VuZE1haWxPcHRpb25zID0ge1xyXG4gICAgICAgIGZyb206IGAke0FQUF9OQU1FfSA8JHtNQUlMX1VTRVJOQU1FfT5gLFxyXG4gICAgICAgIHRvOiByZWNpcGllbnQsXHJcbiAgICAgICAgc3ViamVjdCxcclxuICAgICAgICBodG1sOiB0ZW1wbGF0ZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgRW1haWwgc2VudCBzdWNjZXNzZnVsbHk6XCIsIGluZm8ubWVzc2FnZUlkKTtcclxuICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIHNlbmRpbmcgZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHNlbmQgZW1haWxcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxZQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLDhCQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUFFLFFBQUEsQ0FBQUMsT0FBTSxDQUFDQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBRWpCLE1BQU07RUFDSkMsUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLFNBQVM7RUFDVEMsU0FBUztFQUNUQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxtQkFBbUI7RUFDbkJDLG1CQUFtQjtFQUNuQkM7QUFBa0IsQ0FDbkIsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWYsTUFBTUMsWUFBWSxHQUFHQyxPQUFPLENBQUNULGVBQWUsSUFBSUMsY0FBYyxDQUFDO0FBRS9ELE1BQWFTLGFBQWE7RUFHeEJDLFlBQUE7SUFDRSxJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixFQUFFO0VBQzdDO0VBRUE7OztFQUdRQSxpQkFBaUJBLENBQUE7SUFDdkIsSUFBSUwsWUFBWSxFQUFFO01BQ2hCLE9BQU90QixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FDL0IsSUFBQXpCLDhCQUFBLENBQUFFLE9BQUUsRUFBQztRQUNEd0IsSUFBSSxFQUFFO1VBQ0pDLE9BQU8sRUFBRWhCLGVBQWdCO1VBQ3pCaUIsTUFBTSxFQUFFaEI7O09BRVgsQ0FBQyxDQUNIO0lBQ0g7SUFFQSxPQUFPZixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FBQztNQUNoQ0ksSUFBSSxFQUFFdkIsU0FBUztNQUNmd0IsSUFBSSxFQUFFQyxNQUFNLENBQUN4QixTQUFTLENBQUM7TUFDdkJ5QixNQUFNLEVBQUUsS0FBSztNQUFFO01BQ2ZOLElBQUksRUFBRTtRQUNKTyxJQUFJLEVBQUV6QixhQUFhO1FBQ25CMEIsSUFBSSxFQUFFekI7O0tBRVQsQ0FBQztFQUNKO0VBRUE7OztFQUdhMEIsSUFBSUEsQ0FBQ0MsRUFBcUIsRUFBRUMsT0FBZSxFQUFFQyxRQUFnQjs7TUFDeEUsSUFBSTtRQUNGLE1BQU1DLFNBQVMsR0FBR0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLEVBQUUsQ0FBQyxHQUFHQSxFQUFFLENBQUNNLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR04sRUFBRTtRQUN4RCxNQUFNTyxXQUFXLEdBQStCO1VBQzlDQyxJQUFJLEVBQUUsR0FBR3hDLFFBQVEsS0FBS0ksYUFBYSxHQUFHO1VBQ3RDNEIsRUFBRSxFQUFFRyxTQUFTO1VBQ2JGLE9BQU87VUFDUFEsSUFBSSxFQUFFUDtTQUNQO1FBRUQsTUFBTVEsSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDdkIsV0FBVyxDQUFDd0IsUUFBUSxDQUFDSixXQUFXLENBQUM7UUFDekRLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFSCxJQUFJLENBQUNJLFNBQVMsQ0FBQztRQUN6RCxPQUFPSixJQUFJO01BQ2IsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtRQUNkSCxPQUFPLENBQUNHLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO1FBQzlDLE1BQU0sSUFBSUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BQ3pDO0lBQ0YsQ0FBQzs7O0FBckRIQyxPQUFBLENBQUFoQyxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["nodemailer_1","__importDefault","require","nodemailer_mailgun_transport_1","dotenv_1","default","config","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","Boolean","EmailProvider","constructor","transporter","createTransporter","createTransport","auth","api_key","domain","host","port","Number","secure","user","pass","send","to","subject","template","recipient","Array","isArray","join","mailOptions","from","html","info","sendMail","console","log","messageId","error","Error","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\config\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/config/email.ts"],"sourcesContent":["import _ from \"lodash\";\r\nimport nodemailer from \"nodemailer\";\r\nimport mg from \"nodemailer-mailgun-transport\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config(); // Load environment variables\r\n\r\nconst {\r\n  APP_NAME,\r\n  MAIL_DRIVER,\r\n  MAIL_HOST,\r\n  MAIL_PORT,\r\n  MAIL_USERNAME,\r\n  MAIL_PASSWORD,\r\n  MAIL_AUTH_TYPE,\r\n  MAILGUN_API_KEY,\r\n  MAILGUN_DOMAIN,\r\n  OAUTH_CLIENT_ID,\r\n  OAUTH_CLIENT_SECRET,\r\n  OAUTH_REFRESH_TOKEN,\r\n  OAUTH_REDIRECT_URL,\r\n} = process.env;\r\n\r\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\r\n\r\nexport class EmailProvider {\r\n  private transporter: nodemailer.Transporter;\r\n\r\n  constructor() {\r\n    this.transporter = this.createTransporter();\r\n  }\r\n\r\n  /**\r\n   * Create and configure the mail transporter\r\n   */\r\n  private createTransporter(): nodemailer.Transporter {\r\n    if (isMailgunAPI) {\r\n      return nodemailer.createTransport(\r\n        mg({\r\n          auth: {\r\n            api_key: MAILGUN_API_KEY!,\r\n            domain: MAILGUN_DOMAIN!,\r\n          },\r\n        })\r\n      );\r\n    }\r\n\r\n    return nodemailer.createTransport({\r\n      host: MAIL_HOST,\r\n      port: Number(MAIL_PORT),\r\n      secure: false, // Set `true` for port 465 (SSL)\r\n      auth: {\r\n        user: MAIL_USERNAME,\r\n        pass: MAIL_PASSWORD,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sends an email\r\n   */\r\n  public async send(to: string | string[], subject: string, template: string) {\r\n    try {\r\n      const recipient = Array.isArray(to) ? to.join(\", \") : to;\r\n      const mailOptions: nodemailer.SendMailOptions = {\r\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\r\n        to: recipient,\r\n        subject,\r\n        html: template,\r\n      };\r\n\r\n      const info = await this.transporter.sendMail(mailOptions);\r\n      console.log(\" Email sent successfully:\", info.messageId);\r\n      return info;\r\n    } catch (error) {\r\n      console.error(\" Error sending email:\", error);\r\n      throw new Error(\"Failed to send email\");\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,8BAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAC,OAAM,CAACC,MAAM,EAAE,CAAC,CAAC;AAEjB,MAAM;EACJC,QAAQ;EACRC,WAAW;EACXC,SAAS;EACTC,SAAS;EACTC,aAAa;EACbC,aAAa;EACbC,cAAc;EACdC,eAAe;EACfC,cAAc;EACdC,eAAe;EACfC,mBAAmB;EACnBC,mBAAmB;EACnBC;AAAkB,CACnB,GAAGC,OAAO,CAACC,GAAG;AAEf,MAAMC,YAAY,GAAGC,OAAO,CAACT,eAAe,IAAIC,cAAc,CAAC;AAE/D,MAAaS,aAAa;EAGxBC,YAAA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,iBAAiB,EAAE;EAC7C;EAEA;;;EAGQA,iBAAiBA,CAAA;IACvB,IAAIL,YAAY,EAAE;MAChB,OAAOtB,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAC/B,IAAAzB,8BAAA,CAAAE,OAAE,EAAC;QACDwB,IAAI,EAAE;UACJC,OAAO,EAAEhB,eAAgB;UACzBiB,MAAM,EAAEhB;;OAEX,CAAC,CACH;IACH;IAEA,OAAOf,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAAC;MAChCI,IAAI,EAAEvB,SAAS;MACfwB,IAAI,EAAEC,MAAM,CAACxB,SAAS,CAAC;MACvByB,MAAM,EAAE,KAAK;MAAE;MACfN,IAAI,EAAE;QACJO,IAAI,EAAEzB,aAAa;QACnB0B,IAAI,EAAEzB;;KAET,CAAC;EACJ;EAEA;;;EAGa0B,IAAIA,CAACC,EAAqB,EAAEC,OAAe,EAAEC,QAAgB;;MACxE,IAAI;QACF,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,IAAI,CAAC,IAAI,CAAC,GAAGN,EAAE;QACxD,MAAMO,WAAW,GAA+B;UAC9CC,IAAI,EAAE,GAAGxC,QAAQ,KAAKI,aAAa,GAAG;UACtC4B,EAAE,EAAEG,SAAS;UACbF,OAAO;UACPQ,IAAI,EAAEP;SACP;QAED,MAAMQ,IAAI,GAAG,MAAM,IAAI,CAACvB,WAAW,CAACwB,QAAQ,CAACJ,WAAW,CAAC;QACzDK,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAACI,SAAS,CAAC;QACzD,OAAOJ,IAAI;MACb,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MACzC;IACF,CAAC;;;AArDHC,OAAA,CAAAhC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050578},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev2 = getUniqueCodev2;\nexports.getUniqueCodev3 = getUniqueCodev3;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYyIiwiZ2V0VW5pcXVlQ29kZXYzIiwibGVuZ3RoIiwicmVzdWx0IiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci9jb21tb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcclxuICovXHJcbmZ1bmN0aW9uIGdldFVuaXF1ZUNvZGV2MihsZW5ndGggPSAzMikge1xyXG4gIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gIGNvbnN0IGNoYXJhY3RlcnMgPVxyXG4gICAgXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xyXG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYzKGxlbmd0aCA9IDQpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJ1xyXG4gICAgY29uc3QgY2hhcmFjdGVycyA9XHJcbiAgICAgICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknXHJcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH1cclxuZXhwb3J0IHtcclxuICAgIGdldFVuaXF1ZUNvZGV2MixcclxuICAgIGdldFVuaXF1ZUNvZGV2M1xyXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7O0FBOEJJQSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQTtBQUNBRCxPQUFBLENBQUFFLGVBQUEsR0FBQUEsZUFBQTtBQS9CSjs7OztBQUlBLFNBQVNELGVBQWVBLENBQUNFLE1BQU0sR0FBRyxFQUFFO0VBQ2xDLElBQUlDLE1BQU0sR0FBRyxFQUFFO0VBQ2YsTUFBTUMsVUFBVSxHQUNkLGdFQUFnRTtFQUNsRSxNQUFNQyxnQkFBZ0IsR0FBR0QsVUFBVSxDQUFDRixNQUFNO0VBQzFDLEtBQUssSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSixNQUFNLEVBQUVJLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDbENILE1BQU0sSUFBSUMsVUFBVSxDQUFDRyxNQUFNLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLE1BQU0sRUFBRSxHQUFHTCxnQkFBZ0IsQ0FBQyxDQUFDO0VBQzNFO0VBQ0EsT0FBT0YsTUFBTTtBQUNmO0FBRUE7Ozs7QUFJQSxTQUFTRixlQUFlQSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","getUniqueCodev2","getUniqueCodev3","length","result","characters","charactersLength","i","charAt","Math","floor","random"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/helper/common.ts"],"sourcesContent":["/**\r\n *\r\n * @param length - Generate Unique Code ( default length 32 )\r\n */\r\nfunction getUniqueCodev2(length = 32) {\r\n  let result = \"\";\r\n  const characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  const charactersLength = characters.length;\r\n  for (let i = 0; i < length; i += 1) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n * @param length - Generate Unique Code ( default length 32 )\r\n */\r\nfunction getUniqueCodev3(length = 4) {\r\n    let result = ''\r\n    const characters =\r\n      'abcdefghijklmnopqrstuvwxyz0123456789'\r\n    const charactersLength = characters.length\r\n    for (let i = 0; i < length; i += 1) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\r\n    }\r\n    return result\r\n  }\r\nexport {\r\n    getUniqueCodev2,\r\n    getUniqueCodev3\r\n  }"],"mappings":";;;;;AA8BIA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AACAD,OAAA,CAAAE,eAAA,GAAAA,eAAA;AA/BJ;;;;AAIA,SAASD,eAAeA,CAACE,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAEA;;;;AAIA,SAASF,eAAeA,CAACC,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf","ignoreList":[]}},"mtime":1741655050589},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistClinic = checkExistClinic;\nexports.registerClinic = registerClinic;\nexports.findClinicByEmail = findClinicByEmail;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistClinic(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if clinic exists:\", error);\n      throw new Error(\"An error occurred while checking clinic existence.\");\n    }\n  });\n}\nfunction registerClinic(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.clinic\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.name, data.owner_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.zip_code, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction findClinicByEmail(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`SELECT email FROM ${mysql_1.coreSchema}.clinic WHERE email ? LIMIT 1`, {\n        values: [email]\n      });\n      return result.length > 0 ? result[0] : null;\n    } catch (error) {\n      console.error(\"Error querying clinic by email:\", error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdENsaW5pYyIsInJlZ2lzdGVyQ2xpbmljIiwiZmluZENsaW5pY0J5RW1haWwiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJteXNxbF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImVtYWlsIiwicXVlcnlSZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0Iiwic2FsdFJvdW5kcyIsImhhc2hlZFBhc3N3b3JkIiwiZGVmYXVsdCIsImhhc2giLCJuZXdJZCIsInY0IiwicmVzdWx0IiwibmFtZSIsIm93bmVyX25hbWUiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiY2l0eSIsInN0YXRlIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiRGF0ZSIsIk9iamVjdCIsImFzc2lnbiIsImlkIiwibWVzc2FnZSIsIkludGVybmFsU2VydmVyIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IElDbGluaWMgfSBmcm9tIFwiLi9JY2xpbmljXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tFeGlzdENsaW5pYyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAgICB7IHZhbHVlczogW2VtYWlsXSB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBxdWVyeVJlc3VsdC5sZW5ndGggPiAwO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgaWYgY2xpbmljIGV4aXN0czpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY2hlY2tpbmcgY2xpbmljIGV4aXN0ZW5jZS5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJDbGluaWMoZGF0YTogSUNsaW5pYyk6IFByb21pc2U8SUNsaW5pYz4ge1xyXG4gIGNvbnN0IHtwYXNzd29yZCAsIGNvbmZpcm1QYXNzd29yZH09IGRhdGEucGFzc3dvcmRcclxuXHJcbiAgaWYgKHBhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJQYXNzd29yZHMgZG8gbm90IG1hdGNoXCIpO1xyXG4gIH1cclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmNsaW5pY1xyXG4gICAgICAgIChpZCxuYW1lLG93bmVyX25hbWUsZW1haWwscGFzc3dvcmQsdG9rZW5fdmVyaWZ5LHZlcmlmeV9jb2RlLHBob25lLGNpdHksc3RhdGUsemlwX2NvZGUsY291bnRyeSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXHJcbiAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBuZXdJZCxcclxuICAgICAgICAgIGRhdGEubmFtZSxcclxuICAgICAgICAgIGRhdGEub3duZXJfbmFtZSxcclxuICAgICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgICBoYXNoZWRQYXNzd29yZCAsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgICAgZGF0YS5jaXR5LFxyXG4gICAgICAgICAgZGF0YS5zdGF0ZSxcclxuICAgICAgICAgIGRhdGEuemlwX2NvZGUsXHJcbiAgICAgICAgICBkYXRhLmNvdW50cnksXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaWQ6IG5ld0lkIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRDbGluaWNCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBTRUxFQ1QgZW1haWwgRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA/IExJTUlUIDFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0WzBdIDogbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHF1ZXJ5aW5nIGNsaW5pYyBieSBlbWFpbDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gaW5zZXJ0IGNsaW5pYy5cIik7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BQSxPQUFBLENBQUFDLGdCQUFBLEdBQUFBLGdCQUFBO0FBY0FELE9BQUEsQ0FBQUUsY0FBQSxHQUFBQSxjQUFBO0FBd0NBRixPQUFBLENBQUFHLGlCQUFBLEdBQUFBLGlCQUFBO0FBNURBLE1BQUFDLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsZ0JBQUEsR0FBQUgsT0FBQTtBQUdBLFNBQXNCTCxnQkFBZ0JBLENBQUNTLEtBQWE7O0lBQ2xE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","map":{"version":3,"names":["exports","checkExistClinic","registerClinic","findClinicByEmail","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","name","owner_name","token_verify","verify_code","phone","city","state","zip_code","country","Date","Object","assign","id","message","InternalServer"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/clinic/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IClinic } from \"./Iclinic\";\r\n\r\nexport async function checkExistClinic(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if clinic exists:\", error);\r\n    throw new Error(\"An error occurred while checking clinic existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerClinic(data: IClinic): Promise<IClinic> {\r\n  const {password , confirmPassword}= data.password\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.clinic\r\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.name,\r\n          data.owner_name,\r\n          data.email,\r\n          hashedPassword ,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.zip_code,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function findClinicByEmail(email: string): Promise<boolean> {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT email FROM ${coreSchema}.clinic WHERE email ? LIMIT 1`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return result.length > 0 ? result[0] : null;\r\n  } catch (error) {\r\n    console.error(\"Error querying clinic by email:\", error);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nconst promises_1 = __importDefault(require(\"fs/promises\"));\nconst {\n  APP_NAME\n} = process.env;\nclass SendMail {\n  constructor(emailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  loadTemplate(templateName, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const templatePath = path_1.default.resolve(__dirname, `../../public/template/email/${templateName}.html`);\n        const html = yield promises_1.default.readFile(templatePath, \"utf8\");\n        const template = handlebars_1.default.compile(html);\n        return template(data);\n      } catch (error) {\n        console.error(`Error loading email template (${templateName}):`, error);\n        throw new response_error_1.ResponseError.NotFound(\"Email template not found\");\n      }\n    });\n  }\n  sendAccountRegister(email, verifyCode) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"emailverify\", {\n          APP_NAME,\n          TOKEN: verifyCode\n        });\n        yield this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending registration email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n  sendForgetPassToken(user, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"register\", {\n          APP_NAME,\n          TOKEN: token\n        });\n        yield this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending password reset email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.default = SendMail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYW5kbGViYXJzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicGF0aF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsInByb21pc2VzXzEiLCJBUFBfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJTZW5kTWFpbCIsImNvbnN0cnVjdG9yIiwiZW1haWxQcm92aWRlciIsImxvYWRUZW1wbGF0ZSIsInRlbXBsYXRlTmFtZSIsImRhdGEiLCJ0ZW1wbGF0ZVBhdGgiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImh0bWwiLCJyZWFkRmlsZSIsInRlbXBsYXRlIiwiY29tcGlsZSIsImVycm9yIiwiY29uc29sZSIsIlJlc3BvbnNlRXJyb3IiLCJOb3RGb3VuZCIsInNlbmRBY2NvdW50UmVnaXN0ZXIiLCJlbWFpbCIsInZlcmlmeUNvZGUiLCJodG1sVG9TZW5kIiwiVE9LRU4iLCJzZW5kIiwiSW50ZXJuYWxTZXJ2ZXIiLCJzZW5kRm9yZ2V0UGFzc1Rva2VuIiwidXNlciIsInRva2VuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvc2VuZF9lbWFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGFuZGxlYmFycyBmcm9tIFwiaGFuZGxlYmFyc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgeyBFbWFpbFByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbmZpZy9lbWFpbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xyXG5cclxuY29uc3QgeyBBUFBfTkFNRSB9ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5jbGFzcyBTZW5kTWFpbCB7XHJcbiAgcHJpdmF0ZSBlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyKSB7XHJcbiAgICB0aGlzLmVtYWlsUHJvdmlkZXIgPSBlbWFpbFByb3ZpZGVyO1xyXG4gIH1cclxuICBwcml2YXRlIGFzeW5jIGxvYWRUZW1wbGF0ZShcclxuICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxyXG4gICAgZGF0YTogb2JqZWN0XHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZShcclxuICAgICAgICBfX2Rpcm5hbWUsXHJcbiAgICAgICAgYC4uLy4uL3B1YmxpYy90ZW1wbGF0ZS9lbWFpbC8ke3RlbXBsYXRlTmFtZX0uaHRtbGBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IGZzLnJlYWRGaWxlKHRlbXBsYXRlUGF0aCwgXCJ1dGY4XCIpO1xyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcclxuICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBlbWFpbCB0ZW1wbGF0ZSAoJHt0ZW1wbGF0ZU5hbWV9KTpgLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFwiRW1haWwgdGVtcGxhdGUgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHNlbmRBY2NvdW50UmVnaXN0ZXIoZW1haWw6IHN0cmluZywgdmVyaWZ5Q29kZTogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBodG1sVG9TZW5kID0gYXdhaXQgdGhpcy5sb2FkVGVtcGxhdGUoXCJlbWFpbHZlcmlmeVwiLCB7IEFQUF9OQU1FLCBUT0tFTjogdmVyaWZ5Q29kZSB9KTtcclxuICAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIFwiQWxpIERvY3RvciBSZWdpc3RyYXRpb25cIiwgaHRtbFRvU2VuZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VuZGluZyByZWdpc3RyYXRpb24gZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhOiBhbnkpIHtcclxuICAvLyAgIHRyeSB7XHJcbiAgLy8gICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlOiBUT0tFTiB9ID0gZm9ybURhdGE7XHJcbiAgLy8gICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaSBEb2N0b3IgUmVnaXN0cmF0aW9uXCI7XHJcbiAgLy8gICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZShcclxuICAvLyAgICAgICBfX2Rpcm5hbWUsXHJcbiAgLy8gICAgICAgXCIuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbFwiXHJcbiAgLy8gICAgICk7XHJcblxyXG4gIC8vICAgICAvLyBSZWFkIGVtYWlsIHRlbXBsYXRlIHVzaW5nIGFzeW5jL2F3YWl0XHJcbiAgLy8gICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBmcy5yZWFkRmlsZSh0ZW1wbGF0ZVBhdGgsIFwidXRmOFwiKTtcclxuICAvLyAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XHJcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZSh7IEFQUF9OQU1FLCBUT0tFTiB9KTtcclxuXHJcbiAgLy8gICAgIC8vIFNlbmQgZW1haWxcclxuICAvLyAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xyXG4gIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIEFjY291bnRSZWdpc3RlcjpcIiwgZXJyb3IpO1xyXG4gIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcclxuICAvLyAgIH1cclxuXHJcbiAgLy8gICAvLyBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YVxyXG4gIC8vICAgLy8gY29uc3QgVE9LRU4gPSBmb3JtRGF0YS52ZXJpZnlfY29kZVxyXG4gIC8vICAgLy8gY29uc3QgcGF0aFRlbXBsYXRlID0gcGF0aC5yZXNvbHZlKFxyXG4gIC8vICAgLy8gICBfX2Rpcm5hbWUsXHJcbiAgLy8gICAvLyAgIGAuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbGBcclxuICAvLyAgIC8vIClcclxuXHJcbiAgLy8gICAvLyBjb25zdCBzdWJqZWN0ID0gJ0FsaSBEb2N0b3IgUmVnaXN0cmF0aW9uJ1xyXG4gIC8vICAgLy8gLy8gY29uc3QgdXJsVG9rZW4gPSBgJHtCQVNFX1VSTF9DTElFTlR9L2VtYWlsL3ZlcmlmeT90b2tlbj0ke3Rva2VufWBcclxuICAvLyAgIC8vIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH1cclxuICAvLyAgIC8vIGNvbnN0IEVtYWlsID0gbmV3IEVtYWlsUHJvdmlkZXIoKVxyXG5cclxuICAvLyAgIC8vIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xyXG4gIC8vICAgLy8gICBpZiAoZXJyb3IpIHtcclxuICAvLyAgIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZCgnZW1haWwgdGVtcGxhdGUgbm90IGZvdW5kJylcclxuICAvLyAgIC8vICAgfVxyXG5cclxuICAvLyAgIC8vICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbClcclxuICAvLyAgIC8vICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSlcclxuXHJcbiAgLy8gICAvLyAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpXHJcbiAgLy8gICAvLyB9KVxyXG4gIC8vIH1cclxuXHJcblxyXG4gIHB1YmxpYyBhc3luYyBzZW5kRm9yZ2V0UGFzc1Rva2VuKHVzZXI6IFVzZXIsIHRva2VuOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSBhd2FpdCB0aGlzLmxvYWRUZW1wbGF0ZShcInJlZ2lzdGVyXCIsIHsgQVBQX05BTUUsIFRPS0VOOiB0b2tlbiB9KTtcclxuICAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQodXNlci5lbWFpbCwgXCJZb3VycyBEb2N0b3IgUmVnaXN0cmF0aW9uXCIsIGh0bWxUb1NlbmQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcGFzc3dvcmQgcmVzZXQgZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gcHVibGljIHN0YXRpYyBmb3JnZXRQYXNzVG9rZW4oZm9ybURhdGE6IFVzZXIsIHRva2VuOiBzdHJpbmcpIHtcclxuICAvLyAgIGNvbnN0IHsgZW1haWwgfSA9IGZvcm1EYXRhO1xyXG4gIC8vICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcclxuICAvLyAgIGNvbnN0IHBhdGhUZW1wbGF0ZSA9IHBhdGgucmVzb2x2ZShcclxuICAvLyAgICAgX19kaXJuYW1lLFxyXG4gIC8vICAgICBgLi4vLi4vcHVibGljL3RlbXBsYXRlcy9lbWFpbHMvcmVnaXN0ZXIuaHRtbGBcclxuICAvLyAgICk7XHJcblxyXG4gIC8vICAgY29uc3Qgc3ViamVjdCA9IFwiWW91cnMgRG9jdG9yIFJlZ2lzdGVyYXRpb25cIjtcclxuICAvLyAgIC8vIGNvbnN0IHVybFRva2VuID0gYCR7QkFTRV9VUkxfQ0xJRU5UfS9lbWFpbC92ZXJpZnk/dG9rZW49JHt0b2tlbn1gXHJcbiAgLy8gICBjb25zdCBkYXRhVGVtcGxhdGUgPSB7IEFQUF9OQU1FLCBUT0tFTiB9O1xyXG4gIC8vICAgY29uc3QgRW1haWwgPSBuZXcgRW1haWxQcm92aWRlcigpO1xyXG5cclxuICAvLyAgIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xyXG4gIC8vICAgICBpZiAoZXJyb3IpIHtcclxuICAvLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcImVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcclxuICAvLyAgICAgfVxyXG5cclxuICAvLyAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XHJcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZShkYXRhVGVtcGxhdGUpO1xyXG5cclxuICAvLyAgICAgRW1haWwuc2VuZChlbWFpbCwgc3ViamVjdCwgaHRtbFRvU2VuZCk7XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlbmRNYWlsO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxZQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUdBLE1BQUFHLFVBQUEsR0FBQUosZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTTtFQUFFSTtBQUFRLENBQUUsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWhDLE1BQU1DLFFBQVE7RUFHWkMsWUFBWUMsYUFBNEI7SUFDdEMsSUFBSSxDQUFDQSxhQUFhLEdBQUdBLGFBQWE7RUFDcEM7RUFDY0MsWUFBWUEsQ0FDeEJDLFlBQW9CLEVBQ3BCQyxJQUFZOztNQUVaLElBQUk7UUFDRixNQUFNQyxZQUFZLEdBQUdaLE1BQUEsQ0FBQWEsT0FBSSxDQUFDQyxPQUFPLENBQy9CQyxTQUFTLEVBQ1QsK0JBQStCTCxZQUFZLE9BQU8sQ0FDbkQ7UUFDRCxNQUFNTSxJQUFJLEdBQUcsTUFBTWQsVUFBQSxDQUFBVyxPQUFFLENBQUNJLFFBQVEsQ0FBQ0wsWUFBWSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxNQUFNTSxRQUFRLEdBQUdyQixZQUFBLENBQUFnQixPQUFVLENBQUNNLE9BQU8sQ0FBQ0gsSUFBSSxDQUFDO1FBQ3pDLE9BQU9FLFFBQVEsQ0FBQ1AsSUFBSSxDQUFDO01BQ3ZCLENBQUMsQ0FBQyxPQUFPUyxLQUFLLEVBQUU7UUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUMsaUNBQWlDVixZQUFZLElBQUksRUFBRVUsS0FBSyxDQUFDO1FBQ3ZFLE1BQU0sSUFBSW5CLGdCQUFBLENBQUFxQixhQUFhLENBQUNDLFFBQVEsQ0FBQywwQkFBMEIsQ0FBQztNQUM5RDtJQUNGLENBQUM7O0VBRVlDLG1CQUFtQkEsQ0FBQ0MsS0FBYSxFQUFFQyxVQUFrQjs7TUFDaEUsSUFBSTtRQUNGLE1BQU1DLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQ2xCLFlBQVksQ0FBQyxhQUFhLEVBQUU7VUFBRU4sUUFBUTtVQUFFeUIsS0FBSyxFQUFFRjtRQUFVLENBQUUsQ0FBQztRQUMxRixNQUFNLElBQUksQ0FBQ2xCLGFBQWEsQ0FBQ3FCLElBQUksQ0FBQ0osS0FBSyxFQUFFLHlCQUF5QixFQUFFRSxVQUFVLENBQUM7TUFDN0UsQ0FBQyxDQUFDLE9BQU9QLEtBQUssRUFBRTtRQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyxtQ0FBbUMsRUFBRUEsS0FBSyxDQUFDO1FBQ3pELE1BQU0sSUFBSW5CLGdCQUFBLENBQUFxQixhQUFhLENBQUNRLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQztNQUNoRTtJQUNGLENBQUM7O0VBRUQ7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFHYUMsbUJBQW1CQSxDQUFDQyxJQUFVLEVBQUVDLEtBQWE7O01BQ3hELElBQUk7UUFDRixNQUFNTixVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNsQixZQUFZLENBQUMsVUFBVSxFQUFFO1VBQUVOLFFBQVE7VUFBRXlCLEtBQUssRUFBRUs7UUFBSyxDQUFFLENBQUM7UUFDbEYsTUFBTSxJQUFJLENBQUN6QixhQUFhLENBQUNxQixJQUFJLENBQUNHLElBQUksQ0FBQ1AsS0FBSyxFQUFFLDJCQUEyQixFQUFFRSxVQUFVLENBQUM7TUFDcEYsQ0FBQyxDQUFDLE9BQU9QLEtBQUssRUFBRTtRQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyxxQ0FBcUMsRUFBRUEsS0FBSyxDQUFDO1FBQzNELE1BQU0sSUFBSW5CLGdCQUFBLENBQUFxQixhQUFhLENBQUNRLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQztNQUNoRTtJQUNGLENBQUM7OztBQTJCSEksT0FBQSxDQUFBckIsT0FBQSxHQUFlUCxRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["handlebars_1","__importDefault","require","path_1","response_error_1","promises_1","APP_NAME","process","env","SendMail","constructor","emailProvider","loadTemplate","templateName","data","templatePath","default","resolve","__dirname","html","readFile","template","compile","error","console","ResponseError","NotFound","sendAccountRegister","email","verifyCode","htmlToSend","TOKEN","send","InternalServer","sendForgetPassToken","user","token","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/helper/send_email.ts"],"sourcesContent":["import handlebars from \"handlebars\";\r\nimport path from \"path\";\r\nimport { EmailProvider } from \"../config/email\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\nimport { User } from \"../types/user\";\r\nimport { readHTMLFile } from \"./file\";\r\nimport fs from \"fs/promises\";\r\n\r\nconst { APP_NAME } = process.env;\r\n\r\nclass SendMail {\r\n  private emailProvider: EmailProvider;\r\n\r\n  constructor(emailProvider: EmailProvider) {\r\n    this.emailProvider = emailProvider;\r\n  }\r\n  private async loadTemplate(\r\n    templateName: string,\r\n    data: object\r\n  ): Promise<string> {\r\n    try {\r\n      const templatePath = path.resolve(\r\n        __dirname,\r\n        `../../public/template/email/${templateName}.html`\r\n      );\r\n      const html = await fs.readFile(templatePath, \"utf8\");\r\n      const template = handlebars.compile(html);\r\n      return template(data);\r\n    } catch (error) {\r\n      console.error(`Error loading email template (${templateName}):`, error);\r\n      throw new ResponseError.NotFound(\"Email template not found\");\r\n    }\r\n  }\r\n\r\n  public async sendAccountRegister(email: string, verifyCode: string) {\r\n    try {\r\n      const htmlToSend = await this.loadTemplate(\"emailverify\", { APP_NAME, TOKEN: verifyCode });\r\n      await this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\r\n    } catch (error) {\r\n      console.error(\"Error sending registration email:\", error);\r\n      throw new ResponseError.InternalServer(\"Failed to send email\");\r\n    }\r\n  }\r\n\r\n  // public static async AccountRegister(formData: any) {\r\n  //   try {\r\n  //     const { email, verify_code: TOKEN } = formData;\r\n  //     const subject = \"Ali Doctor Registration\";\r\n  //     const templatePath = path.resolve(\r\n  //       __dirname,\r\n  //       \"../../public/template/email/emailverify.html\"\r\n  //     );\r\n\r\n  //     // Read email template using async/await\r\n  //     const html = await fs.readFile(templatePath, \"utf8\");\r\n  //     const template = handlebars.compile(html);\r\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\r\n\r\n  //     // Send email\r\n  //     await this.emailProvider.send(email, subject, htmlToSend);\r\n  //   } catch (error) {\r\n  //     console.error(\"Error in AccountRegister:\", error);\r\n  //     throw new ResponseError.NotFound(\"Email template not found\");\r\n  //   }\r\n\r\n  //   // const { email } = formData\r\n  //   // const TOKEN = formData.verify_code\r\n  //   // const pathTemplate = path.resolve(\r\n  //   //   __dirname,\r\n  //   //   `../../public/template/email/emailverify.html`\r\n  //   // )\r\n\r\n  //   // const subject = 'Ali Doctor Registration'\r\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\r\n  //   // const dataTemplate = { APP_NAME, TOKEN }\r\n  //   // const Email = new EmailProvider()\r\n\r\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\r\n  //   //   if (error) {\r\n  //   //     throw new ResponseError.NotFound('email template not found')\r\n  //   //   }\r\n\r\n  //   //   const template = handlebars.compile(html)\r\n  //   //   const htmlToSend = template(dataTemplate)\r\n\r\n  //   //   Email.send(email, subject, htmlToSend)\r\n  //   // })\r\n  // }\r\n\r\n\r\n  public async sendForgetPassToken(user: User, token: string) {\r\n    try {\r\n      const htmlToSend = await this.loadTemplate(\"register\", { APP_NAME, TOKEN: token });\r\n      await this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\r\n    } catch (error) {\r\n      console.error(\"Error sending password reset email:\", error);\r\n      throw new ResponseError.InternalServer(\"Failed to send email\");\r\n    }\r\n  }\r\n  // public static forgetPassToken(formData: User, token: string) {\r\n  //   const { email } = formData;\r\n  //   const TOKEN = token;\r\n  //   const pathTemplate = path.resolve(\r\n  //     __dirname,\r\n  //     `../../public/templates/emails/register.html`\r\n  //   );\r\n\r\n  //   const subject = \"Yours Doctor Registeration\";\r\n  //   // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\r\n  //   const dataTemplate = { APP_NAME, TOKEN };\r\n  //   const Email = new EmailProvider();\r\n\r\n  //   readHTMLFile(pathTemplate, (error: Error, html: any) => {\r\n  //     if (error) {\r\n  //       throw new ResponseError.NotFound(\"email template not found\");\r\n  //     }\r\n\r\n  //     const template = handlebars.compile(html);\r\n  //     const htmlToSend = template(dataTemplate);\r\n\r\n  //     Email.send(email, subject, htmlToSend);\r\n  //   });\r\n  // }\r\n}\r\n\r\nexport default SendMail;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,MAAAE,gBAAA,GAAAF,OAAA;AAGA,MAAAG,UAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEA,MAAM;EAAEI;AAAQ,CAAE,GAAGC,OAAO,CAACC,GAAG;AAEhC,MAAMC,QAAQ;EAGZC,YAAYC,aAA4B;IACtC,IAAI,CAACA,aAAa,GAAGA,aAAa;EACpC;EACcC,YAAYA,CACxBC,YAAoB,EACpBC,IAAY;;MAEZ,IAAI;QACF,MAAMC,YAAY,GAAGZ,MAAA,CAAAa,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,+BAA+BL,YAAY,OAAO,CACnD;QACD,MAAMM,IAAI,GAAG,MAAMd,UAAA,CAAAW,OAAE,CAACI,QAAQ,CAACL,YAAY,EAAE,MAAM,CAAC;QACpD,MAAMM,QAAQ,GAAGrB,YAAA,CAAAgB,OAAU,CAACM,OAAO,CAACH,IAAI,CAAC;QACzC,OAAOE,QAAQ,CAACP,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiCV,YAAY,IAAI,EAAEU,KAAK,CAAC;QACvE,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACC,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;IACF,CAAC;;EAEYC,mBAAmBA,CAACC,KAAa,EAAEC,UAAkB;;MAChE,IAAI;QACF,MAAMC,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,aAAa,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEF;QAAU,CAAE,CAAC;QAC1F,MAAM,IAAI,CAAClB,aAAa,CAACqB,IAAI,CAACJ,KAAK,EAAE,yBAAyB,EAAEE,UAAU,CAAC;MAC7E,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAGaC,mBAAmBA,CAACC,IAAU,EAAEC,KAAa;;MACxD,IAAI;QACF,MAAMN,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,UAAU,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEK;QAAK,CAAE,CAAC;QAClF,MAAM,IAAI,CAACzB,aAAa,CAACqB,IAAI,CAACG,IAAI,CAACP,KAAK,EAAE,2BAA2B,EAAEE,UAAU,CAAC;MACpF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;QAC3D,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;;AA2BHI,OAAA,CAAArB,OAAA,GAAeP,QAAQ","ignoreList":[]}},"mtime":1741655050590},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PatientService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst patients_db_1 = require(\"./patients.db\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst email_1 = require(\"../../config/email\");\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  // ****\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, patients_db_1.checkExistPatient)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, patients_db_1.registerPatient)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n  // ****\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addFavorite(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, patients_db_1.addFavorite)(formData.patient_id, formData.doctor_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PatientService = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImpzb253ZWJ0b2tlbl8xIiwiX19pbXBvcnREZWZhdWx0IiwibXNfMSIsInBhdGllbnRzX2RiXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiY29tbW9uXzEiLCJzZW5kX2VtYWlsXzEiLCJlbWFpbF8xIiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiZXhwaXJlc0luIiwidGVzdCIsIk1hdGgiLCJmbG9vciIsImRlZmF1bHQiLCJQYXRpZW50U2VydmljZSIsImdldFBhdGllbnRzIiwiZGF0YSIsIm1lc3NhZ2UiLCJwYXRpZW50RGV0aWFsIiwiaWQiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tFeGlzdE1vYmlsZSIsIm1vYmlsZSIsImNoZWNrUGhvbmVOdW1iZXJFeGlzdHMiLCJyZWdpc3RlclBhdGllbnQiLCJmb3JtRGF0YSIsImVtYWlsRXhpc3RzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJlbWFpbCIsImNvbnNvbGUiLCJlcnJvciIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0IiwidmVyaWZpY2F0aW9uQ29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInZlcmlmeV9jb2RlIiwidG9rZW5WZXJpZnkiLCJzaWduIiwidG9rZW5fdmVyaWZ5IiwiY2xpbmljRGF0YSIsImVtYWlsU2VydmljZSIsIkVtYWlsUHJvdmlkZXIiLCJzZW5kQWNjb3VudFJlZ2lzdGVyIiwibmV3VXNlciIsInVwZGF0ZVBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwiYWRkRmF2b3JpdGUiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwYXRpZW50c1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBhZGRQYXRpZW50LFxyXG4gIGNoZWNrUGhvbmVOdW1iZXJFeGlzdHMsXHJcbiAgZGVsZXRlUGF0aWVudCxcclxuICBnZXRQYXRpZW50cyxcclxuICBwYXRpZW50RGV0YWlsLFxyXG4gIHVwZGF0ZVBhdGllbnQsXHJcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5pbXBvcnQgeyBQYXRpZW50RFRPIH0gZnJvbSBcIi4uLy4uL21vZGVscy9wYXRpZW50c1wiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgeyBhZGRGYXZvcml0ZSwgY2hlY2tFeGlzdFBhdGllbnQsIHJlZ2lzdGVyUGF0aWVudCB9IGZyb20gXCIuL3BhdGllbnRzLmRiXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcbmltcG9ydCB7IEVtYWlsUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2VtYWlsXCI7XHJcblxyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyBEZWZhdWx0IDEgZGF5XHJcbmNvbnN0IEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4gfHwgXCJ5b3VyLXNlY3JldC1rZXlcIjtcclxuXHJcbi8vIENoZWNrIGlmIGV4cGlyYXRpb24gbmVlZHMgY29udmVyc2lvblxyXG5jb25zdCBleHBpcmVzSW4gPVxyXG4gIHR5cGVvZiBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPT09IFwic3RyaW5nXCIgJiZcclxuICAvXlswLTldK1tzbWhkd3ldJC9pLnRlc3QoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKVxyXG4gICAgPyBNYXRoLmZsb29yKG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwKVxyXG4gICAgOiBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQ7XHJcblxyXG5cclxuICAgIFxyXG5leHBvcnQgY2xhc3MgUGF0aWVudFNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UGF0aWVudHMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UGF0aWVudHMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBva2AsIGRhdGEgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBwYXRpZW50RGV0aWFsKGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwYXRpZW50RGV0YWlsKGlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrRXhpc3RNb2JpbGUobW9iaWxlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyAqKioqXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWdpc3RlclBhdGllbnQoZm9ybURhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBjaGVja0V4aXN0UGF0aWVudChmb3JtRGF0YS5lbWFpbCk7XHJcblxyXG4gICAgaWYgKGVtYWlsRXhpc3RzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYCR7Zm9ybURhdGEuZW1haWx9IEVtYWlsIGFscmVhZHkgZXhpc3RzLCB0aHJvd2luZyBlcnJvci4uLmBcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChgJHtmb3JtRGF0YS5lbWFpbH0gaXMgYWxyZWFkeSBleGlzdC5gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQ29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgZm9ybURhdGEudmVyaWZ5X2NvZGUgPSB2ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICB7IGVtYWlsOiBmb3JtRGF0YS5lbWFpbCB9LFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW4gfVxyXG4gICAgKTtcclxuICAgIGZvcm1EYXRhLnRva2VuX3ZlcmlmeSA9IHRva2VuVmVyaWZ5O1xyXG4gICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgIFxyXG4gICAgY29uc3QgY2xpbmljRGF0YSA9IGF3YWl0IHJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBpZiAoIWNsaW5pY0RhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkZhaWxlZCB0byByZWdpc3RlciBjbGluaWMuXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZW1haWxTZXJ2aWNlID0gbmV3IFNlbmRNYWlsKG5ldyBFbWFpbFByb3ZpZGVyKCkpO1xyXG4gICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRBY2NvdW50UmVnaXN0ZXIoZm9ybURhdGEuZW1haWwsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IFwiQ2xpbmljIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5LiBQbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwuXCIsXHJcbiAgICAgIG5ld1VzZXI6IHtcclxuICAgICAgICBpZDogY2xpbmljRGF0YS5pZCxcclxuICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuICAvLyAqKioqXHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlUGF0aWVudChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlUGF0aWVudChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBhZGRGYXZvcml0ZShmb3JtRGF0YToge1xyXG4gICAgcGF0aWVudF9pZDogbnVtYmVyO1xyXG4gICAgZG9jdG9yX2lkOiBudW1iZXI7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZEZhdm9yaXRlKGZvcm1EYXRhLnBhdGllbnRfaWQsIGZvcm1EYXRhLmRvY3Rvcl9pZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVNBLE1BQUFDLGNBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxnQkFBQSxHQUFBTCxPQUFBO0FBQ0EsTUFBQU0sUUFBQSxHQUFBTixPQUFBO0FBQ0EsTUFBQU8sWUFBQSxHQUFBTCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBUSxPQUFBLEdBQUFSLE9BQUE7QUFFQSxNQUFNUyx3QkFBd0IsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLHdCQUF3QixJQUFJLElBQUksQ0FBQyxDQUFDO0FBQy9FLE1BQU1HLHVCQUF1QixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCLElBQUksaUJBQWlCO0FBRXhGO0FBQ0EsTUFBTUMsU0FBUyxHQUNiLE9BQU9KLHdCQUF3QixLQUFLLFFBQVEsSUFDNUMsbUJBQW1CLENBQUNLLElBQUksQ0FBQ0wsd0JBQXdCLENBQUMsR0FDOUNNLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUFiLElBQUEsQ0FBQWMsT0FBRSxFQUFDUix3QkFBd0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUMvQ0Esd0JBQXdCO0FBSTlCLE1BQWFTLGNB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","map":{"version":3,"names":["db_1","require","jsonwebtoken_1","__importDefault","ms_1","patients_db_1","response_error_1","common_1","send_email_1","email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","PatientService","getPatients","data","message","patientDetial","id","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","emailExists","checkExistPatient","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","newUser","updatePatient","deletePatient","addFavorite","patient_id","doctor_id","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { addFavorite, checkExistPatient, registerPatient } from \"./patients.db\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { EmailProvider } from \"../../config/email\";\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n\r\n\r\n    \r\nexport class PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(id: number) {\r\n    const data = await patientDetail(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  // ****\r\n  public static async registerPatient(formData: any) {\r\n    const emailExists = await checkExistPatient(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerPatient(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n  // ****\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addFavorite(formData: {\r\n    patient_id: number;\r\n    doctor_id: number;\r\n  }) {\r\n    const data = await addFavorite(formData.patient_id, formData.doctor_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUser = createUser;\nexports.getUserByGoogleId = getUserByGoogleId;\nexports.getAdmins = getAdmins;\nexports.getNavItems = getNavItems;\nexports.updateAppointment = updateAppointment;\nexports.deleteAppointment = deleteAppointment;\nexports.getPatients = getPatients;\nexports.patientDetail = patientDetail;\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nexports.addPatient = addPatient;\nexports.deletePatient = deletePatient;\nexports.updatePatient = updatePatient;\nexports.getMedicine = getMedicine;\nexports.getDisease = getDisease;\nexports.getDiseaseSubcategories = getDiseaseSubcategories;\nexports.updateIsFavorite = updateIsFavorite;\nexports.addPrescriptionMedicine = addPrescriptionMedicine;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = require(\"../controller/user/schema\");\nconst mysql_1 = require(\"./mysql\");\nconst schema_2 = require(\"../controller/patients/schema\");\nconst response_error_1 = require(\"../modules/error/response_error\");\n// ****** Auth ******\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.createSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [data.firstName, data.lastName, data.userName, data.email, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nfunction getUserByGoogleId(googleId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`\n    SELECT * FROM${mysql_1.coreSchema}.users\n    WHERE google_id=?`, {\n      values: [googleId]\n    });\n    if (user.length < 1) return null;else return user[0];\n  });\n}\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const getManu = yield (0, mysql_1.query)(`SELECT \n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\n      FROM ${mysql_1.coreSchema}.menu m\n      LEFT JOIN ${mysql_1.coreSchema}.submenu s ON m.id = s.menu_id\n    ORDER BY m.id, s.id`);\n      const menuMap = new Map();\n      const iconMap = {\n        \"Appointments\": \"appointment-icon\",\n        \"Dashboard\": \"dashboard-icon\",\n        \"Doctors\": \"doctor-icon\",\n        \"Services\": \"services-icon\",\n        \"Patients\": \"patient-icon\",\n        \"Prescriptions\": \"prescriptions-icon\",\n        \"Billing & Payments\": \"billing-icon\",\n        \"Reports & Analytics\": \"report-icon\",\n        \"Settings\": \"settings-icon\",\n        \"Staff Management\": \"staff-icon\",\n        \"Inventory\": \"inventory-icon\"\n      };\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            id: row.menu_id,\n            icon: iconMap[row.menu_name] || 'default-icon',\n            name: row.menu_name,\n            path: row.menu_path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            id: row.submenu_id,\n            name: row.submenu_name,\n            path: row.submenu_url,\n            icon: row.submenu_icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (e) {\n      console.log(e);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // const result = await query<RowDataPacket[]>(\n    //   `UPDATE ${coreSchema}.appointments\n    //   SET date = ?, updated_at = ?\n    //   WHERE event_id = ?`,\n    //   {\n    //     values: [data.date, new Date(), data.event_id],\n    //   }\n    // );\n    // if (result) {\n    //   return result as IAppointment[];\n    // }\n  });\n}\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\n// ****** Patients ******\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT p.first_name,p.last_name,p.first_name,p.email,p.date_of_birth,p.user_name,\n         p.phone,p.gender,p.address,p.first_name,p.national_code\n     FROM ${mysql_1.coreSchema}.patients p\n  `);\n    return patients;\n  });\n}\nfunction patientDetail(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nfunction addPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_2.patientSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patients\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.first_name, data.last_name, data.phone, data.email, hashedPassword, data.token_verify, data.verify_code, new Date(), new Date()]\n    });\n    return result;\n  });\n}\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET patientName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.patientName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nfunction getMedicine() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.medications\n    `);\n    return result;\n  });\n}\nfunction getDisease() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases`);\n    return result;\n  });\n}\nfunction getDiseaseSubcategories(disease_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases d \n      LEFT JOIN ${mysql_1.coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\n    WHERE d.disease_id = ?`, {\n      values: [disease_id]\n    });\n    return result;\n  });\n}\nfunction updateIsFavorite(medication_id, isFavorite) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`, {\n      values: [isFavorite, medication_id]\n    });\n    return result;\n  });\n}\nfunction addPrescriptionMedicine(formData, medicine_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    INSERT INTO ${mysql_1.coreSchema}.prescription_medicine\n     (\n      id,\n      medicine_id,\n      prescribed_date\n    ) VALUES (?, ?, ?)\n    `, {\n      values: [formData.id, medicine_id, formData.prescribed_date]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY3JlYXRlVXNlciIsImdldFVzZXJCeUdvb2dsZUlkIiwiZ2V0QWRtaW5zIiwiZ2V0TmF2SXRlbXMiLCJ1cGRhdGVBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50IiwiZ2V0UGF0aWVudHMiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tQaG9uZU51bWJlckV4aXN0cyIsImFkZFBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwidXBkYXRlUGF0aWVudCIsImdldE1lZGljaW5lIiwiZ2V0RGlzZWFzZSIsImdldERpc2Vhc2VTdWJjYXRlZ29yaWVzIiwidXBkYXRlSXNGYXZvcml0ZSIsImFkZFByZXNjcmlwdGlvbk1lZGljaW5lIiwiYmNyeXB0XzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwidXVpZF8xIiwic2NoZW1hXzEiLCJteXNxbF8xIiwic2NoZW1hXzIiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiZmRQYXNzd29yZCIsInZhbGlkUGFzc3dvcmQiLCJjcmVhdGVTY2hlbWEiLCJ2YWxpZGF0ZVN5bmNBdCIsInNhbHRSb3VuZHMiLCJoYXNoIiwiZGVmYXVsdCIsImhhc2hTeW5jIiwibmV3SWQiLCJ2NCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidXNlck5hbWUiLCJlbWFpbCIsInZlcmlmeV9jb2RlIiwiRGF0ZSIsInRva2VuVmVyaWZ5IiwiZ29vZ2xlSWQiLCJ1c2VyIiwibGVuZ3RoIiwidXNlckFkbWluIiwiZ2V0TWFudSIsIm1lbnVNYXAiLCJNYXAiLCJpY29uTWFwIiwiZm9yRWFjaCIsInJvdyIsIm1lbnVJZCIsIm1lbnVfaWQiLCJoYXMiLCJzZXQiLCJpZCIsImljb24iLCJtZW51X25hbWUiLCJuYW1lIiwicGF0aCIsIm1lbnVfcGF0aCIsInN1Ym1lbnVzIiwic3VibWVudV9pZCIsInN1Ym1lbnUiLCJzdWJtZW51X25hbWUiLCJzdWJtZW51X3VybCIsInN1Ym1lbnVfaWNvbiIsIl9hIiwiZ2V0IiwicHVzaCIsIkFycmF5IiwiZnJvbSIsImUiLCJjb25zb2xlIiwibG9nIiwiUmVzcG9uc2VFcnJvciIsIkludGVybmFsU2VydmVyIiwiZXZlbnRfaWQiLCJwYXRpZW50cyIsIm1vYmlsZSIsInBhdGllbnRTY2hlbWEiLCJoYXNoZWRQYXNzd29yZCIsImVycm9yIiwiVW5hdXRob3JpemVkIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInBob25lIiwidG9rZW5fdmVyaWZ5IiwicGF0aWVudERhdGEiLCJwYXRpZW50TmFtZSIsImdlbmRlciIsImRhdGVPZkJpcnRoIiwiYWdlIiwiYmxvb2RQcmVzc3VyZSIsImluanVyeSIsImJsb29kR3JvdXAiLCJhZGRyZXNzIiwiZGlzZWFzZV9pZCIsIm1lZGljYXRpb25faWQiLCJpc0Zhdm9yaXRlIiwiZm9ybURhdGEiLCJtZWRpY2luZV9pZCIsInByZXNjcmliZWRfZGF0ZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxiaW5cXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9iaW4vZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNjaGVtYSB9IGZyb20gXCIuLi9jb250cm9sbGVyL3VzZXIvc2NoZW1hXCI7XHJcbmltcG9ydCB7IEFkbWluRFRPIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiO1xyXG5pbXBvcnQgeyBQYXRpZW50RFRPIH0gZnJvbSBcIi4uL21vZGVscy9wYXRpZW50c1wiO1xyXG5pbXBvcnQgeyBQcmVzY3JpcHRpb25NZWRpY2luZSB9IGZyb20gXCIuLi9tb2RlbHMvcHJlc2NyaXB0aW9uX21lZGljaW5lXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgTWVudSwgU3VibWVudSB9IGZyb20gXCIuLi90eXBlcy9uYXZJdGVtXCI7XHJcbmltcG9ydCB7IENyZWF0ZVVzZXIsIFVzZXIgfSBmcm9tIFwiLi4vdHlwZXMvdXNlclwiO1xyXG5pbXBvcnQgeyBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hLCBxdWVyeSB9IGZyb20gXCIuL215c3FsXCI7XHJcbmltcG9ydCB7IHBhdGllbnRTY2hlbWEgfSBmcm9tIFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9zY2hlbWFcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcblxyXG4vLyAqKioqKiogQXV0aCAqKioqKipcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKGRhdGE6IENyZWF0ZVVzZXIpIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlU2NoZW1hLnZhbGlkYXRlU3luY0F0KFxyXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcclxuICAgIGZkUGFzc3dvcmRcclxuICApO1xyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoID0gYmNyeXB0Lmhhc2hTeW5jKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIChmaXJzdE5hbWUsbGFzdE5hbWUsdXNlck5hbWUsZW1haWwscGFzc3dvcmQsc2lnbnVwU3RhdHVzLHZlcmlmeV9jb2RlLGNyZWF0ZWRBdCx1cGRhdGVkQXQsdG9rZW5WZXJpZnkpXHJcbiAgICBWQUxVRVMoPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtcclxuICAgICAgICBkYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICBkYXRhLmxhc3ROYW1lLFxyXG4gICAgICAgIGRhdGEudXNlck5hbWUsXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBoYXNoLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgZGF0YS50b2tlblZlcmlmeSxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlHb29nbGVJZChnb29nbGVJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgKiBGUk9NJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgV0hFUkUgZ29vZ2xlX2lkPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtnb29nbGVJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAodXNlci5sZW5ndGggPCAxKSByZXR1cm4gbnVsbDtcclxuICBlbHNlIHJldHVybiB1c2VyWzBdIGFzIFVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBZG1pbnMoKSB7XHJcbiAgY29uc3QgdXNlckFkbWluID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uYWRtaW5cclxuICAgIGApO1xyXG4gIHJldHVybiB1c2VyQWRtaW4gYXMgQWRtaW5EVE9bXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBnZXRNYW51ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCBcclxuICAgICAgbS5pZCBBUyBtZW51X2lkLCBtLm5hbWUgQVMgbWVudV9uYW1lLCBtLmljb24gQVMgbWVudV9pY29uLCBtLnJvdXRlIEFTIG1lbnVfcGF0aCxcclxuICAgICAgcy5pZCBBUyBzdWJtZW51X2lkLCBzLm5hbWUgQVMgc3VibWVudV9uYW1lLCBzLnJvdXRlIEFTIHN1Ym1lbnVfdXJsXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5tZW51IG1cclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uc3VibWVudSBzIE9OIG0uaWQgPSBzLm1lbnVfaWRcclxuICAgIE9SREVSIEJZIG0uaWQsIHMuaWRgXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IG1lbnVNYXAgPSBuZXcgTWFwPG51bWJlciwgTWVudT4oKTtcclxuXHJcbiAgICBjb25zdCBpY29uTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgICBcIkFwcG9pbnRtZW50c1wiOiBcImFwcG9pbnRtZW50LWljb25cIixcclxuICAgICAgXCJEYXNoYm9hcmRcIjogXCJkYXNoYm9hcmQtaWNvblwiLFxyXG4gICAgICBcIkRvY3RvcnNcIjogXCJkb2N0b3ItaWNvblwiLFxyXG4gICAgICBcIlNlcnZpY2VzXCI6IFwic2VydmljZXMtaWNvblwiLFxyXG4gICAgICBcIlBhdGllbnRzXCI6IFwicGF0aWVudC1pY29uXCIsXHJcbiAgICAgIFwiUHJlc2NyaXB0aW9uc1wiOiBcInByZXNjcmlwdGlvbnMtaWNvblwiLFxyXG4gICAgICBcIkJpbGxpbmcgJiBQYXltZW50c1wiOiBcImJpbGxpbmctaWNvblwiLFxyXG4gICAgICBcIlJlcG9ydHMgJiBBbmFseXRpY3NcIjogXCJyZXBvcnQtaWNvblwiLFxyXG4gICAgICBcIlNldHRpbmdzXCI6IFwic2V0dGluZ3MtaWNvblwiLFxyXG4gICAgICBcIlN0YWZmIE1hbmFnZW1lbnRcIjogXCJzdGFmZi1pY29uXCIsXHJcbiAgICAgIFwiSW52ZW50b3J5XCI6IFwiaW52ZW50b3J5LWljb25cIixcclxuICAgIH07XHJcbiAgICBnZXRNYW51LmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBjb25zdCBtZW51SWQgPSByb3cubWVudV9pZDtcclxuICAgICAgaWYgKCFtZW51TWFwLmhhcyhtZW51SWQpKSB7XHJcbiAgICAgICAgbWVudU1hcC5zZXQobWVudUlkLCB7XHJcbiAgICAgICAgICBpZDogcm93Lm1lbnVfaWQsXHJcbiAgICAgICAgICBpY29uOiBpY29uTWFwW3Jvdy5tZW51X25hbWVdIHx8ICdkZWZhdWx0LWljb24nLFxyXG4gICAgICAgICAgbmFtZTogcm93Lm1lbnVfbmFtZSxcclxuICAgICAgICAgIHBhdGg6IHJvdy5tZW51X3BhdGgsXHJcbiAgICAgICAgICBzdWJtZW51czogW10sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJvdy5zdWJtZW51X2lkKSB7XHJcbiAgICAgICAgY29uc3Qgc3VibWVudTogU3VibWVudSA9IHtcclxuICAgICAgICAgIGlkOiByb3cuc3VibWVudV9pZCxcclxuICAgICAgICAgIG5hbWU6IHJvdy5zdWJtZW51X25hbWUsXHJcbiAgICAgICAgICBwYXRoOiByb3cuc3VibWVudV91cmwsXHJcbiAgICAgICAgICBpY29uOiByb3cuc3VibWVudV9pY29uLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbWVudU1hcC5nZXQobWVudUlkKT8uc3VibWVudXMucHVzaChzdWJtZW51KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShtZW51TWFwLnZhbHVlcygpKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIilcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50KFxyXG4gIGRhdGE6IElBcHBvaW50bWVudFxyXG4pIHtcclxuICAvLyBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gIC8vICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmFwcG9pbnRtZW50c1xyXG4gIC8vICAgU0VUIGRhdGUgPSA/LCB1cGRhdGVkX2F0ID0gP1xyXG4gIC8vICAgV0hFUkUgZXZlbnRfaWQgPSA/YCxcclxuICAvLyAgIHtcclxuICAvLyAgICAgdmFsdWVzOiBbZGF0YS5kYXRlLCBuZXcgRGF0ZSgpLCBkYXRhLmV2ZW50X2lkXSxcclxuICAvLyAgIH1cclxuICAvLyApO1xyXG4gIC8vIGlmIChyZXN1bHQpIHtcclxuICAvLyAgIHJldHVybiByZXN1bHQgYXMgSUFwcG9pbnRtZW50W107XHJcbiAgLy8gfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwb2ludG1lbnQoZXZlbnRfaWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgREVMRVRFIEZST00gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHNcclxuICAgICAgV0hFUkUgZXZlbnRfaWQ9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2V2ZW50X2lkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLy8gKioqKioqIFBhdGllbnRzICoqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudHMoKSB7XHJcbiAgY29uc3QgcGF0aWVudHMgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICBTRUxFQ1QgcC5maXJzdF9uYW1lLHAubGFzdF9uYW1lLHAuZmlyc3RfbmFtZSxwLmVtYWlsLHAuZGF0ZV9vZl9iaXJ0aCxwLnVzZXJfbmFtZSxcclxuICAgICAgICAgcC5waG9uZSxwLmdlbmRlcixwLmFkZHJlc3MscC5maXJzdF9uYW1lLHAubmF0aW9uYWxfY29kZVxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50cyBwXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHBhdGllbnRzO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXRpZW50RGV0YWlsKGlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgV0hFUkUgaWQ9P2AsXHJcbiAgICB7IHZhbHVlczogW2lkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KGRhdGE6IFBhdGllbnREVE8pIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gcGF0aWVudFNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiUGFzc3dvcmQgaXMgaW52YWxpZFwiKTtcclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICAgIChpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxwaG9uZSxlbWFpbCxwYXNzd29yZCx0b2tlbl92ZXJpZnksdmVyaWZ5X2NvZGUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIG5ld0lkLFxyXG4gICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQYXRpZW50KGlkOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICBXSEVSRSBpZCA9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQocGF0aWVudERhdGE6IFBhdGllbnREVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBTRVQgcGF0aWVudE5hbWUgPSA/LFxyXG4gICAgICAgICAgZ2VuZGVyID0gPyxcclxuICAgICAgICAgIG1vYmlsZSA9ID8sXHJcbiAgICAgICAgICBkYXRlT2ZCaXJ0aCA9ID8sXHJcbiAgICAgICAgICBhZ2UgPSA/LFxyXG4gICAgICAgICAgZW1haWwgPSA/LFxyXG4gICAgICAgICAgYmxvb2RQcmVzc3VyZSA9ID8sXHJcbiAgICAgICAgICBpbmp1cnkgPSA/LFxyXG4gICAgICAgICAgYmxvb2RHcm91cCA9ID8sXHJcbiAgICAgICAgICBhZGRyZXNzID0gP1xyXG4gICAgICBXSEVSRSBpZCA9ID9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgcGF0aWVudERhdGEucGF0aWVudE5hbWUsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZ2VuZGVyLFxyXG4gICAgICAgIHBhdGllbnREYXRhLm1vYmlsZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZ2UsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZW1haWwsXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RQcmVzc3VyZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5pbmp1cnksXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RHcm91cCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZGRyZXNzLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmlkLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lZGljaW5lKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lm1lZGljYXRpb25zXHJcbiAgICBgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGlzZWFzZSgpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kaXNlYXNlc2BcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kaXNlYXNlcyBkIFxyXG4gICAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5kaXNlYXNlX3N1YmNhdGVnb3JpZXMgZHMgT04gZC5kaXNlYXNlX2lkID0gZHMuZGlzZWFzZV9pZFxyXG4gICAgV0hFUkUgZC5kaXNlYXNlX2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2Rpc2Vhc2VfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUlzRmF2b3JpdGUoXHJcbiAgbWVkaWNhdGlvbl9pZDogc3RyaW5nLFxyXG4gIGlzRmF2b3JpdGU6IGJvb2xlYW5cclxuKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgVVBEQVRFICAke2NvcmVTY2hlbWF9Lm1lZGljYXRpb25zIFNFVCBpc0Zhdm9yaXRlID0gPyBXSEVSRSBtZWRpY2F0aW9uX2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lzRmF2b3JpdGUsIG1lZGljYXRpb25faWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByZXNjcmlwdGlvbk1lZGljaW5lKFxyXG4gIGZvcm1EYXRhOiBQcmVzY3JpcHRpb25NZWRpY2luZSxcclxuICBtZWRpY2luZV9pZDogbnVtYmVyXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucHJlc2NyaXB0aW9uX21lZGljaW5lXHJcbiAgICAgKFxyXG4gICAgICBpZCxcclxuICAgICAgbWVkaWNpbmVfaWQsXHJcbiAgICAgIHByZXNjcmliZWRfZGF0ZVxyXG4gICAgKSBWQUxVRVMgKD8sID8sID8pXHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtmb3JtRGF0YS5pZCwgbWVkaWNpbmVfaWQsIGZvcm1EYXRhLnByZXNjcmliZWRfZGF0ZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWVBQSxPQUFBLENBQUFDLFVBQUEsR0FBQUEsVUFBQTtBQWtDQUQsT0FBQSxDQUFBRSxpQkFBQSxHQUFBQSxpQkFBQTtBQWFBRixPQUFBLENBQUFHLFNBQUEsR0FBQUEsU0FBQTtBQU9BSCxPQUFBLENBQUFJLFdBQUEsR0FBQUEsV0FBQTtBQXdEQUosT0FBQSxDQUFBSyxpQkFBQSxHQUFBQSxpQkFBQTtBQWdCQUwsT0FBQSxDQUFBTSxpQkFBQSxHQUFBQSxpQkFBQTtBQVdBTixPQUFBLENBQUFPLFdBQUEsR0FBQUEsV0FBQTtBQVFBUCxPQUFBLENBQUFRLGFBQUEsR0FBQUEsYUFBQTtBQVFBUixPQUFBLENBQUFTLHNCQUFBLEdBQUFBLHNCQUFBO0FBWUFULE9BQUEsQ0FBQVUsVUFBQSxHQUFBQSxVQUFBO0FBb0NBVixPQUFBLENBQUFXLGFBQUEsR0FBQUEsYUFBQTtBQVVBWCxPQUFBLENBQUFZLGFBQUEsR0FBQUEsYUFBQTtBQW1DQVosT0FBQSxDQUFBYSxXQUFBLEdBQUFBLFdBQUE7QUFPQWIsT0FBQSxDQUFBYyxVQUFBLEdBQUFBLFVBQUE7QUFPQWQsT0FBQSxDQUFBZSx1QkFBQSxHQUFBQSx1QkFBQTtBQVlBZixPQUFBLENBQUFnQixnQkFBQSxHQUFBQSxnQkFBQTtBQWFBaEIsT0FBQSxDQUFBaUIsdUJBQUEsR0FBQUEsdUJBQUE7QUE1U0EsTUFBQUMsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFB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","map":{"version":3,"names":["exports","createUser","getUserByGoogleId","getAdmins","getNavItems","updateAppointment","deleteAppointment","getPatients","patientDetail","checkPhoneNumberExists","addPatient","deletePatient","updatePatient","getMedicine","getDisease","getDiseaseSubcategories","updateIsFavorite","addPrescriptionMedicine","bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","schema_2","response_error_1","data","password","confirmPassword","fdPassword","validPassword","createSchema","validateSyncAt","saltRounds","hash","default","hashSync","newId","v4","result","query","coreSchema","values","firstName","lastName","userName","email","verify_code","Date","tokenVerify","googleId","user","length","userAdmin","getManu","menuMap","Map","iconMap","forEach","row","menuId","menu_id","has","set","id","icon","menu_name","name","path","menu_path","submenus","submenu_id","submenu","submenu_name","submenu_url","submenu_icon","_a","get","push","Array","from","e","console","log","ResponseError","InternalServer","event_id","patients","mobile","patientSchema","hashedPassword","error","Unauthorized","first_name","last_name","phone","token_verify","patientData","patientName","gender","dateOfBirth","age","bloodPressure","injury","bloodGroup","address","disease_id","medication_id","isFavorite","formData","medicine_id","prescribed_date"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { createSchema } from \"../controller/user/schema\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { PrescriptionMedicine } from \"../models/prescription_medicine\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { patientSchema } from \"../controller/patients/schema\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\n\r\n// ****** Auth ******\r\n\r\nexport async function createUser(data: CreateUser) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = createSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.userName,\r\n        data.email,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getUserByGoogleId(googleId: string) {\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM${coreSchema}.users\r\n    WHERE google_id=?`,\r\n    {\r\n      values: [googleId],\r\n    }\r\n  );\r\n  if (user.length < 1) return null;\r\n  else return user[0] as User;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getNavItems() {\r\n  try {\r\n    const getManu = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\r\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\r\n      FROM ${coreSchema}.menu m\r\n      LEFT JOIN ${coreSchema}.submenu s ON m.id = s.menu_id\r\n    ORDER BY m.id, s.id`\r\n    );\r\n\r\n    const menuMap = new Map<number, Menu>();\r\n\r\n    const iconMap: { [key: string]: string } = {\r\n      \"Appointments\": \"appointment-icon\",\r\n      \"Dashboard\": \"dashboard-icon\",\r\n      \"Doctors\": \"doctor-icon\",\r\n      \"Services\": \"services-icon\",\r\n      \"Patients\": \"patient-icon\",\r\n      \"Prescriptions\": \"prescriptions-icon\",\r\n      \"Billing & Payments\": \"billing-icon\",\r\n      \"Reports & Analytics\": \"report-icon\",\r\n      \"Settings\": \"settings-icon\",\r\n      \"Staff Management\": \"staff-icon\",\r\n      \"Inventory\": \"inventory-icon\",\r\n    };\r\n    getManu.forEach((row) => {\r\n      const menuId = row.menu_id;\r\n      if (!menuMap.has(menuId)) {\r\n        menuMap.set(menuId, {\r\n          id: row.menu_id,\r\n          icon: iconMap[row.menu_name] || 'default-icon',\r\n          name: row.menu_name,\r\n          path: row.menu_path,\r\n          submenus: [],\r\n        });\r\n      }\r\n      if (row.submenu_id) {\r\n        const submenu: Submenu = {\r\n          id: row.submenu_id,\r\n          name: row.submenu_name,\r\n          path: row.submenu_url,\r\n          icon: row.submenu_icon,\r\n        };\r\n        menuMap.get(menuId)?.submenus.push(submenu);\r\n      }\r\n    });\r\n    return Array.from(menuMap.values());\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\")\r\n  }\r\n}\r\n\r\n\r\n\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n) {\r\n  // const result = await query<RowDataPacket[]>(\r\n  //   `UPDATE ${coreSchema}.appointments\r\n  //   SET date = ?, updated_at = ?\r\n  //   WHERE event_id = ?`,\r\n  //   {\r\n  //     values: [data.date, new Date(), data.event_id],\r\n  //   }\r\n  // );\r\n  // if (result) {\r\n  //   return result as IAppointment[];\r\n  // }\r\n}\r\n\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n// ****** Patients ******\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT p.first_name,p.last_name,p.first_name,p.email,p.date_of_birth,p.user_name,\r\n         p.phone,p.gender,p.address,p.first_name,p.national_code\r\n     FROM ${coreSchema}.patients p\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(id: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [id] }\r\n  );\r\n  return result;\r\n}\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addPatient(data: PatientDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = patientSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.patients\r\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.first_name,\r\n        data.last_name,\r\n        data.phone,\r\n        data.email,\r\n        hashedPassword,\r\n        data.token_verify,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET patientName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.patientName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getMedicine() {\r\n  const result = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.medications\r\n    `);\r\n  return result;\r\n}\r\n\r\nexport async function getDisease() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getDiseaseSubcategories(disease_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases d \r\n      LEFT JOIN ${coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\r\n    WHERE d.disease_id = ?`,\r\n    {\r\n      values: [disease_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateIsFavorite(\r\n  medication_id: string,\r\n  isFavorite: boolean\r\n) {\r\n  const result = await query<RowDataPacket>(\r\n    `UPDATE  ${coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`,\r\n    {\r\n      values: [isFavorite, medication_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function addPrescriptionMedicine(\r\n  formData: PrescriptionMedicine,\r\n  medicine_id: number\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    INSERT INTO ${coreSchema}.prescription_medicine\r\n     (\r\n      id,\r\n      medicine_id,\r\n      prescribed_date\r\n    ) VALUES (?, ?, ?)\r\n    `,\r\n    {\r\n      values: [formData.id, medicine_id, formData.prescribed_date],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050577},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.latestTemplatesSchema = exports.userRolesSchema = exports.createPasswordSchema = exports.createSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.createSchema = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\nexports.userRolesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.latestTemplatesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlzdE5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwibmlja05hbWUiLCJnZW5kZXIiLCJiaXJ0aERheSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJ1c2VyUm9sZXNTY2hlbWEiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXNTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGZpc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXN0TmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBsYXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdE5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbmlja05hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIm5pY2tOYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGdlbmRlcjogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZ2VuZGVyIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGJpcnRoRGF5OiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJiaXJ0aERheSBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lTnVtYmVyOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbnBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc3dvcmRTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5ld1Bhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJuZXdQYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgbGF0ZXN0VGVtcGxhdGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgY29uZmlybUVtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgLy8gaWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXIgaWQgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAucmVxdWlyZWQoXCJ2ZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKVxyXG4gICAgLm1pbig0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKVxyXG4gICAgLm1heCg0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tFbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkIVwiKSxcclxufSk7XHJcblxyXG5c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","map":{"version":3,"names":["yup","__importStar","require","exports","createSchema","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","userRolesSchema","userId","latestTemplatesSchema","confirmEmailSchema","verify_code","max","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const createSchema = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\npassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\nexport const userRolesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const latestTemplatesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const confirmEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.patientSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.patientSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInBhdGllbnRTY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsImZpcnN0X25hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3RfbmFtZSIsIm93bmVyX25hbWUiLCJlbWFpbCIsInBob25lIiwibnVsbGFibGUiLCJ0b2tlblZlcmlmeSIsInBhc3N3b3JkIiwibWluIiwib25lT2YiLCJyZWYiLCJjb25maXJtUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybUVtYWlsU2NoZW1hIiwidmVyaWZ5X2NvZGUiLCJsZW5ndGgiLCJjaGVja0VtYWlsU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9wYXRpZW50cy9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXRpZW50U2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXJzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXJzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxhc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG93bmVyX25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgcGhvbmU6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICBwYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuLy8gZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuLy8gICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAuZW1haWwoXCJJbnZhbGlkIGVtYWlsIGZvcm1hdFwiKVxyXG4gICAgLnJlcXVpcmVkKFwiRW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubGVuZ3RoKDQsIFwiVmVyaWZ5IGNvZGUgc2hvdWxkIGJlIDQgY2hhcmFjdGVyc1wiKVxyXG4gICAgLnJlcXVpcmVkKFwiVmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiksXHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGFBQWEsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzlDQyxVQUFVLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENB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","map":{"version":3,"names":["yup","__importStar","require","exports","patientSchema","object","shape","first_name","string","required","last_name","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/patients/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const patientSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,aAAa,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC9CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,UAAU,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACI,KAAK,CAAC,eAAe,CAAC,CAACH,QAAQ,CAAC,mBAAmB,CAAC;EACxEI,KAAK,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EAC9BC,WAAW,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EACpCE,QAAQ,EAAEhB,GAAG,CACVQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWhB,OAAA,CAAAkB,oBAAoB,GAAGrB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDgB,WAAW,EAAEtB,GAAG,CACbQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEahB,OAAA,CAAAoB,kBAAkB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDM,KAAK,EAAEZ,GAAG,CACPQ,MAAM,EAAE,CACRI,KAAK,CAAC,sBAAsB,CAAC,CAC7BH,QAAQ,CAAC,mBAAmB,CAAC;EAChCe,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRiB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ChB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAuB,gBAAgB,GAAG1B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDM,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\patients.db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistPatient = checkExistPatient;\nexports.registerPatient = registerPatient;\nexports.addFavorite = addFavorite;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistPatient(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if patient exists:\", error);\n      throw new Error(\"An error occurred while checking patient existence.\");\n    }\n  });\n}\nfunction registerPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction addFavorite(patient_id, doctor_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const existingFavorite = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patient_favorites\n         WHERE patient_id = ? AND doctor_id = ?`, {\n        values: [patient_id, doctor_id]\n      });\n      if (existingFavorite.length > 0) {\n        yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patient_favorites\n            WHERE doctor_id = ? AND patient_id = ?`, {\n          values: [doctor_id, patient_id]\n        });\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = NULL WHERE id = ?`, [patient_id]);\n        return {\n          message: \"Favorite removed\"\n        };\n      } else {\n        const favoriteResult = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient_favorites (patient_id, doctor_id) \n         VALUES (?, ?)`, {\n          values: [patient_id, doctor_id]\n        });\n        const favorite_id = favoriteResult.insertId;\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = ? WHERE id = ?`, [favorite_id, patient_id]);\n        return {\n          favorite_id\n        };\n      }\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to add favorite.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJyZWdpc3RlclBhdGllbnQiLCJhZGRGYXZvcml0ZSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInV1aWRfMSIsIm15c3FsXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZW1haWwiLCJxdWVyeVJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwidG9rZW5fdmVyaWZ5IiwidmVyaWZ5X2NvZGUiLCJwaG9uZSIsImNpdHkiLCJzdGF0ZSIsImNvdW50cnkiLCJEYXRlIiwiT2JqZWN0IiwiYXNzaWduIiwiaWQiLCJtZXNzYWdlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhpc3RpbmdGYXZvcml0ZSIsImZhdm9yaXRlUmVzdWx0IiwiZmF2b3JpdGVfaWQiLCJpbnNlcnRJZCIsImxvZyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwYXRpZW50c1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvcGF0aWVudHMuZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcbmltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgSVBhdGllbnQgfSBmcm9tIFwiLi9JUGF0aWVudFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRXhpc3RQYXRpZW50KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcXVlcnlSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnQgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAgICB7IHZhbHVlczogW2VtYWlsXSB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBxdWVyeVJlc3VsdC5sZW5ndGggPiAwO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgaWYgcGF0aWVudCBleGlzdHM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNoZWNraW5nIHBhdGllbnQgZXhpc3RlbmNlLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlclBhdGllbnQoZGF0YTogSVBhdGllbnQpOiBQcm9taXNlPElQYXRpZW50PiB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG5cclxuICBpZiAocGFzc3dvcmQgIT09IGNvbmZpcm1QYXNzd29yZCkge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlBhc3N3b3JkcyBkbyBub3QgbWF0Y2hcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucGF0aWVudFxyXG4gICAgICAgICAgKGZpcnN0X25hbWUsbGFzdF9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjaXR5LHN0YXRlLGNvdW50cnksY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEubGFzdF9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICAgIGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEuY2l0eSxcclxuICAgICAgICAgIGRhdGEuc3RhdGUsXHJcbiAgICAgICAgICBkYXRhLmNvdW50cnksXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaWQ6IG5ld0lkIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEZhdm9yaXRlKHBhdGllbnRfaWQ6IG51bWJlciwgZG9jdG9yX2lkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXhpc3RpbmdGYXZvcml0ZSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudF9mYXZvcml0ZXNcclxuICAgICAgICAgV0hFUkUgcGF0aWVudF9pZCA9ID8gQU5EIGRvY3Rvcl9pZCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbcGF0aWVudF9pZCwgZG9jdG9yX2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChleGlzdGluZ0Zhdm9yaXRlLmxlbmd0aCA+IDApIHtcclxuICAgICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudF9mYXZvcml0ZXNcclxuICAgICAgICAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgcGF0aWVudF9pZCA9ID9gLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZhbHVlczogW2RvY3Rvcl9pZCwgcGF0aWVudF9pZF0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudCBTRVQgZmF2b3JpdGVfaWQgPSBOVUxMIFdIRVJFIGlkID0gP2AsXHJcbiAgICAgICAgW3BhdGllbnRfaWRdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIkZhdm9yaXRlIHJlbW92ZWRcIiB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZmF2b3JpdGVSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5wYXRpZW50X2Zhdm9yaXRlcyAocGF0aWVudF9pZCwgZG9jdG9yX2lkKSBcclxuICAgICAgICAgVkFMVUVTICg/LCA/KWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWVzOiBbcGF0aWVudF9pZCwgZG9jdG9yX2lkXSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGZhdm9yaXRlX2lkID0gKGZhdm9yaXRlUmVzdWx0IGFzIGFueSkuaW5zZXJ0SWQ7XHJcbiAgICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50IFNFVCBmYXZvcml0ZV9pZCA9ID8gV0hFUkUgaWQgPSA/YCxcclxuICAgICAgICBbZmF2b3JpdGVfaWQsIHBhdGllbnRfaWRdXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiB7IGZhdm9yaXRlX2lkIH07XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGFkZCBmYXZvcml0ZS5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUFBLE9BQUEsQ0FBQUMsaUJBQUEsR0FBQUEsaUJBQUE7QUFjQUQsT0FBQSxDQUFBRSxlQUFBLEdBQUFBLGVBQUE7QUFzQ0FGLE9BQUEsQ0FBQUcsV0FBQSxHQUFBQSxXQUFBO0FBMURB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","map":{"version":3,"names":["exports","checkExistPatient","registerPatient","addFavorite","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","first_name","last_name","token_verify","verify_code","phone","city","state","country","Date","Object","assign","id","message","InternalServer","patient_id","doctor_id","existingFavorite","favoriteResult","favorite_id","insertId","log"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/patients/patients.db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IPatient } from \"./IPatient\";\r\n\r\nexport async function checkExistPatient(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if patient exists:\", error);\r\n    throw new Error(\"An error occurred while checking patient existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerPatient(data: IPatient): Promise<IPatient> {\r\n  const { password, confirmPassword } = data.password;\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.patient\r\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\r\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function addFavorite(patient_id: number, doctor_id: number) {\r\n  try {\r\n    const existingFavorite = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.patient_favorites\r\n         WHERE patient_id = ? AND doctor_id = ?`,\r\n      {\r\n        values: [patient_id, doctor_id],\r\n      }\r\n    );\r\n    if (existingFavorite.length > 0) {\r\n      await query<RowDataPacket>(\r\n        `DELETE FROM ${coreSchema}.patient_favorites\r\n            WHERE doctor_id = ? AND patient_id = ?`,\r\n        {\r\n          values: [doctor_id, patient_id],\r\n        }\r\n      );\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = NULL WHERE id = ?`,\r\n        [patient_id]\r\n      );\r\n\r\n      return { message: \"Favorite removed\" };\r\n    } else {\r\n      const favoriteResult = await query<RowDataPacket>(\r\n        `INSERT INTO ${coreSchema}.patient_favorites (patient_id, doctor_id) \r\n         VALUES (?, ?)`,\r\n        {\r\n          values: [patient_id, doctor_id],\r\n        }\r\n      );\r\n      const favorite_id = (favoriteResult as any).insertId;\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = ? WHERE id = ?`,\r\n        [favorite_id, patient_id]\r\n      );\r\n      return { favorite_id };\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Failed to add favorite.\");\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst sercvice_1 = require(\"./sercvice\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// ***** checkNickName\npublic_1.router.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.asyncHandler)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.UserService.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.router.get(\"/getUserInfo/:email\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = req.params.email;\n    const userData = yield sercvice_1.UserService.getUserInfo(data);\n    const buildResponse = app_response_1.BuildResponse.get(userData);\n    return res.json(buildResponse);\n  });\n});\n// ***** confirm\n// ***** getOTP\npublic_1.router.get(\"/user/getOTP/:email\", (0, async_handler_1.asyncHandler)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.router.put(`/api/updateProfilePatient`, (0, async_handler_1.asyncHandler)(function updateProfilePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.updateProfilePatient(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.router.get(\"/user/forgot-passsword/:email\", (0, async_handler_1.asyncHandler)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.UserService.sendFrogetPasswordToken(email);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.json(buildResponse);\n  });\n}));\npublic_1.router.post(`/user/change-password`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = req.body;\n  const getData = yield sercvice_1.UserService.changePassword(data);\n  const buildResponse = app_response_1.BuildResponse.get(getData);\n  res.json(buildResponse);\n})));\n// **** uploadImage\npublic_1.router.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsIm11bHRlcl8xIiwiX19pbXBvcnREZWZhdWx0Iiwic3RvcmFnZSIsImRlZmF1bHQiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWRJbWdQcm9maWxlIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwiY2hlY2tOaWNrTmFtZSIsInJlcyIsImZvcm1EYXRhIiwicGFyYW1zIiwibmlja25hbWUiLCJyZXN1bHQiLCJVc2VyU2VydmljZSIsImpzb24iLCJnZXRBbGxVc2VyRGF0YSIsImRhdGEiLCJlbWFpbCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldE9UUCIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwiZ2V0VmVyaWZ5Q29kZSIsInB1dCIsInVwZGF0ZVByb2ZpbGVQYXRpZW50IiwiYm9keSIsInN0YXR1cyIsImNvZGUiLCJmb3JnZXRQc3Nzd29yZCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwicG9zdCIsIl9fYXdhaXRlciIsImdldERhdGEiLCJjaGFuZ2VQYXNzd29yZCIsInNpbmdsZSIsImVycm9yIiwibWVzc2FnZSIsImltYWdlUGF0aCIsInBhdGgiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MyB9IGZyb20gXCIuLi8uLi9oZWxwZXIvY29tbW9uXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgVXNlclNlcnZpY2UgfSBmcm9tIFwiLi9zZXJjdmljZVwiO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgXCJwdWJsaWMvaW1hZ2VzXCIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBmaWxlLm9yaWdpbmFsbmFtZSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWRJbWdQcm9maWxlID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuXHJcbi8vICoqKioqIGNoZWNrTmlja05hbWVcclxucm91dGVyLmdldChcclxuICBcIi91c2VyL2NoZWNrTmlja05hbWUvOm5pY2tuYW1lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5wYXJhbXMubmlja25hbWU7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5jaGVja05pY2tOYW1lKGZvcm1EYXRhKTtcclxuICAgIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogZ2V0VXNlckluZm9cclxucm91dGVyLmdldChcclxuICBcIi9nZXRVc2VySW5mby86ZW1haWxcIixcclxuICBhc3luYyBmdW5jdGlvbiBnZXRBbGxVc2VyRGF0YShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSByZXEucGFyYW1zLmVtYWlsO1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VySW5mbyhkYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldCh1c2VyRGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfVxyXG4pO1xyXG4vLyAqKioqKiBjb25maXJtXHJcblxyXG4vLyAqKioqKiBnZXRPVFBcclxucm91dGVyLmdldChcclxuICBcIi91c2VyL2dldE9UUC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEucGFyYW1zLmVtYWlsO1xyXG4gICAgY29uc3QgdmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFZlcmlmeUNvZGUoZm9ybURhdGEsIHZlcmlmeV9jb2RlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKioqIHVwZGF0ZVByb2ZpbGVcclxucm91dGVyLnB1dChcclxuICBgL2FwaS91cGRhdGVQcm9maWxlUGF0aWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVQYXRpZW50KHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVByb2ZpbGVQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqKiBmb3Jnb3QtcGFzc3N3b3JkXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZm9yZ290LXBhc3Nzd29yZC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZm9yZ2V0UHNzc3dvcmQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlclNlcnZpY2Uuc2VuZEZyb2dldFBhc3N3b3JkVG9rZW4oZW1haWwpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvdXNlci9jaGFuZ2UtcGFzc3dvcmRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBnZXREYXRhID0gYXdhaXQgVXNlclNlcnZpY2UuY2hhbmdlUGFzc3dvcmQoZGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZ2V0RGF0YSk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiB1cGxvYWRJbWFnZVxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hZG1pbi91cGxvYWRJbWFnZVwiLFxyXG4gIHVwbG9hZEltZ1Byb2ZpbGUuc2luZ2xlKFwiZmlsZVwiKSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIGlmICghcmVxLmZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkZpbGUgdXBsb2FkZWQgc2VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaW1hZ2VQYXRoID0gcmVxLmZpbGUucGF0aDtcclxuICAgIHJlcy5qc29uKHsgaW1hZ2VQYXRoIH0pO1xyXG4gIH1cclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssUUFBQSxHQUFBQyxlQUFBLENBQUFOLE9BQUE7QUFFQSxNQUFNTyxPQUFPLEdBQUdGLFFBQUEsQ0FBQUcsT0FBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsRUFBRUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUM3QkEsRUFBRSxDQUFDLElBQUksRUFBRSxlQUFl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","map":{"version":3,"names":["async_handler_1","require","common_1","app_response_1","public_1","sercvice_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","checkNickName","res","formData","params","nickname","result","UserService","json","getAllUserData","data","email","userData","getUserInfo","buildResponse","BuildResponse","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfilePatient","body","status","code","forgetPsssword","sendFrogetPasswordToken","post","__awaiter","getData","changePassword","single","error","message","imagePath","path"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { UserService } from \"./sercvice\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// ***** checkNickName\r\nrouter.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nrouter.get(\r\n  \"/getUserInfo/:email\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    const data = req.params.email;\r\n    const userData = await UserService.getUserInfo(data);\r\n    const buildResponse = BuildResponse.get(userData);\r\n    return res.json(buildResponse);\r\n  }\r\n);\r\n// ***** confirm\r\n\r\n// ***** getOTP\r\nrouter.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** updateProfile\r\nrouter.put(\r\n  `/api/updateProfilePatient`,\r\n  asyncHandler(async function updateProfilePatient(req: any, res: any) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfilePatient(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\nrouter.get(\r\n  \"/user/forgot-passsword/:email\",\r\n  asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n    const email = req.params.email;\r\n    const data = await UserService.sendFrogetPasswordToken(email);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/user/change-password`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const data = req.body;\r\n    const getData = await UserService.changePassword(data);\r\n    const buildResponse = BuildResponse.get(getData);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** uploadImage\r\nrouter.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst common_1 = require(\"../../helper/common\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getUserInfo)(email);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      // SendMail.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getNewPassword = yield (0, db_1.comparePassword)(formData.email);\n      const pass = getNewPassword[0].password;\n      const getComparePassword = yield bcrypt_1.default.compare(formData.oldPassword, pass);\n      if (getComparePassword) {\n        const getNewPassword = yield (0, db_1.changePassword)(formData);\n        return getNewPassword;\n      }\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfilePatient(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.token_verify = tokenVerify;\n      const data = yield (0, db_1.updateProfilePatient)(userData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.ResponseError.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.useValidation)(schema_1.checkEmailSchema, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.UserService = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJjb21tb25fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsImRhdGEiLCJtZXNzYWdlIiwidmFsaWRhdGVVc2VyRW1haWwiLCJjaGVja1VzZXJFeGlzdCIsImxlbmd0aCIsImdldFZlcmlmeUNvZGUiLCJ1c2VyRGF0YSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiY2hhbmdlUGFzc3dvcmQiLCJmb3JtRGF0YSIsImdldE5ld1Bhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkIiwicGFzcyIsInBhc3N3b3JkIiwiZ2V0Q29tcGFyZVBhc3N3b3JkIiwiY29tcGFyZSIsIm9sZFBhc3N3b3JkIiwidXBkYXRlUHJvZmlsZVBhdGllbnQiLCJnZW5lcmF0ZVRva2VuIiwiY29kZSIsImdldFVuaXF1ZUNvZGV2MiIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInRva2VuX3ZlcmlmeSIsImNoZWNrTmlja05hbWUiLCJuaWNrTmFtZSIsImdldERhdGEiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwidXNlVmFsaWRhdGlvbiIsImNoZWNrRW1haWxTY2hlbWEiLCJjdXJyZW50VXNlciIsInN0YXR1cyIsImVtYWlsQ29uZmlybWVkIiwic2lnbnVwU3RhdHVzIiwiaXNBY3RpdmUiLCJuZXdDb2RlIiwidXBkYXRlVXNlclZlcmlmeUNvZGUiLCJpZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zZXJjdmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgeyB1c2VWYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7XHJcbiAgY2hhbmdlUGFzc3dvcmQsXHJcbiAgY2hlY2tOaWNrTmFtZSxcclxuICBjaGVja1VzZXJFeGlzdCxcclxuICBjb21wYXJlUGFzc3dvcmQsXHJcbiAgZ2V0T1RQLFxyXG4gIGdldFVzZXJJbmZvLFxyXG4gIHVwZGF0ZVByb2ZpbGVQYXRpZW50LFxyXG4gIHVwZGF0ZVVzZXJWZXJpZnlDb2RlXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuaW1wb3J0IHsgY2hlY2tFbWFpbFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5cclxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyAxIERheXNcclxuXHJcbmNvbnN0IGV4cGlyZXNJbiA9IG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwO1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJTZXJ2aWNlIHtcclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VySW5mbyhlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0VXNlckluZm8oZW1haWwpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB2YWxpZGF0ZVVzZXJFbWFpbChlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tVc2VyRXhpc3QoZW1haWwpO1xyXG5cclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gZGF0YVswXSBhcyBVc2VyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGZvcm1EYXRhXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRWZXJpZnlDb2RlKHVzZXJEYXRhOiBhbnksIHRva2VuVmVyaWZ5OiBhbnkpIHtcclxuICAgIC8vIGNvbnN0IHVzZXJEYXRhID0gdXNlVmFsaWRhdGlvbihzY2hlbWFVc2VyLmNvbmZpcm1FbWFpbCx1c2VyRGF0YSlcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldE9UUCh1c2VyRGF0YSwgdG9rZW5WZXJpZnkpO1xyXG4gICAgLy8gU2VuZE1haWwuQWNjb3VudFJlZ2lzdGVyKHJlc3VsdCk7XHJcblxyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBlbWFpbFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKGZvcm1EYXRhLmVtYWlsKTtcclxuICAgIGNvbnN0IHBhc3MgPSBnZXROZXdQYXNzd29yZFswXS5wYXNzd29yZDtcclxuICAgIGNvbnN0IGdldENvbXBhcmVQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGZvcm1EYXRhLm9sZFBhc3N3b3JkLCBwYXNzKTtcclxuXHJcbiAgICBpZiAoZ2V0Q29tcGFyZVBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGEpO1xyXG4gICAgICByZXR1cm4gZ2V0TmV3UGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB1c2VyRGF0YVxyXG4gICAqL1xyXG5cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVQcm9maWxlUGF0aWVudCh1c2VyRGF0YTogVXNlcikge1xyXG4gICAgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IHtcclxuICAgICAgY29kZTogZ2V0VW5pcXVlQ29kZXYyKCksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRva2VuVmVyaWZ5ID0gand0LnNpZ24oXHJcbiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGVUb2tlbikpLFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAge1xyXG4gICAgICAgIGV4cGlyZXNJbixcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB1c2VyRGF0YS52ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgdXNlckRhdGEudG9rZW5fdmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlUHJvZmlsZVBhdGllbnQodXNlckRhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGRhdGFcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja05pY2tOYW1lKG5pY2tOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGdldERhdGEgPSBhd2FpdCBjaGVja05pY2tOYW1lKCk7XHJcbiAgICBpZiAoZ2V0RGF0YVswXS5uaWNrTmFtZSA9PT0gbmlja05hbWUpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSBuaWNrTmFtZSBpcyBhbHJlYXkgZXhpc3QhXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbihlbWFpbDogc3RyaW5nKSB7XHJcbiAgICB1c2VWYWxpZGF0aW9uKGNoZWNrRW1haWxTY2hlbWEsIHsgZW1haWw6IGVtYWlsIH0pO1xyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS52YWxpZGF0ZVVzZXJFbWFpbChlbWFpbCk7XHJcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSByZXR1cm4geyBzdGF0dXM6IDEsIG1lc3NhZ2U6IFwiZW1haWwgaXMgbm90IHZhbGlkICFcIiB9O1xyXG5cclxuICAgIGlmIChjdXJyZW50VXNlci5lbWFpbENvbmZpcm1lZCA9PT0gMClcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXM6IDIsXHJcbiAgICAgICAgbWVzc2FnZTogXCJ0aGlzIGVtYWlsIGFkZHJlc3MgaXMgbm90IGNvbmZpcm1lZCB5ZXQgIVwiLFxyXG4gICAgICB9O1xyXG4gICAgaWYgKGN1cnJlbnRVc2VyLnNpZ251cFN0YXR1cyA9PT0gMClcclxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiAzLCBtZXNzYWdlOiBcInNpZ251cCBwcm9jZXNzIGlzIG5vdCBjb21wbGV0ZSB5ZXQgIVwiIH07XHJcbiAgICAvLyBUT0RPIGZvciBmaXggaXNBY3RpdmUgdG8gYm9vbGVhblxyXG4gICAgaWYgKGN1cnJlbnRVc2VyLmlzQWN0aXZlID09PSAwKVxyXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDQsIG1lc3NhZ2U6IFwidGhpcyBhY2NvdW50IGlzIG5vdCBhY3RpdmUgIVwiIH07XHJcbiAgICBjb25zdCBuZXdDb2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XHJcbiAgICBhd2FpdCB1cGRhdGVVc2VyVmVyaWZ5Q29kZShjdXJyZW50VXNlci5pZCwgbmV3Q29kZSk7XHJcbiAgICAvLyBzZW5kIGZvcmdvdCBwYXNzIHRva2VuIGNvZGVcclxuICAgIC8vIFNlbmRNYWlsLnNlbmRSZXNldFBhc3N3b3JkRW1haWwoY3VycmVudFVzZXIsIG5ld0NvZGUpO1xyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiA1LCBtZXNzYWdlOiBcImNvZGUgaGFzIGJlZW4gc2VuZCBzdWNjZXNzZnVsbHkgIVwiIH07XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLGVB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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","common_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","data","message","validateUserEmail","checkUserExist","length","getVerifyCode","userData","tokenVerify","result","getOTP","changePassword","formData","getNewPassword","comparePassword","pass","password","getComparePassword","compare","oldPassword","updateProfilePatient","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","token_verify","checkNickName","nickName","getData","ResponseError","BadRequest","sendFrogetPasswordToken","useValidation","checkEmailSchema","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","id","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/user/sercvice.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { User } from \"../../types/user\";\r\nimport {\r\n  changePassword,\r\n  checkNickName,\r\n  checkUserExist,\r\n  comparePassword,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfilePatient,\r\n  updateUserVerifyCode\r\n} from \"./db\";\r\nimport { checkEmailSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class UserService {\r\n\r\n  public static async getUserInfo(email: string) {\r\n    const data = await getUserInfo(email);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    // SendMail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(formData: User) {\r\n    const getNewPassword = await comparePassword(formData.email);\r\n    const pass = getNewPassword[0].password;\r\n    const getComparePassword = await bcrypt.compare(formData.oldPassword, pass);\r\n\r\n    if (getComparePassword) {\r\n      const getNewPassword = await changePassword(formData);\r\n      return getNewPassword;\r\n    }\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n\r\n\r\n  public static async updateProfilePatient(userData: User) {\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.token_verify = tokenVerify;\r\n    const data = await updateProfilePatient(userData);\r\n    if (data) {\r\n      return data\r\n    } else {\r\n      return null\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(checkEmailSchema, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkUserExist = checkUserExist;\nexports.confirmEmail = confirmEmail;\nexports.getOTP = getOTP;\nexports.comparePassword = comparePassword;\nexports.updateProfilePatient = updateProfilePatient;\nexports.checkNickName = checkNickName;\nexports.updateUserVerifyCode = updateUserVerifyCode;\nexports.changePassword = changePassword;\nexports.getUserInfo = getUserInfo;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT id,email FROM  ${mysql_1.coreSchema}.users\n        WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT * \n      FROM ${mysql_1.coreSchema}.users\n      WHERE email=? AND deletedAt IS NULL\n      `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n          UPDATE ${mysql_1.coreSchema}.users\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\n          WHERE email =?\n          `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\n      WHERE email=?\n    `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nfunction comparePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT password FROM ${mysql_1.coreSchema}.users\n    WHERE email=?\n    `, {\n      values: [data]\n    });\n    return result;\n  });\n}\nfunction updateProfilePatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      // Perform the update query\n      yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET \n        first_name = ?,\n        last_name = ?,\n        national_code = ?,\n        date_of_birth = ?,\n        gender = ?,\n        city = ?,\n        phone = ?,\n        verify_code = ?,\n        token_verify = ?\n      WHERE id = ?;\n    `, {\n        values: [data.first_name, data.last_name, data.national_code, data.date_of_birth, data.gender, data.city, data.phone, data.verify_code, data.token_verify, data.id]\n      });\n      // Fetch the updated user profile\n      const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients WHERE id = ?`, {\n        values: [data.id]\n      });\n      if (result.affectedRows > 0) {\n        return `This ID ${data.id} updated successfully`;\n      } else {\n        return `No record found with ID ${data.id}`;\n      }\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer('Could not update patientProfile');\n    }\n  });\n}\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users`);\n    return getData;\n  });\n}\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET verify_code=?,updatedAt=?\n      WHERE id=?\n      `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n        SELECT id,email,verify_code\n        FROM ${mysql_1.coreSchema}.users\n        WHERE id=?\n        `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nfunction changePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      newPassword\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      newPassword,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET password=?,updatedAt=?\n      WHERE email=?\n      `, {\n      values: [hash, new Date(), data.email]\n    });\n    return result;\n  });\n}\n// export async function getUserInfo(email: string) {\n//   const data = await query<RowDataPacket[]>(\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\n//     {\n//       values: [email],\n//     }\n//   );\n//   if (data) return data;\n// }\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`\n     SELECT \n       u.*, \n       c.comment, \n       c.created_at AS comment_created_at\n     FROM ${mysql_1.coreSchema}.users u\n     LEFT JOIN \n     ${mysql_1.coreSchema}.comments c\n     ON \n     u.id = c.id\n     WHERE \n     u.email =?\n     LIMIT 1;\n\n    `, {\n      values: [email]\n    });\n    if (!data || data.length === 0) {\n      return null; // Return null if no data is found\n    }\n    const userMap = new Map();\n    data.forEach(row => {\n      if (!userMap.has(row.id)) {\n        userMap.set(row.id, Object.assign(Object.assign({}, data), {\n          comments: []\n        }));\n      }\n      if (row.comment_text) {\n        userMap.get(row.id).comments.push({\n          text: row.comment_text,\n          createdAt: row.comment_created_at\n        });\n      }\n    });\n    return Array.from(userMap.values());\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tVc2VyRXhpc3QiLCJjb25maXJtRW1haWwiLCJnZXRPVFAiLCJjb21wYXJlUGFzc3dvcmQiLCJ1cGRhdGVQcm9maWxlUGF0aWVudCIsImNoZWNrTmlja05hbWUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImNoYW5nZVBhc3N3b3JkIiwiZ2V0VXNlckluZm8iLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwiZW1haWwiLCJ1c2VyIiwicXVlcnkiLCJjb3JlU2NoZW1hIiwidmFsdWVzIiwiZGF0YSIsInJlc3VsdCIsImxlbmd0aCIsImlzU3VjY2Vzc2Z1bGwiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZW1haWxDb25maXJtZWQiLCJzaWdudXBTdGF0dXMiLCJEYXRlIiwidmVyaWZ5X2NvZGUiLCJjb2RlIiwic2hvd1RvVXNlciIsIm1lc3NhZ2VDb2RlIiwibWVzc2FnZUtpbmQiLCJ0b2tlblZlcmlmeSIsInVwZGF0ZURhdGEiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibmF0aW9uYWxfY29kZSIsImRhdGVfb2ZfYmlydGgiLCJnZW5kZXIiLCJjaXR5IiwicGhvbmUiLCJ0b2tlbl92ZXJpZnkiLCJpZCIsImFmZmVjdGVkUm93cyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIlJlc3BvbnNlRXJyb3IiLCJJbnRlcm5hbFNlcnZlciIsImdldERhdGEiLCJ1c2VySWQiLCJuZXdDb2RlIiwibmV3UGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaCIsImRlZmF1bHQiLCJoYXNoU3luYyIsInVzZXJNYXAiLCJNYXAiLCJmb3JFYWNoIiwicm93IiwiaGFzIiwic2V0IiwiT2JqZWN0IiwiYXNzaWduIiwiY29tbWVudHMiLCJjb21tZW50X3RleHQiLCJnZXQiLCJwdXNoIiwidGV4dCIsImNyZWF0ZWRBdCIsImNvbW1lbnRfY3JlYXRlZF9hdCIsIkFycmF5IiwiZnJvbSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBDb25maXJtRW1haWwgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHsgY3JlYXRlUGFzc3dvcmRTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tVc2VyRXhpc3QoZW1haWw6IHN0cmluZyk6IFByb21pc2U8Um93RGF0YVBhY2tldFtdPiB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUIGlkLGVtYWlsIEZST00gICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBlbWFpbD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgU0VMRUNUICogXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBXSEVSRSBlbWFpbD0/IEFORCBkZWxldGVkQXQgSVMgTlVMTFxyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIGlmIChyZXN1bHQubGVuZ3RoIDwgMSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwidXNlciBub3QgZm91bmQhXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIGNvbnN0IHVzZXIgPSByZXN1bHRbMF0gYXMgVXNlcjtcclxuICBpZiAodXNlci5lbWFpbCAhPT0gZGF0YS5lbWFpbClcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZW1haWwgaXMgbm90IGNvcnJlY3RcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgaWYgKHVzZXIuZW1haWxDb25maXJtZWQpIHtcclxuICAgIGlmICh1c2VyLnNpZ251cFN0YXR1cyA9PT0gMSkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBcclxuICAgICAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgICAgICBTRVQgc2lnbnVwU3RhdHVzPT8sZW1haWxDb25maXJtZWQ9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICAgICAgV0hFUkUgZW1haWwgPT9cclxuICAgICAgICAgIGAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWVzOiBbMSwgMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCJlbWFpbCBhbHJlYWR5IGNvbmZpcm1lZFwiLFxyXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICB9XHJcbiAgaWYgKHVzZXIudmVyaWZ5X2NvZGUgIT09IGRhdGEudmVyaWZ5X2NvZGUpXHJcbiAgICByZXR1cm4geyBzdGF0dXM6IGZhbHNlLCBtZXNzYWdlOiBcImNvZGUgaXMgbm90IGNvcnJlY3RcIiwgY29kZTogNDAwIH07XHJcbiAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgU0VUIGVtYWlsQ29uZmlybWVkPTEsIHNpZ251cFN0YXR1cz0yLHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ldyBEYXRlKCksIGRhdGEuZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlzU3VjY2Vzc2Z1bGw6IHRydWUsXHJcbiAgICBzaG93VG9Vc2VyOiB0cnVlLFxyXG4gICAgbWVzc2FnZUNvZGU6IFwiTVNHXzAxXCIsXHJcbiAgICBtZXNzYWdlS2luZDogMSxcclxuICAgIG1lc3NhZ2U6IFwiZW1haWwgY29uZmlybWVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gIH0gYXMgQXBwUmVzcG9uc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPVFAoZW1haWw6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gIGNvbnN0IHVwZGF0ZURhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFVQREFURSAgJHtjb3JlU2NoZW1hfS51c2VycyBTRVQgdmVyaWZ5X2NvZGU9PyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFt0b2tlblZlcmlmeSwgZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHRbMF0gYXMgVXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXBhcmVQYXNzd29yZChkYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgcGFzc3dvcmQgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICBXSEVSRSBlbWFpbD0/XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlUGF0aWVudChkYXRhOiBVc2VyKTogUHJvbWlzZTxhbnk+IHtcclxuICB0cnkge1xyXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlIHF1ZXJ5XHJcbiAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBTRVQgXHJcbiAgICAgICAgZmlyc3RfbmFtZSA9ID8sXHJcbiAgICAgICAgbGFzdF9uYW1lID0gPyxcclxuICAgICAgICBuYXRpb25hbF9jb2RlID0gPyxcclxuICAgICAgICBkYXRlX29mX2JpcnRoID0gPyxcclxuICAgICAgICBnZW5kZXIgPSA/LFxyXG4gICAgICAgIGNpdHkgPSA/LFxyXG4gICAgICAgIHBob25lID0gPyxcclxuICAgICAgICB2ZXJpZnlfY29kZSA9ID8sXHJcbiAgICAgICAgdG9rZW5fdmVyaWZ5ID0gP1xyXG4gICAgICBXSEVSRSBpZCA9ID87XHJcbiAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBkYXRhLmZpcnN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEubmF0aW9uYWxfY29kZSxcclxuICAgICAgICAgIGRhdGEuZGF0ZV9vZl9iaXJ0aCxcclxuICAgICAgICAgIGRhdGEuZ2VuZGVyLFxyXG4gICAgICAgICAgZGF0YS5jaXR5LFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEuaWQsXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBGZXRjaCB0aGUgdXBkYXRlZCB1c2VyIHByb2ZpbGVcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzIFdIRVJFIGlkID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtkYXRhLmlkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXN1bHQuYWZmZWN0ZWRSb3dzID4gMCkge1xyXG4gICAgICByZXR1cm4gYFRoaXMgSUQgJHtkYXRhLmlkfSB1cGRhdGVkIHN1Y2Nlc3NmdWxseWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYE5vIHJlY29yZCBmb3VuZCB3aXRoIElEICR7ZGF0YS5pZH1gO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKCdDb3VsZCBub3QgdXBkYXRlIHBhdGllbnRQcm9maWxlJylcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUoKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCBnZXREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc2ApO1xyXG4gIHJldHVybiBnZXREYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgdmVyaWZ5X2NvZGU9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICBXSEVSRSBpZD0/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgICBTRUxFQ1QgaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBpZD0/XHJcbiAgICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdXNlcklkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyWzBdIGFzIENyZWF0ZVVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChkYXRhOiBhbnkpIHtcclxuICBjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlUGFzc3dvcmRTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFNFVCBwYXNzd29yZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaGFzaCwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4vLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgIHtcclxuLy8gICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4vLyAgICAgfVxyXG4vLyAgICk7XHJcbi8vICAgaWYgKGRhdGEpIHJldHVybiBkYXRhO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCBcclxuICAgICAgIHUuKiwgXHJcbiAgICAgICBjLmNvbW1lbnQsIFxyXG4gICAgICAgYy5jcmVhdGVkX2F0IEFTIGNvbW1lbnRfY3JlYXRlZF9hdFxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyB1XHJcbiAgICAgTEVGVCBKT0lOIFxyXG4gICAgICR7Y29yZVNjaGVtYX0uY29tbWVudHMgY1xyXG4gICAgIE9OIFxyXG4gICAgIHUuaWQgPSBjLmlkXHJcbiAgICAgV0hFUkUgXHJcbiAgICAgdS5lbWFpbCA9P1xyXG4gICAgIExJTUlUIDE7XHJcblxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIGRhdGEgaXMgZm91bmRcclxuICB9XHJcblxyXG4gIGNvbnN0IHVzZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xyXG5cclxuICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgaWYgKCF1c2VyTWFwLmhhcyhyb3cuaWQpKSB7XHJcbiAgICAgIHVzZXJNYXAuc2V0KHJvdy5pZCwge1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93LmNvbW1lbnRfdGV4dCkge1xyXG4gICAgICB1c2VyTWFwLmdldChyb3cuaWQpLmNvbW1lbnRzLnB1c2goe1xyXG4gICAgICAgIHRleHQ6IHJvdy5jb21tZW50X3RleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY29tbWVudF9jcmVhdGVkX2F0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbSh1c2VyTWFwLnZhbHVlcygpKTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQUEsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFXQUQsT0FBQSxDQUFBRSxZQUFBLEdBQUFBLFlBQUE7QUErREFGLE9BQUEsQ0FBQUcsTUFBQSxHQUFBQSxNQUFBO0FBaUJBSCxPQUFBLENBQUFJLGVBQUEsR0FBQUEsZUFBQTtBQWFBSixPQUFBLENBQUFLLG9CQUFBLEdBQUFBLG9CQUFBO0FBc0RBTCxPQUFBLENBQUFNLGFBQUEsR0FBQUEsYUFBQTtBQUtBTixPQUFBLENBQUFPLG9CQUFBLEdBQUFBLG9CQUFBO0FBd0JBUCxPQUFBLENBQUFRLGNBQUEsR0FBQUEsY0FBQTtBQWtDQVIsT0FBQSxDQUFBUyxXQUFBLEdBQUFBLFdBQUE7QUFyT0EsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsTUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUdBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFFBQUEsR0FBQUMsZUFBQSxDQUFBSixPQUFBO0FBRUEsU0FBc0JWLGNBQWNBLENBQUNlLEtBQWE7O0lBQ2hELE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFQLE9BQUEsQ0FB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","map":{"version":3,"names":["exports","checkUserExist","confirmEmail","getOTP","comparePassword","updateProfilePatient","checkNickName","updateUserVerifyCode","changePassword","getUserInfo","mysql_1","require","response_error_1","schema_1","bcrypt_1","__importDefault","email","user","query","coreSchema","values","data","result","length","isSuccessfull","status","message","emailConfirmed","signupStatus","Date","verify_code","code","showToUser","messageCode","messageKind","tokenVerify","updateData","first_name","last_name","national_code","date_of_birth","gender","city","phone","token_verify","id","affectedRows","error","console","log","ResponseError","InternalServer","getData","userId","newCode","newPassword","confirmPassword","fdPassword","validPassword","createPasswordSchema","validateSyncAt","saltRounds","hash","default","hashSync","userMap","Map","forEach","row","has","set","Object","assign","comments","comment_text","get","push","text","createdAt","comment_created_at","Array","from"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/user/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ConfirmEmail } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { AppResponse } from \"../../types/response.interface\";\r\nimport { CreateUser, User } from \"../../types/user\";\r\nimport { createPasswordSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT id,email FROM  ${coreSchema}.users\r\n        WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT * \r\n      FROM ${coreSchema}.users\r\n      WHERE email=? AND deletedAt IS NULL\r\n      `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n          UPDATE ${coreSchema}.users\r\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n          WHERE email =?\r\n          `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n      WHERE email=?\r\n    `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function comparePassword(data: any): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT password FROM ${coreSchema}.users\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [data],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateProfilePatient(data: User): Promise<any> {\r\n  try {\r\n    // Perform the update query\r\n    await query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.patients\r\n      SET \r\n        first_name = ?,\r\n        last_name = ?,\r\n        national_code = ?,\r\n        date_of_birth = ?,\r\n        gender = ?,\r\n        city = ?,\r\n        phone = ?,\r\n        verify_code = ?,\r\n        token_verify = ?\r\n      WHERE id = ?;\r\n    `,\r\n      {\r\n        values: [\r\n          data.first_name,\r\n          data.last_name,\r\n          data.national_code,\r\n          data.date_of_birth,\r\n          data.gender,\r\n          data.city,\r\n          data.phone,\r\n          data.verify_code,\r\n          data.token_verify,\r\n          data.id,\r\n        ],\r\n      }\r\n    );\r\n\r\n    // Fetch the updated user profile\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT * FROM ${coreSchema}.patients WHERE id = ?`,\r\n      {\r\n        values: [data.id],\r\n      }\r\n    );\r\n    if (result.affectedRows > 0) {\r\n      return `This ID ${data.id} updated successfully`;\r\n    } else {\r\n      return `No record found with ID ${data.id}`;\r\n    }\r\n  } catch (error) {\r\n    console.log(error)\r\n    throw new ResponseError.InternalServer('Could not update patientProfile')\r\n  }\r\n\r\n\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM ${coreSchema}.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET verify_code=?,updatedAt=?\r\n      WHERE id=?\r\n      `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n        SELECT id,email,verify_code\r\n        FROM ${coreSchema}.users\r\n        WHERE id=?\r\n        `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function changePassword(data: any) {\r\n  const { newPassword } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { newPassword, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET password=?,updatedAt=?\r\n      WHERE email=?\r\n      `,\r\n    {\r\n      values: [hash, new Date(), data.email],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getUserInfo(email: string) {\r\n//   const data = await query<RowDataPacket[]>(\r\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n//     {\r\n//       values: [email],\r\n//     }\r\n//   );\r\n//   if (data) return data;\r\n// }\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT \r\n       u.*, \r\n       c.comment, \r\n       c.created_at AS comment_created_at\r\n     FROM ${coreSchema}.users u\r\n     LEFT JOIN \r\n     ${coreSchema}.comments c\r\n     ON \r\n     u.id = c.id\r\n     WHERE \r\n     u.email =?\r\n     LIMIT 1;\r\n\r\n    `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n\r\n  if (!data || data.length === 0) {\r\n    return null; // Return null if no data is found\r\n  }\r\n\r\n  const userMap = new Map<number, any>();\r\n\r\n  data.forEach((row) => {\r\n    if (!userMap.has(row.id)) {\r\n      userMap.set(row.id, {\r\n        ...data,\r\n        comments: [],\r\n      });\r\n    }\r\n\r\n    if (row.comment_text) {\r\n      userMap.get(row.id).comments.push({\r\n        text: row.comment_text,\r\n        createdAt: row.comment_created_at,\r\n      });\r\n    }\r\n  });\r\n  return Array.from(userMap.values());\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/navItem\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgTmF2SXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL25hdkl0ZW1cIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTmF2SXRlbVNlcnZpY2UuZ2V0QWxsTmF2SXRlbXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBSCxPQUFBO0FBRUFDLFFBQUEsQ0FBQUcsTUFBTSxDQUFDQyxHQUFHLENBQ1IsVUFBVSxFQUNWLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQVMsY0FBYyxDQUFDQyxjQUFjLEVBQUU7SUFDbEQsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztJQUMzRDtFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","public_1","service_1","app_response_1","router","get","asyncHandler","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\r\nimport {router} from \"../../routes/public\";\r\nimport { NavItemService } from \"./service\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\n\r\nrouter.get(\r\n  \"/navItem\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await NavItemService.getAllNavItems();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(buildResponse.code).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAEAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAS,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC3D;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxuYXYtaXRlbXNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL25hdi1pdGVtcy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE5hdkl0ZW1zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5hdkl0ZW1TZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbE5hdkl0ZW1zKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE5hdkl0ZW1zKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGNBQWM7RUFDbEIsT0FBYUMsY0FBY0EsQ0FBQTs7TUFDaEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxXQUFXLEdBQUU7TUFDaEMsSUFBSUQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOzs7QUFQSEcsT0FBQSxDQUFBTCxjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\r\n\r\nexport class NavItemService {\r\n  public static async getAllNavItems() {\r\n    const data = await getNavItems();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,cAAc;EAClB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAPHG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\n// router.post(\n//   \"/insertAppointment\",\n//   asyncHandler(async function insertEvent(req: any, res: any) {\n//     try {\n//       const eventData = req.body;\n//       if (\n//         !eventData ||\n//         !eventData.appointment_date ||\n//         !eventData.appointment_time\n//       ) {\n//         return res.status(400).json({ message: \"Missing required feilds.\" });\n//       }\n//       const data = await CalendarService.insertEvent(eventData);\n//       const buildResponse = BuildResponse.get(data);\n//       return res.status(buildResponse.code).json(buildResponse);\n//     } catch (error) {\n//       console.log(\"Error inserting appointment:\", error);\n//       return res.status(500).json({ message: \"Internal Server Error.\" });\n//     }\n//   })\n// );\npublic_1.router.get(\"/getAppointment\", (0, async_handler_1.asyncHandler)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.CalendarService.getEventData();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.asyncHandler)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.CalendarService.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.BuildResponse.deleted({});\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/updateAppointment/update\", (0, async_handler_1.asyncHandler)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.CalendarService.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldEV2ZW50RGF0YSIsInJlcSIsInJlcyIsImRhdGEiLCJDYWxlbmRhclNlcnZpY2UiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJib2R5IiwidXBkYXRlZCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhcHBvaW50bWVudFxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQ2FsZW5kYXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxuLy8gcm91dGVyLnBvc3QoXHJcbi8vICAgXCIvaW5zZXJ0QXBwb2ludG1lbnRcIixcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RXZlbnQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBldmVudERhdGEgPSByZXEuYm9keTtcclxuLy8gICAgICAgaWYgKFxyXG4vLyAgICAgICAgICFldmVudERhdGEgfHxcclxuLy8gICAgICAgICAhZXZlbnREYXRhLmFwcG9pbnRtZW50X2RhdGUgfHxcclxuLy8gICAgICAgICAhZXZlbnREYXRhLmFwcG9pbnRtZW50X3RpbWVcclxuLy8gICAgICAgKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJNaXNzaW5nIHJlcXVpcmVkIGZlaWxkcy5cIiB9KTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmluc2VydEV2ZW50KGV2ZW50RGF0YSk7XHJcbi8vICAgICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coXCJFcnJvciBpbnNlcnRpbmcgYXBwb2ludG1lbnQ6XCIsIGVycm9yKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuXCIgfSk7XHJcbi8vICAgICB9XHJcbi8vICAgfSlcclxuLy8gKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QXBwb2ludG1lbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnREYXRhKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5nZXRFdmVudERhdGEoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9kZWxldGVBcHBvaW50bWVudC9kZWxldGUvOmlkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZSxcclxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5kZWxldGVkKHt9KTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi91cGRhdGVBcHBvaW50bWVudC91cGRhdGVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlQXBwb2ludG1lbnRJdGVtKFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS51cGRhdGVBcHBvaW50bWVudEl0ZW0oZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsaUJBQWlCLEVBQ2pCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFlBQVlBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDekQsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDSixZQUFZLEVBQUU7SUFDakQsTUFBTUssYUFBYSxHQUFHWCxjQUFBLENBQUFZLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFYsUUFBQSxDQUFBRSxNQUFNLENBQUNhLE1BQU0sQ0FDWCwrQkFBK0IsRUFDL0IsSUFBQWxCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVZLGlCQUFpQkEsQ0FDM0NWLEdBQVksRUFDWkMsR0FBYSxFQUNiVSxJQUFrQjs7SUFFbEIsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR1osR0FBRyxDQUFDYSxNQUFNO0lBQ3pCLE1BQU1sQixTQUFBLENBQUFRLGVBQWUsQ0FBQ1cscUJBQXFCLENBQUNGLEVBQUUsQ0FBQztJQUMvQyxNQUFNUixhQUFhLEdBQUdYLGNBQUEsQ0FBQVksYUFBYSxDQUFDVSxPQUFPLENBQUMsRUFBRSxDQUFDO0lBQy9DLE9BQU9kLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUMzRCxDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURWLFFBQUEsQ0FBQUUsTUFBTSxDQUFDb0IsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBekIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZW1CLHFCQUFxQkEsQ0FDL0NqQixHQUFZLEVBQ1pDLEdBQWE7O0lBRWIsTUFBTWlCLFFBQVEsR0FBR2xCLEdBQUcsQ0FBQ21CLElBQUk7SUFDekIsTUFBTWpCLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ2MscUJBQXFCLENBQUNDLFFBQVEsQ0FBQztJQUNsRSxNQUFNZCxhQUFhLEdBQUdYLGNBQUEsQ0FBQVksYUFBYSxDQUFDZSxPQUFPLENBQUNsQixJQUFJLENBQUM7SUFDakQsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","getEventData","req","res","data","CalendarService","buildResponse","BuildResponse","status","code","json","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","body","updated"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { CalendarService } from \"./service\";\r\n\r\n// router.post(\r\n//   \"/insertAppointment\",\r\n//   asyncHandler(async function insertEvent(req: any, res: any) {\r\n//     try {\r\n//       const eventData = req.body;\r\n//       if (\r\n//         !eventData ||\r\n//         !eventData.appointment_date ||\r\n//         !eventData.appointment_time\r\n//       ) {\r\n//         return res.status(400).json({ message: \"Missing required feilds.\" });\r\n//       }\r\n//       const data = await CalendarService.insertEvent(eventData);\r\n//       const buildResponse = BuildResponse.get(data);\r\n//       return res.status(buildResponse.code).json(buildResponse);\r\n//     } catch (error) {\r\n//       console.log(\"Error inserting appointment:\", error);\r\n//       return res.status(500).json({ message: \"Internal Server Error.\" });\r\n//     }\r\n//   })\r\n// );\r\n\r\nrouter.get(\r\n  \"/getAppointment\",\r\n  asyncHandler(async function getEventData(req: any, res: any) {\r\n    const data = await CalendarService.getEventData();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.delete(\r\n  \"/deleteAppointment/delete/:id\",\r\n  asyncHandler(async function deleteAppointment(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { id } = req.params;\r\n    await CalendarService.deleteAppointmentItem(id);\r\n    const buildResponse = BuildResponse.deleted({});\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/updateAppointment/update\",\r\n  asyncHandler(async function updateAppointmentItem(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const formData = req.body;\r\n    const data = await CalendarService.updateAppointmentItem(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAQ,EAAEC,GAAQ;;IACzD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,YAAY,EAAE;IACjD,MAAMK,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,MAAM,CAACa,MAAM,CACX,+BAA+B,EAC/B,IAAAlB,eAAA,CAAAO,YAAY,EAAC,SAAeY,iBAAiBA,CAC3CV,GAAY,EACZC,GAAa,EACbU,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGZ,GAAG,CAACa,MAAM;IACzB,MAAMlB,SAAA,CAAAQ,eAAe,CAACW,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMR,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACU,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOd,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,MAAM,CAACoB,GAAG,CACR,2BAA2B,EAC3B,IAAAzB,eAAA,CAAAO,YAAY,EAAC,SAAemB,qBAAqBA,CAC/CjB,GAAY,EACZC,GAAa;;IAEb,MAAMiB,QAAQ,GAAGlB,GAAG,CAACmB,IAAI;IACzB,MAAMjB,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACc,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMd,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACe,OAAO,CAAClB,IAAI,CAAC;IACjD,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst db_2 = require(\"./db\");\nconst moment = require(\"moment\");\nclass CalendarService {\n  // public static async insertEvent(eventData: IAppointment) {\n  //   // const appointment_date = new Date(eventData.appointment_date);\n  //   // // const receivedEndDate = new Date(eventData.end_date);\n  //   // // const receivedAppointmentDate = new Date(eventData.appointmentDate);\n  //   // const startLocalDate = moment(appointment_date)\n  //   //   .local()\n  //   //   .format(\"YYYY-MM-DD\");\n  //   // const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n  //   // const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n  //   const appointment_date = moment(eventData.appointment_date).format(\n  //     \"YYYY-MM-DD\"\n  //   );\n  //   const payload: IAppointment = {\n  //     id: eventData.id,\n  //     patient_id: eventData.patient_id,\n  //     doctor_schedule_id: eventData.doctor_schedule_id,\n  //     clinic_id: eventData.clinic_id,\n  //     appointment_date: appointment_date,\n  //     appointment_time: eventData.appointment_time,\n  //     completed_time: eventData.completed_time,\n  //     arrival_time: eventData.arrival_time,\n  //     status: eventData.status,\n  //     note: eventData.note,\n  //   };\n  //   const data = await saveAppointment(payload);\n  //   return data ? { message: \"ok\", data } : null;\n  // }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_2.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.CalendarService = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImRiXzIiLCJtb21lbnQiLCJDYWxlbmRhclNlcnZpY2UiLCJnZXRFdmVudERhdGEiLCJkYXRhIiwiZ2V0QXBwb2ludG1lbnQiLCJtZXNzYWdlIiwiZGVsZXRlQXBwb2ludG1lbnRJdGVtIiwiaWQiLCJkZWxldGVBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50SXRlbSIsImRhdGFBcHBpbnRtZW50IiwidXBkYXRlQXBwb2ludG1lbnQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hcHBvaW50bWVudC9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgZGVsZXRlQXBwb2ludG1lbnQsXHJcbiAgdXBkYXRlQXBwb2ludG1lbnQsXHJcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IGdldEFwcG9pbnRtZW50IH0gZnJvbSBcIi4vZGJcIjtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYWxlbmRhclNlcnZpY2Uge1xyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0RXZlbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcclxuICAvLyAgIC8vIGNvbnN0IGFwcG9pbnRtZW50X2RhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnRfZGF0ZSk7XHJcbiAgLy8gICAvLyAvLyBjb25zdCByZWNlaXZlZEVuZERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuZW5kX2RhdGUpO1xyXG4gIC8vICAgLy8gLy8gY29uc3QgcmVjZWl2ZWRBcHBvaW50bWVudERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnREYXRlKTtcclxuICAvLyAgIC8vIGNvbnN0IHN0YXJ0TG9jYWxEYXRlID0gbW9tZW50KGFwcG9pbnRtZW50X2RhdGUpXHJcbiAgLy8gICAvLyAgIC5sb2NhbCgpXHJcbiAgLy8gICAvLyAgIC5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG4gIC8vICAgLy8gY29uc3QgZW5kTG9jYWxEYXRlID0gbW9tZW50KHJlY2VpdmVkRW5kRGF0ZSkubG9jYWwoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG5cclxuICAvLyAgIC8vIGNvbnN0IGFwcG9pbnRtZW50TG9jYWxEYXRlID0gbW9tZW50KHJlY2VpdmVkQXBwb2ludG1lbnREYXRlKS5sb2NhbCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XHJcbiAgLy8gICBjb25zdCBhcHBvaW50bWVudF9kYXRlID0gbW9tZW50KGV2ZW50RGF0YS5hcHBvaW50bWVudF9kYXRlKS5mb3JtYXQoXHJcbiAgLy8gICAgIFwiWVlZWS1NTS1ERFwiXHJcbiAgLy8gICApO1xyXG5cclxuICAvLyAgIGNvbnN0IHBheWxvYWQ6IElBcHBvaW50bWVudCA9IHtcclxuICAvLyAgICAgaWQ6IGV2ZW50RGF0YS5pZCxcclxuICAvLyAgICAgcGF0aWVudF9pZDogZXZlbnREYXRhLnBhdGllbnRfaWQsXHJcbiAgLy8gICAgIGRvY3Rvcl9zY2hlZHVsZV9pZDogZXZlbnREYXRhLmRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuICAvLyAgICAgY2xpbmljX2lkOiBldmVudERhdGEuY2xpbmljX2lkLFxyXG4gIC8vICAgICBhcHBvaW50bWVudF9kYXRlOiBhcHBvaW50bWVudF9kYXRlLFxyXG4gIC8vICAgICBhcHBvaW50bWVudF90aW1lOiBldmVudERhdGEuYXBwb2ludG1lbnRfdGltZSxcclxuICAvLyAgICAgY29tcGxldGVkX3RpbWU6IGV2ZW50RGF0YS5jb21wbGV0ZWRfdGltZSxcclxuICAvLyAgICAgYXJyaXZhbF90aW1lOiBldmVudERhdGEuYXJyaXZhbF90aW1lLFxyXG4gIC8vICAgICBzdGF0dXM6IGV2ZW50RGF0YS5zdGF0dXMsXHJcbiAgLy8gICAgIG5vdGU6IGV2ZW50RGF0YS5ub3RlLFxyXG4gIC8vICAgfTtcclxuICAvLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzYXZlQXBwb2ludG1lbnQocGF5bG9hZCk7XHJcblxyXG4gIC8vICAgcmV0dXJuIGRhdGEgPyB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9IDogbnVsbDtcclxuICAvLyB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RXZlbnREYXRhKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFwcG9pbnRtZW50KCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnRJdGVtKGlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkZWxldGVBcHBvaW50bWVudChpZCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlQXBwb2ludG1lbnRJdGVtKGRhdGFBcHBpbnRtZW50OiBJQXBwb2ludG1lbnQpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVBcHBvaW50bWVudChkYXRhQXBwaW50bWVudCk7XHJcbiAgICBkYXRhO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUtBLE1BQUFDLElBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQyxNQUFhRyxlQUFlO0VBQzFCO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVPLE9BQWFDLFlBQVlBLENBQUE7O01BQzlCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUssY0FBYyxHQUFFO01BQ25DLElBQUlELElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRyxxQkFBcUJBLENBQUNDLEVBQVU7O01BQ2xELE1BQU1KLElBQUksR0FBRyxNQUFNLElBQUFOLElBQUEsQ0FBQVcsaUJBQWlCLEVBQUNELEVBQUUsQ0FBQztNQUN4QyxPQUFPSixJQUFJO0lBQ2IsQ0FBQzs7RUFFTSxPQUFhTSxxQkFBcUJBLENBQUNDLGNBQTRCOztNQUNwRSxNQUFNUCxJQUFJLEdBQUcsTUFBTSxJQUFBTixJQUFBLENBQUFjLGlCQUFpQixFQUFDRCxjQUFjLENBQUM7TUFDcERQLElBQUk7SUFDTixDQUFDOzs7QUEvQ0hTLE9BQUEsQ0FBQVgsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","db_2","moment","CalendarService","getEventData","data","getAppointment","message","deleteAppointmentItem","id","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\r\n  deleteAppointment,\r\n  updateAppointment,\r\n} from \"../../bin/db\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { getAppointment } from \"./db\";\r\nconst moment = require(\"moment\");\r\n\r\nexport class CalendarService {\r\n  // public static async insertEvent(eventData: IAppointment) {\r\n  //   // const appointment_date = new Date(eventData.appointment_date);\r\n  //   // // const receivedEndDate = new Date(eventData.end_date);\r\n  //   // // const receivedAppointmentDate = new Date(eventData.appointmentDate);\r\n  //   // const startLocalDate = moment(appointment_date)\r\n  //   //   .local()\r\n  //   //   .format(\"YYYY-MM-DD\");\r\n  //   // const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\r\n\r\n  //   // const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\r\n  //   const appointment_date = moment(eventData.appointment_date).format(\r\n  //     \"YYYY-MM-DD\"\r\n  //   );\r\n\r\n  //   const payload: IAppointment = {\r\n  //     id: eventData.id,\r\n  //     patient_id: eventData.patient_id,\r\n  //     doctor_schedule_id: eventData.doctor_schedule_id,\r\n  //     clinic_id: eventData.clinic_id,\r\n  //     appointment_date: appointment_date,\r\n  //     appointment_time: eventData.appointment_time,\r\n  //     completed_time: eventData.completed_time,\r\n  //     arrival_time: eventData.arrival_time,\r\n  //     status: eventData.status,\r\n  //     note: eventData.note,\r\n  //   };\r\n  //   const data = await saveAppointment(payload);\r\n\r\n  //   return data ? { message: \"ok\", data } : null;\r\n  // }\r\n\r\n  public static async getEventData() {\r\n    const data = await getAppointment();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async deleteAppointmentItem(id: string) {\r\n    const data = await deleteAppointment(id);\r\n    return data;\r\n  }\r\n\r\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\r\n    const data = await updateAppointment(dataAppintment);\r\n    data;\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAKA,MAAAC,IAAA,GAAAD,OAAA;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAaG,eAAe;EAC1B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEO,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,cAAc,GAAE;MACnC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaG,qBAAqBA,CAACC,EAAU;;MAClD,MAAMJ,IAAI,GAAG,MAAM,IAAAN,IAAA,CAAAW,iBAAiB,EAACD,EAAE,CAAC;MACxC,OAAOJ,IAAI;IACb,CAAC;;EAEM,OAAaM,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMP,IAAI,GAAG,MAAM,IAAAN,IAAA,CAAAc,iBAAiB,EAACD,cAAc,CAAC;MACpDP,IAAI;IACN,CAAC;;;AA/CHS,OAAA,CAAAX,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAppointment = getAppointment;\nconst mysql_1 = require(\"../../bin/mysql\");\n// export async function saveAppointment(eventData: IAppointment) {\n//   const insertEvent = await query<RowDataPacket[]>(\n//     `INSERT INTO ${coreSchema}.appointments\n//       (id, patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time, completed_time, arrival_time, status, note, created_at, updated_at)\n//      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n//     [\n//       eventData.id,\n//       eventData.patient_id,\n//       eventData.doctor_schedule_id,\n//       eventData.clinic_id,\n//       eventData.appointment_date,\n//       eventData.appointment_time,\n//       eventData.completed_time,\n//       eventData.arrival_time,\n//       eventData.status,\n//       eventData.note,\n//       new Date(),\n//       new Date(),\n//     ]\n//   );\n//   return insertEvent;\n// }\nfunction getAppointment(searchValue) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const value = [];\n    const result = yield (0, mysql_1.query)(`SELECT a.*, d.first_name AS first_name,\n    d.last_name AS last_name\n    FROM ${mysql_1.coreSchema}.appointments a\n    LEFT JOIN \n     ${mysql_1.coreSchema}.doctors d\n     ON a.doctor_schedule_id = d.id\n    `);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QXBwb2ludG1lbnQiLCJteXNxbF8xIiwicmVxdWlyZSIsInNlYXJjaFZhbHVlIiwidmFsdWUiLCJyZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUFwcG9pbnRtZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XHJcbi8vICAgY29uc3QgaW5zZXJ0RXZlbnQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzXHJcbi8vICAgICAgIChpZCwgcGF0aWVudF9pZCwgZG9jdG9yX3NjaGVkdWxlX2lkLCBjbGluaWNfaWQsIGFwcG9pbnRtZW50X2RhdGUsIGFwcG9pbnRtZW50X3RpbWUsIGNvbXBsZXRlZF90aW1lLCBhcnJpdmFsX3RpbWUsIHN0YXR1cywgbm90ZSwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcclxuLy8gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcclxuLy8gICAgIFtcclxuLy8gICAgICAgZXZlbnREYXRhLmlkLFxyXG4vLyAgICAgICBldmVudERhdGEucGF0aWVudF9pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmNsaW5pY19pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmFwcG9pbnRtZW50X2RhdGUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5hcHBvaW50bWVudF90aW1lLFxyXG4vLyAgICAgICBldmVudERhdGEuY29tcGxldGVkX3RpbWUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5hcnJpdmFsX3RpbWUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5zdGF0dXMsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5ub3RlLFxyXG4vLyAgICAgICBuZXcgRGF0ZSgpLFxyXG4vLyAgICAgICBuZXcgRGF0ZSgpLFxyXG4vLyAgICAgXVxyXG4vLyAgICk7XHJcblxyXG4vLyAgIHJldHVybiBpbnNlcnRFdmVudDtcclxuLy8gfVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KHNlYXJjaFZhbHVlPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgdmFsdWUgPSBbXTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCBhLiosIGQuZmlyc3RfbmFtZSBBUyBmaXJzdF9uYW1lLFxyXG4gICAgZC5sYXN0X25hbWUgQVMgbGFzdF9uYW1lXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzIGFcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgIE9OIGEuZG9jdG9yX3NjaGVkdWxlX2lkID0gZC5pZFxyXG4gICAgYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNEJBQSxPQUFBLENBQUFDLGNBQUEsR0FBQUEsY0FBQTtBQTFCQSxNQUFBQyxPQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBLFNBQXNCRixjQUFjQSxDQUFDRyxXQUFvQjs7SUFDdkQsTUFBTUMsS0FBSyxHQUFHLEVBQUU7SUFDaEIsTUFBTUMsTUFBTSxHQUFHLE1BQU0sSUFBQUosT0FBQSxDQUFBSyxLQUFLLEVBQ3hCOztXQUVPTCxPQUFBLENBQUFNLFVBQVU7O09BRWROLE9BQUEsQ0FBQU0sVUFBVTs7S0FFWixDQUNGO0lBQ0QsT0FBT0YsTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","getAppointment","mysql_1","require","searchValue","value","result","query","coreSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/appointment/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\n// export async function saveAppointment(eventData: IAppointment) {\r\n//   const insertEvent = await query<RowDataPacket[]>(\r\n//     `INSERT INTO ${coreSchema}.appointments\r\n//       (id, patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time, completed_time, arrival_time, status, note, created_at, updated_at)\r\n//      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n//     [\r\n//       eventData.id,\r\n//       eventData.patient_id,\r\n//       eventData.doctor_schedule_id,\r\n//       eventData.clinic_id,\r\n//       eventData.appointment_date,\r\n//       eventData.appointment_time,\r\n//       eventData.completed_time,\r\n//       eventData.arrival_time,\r\n//       eventData.status,\r\n//       eventData.note,\r\n//       new Date(),\r\n//       new Date(),\r\n//     ]\r\n//   );\r\n\r\n//   return insertEvent;\r\n// }\r\n\r\nexport async function getAppointment(searchValue?: string) {\r\n  const value = [];\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT a.*, d.first_name AS first_name,\r\n    d.last_name AS last_name\r\n    FROM ${coreSchema}.appointments a\r\n    LEFT JOIN \r\n     ${coreSchema}.doctors d\r\n     ON a.doctor_schedule_id = d.id\r\n    `\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BAA,OAAA,CAAAC,cAAA,GAAAA,cAAA;AA1BA,MAAAC,OAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,SAAsBF,cAAcA,CAACG,WAAoB;;IACvD,MAAMC,KAAK,GAAG,EAAE;IAChB,MAAMC,MAAM,GAAG,MAAM,IAAAJ,OAAA,CAAAK,KAAK,EACxB;;WAEOL,OAAA,CAAAM,UAAU;;OAEdN,OAAA,CAAAM,UAAU;;KAEZ,CACF;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsImdldCIsInVzZXJBZG1pbiIsInJlcSIsInJlcyIsImRhdGEiLCJVc2VyQWRtaW4iLCJnZXRVc2VyQWRtaW4iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFkbWluXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgVXNlckFkbWluIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvZ2V0VXNlckFkbWluYCxcclxuICBhc3luYyBmdW5jdGlvbiB1c2VyQWRtaW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlckFkbWluLmdldFVzZXJBZG1pbigpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBR0FFLFFBQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZUFBZSxFQUNmLFNBQWVDLFNBQVNBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsU0FBUyxDQUFDQyxZQUFZLEVBQUU7SUFDM0MsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0NELEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUNwRCxDQUFDO0NBQUEsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["service_1","require","app_response_1","public_1","router","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { UserAdmin } from \"./service\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport {router} from \"../../routes/public\";\r\n\r\n\r\nrouter.get(\r\n  `/getUserAdmin`,\r\n  async function userAdmin(req: Request, res: Response) {\r\n    const data = await UserAdmin.getUserAdmin();\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(buildResponse.code).json(buildResponse);\r\n  }\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGAE,QAAA,CAAAC,MAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FkbWluL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWRtaW5zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuY2xhc3MgVXNlckFkbWluIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJBZG1pbigpIHtcclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZ2V0QWRtaW5zKCk7XHJcbiAgICBpZiAoYWRtaW4pIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBhZG1pbiB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBVc2VyQWRtaW4gfTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\r\n\r\nclass UserAdmin {\r\n  public static async getUserAdmin() {\r\n    const admin = await getAdmins();\r\n    if (admin) {\r\n      return { message: \"ok\", admin };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport { UserAdmin };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.router.get(\"/api/patients\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.PatientService.getPatients();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.PatientService.checkExistMobile(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\n// router.post(\n//   `/admin/add-patient`,\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\n//     const formData = req.body;\n//     const data = await PatientService.registerPatient(formData);\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return formData;\n//   })\n// );\n// **** GetPatientDetial\npublic_1.router.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.PatientService.patientDetial(patientId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** uploadImage\n// routes.post(\n//   \"/admin/uploadImage\",\n//   uploadImgProfile.single(\"file\"),\n//   (req, res) => {\n//     if (!req.file) {\n//       return res.status(400).json({ error: \"No file uploaded\" });\n//     }\n//     res.json({\n//       message: \"File uploaded seccessfully\",\n//       filename: req.file.filename,\n//     });\n//     const imagePath = req.file.path;\n//     res.json({ imagePath });\n//   }\n// );\n// **** updatePatient\npublic_1.router.put(\"/admin/updatePatient\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield services_1.PatientService.updatePatient(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** deletePatient\npublic_1.router.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.asyncHandler)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.PatientService.deletePatient(idPateint);\n    const buildResponse = app_response_1.BuildResponse.deleted(idPateint);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post('/admin/add_favorite', (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    patient_id,\n    doctor_id\n  } = req.body;\n  const formData = {\n    patient_id,\n    doctor_id\n  };\n  const data = yield services_1.PatientService.addFavorite(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiX19hd2FpdGVyIiwibW9iaWxlIiwicGFyYW1zIiwiY2hlY2tFeGlzdE1vYmlsZSIsInBhdGllbnRJZCIsInBhdGllbnREZXRpYWwiLCJwdXQiLCJmb3JtRGF0YSIsImJvZHkiLCJ1cGRhdGVQYXRpZW50IiwidXBkYXRlZCIsImRlbGV0ZSIsImRlbGV0ZVBhdGllbnQiLCJpZFBhdGVpbnQiLCJkZWxldGVkIiwicG9zdCIsInBhdGllbnRfaWQiLCJkb2N0b3JfaWQiLCJhZGRGYXZvcml0ZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwYXRpZW50c1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBQYXRpZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XHJcblxyXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcclxuICBkZXN0aW5hdGlvbjogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNiKG51bGwsIFwicHVibGljL2ltYWdlc1wiKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgZmlsZS5vcmlnaW5hbG5hbWUpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkSW1nUHJvZmlsZSA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG4vLyAqKioqIEdldEFsbFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2FwaS9wYXRpZW50c1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcyhyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5nZXRQYXRpZW50cygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIGNoZWNrUGhvbmVOdW1iZXJFeGlzdHNcclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9jaGVjay1waG9uZS86cGhvbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGUgPSByZXEucGFyYW1zLm1vYmlsZTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5jaGVja0V4aXN0TW9iaWxlKG1vYmlsZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gYnVpbGRSZXNwb25zZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBhZGQtcGF0aWVudFxyXG4vLyByb3V0ZXIucG9zdChcclxuLy8gICBgL2FkbWluL2FkZC1wYXRpZW50YCxcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gYWRkUGF0aWVudChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuLy8gICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBmb3JtRGF0YTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxuLy8gKioqKiBHZXRQYXRpZW50RGV0aWFsXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9wYXRpZW50LWRldGlhbC86cGF0aWVudElkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBwYXRpZW50SWQgPSArcmVxLnBhcmFtcy5wYXRpZW50SWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucGF0aWVudERldGlhbChwYXRpZW50SWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKiogdXBsb2FkSW1hZ2VcclxuLy8gcm91dGVzLnBvc3QoXHJcbi8vICAgXCIvYWRtaW4vdXBsb2FkSW1hZ2VcIixcclxuLy8gICB1cGxvYWRJbWdQcm9maWxlLnNpbmdsZShcImZpbGVcIiksXHJcbi8vICAgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgICBpZiAoIXJlcS5maWxlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5vIGZpbGUgdXBsb2FkZWRcIiB9KTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJlcy5qc29uKHtcclxuLy8gICAgICAgbWVzc2FnZTogXCJGaWxlIHVwbG9hZGVkIHNlY2Nlc3NmdWxseVwiLFxyXG4vLyAgICAgICBmaWxlbmFtZTogcmVxLmZpbGUuZmlsZW5hbWUsXHJcbi8vICAgICB9KTtcclxuLy8gICAgIGNvbnN0IGltYWdlUGF0aCA9IHJlcS5maWxlLnBhdGg7XHJcbi8vICAgICByZXMuanNvbih7IGltYWdlUGF0aCB9KTtcclxuLy8gICB9XHJcbi8vICk7XHJcbi8vICoqKiogdXBkYXRlUGF0aWVudFxyXG5yb3V0ZXIucHV0KFxyXG4gIFwiL2FkbWluL3VwZGF0ZVBhdGllbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIGRlbGV0ZVBhdGllbnRcclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9hZG1pbi9kZWxldGVQYXRpZW50LzppZFBhdGVpbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaWRQYXRlaW50ID0gK3JlcS5wYXJhbXMuaWRQYXRlaW50O1xyXG4gICAgYXdhaXQgUGF0aWVudFNlcnZpY2UuZGVsZXRlUGF0aWVudChpZFBhdGVpbnQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZChpZFBhdGVpbnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICAnL2FkbWluL2FkZF9mYXZvcml0ZScsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgeyBwYXRpZW50X2lkLCBkb2N0b3JfaWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSB7cGF0aWVudF9pZCxkb2N0b3JfaWR9XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuYWRkRmF2b3JpdGUoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcblxyXG4gIFxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFBRSxVQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxRQUFBLEdBQUFDLGVBQUEsQ0FBQUwsT0FBQTtBQUVBLE1BQU1NLE9BQU8sR0FBR0YsUUFBQSxDQUFBRyxPQUFNLENBQUNDLFdBQVcsQ0FBQztFQUNqQ0MsV0FBVyxFQUFFQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxLQUFJO0lBQzdCQSxFQUFFLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQztFQUMzQixDQUFDO0VBQ0RDLFFBQVEsRUFBRUEsQ0FBQ0gsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUMxQkEsRUFBRSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDRyxZQUFZLENBQUM7RUFDN0I7Q0FDRCxDQUFDO0FBRUYsTUFBTUMsZ0JBQWdCLEdBQUcsSUFBQVgsUUFBQSxDQUFBRyxPQUFNLEVBQUM7RUFBRUQ7QUFBTyxDQUFFLENBQUM7QUFFNUM7QUFDQUwsUUFBQSxDQUFBZSxNQUFNLENBQUNDLEdBQUcsQ0FDUixlQUFlLEVBQ2YsSUFBQWxCLGVBQUEsQ0FBQW1CLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxDQUFDVCxHQUFR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","map":{"version":3,"names":["async_handler_1","require","public_1","services_1","app_response_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","getNavItems","res","data","PatientService","getPatients","buildResponse","BuildResponse","status","code","json","__awaiter","mobile","params","checkExistMobile","patientId","patientDetial","put","formData","body","updatePatient","updated","delete","deletePatient","idPateint","deleted","post","patient_id","doctor_id","addFavorite"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/patients/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { PatientService } from \"./services\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/api/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\n// router.post(\r\n//   `/admin/add-patient`,\r\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\r\n//     const formData = req.body;\r\n//     const data = await PatientService.registerPatient(formData);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return formData;\r\n//   })\r\n// );\r\n\r\n// **** GetPatientDetial\r\nrouter.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** uploadImage\r\n// routes.post(\r\n//   \"/admin/uploadImage\",\r\n//   uploadImgProfile.single(\"file\"),\r\n//   (req, res) => {\r\n//     if (!req.file) {\r\n//       return res.status(400).json({ error: \"No file uploaded\" });\r\n//     }\r\n//     res.json({\r\n//       message: \"File uploaded seccessfully\",\r\n//       filename: req.file.filename,\r\n//     });\r\n//     const imagePath = req.file.path;\r\n//     res.json({ imagePath });\r\n//   }\r\n// );\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** deletePatient\r\nrouter.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  '/admin/add_favorite',\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const { patient_id, doctor_id } = req.body;\r\n    const formData = {patient_id,doctor_id}\r\n    const data = await PatientService.addFavorite(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n\r\n  \r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/doctors\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const filters = {\n    name: req.query.name,\n    service_id: req.query.service_id,\n    specialty_id: req.query.specialty_id,\n    city_id: req.query.city_id,\n    insurance_id: req.query.insurance_id,\n    doctor_id: req.query.doctor_id,\n    patient_id: req.query.patient_id,\n    isPopular: req.query.isPopular,\n    minRating: req.query.minRating ? parseFloat(req.query.minRating) : undefined,\n    maxRating: req.query.maxRating ? parseFloat(req.query.maxRating) : undefined\n  };\n  const data = yield service_1.DoctorsService.getDoctors(filters);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   \"/getMostPopularDoctor\",\n//   asyncHandler(async (req: any, res: any) => {\n//     const data = await DoctorsService.getMostPopularDoctors();\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield service_1.DoctorsService.checkDoctorPhoneNumberExists(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/add-doctor`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.registerDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/doctor-detial/:doctorId`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const doctorId = +req.params.doctorId;\n//     const data = await DoctorsService.doctorDetial(doctorId);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.put(\"/admin/updateDoctor\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.updateDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/countDoctorClick`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const id = req.body.id;\n  const data = service_1.DoctorsService.recordDoctorProfileView(id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/addComment`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const comment = req.body.comment;\n  const data = yield service_1.DoctorsService.addComment(comment);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/admin/getSpecialties`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getSpecialties();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/get-sub-specialties/:specialtyId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const specialtyId = parseInt(req.params.specialtyId, 10);\n  if (isNaN(specialtyId)) {\n    return res.status(400).json({\n      error: \"Invalid specialty ID\"\n    });\n  }\n  const data = yield service_1.DoctorsService.getSubSpecialtiesById(specialtyId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/filterSpecialtyById/:id`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const queryParams = +req.params.id;\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.get(`/admin/filterServicesById/:id`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const queryParams = +req.params.id;\n  const data = yield service_1.DoctorsService.filterServicesById(queryParams);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/insertReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const dataReviews = req.body;\n  const data = yield service_1.DoctorsService.insertReviews(dataReviews);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/getReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getReviews();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:id/doctor_schedules\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctor_id = +req.params.id;\n  const consultatio_types_available = req.query.consultatio_types_available;\n  const data = yield service_1.DoctorsService.doctorSchadules(doctor_id, consultatio_types_available);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:schedule_id/schedule-time-availability\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const schedule_id = +req.params.schedule_id;\n  const data = yield service_1.DoctorsService.doctorScheduleTimeAvailability(schedule_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/doctors/:doctor_id/like`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const likes = req.body.formData;\n  const data = yield service_1.DoctorsService.toggleLike(likes);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/doctor/get_likes`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patient_id = Number(req.query.param);\n  const data = yield service_1.DoctorsService.getDcotorLike(patient_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.put(`/doctors/:id/booked`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctor_schedule_id = +req.params.id;\n  const {\n    patient_id,\n    clinic_id,\n    appointment_date,\n    appointment_time\n  } = req.body;\n  if (!patient_id || !clinic_id || !appointment_date || !appointment_time) {\n    return res.status(400).json({\n      message: \"Missing required fields\"\n    });\n  }\n  try {\n    const data = yield service_1.DoctorsService.booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  } catch (error) {\n    console.error(\"Error booking appointment:\", error);\n    return res.status(500).json({\n      message: \"Internal Server Error\"\n    });\n  }\n})));\npublic_1.router.get(`/doctors/services`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.fetchServices();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImZpbHRlcnMiLCJuYW1lIiwicXVlcnkiLCJzZXJ2aWNlX2lkIiwic3BlY2lhbHR5X2lkIiwiY2l0eV9pZCIsImluc3VyYW5jZV9pZCIsImRvY3Rvcl9pZCIsInBhdGllbnRfaWQiLCJpc1BvcHVsYXIiLCJtaW5SYXRpbmciLCJwYXJzZUZsb2F0IiwidW5kZWZpbmVkIiwibWF4UmF0aW5nIiwiZGF0YSIsIkRvY3RvcnNTZXJ2aWNlIiwiZ2V0RG9jdG9ycyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJtb2JpbGUiLCJwYXJhbXMiLCJjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzIiwicG9zdCIsImZvcm1EYXRhIiwiYm9keSIsInJlZ2lzdGVyRG9jdG9yIiwicHV0IiwidXBkYXRlRG9jdG9yIiwidXBkYXRlZCIsImlkIiwicmVjb3JkRG9jdG9yUHJvZmlsZVZpZXciLCJjb21tZW50IiwiYWRkQ29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwic3BlY2lhbHR5SWQiLCJwYXJzZUludCIsImlzTmFOIiwiZXJyb3IiLCJnZXRTdWJTcGVjaWFsdGllc0J5SWQiLCJxdWVyeVBhcmFtcyIsImZpbHRlclNlcnZpY2VzQnlJZCIsImRhdGFSZXZpZXdzIiwiaW5zZXJ0UmV2aWV3cyIsImdldFJldmlld3MiLCJjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUiLCJkb2N0b3JTY2hhZHVsZXMiLCJzY2hlZHVsZV9pZCIsImRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eSIsImxpa2VzIiwidG9nZ2xlTGlrZSIsIk51bWJlciIsInBhcmFtIiwiZ2V0RGNvdG9yTGlrZSIsImRvY3Rvcl9zY2hlZHVsZV9pZCIsImNsaW5pY19pZCIsImFwcG9pbnRtZW50X2RhdGUiLCJhcHBvaW50bWVudF90aW1lIiwibWVzc2FnZSIsImJvb2tlZCIsImNvbnNvbGUiLCJmZXRjaFNlcnZpY2VzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRvY3RvcnNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBBdXRob3JpemF0aW9uIH0gZnJvbSBcIi4uLy4uL21pZGRsZXdhcmVzL2F1dGhvcml6YXRpb25cIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEb2N0b3JzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZG9jdG9yc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0ge1xyXG4gICAgICBuYW1lOiByZXEucXVlcnkubmFtZSBhcyBzdHJpbmcsXHJcbiAgICAgIHNlcnZpY2VfaWQ6IHJlcS5xdWVyeS5zZXJ2aWNlX2lkIGFzIHN0cmluZyxcclxuICAgICAgc3BlY2lhbHR5X2lkOiByZXEucXVlcnkuc3BlY2lhbHR5X2lkIGFzIHN0cmluZyxcclxuICAgICAgY2l0eV9pZDogcmVxLnF1ZXJ5LmNpdHlfaWQgYXMgc3RyaW5nLFxyXG4gICAgICBpbnN1cmFuY2VfaWQ6IHJlcS5xdWVyeS5pbnN1cmFuY2VfaWQgYXMgc3RyaW5nLFxyXG4gICAgICBkb2N0b3JfaWQ6IHJlcS5xdWVyeS5kb2N0b3JfaWQgYXMgc3RyaW5nLFxyXG4gICAgICBwYXRpZW50X2lkOiByZXEucXVlcnkucGF0aWVudF9pZCBhcyBzdHJpbmcsXHJcbiAgICAgIGlzUG9wdWxhcjogcmVxLnF1ZXJ5LmlzUG9wdWxhciBhcyBib29sZWFuLFxyXG4gICAgICBtaW5SYXRpbmc6IHJlcS5xdWVyeS5taW5SYXRpbmdcclxuICAgICAgICA/IHBhcnNlRmxvYXQocmVxLnF1ZXJ5Lm1pblJhdGluZyBhcyBzdHJpbmcpXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIG1heFJhdGluZzogcmVxLnF1ZXJ5Lm1heFJhdGluZ1xyXG4gICAgICAgID8gcGFyc2VGbG9hdChyZXEucXVlcnkubWF4UmF0aW5nIGFzIHN0cmluZylcclxuICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0RG9jdG9ycyhmaWx0ZXJzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9nZXRNb3N0UG9wdWxhckRvY3RvclwiLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0TW9zdFBvcHVsYXJEb2N0b3JzKCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgfSlcclxuLy8gKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvYWRtaW4vY2hlY2stcGhvbmUvOnBob25lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlID0gcmVxLnBhcmFtcy5tb2JpbGU7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZC1kb2N0b3JgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UucmVnaXN0ZXJEb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyByb3V0ZXIuZ2V0KFxyXG4vLyAgIGAvYWRtaW4vZG9jdG9yLWRldGlhbC86ZG9jdG9ySWRgLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuLy8gICAgIGNvbnN0IGRvY3RvcklkID0gK3JlcS5wYXJhbXMuZG9jdG9ySWQ7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZG9jdG9yRGV0aWFsKGRvY3RvcklkKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9hZG1pbi91cGRhdGVEb2N0b3JcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLnVwZGF0ZURvY3Rvcihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS51cGRhdGVkKGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2NvdW50RG9jdG9yQ2xpY2tgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGlkID0gcmVxLmJvZHkuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gRG9jdG9yc1NlcnZpY2UucmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcoaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZENvbW1lbnRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmFkZENvbW1lbnQoY29tbWVudCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9nZXRTcGVjaWFsdGllc2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFNwZWNpYWx0aWVzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9nZXQtc3ViLXNwZWNpYWx0aWVzLzpzcGVjaWFsdHlJZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3Qgc3BlY2lhbHR5SWQgPSBwYXJzZUludChyZXEucGFyYW1zLnNwZWNpYWx0eUlkLCAxMCk7XHJcblxyXG4gICAgaWYgKGlzTmFOKHNwZWNpYWx0eUlkKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHNwZWNpYWx0eSBJRFwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgYC9hZG1pbi9maWx0ZXJTcGVjaWFsdHlCeUlkLzppZGAsXHJcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4vLyAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSArcmVxLnBhcmFtcy5pZDtcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5maWx0ZXJTcGVjaWFsdHlCeUlkKHF1ZXJ5UGFyYW1zKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvYWRtaW4vZmlsdGVyU2VydmljZXNCeUlkLzppZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5maWx0ZXJTZXJ2aWNlc0J5SWQocXVlcnlQYXJhbXMpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vaW5zZXJ0UmV2aWV3c2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YVJldmlld3MgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5pbnNlcnRSZXZpZXdzKGRhdGFSZXZpZXdzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvZ2V0UmV2aWV3c2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFJldmlld3MoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9kb2N0b3JzLzppZC9kb2N0b3Jfc2NoZWR1bGVzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZG9jdG9yX2lkID0gK3JlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUgPSByZXEucXVlcnkuY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmRvY3RvclNjaGFkdWxlcyhcclxuICAgICAgZG9jdG9yX2lkLFxyXG4gICAgICBjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGVcclxuICAgICk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBcIi9kb2N0b3JzLzpzY2hlZHVsZV9pZC9zY2hlZHVsZS10aW1lLWF2YWlsYWJpbGl0eVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHNjaGVkdWxlX2lkID0gK3JlcS5wYXJhbXMuc2NoZWR1bGVfaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KFxyXG4gICAgICBzY2hlZHVsZV9pZFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgYC9kb2N0b3JzLzpkb2N0b3JfaWQvbGlrZWAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbGlrZXMgPSByZXEuYm9keS5mb3JtRGF0YTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS50b2dnbGVMaWtlKGxpa2VzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2RvY3Rvci9nZXRfbGlrZXNgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHBhdGllbnRfaWQgPSBOdW1iZXIocmVxLnF1ZXJ5LnBhcmFtKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXREY290b3JMaWtlKHBhdGllbnRfaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucHV0KFxyXG4gIGAvZG9jdG9ycy86aWQvYm9va2VkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkb2N0b3Jfc2NoZWR1bGVfaWQgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IHsgcGF0aWVudF9pZCwgY2xpbmljX2lkLCBhcHBvaW50bWVudF9kYXRlLCBhcHBvaW50bWVudF90aW1lIH0gPVxyXG4gICAgICByZXEuYm9keTtcclxuICAgIGlmICghcGF0aWVudF9pZCB8fCAhY2xpbmljX2lkIHx8ICFhcHBvaW50bWVudF9kYXRlIHx8ICFhcHBvaW50bWVudF90aW1lKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZHNcIiB9KTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5ib29rZWQoXHJcbiAgICAgICAgZG9jdG9yX3NjaGVkdWxlX2lkLFxyXG4gICAgICAgIHBhdGllbnRfaWQsXHJcbiAgICAgICAgY2xpbmljX2lkLFxyXG4gICAgICAgIGFwcG9pbnRtZW50X2RhdGUsXHJcbiAgICAgICAgYXBwb2ludG1lbnRfdGltZVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBib29raW5nIGFwcG9pbnRtZW50OlwiLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBgL2RvY3RvcnMvc2VydmljZXNgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5mZXRjaFNlcnZpY2VzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLFVBQVUsRUFDVixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsSUFBSSxFQUFFSixHQUFHLENBQUNLLEtBQUssQ0FBQ0QsSUFBYztJQUM5QkUsVUFBVSxFQUFFTixHQUFHLENBQUNLLEtBQUssQ0FBQ0MsVUFBb0I7SUFDMUNDLFlBQVksRUFBRVAsR0FBRyxDQUFDSyxLQUFLLENBQUNFLFlBQXNCO0lBQzlDQyxPQUFPLEVBQUVSLEdBQUcsQ0FBQ0ssS0FBSyxDQUFDRyxPQUFpQjtJQUNwQ0MsWUFBWSxFQUFFVCxHQUFHLENBQUNLLEtBQUssQ0FBQ0ksWUFBc0I7SUFD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","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","filters","name","query","service_id","specialty_id","city_id","insurance_id","doctor_id","patient_id","isPopular","minRating","parseFloat","undefined","maxRating","data","DoctorsService","getDoctors","buildResponse","BuildResponse","status","code","json","mobile","params","checkDoctorPhoneNumberExists","post","formData","body","registerDoctor","put","updateDoctor","updated","id","recordDoctorProfileView","comment","addComment","getSpecialties","specialtyId","parseInt","isNaN","error","getSubSpecialtiesById","queryParams","filterServicesById","dataReviews","insertReviews","getReviews","consultatio_types_available","doctorSchadules","schedule_id","doctorScheduleTimeAvailability","likes","toggleLike","Number","param","getDcotorLike","doctor_schedule_id","clinic_id","appointment_date","appointment_time","message","booked","console","fetchServices"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/doctors/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { Authorization } from \"../../middlewares/authorization\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DoctorsService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/doctors\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const filters = {\r\n      name: req.query.name as string,\r\n      service_id: req.query.service_id as string,\r\n      specialty_id: req.query.specialty_id as string,\r\n      city_id: req.query.city_id as string,\r\n      insurance_id: req.query.insurance_id as string,\r\n      doctor_id: req.query.doctor_id as string,\r\n      patient_id: req.query.patient_id as string,\r\n      isPopular: req.query.isPopular as boolean,\r\n      minRating: req.query.minRating\r\n        ? parseFloat(req.query.minRating as string)\r\n        : undefined,\r\n      maxRating: req.query.maxRating\r\n        ? parseFloat(req.query.maxRating as string)\r\n        : undefined,\r\n    };\r\n    const data = await DoctorsService.getDoctors(filters);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   \"/getMostPopularDoctor\",\r\n//   asyncHandler(async (req: any, res: any) => {\r\n//     const data = await DoctorsService.getMostPopularDoctors();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await DoctorsService.checkDoctorPhoneNumberExists(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/add-doctor`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.registerDoctor(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/doctor-detial/:doctorId`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const doctorId = +req.params.doctorId;\r\n//     const data = await DoctorsService.doctorDetial(doctorId);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n\r\nrouter.put(\r\n  \"/admin/updateDoctor\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.updateDoctor(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/countDoctorClick`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const id = req.body.id;\r\n    const data = DoctorsService.recordDoctorProfileView(id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/addComment`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const comment = req.body.comment;\r\n    const data = await DoctorsService.addComment(comment);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/getSpecialties`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getSpecialties();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/get-sub-specialties/:specialtyId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const specialtyId = parseInt(req.params.specialtyId, 10);\r\n\r\n    if (isNaN(specialtyId)) {\r\n      return res.status(400).json({ error: \"Invalid specialty ID\" });\r\n    }\r\n\r\n    const data = await DoctorsService.getSubSpecialtiesById(specialtyId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/filterSpecialtyById/:id`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const queryParams = +req.params.id;\r\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\nrouter.get(\r\n  `/admin/filterServicesById/:id`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const queryParams = +req.params.id;\r\n    const data = await DoctorsService.filterServicesById(queryParams);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  `/admin/insertReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const dataReviews = req.body;\r\n    const data = await DoctorsService.insertReviews(dataReviews);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/getReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getReviews();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/doctors/:id/doctor_schedules\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctor_id = +req.params.id;\r\n    const consultatio_types_available = req.query.consultatio_types_available;\r\n    const data = await DoctorsService.doctorSchadules(\r\n      doctor_id,\r\n      consultatio_types_available\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  \"/doctors/:schedule_id/schedule-time-availability\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const schedule_id = +req.params.schedule_id;\r\n    const data = await DoctorsService.doctorScheduleTimeAvailability(\r\n      schedule_id\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/doctors/:doctor_id/like`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const likes = req.body.formData;\r\n    const data = await DoctorsService.toggleLike(likes);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/doctor/get_likes`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patient_id = Number(req.query.param);\r\n    const data = await DoctorsService.getDcotorLike(patient_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  `/doctors/:id/booked`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctor_schedule_id = +req.params.id;\r\n    const { patient_id, clinic_id, appointment_date, appointment_time } =\r\n      req.body;\r\n    if (!patient_id || !clinic_id || !appointment_date || !appointment_time) {\r\n      return res.status(400).json({ message: \"Missing required fields\" });\r\n    }\r\n    try {\r\n      const data = await DoctorsService.booked(\r\n        doctor_schedule_id,\r\n        patient_id,\r\n        clinic_id,\r\n        appointment_date,\r\n        appointment_time\r\n      );\r\n      const buildResponse = BuildResponse.get(data);\r\n      return res.status(buildResponse.code).json(buildResponse);\r\n    } catch (error) {\r\n      console.error(\"Error booking appointment:\", error);\r\n      return res.status(500).json({ message: \"Internal Server Error\" });\r\n    }\r\n  })\r\n);\r\nrouter.get(\r\n  `/doctors/services`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.fetchServices();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741835687129},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DoctorsService = void 0;\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst moment = require(\"moment\");\nclass DoctorsService {\n  static getDoctors(filters) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctorsFromElastic)(filters);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  // public static async getMostPopularDoctors() {\n  //   const data = await getMostPopularDoctors();\n  //   if (data) {\n  //     return { message: \"ok\", data };\n  //   } else {\n  //     return null;\n  //   }\n  // }\n  static checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkDoctorPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  // public static async doctorDetial(doctortId: number) {\n  //   const data = await doctorDetail(doctortId);\n  //   if (data) {\n  //     return { message: \"ok\", data };\n  //   } else {\n  //     return null;\n  //   }\n  // }\n  static updateDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static recordDoctorProfileView(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.recordDoctorProfileView)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addComment(comment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addComment)(comment);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSpecialties() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSpecialties)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSubSpecialtiesById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSubSpecialtiesById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterSpecialtyById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterSpecialtyById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterServicesById(serviceId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterServicesById)(serviceId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static insertReviews(reviewData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const checkExistingFeedback = yield (0, db_1.existingFeedback)(reviewData);\n      if (checkExistingFeedback.length > 0) {\n        throw new response_error_1.ResponseError.BadRequest(\"You have already submitted feedback for this doctor.\");\n      } else {\n        const data = yield (0, db_1.insertReviews)(reviewData);\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static getReviews() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getReviews)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorSchadules(doctor_id, consultation_types) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorSchadules)(doctor_id, consultation_types);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorScheduleTimeAvailability(schedule_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorScheduleTimeAvailability)(schedule_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n    return __awaiter(this, void 0, void 0, function* () {\n      appointment_date = moment(appointment_date).format(\"YYYY-MM-DD\");\n      const data = yield (0, db_1.booked)(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time);\n      return data ? {\n        message: \"ok\",\n        data\n      } : null;\n    });\n  }\n  static fetchServices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getServices)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static toggleLike(likeInfo) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.like)(likeInfo);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getDcotorLike(patient_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctoLike)(patient_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.DoctorsService = DoctorsService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNwb25zZV9lcnJvcl8xIiwicmVxdWlyZSIsImRiXzEiLCJtb21lbnQiLCJEb2N0b3JzU2VydmljZSIsImdldERvY3RvcnMiLCJmaWx0ZXJzIiwiZGF0YSIsImdldERvY3RvcnNGcm9tRWxhc3RpYyIsIm1lc3NhZ2UiLCJjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzIiwibW9iaWxlIiwicmVnaXN0ZXJEb2N0b3IiLCJmb3JtRGF0YSIsImFkZERvY3RvciIsInVwZGF0ZURvY3RvciIsInJlY29yZERvY3RvclByb2ZpbGVWaWV3IiwiaWQiLCJhZGRDb21tZW50IiwiY29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwiZ2V0U3ViU3BlY2lhbHRpZXNCeUlkIiwic3BlY2lhbHR5SWQiLCJmaWx0ZXJTcGVjaWFsdHlCeUlkIiwiZmlsdGVyU2VydmljZXNCeUlkIiwic2VydmljZUlkIiwiaW5zZXJ0UmV2aWV3cyIsInJldmlld0RhdGEiLCJjaGVja0V4aXN0aW5nRmVlZGJhY2siLCJleGlzdGluZ0ZlZWRiYWNrIiwibGVuZ3RoIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yX2lkIiwiY29uc3VsdGF0aW9uX3R5cGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5Iiwic2NoZWR1bGVfaWQiLCJib29rZWQiLCJkb2N0b3Jfc2NoZWR1bGVfaWQiLCJwYXRpZW50X2lkIiwiY2xpbmljX2lkIiwiYXBwb2ludG1lbnRfZGF0ZSIsImFwcG9pbnRtZW50X3RpbWUiLCJmb3JtYXQiLCJmZXRjaFNlcnZpY2VzIiwiZ2V0U2VydmljZXMiLCJ0b2dnbGVMaWtlIiwibGlrZUluZm8iLCJsaWtlIiwiZ2V0RGNvdG9yTGlrZSIsImdldERvY3RvTGlrZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZG9jdG9ycy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tbWVudHNEVE8sXHJcbiAgRG9jdG9yc0RUTyxcclxuICBsaWtlRFRPLFxyXG4gIFJldmlld3NEVE8sXHJcbn0gZnJvbSBcIi4uLy4uL21vZGVscy9kb2N0b3JzXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQge1xyXG4gIGFkZENvbW1lbnQsXHJcbiAgYWRkRG9jdG9yLFxyXG4gIGJvb2tlZCxcclxuICBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzLFxyXG4gIGRvY3RvclNjaGFkdWxlcyxcclxuICBkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHksXHJcbiAgZXhpc3RpbmdGZWVkYmFjayxcclxuICBmaWx0ZXJTZXJ2aWNlc0J5SWQsXHJcbiAgZmlsdGVyU3BlY2lhbHR5QnlJZCxcclxuICBnZXREb2N0b0xpa2UsXHJcbiAgZ2V0RG9jdG9yc0Zyb21FbGFzdGljLFxyXG4gIGdldFJldmlld3MsXHJcbiAgZ2V0U2VydmljZXMsXHJcbiAgZ2V0U3BlY2lhbHRpZXMsXHJcbiAgZ2V0U3ViU3BlY2lhbHRpZXNCeUlkLFxyXG4gIGluc2VydFJldmlld3MsXHJcbiAgbGlrZSxcclxuICByZWNvcmREb2N0b3JQcm9maWxlVmlldyxcclxuICB1cGRhdGVEb2N0b3IsXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBEb2N0b3JzU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXREb2N0b3JzKGZpbHRlcnM6IHtcclxuICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIGNpdHlfaWQ/OiBzdHJpbmc7XHJcbiAgICBkb2N0b3JfaWQ/OiBzdHJpbmc7XHJcbiAgICBzZXJ2aWNlX2lkOiBzdHJpbmc7XHJcbiAgICBzcGVjaWFsdHlfaWQ6IHN0cmluZztcclxuICAgIGluc3VyYW5jZV9pZDogc3RyaW5nO1xyXG4gICAgbWluUmF0aW5nPzogbnVtYmVyO1xyXG4gICAgbWF4UmF0aW5nPzogbnVtYmVyO1xyXG4gICAgaXNQb3B1bGFyPzogYm9vbGVhbjtcclxuICB9KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RG9jdG9yc0Zyb21FbGFzdGljKGZpbHRlcnMpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0TW9zdFBvcHVsYXJEb2N0b3JzKCkge1xyXG4gIC8vICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE1vc3RQb3B1bGFyRG9jdG9ycygpO1xyXG4gIC8vICAgaWYgKGRhdGEpIHtcclxuICAvLyAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICByZXR1cm4gbnVsbDtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzKFxyXG4gICAgbW9iaWxlOiBzdHJpbmdcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzKG1vYmlsZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWdpc3RlckRvY3Rvcihmb3JtRGF0YTogRG9jdG9yc0RUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZERvY3Rvcihmb3JtRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvckRldGlhbChkb2N0b3J0SWQ6IG51bWJlcikge1xyXG4gIC8vICAgY29uc3QgZGF0YSA9IGF3YWl0IGRvY3RvckRldGFpbChkb2N0b3J0SWQpO1xyXG4gIC8vICAgaWYgKGRhdGEpIHtcclxuICAvLyAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICByZXR1cm4gbnVsbDtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N0b3IoZm9ybURhdGE6IERvY3RvcnNEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVEb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcoaWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlY29yZERvY3RvclByb2ZpbGVWaWV3KGlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGFkZENvbW1lbnQoY29tbWVudDogQ29tbWVudHNEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGRDb21tZW50KGNvbW1lbnQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRTcGVjaWFsdGllcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRTcGVjaWFsdGllcygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFN1YlNwZWNpYWx0aWVzQnlJZChzcGVjaWFsdHlJZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5SWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGluc2VydFJldmlld3MocmV2aWV3RGF0YTogUmV2aWV3c0RUTykge1xyXG4gICAgY29uc3QgY2hlY2tFeGlzdGluZ0ZlZWRiYWNrID0gYXdhaXQgZXhpc3RpbmdGZWVkYmFjayhyZXZpZXdEYXRhKTtcclxuICAgIGlmIChjaGVja0V4aXN0aW5nRmVlZGJhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFxyXG4gICAgICAgIFwiWW91IGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgZmVlZGJhY2sgZm9yIHRoaXMgZG9jdG9yLlwiXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhKTtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFJldmlld3MoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UmV2aWV3cygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZG9jdG9yU2NoYWR1bGVzKFxyXG4gICAgZG9jdG9yX2lkOiBudW1iZXIsXHJcbiAgICBjb25zdWx0YXRpb25fdHlwZXM6IGFueVxyXG4gICkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRvY3RvclNjaGFkdWxlcyhkb2N0b3JfaWQsIGNvbnN1bHRhdGlvbl90eXBlcyk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eShzY2hlZHVsZV9pZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KHNjaGVkdWxlX2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGJvb2tlZChcclxuICAgIGRvY3Rvcl9zY2hlZHVsZV9pZDogbnVtYmVyLFxyXG4gICAgcGF0aWVudF9pZDogbnVtYmVyLFxyXG4gICAgY2xpbmljX2lkOiBudW1iZXIsXHJcbiAgICBhcHBvaW50bWVudF9kYXRlOiBzdHJpbmcsXHJcbiAgICBhcHBvaW50bWVudF90aW1lOiBzdHJpbmdcclxuICApIHtcclxuICAgIGFwcG9pbnRtZW50X2RhdGUgPSBtb21lbnQoYXBwb2ludG1lbnRfZGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBib29rZWQoXHJcbiAgICAgIGRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuICAgICAgcGF0aWVudF9pZCxcclxuICAgICAgY2xpbmljX2lkLFxyXG4gICAgICBhcHBvaW50bWVudF9kYXRlLFxyXG4gICAgICBhcHBvaW50bWVudF90aW1lXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGRhdGEgPyB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9IDogbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZmV0Y2hTZXJ2aWNlcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRTZXJ2aWNlcygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdG9nZ2xlTGlrZShsaWtlSW5mbzogbGlrZURUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGxpa2UobGlrZUluZm8pO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXREY290b3JMaWtlKHBhdGllbnRfaWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERvY3RvTGlrZShwYXRpZW50X2lkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAg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","map":{"version":3,"names":["response_error_1","require","db_1","moment","DoctorsService","getDoctors","filters","data","getDoctorsFromElastic","message","checkDoctorPhoneNumberExists","mobile","registerDoctor","formData","addDoctor","updateDoctor","recordDoctorProfileView","id","addComment","comment","getSpecialties","getSubSpecialtiesById","specialtyId","filterSpecialtyById","filterServicesById","serviceId","insertReviews","reviewData","checkExistingFeedback","existingFeedback","length","ResponseError","BadRequest","getReviews","doctorSchadules","doctor_id","consultation_types","doctorScheduleTimeAvailability","schedule_id","booked","doctor_schedule_id","patient_id","clinic_id","appointment_date","appointment_time","format","fetchServices","getServices","toggleLike","likeInfo","like","getDcotorLike","getDoctoLike","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/doctors/service.ts"],"sourcesContent":["import {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  addComment,\r\n  addDoctor,\r\n  booked,\r\n  checkDoctorPhoneNumberExists,\r\n  doctorSchadules,\r\n  doctorScheduleTimeAvailability,\r\n  existingFeedback,\r\n  filterServicesById,\r\n  filterSpecialtyById,\r\n  getDoctoLike,\r\n  getDoctorsFromElastic,\r\n  getReviews,\r\n  getServices,\r\n  getSpecialties,\r\n  getSubSpecialtiesById,\r\n  insertReviews,\r\n  like,\r\n  recordDoctorProfileView,\r\n  updateDoctor,\r\n} from \"./db\";\r\nconst moment = require(\"moment\");\r\n\r\nexport class DoctorsService {\r\n  public static async getDoctors(filters: {\r\n    name?: string;\r\n    id?: string;\r\n    city_id?: string;\r\n    doctor_id?: string;\r\n    service_id: string;\r\n    specialty_id: string;\r\n    insurance_id: string;\r\n    minRating?: number;\r\n    maxRating?: number;\r\n    isPopular?: boolean;\r\n  }) {\r\n    const data = await getDoctorsFromElastic(filters);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // public static async getMostPopularDoctors() {\r\n  //   const data = await getMostPopularDoctors();\r\n  //   if (data) {\r\n  //     return { message: \"ok\", data };\r\n  //   } else {\r\n  //     return null;\r\n  //   }\r\n  // }\r\n  public static async checkDoctorPhoneNumberExists(\r\n    mobile: string\r\n  ): Promise<boolean> {\r\n    const data = await checkDoctorPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  public static async registerDoctor(formData: DoctorsDTO) {\r\n    const data = await addDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // public static async doctorDetial(doctortId: number) {\r\n  //   const data = await doctorDetail(doctortId);\r\n  //   if (data) {\r\n  //     return { message: \"ok\", data };\r\n  //   } else {\r\n  //     return null;\r\n  //   }\r\n  // }\r\n  public static async updateDoctor(formData: DoctorsDTO) {\r\n    const data = await updateDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async recordDoctorProfileView(id: number) {\r\n    const data = await recordDoctorProfileView(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addComment(comment: CommentsDTO) {\r\n    const data = await addComment(comment);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSpecialties() {\r\n    const data = await getSpecialties();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSubSpecialtiesById(specialtyId: number) {\r\n    const data = await getSubSpecialtiesById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterSpecialtyById(specialtyId: number) {\r\n    const data = await filterSpecialtyById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterServicesById(serviceId: number) {\r\n    const data = await filterServicesById(serviceId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async insertReviews(reviewData: ReviewsDTO) {\r\n    const checkExistingFeedback = await existingFeedback(reviewData);\r\n    if (checkExistingFeedback.length > 0) {\r\n      throw new ResponseError.BadRequest(\r\n        \"You have already submitted feedback for this doctor.\"\r\n      );\r\n    } else {\r\n      const data = await insertReviews(reviewData);\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async getReviews() {\r\n    const data = await getReviews();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async doctorSchadules(\r\n    doctor_id: number,\r\n    consultation_types: any\r\n  ) {\r\n    const data = await doctorSchadules(doctor_id, consultation_types);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorScheduleTimeAvailability(schedule_id: number) {\r\n    const data = await doctorScheduleTimeAvailability(schedule_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async booked(\r\n    doctor_schedule_id: number,\r\n    patient_id: number,\r\n    clinic_id: number,\r\n    appointment_date: string,\r\n    appointment_time: string\r\n  ) {\r\n    appointment_date = moment(appointment_date).format(\"YYYY-MM-DD\");\r\n    const data = await booked(\r\n      doctor_schedule_id,\r\n      patient_id,\r\n      clinic_id,\r\n      appointment_date,\r\n      appointment_time\r\n    );\r\n    return data ? { message: \"ok\", data } : null;\r\n  }\r\n\r\n  public static async fetchServices() {\r\n    const data = await getServices();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async toggleLike(likeInfo: likeDTO) {\r\n    const data = await like(likeInfo);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getDcotorLike(patient_id: number) {\r\n    const data = await getDoctoLike(patient_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741835687128},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDoctorsFromElastic = getDoctorsFromElastic;\nexports.addDoctor = addDoctor;\nexports.getUserSuggestionPercentage = getUserSuggestionPercentage;\nexports.like = like;\nexports.getDoctoLike = getDoctoLike;\nexports.getServices = getServices;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.updateDoctor = updateDoctor;\nexports.recordDoctorProfileView = recordDoctorProfileView;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.getSubSpecialtiesById = getSubSpecialtiesById;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.getSuggestionsBySpecialty = getSuggestionsBySpecialty;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorSchadules = doctorSchadules;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nconst elasticsearch_1 = require(\"@elastic/elasticsearch\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\n// const esClient = new Client({ node: process.env.ELASTICSEARCH_URL });\nconst esClient = new elasticsearch_1.Client({\n  node: \"http://localhost:9200\",\n  auth: {\n    username: \"elastic\",\n    password: \"@Ali0011914505\"\n  }\n});\nfunction indexDoctorData(doctor) {\n  return __awaiter(this, void 0, void 0, function* () {\n    yield esClient.index({\n      index: \"doctors\",\n      id: doctor.id,\n      document: doctor\n    });\n  });\n}\nfunction getDoctorsFromElastic(filters) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const must = [];\n      if (filters.name) {\n        must.push({\n          match: {\n            name: filters.name\n          }\n        });\n      }\n      if (filters.doctor_id) {\n        must.push({\n          match: {\n            id: filters.doctor_id\n          }\n        });\n      }\n      if (filters.specialty_id) {\n        must.push({\n          match: {\n            specialty_id: filters.specialty_id\n          }\n        });\n      }\n      if (filters.service_id) {\n        must.push({\n          match: {\n            service_ids: filters.service_id\n          }\n        });\n      }\n      if (filters.insurance_id) {\n        must.push({\n          match: {\n            insurance_id: filters.insurance_id\n          }\n        });\n      }\n      if (filters.city_id) {\n        must.push({\n          match: {\n            \"addresses.city_id\": filters.city_id\n          }\n        });\n      }\n      if (filters.minRating !== undefined || filters.maxRating !== undefined) {\n        must.push({\n          range: {\n            average_rating: {\n              gte: filters.minRating || 0,\n              lte: filters.maxRating || 5\n            }\n          }\n        });\n      }\n      if (filters.isPopular) {\n        must.push({\n          range: {\n            average_rating: {\n              gte: 4\n            }\n          }\n        });\n      }\n      const query = must.length > 0 ? {\n        bool: {\n          must\n        }\n      } : {\n        match_all: {}\n      };\n      const body = yield esClient.search({\n        index: \"doctors\",\n        body: {\n          query\n        }\n      });\n      console.log(JSON.stringify(body, null, 2));\n      return body.hits.hits.map(hit => hit._source);\n    } catch (error) {\n      console.log(JSON.stringify(error.meta.body, null, 2));\n      console.error(\"Elasticsearch error:\", error);\n      return [];\n    }\n  });\n}\nfunction addDoctor(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctors\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, new Date(), new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction getUserSuggestionPercentage(doctorId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT COUNT(id) AS total_reviews,\n      SUM(CASE WHEN recommendation = 1 THEN 1 ELSE 0 END) AS total_recommended\n     FROM ${mysql_1.coreSchema}.doctor_reviews\n     WHERE doctor_id = ?`, {\n      values: [doctorId]\n    });\n    if (!result.length || result[0].total_reviews === 0) return 0;\n    return parseFloat((result[0].total_recommended / result[0].total_reviews * 100).toFixed(2));\n  });\n}\nfunction like(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const existingLike = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ? AND patient_id = ?`, {\n      values: [data.doctor_id, data.patient_id]\n    });\n    if (existingLike.length > 0) {\n      // Unlike the doctor: Remove the like\n      yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.doctor_likes \n       WHERE doctor_id = ? AND patient_id = ?`, {\n        values: [data.doctor_id, data.patient_id]\n      });\n    } else {\n      // Like the doctor: Insert new like record\n      yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \n       VALUES (?, ?, ?)`, {\n        values: [data.doctor_id, data.patient_id, 1]\n      });\n    }\n    // Update the doctor's is_liked status based on the total likes\n    const totalLikes = yield (0, mysql_1.query)(`SELECT COUNT(*) AS count FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ?`, {\n      values: [data.doctor_id]\n    });\n    const isLiked = totalLikes[0].count > 0 ? 1 : 0;\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.doctors \n     SET is_liked = ? \n     WHERE id = ?`, {\n      values: [isLiked, data.doctor_id]\n    });\n    return {\n      success: true,\n      isLiked\n    };\n  });\n}\nfunction getDoctoLike(patient_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT\n      d.*\n        FROM ${mysql_1.coreSchema}.doctor_likes dl\n        LEFT JOIN ${mysql_1.coreSchema}.doctors d\n        ON dl.doctor_id = d.id\n        WHERE dl.patient_id = ?`, {\n        values: [patient_id]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to get response\");\n    }\n  });\n}\nfunction getServices() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.services`);\n    return result;\n  });\n}\n// export async function getMostPopularDoctors(): Promise<any> {\n//   try {\n//     const result = await query<RowDataPacket[]>(\n//       `\n//       SELECT\n//         d.*,\n//         COALESCE(ld.id, 'No Location') AS location,\n//         s.name AS specialty_name,\n//         (SELECT AVG(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS average_rating,\n//         (SELECT COUNT(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS total_ratings\n//       FROM\n//         ${coreSchema}.doctors d\n//       LEFT JOIN\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\n//       LEFT JOIN\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       HAVING\n//         total_ratings > 3\n//       ORDER BY\n//         average_rating DESC,\n//         total_ratings DESC\n//       LIMIT 10;\n//       `\n//     );\n//     return result;\n//   } catch (error) {\n//     console.log(error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT mobile FROM ${mysql_1.coreSchema}.doctors\n      where mobile=?\n      `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nfunction updateDoctor(doctorData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.doctors\n        SET name = ?\n        WHERE id = ?\n      `, {\n      values: [doctorData.first_name, doctorData.id]\n    });\n    return result;\n  });\n}\nfunction recordDoctorProfileView(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const updateResult = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.doctors\n      SET click_count = click_count + 1\n      WHERE id = ?\n      `, {\n        values: [id]\n      });\n      return updateResult;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction addComment(comment) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.comments\n     (id, id, comment_text, rating)\n         VALUES (?, ?, ?, ?)`, {\n      values: [comment.id, comment.id, comment.comment_text, comment.rating]\n    });\n    return result;\n  });\n}\nfunction getSpecialties() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT *\n       FROM ${mysql_1.coreSchema}.specialties`);\n    return result;\n  });\n}\nfunction getSubSpecialtiesById(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const limit = 20; // Default limit\n      const offset = 0; // Default offset\n      const result = yield (0, mysql_1.query)(`SELECT \n        s.id AS specialty_id,\n        s.name AS specialty_name,\n        s.images AS specialty_image,\n        ss.id AS sub_specialty_id,\n        ss.sub_specialty AS sub_specialty_name\n      FROM ${mysql_1.coreSchema}.specialties s\n      LEFT JOIN ${mysql_1.coreSchema}.sub_specialties ss \n      ON s.id = ss.specialty_id\n      WHERE s.id = ? \n      ORDER BY ss.id;`, {\n        values: [specialtyId]\n      });\n      return result.map(row => ({\n        id: row.sub_specialty_id || null,\n        name: row.sub_specialty_name || \"N/A\",\n        images: row.specialty_image || \"default_image.jpeg\"\n      }));\n    } catch (error) {\n      console.error(\"Error fetching sub-specialties:\", error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterSpecialtyById(specialty) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n       SELECT \n        d.*, \n        COALESCE(ld.location, 'No Location') AS location,\n        s.name AS specialty_name,\n        (SELECT AVG(rating) \n         FROM ${mysql_1.coreSchema}.ratings r \n         WHERE r.id = d.id) AS average_rating\n      FROM \n        ${mysql_1.coreSchema}.doctors d\n      LEFT JOIN \n        ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.id\n      LEFT JOIN \n        ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n  \n      WHERE \n      s.id = ?;\n      `, {\n        values: [specialty]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"...\");\n    }\n  });\n}\nfunction getSuggestionsBySpecialty(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\n      FROM clinic_db.suggestions s\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\n      WHERE sp.id = ?;\n    `, [specialtyId]);\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterServicesById(serviceId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n   SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n    JOIN \n      ${mysql_1.coreSchema}.services srv  ON srv.specialty_id = s.id\n    WHERE \n    srv.id = ?;\n    `, {\n      values: [serviceId]\n    });\n    return result;\n  });\n}\nfunction existingFeedback(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`, {\n      values: [reviewData.user_id, reviewData.doctor_id]\n    });\n    return result;\n  });\n}\nfunction insertReviews(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_reviews\n        (doctor_id,\n          user_id,\n          comment,\n          recommendations,\n          rating,\n          professional_demeanor,\n          sufficient_time,\n          skill,\n          staff_behavior,\n          clinic_condition)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`, {\n        values: [reviewData.doctor_id, reviewData.user_id, reviewData.comment, reviewData.rating, reviewData.recommendations, reviewData.ratings.professional_demeanor, reviewData.ratings.sufficient_time, reviewData.ratings.skill, reviewData.ratings.staff_behavior, reviewData.ratings.clinic_condition]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction getReviews() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.doctor_reviews\n    `);\n    return result;\n  });\n}\nfunction doctorSchadules(doctor_id, consultatio_types_available) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const queryParams = [doctor_id];\n    try {\n      let queryStr = `\n   SELECT * FROM ${mysql_1.coreSchema}.doctor_schedules ds\n      WHERE doctor_id = ?\n    `;\n      if (consultatio_types_available) {\n        queryStr += \" AND ds.consultatio_types_available =?\";\n        queryParams.push(consultatio_types_available);\n      }\n      const result = yield (0, mysql_1.query)(queryStr, {\n        values: queryParams\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction doctorScheduleTimeAvailability(schedule_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT *\n      FROM ${mysql_1.coreSchema}.doctor_available_times \n      WHERE schedule_id = ?;\n      `, {\n        values: [schedule_id]\n      });\n      return result;\n    } catch (error) {\n      console.error(error); // Better to use console.error for errors\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    }\n  });\n}\nfunction booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n  return __awaiter(this, void 0, void 0, function* () {\n    var _a;\n    try {\n      const [existing] = yield (0, mysql_1.query)(`SELECT is_booked FROM ${mysql_1.coreSchema}.doctor_available_times WHERE id = ? FOR UPDATE`, {\n        values: [doctor_schedule_id]\n      });\n      if (!existing || ((_a = existing[0]) === null || _a === void 0 ? void 0 : _a.is_booked) === 1) {\n        throw new response_error_1.ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\n      }\n      const appointmentResult = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.appointments\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');`, {\n        values: [patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time]\n      });\n      return {\n        message: \"Appointment successfuly booked\",\n        appointmentId: appointmentResult.insertId\n      };\n    } catch (error) {\n      console.error(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    } finally {\n      console.log(\"final\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0RG9jdG9yc0Zyb21FbGFzdGljIiwiYWRkRG9jdG9yIiwiZ2V0VXNlclN1Z2dlc3Rpb25QZXJjZW50YWdlIiwibGlrZSIsImdldERvY3RvTGlrZSIsImdldFNlcnZpY2VzIiwiY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyIsInVwZGF0ZURvY3RvciIsInJlY29yZERvY3RvclByb2ZpbGVWaWV3IiwiYWRkQ29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwiZ2V0U3ViU3BlY2lhbHRpZXNCeUlkIiwiZmlsdGVyU3BlY2lhbHR5QnlJZCIsImdldFN1Z2dlc3Rpb25zQnlTcGVjaWFsdHkiLCJmaWx0ZXJTZXJ2aWNlc0J5SWQiLCJleGlzdGluZ0ZlZWRiYWNrIiwiaW5zZXJ0UmV2aWV3cyIsImdldFJldmlld3MiLCJkb2N0b3JTY2hhZHVsZXMiLCJkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkiLCJib29rZWQiLCJlbGFzdGljc2VhcmNoXzEiLCJyZXF1aXJlIiwibXlzcWxfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwidXVpZF8xIiwiZXNDbGllbnQiLCJDbGllbnQiLCJub2RlIiwiYXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJpbmRleERvY3RvckRhdGEiLCJkb2N0b3IiLCJpbmRleCIsImlkIiwiZG9jdW1lbnQiLCJmaWx0ZXJzIiwibXVzdCIsIm5hbWUiLCJwdXNoIiwibWF0Y2giLCJkb2N0b3JfaWQiLCJzcGVjaWFsdHlfaWQiLCJzZXJ2aWNlX2lkIiwic2VydmljZV9pZHMiLCJpbnN1cmFuY2VfaWQiLCJjaXR5X2lkIiwibWluUmF0aW5nIiwidW5kZWZpbmVkIiwibWF4UmF0aW5nIiwicmFuZ2UiLCJhdmVyYWdlX3JhdGluZyIsImd0ZSIsImx0ZSIsImlzUG9wdWxhciIsInF1ZXJ5IiwibGVuZ3RoIiwiYm9vbCIsIm1hdGNoX2FsbCIsImJvZHkiLCJzZWFyY2giLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImhpdHMiLCJtYXAiLCJoaXQiLCJfc291cmNlIiwiZXJyb3IiLCJtZXRhIiwiZGF0YSIsImNvbmZpcm1QYXNzd29yZCIsImZkUGFzc3dvcmQiLCJ2YWxpZFBhc3N3b3JkIiwiZG9jdG9yU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsIlJlc3BvbnNlRXJyb3IiLCJVbmF1dGhvcml6ZWQiLCJuZXdJZCIsInY0IiwicmVzdWx0IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInRva2VuX3ZlcmlmeSIsInZlcmlmeV9jb2RlIiwicGhvbmUiLCJEYXRlIiwibWVzc2FnZSIsIkludGVybmFsU2VydmVyIiwiZG9jdG9ySWQiLCJ0b3RhbF9yZXZpZXdzIiwicGFyc2VGbG9hdCIsInRvdGFsX3JlY29tbWVuZGVkIiwidG9GaXhlZCIsImV4aXN0aW5nTGlrZSIsInBhdGllbnRfaWQiLCJ0b3RhbExpa2VzIiwiaXNMaWtlZCIsImNvdW50Iiwic3VjY2VzcyIsIm1vYmlsZSIsImRvY3RvckRhdGEiLCJ1cGRhdGVSZXN1bHQiLCJjb21tZW50IiwiY29tbWVudF90ZXh0IiwicmF0aW5nIiwic3BlY2lhbHR5SWQiLCJsaW1pdCIsIm9mZnNldCIsInJvdyIsInN1Yl9zcGVjaWFsdHlfaWQiLCJzdWJfc3BlY2lhbHR5X25hbWUiLCJpbWFnZXMiLCJzcGVjaWFsdHlfaW1hZ2UiLCJzcGVjaWFsdHkiLCJzZXJ2aWNlSWQiLCJyZXZpZXdEYXRhIiwidXNlcl9pZCIsInJlY29tbWVuZGF0aW9ucyIsInJhdGluZ3MiLCJwcm9mZXNzaW9uYWxfZGVtZWFub3IiLCJzdWZmaWNpZW50X3RpbWUiLCJza2lsbCIsInN0YWZmX2JlaGF2aW9yIiwiY2xpbmljX2NvbmRpdGlvbiIsImNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSIsInF1ZXJ5UGFyYW1zIiwicXVlcnlTdHIiLCJzY2hlZHVsZV9pZCIsImRvY3Rvcl9zY2hlZHVsZV9pZCIsImNsaW5pY19pZCIsImFwcG9pbnRtZW50X2RhdGUiLCJhcHBvaW50bWVudF90aW1lIiwiZXhpc3RpbmciLCJfYSIsImlzX2Jvb2tlZCIsIkJhZFJlcXVlc3QiLCJhcHBvaW50bWVudFJlc3VsdCIsImFwcG9pbnRtZW50SWQiLCJpbnNlcnRJZCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJAZWxhc3RpYy9lbGFzdGljc2VhcmNoXCI7XHJcbmltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQge1xyXG4gIENvbW1lbnRzRFRPLFxyXG4gIERvY3RvcnNEVE8sXHJcbiAgbGlrZURUTyxcclxuICBSZXZpZXdzRFRPLFxyXG4gIFN1YlNwZWNpYWx0eSxcclxufSBmcm9tIFwiLi4vLi4vbW9kZWxzL2RvY3RvcnNcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IGRvY3RvclNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuXHJcbi8vIGNvbnN0IGVzQ2xpZW50ID0gbmV3IENsaWVudCh7IG5vZGU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVJMIH0pO1xyXG5cclxuY29uc3QgZXNDbGllbnQgPSBuZXcgQ2xpZW50KHtcclxuICBub2RlOiBcImh0dHA6Ly9sb2NhbGhvc3Q6OTIwMFwiLFxyXG4gIGF1dGg6IHsgdXNlcm5hbWU6IFwiZWxhc3RpY1wiLCBwYXNzd29yZDogXCJAQWxpMDAxMTkxNDUwNVwiIH0sXHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5kZXhEb2N0b3JEYXRhKGRvY3RvcjogYW55KSB7XHJcbiAgYXdhaXQgZXNDbGllbnQuaW5kZXgoe1xyXG4gICAgaW5kZXg6IFwiZG9jdG9yc1wiLFxyXG4gICAgaWQ6IGRvY3Rvci5pZCxcclxuICAgIGRvY3VtZW50OiBkb2N0b3IsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREb2N0b3JzRnJvbUVsYXN0aWMoZmlsdGVyczoge1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbiAgY2l0eV9pZD86IHN0cmluZztcclxuICBzZXJ2aWNlX2lkOiBzdHJpbmc7XHJcbiAgc3BlY2lhbHR5X2lkOiBzdHJpbmc7XHJcbiAgaW5zdXJhbmNlX2lkOiBzdHJpbmc7XHJcbiAgbWluUmF0aW5nPzogbnVtYmVyO1xyXG4gIGRvY3Rvcl9pZD86IHN0cmluZztcclxuICBtYXhSYXRpbmc/OiBudW1iZXI7XHJcbiAgaXNQb3B1bGFyPzogYm9vbGVhbjtcclxufSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBtdXN0OiBhbnlbXSA9IFtdO1xyXG4gICAgaWYgKGZpbHRlcnMubmFtZSkge1xyXG4gICAgICBtdXN0LnB1c2goeyBtYXRjaDogeyBuYW1lOiBmaWx0ZXJzLm5hbWUgfSB9KTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLmRvY3Rvcl9pZCkge1xyXG4gICAgICBtdXN0LnB1c2goeyBtYXRjaDogeyBpZDogZmlsdGVycy5kb2N0b3JfaWQgfSB9KTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLnNwZWNpYWx0eV9pZCkge1xyXG4gICAgICBtdXN0LnB1c2goeyBtYXRjaDogeyBzcGVjaWFsdHlfaWQ6IGZpbHRlcnMuc3BlY2lhbHR5X2lkIH0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVycy5zZXJ2aWNlX2lkKSB7XHJcbiAgICAgIG11c3QucHVzaCh7IG1hdGNoOiB7IHNlcnZpY2VfaWRzOiBmaWx0ZXJzLnNlcnZpY2VfaWQgfSB9KTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLmluc3VyYW5jZV9pZCkge1xyXG4gICAgICBtdXN0LnB1c2goe1xyXG4gICAgICAgIG1hdGNoOiB7IGluc3VyYW5jZV9pZDogZmlsdGVycy5pbnN1cmFuY2VfaWQgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVycy5jaXR5X2lkKSB7XHJcbiAgICAgIG11c3QucHVzaCh7XHJcbiAgICAgICAgbWF0Y2g6IHsgXCJhZGRyZXNzZXMuY2l0eV9pZFwiOiBmaWx0ZXJzLmNpdHlfaWQgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpbHRlcnMubWluUmF0aW5nICE9PSB1bmRlZmluZWQgfHwgZmlsdGVycy5tYXhSYXRpbmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBtdXN0LnB1c2goe1xyXG4gICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICBhdmVyYWdlX3JhdGluZzoge1xyXG4gICAgICAgICAgICBndGU6IGZpbHRlcnMubWluUmF0aW5nIHx8IDAsXHJcbiAgICAgICAgICAgIGx0ZTogZmlsdGVycy5tYXhSYXRpbmcgfHwgNSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVycy5pc1BvcHVsYXIpIHtcclxuICAgICAgbXVzdC5wdXNoKHtcclxuICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgYXZlcmFnZV9yYXRpbmc6IHtcclxuICAgICAgICAgICAgZ3RlOiA0LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBxdWVyeSA9IG11c3QubGVuZ3RoID4gMCA/IHsgYm9vbDogeyBtdXN0IH0gfSA6IHsgbWF0Y2hfYWxsOiB7fSB9O1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IGVzQ2xpZW50LnNlYXJjaCh7XHJcbiAgICAgIGluZGV4OiBcImRvY3RvcnNcIixcclxuICAgICAgYm9keToge1xyXG4gICAgICAgIHF1ZXJ5LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSk7XHJcblxyXG4gICAgcmV0dXJuIGJvZHkuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+IGhpdC5fc291cmNlKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlcnJvci5tZXRhLmJvZHksIG51bGwsIDIpKTtcclxuXHJcbiAgICBjb25zb2xlLmVycm9yKFwiRWxhc3RpY3NlYXJjaCBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZERvY3RvcihkYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YS5wYXNzd29yZDtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YS5wYXNzd29yZDtcclxuXHJcbiAgY29uc3QgZmRQYXNzd29yZCA9IHsgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCB9O1xyXG4gIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBkb2N0b3JTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGlmICh2YWxpZFBhc3N3b3JkLmVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJQYXNzd29yZCBpcyBpbnZhbGlkXCIpO1xyXG4gIH1cclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgICAgIChpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxlbWFpbCxwYXNzd29yZCx0b2tlbl92ZXJpZnksdmVyaWZ5X2NvZGUscGhvbmUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIG5ld0lkLFxyXG4gICAgICAgICAgZGF0YS5maXJzdF9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5sYXN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmVtYWlsLFxyXG4gICAgICAgICAgaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJTdWdnZXN0aW9uUGVyY2VudGFnZShcclxuICBkb2N0b3JJZDogbnVtYmVyXHJcbik6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUIENPVU5UKGlkKSBBUyB0b3RhbF9yZXZpZXdzLFxyXG4gICAgICBTVU0oQ0FTRSBXSEVOIHJlY29tbWVuZGF0aW9uID0gMSBUSEVOIDEgRUxTRSAwIEVORCkgQVMgdG90YWxfcmVjb21tZW5kZWRcclxuICAgICBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3NcclxuICAgICBXSEVSRSBkb2N0b3JfaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZG9jdG9ySWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKCFyZXN1bHQubGVuZ3RoIHx8IHJlc3VsdFswXS50b3RhbF9yZXZpZXdzID09PSAwKSByZXR1cm4gMDtcclxuXHJcbiAgcmV0dXJuIHBhcnNlRmxvYXQoXHJcbiAgICAoKHJlc3VsdFswXS50b3RhbF9yZWNvbW1lbmRlZCAvIHJlc3VsdFswXS50b3RhbF9yZXZpZXdzKSAqIDEwMCkudG9GaXhlZCgyKVxyXG4gICk7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpa2UoZGF0YTogbGlrZURUTykge1xyXG4gIGNvbnN0IGV4aXN0aW5nTGlrZSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgXHJcbiAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgcGF0aWVudF9pZCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoZXhpc3RpbmdMaWtlLmxlbmd0aCA+IDApIHtcclxuICAgIC8vIFVubGlrZSB0aGUgZG9jdG9yOiBSZW1vdmUgdGhlIGxpa2VcclxuICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgREVMRVRFIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgXHJcbiAgICAgICBXSEVSRSBkb2N0b3JfaWQgPSA/IEFORCBwYXRpZW50X2lkID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTGlrZSB0aGUgZG9jdG9yOiBJbnNlcnQgbmV3IGxpa2UgcmVjb3JkXHJcbiAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xpa2VzIChkb2N0b3JfaWQsIHBhdGllbnRfaWQsIGlzTGlrZSkgXHJcbiAgICAgICBWQUxVRVMgKD8sID8sID8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2RhdGEuZG9jdG9yX2lkLCBkYXRhLnBhdGllbnRfaWQsIDFdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBkb2N0b3IncyBpc19saWtlZCBzdGF0dXMgYmFzZWQgb24gdGhlIHRvdGFsIGxpa2VzXHJcbiAgY29uc3QgdG90YWxMaWtlcyA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCBDT1VOVCgqKSBBUyBjb3VudCBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xpa2VzIFxyXG4gICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgaXNMaWtlZCA9IHRvdGFsTGlrZXNbMF0uY291bnQgPiAwID8gMSA6IDA7XHJcblxyXG4gIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmRvY3RvcnMgXHJcbiAgICAgU0VUIGlzX2xpa2VkID0gPyBcclxuICAgICBXSEVSRSBpZCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtpc0xpa2VkLCBkYXRhLmRvY3Rvcl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaXNMaWtlZCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdG9MaWtlKHBhdGllbnRfaWQ6IG51bWJlcikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1RcclxuICAgICAgZC4qXHJcbiAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBkbFxyXG4gICAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgICAgIE9OIGRsLmRvY3Rvcl9pZCA9IGQuaWRcclxuICAgICAgICBXSEVSRSBkbC5wYXRpZW50X2lkID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtwYXRpZW50X2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGdldCByZXNwb25zZVwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2aWNlcygpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5zZXJ2aWNlc2BcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb3N0UG9wdWxhckRvY3RvcnMoKTogUHJvbWlzZTxhbnk+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgYFxyXG4vLyAgICAgICBTRUxFQ1RcclxuLy8gICAgICAgICBkLiosXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuaWQsICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxyXG4vLyAgICAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuLy8gICAgICAgICAoU0VMRUNUIEFWRyhyLnJhdGluZylcclxuLy8gICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgclxyXG4vLyAgICAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmcsXHJcbi8vICAgICAgICAgKFNFTEVDVCBDT1VOVChyLnJhdGluZylcclxuLy8gICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgclxyXG4vLyAgICAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgdG90YWxfcmF0aW5nc1xyXG4vLyAgICAgICBGUk9NXHJcbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuLy8gICAgICAgTEVGVCBKT0lOXHJcbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfbG9jYXRpb25zIGxkIE9OIGQuaWQgPSBsZC5pZFxyXG4vLyAgICAgICBMRUZUIEpPSU5cclxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LnNwZWNpYWx0aWVzIHMgT04gZC5zcGVjaWFsdHlfaWQgPSBzLmlkXHJcbi8vICAgICAgIEhBVklOR1xyXG4vLyAgICAgICAgIHRvdGFsX3JhdGluZ3MgPiAzXHJcbi8vICAgICAgIE9SREVSIEJZXHJcbi8vICAgICAgICAgYXZlcmFnZV9yYXRpbmcgREVTQyxcclxuLy8gICAgICAgICB0b3RhbF9yYXRpbmdzIERFU0NcclxuLy8gICAgICAgTElNSVQgMTA7XHJcbi8vICAgICAgIGBcclxuLy8gICAgICk7XHJcbi8vICAgICByZXR1cm4gcmVzdWx0O1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbi8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMoXHJcbiAgbW9iaWxlOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgU0VMRUNUIG1vYmlsZSBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yc1xyXG4gICAgICB3aGVyZSBtb2JpbGU9P1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFttb2JpbGVdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURvY3Rvcihkb2N0b3JEYXRhOiBEb2N0b3JzRFRPKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgICAgU0VUIG5hbWUgPSA/XHJcbiAgICAgICAgV0hFUkUgaWQgPSA/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2RvY3RvckRhdGEuZmlyc3RfbmFtZSwgZG9jdG9yRGF0YS5pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcoaWQ6IGFueSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgIFNFVCBjbGlja19jb3VudCA9IGNsaWNrX2NvdW50ICsgMVxyXG4gICAgICBXSEVSRSBpZCA9ID9cclxuICAgICAgYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiB1cGRhdGVSZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ29tbWVudChjb21tZW50OiBDb21tZW50c0RUTykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uY29tbWVudHNcclxuICAgICAoaWQsIGlkLCBjb21tZW50X3RleHQsIHJhdGluZylcclxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2NvbW1lbnQuaWQsIGNvbW1lbnQuaWQsIGNvbW1lbnQuY29tbWVudF90ZXh0LCBjb21tZW50LnJhdGluZ10sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3BlY2lhbHRpZXMoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBTRUxFQ1QgKlxyXG4gICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnNwZWNpYWx0aWVzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3ViU3BlY2lhbHRpZXNCeUlkKHNwZWNpYWx0eUlkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbGltaXQgPSAyMDsgLy8gRGVmYXVsdCBsaW1pdFxyXG4gICAgY29uc3Qgb2Zmc2V0ID0gMDsgLy8gRGVmYXVsdCBvZmZzZXRcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgXHJcbiAgICAgICAgcy5pZCBBUyBzcGVjaWFsdHlfaWQsXHJcbiAgICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAgIHMuaW1hZ2VzIEFTIHNwZWNpYWx0eV9pbWFnZSxcclxuICAgICAgICBzcy5pZCBBUyBzdWJfc3BlY2lhbHR5X2lkLFxyXG4gICAgICAgIHNzLnN1Yl9zcGVjaWFsdHkgQVMgc3ViX3NwZWNpYWx0eV9uYW1lXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnN1Yl9zcGVjaWFsdGllcyBzcyBcclxuICAgICAgT04gcy5pZCA9IHNzLnNwZWNpYWx0eV9pZFxyXG4gICAgICBXSEVSRSBzLmlkID0gPyBcclxuICAgICAgT1JERVIgQlkgc3MuaWQ7YCxcclxuICAgICAgeyB2YWx1ZXM6IFtzcGVjaWFsdHlJZF0gfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQubWFwKChyb3cpID0+ICh7XHJcbiAgICAgIGlkOiByb3cuc3ViX3NwZWNpYWx0eV9pZCB8fCBudWxsLFxyXG4gICAgICBuYW1lOiByb3cuc3ViX3NwZWNpYWx0eV9uYW1lIHx8IFwiTi9BXCIsXHJcbiAgICAgIGltYWdlczogcm93LnNwZWNpYWx0eV9pbWFnZSB8fCBcImRlZmF1bHRfaW1hZ2UuanBlZ1wiLFxyXG4gICAgfSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3ViLXNwZWNpYWx0aWVzOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbHRlclNwZWNpYWx0eUJ5SWQoc3BlY2lhbHR5OiBhbnkpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBcclxuICAgICAgIFNFTEVDVCBcclxuICAgICAgICBkLiosIFxyXG4gICAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcclxuICAgICAgICBzLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXHJcbiAgICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcclxuICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgciBcclxuICAgICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIGF2ZXJhZ2VfcmF0aW5nXHJcbiAgICAgIEZST00gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgICAgTEVGVCBKT0lOIFxyXG4gICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xvY2F0aW9ucyBsZCBPTiBkLmlkID0gbGQuaWRcclxuICAgICAgTEVGVCBKT0lOIFxyXG4gICAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgcyBPTiBkLnNwZWNpYWx0eV9pZCA9IHMuaWRcclxuICBcclxuICAgICAgV0hFUkUgXHJcbiAgICAgIHMuaWQgPSA/O1xyXG4gICAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbc3BlY2lhbHR5XSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiLi4uXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25zQnlTcGVjaWFsdHkoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBzLmlkIEFTIHN1Z2dlc3Rpb25faWQsIHMudGl0bGUsIHMuZGVzY3JpcHRpb24sIHNzLm5hbWUgQVMgc3ViX3NwZWNpYWx0eV9uYW1lXHJcbiAgICAgIEZST00gY2xpbmljX2RiLnN1Z2dlc3Rpb25zIHNcclxuICAgICAgSk9JTiBjbGluaWNfZGIuc3ViX3NwZWNpYWx0aWVzIHNzIE9OIHMuc3ViX3NwZWNpYWx0eV9pZCA9IHNzLmlkXHJcbiAgICAgIEpPSU4gY2xpbmljX2RiLnNwZWNpYWx0aWVzIHNwIE9OIHNzLnNwZWNpYWx0eV9pZCA9IHNwLmlkXHJcbiAgICAgIFdIRVJFIHNwLmlkID0gPztcclxuICAgIGAsXHJcbiAgICAgIFtzcGVjaWFsdHlJZF1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWx0ZXJTZXJ2aWNlc0J5SWQoc2VydmljZUlkOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBcclxuICAgU0VMRUNUIFxyXG4gICAgICBkLiosIFxyXG4gICAgICBDT0FMRVNDRShsZC5sb2NhdGlvbiwgJ05vIExvY2F0aW9uJykgQVMgbG9jYXRpb24sXHJcbiAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcclxuICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5yYXRpbmdzIHIgXHJcbiAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcclxuICAgIEZST00gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0ubG9jYXRpb25zX2RvY3RvcnMgbGQgT04gZC5pZCA9IGxkLmlkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgcyBPTiBkLnNwZWNpYWx0eV9pZCA9IHMuaWRcclxuICAgIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc2VydmljZXMgc3J2ICBPTiBzcnYuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gICAgV0hFUkUgXHJcbiAgICBzcnYuaWQgPSA/O1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbc2VydmljZUlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGlzdGluZ0ZlZWRiYWNrKHJldmlld0RhdGE6IFJldmlld3NEVE8pIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3MgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGRvY3Rvcl9pZCA9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3Jldmlld0RhdGEudXNlcl9pZCwgcmV2aWV3RGF0YS5kb2N0b3JfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydFJldmlld3MocmV2aWV3RGF0YTogUmV2aWV3c0RUTykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3NcclxuICAgICAgICAoZG9jdG9yX2lkLFxyXG4gICAgICAgICAgdXNlcl9pZCxcclxuICAgICAgICAgIGNvbW1lbnQsXHJcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMsXHJcbiAgICAgICAgICByYXRpbmcsXHJcbiAgICAgICAgICBwcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICAgICAgICBzdWZmaWNpZW50X3RpbWUsXHJcbiAgICAgICAgICBza2lsbCxcclxuICAgICAgICAgIHN0YWZmX2JlaGF2aW9yLFxyXG4gICAgICAgICAgY2xpbmljX2NvbmRpdGlvbilcclxuICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICByZXZpZXdEYXRhLmRvY3Rvcl9pZCxcclxuICAgICAgICAgIHJldmlld0RhdGEudXNlcl9pZCxcclxuICAgICAgICAgIHJldmlld0RhdGEuY29tbWVudCxcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5nLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yZWNvbW1lbmRhdGlvbnMsXHJcbiAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3MucHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnN1ZmZpY2llbnRfdGltZSxcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5za2lsbCxcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5zdGFmZl9iZWhhdmlvcixcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5jbGluaWNfY29uZGl0aW9uLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkludGVybmFsIHNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZXZpZXdzKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3NcclxuICAgIGBcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb2N0b3JTY2hhZHVsZXMoXHJcbiAgZG9jdG9yX2lkOiBudW1iZXIsXHJcbiAgY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlPzogc3RyaW5nXHJcbikge1xyXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBhbnlbXSA9IFtkb2N0b3JfaWRdO1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgcXVlcnlTdHIgPSBgXHJcbiAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3Jfc2NoZWR1bGVzIGRzXHJcbiAgICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID9cclxuICAgIGA7XHJcblxyXG4gICAgaWYgKGNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSkge1xyXG4gICAgICBxdWVyeVN0ciArPSBcIiBBTkQgZHMuY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlID0/XCI7XHJcbiAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4ocXVlcnlTdHIsIHtcclxuICAgICAgdmFsdWVzOiBxdWVyeVBhcmFtcyxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJJbnRlcm5hbCBzZXJ2ZXIgRXJyb3JcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KHNjaGVkdWxlX2lkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgKlxyXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2F2YWlsYWJsZV90aW1lcyBcclxuICAgICAgV0hFUkUgc2NoZWR1bGVfaWQgPSA/O1xyXG4gICAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbc2NoZWR1bGVfaWRdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIEJldHRlciB0byB1c2UgY29uc29sZS5lcnJvciBmb3IgZXJyb3JzXHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkludGVybmFsIFNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBib29rZWQoXHJcbiAgZG9jdG9yX3NjaGVkdWxlX2lkOiBudW1iZXIsXHJcbiAgcGF0aWVudF9pZDogbnVtYmVyLFxyXG4gIGNsaW5pY19pZDogbnVtYmVyLFxyXG4gIGFwcG9pbnRtZW50X2RhdGU6IHN0cmluZyxcclxuICBhcHBvaW50bWVudF90aW1lOiBzdHJpbmdcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IFtleGlzdGluZ10gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUIGlzX2Jvb2tlZCBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2F2YWlsYWJsZV90aW1lcyBXSEVSRSBpZCA9ID8gRk9SIFVQREFURWAsXHJcbiAgICAgIHsgdmFsdWVzOiBbZG9jdG9yX3NjaGVkdWxlX2lkXSB9XHJcbiAgICApO1xyXG5cclxuICAgIGlmICghZXhpc3RpbmcgfHwgZXhpc3RpbmdbMF0/LmlzX2Jvb2tlZCA9PT0gMSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRG9jdG9yIHNjaGVkdWxlIGlzIGFscmVkYXkgYm9vb2tlZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYXBwb2ludG1lbnRSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzXHJcbiAgICAgIChwYXRpZW50X2lkLGRvY3Rvcl9zY2hlZHVsZV9pZCxjbGluaWNfaWQsYXBwb2ludG1lbnRfZGF0ZSxhcHBvaW50bWVudF90aW1lLHN0YXR1cylcclxuICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCAnU2NoZWR1bGVkJyk7YCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgcGF0aWVudF9pZCxcclxuICAgICAgICAgIGRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuICAgICAgICAgIGNsaW5pY19pZCxcclxuICAgICAgICAgIGFwcG9pbnRtZW50X2RhdGUsXHJcbiAgICAgICAgICBhcHBvaW50bWVudF90aW1lLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBcIkFwcG9pbnRtZW50IHN1Y2Nlc3NmdWx5IGJvb2tlZFwiLFxyXG4gICAgICBhcHBvaW50bWVudElkOiBhcHBvaW50bWVudFJlc3VsdC5pbnNlcnRJZCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNvbnNvbGUubG9nKFwiZmluYWxcIik7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTZCQUEsT0FBQSxDQUFBQyxxQkFBQSxHQUFBQSxxQkFBQTtBQTBFQUQsT0FBQSxDQUFBRSxTQUFBLEdBQUFBLFNBQUE7QUE0Q0FGLE9BQUEsQ0FB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","map":{"version":3,"names":["exports","getDoctorsFromElastic","addDoctor","getUserSuggestionPercentage","like","getDoctoLike","getServices","checkDoctorPhoneNumberExists","updateDoctor","recordDoctorProfileView","addComment","getSpecialties","getSubSpecialtiesById","filterSpecialtyById","getSuggestionsBySpecialty","filterServicesById","existingFeedback","insertReviews","getReviews","doctorSchadules","doctorScheduleTimeAvailability","booked","elasticsearch_1","require","mysql_1","response_error_1","schema_1","bcrypt_1","__importDefault","uuid_1","esClient","Client","node","auth","username","password","indexDoctorData","doctor","index","id","document","filters","must","name","push","match","doctor_id","specialty_id","service_id","service_ids","insurance_id","city_id","minRating","undefined","maxRating","range","average_rating","gte","lte","isPopular","query","length","bool","match_all","body","search","console","log","JSON","stringify","hits","map","hit","_source","error","meta","data","confirmPassword","fdPassword","validPassword","doctorSchema","validateSyncAt","saltRounds","hashedPassword","default","hash","ResponseError","Unauthorized","newId","v4","result","coreSchema","values","first_name","last_name","email","token_verify","verify_code","phone","Date","message","InternalServer","doctorId","total_reviews","parseFloat","total_recommended","toFixed","existingLike","patient_id","totalLikes","isLiked","count","success","mobile","doctorData","updateResult","comment","comment_text","rating","specialtyId","limit","offset","row","sub_specialty_id","sub_specialty_name","images","specialty_image","specialty","serviceId","reviewData","user_id","recommendations","ratings","professional_demeanor","sufficient_time","skill","staff_behavior","clinic_condition","consultatio_types_available","queryParams","queryStr","schedule_id","doctor_schedule_id","clinic_id","appointment_date","appointment_time","existing","_a","is_booked","BadRequest","appointmentResult","appointmentId","insertId"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/doctors/db.ts"],"sourcesContent":["import { Client } from \"@elastic/elasticsearch\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n  SubSpecialty,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { doctorSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n// const esClient = new Client({ node: process.env.ELASTICSEARCH_URL });\r\n\r\nconst esClient = new Client({\r\n  node: \"http://localhost:9200\",\r\n  auth: { username: \"elastic\", password: \"@Ali0011914505\" },\r\n});\r\n\r\nasync function indexDoctorData(doctor: any) {\r\n  await esClient.index({\r\n    index: \"doctors\",\r\n    id: doctor.id,\r\n    document: doctor,\r\n  });\r\n}\r\n\r\nexport async function getDoctorsFromElastic(filters: {\r\n  name?: string;\r\n  city_id?: string;\r\n  service_id: string;\r\n  specialty_id: string;\r\n  insurance_id: string;\r\n  minRating?: number;\r\n  doctor_id?: string;\r\n  maxRating?: number;\r\n  isPopular?: boolean;\r\n}) {\r\n  try {\r\n    const must: any[] = [];\r\n    if (filters.name) {\r\n      must.push({ match: { name: filters.name } });\r\n    }\r\n    if (filters.doctor_id) {\r\n      must.push({ match: { id: filters.doctor_id } });\r\n    }\r\n    if (filters.specialty_id) {\r\n      must.push({ match: { specialty_id: filters.specialty_id } });\r\n    }\r\n    if (filters.service_id) {\r\n      must.push({ match: { service_ids: filters.service_id } });\r\n    }\r\n    if (filters.insurance_id) {\r\n      must.push({\r\n        match: { insurance_id: filters.insurance_id },\r\n      });\r\n    }\r\n    if (filters.city_id) {\r\n      must.push({\r\n        match: { \"addresses.city_id\": filters.city_id },\r\n      });\r\n    }\r\n\r\n    if (filters.minRating !== undefined || filters.maxRating !== undefined) {\r\n      must.push({\r\n        range: {\r\n          average_rating: {\r\n            gte: filters.minRating || 0,\r\n            lte: filters.maxRating || 5,\r\n          },\r\n        },\r\n      });\r\n    }\r\n    if (filters.isPopular) {\r\n      must.push({\r\n        range: {\r\n          average_rating: {\r\n            gte: 4,\r\n          },\r\n        },\r\n      });\r\n    }\r\n\r\n    const query = must.length > 0 ? { bool: { must } } : { match_all: {} };\r\n    const body = await esClient.search({\r\n      index: \"doctors\",\r\n      body: {\r\n        query,\r\n      },\r\n    });\r\n    console.log(JSON.stringify(body, null, 2));\r\n\r\n    return body.hits.hits.map((hit: any) => hit._source);\r\n  } catch (error: any) {\r\n    console.log(JSON.stringify(error.meta.body, null, 2));\r\n\r\n    console.error(\"Elasticsearch error:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function addDoctor(data: DoctorsDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = doctorSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.doctors\r\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function getUserSuggestionPercentage(\r\n  doctorId: number\r\n): Promise<number> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT COUNT(id) AS total_reviews,\r\n      SUM(CASE WHEN recommendation = 1 THEN 1 ELSE 0 END) AS total_recommended\r\n     FROM ${coreSchema}.doctor_reviews\r\n     WHERE doctor_id = ?`,\r\n    {\r\n      values: [doctorId],\r\n    }\r\n  );\r\n  if (!result.length || result[0].total_reviews === 0) return 0;\r\n\r\n  return parseFloat(\r\n    ((result[0].total_recommended / result[0].total_reviews) * 100).toFixed(2)\r\n  );\r\n}\r\nexport async function like(data: likeDTO) {\r\n  const existingLike = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ? AND patient_id = ?`,\r\n    {\r\n      values: [data.doctor_id, data.patient_id],\r\n    }\r\n  );\r\n\r\n  if (existingLike.length > 0) {\r\n    // Unlike the doctor: Remove the like\r\n    await query<RowDataPacket>(\r\n      `DELETE FROM ${coreSchema}.doctor_likes \r\n       WHERE doctor_id = ? AND patient_id = ?`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id],\r\n      }\r\n    );\r\n  } else {\r\n    // Like the doctor: Insert new like record\r\n    await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \r\n       VALUES (?, ?, ?)`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id, 1],\r\n      }\r\n    );\r\n  }\r\n\r\n  // Update the doctor's is_liked status based on the total likes\r\n  const totalLikes = await query<RowDataPacket>(\r\n    `SELECT COUNT(*) AS count FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ?`,\r\n    {\r\n      values: [data.doctor_id],\r\n    }\r\n  );\r\n\r\n  const isLiked = totalLikes[0].count > 0 ? 1 : 0;\r\n\r\n  await query<RowDataPacket>(\r\n    `UPDATE ${coreSchema}.doctors \r\n     SET is_liked = ? \r\n     WHERE id = ?`,\r\n    {\r\n      values: [isLiked, data.doctor_id],\r\n    }\r\n  );\r\n\r\n  return { success: true, isLiked };\r\n}\r\n\r\nexport async function getDoctoLike(patient_id: number) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `\r\n      SELECT\r\n      d.*\r\n        FROM ${coreSchema}.doctor_likes dl\r\n        LEFT JOIN ${coreSchema}.doctors d\r\n        ON dl.doctor_id = d.id\r\n        WHERE dl.patient_id = ?`,\r\n      {\r\n        values: [patient_id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Failed to get response\");\r\n  }\r\n}\r\n\r\nexport async function getServices() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.services`\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getMostPopularDoctors(): Promise<any> {\r\n//   try {\r\n//     const result = await query<RowDataPacket[]>(\r\n//       `\r\n//       SELECT\r\n//         d.*,\r\n//         COALESCE(ld.id, 'No Location') AS location,\r\n//         s.name AS specialty_name,\r\n//         (SELECT AVG(r.rating)\r\n//          FROM ${coreSchema}.ratings r\r\n//          WHERE r.id = d.id) AS average_rating,\r\n//         (SELECT COUNT(r.rating)\r\n//          FROM ${coreSchema}.ratings r\r\n//          WHERE r.id = d.id) AS total_ratings\r\n//       FROM\r\n//         ${coreSchema}.doctors d\r\n//       LEFT JOIN\r\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n//       LEFT JOIN\r\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n//       HAVING\r\n//         total_ratings > 3\r\n//       ORDER BY\r\n//         average_rating DESC,\r\n//         total_ratings DESC\r\n//       LIMIT 10;\r\n//       `\r\n//     );\r\n//     return result;\r\n//   } catch (error) {\r\n//     console.log(error);\r\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n//   }\r\n// }\r\n\r\nexport async function checkDoctorPhoneNumberExists(\r\n  mobile: string\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      SELECT mobile FROM ${coreSchema}.doctors\r\n      where mobile=?\r\n      `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateDoctor(doctorData: DoctorsDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n        UPDATE ${coreSchema}.doctors\r\n        SET name = ?\r\n        WHERE id = ?\r\n      `,\r\n    {\r\n      values: [doctorData.first_name, doctorData.id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function recordDoctorProfileView(id: any) {\r\n  try {\r\n    const updateResult = await query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.doctors\r\n      SET click_count = click_count + 1\r\n      WHERE id = ?\r\n      `,\r\n      {\r\n        values: [id],\r\n      }\r\n    );\r\n    return updateResult;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function addComment(comment: CommentsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.comments\r\n     (id, id, comment_text, rating)\r\n         VALUES (?, ?, ?, ?)`,\r\n    {\r\n      values: [comment.id, comment.id, comment.comment_text, comment.rating],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getSpecialties() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT *\r\n       FROM ${coreSchema}.specialties`\r\n  );\r\n  return result;\r\n}\r\nexport async function getSubSpecialtiesById(specialtyId: number) {\r\n  try {\r\n    const limit = 20; // Default limit\r\n    const offset = 0; // Default offset\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT \r\n        s.id AS specialty_id,\r\n        s.name AS specialty_name,\r\n        s.images AS specialty_image,\r\n        ss.id AS sub_specialty_id,\r\n        ss.sub_specialty AS sub_specialty_name\r\n      FROM ${coreSchema}.specialties s\r\n      LEFT JOIN ${coreSchema}.sub_specialties ss \r\n      ON s.id = ss.specialty_id\r\n      WHERE s.id = ? \r\n      ORDER BY ss.id;`,\r\n      { values: [specialtyId] }\r\n    );\r\n    return result.map((row) => ({\r\n      id: row.sub_specialty_id || null,\r\n      name: row.sub_specialty_name || \"N/A\",\r\n      images: row.specialty_image || \"default_image.jpeg\",\r\n    }));\r\n  } catch (error) {\r\n    console.error(\"Error fetching sub-specialties:\", error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterSpecialtyById(specialty: any) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `\r\n       SELECT \r\n        d.*, \r\n        COALESCE(ld.location, 'No Location') AS location,\r\n        s.name AS specialty_name,\r\n        (SELECT AVG(rating) \r\n         FROM ${coreSchema}.ratings r \r\n         WHERE r.id = d.id) AS average_rating\r\n      FROM \r\n        ${coreSchema}.doctors d\r\n      LEFT JOIN \r\n        ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n      LEFT JOIN \r\n        ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n  \r\n      WHERE \r\n      s.id = ?;\r\n      `,\r\n      {\r\n        values: [specialty],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"...\");\r\n  }\r\n}\r\n\r\nexport async function getSuggestionsBySpecialty(specialtyId: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\r\n      FROM clinic_db.suggestions s\r\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\r\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\r\n      WHERE sp.id = ?;\r\n    `,\r\n      [specialtyId]\r\n    );\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterServicesById(serviceId: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n   SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n    JOIN \r\n      ${coreSchema}.services srv  ON srv.specialty_id = s.id\r\n    WHERE \r\n    srv.id = ?;\r\n    `,\r\n    {\r\n      values: [serviceId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function existingFeedback(reviewData: ReviewsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`,\r\n    {\r\n      values: [reviewData.user_id, reviewData.doctor_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function insertReviews(reviewData: ReviewsDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_reviews\r\n        (doctor_id,\r\n          user_id,\r\n          comment,\r\n          recommendations,\r\n          rating,\r\n          professional_demeanor,\r\n          sufficient_time,\r\n          skill,\r\n          staff_behavior,\r\n          clinic_condition)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`,\r\n      {\r\n        values: [\r\n          reviewData.doctor_id,\r\n          reviewData.user_id,\r\n          reviewData.comment,\r\n          reviewData.rating,\r\n          reviewData.recommendations,\r\n          reviewData.ratings.professional_demeanor,\r\n          reviewData.ratings.sufficient_time,\r\n          reviewData.ratings.skill,\r\n          reviewData.ratings.staff_behavior,\r\n          reviewData.ratings.clinic_condition,\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function getReviews() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM ${coreSchema}.doctor_reviews\r\n    `\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function doctorSchadules(\r\n  doctor_id: number,\r\n  consultatio_types_available?: string\r\n) {\r\n  const queryParams: any[] = [doctor_id];\r\n  try {\r\n    let queryStr = `\r\n   SELECT * FROM ${coreSchema}.doctor_schedules ds\r\n      WHERE doctor_id = ?\r\n    `;\r\n\r\n    if (consultatio_types_available) {\r\n      queryStr += \" AND ds.consultatio_types_available =?\";\r\n      queryParams.push(consultatio_types_available);\r\n    }\r\n    const result = await query<RowDataPacket[]>(queryStr, {\r\n      values: queryParams,\r\n    });\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function doctorScheduleTimeAvailability(schedule_id: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT *\r\n      FROM ${coreSchema}.doctor_available_times \r\n      WHERE schedule_id = ?;\r\n      `,\r\n      {\r\n        values: [schedule_id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error); // Better to use console.error for errors\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  }\r\n}\r\n\r\nexport async function booked(\r\n  doctor_schedule_id: number,\r\n  patient_id: number,\r\n  clinic_id: number,\r\n  appointment_date: string,\r\n  appointment_time: string\r\n) {\r\n  try {\r\n    const [existing] = await query<RowDataPacket[]>(\r\n      `SELECT is_booked FROM ${coreSchema}.doctor_available_times WHERE id = ? FOR UPDATE`,\r\n      { values: [doctor_schedule_id] }\r\n    );\r\n\r\n    if (!existing || existing[0]?.is_booked === 1) {\r\n      throw new ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\r\n    }\r\n\r\n    const appointmentResult = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.appointments\r\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\r\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');`,\r\n      {\r\n        values: [\r\n          patient_id,\r\n          doctor_schedule_id,\r\n          clinic_id,\r\n          appointment_date,\r\n          appointment_time,\r\n        ],\r\n      }\r\n    );\r\n    return {\r\n      message: \"Appointment successfuly booked\",\r\n      appointmentId: appointmentResult.insertId,\r\n    };\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  } finally {\r\n    console.log(\"final\");\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BAA,OAAA,CAAAC,qBAAA,GAAAA,qBAAA;AA0EAD,OAAA,CAAAE,SAAA,GAAAA,SAAA;AA4CAF,OAAA,CAAAG,2BAAA,GAAAA,2BAAA;AAkBAH,OAAA,CAAAI,IAAA,GAAAA,IAAA;AAoDAJ,OAAA,CAAAK,YAAA,GAAAA,YAAA;AAqBAL,OAAA,CAAAM,WAAA,GAAAA,WAAA;AA0CAN,OAAA,CAAAO,4BAAA,GAAAA,4BAAA;AAeAP,OAAA,CAAAQ,YAAA,GAAAA,YAAA;AAcAR,OAAA,CAAAS,uBAAA,GAAAA,uBAAA;AAmBAT,OAAA,CAAAU,UAAA,GAAAA,UAAA;AAYAV,OAAA,CAAAW,cAAA,GAAAA,cAAA;AAOAX,OAAA,CAAAY,qBAAA,GAAAA,qBAAA;AA6BAZ,OAAA,CAAAa,mBAAA,GAAAA,mBAAA;AAgCAb,OAAA,CAAAc,yBAAA,GAAAA,yBAAA;AAoBAd,OAAA,CAAAe,kBAAA,GAAAA,kBAAA;AA4BAf,OAAA,CAAAgB,gBAAA,GAAAA,gBAAA;AAUAhB,OAAA,CAAAiB,aAAA,GAAAA,aAAA;AAqCAjB,OAAA,CAAAkB,UAAA,GAAAA,UAAA;AASAlB,OAAA,CAAAmB,eAAA,GAAAA,eAAA;AAyBAnB,OAAA,CAAAoB,8BAAA,GAAAA,8BAAA;AAmBApB,OAAA,CAAAqB,MAAA,GAAAA,MAAA;AA5iBA,MAAAC,eAAA,GAAAC,OAAA;AACA,MAAAC,OAAA,GAAAD,OAAA;AAQA,MAAAE,gBAAA,GAAAF,OAAA;AACA,MAAAG,QAAA,GAAAH,OAAA;AACA,MAAAI,QAAA,GAAAC,eAAA,CAAAL,OAAA;AACA,MAAAM,MAAA,GAAAN,OAAA;AAEA;AAEA,MAAMO,QAAQ,GAAG,IAAIR,eAAA,CAAAS,MAAM,CAAC;EAC1BC,IAAI,EAAE,uBAAuB;EAC7BC,IAAI,EAAE;IAAEC,QAAQ,EAAE,SAAS;IAAEC,QAAQ,EAAE;EAAgB;CACxD,CAAC;AAEF,SAAeC,eAAeA,CAACC,MAAW;;IACxC,MAAMP,QAAQ,CAACQ,KAAK,CAAC;MACnBA,KAAK,EAAE,SAAS;MAChBC,EAAE,EAAEF,MAAM,CAACE,EAAE;MACbC,QAAQ,EAAEH;KACX,CAAC;EACJ,CAAC;;AAED,SAAsBpC,qBAAqBA,CAACwC,OAU3C;;IACC,IAAI;MACF,MAAMC,IAAI,GAAU,EAAE;MACtB,IAAID,OAAO,CAACE,IAAI,EAAE;QAChBD,IAAI,CAACE,IAAI,CAAC;UAAEC,KAAK,EAAE;YAAEF,IAAI,EAAEF,OAAO,CAACE;UAAI;QAAE,CAAE,CAAC;MAC9C;MACA,IAAIF,OAAO,CAACK,SAAS,EAAE;QACrBJ,IAAI,CAACE,IAAI,CAAC;UAAEC,KAAK,EAAE;YAAEN,EAAE,EAAEE,OAAO,CAACK;UAAS;QAAE,CAAE,CAAC;MACjD;MACA,IAAIL,OAAO,CAACM,YAAY,EAAE;QACxBL,IAAI,CAACE,IAAI,CAAC;UAAEC,KAAK,EAAE;YAAEE,YAAY,EAAEN,OAAO,CAACM;UAAY;QAAE,CAAE,CAAC;MAC9D;MACA,IAAIN,OAAO,CAACO,UAAU,EAAE;QACtBN,IAAI,CAACE,IAAI,CAAC;UAAEC,KAAK,EAAE;YAAEI,WAAW,EAAER,OAAO,CAACO;UAAU;QAAE,CAAE,CAAC;MAC3D;MACA,IAAIP,OAAO,CAACS,YAAY,EAAE;QACxBR,IAAI,CAACE,IAAI,CAAC;UACRC,KAAK,EAAE;YAAEK,YAAY,EAAET,OAAO,CAACS;UAAY;SAC5C,CAAC;MACJ;MACA,IAAIT,OAAO,CAACU,OAAO,EAAE;QACnBT,IAAI,CAACE,IAAI,CAAC;UACRC,KAAK,EAAE;YAAE,mBAAmB,EAAEJ,OAAO,CAACU;UAAO;SAC9C,CAAC;MACJ;MAEA,IAAIV,OAAO,CAACW,SAAS,KAAKC,SAAS,IAAIZ,OAAO,CAACa,SAAS,KAAKD,SAAS,EAAE;QACtEX,IAAI,CAACE,IAAI,CAAC;UACRW,KAAK,EAAE;YACLC,cAAc,EAAE;cACdC,GAAG,EAAEhB,OAAO,CAACW,SAAS,IAAI,CAAC;cAC3BM,GAAG,EAAEjB,OAAO,CAACa,SAAS,IAAI;;;SAG/B,CAAC;MACJ;MACA,IAAIb,OAAO,CAACkB,SAAS,EAAE;QACrBjB,IAAI,CAACE,IAAI,CAAC;UACRW,KAAK,EAAE;YACLC,cAAc,EAAE;cACdC,GAAG,EAAE;;;SAGV,CAAC;MACJ;MAEA,MAAMG,KAAK,GAAGlB,IAAI,CAACmB,MAAM,GAAG,CAAC,GAAG;QAAEC,IAAI,EAAE;UAAEpB;QAAI;MAAE,CAAE,GAAG;QAAEqB,SAAS,EAAE;MAAE,CAAE;MACtE,MAAMC,IAAI,GAAG,MAAMlC,QAAQ,CAACmC,MAAM,CAAC;QACjC3B,KAAK,EAAE,SAAS;QAChB0B,IAAI,EAAE;UACJJ;;OAEH,CAAC;MACFM,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACL,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;MAE1C,OAAOA,IAAI,CAACM,IAAI,CAACA,IAAI,CAACC,GAAG,CAAEC,GAAQ,IAAKA,GAAG,CAACC,OAAO,CAAC;IACtD,CAAC,CAAC,OAAOC,KAAU,EAAE;MACnBR,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACK,KAAK,CAACC,IAAI,CAACX,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;MAErDE,OAAO,CAACQ,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C,OAAO,EAAE;IACX;EACF,CAAC;;AAED,SAAsBxE,SAASA,CAAC0E,IAAgB;;IAC9C,MAAM;MAAEzC;IAAQ,CAAE,GAAGyC,IAAI,CAACzC,QAAQ;IAClC,MAAM;MAAE0C;IAAe,CAAE,GAAGD,IAAI,CAACzC,QAAQ;IAEzC,MAAM2C,UAAU,GAAG;MAAE3C,QAAQ;MAAE0C;IAAe,CAAE;IAChD,MAAME,aAAa,GAAGrD,QAAA,CAAAsD,YAAY,CAACC,cAAc,CAC/C,iBAAiB,EACjBH,UAAU,CACX;IACD,MAAMI,UAAU,GAAG,EAAE;IACrB,MAAMC,cAAc,GAAG,MAAMxD,QAAA,CAAAyD,OAAM,CAACC,IAAI,CAACN,aAAa,EAAEG,UAAU,CAAC;IAEnE,IAAIH,aAAa,CAACL,KAAK,EAAE;MACvB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACC,YAAY,CAAC,qBAAqB,CAAC;IAC7D;IACA,MAAMC,KAAK,GAAG,IAAA3D,MAAA,CAAA4D,EAAM,GAAE;IAEtB,IAAI;MACF,MAAMC,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB,eAAepC,OAAA,CAAAmE,UAAU;;oCAEK,EAC9B;QACEC,MAAM,EAAE,CACNJ,KAAK,EACLZ,IAAI,CAACiB,UAAU,EACfjB,IAAI,CAACkB,SAAS,EACdlB,IAAI,CAACmB,KAAK,EACVZ,cAAc,EACdP,IAAI,CAACoB,YAAY,EACjBpB,IAAI,CAACqB,WAAW,EAChBrB,IAAI,CAACsB,KAAK,EACV,IAAIC,IAAI,EAAE,EACV,IAAIA,IAAI,EAAE;OAEb,CACF;MACD,OAAOT,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAU,EAAE;MACnBR,OAAO,CAACQ,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC0B,OAAO,CAAC;MAC/C,MAAM,IAAI3E,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,0BAA0B,CAAC;IACpE;EACF,CAAC;;AAED,SAAsBlG,2BAA2BA,CAC/CmG,QAAgB;;IAEhB,MAAMZ,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;YAEQpC,OAAA,CAAAmE,UAAU;yBACG,EACrB;MACEC,MAAM,EAAE,CAACU,QAAQ;KAClB,CACF;IACD,IAAI,CAACZ,MAAM,CAAC7B,MAAM,IAAI6B,MAAM,CAAC,CAAC,CAAC,CAACa,aAAa,KAAK,CAAC,EAAE,OAAO,CAAC;IAE7D,OAAOC,UAAU,CACf,CAAEd,MAAM,CAAC,CAAC,CAAC,CAACe,iBAAiB,GAAGf,MAAM,CAAC,CAAC,CAAC,CAACa,aAAa,GAAI,GAAG,EAAEG,OAAO,CAAC,CAAC,CAAC,CAC3E;EACH,CAAC;;AACD,SAAsBtG,IAAIA,CAACwE,IAAa;;IACtC,MAAM+B,YAAY,GAAG,MAAM,IAAAnF,OAAA,CAAAoC,KAAK,EAC9B,iBAAiBpC,OAAA,CAAAmE,UAAU;4CACa,EACxC;MACEC,MAAM,EAAE,CAAChB,IAAI,CAAC9B,SAAS,EAAE8B,IAAI,CAACgC,UAAU;KACzC,CACF;IAED,IAAID,YAAY,CAAC9C,MAAM,GAAG,CAAC,EAAE;MAC3B;MACA,MAAM,IAAArC,OAAA,CAAAoC,KAAK,EACT,eAAepC,OAAA,CAAAmE,UAAU;8CACe,EACxC;QACEC,MAAM,EAAE,CAAChB,IAAI,CAAC9B,SAAS,EAAE8B,IAAI,CAACgC,UAAU;OACzC,CACF;IACH,CAAC,MAAM;MACL;MACA,MAAM,IAAApF,OAAA,CAAAoC,KAAK,EACT,eAAepC,OAAA,CAAAmE,UAAU;wBACP,EAClB;QACEC,MAAM,EAAE,CAAChB,IAAI,CAAC9B,SAAS,EAAE8B,IAAI,CAACgC,UAAU,EAAE,CAAC;OAC5C,CACF;IACH;IAEA;IACA,MAAMC,UAAU,GAAG,MAAM,IAAArF,OAAA,CAAAoC,KAAK,EAC5B,iCAAiCpC,OAAA,CAAAmE,UAAU;yBACtB,EACrB;MACEC,MAAM,EAAE,CAAChB,IAAI,CAAC9B,SAAS;KACxB,CACF;IAED,MAAMgE,OAAO,GAAGD,UAAU,CAAC,CAAC,CAAC,CAACE,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;IAE/C,MAAM,IAAAvF,OAAA,CAAAoC,KAAK,EACT,UAAUpC,OAAA,CAAAmE,UAAU;;kBAEN,EACd;MACEC,MAAM,EAAE,CAACkB,OAAO,EAAElC,IAAI,CAAC9B,SAAS;KACjC,CACF;IAED,OAAO;MAAEkE,OAAO,EAAE,IAAI;MAAEF;IAAO,CAAE;EACnC,CAAC;;AAED,SAAsBzG,YAAYA,CAACuG,UAAkB;;IACnD,IAAI;MACF,MAAMlB,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;;eAGSpC,OAAA,CAAAmE,UAAU;oBACLnE,OAAA,CAAAmE,UAAU;;gCAEE,EAC1B;QACEC,MAAM,EAAE,CAACgB,UAAU;OACpB,CACF;MACD,OAAOlB,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,wBAAwB,CAAC;IAClE;EACF,CAAC;;AAED,SAAsB/F,WAAWA,CAAA;;IAC/B,MAAMoF,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB,iBAAiBpC,OAAA,CAAAmE,UAAU,WAAW,CACvC;IACD,OAAOD,MAAM;EACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAsBnF,4BAA4BA,CAChD0G,MAAc;;IAEd,MAAMvB,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;2BACuBpC,OAAA,CAAAmE,UAAU;;OAE9B,EACH;MACEC,MAAM,EAAE,CAACqB,MAAM;KAChB,CACF;IACD,OAAOvB,MAAM;EACf,CAAC;;AAED,SAAsBlF,YAAYA,CAAC0G,UAAsB;;IACvD,MAAMxB,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;iBACapC,OAAA,CAAAmE,UAAU;;;OAGpB,EACH;MACEC,MAAM,EAAE,CAACsB,UAAU,CAACrB,UAAU,EAAEqB,UAAU,CAAC3E,EAAE;KAC9C,CACF;IACD,OAAOmD,MAAM;EACf,CAAC;;AAED,SAAsBjF,uBAAuBA,CAAC8B,EAAO;;IACnD,IAAI;MACF,MAAM4E,YAAY,GAAG,MAAM,IAAA3F,OAAA,CAAAoC,KAAK,EAC9B;eACSpC,OAAA,CAAAmE,UAAU;;;OAGlB,EACD;QACEC,MAAM,EAAE,CAACrD,EAAE;OACZ,CACF;MACD,OAAO4E,YAAY;IACrB,CAAC,CAAC,OAAOzC,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,+BAA+B,CAAC;IACzE;EACF,CAAC;;AAED,SAAsB3F,UAAUA,CAAC0G,OAAoB;;IACnD,MAAM1B,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB,eAAepC,OAAA,CAAAmE,UAAU;;6BAEA,EACzB;MACEC,MAAM,EAAE,CAACwB,OAAO,CAAC7E,EAAE,EAAE6E,OAAO,CAAC7E,EAAE,EAAE6E,OAAO,CAACC,YAAY,EAAED,OAAO,CAACE,MAAM;KACtE,CACF;IACD,OAAO5B,MAAM;EACf,CAAC;;AAED,SAAsB/E,cAAcA,CAAA;;IAClC,MAAM+E,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;cACUpC,OAAA,CAAAmE,UAAU,cAAc,CACnC;IACD,OAAOD,MAAM;EACf,CAAC;;AACD,SAAsB9E,qBAAqBA,CAAC2G,WAAmB;;IAC7D,IAAI;MACF,MAAMC,KAAK,GAAG,EAAE,CAAC,CAAC;MAClB,MAAMC,MAAM,GAAG,CAAC,CAAC,CAAC;MAClB,MAAM/B,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;;;;;aAMOpC,OAAA,CAAAmE,UAAU;kBACLnE,OAAA,CAAAmE,UAAU;;;sBAGN,EAChB;QAAEC,MAAM,EAAE,CAAC2B,WAAW;MAAC,CAAE,CAC1B;MACD,OAAO7B,MAAM,CAACnB,GAAG,CAAEmD,GAAG,KAAM;QAC1BnF,EAAE,EAAEmF,GAAG,CAACC,gBAAgB,IAAI,IAAI;QAChChF,IAAI,EAAE+E,GAAG,CAACE,kBAAkB,IAAI,KAAK;QACrCC,MAAM,EAAEH,GAAG,CAACI,eAAe,IAAI;OAChC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOpD,KAAK,EAAE;MACdR,OAAO,CAACQ,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,+BAA+B,CAAC;IACzE;EACF,CAAC;;AAED,SAAsBxF,mBAAmBA,CAACkH,SAAc;;IACtD,IAAI;MACF,MAAMrC,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;;;;;gBAMUpC,OAAA,CAAAmE,UAAU;;;UAGhBnE,OAAA,CAAAmE,UAAU;;UAEVnE,OAAA,CAAAmE,UAAU;;UAEVnE,OAAA,CAAAmE,UAAU;;;;OAIb,EACD;QACEC,MAAM,EAAE,CAACmC,SAAS;OACnB,CACF;MACD,OAAOrC,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,KAAK,CAAC;IAC/C;EACF,CAAC;;AAED,SAAsBvF,yBAAyBA,CAACyG,WAAmB;;IACjE,IAAI;MACF,MAAM7B,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;;;;;KAMD,EACC,CAAC2D,WAAW,CAAC,CACd;MAED,OAAO7B,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,+BAA+B,CAAC;IACzE;EACF,CAAC;;AAED,SAAsBtF,kBAAkBA,CAACiH,SAAiB;;IACxD,MAAMtC,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;;;;;cAMUpC,OAAA,CAAAmE,UAAU;;;QAGhBnE,OAAA,CAAAmE,UAAU;;QAEVnE,OAAA,CAAAmE,UAAU;;QAEVnE,OAAA,CAAAmE,UAAU;;QAEVnE,OAAA,CAAAmE,UAAU;;;KAGb,EACD;MACEC,MAAM,EAAE,CAACoC,SAAS;KACnB,CACF;IACD,OAAOtC,MAAM;EACf,CAAC;;AAED,SAAsB1E,gBAAgBA,CAACiH,UAAsB;;IAC3D,MAAMvC,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB,iBAAiBpC,OAAA,CAAAmE,UAAU,oDAAoD,EAC/E;MACEC,MAAM,EAAE,CAACqC,UAAU,CAACC,OAAO,EAAED,UAAU,CAACnF,SAAS;KAClD,CACF;IACD,OAAO4C,MAAM;EACf,CAAC;;AAED,SAAsBzE,aAAaA,CAACgH,UAAsB;;IACxD,IAAI;MACF,MAAMvC,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB,eAAepC,OAAA,CAAAmE,UAAU;;;;;;;;;;;6CAWc,EACvC;QACEC,MAAM,EAAE,CACNqC,UAAU,CAACnF,SAAS,EACpBmF,UAAU,CAACC,OAAO,EAClBD,UAAU,CAACb,OAAO,EAClBa,UAAU,CAACX,MAAM,EACjBW,UAAU,CAACE,eAAe,EAC1BF,UAAU,CAACG,OAAO,CAACC,qBAAqB,EACxCJ,UAAU,CAACG,OAAO,CAACE,eAAe,EAClCL,UAAU,CAACG,OAAO,CAACG,KAAK,EACxBN,UAAU,CAACG,OAAO,CAACI,cAAc,EACjCP,UAAU,CAACG,OAAO,CAACK,gBAAgB;OAEtC,CACF;MACD,OAAO/C,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,uBAAuB,CAAC;IACjE;EACF,CAAC;;AAED,SAAsBnF,UAAUA,CAAA;;IAC9B,MAAMwE,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;oBACgBpC,OAAA,CAAAmE,UAAU;KACzB,CACF;IACD,OAAOD,MAAM;EACf,CAAC;;AAED,SAAsBvE,eAAeA,CACnC2B,SAAiB,EACjB4F,2BAAoC;;IAEpC,MAAMC,WAAW,GAAU,CAAC7F,SAAS,CAAC;IACtC,IAAI;MACF,IAAI8F,QAAQ,GAAG;mBACApH,OAAA,CAAAmE,UAAU;;KAExB;MAED,IAAI+C,2BAA2B,EAAE;QAC/BE,QAAQ,IAAI,wCAAwC;QACpDD,WAAW,CAAC/F,IAAI,CAAC8F,2BAA2B,CAAC;MAC/C;MACA,MAAMhD,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EAAkBgF,QAAQ,EAAE;QACpDhD,MAAM,EAAE+C;OACT,CAAC;MACF,OAAOjD,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,uBAAuB,CAAC;IACjE;EACF,CAAC;;AAED,SAAsBjF,8BAA8BA,CAACyH,WAAmB;;IACtE,IAAI;MACF,MAAMnD,MAAM,GAAG,MAAM,IAAAlE,OAAA,CAAAoC,KAAK,EACxB;;aAEOpC,OAAA,CAAAmE,UAAU;;OAEhB,EACD;QACEC,MAAM,EAAE,CAACiD,WAAW;OACrB,CACF;MACD,OAAOnD,MAAM;IACf,CAAC,CAAC,OAAOhB,KAAK,EAAE;MACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC,CAAC,CAAC;MACtB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,uBAAuB,CAAC;IACjE;EACF,CAAC;;AAED,SAAsBhF,MAAMA,CAC1ByH,kBAA0B,EAC1BlC,UAAkB,EAClBmC,SAAiB,EACjBC,gBAAwB,EACxBC,gBAAwB;;;IAExB,IAAI;MACF,MAAM,CAACC,QAAQ,CAAC,GAAG,MAAM,IAAA1H,OAAA,CAAAoC,KAAK,EAC5B,yBAAyBpC,OAAA,CAAAmE,UAAU,iDAAiD,EACpF;QAAEC,MAAM,EAAE,CAACkD,kBAAkB;MAAC,CAAE,CACjC;MAED,IAAI,CAACI,QAAQ,IAAI,EAAAC,EAAA,GAAAD,QAAQ,CAAC,CAAC,CAAC,cAAAC,EAAA,uBAAAA,EAAA,CAAEC,SAAS,MAAK,CAAC,EAAE;QAC7C,MAAM,IAAI3H,gBAAA,CAAA6D,aAAa,CAAC+D,UAAU,CAAC,qCAAqC,CAAC;MAC3E;MAEA,MAAMC,iBAAiB,GAAG,MAAM,IAAA9H,OAAA,CAAAoC,KAAK,EACnC,eAAepC,OAAA,CAAAmE,UAAU;;2CAEY,EACrC;QACEC,MAAM,EAAE,CACNgB,UAAU,EACVkC,kBAAkB,EAClBC,SAAS,EACTC,gBAAgB,EAChBC,gBAAgB;OAEnB,CACF;MACD,OAAO;QACL7C,OAAO,EAAE,gCAAgC;QACzCmD,aAAa,EAAED,iBAAiB,CAACE;OAClC;IACH,CAAC,CAAC,OAAO9E,KAAK,EAAE;MACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;MACpB,MAAM,IAAIjD,gBAAA,CAAA6D,aAAa,CAACe,cAAc,CAAC,uBAAuB,CAAC;IACjE,CAAC,SAAS;MACRnC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACtB;EACF,CAAC","ignoreList":[]}},"mtime":1742206766042},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.doctorSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  Specialization: yup.string().required(\"Specialization is required\"),\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImRvY3RvclNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlyc3RfbmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdF9uYW1lIiwiU3BlY2lhbGl6YXRpb24iLCJsaWNlbnNlTnVtYmVyIiwib3duZXJfbmFtZSIsImVtYWlsIiwicGhvbmUiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsImxlbmd0aCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZG9jdG9ycy9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkb2N0b3JTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGZpcnN0X25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImZpcnN0X25hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbGFzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsYXN0X25hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgU3BlY2lhbGl6YXRpb246IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIlNwZWNpYWxpemF0aW9uIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxpY2Vuc2VOdW1iZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxpY2Vuc2VOdW1iZXIgaXMgcmVxdWlyZWRcIiksXHJcbiAgb3duZXJfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5lbWFpbChcImludmFsaWQgZW1haWxcIikucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBwaG9uZTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc3dvcmRTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5ld1Bhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJuZXdQYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG4vLyBleHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXHJcbi8vICAgLm9iamVjdCgpXHJcbi8vICAgLnNoYXBlKHtcclxuLy8gICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4vLyAgIH0pXHJcbi8vICAgLnJlcXVpcmVkKCk7XHJcblxyXG4vLyAgIGV4cG9ydCAgY29uc3QgbGF0ZXN0VGVtcGxhdGVzU2NoZW1hID0geXVwXHJcbi8vICAgLm9iamVjdCgpXHJcbi8vICAgLnNoYXBlKHtcclxuLy8gICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4vLyAgIH0pXHJcbi8vICAgLnJlcXVpcmVkKCk7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlybUVtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5lbWFpbChcIkludmFsaWQgZW1haWwgZm9ybWF0XCIpXHJcbiAgICAucmVxdWlyZWQoXCJFbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICB2ZXJpZnlfY29kZTogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5sZW5ndGgoNCwgXCJWZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAucmVxdWlyZWQoXCJWZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tFbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkIVwiKSxcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7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","map":{"version":3,"names":["yup","__importStar","require","exports","doctorSchema","object","shape","first_name","string","required","last_name","Specialization","licenseNumber","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/doctors/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const doctorSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  Specialization: yup.string().required(\"Specialization is required\"),\r\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,cAAc,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,4BAA4B,CAAC;EACnEG,aAAa,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,2BAA2B,CAAC;EACjEI,UAAU,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDK,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACM,KAAK,CAAC,eAAe,CAAC,CAACL,QAAQ,CAAC,mBAAmB,CAAC;EACxEM,KAAK,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EAC9BC,WAAW,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EACpCE,QAAQ,EAAElB,GAAG,CACVQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWlB,OAAA,CAAAoB,oBAAoB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDkB,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEalB,OAAA,CAAAsB,kBAAkB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDQ,KAAK,EAAEd,GAAG,CACPQ,MAAM,EAAE,CACRM,KAAK,CAAC,sBAAsB,CAAC,CAC7BL,QAAQ,CAAC,mBAAmB,CAAC;EAChCiB,WAAW,EAAE1B,GAAG,CACbQ,MAAM,EAAE,CACRmB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ClB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAyB,gBAAgB,GAAG5B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDQ,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1741655050584},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medications\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/medications/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const medication_id = req.params.id;\n    const data = yield service_1.MedicineService.updateIsFavorite(medication_id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJwdXQiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiaXNGYXZvcml0ZSIsImJvZHkiLCJtZWRpY2F0aW9uX2lkIiwicGFyYW1zIiwiaWQiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNhdGlvbnNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL21lZGljYXRpb25zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgTWVkaWNpbmVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL21lZGljYXRpb25zXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE1lZGljaW5lKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IE1lZGljaW5lU2VydmljZS5nZXRNZWRpY2luZSgpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9tZWRpY2F0aW9ucy86aWQvZmF2b3JpdGVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlSXNGYXZvcml0ZShcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgeyBpc0Zhdm9yaXRlIH0gPSByZXEuYm9keTsgLy8gR2V0IHRoZSBpc0Zhdm9yaXRlIHZhbHVlIGZyb20gdGhlIHJlcXVlc3QgYm9keVxyXG4gICAgY29uc3QgbWVkaWNhdGlvbl9pZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLnVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUMsUUFBQSxDQUFBRyxNQUFNLENBQUNDLEdBQUcsQ0FDUixjQUFjLEVBQ2QsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNKLFdBQVcsRUFBRTtJQUNoRCxNQUFNSyxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWCxRQUFBLENBQUFHLE1BQU0sQ0FBQ2EsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBbEIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZVksZ0JBQWdCQSxDQUMxQ1YsR0FBWSxFQUNaQyxHQUFhOztJQUViLE1BQU07TUFBRVU7SUFBVSxDQUFFLEdBQUdYLEdBQUcsQ0FBQ1ksSUFBSSxDQUFDLENBQUM7SUFDakMsTUFBTUMsYUFBYSxHQUFHYixHQUFHLENBQUNjLE1BQU0sQ0FBQ0MsRUFBRTtJQUNuQyxNQUFNYixJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNPLGdCQUFnQixDQUFDRyxhQUFhLEVBQUVGLFVBQVUsQ0FBQztJQUM5RSxNQUFNUCxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","code","json","put","updateIsFavorite","isFavorite","body","medication_id","params","id"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/medications/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medications\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medications/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const medication_id = req.params.id;\r\n    const data = await MedicineService.updateIsFavorite(medication_id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACa,GAAG,CACR,2BAA2B,EAC3B,IAAAlB,eAAA,CAAAO,YAAY,EAAC,SAAeY,gBAAgBA,CAC1CV,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAEU;IAAU,CAAE,GAAGX,GAAG,CAACY,IAAI,CAAC,CAAC;IACjC,MAAMC,aAAa,GAAGb,GAAG,CAACc,MAAM,CAACC,EAAE;IACnC,MAAMb,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACO,gBAAgB,CAACG,aAAa,EAAEF,UAAU,CAAC;IAC9E,MAAMP,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(medication_id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(medication_id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwibWVkaWNhdGlvbl9pZCIsImlzRmF2b3JpdGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG1lZGljYXRpb25zXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9tZWRpY2F0aW9ucy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE1lZGljaW5lLCB1cGRhdGVJc0Zhdm9yaXRlIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5lU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRNZWRpY2luZSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRNZWRpY2luZSgpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZDogc3RyaW5nLCBpc0Zhdm9yaXRlOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlSXNGYXZvcml0ZShtZWRpY2F0aW9uX2lkLCBpc0Zhdm9yaXRlKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsZUFBZTtFQUNuQixPQUFhQyxXQUFXQSxDQUFBOztNQUM3QixNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFHLFdBQVcsR0FBRTtNQUNoQyxJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7O0VBRU0sT0FBYUUsZ0JBQWdCQSxDQUFDQyxhQUFxQixFQUFFQyxVQUFtQjs7TUFDN0UsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTSxnQkFBZ0IsRUFBQ0MsYUFBYSxFQUFFQyxVQUFVLENBQUM7TUFDOUQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","medication_id","isFavorite","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/medications/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(medication_id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(medication_id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,aAAqB,EAAEC,UAAmB;;MAC7E,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,aAAa,EAAEC,UAAU,CAAC;MAC9D,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllDiseases\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DiseasesService.getAllDiseases();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/getDiseaseSubcategories/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const disease_id = req.params.id;\n  const data = yield service_1.DiseasesService.getDiseaseSubcategories(disease_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJEaXNlYXNlc1NlcnZpY2UiLCJnZXRBbGxEaXNlYXNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJkaXNlYXNlX2lkIiwicGFyYW1zIiwiaWQiLCJnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkaXNlYXNlc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZGlzZWFzZXMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEaXNlYXNlc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldEFsbERpc2Vhc2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEaXNlYXNlc1NlcnZpY2UuZ2V0QWxsRGlzZWFzZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBcIi9nZXREaXNlYXNlU3ViY2F0ZWdvcmllcy86aWRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgZGlzZWFzZV9pZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRGlzZWFzZXNTZXJ2aWNlLmdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsaUJBQWlCLEVBQ2pCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1DLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ0MsY0FBYyxFQUFFO0VBQ25ELE1BQU1DLGFBQWEsR0FBR1osY0FBQSxDQUFBYSxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQzdDLE9BQU9GLEdBQUcsQ0FBQ08sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztBQUUzRCxDQUFDLEVBQUMsQ0FDSDtBQUNEWCxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLDhCQUE4QixFQUM5QixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNUyxVQUFVLEdBQUdYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDQyxFQUFFO0VBQ2hDLE1BQU1WLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ1UsdUJBQXVCLENBQUNILFVBQVUsQ0FBQztFQUN0RSxNQUFNTCxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","DiseasesService","getAllDiseases","buildResponse","BuildResponse","status","code","json","disease_id","params","id","getDiseaseSubcategories"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/diseases/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DiseasesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllDiseases\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DiseasesService.getAllDiseases();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/getDiseaseSubcategories/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const disease_id = req.params.id;\r\n    const data = await DiseasesService.getDiseaseSubcategories(disease_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACC,cAAc,EAAE;EACnD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,8BAA8B,EAC9B,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,UAAU,GAAGX,GAAG,CAACY,MAAM,CAACC,EAAE;EAChC,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACU,uBAAuB,CAACH,UAAU,CAAC;EACtE,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DiseasesService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass DiseasesService {\n  static getAllDiseases() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDisease)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static getDiseaseSubcategories(disease_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDiseaseSubcategories)(disease_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.DiseasesService = DiseasesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkRpc2Vhc2VzU2VydmljZSIsImdldEFsbERpc2Vhc2VzIiwiZGF0YSIsImdldERpc2Vhc2UiLCJtZXNzYWdlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJkaXNlYXNlX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkaXNlYXNlc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZGlzZWFzZXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREaXNlYXNlLCBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEaXNlYXNlc1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxsRGlzZWFzZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RGlzZWFzZSgpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsY0FBY0EsQ0FBQTs7TUFDaEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxVQUFVLEdBQUU7TUFDL0IsSUFBSUQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFRSxPQUFPLEVBQUUsZUFBZTtVQUFFRixJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhRyx1QkFBdUJBLENBQUNDLFVBQWtCOztNQUM1RCxNQUFNSixJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFPLHVCQUF1QixFQUFDQyxVQUFVLENBQUM7TUFDdEQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFRSxPQUFPLEVBQUUsZUFBZTtVQUFFRixJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","DiseasesService","getAllDiseases","data","getDisease","message","getDiseaseSubcategories","disease_id","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/diseases/service.ts"],"sourcesContent":["import { getDisease, getDiseaseSubcategories } from \"../../bin/db\";\r\n\r\nexport class DiseasesService {\r\n  public static async getAllDiseases() {\r\n    const data = await getDisease();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async getDiseaseSubcategories(disease_id: string) {\r\n    const data = await getDiseaseSubcategories(disease_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,UAAU,GAAE;MAC/B,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaG,uBAAuBA,CAACC,UAAkB;;MAC5D,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAO,uBAAuB,EAACC,UAAU,CAAC;MACtD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\npublic_1.router.post(\"/prescription-medicine\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield services_1.PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHByZXNjcmlwdGlvbi1tZWRpY2luZVxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBQcmVzY3JpcHRpb25NZWRpY2luZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgXCIvcHJlc2NyaXB0aW9uLW1lZGljaW5lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGluc2VydEV2ZW50KHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlLkFkZFByZXNjcmlwdGlvbk1lZGljbmUoZXZlbnREYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxVQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLElBQUksQ0FDVCx3QkFBd0IsRUFDeEIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxTQUFTLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUMxQixNQUFNQyxJQUFJLEdBQUcsTUFBTVQsVUFBQSxDQUFBVSwyQkFBMkIsQ0FBQ0Msc0JBQXNCLENBQUNKLFNBQVMsQ0FBQztJQUNoRixNQUFNSyxhQUFhLEdBQUdkLGNBQUEsQ0FBQWUsYUFBYSxDQUFDQyxHQUFHLENBQUNMLElBQUksQ0FBQztJQUM3QyxPQUFPSCxHQUFHLENBQUNTLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","services_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","PrescriptionMedicineService","AddPrescriptionMedicne","buildResponse","BuildResponse","get","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/prescription-medicine/controller.ts"],"sourcesContent":["\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { PrescriptionMedicineService } from \"./services\";\r\n\r\nrouter.post(\r\n  \"/prescription-medicine\",\r\n  asyncHandler(async function insertEvent(req: any, res: any) {\r\n    const eventData = req.body;\r\n    const data = await PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,UAAA,CAAAU,2BAA2B,CAACC,sBAAsB,CAACJ,SAAS,CAAC;IAChF,MAAMK,aAAa,GAAGd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,IAAI,CAAC;IAC7C,OAAOH,GAAG,CAACS,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrescriptionMedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PrescriptionMedicineService {\n  static AddPrescriptionMedicne(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const results = [];\n      for (const medicine of formData.medicine_name) {\n        const medicine_id = medicine.medication_id;\n        const data = yield (0, db_1.addPrescriptionMedicine)(formData, medicine_id);\n        results.push({\n          medicine_id,\n          result: data\n        });\n      }\n      if (results.length) {\n        return {\n          message: \"Insertaions completed\",\n          results\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PrescriptionMedicineService = PrescriptionMedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJmb3JtRGF0YSIsInJlc3VsdHMiLCJtZWRpY2luZSIsIm1lZGljaW5lX25hbWUiLCJtZWRpY2luZV9pZCIsIm1lZGljYXRpb25faWQiLCJkYXRhIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJwdXNoIiwicmVzdWx0IiwibGVuZ3RoIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccHJlc2NyaXB0aW9uLW1lZGljaW5lXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9wcmVzY3JpcHRpb24tbWVkaWNpbmUvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIEFkZFByZXNjcmlwdGlvbk1lZGljbmUoZm9ybURhdGE6IGFueSkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBtZWRpY2luZSBvZiBmb3JtRGF0YS5tZWRpY2luZV9uYW1lKSB7XHJcbiAgICAgIGNvbnN0IG1lZGljaW5lX2lkID0gbWVkaWNpbmUubWVkaWNhdGlvbl9pZDtcclxuXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGRQcmVzY3JpcHRpb25NZWRpY2luZShmb3JtRGF0YSwgbWVkaWNpbmVfaWQpO1xyXG4gICAgICByZXN1bHRzLnB1c2goeyBtZWRpY2luZV9pZCwgcmVzdWx0OiBkYXRhIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiSW5zZXJ0YWlvbnMgY29tcGxldGVkXCIsIHJlc3VsdHMgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLDJCQUEyQjtFQUMvQixPQUFhQyxzQkFBc0JBLENBQUNDLFFBQWE7O01BQ3RELE1BQU1DLE9BQU8sR0FBRyxFQUFFO01BQ2xCLEtBQUssTUFBTUMsUUFBUSxJQUFJRixRQUFRLENBQUNHLGFBQWEsRUFBRTtRQUM3QyxNQUFNQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csYUFBYTtRQUUxQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBVixJQUFBLENBQUFXLHVCQUF1QixFQUFDUCxRQUFRLEVBQUVJLFdBQVcsQ0FBQztRQUNqRUgsT0FBTyxDQUFDTyxJQUFJLENBQUM7VUFBRUosV0FBVztVQUFFSyxNQUFNLEVBQUVIO1FBQUksQ0FBRSxDQUFDO01BQzdDO01BQ0EsSUFBSUwsT0FBTyxDQUFDUyxNQUFNLEVBQUU7UUFDbEIsT0FBTztVQUFFQyxPQUFPLEVBQUUsdUJBQXVCO1VBQUVWO1FBQU8sQ0FBRTtNQUN0RCxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQWRIVyxPQUFBLENBQUFkLDJCQUFBLEdBQUFBLDJCQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","PrescriptionMedicineService","AddPrescriptionMedicne","formData","results","medicine","medicine_name","medicine_id","medication_id","data","addPrescriptionMedicine","push","result","length","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/prescription-medicine/services.ts"],"sourcesContent":["import { addPrescriptionMedicine } from \"../../bin/db\";\r\n\r\nexport class PrescriptionMedicineService {\r\n  public static async AddPrescriptionMedicne(formData: any) {\r\n    const results = [];\r\n    for (const medicine of formData.medicine_name) {\r\n      const medicine_id = medicine.medication_id;\r\n\r\n      const data = await addPrescriptionMedicine(formData, medicine_id);\r\n      results.push({ medicine_id, result: data });\r\n    }\r\n    if (results.length) {\r\n      return { message: \"Insertaions completed\", results };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,2BAA2B;EAC/B,OAAaC,sBAAsBA,CAACC,QAAa;;MACtD,MAAMC,OAAO,GAAG,EAAE;MAClB,KAAK,MAAMC,QAAQ,IAAIF,QAAQ,CAACG,aAAa,EAAE;QAC7C,MAAMC,WAAW,GAAGF,QAAQ,CAACG,aAAa;QAE1C,MAAMC,IAAI,GAAG,MAAM,IAAAV,IAAA,CAAAW,uBAAuB,EAACP,QAAQ,EAAEI,WAAW,CAAC;QACjEH,OAAO,CAACO,IAAI,CAAC;UAAEJ,WAAW;UAAEK,MAAM,EAAEH;QAAI,CAAE,CAAC;MAC7C;MACA,IAAIL,OAAO,CAACS,MAAM,EAAE;QAClB,OAAO;UAAEC,OAAO,EAAE,uBAAuB;UAAEV;QAAO,CAAE;MACtD,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAdHW,OAAA,CAAAd,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// router.get(\n//   \"/getClinicServices\",\n//   asyncHandler(async (req: Request, res: Response) => {\n//     const data = await clinicService.getClinicService();\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return buildResponse;\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY19zZXJ2aWNlc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljX3NlcnZpY2VzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgY2xpbmljU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9nZXRDbGluaWNTZXJ2aWNlc1wiLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2xpbmljU2VydmljZS5nZXRDbGluaWNTZXJ2aWNlKCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gYnVpbGRSZXNwb25zZTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":[],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/clinic_services/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { clinicService } from \"./service\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n// router.get(\r\n//   \"/getClinicServices\",\r\n//   asyncHandler(async (req: Request, res: Response) => {\r\n//     const data = await clinicService.getClinicService();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return buildResponse;\r\n//   })\r\n// );\r\n"],"mappings":";;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllCities\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.citiesService.getAllCities();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/filtered_neighbor/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const city_id = +req.params.id;\n  const data = yield service_1.citiesService.filtered_neighbor(city_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJjaXRpZXNTZXJ2aWNlIiwiZ2V0QWxsQ2l0aWVzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsImNpdHlfaWQiLCJwYXJhbXMiLCJpZCIsImZpbHRlcmVkX25laWdoYm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNpdGllc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgY2l0aWVzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QWxsQ2l0aWVzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaXRpZXNTZXJ2aWNlLmdldEFsbENpdGllcygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2ZpbHRlcmVkX25laWdoYm9yLzppZFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBjaXR5X2lkID0gK3JlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2l0aWVzU2VydmljZS5maWx0ZXJlZF9uZWlnaGJvcihjaXR5X2lkKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGVBQWUsRUFDZixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxhQUFhLENBQUNDLFlBQVksRUFBRTtFQUMvQyxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0g7QUFDRFgsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUix3QkFBd0IsRUFDeEIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTVMsT0FBTyxHQUFHLENBQUNYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDQyxFQUFFO0VBQzlCLE1BQU1WLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGFBQWEsQ0FBQ1UsaUJBQWlCLENBQUNILE9BQU8sQ0FBQztFQUMzRCxNQUFNTCxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","citiesService","getAllCities","buildResponse","BuildResponse","status","code","json","city_id","params","id","filtered_neighbor"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/cities/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { citiesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllCities\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await citiesService.getAllCities();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/filtered_neighbor/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const city_id = +req.params.id;\r\n    const data = await citiesService.filtered_neighbor(city_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,eAAe,EACf,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACC,YAAY,EAAE;EAC/C,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,OAAO,GAAG,CAACX,GAAG,CAACY,MAAM,CAACC,EAAE;EAC9B,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACU,iBAAiB,CAACH,OAAO,CAAC;EAC3D,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.citiesService = void 0;\nconst db_1 = require(\"./db\");\nclass citiesService {\n  static getAllCities() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllCities)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static filtered_neighbor(city_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.GetNeighborhoods)(city_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.citiesService = citiesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNpdGllc1NlcnZpY2UiLCJnZXRBbGxDaXRpZXMiLCJkYXRhIiwibWVzc2FnZSIsImZpbHRlcmVkX25laWdoYm9yIiwiY2l0eV9pZCIsIkdldE5laWdoYm9yaG9vZHMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNpdGllc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWxsQ2l0aWVzLCBHZXROZWlnaGJvcmhvb2RzIH0gZnJvbSBcIi4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBjaXRpZXNTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbENpdGllcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbGxDaXRpZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmaWx0ZXJlZF9uZWlnaGJvcihjaXR5X2lkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBHZXROZWlnaGJvcmhvb2RzKGNpdHlfaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGFBQWE7RUFDakIsT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxZQUFZLEdBQUU7TUFDakMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhRSxpQkFBaUJBLENBQUNDLE9BQWU7O01BQ25ELE1BQU1ILElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVEsZ0JBQWdCLEVBQUNELE9BQU8sQ0FBQztNQUM1QyxJQUFJSCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPO1VBQUVDLE9BQU8sRUFBRSxlQUFlO1VBQUVELElBQUksRUFBRTtRQUFJLENBQUU7TUFDakQ7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsYUFBQSxHQUFBQSxhQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","citiesService","getAllCities","data","message","filtered_neighbor","city_id","GetNeighborhoods","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/cities/service.ts"],"sourcesContent":["import { getAllCities, GetNeighborhoods } from \"./db\";\r\n\r\nexport class citiesService {\r\n  public static async getAllCities() {\r\n    const data = await getAllCities();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async filtered_neighbor(city_id: number) {\r\n    const data = await GetNeighborhoods(city_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,YAAY,GAAE;MACjC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaE,iBAAiBA,CAACC,OAAe;;MACnD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,gBAAgB,EAACD,OAAO,CAAC;MAC5C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllCities = getAllCities;\nexports.GetNeighborhoods = GetNeighborhoods;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllCities() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.cities`);\n    return result;\n  });\n}\nfunction GetNeighborhoods(city_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const adjustedCityId = city_id + 1;\n    const result = yield (0, mysql_1.query)(`\n     SELECT * FROM ${mysql_1.coreSchema}.neighborhoods\n     WHERE city_id = ?\n    `, {\n      values: [adjustedCityId]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsQ2l0aWVzIiwiR2V0TmVpZ2hib3Job29kcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwiY2l0eV9pZCIsImFkanVzdGVkQ2l0eUlkIiwidmFsdWVzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNpdGllc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbENpdGllcygpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jaXRpZXNgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0TmVpZ2hib3Job29kcyhjaXR5X2lkOiBudW1iZXIpIHtcclxuICBjb25zdCBhZGp1c3RlZENpdHlJZCA9IGNpdHlfaWQgKyAxO1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lm5laWdoYm9yaG9vZHNcclxuICAgICBXSEVSRSBjaXR5X2lkID0gP1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbYWRqdXN0ZWRDaXR5SWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUFBLE9BQUEsQ0FBQUMsWUFBQSxHQUFBQSxZQUFBO0FBT0FELE9BQUEsQ0FBQUUsZ0JBQUEsR0FBQUEsZ0JBQUE7QUFUQSxNQUFBQyxPQUFBLEdBQUFDLE9BQUE7QUFFQSxTQUFzQkgsWUFBWUEsQ0FBQTs7SUFDaEMsTUFBTUksTUFBTSxHQUFHLE1BQU0sSUFBQUYsT0FBQSxDQUFBRyxLQUFLLEVBQ3hCLGlCQUFpQkgsT0FBQSxDQUFBSSxVQUFVLFNBQVMsQ0FDckM7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQkgsZ0JBQWdCQSxDQUFDTSxPQUFlOztJQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sR0FBRyxDQUFDO0lBQ2xDLE1BQU1ILE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QjtxQkFDaUJILE9BQUEsQ0FBQUksVUFBVTs7S0FFMUIsRUFDRDtNQUNFRyxNQUFNLEVBQUUsQ0FBQ0QsY0FBYztLQUN4QixDQUNGO0lBQ0QsT0FBT0osTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","getAllCities","GetNeighborhoods","mysql_1","require","result","query","coreSchema","city_id","adjustedCityId","values"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/cities/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllCities() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.cities`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function GetNeighborhoods(city_id: number) {\r\n  const adjustedCityId = city_id + 1;\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT * FROM ${coreSchema}.neighborhoods\r\n     WHERE city_id = ?\r\n    `,\r\n    {\r\n      values: [adjustedCityId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAOAD,OAAA,CAAAE,gBAAA,GAAAA,gBAAA;AATA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBH,YAAYA,CAAA;;IAChC,MAAMI,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,SAAS,CACrC;IACD,OAAOF,MAAM;EACf,CAAC;;AAED,SAAsBH,gBAAgBA,CAACM,OAAe;;IACpD,MAAMC,cAAc,GAAGD,OAAO,GAAG,CAAC;IAClC,MAAMH,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB;qBACiBH,OAAA,CAAAI,UAAU;;KAE1B,EACD;MACEG,MAAM,EAAE,CAACD,cAAc;KACxB,CACF;IACD,OAAOJ,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllInsurances\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.InsuranceService.getAllInsurances();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJJbnN1cmFuY2VTZXJ2aWNlIiwiZ2V0QWxsSW5zdXJhbmNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9pbnN1cmFuY2UvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBJbnN1cmFuY2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9nZXRBbGxJbnN1cmFuY2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBJbnN1cmFuY2VTZXJ2aWNlLmdldEFsbEluc3VyYW5jZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsbUJBQW1CLEVBQ25CLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1DLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGdCQUFnQixDQUFDQyxnQkFBZ0IsRUFBRTtFQUN0RCxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","InsuranceService","getAllInsurances","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/insurance/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { InsuranceService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllInsurances\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await InsuranceService.getAllInsurances();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,mBAAmB,EACnB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,gBAAgB,CAACC,gBAAgB,EAAE;EACtD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InsuranceService = void 0;\nconst db_1 = require(\"./db\");\nclass InsuranceService {\n  static getAllInsurances() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllInsurances)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.InsuranceService = InsuranceService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkluc3VyYW5jZVNlcnZpY2UiLCJnZXRBbGxJbnN1cmFuY2VzIiwiZGF0YSIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGluc3VyYW5jZVxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvaW5zdXJhbmNlL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWxsSW5zdXJhbmNlcyB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5zdXJhbmNlU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxJbnN1cmFuY2VzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFsbEluc3VyYW5jZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsZ0JBQWdCO0VBQ3BCLE9BQWFDLGdCQUFnQkEsQ0FBQTs7TUFDbEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxnQkFBZ0IsR0FBRTtNQUNyQyxJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPO1VBQUVDLE9BQU8sRUFBRSxlQUFlO1VBQUVELElBQUksRUFBRTtRQUFJLENBQUU7TUFDakQ7SUFDRixDQUFDOzs7QUFSSEUsT0FBQSxDQUFBSixnQkFBQSxHQUFBQSxnQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","InsuranceService","getAllInsurances","data","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/insurance/service.ts"],"sourcesContent":["import { getAllInsurances } from \"./db\";\r\n\r\nexport class InsuranceService {\r\n  public static async getAllInsurances() {\r\n    const data = await getAllInsurances();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,gBAAgB;EACpB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,gBAAgB,GAAE;MACrC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AARHE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllInsurances = getAllInsurances;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllInsurances() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.insurances`);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsSW5zdXJhbmNlcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGluc3VyYW5jZVxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvaW5zdXJhbmNlL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEluc3VyYW5jZXMoKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lmluc3VyYW5jZXNgXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBQSxPQUFBLENBQUFDLGdCQUFBLEdBQUFBLGdCQUFBO0FBRkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JGLGdCQUFnQkEsQ0FBQTs7SUFDbEMsTUFBTUcsTUFBTSxHQUFHLE1BQU0sSUFBQUYsT0FBQSxDQUFBRyxLQUFLLEVBQ3hCLGlCQUFpQkgsT0FBQSxDQUFBSSxVQUFVLGFBQWEsQ0FDekM7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","getAllInsurances","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/insurance/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllInsurances() {\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.insurances`\r\n    );\r\n    return result;\r\n  }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,gBAAgBA,CAAA;;IAClC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,aAAa,CACzC;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/clinics/add\", (0, async_handler_1.asyncHandler)(function addNewClinic(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield service_1.ClinicService.registerClinic(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    if (buildResponse) {\n      return buildResponse;\n    }\n    return result;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJhZGROZXdDbGluaWMiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJyZXN1bHQiLCJDbGluaWNTZXJ2aWNlIiwicmVnaXN0ZXJDbGluaWMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjbGluaWNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IENsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIFwiL2NsaW5pY3MvYWRkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGFkZE5ld0NsaW5pYyhyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDbGluaWNTZXJ2aWNlLnJlZ2lzdGVyQ2xpbmljKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLElBQUksQ0FDVCxjQUFjLEVBQ2QsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsWUFBWUEsQ0FBQ0MsR0FBWSxFQUFFQyxHQUFhOztJQUNsRSxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxNQUFNLEdBQUcsTUFBTVQsU0FBQSxDQUFBVSxhQUFhLENBQUNDLGNBQWMsQ0FBQ0osUUFBUSxDQUFDO0lBQzNELE1BQU1LLGFBQWEsR0FBRyxNQUFNZCxjQUFBLENBQUFlLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDTCxNQUFNLENBQUM7SUFDckQsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9BLGFBQWE7SUFDdEI7SUFDQSxPQUFPSCxNQUFNO0VBQ2YsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","addNewClinic","req","res","formData","body","result","ClinicService","registerClinic","buildResponse","BuildResponse","get"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/clinic/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { ClinicService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.post(\r\n  \"/clinics/add\",\r\n  asyncHandler(async function addNewClinic(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await ClinicService.registerClinic(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }\r\n    return result;\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAY,EAAEC,GAAa;;IAClE,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,MAAM,GAAG,MAAMT,SAAA,CAAAU,aAAa,CAACC,cAAc,CAACJ,QAAQ,CAAC;IAC3D,MAAMK,aAAa,GAAG,MAAMd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,MAAM,CAAC;IACrD,IAAIG,aAAa,EAAE;MACjB,OAAOA,aAAa;IACtB;IACA,OAAOH,MAAM;EACf,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorYup = ExpressErrorYup;\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yWXVwIiwieXVwXzEiLCJyZXF1aXJlIiwiZXJyIiwicmVxIiwicmVzIiwibmV4dCIsIlZhbGlkYXRpb25FcnJvciIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZXJyb3JzIiwiam9pbiIsImlubmVyIiwibGVuZ3RoIiwicmVkdWNlIiwiYWNjIiwiY3VyVmFsIiwicGF0aCIsInR5cGUiLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl95dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFeHByZXNzRXJyb3JZdXAoXHJcbiAgICBlcnI6IGFueSxcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2UsXHJcbiAgICBuZXh0OiBOZXh0RnVuY3Rpb25cclxuKSB7XHJcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SIFlVUCBWQUxJREFUSU9OJyk7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSB7XHJcbiAgICAgICAgICAgIGNvZGU6IDQyMixcclxuICAgICAgICAgICAgbWVzc2FnZTogZXJyLmVycm9ycy5qb2luKCc8YnIvPicpIHx8ICdZdXAgVmFsaWRhdGlvbiBFcnJvciAhJyxcclxuICAgICAgICAgICAgZXJyb3JzOlxyXG4gICAgICAgICAgICAgICAgZXJyLmlubmVyLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICA/IGVyci5pbm5lci5yZWR1Y2UoKGFjYzogYW55LCBjdXJWYWw6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NbYCR7Y3VyVmFsLnBhdGh9YF0gPSBjdXJWYWwubWVzc2FnZSB8fCBjdXJWYWwudHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgICAgICAgICAgICAgfSwge30pXHJcbiAgICAgICAgICAgICAgICAgICAgOiB7IFtgJHtlcnIucGF0aH1gXTogZXJyLm1lc3NhZ2UgfHwgZXJyLnR5cGUgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgbmV4dChlcnIpXHJcblxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyxlQUFBLEdBQUFBLGVBQUE7QUFGQSxNQUFBQyxLQUFBLEdBQUFDLE9BQUE7QUFFQSxTQUFzQkYsZUFBZUEsQ0FDakNHLEdBQVEsRUFDUkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQixJQUFJSCxHQUFHLFlBQVlGLEtBQUEsQ0FBQU0sZUFBZSxFQUFFO01BQ2hDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztNQUNuQyxNQUFNQyxLQUFLLEdBQUc7UUFDVkMsSUFBSSxFQUFFLEdBQUc7UUFDVEMsT0FBTyxFQUFFVCxHQUFHLENBQUNVLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLHdCQUF3QjtRQUM3REQsTUFBTSxFQUNGVixHQUFHLENBQUNZLEtBQUssQ0FBQ0MsTUFBTSxHQUFHLENBQUMsR0FDZGIsR0FBRyxDQUFDWSxLQUFLLENBQUNFLE1BQU0sQ0FBQyxDQUFDQyxHQUFRLEVBQUVDLE1BQVcsS0FBSTtVQUN6Q0QsR0FBRyxDQUFDLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxFQUFFLENBQUMsR0FBR0QsTUFBTSxDQUFDUCxPQUFPLElBQUlPLE1BQU0sQ0FBQ0UsSUFBSTtVQUNyRCxPQUFPSCxHQUFHO1FBQ2QsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUNKO1VBQUUsQ0FBQyxHQUFHZixHQUFHLENBQUNpQixJQUFJLEVBQUUsR0FBR2pCLEdBQUcsQ0FBQ1MsT0FBTyxJQUFJVCxHQUFHLENBQUNrQjtRQUFJO09BQ3ZEO01BQ0QsT0FBT2hCLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDYixLQUFLLENBQUM7SUFDdEM7SUFDQUosSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFFYixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressErrorYup","yup_1","require","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { ValidationError } from \"yup\";\r\n\r\nexport async function ExpressErrorYup(\r\n    err: any,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    if (err instanceof ValidationError) {\r\n        console.log('ERROR YUP VALIDATION');\r\n        const error = {\r\n            code: 422,\r\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\r\n            errors:\r\n                err.inner.length > 0\r\n                    ? err.inner.reduce((acc: any, curVal: any) => {\r\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\r\n                        return acc\r\n                    }, {})\r\n                    : { [`${err.path}`]: err.message || err.type }\r\n        }\r\n        return res.status(422).json(error);\r\n    }\r\n    next(err)\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAFA,MAAAC,KAAA,GAAAC,OAAA;AAEA,SAAsBF,eAAeA,CACjCG,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYF,KAAA,CAAAM,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedOrigins = void 0;\nexports.allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://192.168.50.207:8000\", \"http://172.26.144.1:8000\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsb3dlZE9yaWdpbnMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29uc3RhbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29uc3RhbnRzL2NvbnN0YW50c19hbGxvd2VkX29yZ2luYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGFsbG93ZWRPcmlnaW5zID0gW1xyXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDIwMCcsIC8vIEZyb250ZW5kIFdlYlxyXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxyXG4gICAgXCJodHRwOi8vMTkyLjE2OC41MC4yMDc6ODAwMFwiLFxyXG4gICAgXCJodHRwOi8vMTcyLjI2LjE0NC4xOjgwMDBcIlxyXG4gICBdXHJcbiAgXHJcbiAgIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBYUEsT0FBQSxDQUFBQyxjQUFjLEdBQUcsQ0FDMUIsdUJBQXVCO0FBQUU7QUFDekIsdUJBQXVCO0FBQUU7QUFDekIsNEJBQTRCLEVBQzVCLDBCQUEwQixDQUMxQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","allowedOrigins"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\constants\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["export const allowedOrigins = [\r\n    'http://localhost:4200', // Frontend Web\r\n    'http://localhost:3000', // Frontend Web\r\n    \"http://192.168.50.207:8000\",\r\n    \"http://172.26.144.1:8000\"\r\n   ]\r\n  \r\n  "],"mappings":";;;;;;AAAaA,OAAA,CAAAC,cAAc,GAAG,CAC1B,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,4BAA4B,EAC5B,0BAA0B,CAC1B","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorResponse = ExpressErrorResponse;\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nfunction generateErrorResponseError(e, code) {\n  return lodash_1.default.isObject(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.ResponseError.BaseResponse) {\n      return res.status(err.code).json(generateErrorResponseError(err, err.code));\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiZGVmYXVsdCIsImlzT2JqZWN0IiwibWVzc2FnZSIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJNdWx0ZXJFcnJvciIsInN0YXR1cyIsImpzb24iLCJSZXNwb25zZUVycm9yIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG5pbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCB7UmVzcG9uc2VFcnJvcn0gZnJvbSAnLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvcic7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvcihlOiBFcnJvciwgY29kZTogTnVtYmVyKSB7XHJcbiAgcmV0dXJuIF8uaXNPYmplY3QoZS5tZXNzYWdlKSA/IGUubWVzc2FnZSA6IHsgY29kZSwgbWVzc2FnZTogZS5tZXNzYWdlIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NFcnJvclJlc3BvbnNlKFxyXG4gIGVycjogYW55LFxyXG4gIHJlcTogUmVxdWVzdCxcclxuICByZXM6IFJlc3BvbnNlLFxyXG4gIG5leHQ6IE5leHRGdW5jdGlvblxyXG4pIHtcclxuICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZXJyLCA0MDApKVxyXG4gIH1cclxuXHJcbiAgaWYgKGVyciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gcmVzXHJcbiAgICAgIC5zdGF0dXMoZXJyLmNvZGUpXHJcbiAgICAgIC5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgZXJyLmNvZGUpKVxyXG4gIH1cclxuICBuZXh0KGVycilcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBVUFBLE9BQUEsQ0FBQUMsb0JBQUEsR0FBQUEsb0JBQUE7QUFWQSxNQUFBQyxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBR0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVBLFNBQVNHLDBCQUEwQkEsQ0FBQ0MsQ0FBUSxFQUFFQyxJQUFZO0VBQ3hELE9BQU9KLFFBQUEsQ0FBQUssT0FBQyxDQUFDQyxRQUFRLENBQUNILENBQUMsQ0FBQ0ksT0FBTyxDQUFDLEdBQUdKLENBQUMsQ0FBQ0ksT0FBTyxHQUFHO0lBQUVILElBQUk7SUFBRUcsT0FBTyxFQUFFSixDQUFDLENBQUNJO0VBQU8sQ0FBRTtBQUN6RTtBQUVBLFNBQXNCWCxvQkFBb0JBLENBQ3hDWSxHQUFRLEVBQ1JDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjs7SUFFbEIsSUFBSUgsR0FBRyxZQUFZWCxRQUFBLENBQUFRLE9BQU0sQ0FBQ08sV0FBVyxFQUFFO01BQ3JDLE9BQU9GLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNaLDBCQUEwQixDQUFDTSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbkU7SUFFQSxJQUFJQSxHQUFHLFlBQVlQLGdCQUFBLENBQUFjLGFBQWEsQ0FBQ0MsWUFBWSxFQUFFO01BQzdDLE9BQU9OLEdBQUcsQ0FDUEcsTUFBTSxDQUFDTCxHQUFHLENBQUNKLElBQUksQ0FBQyxDQUNoQlUsSUFBSSxDQUFDWiwwQkFBMEIsQ0FBQ00sR0FBRyxFQUFFQSxHQUFHLENBQUNKLElBQUksQ0FBQyxDQUFDO0lBQ3BEO0lBQ0FPLElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ1gsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","ExpressErrorResponse","multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","default","isObject","message","err","req","res","next","MulterError","status","json","ResponseError","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\r\nimport _ from 'lodash';\r\n\r\nimport { NextFunction, Request, Response } from 'express';\r\nimport {ResponseError} from '../modules/error/response_error';\r\n\r\nfunction generateErrorResponseError(e: Error, code: Number) {\r\n  return _.isObject(e.message) ? e.message : { code, message: e.message }\r\n}\r\n\r\nexport async function ExpressErrorResponse(\r\n  err: any,\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  if (err instanceof multer.MulterError) {\r\n    return res.status(400).json(generateErrorResponseError(err, 400))\r\n  }\r\n\r\n  if (err instanceof ResponseError.BaseResponse) {\r\n    return res\r\n      .status(err.code)\r\n      .json(generateErrorResponseError(err, err.code))\r\n  }\r\n  next(err)\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUAA,OAAA,CAAAC,oBAAA,GAAAA,oBAAA;AAVA,MAAAC,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAAE,gBAAA,GAAAF,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAOJ,QAAA,CAAAK,OAAC,CAACC,QAAQ,CAACH,CAAC,CAACI,OAAO,CAAC,GAAGJ,CAAC,CAACI,OAAO,GAAG;IAAEH,IAAI;IAAEG,OAAO,EAAEJ,CAAC,CAACI;EAAO,CAAE;AACzE;AAEA,SAAsBX,oBAAoBA,CACxCY,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAQ,OAAM,CAACO,WAAW,EAAE;MACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAc,aAAa,CAACC,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPG,MAAM,CAACL,GAAG,CAACJ,IAAI,CAAC,CAChBU,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACJ,IAAI,CAAC,CAAC;IACpD;IACAO,IAAI,CAACH,GAAG,CAAC;EACX,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressAutoHandleTransaction = ExpressAutoHandleTransaction;\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once(\"finish\", () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log(\"AUTO COMMIT!!!\");\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0F1dG9IYW5kbGVUcmFuc2FjdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJfdHJhbnNhY3Rpb24iLCJvbmNlIiwidHJhbnNhY3Rpb25LZXlzIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJsZW5ndGgiLCJ0eG4iLCJmaW5pc2hlZCIsImVuZHBvaW50Iiwib3JpZ2luYWxVcmwiLCJjb25zb2xlIiwid2FybiIsImxvZyIsImNvbW1pdCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtaWRkbGV3YXJlc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tIFwic2VxdWVsaXplXCI7XHJcbmltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVzcG9uc2UsIFJlcXVlc3QgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb24oXHJcbiAgcmVxOiBhbnksXHJcbiAgcmVzOiBSZXNwb25zZSxcclxuICBuZXh0OiBOZXh0RnVuY3Rpb25cclxuKSB7XHJcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxyXG4gIHJlcS5fdHJhbnNhY3Rpb24gPSByZXEuX3RyYW5zYWN0aW9uIHx8IHt9O1xyXG5cclxuICByZXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IF90cmFuc2FjdGlvbiB9ID0gcmVxO1xyXG5cclxuICAgIGlmICghX3RyYW5zYWN0aW9uKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbktleXMgPSBPYmplY3Qua2V5cyhfdHJhbnNhY3Rpb24pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2FjdGlvbktleXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgY29uc3QgdHhuID0gX3RyYW5zYWN0aW9uW3RyYW5zYWN0aW9uS2V5c1tpXV0gYXMgVHJhbnNhY3Rpb24gJiB7XHJcbiAgICAgICAgZmluaXNoZWQ/OiBzdHJpbmc7XHJcbiAgICAgIH07XHJcbiAgICAgIGlmICghdHhuPy5maW5pc2hlZCkge1xyXG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gcmVxLm9yaWdpbmFsVXJsO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgZW5kcG9pbnQgJHtlbmRwb2ludH0gcG90ZW50aWFsbHkgY2FuIGxlYWQgdG8gYnVnYCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBVVRPIENPTU1JVCEhIVwiKTtcclxuICAgICAgICB0eG4uY29tbWl0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgbmV4dCgpO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyw0QkFBQSxHQUFBQSw0QkFBQTtBQUFBLFNBQXNCQSw0QkFBNEJBLENBQ2hEQyxHQUFRLEVBQ1JDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCO0lBQ0FGLEdBQUcsQ0FBQ0csWUFBWSxHQUFHSCxHQUFHLENBQUNHLFlBQVksSUFBSSxFQUFFO0lBRXpDRixHQUFHLENBQUNHLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBSztNQUN0QixNQUFNO1FBQUVEO01BQVksQ0FBRSxHQUFHSCxHQUFHO01BRTVCLElBQUksQ0FBQ0csWUFBWSxFQUFFO1FBQ2pCO01BQ0Y7TUFFQSxNQUFNRSxlQUFlLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSixZQUFZLENBQUM7TUFDakQsS0FBSyxJQUFJSyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILGVBQWUsQ0FBQ0ksTUFBTSxFQUFFRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xELE1BQU1FLEdBQUcsR0FBR1AsWUFBWSxDQUFDRSxlQUFlLENBQUNHLENBQUMsQ0FBQyxDQUUxQztRQUNELElBQUksRUFBQ0UsR0FBRyxhQUFIQSxHQUFHLHVCQUFIQSxHQUFHLENBQUVDLFFBQVEsR0FBRTtVQUNsQixNQUFNQyxRQUFRLEdBQUdaLEdBQUcsQ0FBQ2EsV0FBVztVQUNoQ0MsT0FBTyxDQUFDQyxJQUFJLENBQUMsWUFBWUgsUUFBUSw4QkFBOEIsQ0FBQztVQUNoRUUsT0FBTyxDQUFDRSxHQUFHLENBQUMsZ0JBQWdCLENBQUM7VUFDN0JOLEdBQUcsQ0FBQ08sTUFBTSxFQUFFO1FBQ2Q7TUFDRjtJQUNGLENBQUMsQ0FBQztJQUVGZixJQUFJLEVBQUU7RUFDUixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from \"sequelize\";\r\nimport { NextFunction, Response, Request } from \"express\";\r\n\r\nexport async function ExpressAutoHandleTransaction(\r\n  req: any,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  // Ensure _transaction is initialized\r\n  req._transaction = req._transaction || {};\r\n\r\n  res.once(\"finish\", () => {\r\n    const { _transaction } = req;\r\n\r\n    if (!_transaction) {\r\n      return;\r\n    }\r\n\r\n    const transactionKeys = Object.keys(_transaction);\r\n    for (let i = 0; i < transactionKeys.length; i += 1) {\r\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\r\n        finished?: string;\r\n      };\r\n      if (!txn?.finished) {\r\n        const endpoint = req.originalUrl;\r\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\r\n        console.log(\"AUTO COMMIT!!!\");\r\n        txn.commit();\r\n      }\r\n    }\r\n  });\r\n\r\n  next();\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,4BAAA,GAAAA,4BAAA;AAAA,SAAsBA,4BAA4BA,CAChDC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = require(\"./routes/index\");\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = require(\"./middlewares/express_error_yup\");\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = require(\"./constants/constants_allowed_orginal\");\nconst express_error_response_1 = require(\"./middlewares/express_error_response\");\nconst express_auto_handle_transaction_1 = require(\"./middlewares/express_auto_handle_transaction\");\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.allowedOrigins,\n  methods: \"GET,POST,PUT,DELETE\",\n  allowedHeaders: \"Content-Type,Authorization\"\n};\nconst app = (0, express_1.default)();\napp.use((0, cors_1.default)({\n  origin: \"*\",\n  methods: [\"GET\", \"POST\", \"PUT\", \"DELTE\"],\n  allowedHeaders: [\"Content-Type\", \"Authorization\"]\n}));\n// view engine setup\napp.set(\"views\", path_1.default.join(`${__dirname}/../`, \"views\"));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: \"200mb\",\n  type: \"application/json\"\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, \"public\")));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.routes);\n// app.use('/v1', handleRollbackTransaction)\napp.use(\"/v1\", express_error_yup_1.ExpressErrorYup);\napp.use(\"/v1\", express_error_response_1.ExpressErrorResponse);\napp.use(express_auto_handle_transaction_1.ExpressAutoHandleTransaction);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get(\"env\") === \"development\" ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvbl8xIiwib3B0Q29ycyIsIm9yaWdpbiIsImFsbG93ZWRPcmlnaW5zIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiYXBwIiwiZGVmYXVsdCIsInVzZSIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwibGltaXQiLCJ0eXBlIiwic3RhdGljIiwiZXhwcmVzcyIsIm13Iiwicm91dGVzIiwiRXhwcmVzc0Vycm9yWXVwIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG5pbXBvcnQgaHBwIGZyb20gXCJocHBcIjtcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcclxuaW1wb3J0IGhlbG1ldCBmcm9tIFwiaGVsbWV0XCI7XHJcbmltcG9ydCByZXF1ZXN0SXAgZnJvbSBcInJlcXVlc3QtaXBcIjtcclxuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gXCJjb21wcmVzc2lvblwiO1xyXG5pbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSBcImh0dHAtZXJyb3JzXCI7XHJcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcclxuaW1wb3J0IHsgcm91dGVzIH0gZnJvbSBcIi4vcm91dGVzL2luZGV4XCI7XHJcbmltcG9ydCB1c2VyQWdlbnQgZnJvbSBcImV4cHJlc3MtdXNlcmFnZW50XCI7XHJcbmltcG9ydCB7IEV4cHJlc3NFcnJvcll1cCB9IGZyb20gXCIuL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwXCI7XHJcbmltcG9ydCBleHByZXNzLCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBhbGxvd2VkT3JpZ2lucyB9IGZyb20gXCIuL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsXCI7XHJcbmltcG9ydCB7IEV4cHJlc3NFcnJvclJlc3BvbnNlIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvblwiO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xyXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogYWxsb3dlZE9yaWdpbnMsXHJcbiAgbWV0aG9kczogXCJHRVQsUE9TVCxQVVQsREVMRVRFXCIsXHJcbiAgYWxsb3dlZEhlYWRlcnM6IFwiQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb25cIixcclxufTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuYXBwLnVzZShcclxuICBjb3JzKHtcclxuICAgIG9yaWdpbjogXCIqXCIsXHJcbiAgICBtZXRob2RzOiBbXCJHRVRcIiwgXCJQT1NUXCIsIFwiUFVUXCIsIFwiREVMVEVcIl0sXHJcbiAgICBhbGxvd2VkSGVhZGVyczogW1wiQ29udGVudC1UeXBlXCIsIFwiQXV0aG9yaXphdGlvblwiXSxcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gdmlldyBlbmdpbmUgc2V0dXBcclxuYXBwLnNldChcInZpZXdzXCIsIHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsIFwidmlld3NcIikpO1xyXG4vLyBhcHAuc2V0KCd2aWV3IGVuZ2luZScsICdwdWcnKVxyXG5cclxuYXBwLnVzZShoZWxtZXQoKSk7XHJcbmFwcC51c2UoY29ycyhvcHRDb3JzKSk7XHJcbi8vIGFwcC51c2UobG9nZ2VyKCdjb21iaW5lZCcsIHsgc3RyZWFtOiB3aW5zdG9uU3RyZWFtIH0pKVxyXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7IC8vIFRPRE8gOiAgY2hlY2sgaXQgc2hvdWxkIGJlIGZhbHNlIG9yIHRydWVcclxuYXBwLnVzZShcclxuICBleHByZXNzLmpzb24oe1xyXG4gICAgbGltaXQ6IFwiMjAwbWJcIixcclxuICAgIHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0pXHJcbik7XHJcblxyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcclxuYXBwLnVzZShjb21wcmVzc2lvbigpKTtcclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oYCR7X19kaXJuYW1lfS8uLi9gLCBcInB1YmxpY1wiKSkpO1xyXG5hcHAudXNlKGhwcCgpKTtcclxuYXBwLnVzZSh1c2VyQWdlbnQuZXhwcmVzcygpKTtcclxuYXBwLnVzZShyZXF1ZXN0SXAubXcoKSk7XHJcbi8vIFRPRE8gOiBhZGQgdGhpcyBsYXRlclxyXG5cclxuLy8gSW5pdGlhbCBSb3V0ZVxyXG5hcHAudXNlKHJvdXRlcyk7XHJcblxyXG4vLyBhcHAudXNlKCcvdjEnLCBoYW5kbGVSb2xsYmFja1RyYW5zYWN0aW9uKVxyXG5hcHAudXNlKFwiL3YxXCIsIEV4cHJlc3NFcnJvcll1cCk7XHJcbmFwcC51c2UoXCIvdjFcIiwgRXhwcmVzc0Vycm9yUmVzcG9uc2UpO1xyXG5hcHAudXNlKEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb24pO1xyXG5cclxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZShmdW5jdGlvbiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcclxuICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpO1xyXG59KTtcclxuXHJcbi8vIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZShmdW5jdGlvbiAoZXJyOiBhbnksIHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XHJcbiAgLy8gc2V0IGxvY2Fscywgb25seSBwcm92aWRpbmcgZXJyb3IgaW4gZGV2ZWxvcG1lbnRcclxuICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcclxuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoXCJlbnZcIikgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVyciA6IHt9O1xyXG5cclxuICAvLyByZW5kZXIgdGhlIGVycm9yIHBhZ2VcclxuICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKTtcclxuICByZXMuanNvbih7XHJcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcclxuICAgIGVycm9yOiBlcnIsXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhcHA7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FB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","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_auto_handle_transaction_1","optCors","origin","allowedOrigins","methods","allowedHeaders","app","default","use","set","join","__dirname","urlencoded","extended","json","limit","type","static","express","mw","routes","ExpressErrorYup","ExpressErrorResponse","ExpressAutoHandleTransaction","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport hpp from \"hpp\";\r\nimport cors from \"cors\";\r\nimport path from \"path\";\r\nimport helmet from \"helmet\";\r\nimport requestIp from \"request-ip\";\r\nimport compression from \"compression\";\r\nimport createError from \"http-errors\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport { routes } from \"./routes/index\";\r\nimport userAgent from \"express-useragent\";\r\nimport { ExpressErrorYup } from \"./middlewares/express_error_yup\";\r\nimport express, { NextFunction, Request, Response } from \"express\";\r\nimport { allowedOrigins } from \"./constants/constants_allowed_orginal\";\r\nimport { ExpressErrorResponse } from \"./middlewares/express_error_response\";\r\nimport { ExpressAutoHandleTransaction } from \"./middlewares/express_auto_handle_transaction\";\r\n\r\n// TODO: change to .ts\r\nconst optCors: cors.CorsOptions = {\r\n  origin: allowedOrigins,\r\n  methods: \"GET,POST,PUT,DELETE\",\r\n  allowedHeaders: \"Content-Type,Authorization\",\r\n};\r\nconst app = express();\r\n\r\napp.use(\r\n  cors({\r\n    origin: \"*\",\r\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELTE\"],\r\n    allowedHeaders: [\"Content-Type\", \"Authorization\"],\r\n  })\r\n);\r\n\r\n// view engine setup\r\napp.set(\"views\", path.join(`${__dirname}/../`, \"views\"));\r\n// app.set('view engine', 'pug')\r\n\r\napp.use(helmet());\r\napp.use(cors(optCors));\r\n// app.use(logger('combined', { stream: winstonStream }))\r\napp.use(express.urlencoded({ extended: false })); // TODO :  check it should be false or true\r\napp.use(\r\n  express.json({\r\n    limit: \"200mb\",\r\n    type: \"application/json\",\r\n  })\r\n);\r\n\r\napp.use(cookieParser());\r\napp.use(compression());\r\napp.use(express.static(path.join(`${__dirname}/../`, \"public\")));\r\napp.use(hpp());\r\napp.use(userAgent.express());\r\napp.use(requestIp.mw());\r\n// TODO : add this later\r\n\r\n// Initial Route\r\napp.use(routes);\r\n\r\n// app.use('/v1', handleRollbackTransaction)\r\napp.use(\"/v1\", ExpressErrorYup);\r\napp.use(\"/v1\", ExpressErrorResponse);\r\napp.use(ExpressAutoHandleTransaction);\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req: Request, res: Response, next: NextFunction) {\r\n  next(createError(404));\r\n});\r\n\r\n// error handler\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // set locals, only providing error in development\r\n  res.locals.message = err.message;\r\n  res.locals.error = req.app.get(\"env\") === \"development\" ? err : {};\r\n\r\n  // render the error page\r\n  res.status(err.status || 500);\r\n  res.json({\r\n    message: err.message,\r\n    error: err,\r\n  });\r\n});\r\n\r\nmodule.exports = app;\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050577},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.routes = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = require(\"./public\");\nconst response_error_1 = require(\"../modules/error/response_error\");\nexports.routes = express_1.default.Router();\n/* Home Page. */\nexports.routes.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nexports.routes.get('/v1', function (req, res, next) {\n  throw new response_error_1.ResponseError.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nexports.routes.use('/v1', public_1.router);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZXhwb3J0cyIsInJvdXRlcyIsImRlZmF1bHQiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2VuZCIsIlJlc3BvbnNlRXJyb3IiLCJGb3JiaWRkZW4iLCJ1c2UiLCJyb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvcm91dGVzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IHtyb3V0ZXJ9IGZyb20gJy4vcHVibGljJztcclxuaW1wb3J0IHtSZXNwb25zZUVycm9yfSBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZXMgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLyogSG9tZSBQYWdlLiAqL1xyXG5yb3V0ZXMuZ2V0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zZW5kKGA8aDE+V2VsY29tZSBUbyBDbGljbmljIFN1cHBvcnQgQ2VudGVyIHNlcnZlcjwvaDE+PGJyLz48YnIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMz5GaW5kIEFwaSBkb2NzIEhlcmUgOjwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPjxhPi92MS9hcGktZG9jczwvYT48L2gzPmApXHJcbiAgfSlcclxuXHJcbi8qIEZvcmJpZGRlbiBQYWdlLiAqL1xyXG5yb3V0ZXMuZ2V0KCcvdjEnLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQgKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Gb3JiaWRkZW4oJ2ZvcmJpZGRlbiwgd3JvbmcgYWNjZXNzIGVuZHBvaW50JylcclxuICB9KVxyXG5cclxuLyogRGVjbGFyZSBSb3V0ZSAqL1xyXG5yb3V0ZXMudXNlKCcvdjEnLCByb3V0ZXIpXHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVhRyxPQUFBLENBQUFDLE1BQU0sR0FBR04sU0FBQSxDQUFBTyxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUV0QztBQUNBSCxPQUFBLENBQUFDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsT0FBQSxDQUFBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFDdEMsTUFBTSxJQUFJUixnQkFBQSxDQUFBVSxhQUFhLENBQUNDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztBQUN2RSxDQUFDLENBQUM7QUFFSjtBQUNBVixPQUFBLENBQUFDLE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLEtBQUssRUFBRWIsUUFBQSxDQUFBYyxNQUFNLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","exports","routes","default","Router","get","req","res","next","send","ResponseError","Forbidden","use","router"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\r\nimport {router} from './public';\r\nimport {ResponseError} from '../modules/error/response_error';\r\n\r\nexport const routes = express.Router();\r\n\r\n/* Home Page. */\r\nroutes.get('/', function (req, res, next) {\r\n\r\n    return res.send(`<h1>Welcome To Clicnic Support Center server</h1><br/><br/>\r\n                    <h3>Find Api docs Here :</h3>\r\n                    <h3><a>/v1/api-docs</a></h3>`)\r\n  })\r\n\r\n/* Forbidden Page. */\r\nroutes.get('/v1', function (req, res, next ) {\r\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\r\n  })\r\n\r\n/* Declare Route */\r\nroutes.use('/v1', router)\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AAEaG,OAAA,CAAAC,MAAM,GAAGN,SAAA,CAAAO,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAH,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAR,OAAA,CAAAC,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIR,gBAAA,CAAAU,aAAa,CAACC,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAV,OAAA,CAAAC,MAAM,CAACU,GAAG,CAAC,KAAK,EAAEb,QAAA,CAAAc,MAAM,CAAC","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.router = void 0;\nconst express_1 = __importDefault(require(\"express\"));\nexports.router = express_1.default.Router();\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\nrequire(\"../controller/doctors/controller\");\nrequire(\"../controller/medications/controller\");\nrequire(\"../controller/diseases/controller\");\nrequire(\"../controller/prescription-medicine/controller\");\nrequire(\"../controller/clinic_services/controller\");\nrequire(\"../controller/cities/controller\");\nrequire(\"../controller/insurance/controller\");\nrequire(\"../controller/clinic/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJvdXRlciIsImRlZmF1bHQiLCJSb3V0ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvcm91dGVzL3B1YmxpYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vLyAgQVBJc1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hdXRoL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3VzZXIvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FwcG9pbnRtZW50L2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FkbWluL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvbWVkaWNhdGlvbnMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvZGlzZWFzZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2NsaW5pY19zZXJ2aWNlcy9jb250cm9sbGVyXCIpO1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jaXRpZXMvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvaW5zdXJhbmNlL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2NsaW5pYy9jb250cm9sbGVyXCIpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsU0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFYUMsT0FBQSxDQUFBQyxNQUFNLEdBQUdKLFNBQUEsQ0FBQUssT0FBTyxDQUFDQyxNQUFNLEVBQUU7QUFFdEM7QUFDQUosT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDeENBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3Q0EsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBQy9DQSxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFDekNBLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUM1Q0EsT0FBTyxDQUFDLGtDQUFrQyxDQUFDO0FBQzNDQSxPQUFPLENBQUMsc0NBQXNDLENBQUM7QUFDL0NBLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUM1Q0EsT0FBTyxDQUFDLGdEQUFnRCxDQUFDO0FBQ3pEQSxPQUFPLENBQUMsMENBQTBDLENBQUM7QUFDbkRBLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztBQUMxQ0EsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQzdDQSxPQUFPLENBQUMsaUNBQWlDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","exports","router","default","Router"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\routes\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nexport const router = express.Router();\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\nrequire(\"../controller/doctors/controller\");\r\nrequire(\"../controller/medications/controller\");\r\nrequire(\"../controller/diseases/controller\");\r\nrequire(\"../controller/prescription-medicine/controller\");\r\nrequire(\"../controller/clinic_services/controller\");\r\nrequire(\"../controller/cities/controller\");\r\nrequire(\"../controller/insurance/controller\");\r\nrequire(\"../controller/clinic/controller\");\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,MAAM,GAAGJ,SAAA,CAAAK,OAAO,CAACC,MAAM,EAAE;AAEtC;AACAJ,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,kCAAkC,CAAC;AAC3CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,mCAAmC,CAAC;AAC5CA,OAAO,CAAC,gDAAgD,CAAC;AACzDA,OAAO,CAAC,0CAA0C,CAAC;AACnDA,OAAO,CAAC,iCAAiC,CAAC;AAC1CA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,iCAAiC,CAAC","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst service_2 = require(\"../clinic/service\");\nconst services_1 = require(\"../patients/services\");\n// ***** clinic sign-up *****\npublic_1.router.post(`/auth/clinic/register`, (0, async_handler_1.asyncHandler)(function clinicRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_2.ClinicService.registerClinic(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** patient sign-up *****\npublic_1.router.post(`/auth/patient/register`, (0, async_handler_1.asyncHandler)(function patientRegister(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.PatientService.registerPatient(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** confirm *****\npublic_1.router.post(\"/auth/verify-clinic-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmClinicEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/verify-patient-email\", (0, async_handler_1.asyncHandler)(function verifyEmail(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      email,\n      verify_code\n    } = req.body;\n    const data = yield service_1.AuthService.confirmPatientEmail({\n      email,\n      verify_code\n    });\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** clinic-sign-in *****\npublic_1.router.post(\"/auth/clinic-sign-in\", (0, async_handler_1.asyncHandler)(function clinicSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.clinicSignIn(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** doctor-sign-in *****\npublic_1.router.post(\"/auth/doctor-sign-in\", (0, async_handler_1.asyncHandler)(function doctorSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.doctorSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post(\"/auth/patient-sign-in\", (0, async_handler_1.asyncHandler)(function patientSignIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.AuthService.patientSignIn(formData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// router.get(\n//   \"/auth/verify-email-code\",\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\n//     const email = req.query.email;\n//     const data = await AuthService.confirmEmailCode(email);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJhc3luY19oYW5kbGVyXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInNlcnZpY2VfMiIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiY2xpbmljUmVnaXN0ZXIiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJkYXRhIiwiQ2xpbmljU2VydmljZSIsInJlZ2lzdGVyQ2xpbmljIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsInBhdGllbnRSZWdpc3RlciIsIlBhdGllbnRTZXJ2aWNlIiwicmVnaXN0ZXJQYXRpZW50IiwidmVyaWZ5RW1haWwiLCJuZXh0IiwiZW1haWwiLCJ2ZXJpZnlfY29kZSIsIkF1dGhTZXJ2aWNlIiwiY29uZmlybUNsaW5pY0VtYWlsIiwiY29uZmlybVBhdGllbnRFbWFpbCIsImNsaW5pY1NpZ25JbiIsImRvY3RvclNpZ25JbiIsInBhdGllbnRTaWduSW4iXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcblxyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IENsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi4vY2xpbmljL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgUGF0aWVudFNlcnZpY2UgfSBmcm9tIFwiLi4vcGF0aWVudHMvc2VydmljZXNcIjtcclxuXHJcbi8vICoqKioqIGNsaW5pYyBzaWduLXVwICoqKioqXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYXV0aC9jbGluaWMvcmVnaXN0ZXJgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjbGluaWNSZWdpc3RlcihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2xpbmljU2VydmljZS5yZWdpc3RlckNsaW5pYyhmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogcGF0aWVudCBzaWduLXVwICoqKioqXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYXV0aC9wYXRpZW50L3JlZ2lzdGVyYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gcGF0aWVudFJlZ2lzdGVyKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5yZWdpc3RlclBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKioqIGNvbmZpcm0gKioqKipcclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC92ZXJpZnktY2xpbmljLWVtYWlsXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUVtYWlsKFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZSxcclxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCB7IGVtYWlsLCB2ZXJpZnlfY29kZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmNvbmZpcm1DbGluaWNFbWFpbCh7ZW1haWwsIHZlcmlmeV9jb2RlfSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC92ZXJpZnktcGF0aWVudC1lbWFpbFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB2ZXJpZnlFbWFpbChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2UsXHJcbiAgICBuZXh0OiBOZXh0RnVuY3Rpb25cclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgeyBlbWFpbCwgdmVyaWZ5X2NvZGUgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmNvbmZpcm1QYXRpZW50RW1haWwoe2VtYWlsLCB2ZXJpZnlfY29kZX0pO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5cclxuLy8gKioqKiogY2xpbmljLXNpZ24taW4gKioqKipcclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC9jbGluaWMtc2lnbi1pblwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjbGluaWNTaWduSW4ocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmNsaW5pY1NpZ25Jbihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogZG9jdG9yLXNpZ24taW4gKioqKipcclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC9kb2N0b3Itc2lnbi1pblwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBkb2N0b3JTaWduSW4ocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLmRvY3RvclNpZ25Jbihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLnBvc3QoXHJcbiAgXCIvYXV0aC9wYXRpZW50LXNpZ24taW5cIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gcGF0aWVudFNpZ25JbihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UucGF0aWVudFNpZ25Jbihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgXCIvYXV0aC92ZXJpZnktZW1haWwtY29kZVwiLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWxDb2RlKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4vLyAgICAgY29uc3QgZW1haWwgPSByZXEucXVlcnkuZW1haWw7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2UuY29uZmlybUVtYWlsQ29kZShlbWFpbCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgfSlcclxuLy8gKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGNBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLFNBQUEsR0FBQUos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","map":{"version":3,"names":["app_response_1","require","async_handler_1","public_1","service_1","service_2","services_1","router","post","asyncHandler","clinicRegister","req","res","formData","body","data","ClinicService","registerClinic","buildResponse","BuildResponse","get","status","code","json","patientRegister","PatientService","registerPatient","verifyEmail","next","email","verify_code","AuthService","confirmClinicEmail","confirmPatientEmail","clinicSignIn","doctorSignIn","patientSignIn"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/auth/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { AuthService } from \"./service\";\r\nimport { ClinicService } from \"../clinic/service\";\r\nimport { PatientService } from \"../patients/services\";\r\n\r\n// ***** clinic sign-up *****\r\nrouter.post(\r\n  `/auth/clinic/register`,\r\n  asyncHandler(async function clinicRegister(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await ClinicService.registerClinic(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// ***** patient sign-up *****\r\nrouter.post(\r\n  `/auth/patient/register`,\r\n  asyncHandler(async function patientRegister(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await PatientService.registerPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// ***** confirm *****\r\nrouter.post(\r\n  \"/auth/verify-clinic-email\",\r\n  asyncHandler(async function verifyEmail(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { email, verify_code } = req.body;\r\n\r\n    const data = await AuthService.confirmClinicEmail({email, verify_code});\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  \"/auth/verify-patient-email\",\r\n  asyncHandler(async function verifyEmail(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { email, verify_code } = req.body;\r\n    const data = await AuthService.confirmPatientEmail({email, verify_code});\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n\r\n// ***** clinic-sign-in *****\r\nrouter.post(\r\n  \"/auth/clinic-sign-in\",\r\n  asyncHandler(async function clinicSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.clinicSignIn(formData);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// ***** doctor-sign-in *****\r\nrouter.post(\r\n  \"/auth/doctor-sign-in\",\r\n  asyncHandler(async function doctorSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.doctorSignIn(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  \"/auth/patient-sign-in\",\r\n  asyncHandler(async function patientSignIn(req: any, res: any) {\r\n    const formData = req.body;\r\n    const data = await AuthService.patientSignIn(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   \"/auth/verify-email-code\",\r\n//   asyncHandler(async function confirmEmailCode(req: any, res: any) {\r\n//     const email = req.query.email;\r\n//     const data = await AuthService.confirmEmailCode(email);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BuildResponse = void 0;\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.BuildResponse = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccmVzcG9uc2VcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vdHlwZXMvcmVzcG9uc2UuaW50ZXJmYWNlXCI7XHJcblxyXG50eXBlIERhdGFSZXNwb25zZSA9XHJcbiAgfCB7XHJcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgY29kZT86IG51bWJlcjtcclxuICAgIH1cclxuICB8IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsZFJlc3BvbnNlIHtcclxuICBwcml2YXRlIHN0YXRpYyBiYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbWVzc2FnZSA9IFwiZGF0YSBoYXMgYmVlbiByZWNlaXZlZCFcIixcclxuICAgICAgY29kZSA9IDIwMCxcclxuICAgICAgLi4ucmVzdFxyXG4gICAgfSA9IGRhdGFSZXNwb25zZTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvZGUsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIC4uLnJlc3QsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzcG9uc2UgU3VjY2Vzc1xyXG4gICAqL1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKGRhdGFSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNwb25zZSBDcmVhdGVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZWQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XHJcbiAgICAgIGNvZGRlOiAyMDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZGF0YSBoYXMgYmVlZCBhZGRlZFwiLFxyXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3BvbnNlIFVwZGF0ZVxyXG4gICAqL1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHVwZGF0ZWQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XHJcbiAgICAgIG1lc3NhZ2U6IFwidGhlIGRhdGEgaGFzIGJlZWQgdXBkYXRlZFwiLFxyXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3BvbnNlIERlbGV0ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKHtcclxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVuIGRlbGV0ZWRcIixcclxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFwcFJlc3BvbnNlKGRhdGE6IGFueSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxyXG4gICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgPyBkYXRhLm1lc3NhZ2UgOiBcIlwiLFxyXG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzID8gZGF0YS5zdGF0dXMgOiAwLFxyXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZUNvZGU6IGRhdGEubWVzc2FnZUNvZGUgPyBkYXRhLm1lc3NhZ2VDb2RlIDogXCJcIixcclxuICAgICAgbWVzc2FnZUtpbmQ6IGRhdGEubWVzc2FnZUtpbmQgPyBkYXRhLm1lc3NhZ2VLaW5kIDogbnVsbCxcclxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXHJcbiAgICAgIGRhdGE6IGRhdGEuZGF0YSA/IGRhdGEuZGF0YSA6IG51bGwsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVNBLE1BQWFBLGFBQWE7RUFDaEIsT0FBT0MsWUFBWUEsQ0FBQ0MsWUFBMEI7SUFDcEQsTUFBTTtRQUNKQyxPQUFPLEdBQUcseUJBQXlCO1FBQ25DQyxJQUFJLEdBQUc7TUFBRyxJQUVSRixZQUFZO01BRFhHLElBQUksR0FBQUMsTUFBQSxDQUNMSixZQUFZLEVBSlYsbUJBSUwsQ0FBZTtJQUNoQixPQUFBSyxNQUFBLENBQUFDLE1BQUE7TUFDRUosSUFBSTtNQUNKRDtJQUFPLEdBQ0pFLElBQUk7RUFFWDtFQUVBOzs7RUFJTyxPQUFPSSxHQUFHQSxDQUFDUCxZQUEwQjtJQUMxQyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxZQUFZLENBQUM7RUFDeEM7RUFFQTs7O0VBR08sT0FBT1EsT0FBT0EsQ0FBQ1IsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCRyxLQUFLLEVBQUUsR0FBRztNQUNWUixPQUFPLEVBQUU7SUFBcUIsR0FDM0JELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUlPLE9BQU9VLE9BQU9BLENBQUNWLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQTJCLEdBQ2pDRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFHTyxPQUFPVyxPQUFPQSxDQUFDWCxZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUF1QixHQUM3QkQsWUFBWSxFQUNmO0VBQ0o7RUFFTyxPQUFPWSxXQUFXQSxDQUFDQyxJQUFTO0lBQ2pDLE9BQU87TUFDTFgsSUFBSSxFQUFFVyxJQUFJLENBQUNYLElBQUksR0FBR1csSUFBSSxDQUFDWCxJQUFJLEdBQUcsR0FBRztNQUNqQ0QsT0FBTyxFQUFFWSxJQUFJLENBQUNaLE9BQU8sR0FBR1ksSUFBSSxDQUFDWixPQUFPLEdBQUcsRUFBRTtNQUN6Q2EsTUFBTSxFQUFFRCxJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFRixJQUFJLENBQUNFLFVBQVUsR0FBR0YsSUFBSSxDQUFDRSxVQUFVLEdBQUcsS0FBSztNQUNyREMsV0FBVyxFQUFFSCxJQUFJLENBQUNHLFdBQVcsR0FBR0gsSUFBSSxDQUFDRyxXQUFXLEdBQUcsRUFBRTtNQUNyREMsV0FBVyxFQUFFSixJQUFJLENBQUNJLFdBQVcsR0FBR0osSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSTtNQUN2REMsYUFBYSxFQUFFTCxJQUFJLENBQUNLLGFBQWEsR0FBR0wsSUFBSSxDQUFDSyxhQUFhLEdBQUcsS0FBSztNQUM5REwsSUFBSSxFQUFFQSxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFDQSxJQUFJLEdBQUc7S0FDaEI7RUFDbEI7O0FBakVGTSxPQUFBLENBQUFyQixhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\response\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\r\n\r\ntype DataResponse =\r\n  | {\r\n      message: string;\r\n      code?: number;\r\n    }\r\n  | any;\r\n\r\nexport class BuildResponse {\r\n  private static baseResponse(dataResponse: DataResponse) {\r\n    const {\r\n      message = \"data has been received!\",\r\n      code = 200,\r\n      ...rest\r\n    } = dataResponse;\r\n    return {\r\n      code,\r\n      message,\r\n      ...rest,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Response Success\r\n   */\r\n\r\n  public static get(dataResponse: DataResponse) {\r\n    return this.baseResponse(dataResponse);\r\n  }\r\n\r\n  /**\r\n   * Response Create\r\n   */\r\n  public static created(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      codde: 201,\r\n      message: \"data has beed added\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Response Update\r\n   */\r\n\r\n  public static updated(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      message: \"the data has beed updated\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Response Delete\r\n   */\r\n  public static deleted(dataResponse: DataResponse) {\r\n    return this.baseResponse({\r\n      message: \"data has been deleted\",\r\n      ...dataResponse,\r\n    });\r\n  }\r\n\r\n  public static appResponse(data: any) {\r\n    return {\r\n      code: data.code ? data.code : 200,\r\n      message: data.message ? data.message : \"\",\r\n      status: data.status ? data.status : 0,\r\n      showToUser: data.showToUser ? data.showToUser : false,\r\n      messageCode: data.messageCode ? data.messageCode : \"\",\r\n      messageKind: data.messageKind ? data.messageKind : null,\r\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\r\n      data: data.data ? data.data : null,\r\n    } as AppResponse;\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;AASA,MAAaA,aAAa;EAChB,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAjEFM,OAAA,CAAArB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncHandler = void 0;\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nexports.asyncHandler = express_async_handler_1.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvYXN5bmMtaGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInXHJcblxyXG5leHBvcnQgY29uc3QgYXN5bmNIYW5kbGVyID0gZXhwcmVzc0FzeW5jSGFuZGxlclxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLHVCQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLFlBQVksR0FBR0osdUJBQUEsQ0FBQUssT0FBbUIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","exports","asyncHandler","default"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\r\n\r\nexport const asyncHandler = expressAsyncHandler\r\n\r\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,uBAAA,CAAAK,OAAmB","ignoreList":[]}},"mtime":1741655050589},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN,\n  JWT_ACCESS_TOKEN_EXPIRED\n} = process.env;\nclass AuthService {\n  // public static generateToken(user: any) {\n  //   const payload = {\n  //     id: user.id,\n  //     email: user.email,\n  //     is_verified: user.is_verified, // Include verification status\n  //   };\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\n  // }\n  static clinicSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getClinicByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const clinicData = {\n          id: userData[0].id,\n          name: userData[0].name,\n          owner_name: userData[0].owner_name,\n          email: userData[0].email,\n          city: userData[0].city,\n          phone: userData[0].phone,\n          state: userData[0].state,\n          zip_code: userData[0].zip_code,\n          country: userData[0].country,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static doctorSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getDoctorByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        // if (!userData || userData.length === 0) {\n        //   throw new ResponseError.NotFound(\n        //     \"Account not found or has been deleted.\"\n        //   );\n        // }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.emailConfirmed) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const clinicData = {\n          id: userData[0].id,\n          first_name: userData[0].name,\n          last_name: userData[0].owner_name,\n          email: userData[0].owner_name\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return clinicData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  static patientSignIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        const validateData = (0, use_validation_1.useValidation)(schema_1.loginSchema, formData);\n        const userData = yield (0, db_1.getPatientByPassword)(validateData.email, validateData.password);\n        if (!userData || userData.length === 0) {\n          throw new response_error_1.ResponseError.Unauthorized(\"Invalid email or password.\");\n        }\n        const plainPassword = validateData.password;\n        const hashedPassword = userData[0].password;\n        const isMatch = yield bcrypt_1.default.compare(plainPassword, hashedPassword);\n        if (!isMatch) {\n          throw new response_error_1.ResponseError.Unauthorized(\"email or passwrod is not correct!\");\n        }\n        if (((_a = userData[0]) === null || _a === void 0 ? void 0 : _a.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        if (((_b = userData[0]) === null || _b === void 0 ? void 0 : _b.signup_status) === 0) {\n          throw new response_error_1.ResponseError.BadRequest(\"Email is not confirmed.\");\n        }\n        const token = jsonwebtoken_1.default.sign({\n          id: userData[0].id,\n          email: userData[0].email\n        },\n        // Payload (user info)\n        JWT_SECRET_ACCESS_TOKEN,\n        // Secret key\n        {\n          expiresIn: 60\n        } // Expiry time\n        );\n        const patientData = {\n          id: userData[0].id,\n          first_name: userData[0].first_name,\n          last_name: userData[0].last_name,\n          email: userData[0].email,\n          token\n          // roles: [\n          //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\n          // ],\n          // permissions: [\n          //   ...new Set(\n          //     userData.map((el: any) => el.permission_name).filter(Boolean)\n          //   ),\n          // ],\n        };\n        return patientData;\n      } catch (error) {\n        if (error instanceof response_error_1.ResponseError.BaseResponse) {\n          return error; // Re-throw known errors\n        }\n        throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n      }\n    });\n  }\n  // *****confirmClinicEmail*****\n  static confirmClinicEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getClinicVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n  // *****confirmPatientEmail*****\n  static confirmPatientEmail(clinicData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatientVerificationCode)(clinicData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.AuthService = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiQXV0aFNlcnZpY2UiLCJjbGluaWNTaWduSW4iLCJmb3JtRGF0YSIsInZhbGlkYXRlRGF0YSIsInVzZVZhbGlkYXRpb24iLCJsb2dpblNjaGVtYSIsInVzZXJEYXRhIiwiZ2V0Q2xpbmljQnlQYXNzd29yZCIsImVtYWlsIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJSZXNwb25zZUVycm9yIiwiVW5hdXRob3JpemVkIiwicGxhaW5QYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiaXNNYXRjaCIsImRlZmF1bHQiLCJjb21wYXJlIiwiX2EiLCJzaWdudXBfc3RhdHVzIiwiQmFkUmVxdWVzdCIsIl9iIiwidG9rZW4iLCJzaWduIiwiaWQiLCJleHBpcmVzSW4iLCJjbGluaWNEYXRhIiwibmFtZSIsIm93bmVyX25hbWUiLCJjaXR5IiwicGhvbmUiLCJzdGF0ZSIsInppcF9jb2RlIiwiY291bnRyeSIsImVycm9yIiwiQmFzZVJlc3BvbnNlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJkb2N0b3JTaWduSW4iLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZW1haWxDb25maXJtZWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGF0aWVudFNpZ25JbiIsImdldFBhdGllbnRCeVBhc3N3b3JkIiwicGF0aWVudERhdGEiLCJjb25maXJtQ2xpbmljRW1haWwiLCJkYXRhIiwiZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSIsImNvbmZpcm1QYXRpZW50RW1haWwiLCJnZXRQYXRpZW50VmVyaWZpY2F0aW9uQ29kZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgeyB1c2VWYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgeyBJTG9naW4gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q2xpbmljQnlQYXNzd29yZCxcclxuICBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlLFxyXG4gIGdldERvY3RvckJ5UGFzc3dvcmQsXHJcbiAgZ2V0UGF0aWVudEJ5UGFzc3dvcmQsXHJcbiAgZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUsXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuaW1wb3J0IHsgbG9naW5TY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuaW1wb3J0IHsgSVBhdGllbnQgfSBmcm9tIFwiLi4vcGF0aWVudHMvSVBhdGllbnRcIjtcclxuXHJcbmNvbnN0IHtcclxuICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICBKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4sXHJcbiAgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVELFxyXG59OiBhbnkgPSBwcm9jZXNzLmVudjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBdXRoU2VydmljZSB7XHJcbiAgLy8gcHVibGljIHN0YXRpYyBnZW5lcmF0ZVRva2VuKHVzZXI6IGFueSkge1xyXG4gIC8vICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAvLyAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgLy8gICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gIC8vICAgICBpc192ZXJpZmllZDogdXNlci5pc192ZXJpZmllZCwgLy8gSW5jbHVkZSB2ZXJpZmljYXRpb24gc3RhdHVzXHJcbiAgLy8gICB9O1xyXG5cclxuICAvLyAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEKTtcclxuICAvLyB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjbGluaWNTaWduSW4oZm9ybURhdGE6IElMb2dpbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGVEYXRhID0gdXNlVmFsaWRhdGlvbihsb2dpblNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldENsaW5pY0J5UGFzc3dvcmQoXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLmVtYWlsLFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5wYXNzd29yZFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1c2VyRGF0YVswXT8uc2lnbnVwX3N0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJFbWFpbCBpcyBub3QgY29uZmlybWVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICAgIHsgaWQ6IHVzZXJEYXRhWzBdLmlkLCBlbWFpbDogdXNlckRhdGFbMF0uZW1haWwgfSwgLy8gUGF5bG9hZCAodXNlciBpbmZvKVxyXG4gICAgICAgIEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLCAvLyBTZWNyZXQga2V5XHJcbiAgICAgICAgeyBleHBpcmVzSW46IDYwIH0gLy8gRXhwaXJ5IHRpbWVcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgY2xpbmljRGF0YSA9IHtcclxuICAgICAgICBpZDogdXNlckRhdGFbMF0uaWQsXHJcbiAgICAgICAgbmFtZTogdXNlckRhdGFbMF0ubmFtZSxcclxuICAgICAgICBvd25lcl9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5lbWFpbCxcclxuICAgICAgICBjaXR5OiB1c2VyRGF0YVswXS5jaXR5LFxyXG4gICAgICAgIHBob25lOiB1c2VyRGF0YVswXS5waG9uZSxcclxuICAgICAgICBzdGF0ZTogdXNlckRhdGFbMF0uc3RhdGUsXHJcbiAgICAgICAgemlwX2NvZGU6IHVzZXJEYXRhWzBdLnppcF9jb2RlLFxyXG4gICAgICAgIGNvdW50cnk6IHVzZXJEYXRhWzBdLmNvdW50cnksXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgLy8gcm9sZXM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQodXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5yb2xlX25hbWUpLmZpbHRlcihCb29sZWFuKSksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgICAvLyBwZXJtaXNzaW9uczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldChcclxuICAgICAgICAvLyAgICAgdXNlckRhdGEubWFwKChlbDogYW55KSA9PiBlbC5wZXJtaXNzaW9uX25hbWUpLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgIC8vICAgKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gY2xpbmljRGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yOyAvLyBSZS10aHJvdyBrbm93biBlcnJvcnNcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvclNpZ25Jbihmb3JtRGF0YTogSUxvZ2luKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2YWxpZGF0ZURhdGEgPSB1c2VWYWxpZGF0aW9uKGxvZ2luU2NoZW1hLCBmb3JtRGF0YSk7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICAgICAgICB2YWxpZGF0ZURhdGEuZW1haWwsXHJcbiAgICAgICAgdmFsaWRhdGVEYXRhLnBhc3N3b3JkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXHJcbiAgICAgIC8vICAgICBcIkFjY291bnQgbm90IGZvdW5kIG9yIGhhcyBiZWVuIGRlbGV0ZWQuXCJcclxuICAgICAgLy8gICApO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIGNvbnN0IHBsYWluUGFzc3dvcmQgPSB2YWxpZGF0ZURhdGEucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gdXNlckRhdGFbMF0ucGFzc3dvcmQ7XHJcbiAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXHJcbiAgICAgICAgICBcImVtYWlsIG9yIHBhc3N3cm9kIGlzIG5vdCBjb3JyZWN0IVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LmVtYWlsQ29uZmlybWVkID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNsaW5pY0RhdGEgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLm5hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YVswXS5vd25lcl9uYW1lLFxyXG5cclxuICAgICAgICAvLyByb2xlczogW1xyXG4gICAgICAgIC8vICAgLi4ubmV3IFNldCh1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnJvbGVfbmFtZSkuZmlsdGVyKEJvb2xlYW4pKSxcclxuICAgICAgICAvLyBdLFxyXG4gICAgICAgIC8vIHBlcm1pc3Npb25zOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KFxyXG4gICAgICAgIC8vICAgICB1c2VyRGF0YS5tYXAoKGVsOiBhbnkpID0+IGVsLnBlcm1pc3Npb25fbmFtZSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgLy8gICApLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBjbGluaWNEYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHBhdGllbnRTaWduSW4oZm9ybURhdGE6IElMb2dpbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGVEYXRhID0gdXNlVmFsaWRhdGlvbihsb2dpblNjaGVtYSwgZm9ybURhdGEpO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldFBhdGllbnRCeVBhc3N3b3JkKFxyXG4gICAgICAgIHZhbGlkYXRlRGF0YS5lbWFpbCxcclxuICAgICAgICB2YWxpZGF0ZURhdGEucGFzc3dvcmRcclxuICAgICAgKTtcclxuICAgICAgaWYgKCF1c2VyRGF0YSB8fCB1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLlwiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwbGFpblBhc3N3b3JkID0gdmFsaWRhdGVEYXRhLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHVzZXJEYXRhWzBdLnBhc3N3b3JkO1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5QYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFxyXG4gICAgICAgICAgXCJlbWFpbCBvciBwYXNzd3JvZCBpcyBub3QgY29ycmVjdCFcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJEYXRhWzBdPy5zaWdudXBfc3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkVtYWlsIGlzIG5vdCBjb25maXJtZWQuXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodXNlckRhdGFbMF0/LnNpZ251cF9zdGF0dXMgPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRW1haWwgaXMgbm90IGNvbmZpcm1lZC5cIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgICB7IGlkOiB1c2VyRGF0YVswXS5pZCwgZW1haWw6IHVzZXJEYXRhWzBdLmVtYWlsIH0sIC8vIFBheWxvYWQgKHVzZXIgaW5mbylcclxuICAgICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgLy8gU2VjcmV0IGtleVxyXG4gICAgICAgIHsgZXhwaXJlc0luOiA2MCB9IC8vIEV4cGlyeSB0aW1lXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHBhdGllbnREYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhWzBdLmlkLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IHVzZXJEYXRhWzBdLmZpcnN0X25hbWUsXHJcbiAgICAgICAgbGFzdF9uYW1lOiB1c2VyRGF0YVswXS5sYXN0X25hbWUsXHJcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhWzBdLmVtYWlsLFxyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIC8vIHJvbGVzOiBbXHJcbiAgICAgICAgLy8gICAuLi5uZXcgU2V0KHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucm9sZV9uYW1lKS5maWx0ZXIoQm9vbGVhbikpLFxyXG4gICAgICAgIC8vIF0sXHJcbiAgICAgICAgLy8gcGVybWlzc2lvbnM6IFtcclxuICAgICAgICAvLyAgIC4uLm5ldyBTZXQoXHJcbiAgICAgICAgLy8gICAgIHVzZXJEYXRhLm1hcCgoZWw6IGFueSkgPT4gZWwucGVybWlzc2lvbl9uYW1lKS5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgICAvLyAgICksXHJcbiAgICAgICAgLy8gXSxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHBhdGllbnREYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2VFcnJvci5CYXNlUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZXJyb3I7IC8vIFJlLXRocm93IGtub3duIGVycm9yc1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAqKioqKmNvbmZpcm1DbGluaWNFbWFpbCoqKioqXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjb25maXJtQ2xpbmljRW1haWwoY2xpbmljRGF0YToge1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldENsaW5pY1ZlcmlmaWNhdGlvbkNvZGUoY2xpbmljRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyAqKioqKmNvbmZpcm1QYXRpZW50RW1haWwqKioqKlxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29uZmlybVBhdGllbnRFbWFpbChjbGluaWNEYXRhOiB7XHJcbiAgICBlbWFpbDogc3RyaW5nO1xyXG4gICAgdmVyaWZ5X2NvZGU6IHN0cmluZztcclxuICB9KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUoY2xpbmljRGF0YSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFD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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","JWT_ACCESS_TOKEN_EXPIRED","process","env","AuthService","clinicSignIn","formData","validateData","useValidation","loginSchema","userData","getClinicByPassword","email","password","length","ResponseError","Unauthorized","plainPassword","hashedPassword","isMatch","default","compare","_a","signup_status","BadRequest","_b","token","sign","id","expiresIn","clinicData","name","owner_name","city","phone","state","zip_code","country","error","BaseResponse","InternalServer","doctorSignIn","getDoctorByPassword","emailConfirmed","first_name","last_name","patientSignIn","getPatientByPassword","patientData","confirmClinicEmail","data","getClinicVerificationCode","confirmPatientEmail","getPatientVerificationCode","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/auth/service.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ILogin } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  getClinicByPassword,\r\n  getClinicVerificationCode,\r\n  getDoctorByPassword,\r\n  getPatientByPassword,\r\n  getPatientVerificationCode,\r\n} from \"./db\";\r\nimport { loginSchema } from \"./schema\";\r\nimport { IPatient } from \"../patients/IPatient\";\r\n\r\nconst {\r\n  JWT_SECRET_ACCESS_TOKEN,\r\n  JWT_SECRET_REFRESH_TOKEN,\r\n  JWT_ACCESS_TOKEN_EXPIRED,\r\n}: any = process.env;\r\n\r\nexport class AuthService {\r\n  // public static generateToken(user: any) {\r\n  //   const payload = {\r\n  //     id: user.id,\r\n  //     email: user.email,\r\n  //     is_verified: user.is_verified, // Include verification status\r\n  //   };\r\n\r\n  //   return jwt.sign(payload, JWT_REFRESH_TOKEN_EXPIRED);\r\n  // }\r\n  public static async clinicSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getClinicByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        name: userData[0].name,\r\n        owner_name: userData[0].owner_name,\r\n        email: userData[0].email,\r\n        city: userData[0].city,\r\n        phone: userData[0].phone,\r\n        state: userData[0].state,\r\n        zip_code: userData[0].zip_code,\r\n        country: userData[0].country,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n  public static async doctorSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getDoctorByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      // if (!userData || userData.length === 0) {\r\n      //   throw new ResponseError.NotFound(\r\n      //     \"Account not found or has been deleted.\"\r\n      //   );\r\n      // }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.emailConfirmed === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const clinicData = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].name,\r\n        last_name: userData[0].owner_name,\r\n        email: userData[0].owner_name,\r\n\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return clinicData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  public static async patientSignIn(formData: ILogin) {\r\n    try {\r\n      const validateData = useValidation(loginSchema, formData);\r\n      const userData = await getPatientByPassword(\r\n        validateData.email,\r\n        validateData.password\r\n      );\r\n      if (!userData || userData.length === 0) {\r\n        throw new ResponseError.Unauthorized(\"Invalid email or password.\");\r\n      }\r\n      const plainPassword = validateData.password;\r\n      const hashedPassword = userData[0].password;\r\n      const isMatch = await bcrypt.compare(plainPassword, hashedPassword);\r\n\r\n      if (!isMatch) {\r\n        throw new ResponseError.Unauthorized(\r\n          \"email or passwrod is not correct!\"\r\n        );\r\n      }\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n\r\n      if (userData[0]?.signup_status === 0) {\r\n        throw new ResponseError.BadRequest(\"Email is not confirmed.\");\r\n      }\r\n      const token = jwt.sign(\r\n        { id: userData[0].id, email: userData[0].email }, // Payload (user info)\r\n        JWT_SECRET_ACCESS_TOKEN, // Secret key\r\n        { expiresIn: 60 } // Expiry time\r\n      );\r\n      const patientData: any = {\r\n        id: userData[0].id,\r\n        first_name: userData[0].first_name,\r\n        last_name: userData[0].last_name,\r\n        email: userData[0].email,\r\n        token,\r\n        // roles: [\r\n        //   ...new Set(userData.map((el: any) => el.role_name).filter(Boolean)),\r\n        // ],\r\n        // permissions: [\r\n        //   ...new Set(\r\n        //     userData.map((el: any) => el.permission_name).filter(Boolean)\r\n        //   ),\r\n        // ],\r\n      };\r\n      return patientData;\r\n    } catch (error) {\r\n      if (error instanceof ResponseError.BaseResponse) {\r\n        return error; // Re-throw known errors\r\n      }\r\n      throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n\r\n  // *****confirmClinicEmail*****\r\n  public static async confirmClinicEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getClinicVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // *****confirmPatientEmail*****\r\n  public static async confirmPatientEmail(clinicData: {\r\n    email: string;\r\n    verify_code: string;\r\n  }) {\r\n    const data = await getPatientVerificationCode(clinicData);\r\n    if (data) {\r\n      return data;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useValidation = useValidation;\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwidXNlVmFsaWRhdGlvbiIsInNjaGVtYSIsInZhbHVlIiwib3B0aW9ucyIsInZhbGlkYXRlU3luYyIsIk9iamVjdCIsImFzc2lnbiIsImFib3J0RWFybHkiLCJzdHJpcFVua25vd24iXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvaGVscGVyL3VzZV92YWxpZGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBTY2hlbWEsIFZhbGlkYXRlT3B0aW9ucyB9IGZyb20gJ3l1cCdcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlVmFsaWRhdGlvbjxUPihcclxuICBzY2hlbWE6IFNjaGVtYTxUPixcclxuICB2YWx1ZTogVCB8IGFueSxcclxuICBvcHRpb25zPzogVmFsaWRhdGVPcHRpb25zXHJcbik6IFQge1xyXG4gIHJldHVybiBzY2hlbWEudmFsaWRhdGVTeW5jKHZhbHVlLCB7XHJcbiAgICBhYm9ydEVhcmx5OiBmYWxzZSxcclxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcclxuICAgIC4uLm9wdGlvbnMsXHJcbiAgfSlcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUlBQSxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQTtBQUFBLFNBQWdCQSxhQUFhQSxDQUMzQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/helper/use_validation.ts"],"sourcesContent":["\r\nimport { Schema, ValidateOptions } from 'yup'\r\n\r\n\r\nexport function useValidation<T>(\r\n  schema: Schema<T>,\r\n  value: T | any,\r\n  options?: ValidateOptions\r\n): T {\r\n  return schema.validateSync(value, {\r\n    abortEarly: false,\r\n    stripUnknown: true,\r\n    ...options,\r\n  })\r\n}\r\n\r\n"],"mappings":";;;;;AAIAA,OAAA,CAAAC,aAAA,GAAAA,aAAA;AAAA,SAAgBA,aAAaA,CAC3BC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ","ignoreList":[]}},"mtime":1741655050590},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nconst base_response_1 = require(\"./base_response\");\nconst internal_server_1 = require(\"./internal_server\");\nconst unauthorized_1 = require(\"./unauthorized\");\nconst forbidden_1 = require(\"./forbidden\");\nconst not_found_1 = require(\"./not_found\");\nconst bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiZXhwb3J0cyIsIlJlc3BvbnNlRXJyb3IiLCJCYXNlUmVzcG9uc2UiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtCYXNlUmVzcG9uc2V9IGZyb20gJy4vYmFzZV9yZXNwb25zZSc7XHJcbmltcG9ydCB7SW50ZXJuYWxTZXJ2ZXJ9IGZyb20gJy4vaW50ZXJuYWxfc2VydmVyJztcclxuaW1wb3J0IHtVbmF1dGhvcml6ZWR9IGZyb20gJy4vdW5hdXRob3JpemVkJztcclxuaW1wb3J0IHtGb3JiaWRkZW59IGZyb20gJy4vZm9yYmlkZGVuJztcclxuaW1wb3J0IHtOb3RGb3VuZH0gZnJvbSAnLi9ub3RfZm91bmQnO1xyXG5pbXBvcnQge0JhZFJlcXVlc3R9IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJlc3BvbnNlRXJyb3IgPSB7XHJcbiAgICBCYXNlUmVzcG9uc2UsXHJcbiAgICBCYWRSZXF1ZXN0LFxyXG4gICAgTm90Rm91bmQsXHJcbiAgICBGb3JiaWRkZW4sXHJcbiAgICBVbmF1dGhvcml6ZWQsXHJcbiAgICBJbnRlcm5hbFNlcnZlcixcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxpQkFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsV0FBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksV0FBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssYUFBQSxHQUFBTCxPQUFBO0FBRWFNLE9BQUEsQ0FBQUMsYUFBYSxHQUFHO0VBQ3pCQyxZQUFZLEVBQVpULGVBQUEsQ0FBQVMsWUFBWTtFQUNaQyxVQUFVLEVBQVZKLGFBQUEsQ0FBQUksVUFBVTtFQUNWQyxRQUFRLEVBQVJOLFdBQUEsQ0FBQU0sUUFBUTtFQUNSQyxTQUFTLEVBQVRSLFdBQUEsQ0FBQVEsU0FBUztFQUNUQyxZQUFZLEVBQVpWLGNBQUEsQ0FBQVUsWUFBWTtFQUNaQyxjQUFjLEVBQWRaLGlCQUFBLENBQUFZO0NBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","exports","ResponseError","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/response_error.ts"],"sourcesContent":["import {BaseResponse} from './base_response';\r\nimport {InternalServer} from './internal_server';\r\nimport {Unauthorized} from './unauthorized';\r\nimport {Forbidden} from './forbidden';\r\nimport {NotFound} from './not_found';\r\nimport {BadRequest} from './bad_request';\r\n\r\nexport const ResponseError = {\r\n    BaseResponse,\r\n    BadRequest,\r\n    NotFound,\r\n    Forbidden,\r\n    Unauthorized,\r\n    InternalServer,\r\n}\r\n\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,aAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,aAAa,GAAG;EACzBC,YAAY,EAAZT,eAAA,CAAAS,YAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAI,UAAU;EACVC,QAAQ,EAARN,WAAA,CAAAM,QAAQ;EACRC,SAAS,EAATR,WAAA,CAAAQ,SAAS;EACTC,YAAY,EAAZV,cAAA,CAAAU,YAAY;EACZC,cAAc,EAAdZ,iBAAA,CAAAY;CACH","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nclass BaseResponse extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.message = message;\n    this.code = statusCode;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJuZXciLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9iYXNlX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBCYXNlUmVzcG9uc2UgZXh0ZW5kcyBFcnJvciB7XHJcbiAgcHVibGljIGNvZGU6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlOiBudW1iZXIpIHtcclxuICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgIHRoaXMuY29kZSA9IHN0YXR1c0NvZGU7XHJcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQWFBLFlBQWEsU0FBUUMsS0FBSztFQUdyQ0MsWUFBWUMsT0FBZSxFQUFFQyxVQUFrQjtJQUM3QyxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUNkLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxPQUFPO0lBQ3RCLElBQUksQ0FBQ0UsSUFBSSxHQUFHRCxVQUFVO0lBQ3RCRSxNQUFNLENBQUNDLGNBQWMsQ0FBQyxJQUFJLEVBQUVDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxTQUFTLENBQUM7RUFDbkQ7O0FBUkZDLE9BQUEsQ0FBQVgsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["BaseResponse","Error","constructor","message","statusCode","code","Object","setPrototypeOf","new","target","prototype","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/base_response.ts"],"sourcesContent":["export class BaseResponse extends Error {\r\n  public code: number;\r\n\r\n  constructor(message: string, statusCode: number) {\r\n    super(message);\r\n    this.message = message;\r\n    this.code = statusCode;\r\n    Object.setPrototypeOf(this, new.target.prototype);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAaA,YAAa,SAAQC,KAAK;EAGrCC,YAAYC,OAAe,EAAEC,UAAkB;IAC7C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,IAAI,GAAGD,UAAU;IACtBE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEC,GAAG,CAACC,MAAM,CAACC,SAAS,CAAC;EACnD;;AARFC,OAAA,CAAAX,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass InternalServer extends base_response_1.BaseResponse {\n  constructor(message = \"Internal server error\") {\n    super(message, 500);\n  }\n}\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9pbnRlcm5hbF9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJlc3BvbnNlIH0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIkludGVybmFsIHNlcnZlciBlcnJvclwiKSB7XHJcbiAgICAgIHN1cGVyKG1lc3NhZ2UsIDUwMCk7XHJcbiAgICB9XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsY0FBZSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDNUNDLFlBQVlDLE9BQU8sR0FBRyx1QkFBdUI7SUFDM0MsS0FBSyxDQUFDQSxPQUFPLEVBQUUsR0FBRyxDQUFDO0VBQ3JCOztBQUhKQyxPQUFBLENBQUFKLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","require","InternalServer","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/internal_server.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class InternalServer extends BaseResponse {\r\n    constructor(message = \"Internal server error\") {\r\n      super(message, 500);\r\n    }\r\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,cAAe,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,uBAAuB;IAC3C,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Unauthorized extends base_response_1.BaseResponse {\n  constructor(message = \"Unauthorized access\") {\n    super(message, 401);\n  }\n}\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvdW5hdXRob3JpemVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWQgZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIlVuYXV0aG9yaXplZCBhY2Nlc3NcIikge1xyXG4gICAgc3VwZXIobWVzc2FnZSwgNDAxKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFhQyxZQUFhLFNBQVFGLGVBQUEsQ0FBQUcsWUFBWTtFQUM1Q0MsWUFBWUMsT0FBTyxHQUFHLHFCQUFxQjtJQUN6QyxLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEZDLE9BQUEsQ0FBQUosWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","Unauthorized","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class Unauthorized extends BaseResponse {\r\n  constructor(message = \"Unauthorized access\") {\r\n    super(message, 401);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,YAAa,SAAQF,eAAA,CAAAG,YAAY;EAC5CC,YAAYC,OAAO,GAAG,qBAAqB;IACzC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1741655050594},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass Forbidden extends base_response_1.BaseResponse {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiQmFzZVJlc3BvbnNlIiwiY29uc3RydWN0b3IiLCJtZXNzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvZm9yYmlkZGVuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QmFzZVJlc3BvbnNlfSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xyXG4gICAgY29uc3RydWN0b3IobWVzc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKG1lc3NzYWdlLCA0MDMpXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsU0FBVSxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdkNDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFKSkMsT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","Forbidden","BaseResponse","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/forbidden.ts"],"sourcesContent":["import {BaseResponse} from \"./base_response\"\r\n\r\nexport class Forbidden extends BaseResponse {\r\n    constructor(messsage: string) {\r\n        super(messsage, 403)\r\n        Object.setPrototypeOf(this, Forbidden.prototype);\r\n    }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,SAAU,SAAQF,eAAA,CAAAG,YAAY;EACvCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAJJC,OAAA,CAAAP,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass NotFound extends base_response_1.BaseResponse {\n  constructor(message = \"Not found\") {\n    super(message, 404);\n  }\n}\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJCYXNlUmVzcG9uc2UiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9ub3RfZm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJlc3BvbnNlIH0gZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBcIk5vdCBmb3VuZFwiKSB7XHJcbiAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwNCk7XHJcbiAgICB9XHJcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsUUFBUyxTQUFRRixlQUFBLENBQUFHLFlBQVk7RUFDdENDLFlBQVlDLE9BQU8sR0FBRyxXQUFXO0lBQy9CLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztFQUNyQjs7QUFISkMsT0FBQSxDQUFBSixRQUFBLEdBQUFBLFFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","require","NotFound","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/not_found.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class NotFound extends BaseResponse {\r\n    constructor(message = \"Not found\") {\r\n      super(message, 404);\r\n    }\r\n  }"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,QAAS,SAAQF,eAAA,CAAAG,YAAY;EACtCC,YAAYC,OAAO,GAAG,WAAW;IAC/B,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHJC,OAAA,CAAAJ,QAAA,GAAAA,QAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nconst base_response_1 = require(\"./base_response\");\nclass BadRequest extends base_response_1.BaseResponse {\n  constructor(message = \"Bad request\") {\n    super(message, 400);\n  }\n}\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsIkJhc2VSZXNwb25zZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2JhZF9yZXF1ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJCYWQgcmVxdWVzdFwiKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlLCA0MDApO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLFVBQVcsU0FBUUYsZUFBQSxDQUFBRyxZQUFZO0VBQzFDQyxZQUFZQyxPQUFPLEdBQUcsYUFBYTtJQUNqQyxLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7RUFDckI7O0FBSEZDLE9BQUEsQ0FBQUosVUFBQSxHQUFBQSxVQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","require","BadRequest","BaseResponse","constructor","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\modules\\error\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/modules/error/bad_request.ts"],"sourcesContent":["import { BaseResponse } from \"./base_response\";\r\n\r\nexport class BadRequest extends BaseResponse {\r\n  constructor(message = \"Bad request\") {\r\n    super(message, 400);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AAEA,MAAaC,UAAW,SAAQF,eAAA,CAAAG,YAAY;EAC1CC,YAAYC,OAAO,GAAG,aAAa;IACjC,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;EACrB;;AAHFC,OAAA,CAAAJ,UAAA,GAAAA,UAAA","ignoreList":[]}},"mtime":1741655050593},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkIfClinicExists = checkIfClinicExists;\nexports.getClinicByPassword = getClinicByPassword;\nexports.getDoctorByPassword = getDoctorByPassword;\nexports.getPatientByPassword = getPatientByPassword;\nexports.getClinicVerificationCode = getClinicVerificationCode;\nexports.getPatientVerificationCode = getPatientVerificationCode;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkIfClinicExists(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? \n  `, {\n      values: [email]\n    });\n    return result.length > 0;\n  });\n}\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       return null; // Email not found\n//     }\n//     const [doctor] = await query<RowDataPacket[]>(\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\n//       { values: [data.email, data.verify_code] }\n//     );\n//     if (!doctor) {\n//       return null;\n//     }\n//     const resultDoctor = await query<RowDataPacket[]>(\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\n//       { values: [1, new Date(), data.email] }\n//     );\n//     return resultDoctor;\n//   } catch (error) {\n//     console.error(\"Error confirming doctor email:\", error);\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\n//   }\n// }\n// export async function confirmClinicEmail(data: ConfirmEmail) {\n//   try {\n//     const emailExists = await checkIfEmailExists(data.email);\n//     if (!emailExists) {\n//       throw new ResponseError.NotFound(\"Email not found\");\n//     }\n//     // Check if clinic exists with correct verify_code\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\n//       {\n//         values: [data.email],\n//       }\n//     );\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\n//     } else {\n//       await query<RowDataPacket[]>(\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\n//         {\n//           values: [1, new Date(), data.email],\n//         }\n//       );\n//     }\n//     return { success: true, message: \"Email confirmation successful\" };\n//   } catch (error) {\n//     return error;\n//   }\n// }\nfunction getClinicByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(\n      // ` SELECT u.*, r.*,p.*\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n      ` SELECT *\n      FROM ${mysql_1.coreSchema}.clinic \n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\nfunction getDoctorByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(\n    // ` SELECT u.*, r.*,p.*\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\n    ` SELECT *\n    FROM ${mysql_1.coreSchema}.patient \n    WHERE email = ?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction getPatientByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(` SELECT *\n      FROM ${mysql_1.coreSchema}.patients\n      WHERE email = ?`, {\n        values: [email]\n      });\n      return user;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n// *****getClinicVerificationCode*****\nfunction getClinicVerificationCode(clinicData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the clinic data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n      values: [clinicData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", clinicData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`);\n    if (storedVerifyCode !== clinicData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.clinic SET signup_status = 1 WHERE email = ?`, {\n      values: [clinicData.email]\n    });\n    return rows;\n  });\n}\n// *****getPatientVerificationCode*****\nfunction getPatientVerificationCode(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Fetch the patient data\n    const [rows] = yield (0, mysql_1.query)(`SELECT email,verify_code FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n      values: [patientData.email]\n    });\n    if (!rows || rows.length === 0) {\n      console.error(\" Email not found in database:\", patientData.email);\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    const storedVerifyCode = rows.verify_code;\n    console.log(` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`);\n    if (storedVerifyCode !== patientData.verify_code) {\n      console.error(\" Verification code mismatch!\");\n      throw new response_error_1.ResponseError.BadRequest(\"The verification code is incorrect!\");\n    }\n    // Update the signup_status\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET signup_status = 1 WHERE email = ?`, {\n      values: [patientData.email]\n    });\n    return rows;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tJZkNsaW5pY0V4aXN0cyIsImdldENsaW5pY0J5UGFzc3dvcmQiLCJnZXREb2N0b3JCeVBhc3N3b3JkIiwiZ2V0UGF0aWVudEJ5UGFzc3dvcmQiLCJnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlIiwiZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUiLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJlbWFpbCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsInBhc3N3b3JkIiwidXNlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImNsaW5pY0RhdGEiLCJyb3dzIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzdG9yZWRWZXJpZnlDb2RlIiwidmVyaWZ5X2NvZGUiLCJwYXRpZW50RGF0YSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0lmQ2xpbmljRXhpc3RzKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA9ID8gXHJcbiAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwO1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uZmlybURvY3RvckVtYWlsKGRhdGE6IENvbmZpcm1FbWFpbCkge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrSWZFbWFpbEV4aXN0cyhkYXRhLmVtYWlsKTtcclxuLy8gICAgIGlmICghZW1haWxFeGlzdHMpIHtcclxuLy8gICAgICAgcmV0dXJuIG51bGw7IC8vIEVtYWlsIG5vdCBmb3VuZFxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IFtkb2N0b3JdID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgYFNFTEVDVCBpZCBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yIFdIRVJFIGVtYWlsID0/IEFORCB2ZXJpZnlfY29kZSA9P2AsXHJcbi8vICAgICAgIHsgdmFsdWVzOiBbZGF0YS5lbWFpbCwgZGF0YS52ZXJpZnlfY29kZV0gfVxyXG4vLyAgICAgKTtcclxuLy8gICAgIGlmICghZG9jdG9yKSB7XHJcbi8vICAgICAgIHJldHVybiBudWxsO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IHJlc3VsdERvY3RvciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbi8vICAgICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3IgU0VUIHNpZ251cF9zdGF0dXM9PywgdXBkYXRlZF9hdD0/IFdIRVJFIGVtYWlsID0/YCxcclxuLy8gICAgICAgeyB2YWx1ZXM6IFsxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSB9XHJcbi8vICAgICApO1xyXG5cclxuLy8gICAgIHJldHVybiByZXN1bHREb2N0b3I7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb25maXJtaW5nIGRvY3RvciBlbWFpbDpcIiwgZXJyb3IpO1xyXG4vLyAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkZhaWxlZCB0byBjb25maXJtIGRvY3RvciBlbWFpbFwiKTtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtQ2xpbmljRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IGVtYWlsRXhpc3RzID0gYXdhaXQgY2hlY2tJZkVtYWlsRXhpc3RzKGRhdGEuZW1haWwpO1xyXG4vLyAgICAgaWYgKCFlbWFpbEV4aXN0cykge1xyXG4vLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIG5vdCBmb3VuZFwiKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyBDaGVjayBpZiBjbGluaWMgZXhpc3RzIHdpdGggY29ycmVjdCB2ZXJpZnlfY29kZVxyXG4vLyAgICAgY29uc3QgY2hlY2tFeGlzdENsaW5pY1ZlcmlmeUNvZGUgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4vLyAgICAgICB7XHJcbi8vICAgICAgICAgdmFsdWVzOiBbZGF0YS5lbWFpbF0sXHJcbi8vICAgICAgIH1cclxuLy8gICAgICk7XHJcblxyXG4vLyAgICAgaWYgKGNoZWNrRXhpc3RDbGluaWNWZXJpZnlDb2RlWzBdLnZlcmlmeV9jb2RlICE9PSBkYXRhLnZlcmlmeV9jb2RlKSB7XHJcbi8vICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJJbnZhbGlkIHZlcmlmaWNhdGlvbiBjb2RlXCIpO1xyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuLy8gICAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2xpbmljIFNFVCBzaWdudXBfc3RhdHVzPT8sIHVwZGF0ZWRfYXQ9PyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgICAgICB7XHJcbi8vICAgICAgICAgICB2YWx1ZXM6IFsxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJFbWFpbCBjb25maXJtYXRpb24gc3VjY2Vzc2Z1bFwiIH07XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIHJldHVybiBlcnJvcjtcclxuLy8gICB9XHJcbi8vIH1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGluaWNCeVBhc3N3b3JkKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgLy8gYCBTRUxFQ1QgdS4qLCByLioscC4qXHJcbiAgICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnVzZXJfcm9sZXMgdXIgT04gdS5pZCA9IHVyLmlkXHJcbiAgICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVzIHIgT04gdXIucm9sZV9pZCA9IHIuaWRcclxuICAgICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0ucm9sZV9wZXJtaXNzaW9ucyBycCBPTiByLmlkID0gcnAucm9sZV9pZFxyXG4gICAgICAvLyBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5wZXJtaXNzaW9ucyBwIE9OIHJwLnBlcm1pc3Npb25faWQgID0gcC5pZFxyXG4gICAgICBgIFNFTEVDVCAqXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgXHJcbiAgICAgIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdG9yQnlQYXNzd29yZChcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBhc3N3b3JkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIC8vIGAgU0VMRUNUIHUuKiwgci4qLHAuKlxyXG4gICAgLy8gTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0udXNlcl9yb2xlcyB1ciBPTiB1LmlkID0gdXIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVzIHIgT04gdXIucm9sZV9pZCA9IHIuaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnJvbGVfcGVybWlzc2lvbnMgcnAgT04gci5pZCA9IHJwLnJvbGVfaWRcclxuICAgIC8vIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnBlcm1pc3Npb25zIHAgT04gcnAucGVybWlzc2lvbl9pZCAgPSBwLmlkXHJcbiAgICBgIFNFTEVDVCAqXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudCBcclxuICAgIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudEJ5UGFzc3dvcmQoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwYXNzd29yZDogc3RyaW5nXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgIFNFTEVDVCAqXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8vICoqKioqZ2V0Q2xpbmljVmVyaWZpY2F0aW9uQ29kZSoqKioqXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGluaWNWZXJpZmljYXRpb25Db2RlKGNsaW5pY0RhdGE6IHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIEZldGNoIHRoZSBjbGluaWMgZGF0YVxyXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUIGVtYWlsLHZlcmlmeV9jb2RlIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCBjbGluaWNEYXRhLmVtYWlsKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJUaGUgdmVyaWZpY2F0aW9uIGNvZGUgaXMgaW5jb3JyZWN0IVwiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHN0b3JlZFZlcmlmeUNvZGUgPSByb3dzLnZlcmlmeV9jb2RlO1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgYPCflI0gU3RvcmVkIENvZGU6ICR7c3RvcmVkVmVyaWZ5Q29kZX0sIFByb3ZpZGVkIENvZGU6ICR7Y2xpbmljRGF0YS52ZXJpZnlfY29kZX1gXHJcbiAgKTtcclxuXHJcbiAgaWYgKHN0b3JlZFZlcmlmeUNvZGUgIT09IGNsaW5pY0RhdGEudmVyaWZ5X2NvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVmVyaWZpY2F0aW9uIGNvZGUgbWlzbWF0Y2ghXCIpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBzaWdudXBfc3RhdHVzXHJcbiAgYXdhaXQgcXVlcnkoXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2xpbmljIFNFVCBzaWdudXBfc3RhdHVzID0gMSBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAgeyB2YWx1ZXM6IFtjbGluaWNEYXRhLmVtYWlsXSB9XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJvd3M7XHJcbn1cclxuXHJcbi8vICoqKioqZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudFZlcmlmaWNhdGlvbkNvZGUocGF0aWVudERhdGE6IHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHZlcmlmeV9jb2RlOiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPGFueT4ge1xyXG4gIC8vIEZldGNoIHRoZSBwYXRpZW50IGRhdGFcclxuICBjb25zdCBbcm93c10gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCBlbWFpbCx2ZXJpZnlfY29kZSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudCBXSEVSRSBlbWFpbCA9ID8gTElNSVQgMWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW3BhdGllbnREYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRW1haWwgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCBwYXRpZW50RGF0YS5lbWFpbCk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIGluY29ycmVjdCFcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdG9yZWRWZXJpZnlDb2RlID0gcm93cy52ZXJpZnlfY29kZTtcclxuICBjb25zb2xlLmxvZyhcclxuICAgIGDwn5SNIFN0b3JlZCBDb2RlOiAke3N0b3JlZFZlcmlmeUNvZGV9LCBQcm92aWRlZCBDb2RlOiAke3BhdGllbnREYXRhLnZlcmlmeV9jb2RlfWBcclxuICApO1xyXG5cclxuICBpZiAoc3RvcmVkVmVyaWZ5Q29kZSAhPT0gcGF0aWVudERhdGEudmVyaWZ5X2NvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVmVyaWZpY2F0aW9uIGNvZGUgbWlzbWF0Y2ghXCIpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QhXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHRoZSBzaWdudXBfc3RhdHVzXHJcbiAgYXdhaXQgcXVlcnkoXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudCBTRVQgc2lnbnVwX3N0YXR1cyA9IDEgV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHsgdmFsdWVzOiBbcGF0aWVudERhdGEuZW1haWxdIH1cclxuICApO1xyXG5cclxuICByZXR1cm4gcm93cztcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0FBLE9BQUEsQ0FBQUMsbUJBQUEsR0FBQUEsbUJBQUE7QUF1RUFELE9BQUEsQ0FBQUUsbUJBQUEsR0FBQUEsbUJBQUE7QUF1QkFGLE9BQUEsQ0FBQUcsbUJBQUEsR0FBQUEsbUJBQUE7QUFvQkFILE9BQUEsQ0FBQUksb0JBQUEsR0FBQUEsb0JBQUE7QUFvQkFKLE9BQUEsQ0FBQUsseUJBQUEsR0FBQUEseUJBQUE7QUFxQ0FMLE9BQUEsQ0FBQU0sMEJBQUEsR0FBQUEsMEJBQUE7QUE5S0EsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUVBLFNBQXNCUCxtQkFBbUJBLENBQUNTLEtBQWE7O0lBQ3JELE1BQU1DLE1BQU0sR0FBRyxNQUFNLElBQUFKLE9BQUEsQ0FBQUssS0FBSyxFQUN4QjtvQkFDZ0JMLE9BQUEsQ0FBQU0sVUFBVTtHQUMzQixFQUNDO01BQ0VDLE1BQU0sRUFBRSxDQUFDSixLQUFLO0tBQ2YsQ0FDRjtJQUNELE9BQU9DLE1BQU0sQ0FBQ0ksTUFBTSxHQUFHLENBQUM7RUFDMUIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFzQmIsbUJBQW1CQSxDQUN2Q1EsS0FB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","map":{"version":3,"names":["exports","checkIfClinicExists","getClinicByPassword","getDoctorByPassword","getPatientByPassword","getClinicVerificationCode","getPatientVerificationCode","mysql_1","require","response_error_1","email","result","query","coreSchema","values","length","password","user","error","console","log","clinicData","rows","ResponseError","BadRequest","storedVerifyCode","verify_code","patientData"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/auth/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\n\r\nexport async function checkIfClinicExists(email: string): Promise<boolean> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? \r\n  `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result.length > 0;\r\n}\r\n\r\n// export async function confirmDoctorEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       return null; // Email not found\r\n//     }\r\n\r\n//     const [doctor] = await query<RowDataPacket[]>(\r\n//       `SELECT id FROM ${coreSchema}.doctor WHERE email =? AND verify_code =?`,\r\n//       { values: [data.email, data.verify_code] }\r\n//     );\r\n//     if (!doctor) {\r\n//       return null;\r\n//     }\r\n\r\n//     const resultDoctor = await query<RowDataPacket[]>(\r\n//       `UPDATE ${coreSchema}.doctor SET signup_status=?, updated_at=? WHERE email =?`,\r\n//       { values: [1, new Date(), data.email] }\r\n//     );\r\n\r\n//     return resultDoctor;\r\n//   } catch (error) {\r\n//     console.error(\"Error confirming doctor email:\", error);\r\n//     throw new ResponseError.BadRequest(\"Failed to confirm doctor email\");\r\n//   }\r\n// }\r\n\r\n// export async function confirmClinicEmail(data: ConfirmEmail) {\r\n//   try {\r\n//     const emailExists = await checkIfEmailExists(data.email);\r\n//     if (!emailExists) {\r\n//       throw new ResponseError.NotFound(\"Email not found\");\r\n//     }\r\n\r\n//     // Check if clinic exists with correct verify_code\r\n//     const checkExistClinicVerifyCode = await query<RowDataPacket[]>(\r\n//       `SELECT * FROM ${coreSchema}.clinic WHERE email = ?`,\r\n//       {\r\n//         values: [data.email],\r\n//       }\r\n//     );\r\n\r\n//     if (checkExistClinicVerifyCode[0].verify_code !== data.verify_code) {\r\n//       throw new ResponseError.BadRequest(\"Invalid verification code\");\r\n//     } else {\r\n//       await query<RowDataPacket[]>(\r\n//         `UPDATE ${coreSchema}.clinic SET signup_status=?, updated_at=? WHERE email=?`,\r\n//         {\r\n//           values: [1, new Date(), data.email],\r\n//         }\r\n//       );\r\n//     }\r\n\r\n//     return { success: true, message: \"Email confirmation successful\" };\r\n//   } catch (error) {\r\n//     return error;\r\n//   }\r\n// }\r\n\r\nexport async function getClinicByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      // ` SELECT u.*, r.*,p.*\r\n      // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n      // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n      // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n      // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n      ` SELECT *\r\n      FROM ${coreSchema}.clinic \r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nexport async function getDoctorByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  const user = await query<RowDataPacket[]>(\r\n    // ` SELECT u.*, r.*,p.*\r\n    // LEFT JOIN ${coreSchema}.user_roles ur ON u.id = ur.id\r\n    // LEFT JOIN ${coreSchema}.roles r ON ur.role_id = r.id\r\n    // LEFT JOIN ${coreSchema}.role_permissions rp ON r.id = rp.role_id\r\n    // LEFT JOIN ${coreSchema}.permissions p ON rp.permission_id  = p.id\r\n    ` SELECT *\r\n    FROM ${coreSchema}.patient \r\n    WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function getPatientByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<any> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      ` SELECT *\r\n      FROM ${coreSchema}.patients\r\n      WHERE email = ?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return user;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\n// *****getClinicVerificationCode*****\r\nexport async function getClinicVerificationCode(clinicData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the clinic data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [clinicData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", clinicData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${clinicData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== clinicData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.clinic SET signup_status = 1 WHERE email = ?`,\r\n    { values: [clinicData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n\r\n// *****getPatientVerificationCode*****\r\nexport async function getPatientVerificationCode(patientData: {\r\n  email: string;\r\n  verify_code: string;\r\n}): Promise<any> {\r\n  // Fetch the patient data\r\n  const [rows] = await query<RowDataPacket[]>(\r\n    `SELECT email,verify_code FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n    {\r\n      values: [patientData.email],\r\n    }\r\n  );\r\n\r\n  if (!rows || rows.length === 0) {\r\n    console.error(\" Email not found in database:\", patientData.email);\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  const storedVerifyCode = rows.verify_code;\r\n  console.log(\r\n    ` Stored Code: ${storedVerifyCode}, Provided Code: ${patientData.verify_code}`\r\n  );\r\n\r\n  if (storedVerifyCode !== patientData.verify_code) {\r\n    console.error(\" Verification code mismatch!\");\r\n    throw new ResponseError.BadRequest(\"The verification code is incorrect!\");\r\n  }\r\n\r\n  // Update the signup_status\r\n  await query(\r\n    `UPDATE ${coreSchema}.patient SET signup_status = 1 WHERE email = ?`,\r\n    { values: [patientData.email] }\r\n  );\r\n\r\n  return rows;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mysql = exports.pool = exports.coreSchema = void 0;\nexports.query = query;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwicXVlcnkiLCJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJjb25maWciLCJjb3JlU2NoZW1hIiwicHJvY2VzcyIsImVudiIsIkRCX0RBVEFCQVNFIiwicG9vbCIsImNyZWF0ZVBvb2wiLCJob3N0IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSTkFNRSIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJkYXRhYmFzZSIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJjaGFyc2V0IiwidGltZXpvbmUiLCJEQl9USU1FWk9ORSIsIm9uIiwiY29ubmVjdGlvbiIsIm5hbWVkUGxhY2Vob2xkZXJzIiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9iaW4vbXlzcWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuaW1wb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIm15c3FsMlwiO1xyXG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcclxuaW1wb3J0IHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuY29uc3QgY29yZVNjaGVtYSA9IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFO1xyXG5cclxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XHJcblxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSTkFNRSxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXHJcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxyXG4gIGNvbm5lY3Rpb25MaW1pdDogNTAsXHJcbiAgcXVldWVMaW1pdDogMCxcclxuICBjaGFyc2V0OiBcInV0ZjhcIixcclxuICB0aW1lem9uZTogcHJvY2Vzcy5lbnYuREJfVElNRVpPTkUsXHJcbn0pO1xyXG5cclxucG9vbC5vbihcImNvbm5lY3Rpb25cIiwgKGNvbm5lY3Rpb246IFBvb2xDb25uZWN0aW9uKTogdm9pZCA9PiB7XHJcbiAgY29ubmVjdGlvbi5jb25maWcubmFtZWRQbGFjZWhvbGRlcnMgPSB0cnVlO1xyXG59KTtcclxuXHJcbmV4cG9ydCB7IHBvb2wsIG15c3FsIH07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCBleHRlbmRzIFJvd0RhdGFQYWNrZXRbXSB8IFJlc3VsdFNldEhlYWRlciB8IGFueT4oXHJcbiAgc3FsOiBzdHJpbmcsXHJcbiAgb3B0aW9uczoge1xyXG4gICAgY29ubmVjdGlvbj86IFBvb2xDb25uZWN0aW9uO1xyXG4gICAgbmVzdFRhYmxlcz86IGJvb2xlYW47XHJcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcclxuICB9ID0ge30sXHJcbiAgYXR0ZW1wdDogbnVtYmVyID0gMFxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCB1c2VFeHRlcm5hbENvbm5lY3Rpb24gPSBCb29sZWFuKG9wdGlvbnMuY29ubmVjdGlvbik7XHJcbiAgY29uc3QgY29ubmVjdGlvbjogUG9vbENvbm5lY3Rpb24gPVxyXG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XHJcblxyXG4gIGxldCByZXN1bHQ7XHJcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xyXG5cclxuICB0cnkge1xyXG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcclxuICAgIFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeSh7XHJcbiAgICAgIHNxbCxcclxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcclxuICAgICAgbmVzdFRhYmxlczogb3B0aW9ucy5uZXN0VGFibGVzLFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICByZXN1bHQgPSBbXTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIGUubWVzc2FnZSA9IGAke2UuY29kZX1cXG5zcWw6ICR7c3FsUXVlcnl9XFxuZXJyb3I6ICR7ZS5tZXNzYWdlfVxcbnRpbWU6IH1gO1xyXG5cclxuICAgIHRocm93IGU7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGlmICghdXNlRXh0ZXJuYWxDb25uZWN0aW9uKSB7XHJcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkJBQSxPQUFBLENBQUFDLEtBQUEsR0FBQUEsS0FBQTtBQTNCQSxNQUFBQyxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlSixPQUFBLENBQUFLLEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSSxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURWLE9BQUEsQ0FBQU8sVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR04sS0FBSyxDQUFDTyxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU94QixPQUFBLENBQUFXLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0IxQixLQUFLQSxDQUFBMkIsS0FBQTt1REFDekJDLEdBQVcsRUFDWEMsT0FBQSxHQUlJLEVBQUUsRUFDTkMsT0FBQSxHQUFrQixDQUFDO0lBRW5CLE1BQU1DLHFCQUFxQixHQUFHQyxPQUFPLENBQUNILE9BQU8sQ0FBQ0osVUFBVSxDQUFDO0lBQ3pELE1BQU1BLFVBQVUsR0FDZEksT0FBTyxDQUFDSixVQUFVLEtBQUssTUFBTWYsSUFBSSxDQUFDdUIsYUFBYSxFQUFFLENBQUM7SUFFcEQsSUFBSUMsTUFBTTtJQUNWLElBQUlDLFFBQVEsR0FBR1AsR0FBRztJQUVsQixJQUFJO01BQ0ZPLFFBQVEsR0FBR1YsVUFBVSxDQUFDVyxNQUFNLENBQUNSLEdBQUcsRUFBRUMsT0FBTyxDQUFDUSxNQUFNLENBQUM7TUFDakQsQ0FBQ0gsTUFBTSxDQUFDLEdBQUcsTUFBTVQsVUFBVSxDQUFDekIsS0FBSyxDQUFDO1FBQ2hDNEIsR0FBRztRQUNIUyxNQUFNLEVBQUVSLE9BQU8sQ0FBQ1EsTUFBTTtRQUN0QkMsVUFBVSxFQUFFVCxPQUFPLENBQUNTO09BQ3JCLENBQUM7TUFDRixJQUFJLENBQUNKLE1BQU0sRUFBRTtRQUNYQSxNQUFNLEdBQUcsRUFBRTtNQUNiO0lBQ0YsQ0FBQyxDQUFDLE9BQU9LLENBQU0sRUFBRTtNQUNmQSxDQUFDLENBQUNDLE9BQU8sR0FBRyxHQUFHRCxDQUFDLENBQUNFLElBQUksVUFBVU4sUUFBUSxZQUFZSSxDQUFDLENBQUNDLE9BQU8sV0FBVztNQUV2RSxNQUFNRCxDQUFDO0lBQ1QsQ0FBQyxTQUFTO01BQ1IsSUFBSSxDQUFDUixxQkFBcUIsRUFBRTtRQUMxQk4sVUFBVSxDQUFDaUIsT0FBTyxFQUFFO01BQ3RCO0lBQ0Y7SUFDQSxPQUFPUixNQUFXO0VBQ3BCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","query","dotenv","__importStar","require","mysql","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\r\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\r\nimport * as mysql from \"mysql2/promise\";\r\nimport { PoolConnection } from \"mysql2/promise\";\r\n\r\ndotenv.config();\r\nconst coreSchema = process.env.DB_DATABASE;\r\n\r\nexport { ResultSetHeader, RowDataPacket, coreSchema };\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST,\r\n  user: process.env.DB_USERNAME,\r\n  password: process.env.DB_PASSWORD,\r\n  database: process.env.DB_DATABASE,\r\n  connectionLimit: 50,\r\n  queueLimit: 0,\r\n  charset: \"utf8\",\r\n  timezone: process.env.DB_TIMEZONE,\r\n});\r\n\r\npool.on(\"connection\", (connection: PoolConnection): void => {\r\n  connection.config.namedPlaceholders = true;\r\n});\r\n\r\nexport { pool, mysql };\r\n\r\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\r\n  sql: string,\r\n  options: {\r\n    connection?: PoolConnection;\r\n    nestTables?: boolean;\r\n    values?: any[] | any;\r\n  } = {},\r\n  attempt: number = 0\r\n): Promise<T> {\r\n  const useExternalConnection = Boolean(options.connection);\r\n  const connection: PoolConnection =\r\n    options.connection || (await pool.getConnection());\r\n\r\n  let result;\r\n  let sqlQuery = sql;\r\n\r\n  try {\r\n    sqlQuery = connection.format(sql, options.values);\r\n    [result] = await connection.query({\r\n      sql,\r\n      values: options.values,\r\n      nestTables: options.nestTables,\r\n    });\r\n    if (!result) {\r\n      result = [];\r\n    }\r\n  } catch (e: any) {\r\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\r\n\r\n    throw e;\r\n  } finally {\r\n    if (!useExternalConnection) {\r\n      connection.release();\r\n    }\r\n  }\r\n  return result as T;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BAA,OAAA,CAAAC,KAAA,GAAAA,KAAA;AA3BA,MAAAC,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeJ,OAAA,CAAAK,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACI,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDV,OAAA,CAAAO,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGN,KAAK,CAACO,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOxB,OAAA,CAAAW,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsB1B,KAAKA,CAAA2B,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACJ,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdI,OAAO,CAACJ,UAAU,KAAK,MAAMf,IAAI,CAACuB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGV,UAAU,CAACW,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMT,UAAU,CAACzB,KAAK,CAAC;QAChC4B,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BN,UAAU,CAACiB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC","ignoreList":[]}},"mtime":1741655050578},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loginSchema = exports.registerSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.registerSchema = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nexports.loginSchema = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInJlZ2lzdGVyU2NoZW1hIiwib2JqZWN0Iiwic2hhcGUiLCJ1c2VyTmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0b2tlblZlcmlmeSIsIm51bGxhYmxlIiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImxvZ2luU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHl1cCBmcm9tICd5dXAnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICAgIHVzZXJOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3VzZXJOYW1lIGlzIHJlcXVpcmVkJyksXHJcbiAgICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKCdpbnZhbGlkIGVtYWlsJykucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXHJcbiAgICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcclxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ2NvbmZpcm1QYXNzd29yZCcpXSwgJ3Bhc3N3b3JkIGFyZSBub3QgdGhlIHNhbWUnKSxcclxuICAgIGNvbmZpcm1QYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcclxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ3Bhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpXHJcbn0pO1xyXG5cclxuZXhwb3J0ICBjb25zdCBsb2dpblNjaGVtYSA9IHl1cC5vYmplY3QoKVxyXG4gICAgLnNoYXBlKHtcclxuICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdlbWFpbCBpcyByZXF1aXJlZCcpLFxyXG4gICAgICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkJyksXHJcbiAgICB9KS5yZXF1aXJlZCgpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGNBQWMsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzdDQyxRQUFRLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQztFQUN2REMsS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RUUsV0FBVyxFQUFFWCxHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDSSxRQUFRLEVBQUU7RUFDcENDLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ00sR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUNqREMsS0FBSyxDQUFDLENBQUNmLEdBQUcsQ0FBQ2dCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDckVDLGVBQWUsRUFBRWpCLEdBQUcsQ0FBQ1EsTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDeERDLEtBQUssQ0FBQyxDQUFDZixHQUFHLENBQUNnQixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSwyQkFBMkI7Q0FDaEUsQ0FBQztBQUVZYixPQUFBLENBQUFlLFdBQVcsR0FBR2xCLEdBQUcsQ0FBQ0ssTUFBTSxFQUFFLENBQ25DQyxLQUFLLENBQUM7RUFDSEksS0FBSyxFQUFFVixHQUFHLENBQUNRLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDakRJLFFBQVEsRUFBRWIsR0FBRyxDQUFDUSxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQjtDQUN6RCxDQUFDLENBQUNBLFFBQVEsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup","__importStar","require","exports","registerSchema","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","loginSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\auth\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\r\n\r\nexport const registerSchema = yup.object().shape({\r\n    userName: yup.string().required('userName is required'),\r\n    email: yup.string().email('invalid email').required('email is required'),\r\n    tokenVerify: yup.string().nullable(),\r\n    password: yup.string().min(8, 'at least 8 charecters')\r\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\r\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\r\n        .oneOf([yup.ref('password')], 'password are not the same')\r\n});\r\n\r\nexport  const loginSchema = yup.object()\r\n    .shape({\r\n        email: yup.string().required('email is required'),\r\n        password: yup.string().required('password is required'),\r\n    }).required();\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,cAAc,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,QAAQ,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvDC,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxEE,WAAW,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACf,GAAG,CAACgB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEYb,OAAA,CAAAe,WAAW,GAAGlB,GAAG,CAACK,MAAM,EAAE,CACnCC,KAAK,CAAC;EACHI,KAAK,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClinicService = void 0;\nconst email_1 = require(\"../../config/email\");\nconst common_1 = require(\"../../helper/common\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass ClinicService {\n  static registerClinic(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, db_1.checkExistClinic)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      // Generate a unique verification code\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      // Generate email verification token (without storing the code inside the JWT)\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, db_1.registerClinic)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n}\nexports.ClinicService = ClinicService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbWFpbF8xIiwicmVxdWlyZSIsImNvbW1vbl8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImRiXzEiLCJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsIm1zXzEiLCJzZW5kX2VtYWlsXzEiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJleHBpcmVzSW4iLCJ0ZXN0IiwiTWF0aCIsImZsb29yIiwiZGVmYXVsdCIsIkNsaW5pY1NlcnZpY2UiLCJyZWdpc3RlckNsaW5pYyIsImZvcm1EYXRhIiwiZW1haWxFeGlzdHMiLCJjaGVja0V4aXN0Q2xpbmljIiwiZW1haWwiLCJjb25zb2xlIiwiZXJyb3IiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInZlcmlmaWNhdGlvbkNvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJ2ZXJpZnlfY29kZSIsInRva2VuVmVyaWZ5Iiwic2lnbiIsInRva2VuX3ZlcmlmeSIsImNsaW5pY0RhdGEiLCJlbWFpbFNlcnZpY2UiLCJFbWFpbFByb3ZpZGVyIiwic2VuZEFjY291bnRSZWdpc3RlciIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiaWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1haWxQcm92aWRlciB9IGZyb20gXCIuLi8uLi9jb25maWcvZW1haWxcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IGNoZWNrRXhpc3RDbGluaWMsIHJlZ2lzdGVyQ2xpbmljIH0gZnJvbSBcIi4vZGJcIjtcclxuXHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgbXMgZnJvbSBcIm1zXCI7XHJcbmltcG9ydCBTZW5kTWFpbCBmcm9tIFwiLi4vLi4vaGVscGVyL3NlbmRfZW1haWxcIjtcclxuXHJcblxyXG5cclxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gRGVmYXVsdCAxIGRheVxyXG5jb25zdCBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIHx8IFwieW91ci1zZWNyZXQta2V5XCI7XHJcblxyXG4vLyBDaGVjayBpZiBleHBpcmF0aW9uIG5lZWRzIGNvbnZlcnNpb25cclxuY29uc3QgZXhwaXJlc0luID1cclxuICB0eXBlb2YgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID09PSBcInN0cmluZ1wiICYmXHJcbiAgL15bMC05XStbc21oZHd5XSQvaS50ZXN0KEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRClcclxuICAgID8gTWF0aC5mbG9vcihtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMClcclxuICAgIDogSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG5leHBvcnQgY2xhc3MgQ2xpbmljU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWdpc3RlckNsaW5pYyhmb3JtRGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbEV4aXN0cyA9IGF3YWl0IGNoZWNrRXhpc3RDbGluaWMoZm9ybURhdGEuZW1haWwpO1xyXG5cclxuICAgIGlmIChlbWFpbEV4aXN0cykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIGAke2Zvcm1EYXRhLmVtYWlsfSBFbWFpbCBhbHJlYWR5IGV4aXN0cywgdGhyb3dpbmcgZXJyb3IuLi5gXHJcbiAgICAgICk7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoYCR7Zm9ybURhdGEuZW1haWx9IGlzIGFscmVhZHkgZXhpc3QuYCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkNvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGZvcm1EYXRhLnZlcmlmeV9jb2RlID0gdmVyaWZpY2F0aW9uQ29kZTtcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgZW1haWwgdmVyaWZpY2F0aW9uIHRva2VuICh3aXRob3V0IHN0b3JpbmcgdGhlIGNvZGUgaW5zaWRlIHRoZSBKV1QpXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICB7IGVtYWlsOiBmb3JtRGF0YS5lbWFpbCB9LFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW4gfVxyXG4gICAgKTtcclxuICAgIGZvcm1EYXRhLnRva2VuX3ZlcmlmeSA9IHRva2VuVmVyaWZ5O1xyXG4gICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgIFxyXG4gICAgY29uc3QgY2xpbmljRGF0YSA9IGF3YWl0IHJlZ2lzdGVyQ2xpbmljKGZvcm1EYXRhKTtcclxuICAgIGlmICghY2xpbmljRGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGNsaW5pYy5cIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgU2VuZE1haWwobmV3IEVtYWlsUHJvdmlkZXIoKSk7XHJcbiAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZEFjY291bnRSZWdpc3Rlcihmb3JtRGF0YS5lbWFpbCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogXCJDbGluaWMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkuIFBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbC5cIixcclxuICAgICAgbmV3VXNlcjoge1xyXG4gICAgICAgIGlkOiBjbGluaWNEYXRhLmlkLFxyXG4gICAgICAgIGVtYWlsOiBmb3JtRGF0YS5lbWFpbCxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxnQkFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBSCxPQUFBO0FBRUEsTUFBQUksY0FBQSxHQUFBQyxlQUFBLENBQUFMLE9BQUE7QUFDQSxNQUFBTSxJQUFBLEdBQUFELGVBQUEsQ0FBQUwsT0FBQTtBQUNBLE1BQUFPLFlBQUEsR0FBQUYsZUFBQSxDQUFBTCxPQUFBO0FBSUEsTUFBTVEsd0JBQXdCLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRix3QkFBd0IsSUFBSSxJQUFJLENBQUMsQ0FBQztBQUMvRSxNQUFNRyx1QkFBdUIsR0FBR0YsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHVCQUF1QixJQUFJLGlCQUFpQjtBQUV4RjtBQUNBLE1BQU1DLFNBQVMsR0FDYixPQUFPSix3QkFBd0IsS0FBSyxRQUFRLElBQzVDLG1CQUFtQixDQUFDSyxJQUFJLENBQUNMLHdCQUF3QixDQUFDLEdBQzlDTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxJQUFBVCxJQUFBLENBQUFVLE9BQUUsRUFBQ1Isd0JBQXdCLENBQUMsR0FBRyxJQUFJLENBQUMsR0FDL0NBLHdCQUF3QjtBQUk5QixNQUFhUyxhQUFhO0VBQ2pCLE9BQWFDLGNBQWNBLENBQUNDLFFBQWE7O01BQzlDLE1BQU1DLFdBQVcsR0FBRyxNQUFNLElBQUFqQixJQUFBLENBQUFrQixnQkFBZ0IsRUFBQ0YsUUFBUSxDQUFDRyxLQUFLLENBQUM7TUFFMUQsSUFBSUYsV0FBVyxFQUFFO1FBQ2ZHLE9BQU8sQ0FBQ0MsS0FBSyxDQUNYLEdBQUdMLFFBQVEsQ0FBQ0csS0FBSywwQ0FBMEMsQ0FDNUQ7UUFDRCxNQUFNLElBQUlwQixnQkFBQSxDQUFBdUIsYUFBYSxDQUFDQyxVQUFVLENBQUMsR0FBR1AsUUFBUSxDQUFDRyxLQUFLLG9CQUFvQixDQUFDO01BQzNFO01BR0E7TUFDQSxNQUFNSyxnQkFBZ0IsR0FBRyxJQUFBMUIsUUFBQSxDQUFBMkIsZUFBZSxHQUFFO01BQzFDVCxRQUFRLENBQUNVLFdBQVcsR0FBR0YsZ0JBQWdCO01BRXZDO01BQ0EsTUFBTUcsV0FBVyxHQUFHMUIsY0FBQSxDQUFBWSxPQUFHLENBQUNlLElBQUksQ0FDMUI7UUFBRVQsS0FBSyxFQUFFSCxRQUFRLENBQUNHO01BQUssQ0FBRSxFQUN6QlgsdUJBQXVCLEVBQ3ZCO1FBQUVDO01BQVMsQ0FBRSxDQUNkO01BQ0RPLFFBQVEsQ0FBQ2EsWUFBWSxHQUFHRixXQUFXO01BQ25DO01BRUEsTUFBTUcsVUFBVSxHQUFHLE1BQU0sSUFBQTlCLElBQUEsQ0FBQWUsY0FBYyxFQUFDQyxRQUFRLENBQUM7TUFDakQsSUFBSSxDQUFDYyxVQUFVLEVBQUU7UUFDZixNQUFNLElBQUkvQixnQkFBQSxDQUFBdUIsYUFBYSxDQUFDQyxVQUFVLENBQUMsNEJBQTRCLENBQUM7TUFDbEU7TUFDQSxNQUFNUSxZQUFZLEdBQUcsSUFBSTNCLFlBQUEsQ0FBQVMsT0FBUSxDQUFDLElBQUlqQixPQUFBLENBQUFvQyxhQUFhLEVBQUUsQ0FBQztNQUN0RCxNQUFNRCxZQUFZLENBQUNFLG1CQUFtQixDQUFDakIsUUFBUSxDQUFDRyxLQUFLLEVBQUVLLGdCQUFnQixDQUFDO01BRXhFLE9BQU87UUFDTFUsT0FBTyxFQUFFLDJEQUEyRDtRQUNwRUMsT0FBTyxFQUFFO1VBQ1BDLEVBQUUsRUFBRU4sVUFBVSxDQUFDTSxFQUFFO1VBQ2pCakIsS0FBSyxFQUFFSCxRQUFRLENBQUNHOztPQUVuQjtJQUNILENBQUM7OztBQXZDSGtCLE9BQUEsQ0FBQXZCLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["email_1","require","common_1","response_error_1","db_1","jsonwebtoken_1","__importDefault","ms_1","send_email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","ClinicService","registerClinic","formData","emailExists","checkExistClinic","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","message","newUser","id","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/clinic/service.ts"],"sourcesContent":["import { EmailProvider } from \"../../config/email\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { checkExistClinic, registerClinic } from \"./db\";\r\n\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport SendMail from \"../../helper/send_email\";\r\n\r\n\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n    \r\n    \r\n    \r\nexport class ClinicService {\r\n  public static async registerClinic(formData: any) {\r\n    const emailExists = await checkExistClinic(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    \r\n    // Generate a unique verification code\r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    // Generate email verification token (without storing the code inside the JWT)\r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerClinic(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,gBAAA,GAAAF,OAAA;AACA,MAAAG,IAAA,GAAAH,OAAA;AAEA,MAAAI,cAAA,GAAAC,eAAA,CAAAL,OAAA;AACA,MAAAM,IAAA,GAAAD,eAAA,CAAAL,OAAA;AACA,MAAAO,YAAA,GAAAF,eAAA,CAAAL,OAAA;AAIA,MAAMQ,wBAAwB,GAAGC,OAAO,CAACC,GAAG,CAACF,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAC/E,MAAMG,uBAAuB,GAAGF,OAAO,CAACC,GAAG,CAACC,uBAAuB,IAAI,iBAAiB;AAExF;AACA,MAAMC,SAAS,GACb,OAAOJ,wBAAwB,KAAK,QAAQ,IAC5C,mBAAmB,CAACK,IAAI,CAACL,wBAAwB,CAAC,GAC9CM,IAAI,CAACC,KAAK,CAAC,IAAAT,IAAA,CAAAU,OAAE,EAACR,wBAAwB,CAAC,GAAG,IAAI,CAAC,GAC/CA,wBAAwB;AAI9B,MAAaS,aAAa;EACjB,OAAaC,cAAcA,CAACC,QAAa;;MAC9C,MAAMC,WAAW,GAAG,MAAM,IAAAjB,IAAA,CAAAkB,gBAAgB,EAACF,QAAQ,CAACG,KAAK,CAAC;MAE1D,IAAIF,WAAW,EAAE;QACfG,OAAO,CAACC,KAAK,CACX,GAAGL,QAAQ,CAACG,KAAK,0CAA0C,CAC5D;QACD,MAAM,IAAIpB,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,GAAGP,QAAQ,CAACG,KAAK,oBAAoB,CAAC;MAC3E;MAGA;MACA,MAAMK,gBAAgB,GAAG,IAAA1B,QAAA,CAAA2B,eAAe,GAAE;MAC1CT,QAAQ,CAACU,WAAW,GAAGF,gBAAgB;MAEvC;MACA,MAAMG,WAAW,GAAG1B,cAAA,CAAAY,OAAG,CAACe,IAAI,CAC1B;QAAET,KAAK,EAAEH,QAAQ,CAACG;MAAK,CAAE,EACzBX,uBAAuB,EACvB;QAAEC;MAAS,CAAE,CACd;MACDO,QAAQ,CAACa,YAAY,GAAGF,WAAW;MACnC;MAEA,MAAMG,UAAU,GAAG,MAAM,IAAA9B,IAAA,CAAAe,cAAc,EAACC,QAAQ,CAAC;MACjD,IAAI,CAACc,UAAU,EAAE;QACf,MAAM,IAAI/B,gBAAA,CAAAuB,aAAa,CAACC,UAAU,CAAC,4BAA4B,CAAC;MAClE;MACA,MAAMQ,YAAY,GAAG,IAAI3B,YAAA,CAAAS,OAAQ,CAAC,IAAIjB,OAAA,CAAAoC,aAAa,EAAE,CAAC;MACtD,MAAMD,YAAY,CAACE,mBAAmB,CAACjB,QAAQ,CAACG,KAAK,EAAEK,gBAAgB,CAAC;MAExE,OAAO;QACLU,OAAO,EAAE,2DAA2D;QACpEC,OAAO,EAAE;UACPC,EAAE,EAAEN,UAAU,CAACM,EAAE;UACjBjB,KAAK,EAAEH,QAAQ,CAACG;;OAEnB;IACH,CAAC;;;AAvCHkB,OAAA,CAAAvB,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmailProvider = void 0;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst dotenv_1 = __importDefault(require(\"dotenv\"));\ndotenv_1.default.config(); // Load environment variables\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.transporter = this.createTransporter();\n  }\n  /**\n   * Create and configure the mail transporter\n   */\n  createTransporter() {\n    if (isMailgunAPI) {\n      return nodemailer_1.default.createTransport((0, nodemailer_mailgun_transport_1.default)({\n        auth: {\n          api_key: MAILGUN_API_KEY,\n          domain: MAILGUN_DOMAIN\n        }\n      }));\n    }\n    return nodemailer_1.default.createTransport({\n      host: MAIL_HOST,\n      port: Number(MAIL_PORT),\n      secure: false,\n      // Set `true` for port 465 (SSL)\n      auth: {\n        user: MAIL_USERNAME,\n        pass: MAIL_PASSWORD\n      }\n    });\n  }\n  /**\n   * Sends an email\n   */\n  send(to, subject, template) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const recipient = Array.isArray(to) ? to.join(\", \") : to;\n        const mailOptions = {\n          from: `${APP_NAME} <${MAIL_USERNAME}>`,\n          to: recipient,\n          subject,\n          html: template\n        };\n        const info = yield this.transporter.sendMail(mailOptions);\n        console.log(\" Email sent successfully:\", info.messageId);\n        return info;\n      } catch (error) {\n        console.error(\" Error sending email:\", error);\n        throw new Error(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.EmailProvider = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwibm9kZW1haWxlcl9tYWlsZ3VuX3RyYW5zcG9ydF8xIiwiZG90ZW52XzEiLCJkZWZhdWx0IiwiY29uZmlnIiwiQVBQX05BTUUiLCJNQUlMX0RSSVZFUiIsIk1BSUxfSE9TVCIsIk1BSUxfUE9SVCIsIk1BSUxfVVNFUk5BTUUiLCJNQUlMX1BBU1NXT1JEIiwiTUFJTF9BVVRIX1RZUEUiLCJNQUlMR1VOX0FQSV9LRVkiLCJNQUlMR1VOX0RPTUFJTiIsIk9BVVRIX0NMSUVOVF9JRCIsIk9BVVRIX0NMSUVOVF9TRUNSRVQiLCJPQVVUSF9SRUZSRVNIX1RPS0VOIiwiT0FVVEhfUkVESVJFQ1RfVVJMIiwicHJvY2VzcyIsImVudiIsImlzTWFpbGd1bkFQSSIsIkJvb2xlYW4iLCJFbWFpbFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiYXV0aCIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsIk51bWJlciIsInNlY3VyZSIsInVzZXIiLCJwYXNzIiwic2VuZCIsInRvIiwic3ViamVjdCIsInRlbXBsYXRlIiwicmVjaXBpZW50IiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIm1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJpbmZvIiwic2VuZE1haWwiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZUlkIiwiZXJyb3IiLCJFcnJvciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25maWdcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29uZmlnL2VtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcclxuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSBcIm5vZGVtYWlsZXJcIjtcclxuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5cclxuZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5cclxuY29uc3Qge1xyXG4gIEFQUF9OQU1FLFxyXG4gIE1BSUxfRFJJVkVSLFxyXG4gIE1BSUxfSE9TVCxcclxuICBNQUlMX1BPUlQsXHJcbiAgTUFJTF9VU0VSTkFNRSxcclxuICBNQUlMX1BBU1NXT1JELFxyXG4gIE1BSUxfQVVUSF9UWVBFLFxyXG4gIE1BSUxHVU5fQVBJX0tFWSxcclxuICBNQUlMR1VOX0RPTUFJTixcclxuICBPQVVUSF9DTElFTlRfSUQsXHJcbiAgT0FVVEhfQ0xJRU5UX1NFQ1JFVCxcclxuICBPQVVUSF9SRUZSRVNIX1RPS0VOLFxyXG4gIE9BVVRIX1JFRElSRUNUX1VSTCxcclxufSA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgaXNNYWlsZ3VuQVBJID0gQm9vbGVhbihNQUlMR1VOX0FQSV9LRVkgJiYgTUFJTEdVTl9ET01BSU4pO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVtYWlsUHJvdmlkZXIge1xyXG4gIHByaXZhdGUgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy50cmFuc3BvcnRlciA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0ZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhbmQgY29uZmlndXJlIHRoZSBtYWlsIHRyYW5zcG9ydGVyXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRlcigpOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyIHtcclxuICAgIGlmIChpc01haWxndW5BUEkpIHtcclxuICAgICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KFxyXG4gICAgICAgIG1nKHtcclxuICAgICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgICAgYXBpX2tleTogTUFJTEdVTl9BUElfS0VZISxcclxuICAgICAgICAgICAgZG9tYWluOiBNQUlMR1VOX0RPTUFJTiEsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgaG9zdDogTUFJTF9IT1NULFxyXG4gICAgICBwb3J0OiBOdW1iZXIoTUFJTF9QT1JUKSxcclxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gU2V0IGB0cnVlYCBmb3IgcG9ydCA0NjUgKFNTTClcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IE1BSUxfVVNFUk5BTUUsXHJcbiAgICAgICAgcGFzczogTUFJTF9QQVNTV09SRCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VuZHMgYW4gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgc2VuZCh0bzogc3RyaW5nIHwgc3RyaW5nW10sIHN1YmplY3Q6IHN0cmluZywgdGVtcGxhdGU6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVjaXBpZW50ID0gQXJyYXkuaXNBcnJheSh0bykgPyB0by5qb2luKFwiLCBcIikgOiB0bztcclxuICAgICAgY29uc3QgbWFpbE9wdGlvbnM6IG5vZGVtYWlsZXIuU2VuZE1haWxPcHRpb25zID0ge1xyXG4gICAgICAgIGZyb206IGAke0FQUF9OQU1FfSA8JHtNQUlMX1VTRVJOQU1FfT5gLFxyXG4gICAgICAgIHRvOiByZWNpcGllbnQsXHJcbiAgICAgICAgc3ViamVjdCxcclxuICAgICAgICBodG1sOiB0ZW1wbGF0ZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgRW1haWwgc2VudCBzdWNjZXNzZnVsbHk6XCIsIGluZm8ubWVzc2FnZUlkKTtcclxuICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIHNlbmRpbmcgZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHNlbmQgZW1haWxcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxZQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLDhCQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUFFLFFBQUEsQ0FBQUMsT0FBTSxDQUFDQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBRWpCLE1BQU07RUFDSkMsUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLFNBQVM7RUFDVEMsU0FBUztFQUNUQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxtQkFBbUI7RUFDbkJDLG1CQUFtQjtFQUNuQkM7QUFBa0IsQ0FDbkIsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWYsTUFBTUMsWUFBWSxHQUFHQyxPQUFPLENBQUNULGVBQWUsSUFBSUMsY0FBYyxDQUFDO0FBRS9ELE1BQWFTLGFBQWE7RUFHeEJDLFlBQUE7SUFDRSxJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixFQUFFO0VBQzdDO0VBRUE7OztFQUdRQSxpQkFBaUJBLENBQUE7SUFDdkIsSUFBSUwsWUFBWSxFQUFFO01BQ2hCLE9BQU90QixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FDL0IsSUFBQXpCLDhCQUFBLENBQUFFLE9BQUUsRUFBQztRQUNEd0IsSUFBSSxFQUFFO1VBQ0pDLE9BQU8sRUFBRWhCLGVBQWdCO1VBQ3pCaUIsTUFBTSxFQUFFaEI7O09BRVgsQ0FBQyxDQUNIO0lBQ0g7SUFFQSxPQUFPZixZQUFBLENBQUFLLE9BQVUsQ0FBQ3VCLGVBQWUsQ0FBQztNQUNoQ0ksSUFBSSxFQUFFdkIsU0FBUztNQUNmd0IsSUFBSSxFQUFFQyxNQUFNLENBQUN4QixTQUFTLENBQUM7TUFDdkJ5QixNQUFNLEVBQUUsS0FBSztNQUFFO01BQ2ZOLElBQUksRUFBRTtRQUNKTyxJQUFJLEVBQUV6QixhQUFhO1FBQ25CMEIsSUFBSSxFQUFFekI7O0tBRVQsQ0FBQztFQUNKO0VBRUE7OztFQUdhMEIsSUFBSUEsQ0FBQ0MsRUFBcUIsRUFBRUMsT0FBZSxFQUFFQyxRQUFnQjs7TUFDeEUsSUFBSTtRQUNGLE1BQU1DLFNBQVMsR0FBR0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLEVBQUUsQ0FBQyxHQUFHQSxFQUFFLENBQUNNLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR04sRUFBRTtRQUN4RCxNQUFNTyxXQUFXLEdBQStCO1VBQzlDQyxJQUFJLEVBQUUsR0FBR3hDLFFBQVEsS0FBS0ksYUFBYSxHQUFHO1VBQ3RDNEIsRUFBRSxFQUFFRyxTQUFTO1VBQ2JGLE9BQU87VUFDUFEsSUFBSSxFQUFFUDtTQUNQO1FBRUQsTUFBTVEsSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDdkIsV0FBVyxDQUFDd0IsUUFBUSxDQUFDSixXQUFXLENBQUM7UUFDekRLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDRCQUE0QixFQUFFSCxJQUFJLENBQUNJLFNBQVMsQ0FBQztRQUN6RCxPQUFPSixJQUFJO01BQ2IsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtRQUNkSCxPQUFPLENBQUNHLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO1FBQzlDLE1BQU0sSUFBSUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BQ3pDO0lBQ0YsQ0FBQzs7O0FBckRIQyxPQUFBLENBQUFoQyxhQUFBLEdBQUFBLGFBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["nodemailer_1","__importDefault","require","nodemailer_mailgun_transport_1","dotenv_1","default","config","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","Boolean","EmailProvider","constructor","transporter","createTransporter","createTransport","auth","api_key","domain","host","port","Number","secure","user","pass","send","to","subject","template","recipient","Array","isArray","join","mailOptions","from","html","info","sendMail","console","log","messageId","error","Error","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\config\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/config/email.ts"],"sourcesContent":["import _ from \"lodash\";\r\nimport nodemailer from \"nodemailer\";\r\nimport mg from \"nodemailer-mailgun-transport\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config(); // Load environment variables\r\n\r\nconst {\r\n  APP_NAME,\r\n  MAIL_DRIVER,\r\n  MAIL_HOST,\r\n  MAIL_PORT,\r\n  MAIL_USERNAME,\r\n  MAIL_PASSWORD,\r\n  MAIL_AUTH_TYPE,\r\n  MAILGUN_API_KEY,\r\n  MAILGUN_DOMAIN,\r\n  OAUTH_CLIENT_ID,\r\n  OAUTH_CLIENT_SECRET,\r\n  OAUTH_REFRESH_TOKEN,\r\n  OAUTH_REDIRECT_URL,\r\n} = process.env;\r\n\r\nconst isMailgunAPI = Boolean(MAILGUN_API_KEY && MAILGUN_DOMAIN);\r\n\r\nexport class EmailProvider {\r\n  private transporter: nodemailer.Transporter;\r\n\r\n  constructor() {\r\n    this.transporter = this.createTransporter();\r\n  }\r\n\r\n  /**\r\n   * Create and configure the mail transporter\r\n   */\r\n  private createTransporter(): nodemailer.Transporter {\r\n    if (isMailgunAPI) {\r\n      return nodemailer.createTransport(\r\n        mg({\r\n          auth: {\r\n            api_key: MAILGUN_API_KEY!,\r\n            domain: MAILGUN_DOMAIN!,\r\n          },\r\n        })\r\n      );\r\n    }\r\n\r\n    return nodemailer.createTransport({\r\n      host: MAIL_HOST,\r\n      port: Number(MAIL_PORT),\r\n      secure: false, // Set `true` for port 465 (SSL)\r\n      auth: {\r\n        user: MAIL_USERNAME,\r\n        pass: MAIL_PASSWORD,\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sends an email\r\n   */\r\n  public async send(to: string | string[], subject: string, template: string) {\r\n    try {\r\n      const recipient = Array.isArray(to) ? to.join(\", \") : to;\r\n      const mailOptions: nodemailer.SendMailOptions = {\r\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\r\n        to: recipient,\r\n        subject,\r\n        html: template,\r\n      };\r\n\r\n      const info = await this.transporter.sendMail(mailOptions);\r\n      console.log(\" Email sent successfully:\", info.messageId);\r\n      return info;\r\n    } catch (error) {\r\n      console.error(\" Error sending email:\", error);\r\n      throw new Error(\"Failed to send email\");\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,8BAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAC,OAAM,CAACC,MAAM,EAAE,CAAC,CAAC;AAEjB,MAAM;EACJC,QAAQ;EACRC,WAAW;EACXC,SAAS;EACTC,SAAS;EACTC,aAAa;EACbC,aAAa;EACbC,cAAc;EACdC,eAAe;EACfC,cAAc;EACdC,eAAe;EACfC,mBAAmB;EACnBC,mBAAmB;EACnBC;AAAkB,CACnB,GAAGC,OAAO,CAACC,GAAG;AAEf,MAAMC,YAAY,GAAGC,OAAO,CAACT,eAAe,IAAIC,cAAc,CAAC;AAE/D,MAAaS,aAAa;EAGxBC,YAAA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,iBAAiB,EAAE;EAC7C;EAEA;;;EAGQA,iBAAiBA,CAAA;IACvB,IAAIL,YAAY,EAAE;MAChB,OAAOtB,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAC/B,IAAAzB,8BAAA,CAAAE,OAAE,EAAC;QACDwB,IAAI,EAAE;UACJC,OAAO,EAAEhB,eAAgB;UACzBiB,MAAM,EAAEhB;;OAEX,CAAC,CACH;IACH;IAEA,OAAOf,YAAA,CAAAK,OAAU,CAACuB,eAAe,CAAC;MAChCI,IAAI,EAAEvB,SAAS;MACfwB,IAAI,EAAEC,MAAM,CAACxB,SAAS,CAAC;MACvByB,MAAM,EAAE,KAAK;MAAE;MACfN,IAAI,EAAE;QACJO,IAAI,EAAEzB,aAAa;QACnB0B,IAAI,EAAEzB;;KAET,CAAC;EACJ;EAEA;;;EAGa0B,IAAIA,CAACC,EAAqB,EAAEC,OAAe,EAAEC,QAAgB;;MACxE,IAAI;QACF,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACL,EAAE,CAAC,GAAGA,EAAE,CAACM,IAAI,CAAC,IAAI,CAAC,GAAGN,EAAE;QACxD,MAAMO,WAAW,GAA+B;UAC9CC,IAAI,EAAE,GAAGxC,QAAQ,KAAKI,aAAa,GAAG;UACtC4B,EAAE,EAAEG,SAAS;UACbF,OAAO;UACPQ,IAAI,EAAEP;SACP;QAED,MAAMQ,IAAI,GAAG,MAAM,IAAI,CAACvB,WAAW,CAACwB,QAAQ,CAACJ,WAAW,CAAC;QACzDK,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAACI,SAAS,CAAC;QACzD,OAAOJ,IAAI;MACb,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MACzC;IACF,CAAC;;;AArDHC,OAAA,CAAAhC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050578},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev2 = getUniqueCodev2;\nexports.getUniqueCodev3 = getUniqueCodev3;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYyIiwiZ2V0VW5pcXVlQ29kZXYzIiwibGVuZ3RoIiwicmVzdWx0IiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2hlbHBlci9jb21tb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcclxuICovXHJcbmZ1bmN0aW9uIGdldFVuaXF1ZUNvZGV2MihsZW5ndGggPSAzMikge1xyXG4gIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gIGNvbnN0IGNoYXJhY3RlcnMgPVxyXG4gICAgXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xyXG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYzKGxlbmd0aCA9IDQpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJ1xyXG4gICAgY29uc3QgY2hhcmFjdGVycyA9XHJcbiAgICAgICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknXHJcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH1cclxuZXhwb3J0IHtcclxuICAgIGdldFVuaXF1ZUNvZGV2MixcclxuICAgIGdldFVuaXF1ZUNvZGV2M1xyXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7O0FBOEJJQSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQTtBQUNBRCxPQUFBLENBQUFFLGVBQUEsR0FBQUEsZUFBQTtBQS9CSjs7OztBQUlBLFNBQVNELGVBQWVBLENBQUNFLE1BQU0sR0FBRyxFQUFFO0VBQ2xDLElBQUlDLE1BQU0sR0FBRyxFQUFFO0VBQ2YsTUFBTUMsVUFBVSxHQUNkLGdFQUFnRTtFQUNsRSxNQUFNQyxnQkFBZ0IsR0FBR0QsVUFBVSxDQUFDRixNQUFNO0VBQzFDLEtBQUssSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSixNQUFNLEVBQUVJLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDbENILE1BQU0sSUFBSUMsVUFBVSxDQUFDRyxNQUFNLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLE1BQU0sRUFBRSxHQUFHTCxnQkFBZ0IsQ0FBQyxDQUFDO0VBQzNFO0VBQ0EsT0FBT0YsTUFBTTtBQUNmO0FBRUE7Ozs7QUFJQSxTQUFTRixlQUFlQSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","getUniqueCodev2","getUniqueCodev3","length","result","characters","charactersLength","i","charAt","Math","floor","random"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/helper/common.ts"],"sourcesContent":["/**\r\n *\r\n * @param length - Generate Unique Code ( default length 32 )\r\n */\r\nfunction getUniqueCodev2(length = 32) {\r\n  let result = \"\";\r\n  const characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  const charactersLength = characters.length;\r\n  for (let i = 0; i < length; i += 1) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n * @param length - Generate Unique Code ( default length 32 )\r\n */\r\nfunction getUniqueCodev3(length = 4) {\r\n    let result = ''\r\n    const characters =\r\n      'abcdefghijklmnopqrstuvwxyz0123456789'\r\n    const charactersLength = characters.length\r\n    for (let i = 0; i < length; i += 1) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\r\n    }\r\n    return result\r\n  }\r\nexport {\r\n    getUniqueCodev2,\r\n    getUniqueCodev3\r\n  }"],"mappings":";;;;;AA8BIA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AACAD,OAAA,CAAAE,eAAA,GAAAA,eAAA;AA/BJ;;;;AAIA,SAASD,eAAeA,CAACE,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAEA;;;;AAIA,SAASF,eAAeA,CAACC,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf","ignoreList":[]}},"mtime":1741655050589},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistClinic = checkExistClinic;\nexports.registerClinic = registerClinic;\nexports.findClinicByEmail = findClinicByEmail;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistClinic(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.clinic WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if clinic exists:\", error);\n      throw new Error(\"An error occurred while checking clinic existence.\");\n    }\n  });\n}\nfunction registerClinic(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.clinic\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.name, data.owner_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.zip_code, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction findClinicByEmail(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`SELECT email FROM ${mysql_1.coreSchema}.clinic WHERE email ? LIMIT 1`, {\n        values: [email]\n      });\n      return result.length > 0 ? result[0] : null;\n    } catch (error) {\n      console.error(\"Error querying clinic by email:\", error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdENsaW5pYyIsInJlZ2lzdGVyQ2xpbmljIiwiZmluZENsaW5pY0J5RW1haWwiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJteXNxbF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsImVtYWlsIiwicXVlcnlSZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0Iiwic2FsdFJvdW5kcyIsImhhc2hlZFBhc3N3b3JkIiwiZGVmYXVsdCIsImhhc2giLCJuZXdJZCIsInY0IiwicmVzdWx0IiwibmFtZSIsIm93bmVyX25hbWUiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiY2l0eSIsInN0YXRlIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiRGF0ZSIsIk9iamVjdCIsImFzc2lnbiIsImlkIiwibWVzc2FnZSIsIkludGVybmFsU2VydmVyIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgeyBjb3JlU2NoZW1hLCBxdWVyeSwgUm93RGF0YVBhY2tldCB9IGZyb20gXCIuLi8uLi9iaW4vbXlzcWxcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IElDbGluaWMgfSBmcm9tIFwiLi9JY2xpbmljXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tFeGlzdENsaW5pYyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5jbGluaWMgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAgICB7IHZhbHVlczogW2VtYWlsXSB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBxdWVyeVJlc3VsdC5sZW5ndGggPiAwO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgaWYgY2xpbmljIGV4aXN0czpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY2hlY2tpbmcgY2xpbmljIGV4aXN0ZW5jZS5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJDbGluaWMoZGF0YTogSUNsaW5pYyk6IFByb21pc2U8SUNsaW5pYz4ge1xyXG4gIGNvbnN0IHtwYXNzd29yZCAsIGNvbmZpcm1QYXNzd29yZH09IGRhdGEucGFzc3dvcmRcclxuXHJcbiAgaWYgKHBhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJQYXNzd29yZHMgZG8gbm90IG1hdGNoXCIpO1xyXG4gIH1cclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmNsaW5pY1xyXG4gICAgICAgIChpZCxuYW1lLG93bmVyX25hbWUsZW1haWwscGFzc3dvcmQsdG9rZW5fdmVyaWZ5LHZlcmlmeV9jb2RlLHBob25lLGNpdHksc3RhdGUsemlwX2NvZGUsY291bnRyeSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXHJcbiAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBuZXdJZCxcclxuICAgICAgICAgIGRhdGEubmFtZSxcclxuICAgICAgICAgIGRhdGEub3duZXJfbmFtZSxcclxuICAgICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgICBoYXNoZWRQYXNzd29yZCAsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgICAgZGF0YS5jaXR5LFxyXG4gICAgICAgICAgZGF0YS5zdGF0ZSxcclxuICAgICAgICAgIGRhdGEuemlwX2NvZGUsXHJcbiAgICAgICAgICBkYXRhLmNvdW50cnksXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaWQ6IG5ld0lkIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRDbGluaWNCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBTRUxFQ1QgZW1haWwgRlJPTSAke2NvcmVTY2hlbWF9LmNsaW5pYyBXSEVSRSBlbWFpbCA/IExJTUlUIDFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0WzBdIDogbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHF1ZXJ5aW5nIGNsaW5pYyBieSBlbWFpbDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gaW5zZXJ0IGNsaW5pYy5cIik7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BQSxPQUFBLENBQUFDLGdCQUFBLEdBQUFBLGdCQUFBO0FBY0FELE9BQUEsQ0FBQUUsY0FBQSxHQUFBQSxjQUFBO0FBd0NBRixPQUFBLENBQUFHLGlCQUFBLEdBQUFBLGlCQUFBO0FBNURBLE1BQUFDLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsZ0JBQUEsR0FBQUgsT0FBQTtBQUdBLFNBQXNCTCxnQkFBZ0JBLENBQUNTLEtB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","map":{"version":3,"names":["exports","checkExistClinic","registerClinic","findClinicByEmail","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","name","owner_name","token_verify","verify_code","phone","city","state","zip_code","country","Date","Object","assign","id","message","InternalServer"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/clinic/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IClinic } from \"./Iclinic\";\r\n\r\nexport async function checkExistClinic(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.clinic WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if clinic exists:\", error);\r\n    throw new Error(\"An error occurred while checking clinic existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerClinic(data: IClinic): Promise<IClinic> {\r\n  const {password , confirmPassword}= data.password\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.clinic\r\n        (id,name,owner_name,email,password,token_verify,verify_code,phone,city,state,zip_code,country,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.name,\r\n          data.owner_name,\r\n          data.email,\r\n          hashedPassword ,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.zip_code,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function findClinicByEmail(email: string): Promise<boolean> {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT email FROM ${coreSchema}.clinic WHERE email ? LIMIT 1`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    return result.length > 0 ? result[0] : null;\r\n  } catch (error) {\r\n    console.error(\"Error querying clinic by email:\", error);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nconst promises_1 = __importDefault(require(\"fs/promises\"));\nconst {\n  APP_NAME\n} = process.env;\nclass SendMail {\n  constructor(emailProvider) {\n    this.emailProvider = emailProvider;\n  }\n  loadTemplate(templateName, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const templatePath = path_1.default.resolve(__dirname, `../../public/template/email/${templateName}.html`);\n        const html = yield promises_1.default.readFile(templatePath, \"utf8\");\n        const template = handlebars_1.default.compile(html);\n        return template(data);\n      } catch (error) {\n        console.error(`Error loading email template (${templateName}):`, error);\n        throw new response_error_1.ResponseError.NotFound(\"Email template not found\");\n      }\n    });\n  }\n  sendAccountRegister(email, verifyCode) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"emailverify\", {\n          APP_NAME,\n          TOKEN: verifyCode\n        });\n        yield this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending registration email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n  // public static async AccountRegister(formData: any) {\n  //   try {\n  //     const { email, verify_code: TOKEN } = formData;\n  //     const subject = \"Ali Doctor Registration\";\n  //     const templatePath = path.resolve(\n  //       __dirname,\n  //       \"../../public/template/email/emailverify.html\"\n  //     );\n  //     // Read email template using async/await\n  //     const html = await fs.readFile(templatePath, \"utf8\");\n  //     const template = handlebars.compile(html);\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\n  //     // Send email\n  //     await this.emailProvider.send(email, subject, htmlToSend);\n  //   } catch (error) {\n  //     console.error(\"Error in AccountRegister:\", error);\n  //     throw new ResponseError.NotFound(\"Email template not found\");\n  //   }\n  //   // const { email } = formData\n  //   // const TOKEN = formData.verify_code\n  //   // const pathTemplate = path.resolve(\n  //   //   __dirname,\n  //   //   `../../public/template/email/emailverify.html`\n  //   // )\n  //   // const subject = 'Ali Doctor Registration'\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n  //   // const dataTemplate = { APP_NAME, TOKEN }\n  //   // const Email = new EmailProvider()\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\n  //   //   if (error) {\n  //   //     throw new ResponseError.NotFound('email template not found')\n  //   //   }\n  //   //   const template = handlebars.compile(html)\n  //   //   const htmlToSend = template(dataTemplate)\n  //   //   Email.send(email, subject, htmlToSend)\n  //   // })\n  // }\n  sendForgetPassToken(user, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const htmlToSend = yield this.loadTemplate(\"register\", {\n          APP_NAME,\n          TOKEN: token\n        });\n        yield this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\n      } catch (error) {\n        console.error(\"Error sending password reset email:\", error);\n        throw new response_error_1.ResponseError.InternalServer(\"Failed to send email\");\n      }\n    });\n  }\n}\nexports.default = SendMail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYW5kbGViYXJzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicGF0aF8xIiwicmVzcG9uc2VfZXJyb3JfMSIsInByb21pc2VzXzEiLCJBUFBfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJTZW5kTWFpbCIsImNvbnN0cnVjdG9yIiwiZW1haWxQcm92aWRlciIsImxvYWRUZW1wbGF0ZSIsInRlbXBsYXRlTmFtZSIsImRhdGEiLCJ0ZW1wbGF0ZVBhdGgiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImh0bWwiLCJyZWFkRmlsZSIsInRlbXBsYXRlIiwiY29tcGlsZSIsImVycm9yIiwiY29uc29sZSIsIlJlc3BvbnNlRXJyb3IiLCJOb3RGb3VuZCIsInNlbmRBY2NvdW50UmVnaXN0ZXIiLCJlbWFpbCIsInZlcmlmeUNvZGUiLCJodG1sVG9TZW5kIiwiVE9LRU4iLCJzZW5kIiwiSW50ZXJuYWxTZXJ2ZXIiLCJzZW5kRm9yZ2V0UGFzc1Rva2VuIiwidXNlciIsInRva2VuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9oZWxwZXIvc2VuZF9lbWFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGFuZGxlYmFycyBmcm9tIFwiaGFuZGxlYmFyc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgeyBFbWFpbFByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbmZpZy9lbWFpbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xyXG5cclxuY29uc3QgeyBBUFBfTkFNRSB9ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5jbGFzcyBTZW5kTWFpbCB7XHJcbiAgcHJpdmF0ZSBlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbWFpbFByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyKSB7XHJcbiAgICB0aGlzLmVtYWlsUHJvdmlkZXIgPSBlbWFpbFByb3ZpZGVyO1xyXG4gIH1cclxuICBwcml2YXRlIGFzeW5jIGxvYWRUZW1wbGF0ZShcclxuICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxyXG4gICAgZGF0YTogb2JqZWN0XHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZShcclxuICAgICAgICBfX2Rpcm5hbWUsXHJcbiAgICAgICAgYC4uLy4uL3B1YmxpYy90ZW1wbGF0ZS9lbWFpbC8ke3RlbXBsYXRlTmFtZX0uaHRtbGBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IGZzLnJlYWRGaWxlKHRlbXBsYXRlUGF0aCwgXCJ1dGY4XCIpO1xyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcclxuICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBlbWFpbCB0ZW1wbGF0ZSAoJHt0ZW1wbGF0ZU5hbWV9KTpgLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFwiRW1haWwgdGVtcGxhdGUgbm90IGZvdW5kXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHNlbmRBY2NvdW50UmVnaXN0ZXIoZW1haWw6IHN0cmluZywgdmVyaWZ5Q29kZTogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBodG1sVG9TZW5kID0gYXdhaXQgdGhpcy5sb2FkVGVtcGxhdGUoXCJlbWFpbHZlcmlmeVwiLCB7IEFQUF9OQU1FLCBUT0tFTjogdmVyaWZ5Q29kZSB9KTtcclxuICAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIFwiQWxpIERvY3RvciBSZWdpc3RyYXRpb25cIiwgaHRtbFRvU2VuZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VuZGluZyByZWdpc3RyYXRpb24gZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhOiBhbnkpIHtcclxuICAvLyAgIHRyeSB7XHJcbiAgLy8gICAgIGNvbnN0IHsgZW1haWwsIHZlcmlmeV9jb2RlOiBUT0tFTiB9ID0gZm9ybURhdGE7XHJcbiAgLy8gICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaSBEb2N0b3IgUmVnaXN0cmF0aW9uXCI7XHJcbiAgLy8gICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZShcclxuICAvLyAgICAgICBfX2Rpcm5hbWUsXHJcbiAgLy8gICAgICAgXCIuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbFwiXHJcbiAgLy8gICAgICk7XHJcblxyXG4gIC8vICAgICAvLyBSZWFkIGVtYWlsIHRlbXBsYXRlIHVzaW5nIGFzeW5jL2F3YWl0XHJcbiAgLy8gICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBmcy5yZWFkRmlsZSh0ZW1wbGF0ZVBhdGgsIFwidXRmOFwiKTtcclxuICAvLyAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XHJcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZSh7IEFQUF9OQU1FLCBUT0tFTiB9KTtcclxuXHJcbiAgLy8gICAgIC8vIFNlbmQgZW1haWxcclxuICAvLyAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xyXG4gIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIEFjY291bnRSZWdpc3RlcjpcIiwgZXJyb3IpO1xyXG4gIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcIkVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcclxuICAvLyAgIH1cclxuXHJcbiAgLy8gICAvLyBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YVxyXG4gIC8vICAgLy8gY29uc3QgVE9LRU4gPSBmb3JtRGF0YS52ZXJpZnlfY29kZVxyXG4gIC8vICAgLy8gY29uc3QgcGF0aFRlbXBsYXRlID0gcGF0aC5yZXNvbHZlKFxyXG4gIC8vICAgLy8gICBfX2Rpcm5hbWUsXHJcbiAgLy8gICAvLyAgIGAuLi8uLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbGBcclxuICAvLyAgIC8vIClcclxuXHJcbiAgLy8gICAvLyBjb25zdCBzdWJqZWN0ID0gJ0FsaSBEb2N0b3IgUmVnaXN0cmF0aW9uJ1xyXG4gIC8vICAgLy8gLy8gY29uc3QgdXJsVG9rZW4gPSBgJHtCQVNFX1VSTF9DTElFTlR9L2VtYWlsL3ZlcmlmeT90b2tlbj0ke3Rva2VufWBcclxuICAvLyAgIC8vIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH1cclxuICAvLyAgIC8vIGNvbnN0IEVtYWlsID0gbmV3IEVtYWlsUHJvdmlkZXIoKVxyXG5cclxuICAvLyAgIC8vIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xyXG4gIC8vICAgLy8gICBpZiAoZXJyb3IpIHtcclxuICAvLyAgIC8vICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZCgnZW1haWwgdGVtcGxhdGUgbm90IGZvdW5kJylcclxuICAvLyAgIC8vICAgfVxyXG5cclxuICAvLyAgIC8vICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbClcclxuICAvLyAgIC8vICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSlcclxuXHJcbiAgLy8gICAvLyAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpXHJcbiAgLy8gICAvLyB9KVxyXG4gIC8vIH1cclxuXHJcblxyXG4gIHB1YmxpYyBhc3luYyBzZW5kRm9yZ2V0UGFzc1Rva2VuKHVzZXI6IFVzZXIsIHRva2VuOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSBhd2FpdCB0aGlzLmxvYWRUZW1wbGF0ZShcInJlZ2lzdGVyXCIsIHsgQVBQX05BTUUsIFRPS0VOOiB0b2tlbiB9KTtcclxuICAgICAgYXdhaXQgdGhpcy5lbWFpbFByb3ZpZGVyLnNlbmQodXNlci5lbWFpbCwgXCJZb3VycyBEb2N0b3IgUmVnaXN0cmF0aW9uXCIsIGh0bWxUb1NlbmQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlbmRpbmcgcGFzc3dvcmQgcmVzZXQgZW1haWw6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJGYWlsZWQgdG8gc2VuZCBlbWFpbFwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gcHVibGljIHN0YXRpYyBmb3JnZXRQYXNzVG9rZW4oZm9ybURhdGE6IFVzZXIsIHRva2VuOiBzdHJpbmcpIHtcclxuICAvLyAgIGNvbnN0IHsgZW1haWwgfSA9IGZvcm1EYXRhO1xyXG4gIC8vICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcclxuICAvLyAgIGNvbnN0IHBhdGhUZW1wbGF0ZSA9IHBhdGgucmVzb2x2ZShcclxuICAvLyAgICAgX19kaXJuYW1lLFxyXG4gIC8vICAgICBgLi4vLi4vcHVibGljL3RlbXBsYXRlcy9lbWFpbHMvcmVnaXN0ZXIuaHRtbGBcclxuICAvLyAgICk7XHJcblxyXG4gIC8vICAgY29uc3Qgc3ViamVjdCA9IFwiWW91cnMgRG9jdG9yIFJlZ2lzdGVyYXRpb25cIjtcclxuICAvLyAgIC8vIGNvbnN0IHVybFRva2VuID0gYCR7QkFTRV9VUkxfQ0xJRU5UfS9lbWFpbC92ZXJpZnk/dG9rZW49JHt0b2tlbn1gXHJcbiAgLy8gICBjb25zdCBkYXRhVGVtcGxhdGUgPSB7IEFQUF9OQU1FLCBUT0tFTiB9O1xyXG4gIC8vICAgY29uc3QgRW1haWwgPSBuZXcgRW1haWxQcm92aWRlcigpO1xyXG5cclxuICAvLyAgIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xyXG4gIC8vICAgICBpZiAoZXJyb3IpIHtcclxuICAvLyAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcImVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcclxuICAvLyAgICAgfVxyXG5cclxuICAvLyAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XHJcbiAgLy8gICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZShkYXRhVGVtcGxhdGUpO1xyXG5cclxuICAvLyAgICAgRW1haWwuc2VuZChlbWFpbCwgc3ViamVjdCwgaHRtbFRvU2VuZCk7XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZh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","map":{"version":3,"names":["handlebars_1","__importDefault","require","path_1","response_error_1","promises_1","APP_NAME","process","env","SendMail","constructor","emailProvider","loadTemplate","templateName","data","templatePath","default","resolve","__dirname","html","readFile","template","compile","error","console","ResponseError","NotFound","sendAccountRegister","email","verifyCode","htmlToSend","TOKEN","send","InternalServer","sendForgetPassToken","user","token","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\helper\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/helper/send_email.ts"],"sourcesContent":["import handlebars from \"handlebars\";\r\nimport path from \"path\";\r\nimport { EmailProvider } from \"../config/email\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\nimport { User } from \"../types/user\";\r\nimport { readHTMLFile } from \"./file\";\r\nimport fs from \"fs/promises\";\r\n\r\nconst { APP_NAME } = process.env;\r\n\r\nclass SendMail {\r\n  private emailProvider: EmailProvider;\r\n\r\n  constructor(emailProvider: EmailProvider) {\r\n    this.emailProvider = emailProvider;\r\n  }\r\n  private async loadTemplate(\r\n    templateName: string,\r\n    data: object\r\n  ): Promise<string> {\r\n    try {\r\n      const templatePath = path.resolve(\r\n        __dirname,\r\n        `../../public/template/email/${templateName}.html`\r\n      );\r\n      const html = await fs.readFile(templatePath, \"utf8\");\r\n      const template = handlebars.compile(html);\r\n      return template(data);\r\n    } catch (error) {\r\n      console.error(`Error loading email template (${templateName}):`, error);\r\n      throw new ResponseError.NotFound(\"Email template not found\");\r\n    }\r\n  }\r\n\r\n  public async sendAccountRegister(email: string, verifyCode: string) {\r\n    try {\r\n      const htmlToSend = await this.loadTemplate(\"emailverify\", { APP_NAME, TOKEN: verifyCode });\r\n      await this.emailProvider.send(email, \"Ali Doctor Registration\", htmlToSend);\r\n    } catch (error) {\r\n      console.error(\"Error sending registration email:\", error);\r\n      throw new ResponseError.InternalServer(\"Failed to send email\");\r\n    }\r\n  }\r\n\r\n  // public static async AccountRegister(formData: any) {\r\n  //   try {\r\n  //     const { email, verify_code: TOKEN } = formData;\r\n  //     const subject = \"Ali Doctor Registration\";\r\n  //     const templatePath = path.resolve(\r\n  //       __dirname,\r\n  //       \"../../public/template/email/emailverify.html\"\r\n  //     );\r\n\r\n  //     // Read email template using async/await\r\n  //     const html = await fs.readFile(templatePath, \"utf8\");\r\n  //     const template = handlebars.compile(html);\r\n  //     const htmlToSend = template({ APP_NAME, TOKEN });\r\n\r\n  //     // Send email\r\n  //     await this.emailProvider.send(email, subject, htmlToSend);\r\n  //   } catch (error) {\r\n  //     console.error(\"Error in AccountRegister:\", error);\r\n  //     throw new ResponseError.NotFound(\"Email template not found\");\r\n  //   }\r\n\r\n  //   // const { email } = formData\r\n  //   // const TOKEN = formData.verify_code\r\n  //   // const pathTemplate = path.resolve(\r\n  //   //   __dirname,\r\n  //   //   `../../public/template/email/emailverify.html`\r\n  //   // )\r\n\r\n  //   // const subject = 'Ali Doctor Registration'\r\n  //   // // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\r\n  //   // const dataTemplate = { APP_NAME, TOKEN }\r\n  //   // const Email = new EmailProvider()\r\n\r\n  //   // readHTMLFile(pathTemplate, (error: Error, html: any) => {\r\n  //   //   if (error) {\r\n  //   //     throw new ResponseError.NotFound('email template not found')\r\n  //   //   }\r\n\r\n  //   //   const template = handlebars.compile(html)\r\n  //   //   const htmlToSend = template(dataTemplate)\r\n\r\n  //   //   Email.send(email, subject, htmlToSend)\r\n  //   // })\r\n  // }\r\n\r\n\r\n  public async sendForgetPassToken(user: User, token: string) {\r\n    try {\r\n      const htmlToSend = await this.loadTemplate(\"register\", { APP_NAME, TOKEN: token });\r\n      await this.emailProvider.send(user.email, \"Yours Doctor Registration\", htmlToSend);\r\n    } catch (error) {\r\n      console.error(\"Error sending password reset email:\", error);\r\n      throw new ResponseError.InternalServer(\"Failed to send email\");\r\n    }\r\n  }\r\n  // public static forgetPassToken(formData: User, token: string) {\r\n  //   const { email } = formData;\r\n  //   const TOKEN = token;\r\n  //   const pathTemplate = path.resolve(\r\n  //     __dirname,\r\n  //     `../../public/templates/emails/register.html`\r\n  //   );\r\n\r\n  //   const subject = \"Yours Doctor Registeration\";\r\n  //   // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\r\n  //   const dataTemplate = { APP_NAME, TOKEN };\r\n  //   const Email = new EmailProvider();\r\n\r\n  //   readHTMLFile(pathTemplate, (error: Error, html: any) => {\r\n  //     if (error) {\r\n  //       throw new ResponseError.NotFound(\"email template not found\");\r\n  //     }\r\n\r\n  //     const template = handlebars.compile(html);\r\n  //     const htmlToSend = template(dataTemplate);\r\n\r\n  //     Email.send(email, subject, htmlToSend);\r\n  //   });\r\n  // }\r\n}\r\n\r\nexport default SendMail;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,YAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,MAAAE,gBAAA,GAAAF,OAAA;AAGA,MAAAG,UAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEA,MAAM;EAAEI;AAAQ,CAAE,GAAGC,OAAO,CAACC,GAAG;AAEhC,MAAMC,QAAQ;EAGZC,YAAYC,aAA4B;IACtC,IAAI,CAACA,aAAa,GAAGA,aAAa;EACpC;EACcC,YAAYA,CACxBC,YAAoB,EACpBC,IAAY;;MAEZ,IAAI;QACF,MAAMC,YAAY,GAAGZ,MAAA,CAAAa,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,+BAA+BL,YAAY,OAAO,CACnD;QACD,MAAMM,IAAI,GAAG,MAAMd,UAAA,CAAAW,OAAE,CAACI,QAAQ,CAACL,YAAY,EAAE,MAAM,CAAC;QACpD,MAAMM,QAAQ,GAAGrB,YAAA,CAAAgB,OAAU,CAACM,OAAO,CAACH,IAAI,CAAC;QACzC,OAAOE,QAAQ,CAACP,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiCV,YAAY,IAAI,EAAEU,KAAK,CAAC;QACvE,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACC,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;IACF,CAAC;;EAEYC,mBAAmBA,CAACC,KAAa,EAAEC,UAAkB;;MAChE,IAAI;QACF,MAAMC,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,aAAa,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEF;QAAU,CAAE,CAAC;QAC1F,MAAM,IAAI,CAAClB,aAAa,CAACqB,IAAI,CAACJ,KAAK,EAAE,yBAAyB,EAAEE,UAAU,CAAC;MAC7E,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAGaC,mBAAmBA,CAACC,IAAU,EAAEC,KAAa;;MACxD,IAAI;QACF,MAAMN,UAAU,GAAG,MAAM,IAAI,CAAClB,YAAY,CAAC,UAAU,EAAE;UAAEN,QAAQ;UAAEyB,KAAK,EAAEK;QAAK,CAAE,CAAC;QAClF,MAAM,IAAI,CAACzB,aAAa,CAACqB,IAAI,CAACG,IAAI,CAACP,KAAK,EAAE,2BAA2B,EAAEE,UAAU,CAAC;MACpF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;QAC3D,MAAM,IAAInB,gBAAA,CAAAqB,aAAa,CAACQ,cAAc,CAAC,sBAAsB,CAAC;MAChE;IACF,CAAC;;;AA2BHI,OAAA,CAAArB,OAAA,GAAeP,QAAQ","ignoreList":[]}},"mtime":1741655050590},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PatientService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst patients_db_1 = require(\"./patients.db\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst email_1 = require(\"../../config/email\");\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\n// Check if expiration needs conversion\nconst expiresIn = typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" && /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED) ? Math.floor((0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000) : JWT_ACCESS_TOKEN_EXPIRED;\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  // ****\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const emailExists = yield (0, patients_db_1.checkExistPatient)(formData.email);\n      if (emailExists) {\n        console.error(`${formData.email} Email already exists, throwing error...`);\n        throw new response_error_1.ResponseError.BadRequest(`${formData.email} is already exist.`);\n      }\n      const verificationCode = (0, common_1.getUniqueCodev3)();\n      formData.verify_code = verificationCode;\n      const tokenVerify = jsonwebtoken_1.default.sign({\n        email: formData.email\n      }, JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.token_verify = tokenVerify;\n      // Send verification email\n      const clinicData = yield (0, patients_db_1.registerPatient)(formData);\n      if (!clinicData) {\n        throw new response_error_1.ResponseError.BadRequest(\"Failed to register clinic.\");\n      }\n      const emailService = new send_email_1.default(new email_1.EmailProvider());\n      yield emailService.sendAccountRegister(formData.email, verificationCode);\n      return {\n        message: \"Clinic registered successfully. Please verify your email.\",\n        newUser: {\n          id: clinicData.id,\n          email: formData.email\n        }\n      };\n    });\n  }\n  // ****\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addFavorite(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, patients_db_1.addFavorite)(formData.patient_id, formData.doctor_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PatientService = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImpzb253ZWJ0b2tlbl8xIiwiX19pbXBvcnREZWZhdWx0IiwibXNfMSIsInBhdGllbnRzX2RiXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiY29tbW9uXzEiLCJzZW5kX2VtYWlsXzEiLCJlbWFpbF8xIiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOIiwiZXhwaXJlc0luIiwidGVzdCIsIk1hdGgiLCJmbG9vciIsImRlZmF1bHQiLCJQYXRpZW50U2VydmljZSIsImdldFBhdGllbnRzIiwiZGF0YSIsIm1lc3NhZ2UiLCJwYXRpZW50RGV0aWFsIiwiaWQiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tFeGlzdE1vYmlsZSIsIm1vYmlsZSIsImNoZWNrUGhvbmVOdW1iZXJFeGlzdHMiLCJyZWdpc3RlclBhdGllbnQiLCJmb3JtRGF0YSIsImVtYWlsRXhpc3RzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJlbWFpbCIsImNvbnNvbGUiLCJlcnJvciIsIlJlc3BvbnNlRXJyb3IiLCJCYWRSZXF1ZXN0IiwidmVyaWZpY2F0aW9uQ29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInZlcmlmeV9jb2RlIiwidG9rZW5WZXJpZnkiLCJzaWduIiwidG9rZW5fdmVyaWZ5IiwiY2xpbmljRGF0YSIsImVtYWlsU2VydmljZSIsIkVtYWlsUHJvdmlkZXIiLCJzZW5kQWNjb3VudFJlZ2lzdGVyIiwibmV3VXNlciIsInVwZGF0ZVBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwiYWRkRmF2b3JpdGUiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBhZGRQYXRpZW50LFxyXG4gIGNoZWNrUGhvbmVOdW1iZXJFeGlzdHMsXHJcbiAgZGVsZXRlUGF0aWVudCxcclxuICBnZXRQYXRpZW50cyxcclxuICBwYXRpZW50RGV0YWlsLFxyXG4gIHVwZGF0ZVBhdGllbnQsXHJcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5pbXBvcnQgeyBQYXRpZW50RFRPIH0gZnJvbSBcIi4uLy4uL21vZGVscy9wYXRpZW50c1wiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgeyBhZGRGYXZvcml0ZSwgY2hlY2tFeGlzdFBhdGllbnQsIHJlZ2lzdGVyUGF0aWVudCB9IGZyb20gXCIuL3BhdGllbnRzLmRiXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQgeyBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XHJcbmltcG9ydCB7IEVtYWlsUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2VtYWlsXCI7XHJcblxyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyBEZWZhdWx0IDEgZGF5XHJcbmNvbnN0IEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4gfHwgXCJ5b3VyLXNlY3JldC1rZXlcIjtcclxuXHJcbi8vIENoZWNrIGlmIGV4cGlyYXRpb24gbmVlZHMgY29udmVyc2lvblxyXG5jb25zdCBleHBpcmVzSW4gPVxyXG4gIHR5cGVvZiBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPT09IFwic3RyaW5nXCIgJiZcclxuICAvXlswLTldK1tzbWhkd3ldJC9pLnRlc3QoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKVxyXG4gICAgPyBNYXRoLmZsb29yKG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwKVxyXG4gICAgOiBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQ7XHJcblxyXG5cclxuICAgIFxyXG5leHBvcnQgY2xhc3MgUGF0aWVudFNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UGF0aWVudHMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UGF0aWVudHMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBva2AsIGRhdGEgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBwYXRpZW50RGV0aWFsKGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwYXRpZW50RGV0YWlsKGlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrRXhpc3RNb2JpbGUobW9iaWxlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZSk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyAqKioqXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyByZWdpc3RlclBhdGllbnQoZm9ybURhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZW1haWxFeGlzdHMgPSBhd2FpdCBjaGVja0V4aXN0UGF0aWVudChmb3JtRGF0YS5lbWFpbCk7XHJcblxyXG4gICAgaWYgKGVtYWlsRXhpc3RzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYCR7Zm9ybURhdGEuZW1haWx9IEVtYWlsIGFscmVhZHkgZXhpc3RzLCB0aHJvd2luZyBlcnJvci4uLmBcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChgJHtmb3JtRGF0YS5lbWFpbH0gaXMgYWxyZWFkeSBleGlzdC5gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQ29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgZm9ybURhdGEudmVyaWZ5X2NvZGUgPSB2ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICB7IGVtYWlsOiBmb3JtRGF0YS5lbWFpbCB9LFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW4gfVxyXG4gICAgKTtcclxuICAgIGZvcm1EYXRhLnRva2VuX3ZlcmlmeSA9IHRva2VuVmVyaWZ5O1xyXG4gICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgIFxyXG4gICAgY29uc3QgY2xpbmljRGF0YSA9IGF3YWl0IHJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBpZiAoIWNsaW5pY0RhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkZhaWxlZCB0byByZWdpc3RlciBjbGluaWMuXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZW1haWxTZXJ2aWNlID0gbmV3IFNlbmRNYWlsKG5ldyBFbWFpbFByb3ZpZGVyKCkpO1xyXG4gICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRBY2NvdW50UmVnaXN0ZXIoZm9ybURhdGEuZW1haWwsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IFwiQ2xpbmljIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5LiBQbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwuXCIsXHJcbiAgICAgIG5ld1VzZXI6IHtcclxuICAgICAgICBpZDogY2xpbmljRGF0YS5pZCxcclxuICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuICAvLyAqKioqXHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlUGF0aWVudChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlUGF0aWVudChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBhZGRGYXZvcml0ZShmb3JtRGF0YToge1xyXG4gICAgcGF0aWVudF9pZDogbnVtYmVyO1xyXG4gICAgZG9jdG9yX2lkOiBudW1iZXI7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZEZhdm9yaXRlKGZvcm1EYXRhLnBhdGllbnRfaWQsIGZvcm1EYXRhLmRvY3Rvcl9pZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVNBLE1BQUFDLGNBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxnQkFBQSxHQUFBTCxPQUFBO0FBQ0EsTUFBQU0sUUFBQSxHQUFBTixPQUFBO0FBQ0EsTUFBQU8sWUFBQSxHQUFBTCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBUSxPQUFBLEdBQUFSLE9BQUE7QUFFQSxNQUFNUyx3QkFBd0IsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLHdCQUF3QixJQUFJLElBQUksQ0FBQyxDQUFDO0FBQy9FLE1BQU1HLHVCQUF1QixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCLElBQUksaUJBQWlCO0FBRXhGO0FBQ0EsTUFBTUMsU0FBUyxHQUNiLE9BQU9KLHdCQUF3QixLQUFLLFFBQVEsSUFDNUMsbUJBQW1CLENBQUNLLElBQUksQ0FBQ0wsd0JBQXdCLENBQUMsR0FDOUNNLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUFiLElBQUEsQ0FBQWMsT0FBRSxFQUFDUix3QkFBd0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUMvQ0Esd0JBQXdCO0FBSTlC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","map":{"version":3,"names":["db_1","require","jsonwebtoken_1","__importDefault","ms_1","patients_db_1","response_error_1","common_1","send_email_1","email_1","JWT_ACCESS_TOKEN_EXPIRED","process","env","JWT_SECRET_ACCESS_TOKEN","expiresIn","test","Math","floor","default","PatientService","getPatients","data","message","patientDetial","id","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","emailExists","checkExistPatient","email","console","error","ResponseError","BadRequest","verificationCode","getUniqueCodev3","verify_code","tokenVerify","sign","token_verify","clinicData","emailService","EmailProvider","sendAccountRegister","newUser","updatePatient","deletePatient","addFavorite","patient_id","doctor_id","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { addFavorite, checkExistPatient, registerPatient } from \"./patients.db\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { EmailProvider } from \"../../config/email\";\r\n\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // Default 1 day\r\nconst JWT_SECRET_ACCESS_TOKEN = process.env.JWT_SECRET_ACCESS_TOKEN || \"your-secret-key\";\r\n\r\n// Check if expiration needs conversion\r\nconst expiresIn =\r\n  typeof JWT_ACCESS_TOKEN_EXPIRED === \"string\" &&\r\n  /^[0-9]+[smhdwy]$/i.test(JWT_ACCESS_TOKEN_EXPIRED)\r\n    ? Math.floor(ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000)\r\n    : JWT_ACCESS_TOKEN_EXPIRED;\r\n\r\n\r\n    \r\nexport class PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(id: number) {\r\n    const data = await patientDetail(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  // ****\r\n  public static async registerPatient(formData: any) {\r\n    const emailExists = await checkExistPatient(formData.email);\r\n\r\n    if (emailExists) {\r\n      console.error(\r\n        `${formData.email} Email already exists, throwing error...`\r\n      );\r\n      throw new ResponseError.BadRequest(`${formData.email} is already exist.`);\r\n    }\r\n    \r\n    const verificationCode = getUniqueCodev3();\r\n    formData.verify_code = verificationCode;\r\n    \r\n    const tokenVerify = jwt.sign(\r\n      { email: formData.email },\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      { expiresIn }\r\n    );\r\n    formData.token_verify = tokenVerify;\r\n    // Send verification email\r\n    \r\n    const clinicData = await registerPatient(formData);\r\n    if (!clinicData) {\r\n      throw new ResponseError.BadRequest(\"Failed to register clinic.\");\r\n    }\r\n    const emailService = new SendMail(new EmailProvider());\r\n    await emailService.sendAccountRegister(formData.email, verificationCode);\r\n\r\n    return {\r\n      message: \"Clinic registered successfully. Please verify your email.\",\r\n      newUser: {\r\n        id: clinicData.id,\r\n        email: formData.email,\r\n      },\r\n    };\r\n  }\r\n  // ****\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addFavorite(formData: {\r\n    patient_id: number;\r\n    doctor_id: number;\r\n  }) {\r\n    const data = await addFavorite(formData.patient_id, formData.doctor_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AASA,MAAAC,cAAA,GAAAC,eAAA,CAAAF,OAAA;AACA,MAAAG,IAAA,GAAAD,eAAA,CAAAF,OAAA;AACA,MAAAI,aAAA,GAAAJ,OAAA;AACA,MAAAK,gBAAA,GAAAL,OAAA;AACA,MAAAM,QAAA,GAAAN,OAAA;AACA,MAAAO,YAAA,GAAAL,eAAA,CAAAF,OAAA;AACA,MAAAQ,OAAA,GAAAR,OAAA;AAEA,MAAMS,wBAAwB,GAAGC,OAAO,CAACC,GAAG,CAACF,wBAAwB,IAAI,IAAI,CAAC,CAAC;AAC/E,MAAMG,uBAAuB,GAAGF,OAAO,CAACC,GAAG,CAACC,uBAAuB,IAAI,iBAAiB;AAExF;AACA,MAAMC,SAAS,GACb,OAAOJ,wBAAwB,KAAK,QAAQ,IAC5C,mBAAmB,CAACK,IAAI,CAACL,wBAAwB,CAAC,GAC9CM,IAAI,CAACC,KAAK,CAAC,IAAAb,IAAA,CAAAc,OAAE,EAACR,wBAAwB,CAAC,GAAG,IAAI,CAAC,GAC/CA,wBAAwB;AAI9B,MAAaS,cAAc;EAClB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAArB,IAAA,CAAAoB,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,aAAaA,CAACC,EAAU;;MAC1C,MAAMH,IAAI,GAAG,MAAM,IAAArB,IAAA,CAAAyB,aAAa,EAACD,EAAE,CAAC;MACpC,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaK,gBAAgBA,CAACC,MAAc;;MACjD,MAAMN,IAAI,GAAG,MAAM,IAAArB,IAAA,CAAA4B,sBAAsB,EAACD,MAAM,CAAC;MACjD,IAAIN,IAAI,EAAE;QACR,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF,CAAC;;EAGD;EACO,OAAaQ,eAAeA,CAACC,QAAa;;MAC/C,MAAMC,WAAW,GAAG,MAAM,IAAA1B,aAAA,CAAA2B,iBAAiB,EAACF,QAAQ,CAACG,KAAK,CAAC;MAE3D,IAAIF,WAAW,EAAE;QACfG,OAAO,CAACC,KAAK,CACX,GAAGL,QAAQ,CAACG,KAAK,0CAA0C,CAC5D;QACD,MAAM,IAAI3B,gBAAA,CAAA8B,aAAa,CAACC,UAAU,CAAC,GAAGP,QAAQ,CAACG,KAAK,oBAAoB,CAAC;MAC3E;MAEA,MAAMK,gBAAgB,GAAG,IAAA/B,QAAA,CAAAgC,eAAe,GAAE;MAC1CT,QAAQ,CAACU,WAAW,GAAGF,gBAAgB;MAEvC,MAAMG,WAAW,GAAGvC,cAAA,CAAAgB,OAAG,CAACwB,IAAI,CAC1B;QAAET,KAAK,EAAEH,QAAQ,CAACG;MAAK,CAAE,EACzBpB,uBAAuB,EACvB;QAAEC;MAAS,CAAE,CACd;MACDgB,QAAQ,CAACa,YAAY,GAAGF,WAAW;MACnC;MAEA,MAAMG,UAAU,GAAG,MAAM,IAAAvC,aAAA,CAAAwB,eAAe,EAACC,QAAQ,CAAC;MAClD,IAAI,CAACc,UAAU,EAAE;QACf,MAAM,IAAItC,gBAAA,CAAA8B,aAAa,CAACC,UAAU,CAAC,4BAA4B,CAAC;MAClE;MACA,MAAMQ,YAAY,GAAG,IAAIrC,YAAA,CAAAU,OAAQ,CAAC,IAAIT,OAAA,CAAAqC,aAAa,EAAE,CAAC;MACtD,MAAMD,YAAY,CAACE,mBAAmB,CAACjB,QAAQ,CAACG,KAAK,EAAEK,gBAAgB,CAAC;MAExE,OAAO;QACLhB,OAAO,EAAE,2DAA2D;QACpE0B,OAAO,EAAE;UACPxB,EAAE,EAAEoB,UAAU,CAACpB,EAAE;UACjBS,KAAK,EAAEH,QAAQ,CAACG;;OAEnB;IACH,CAAC;;EACD;EAEO,OAAagB,aAAaA,CAACnB,QAAoB;;MACpD,MAAMT,IAAI,GAAG,MAAM,IAAArB,IAAA,CAAAiD,aAAa,EAACnB,QAAQ,CAAC;MAC1C,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAa6B,aAAaA,CAAC1B,EAAU;;MAC1C,MAAMH,IAAI,GAAG,MAAM,IAAArB,IAAA,CAAAkD,aAAa,EAAC1B,EAAE,CAAC;MACpC,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAa8B,WAAWA,CAACrB,QAG/B;;MACC,MAAMT,IAAI,GAAG,MAAM,IAAAhB,aAAA,CAAA8C,WAAW,EAACrB,QAAQ,CAACsB,UAAU,EAAEtB,QAAQ,CAACuB,SAAS,CAAC;MACvE,IAAIhC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AA/FHiC,OAAA,CAAAnC,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUser = createUser;\nexports.getUserByGoogleId = getUserByGoogleId;\nexports.getAdmins = getAdmins;\nexports.getNavItems = getNavItems;\nexports.updateAppointment = updateAppointment;\nexports.deleteAppointment = deleteAppointment;\nexports.getPatients = getPatients;\nexports.patientDetail = patientDetail;\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nexports.addPatient = addPatient;\nexports.deletePatient = deletePatient;\nexports.updatePatient = updatePatient;\nexports.getMedicine = getMedicine;\nexports.getDisease = getDisease;\nexports.getDiseaseSubcategories = getDiseaseSubcategories;\nexports.updateIsFavorite = updateIsFavorite;\nexports.addPrescriptionMedicine = addPrescriptionMedicine;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = require(\"../controller/user/schema\");\nconst mysql_1 = require(\"./mysql\");\nconst schema_2 = require(\"../controller/patients/schema\");\nconst response_error_1 = require(\"../modules/error/response_error\");\n// ****** Auth ******\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.createSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [data.firstName, data.lastName, data.userName, data.email, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nfunction getUserByGoogleId(googleId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`\n    SELECT * FROM${mysql_1.coreSchema}.users\n    WHERE google_id=?`, {\n      values: [googleId]\n    });\n    if (user.length < 1) return null;else return user[0];\n  });\n}\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const getManu = yield (0, mysql_1.query)(`SELECT \n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\n      FROM ${mysql_1.coreSchema}.menu m\n      LEFT JOIN ${mysql_1.coreSchema}.submenu s ON m.id = s.menu_id\n    ORDER BY m.id, s.id`);\n      const menuMap = new Map();\n      const iconMap = {\n        \"Appointments\": \"appointment-icon\",\n        \"Dashboard\": \"dashboard-icon\",\n        \"Doctors\": \"doctor-icon\",\n        \"Services\": \"services-icon\",\n        \"Patients\": \"patient-icon\",\n        \"Prescriptions\": \"prescriptions-icon\",\n        \"Billing & Payments\": \"billing-icon\",\n        \"Reports & Analytics\": \"report-icon\",\n        \"Settings\": \"settings-icon\",\n        \"Staff Management\": \"staff-icon\",\n        \"Inventory\": \"inventory-icon\"\n      };\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            id: row.menu_id,\n            icon: iconMap[row.menu_name] || 'default-icon',\n            name: row.menu_name,\n            path: row.menu_path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            id: row.submenu_id,\n            name: row.submenu_name,\n            path: row.submenu_url,\n            icon: row.submenu_icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (e) {\n      console.log(e);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // const result = await query<RowDataPacket[]>(\n    //   `UPDATE ${coreSchema}.appointments\n    //   SET date = ?, updated_at = ?\n    //   WHERE event_id = ?`,\n    //   {\n    //     values: [data.date, new Date(), data.event_id],\n    //   }\n    // );\n    // if (result) {\n    //   return result as IAppointment[];\n    // }\n  });\n}\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\n// ****** Patients ******\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT p.first_name,p.last_name,p.first_name,p.email,p.date_of_birth,p.user_name,\n         p.phone,p.gender,p.address,p.first_name,p.national_code\n     FROM ${mysql_1.coreSchema}.patients p\n  `);\n    return patients;\n  });\n}\nfunction patientDetail(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nfunction addPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_2.patientSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patients\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.first_name, data.last_name, data.phone, data.email, hashedPassword, data.token_verify, data.verify_code, new Date(), new Date()]\n    });\n    return result;\n  });\n}\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET patientName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.patientName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nfunction getMedicine() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.medications\n    `);\n    return result;\n  });\n}\nfunction getDisease() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases`);\n    return result;\n  });\n}\nfunction getDiseaseSubcategories(disease_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.diseases d \n      LEFT JOIN ${mysql_1.coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\n    WHERE d.disease_id = ?`, {\n      values: [disease_id]\n    });\n    return result;\n  });\n}\nfunction updateIsFavorite(medication_id, isFavorite) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`, {\n      values: [isFavorite, medication_id]\n    });\n    return result;\n  });\n}\nfunction addPrescriptionMedicine(formData, medicine_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    INSERT INTO ${mysql_1.coreSchema}.prescription_medicine\n     (\n      id,\n      medicine_id,\n      prescribed_date\n    ) VALUES (?, ?, ?)\n    `, {\n      values: [formData.id, medicine_id, formData.prescribed_date]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY3JlYXRlVXNlciIsImdldFVzZXJCeUdvb2dsZUlkIiwiZ2V0QWRtaW5zIiwiZ2V0TmF2SXRlbXMiLCJ1cGRhdGVBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50IiwiZ2V0UGF0aWVudHMiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tQaG9uZU51bWJlckV4aXN0cyIsImFkZFBhdGllbnQiLCJkZWxldGVQYXRpZW50IiwidXBkYXRlUGF0aWVudCIsImdldE1lZGljaW5lIiwiZ2V0RGlzZWFzZSIsImdldERpc2Vhc2VTdWJjYXRlZ29yaWVzIiwidXBkYXRlSXNGYXZvcml0ZSIsImFkZFByZXNjcmlwdGlvbk1lZGljaW5lIiwiYmNyeXB0XzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwidXVpZF8xIiwic2NoZW1hXzEiLCJteXNxbF8xIiwic2NoZW1hXzIiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiZmRQYXNzd29yZCIsInZhbGlkUGFzc3dvcmQiLCJjcmVhdGVTY2hlbWEiLCJ2YWxpZGF0ZVN5bmNBdCIsInNhbHRSb3VuZHMiLCJoYXNoIiwiZGVmYXVsdCIsImhhc2hTeW5jIiwibmV3SWQiLCJ2NCIsInJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidXNlck5hbWUiLCJlbWFpbCIsInZlcmlmeV9jb2RlIiwiRGF0ZSIsInRva2VuVmVyaWZ5IiwiZ29vZ2xlSWQiLCJ1c2VyIiwibGVuZ3RoIiwidXNlckFkbWluIiwiZ2V0TWFudSIsIm1lbnVNYXAiLCJNYXAiLCJpY29uTWFwIiwiZm9yRWFjaCIsInJvdyIsIm1lbnVJZCIsIm1lbnVfaWQiLCJoYXMiLCJzZXQiLCJpZCIsImljb24iLCJtZW51X25hbWUiLCJuYW1lIiwicGF0aCIsIm1lbnVfcGF0aCIsInN1Ym1lbnVzIiwic3VibWVudV9pZCIsInN1Ym1lbnUiLCJzdWJtZW51X25hbWUiLCJzdWJtZW51X3VybCIsInN1Ym1lbnVfaWNvbiIsIl9hIiwiZ2V0IiwicHVzaCIsIkFycmF5IiwiZnJvbSIsImUiLCJjb25zb2xlIiwibG9nIiwiUmVzcG9uc2VFcnJvciIsIkludGVybmFsU2VydmVyIiwiZXZlbnRfaWQiLCJwYXRpZW50cyIsIm1vYmlsZSIsInBhdGllbnRTY2hlbWEiLCJoYXNoZWRQYXNzd29yZCIsImVycm9yIiwiVW5hdXRob3JpemVkIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInBob25lIiwidG9rZW5fdmVyaWZ5IiwicGF0aWVudERhdGEiLCJwYXRpZW50TmFtZSIsImdlbmRlciIsImRhdGVPZkJpcnRoIiwiYWdlIiwiYmxvb2RQcmVzc3VyZSIsImluanVyeSIsImJsb29kR3JvdXAiLCJhZGRyZXNzIiwiZGlzZWFzZV9pZCIsIm1lZGljYXRpb25faWQiLCJpc0Zhdm9yaXRlIiwiZm9ybURhdGEiLCJtZWRpY2luZV9pZCIsInByZXNjcmliZWRfZGF0ZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9iaW4vZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNjaGVtYSB9IGZyb20gXCIuLi9jb250cm9sbGVyL3VzZXIvc2NoZW1hXCI7XHJcbmltcG9ydCB7IEFkbWluRFRPIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiO1xyXG5pbXBvcnQgeyBQYXRpZW50RFRPIH0gZnJvbSBcIi4uL21vZGVscy9wYXRpZW50c1wiO1xyXG5pbXBvcnQgeyBQcmVzY3JpcHRpb25NZWRpY2luZSB9IGZyb20gXCIuLi9tb2RlbHMvcHJlc2NyaXB0aW9uX21lZGljaW5lXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgTWVudSwgU3VibWVudSB9IGZyb20gXCIuLi90eXBlcy9uYXZJdGVtXCI7XHJcbmltcG9ydCB7IENyZWF0ZVVzZXIsIFVzZXIgfSBmcm9tIFwiLi4vdHlwZXMvdXNlclwiO1xyXG5pbXBvcnQgeyBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hLCBxdWVyeSB9IGZyb20gXCIuL215c3FsXCI7XHJcbmltcG9ydCB7IHBhdGllbnRTY2hlbWEgfSBmcm9tIFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9zY2hlbWFcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcblxyXG4vLyAqKioqKiogQXV0aCAqKioqKipcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKGRhdGE6IENyZWF0ZVVzZXIpIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlU2NoZW1hLnZhbGlkYXRlU3luY0F0KFxyXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcclxuICAgIGZkUGFzc3dvcmRcclxuICApO1xyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoID0gYmNyeXB0Lmhhc2hTeW5jKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIChmaXJzdE5hbWUsbGFzdE5hbWUsdXNlck5hbWUsZW1haWwscGFzc3dvcmQsc2lnbnVwU3RhdHVzLHZlcmlmeV9jb2RlLGNyZWF0ZWRBdCx1cGRhdGVkQXQsdG9rZW5WZXJpZnkpXHJcbiAgICBWQUxVRVMoPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtcclxuICAgICAgICBkYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICBkYXRhLmxhc3ROYW1lLFxyXG4gICAgICAgIGRhdGEudXNlck5hbWUsXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBoYXNoLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgZGF0YS50b2tlblZlcmlmeSxcclxuICAgICAgXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlHb29nbGVJZChnb29nbGVJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgKiBGUk9NJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgV0hFUkUgZ29vZ2xlX2lkPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtnb29nbGVJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAodXNlci5sZW5ndGggPCAxKSByZXR1cm4gbnVsbDtcclxuICBlbHNlIHJldHVybiB1c2VyWzBdIGFzIFVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBZG1pbnMoKSB7XHJcbiAgY29uc3QgdXNlckFkbWluID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXHJcbiAgICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uYWRtaW5cclxuICAgIGApO1xyXG4gIHJldHVybiB1c2VyQWRtaW4gYXMgQWRtaW5EVE9bXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBnZXRNYW51ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCBcclxuICAgICAgbS5pZCBBUyBtZW51X2lkLCBtLm5hbWUgQVMgbWVudV9uYW1lLCBtLmljb24gQVMgbWVudV9pY29uLCBtLnJvdXRlIEFTIG1lbnVfcGF0aCxcclxuICAgICAgcy5pZCBBUyBzdWJtZW51X2lkLCBzLm5hbWUgQVMgc3VibWVudV9uYW1lLCBzLnJvdXRlIEFTIHN1Ym1lbnVfdXJsXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5tZW51IG1cclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uc3VibWVudSBzIE9OIG0uaWQgPSBzLm1lbnVfaWRcclxuICAgIE9SREVSIEJZIG0uaWQsIHMuaWRgXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IG1lbnVNYXAgPSBuZXcgTWFwPG51bWJlciwgTWVudT4oKTtcclxuXHJcbiAgICBjb25zdCBpY29uTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgICBcIkFwcG9pbnRtZW50c1wiOiBcImFwcG9pbnRtZW50LWljb25cIixcclxuICAgICAgXCJEYXNoYm9hcmRcIjogXCJkYXNoYm9hcmQtaWNvblwiLFxyXG4gICAgICBcIkRvY3RvcnNcIjogXCJkb2N0b3ItaWNvblwiLFxyXG4gICAgICBcIlNlcnZpY2VzXCI6IFwic2VydmljZXMtaWNvblwiLFxyXG4gICAgICBcIlBhdGllbnRzXCI6IFwicGF0aWVudC1pY29uXCIsXHJcbiAgICAgIFwiUHJlc2NyaXB0aW9uc1wiOiBcInByZXNjcmlwdGlvbnMtaWNvblwiLFxyXG4gICAgICBcIkJpbGxpbmcgJiBQYXltZW50c1wiOiBcImJpbGxpbmctaWNvblwiLFxyXG4gICAgICBcIlJlcG9ydHMgJiBBbmFseXRpY3NcIjogXCJyZXBvcnQtaWNvblwiLFxyXG4gICAgICBcIlNldHRpbmdzXCI6IFwic2V0dGluZ3MtaWNvblwiLFxyXG4gICAgICBcIlN0YWZmIE1hbmFnZW1lbnRcIjogXCJzdGFmZi1pY29uXCIsXHJcbiAgICAgIFwiSW52ZW50b3J5XCI6IFwiaW52ZW50b3J5LWljb25cIixcclxuICAgIH07XHJcbiAgICBnZXRNYW51LmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBjb25zdCBtZW51SWQgPSByb3cubWVudV9pZDtcclxuICAgICAgaWYgKCFtZW51TWFwLmhhcyhtZW51SWQpKSB7XHJcbiAgICAgICAgbWVudU1hcC5zZXQobWVudUlkLCB7XHJcbiAgICAgICAgICBpZDogcm93Lm1lbnVfaWQsXHJcbiAgICAgICAgICBpY29uOiBpY29uTWFwW3Jvdy5tZW51X25hbWVdIHx8ICdkZWZhdWx0LWljb24nLFxyXG4gICAgICAgICAgbmFtZTogcm93Lm1lbnVfbmFtZSxcclxuICAgICAgICAgIHBhdGg6IHJvdy5tZW51X3BhdGgsXHJcbiAgICAgICAgICBzdWJtZW51czogW10sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJvdy5zdWJtZW51X2lkKSB7XHJcbiAgICAgICAgY29uc3Qgc3VibWVudTogU3VibWVudSA9IHtcclxuICAgICAgICAgIGlkOiByb3cuc3VibWVudV9pZCxcclxuICAgICAgICAgIG5hbWU6IHJvdy5zdWJtZW51X25hbWUsXHJcbiAgICAgICAgICBwYXRoOiByb3cuc3VibWVudV91cmwsXHJcbiAgICAgICAgICBpY29uOiByb3cuc3VibWVudV9pY29uLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbWVudU1hcC5nZXQobWVudUlkKT8uc3VibWVudXMucHVzaChzdWJtZW51KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShtZW51TWFwLnZhbHVlcygpKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIilcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50KFxyXG4gIGRhdGE6IElBcHBvaW50bWVudFxyXG4pIHtcclxuICAvLyBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gIC8vICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmFwcG9pbnRtZW50c1xyXG4gIC8vICAgU0VUIGRhdGUgPSA/LCB1cGRhdGVkX2F0ID0gP1xyXG4gIC8vICAgV0hFUkUgZXZlbnRfaWQgPSA/YCxcclxuICAvLyAgIHtcclxuICAvLyAgICAgdmFsdWVzOiBbZGF0YS5kYXRlLCBuZXcgRGF0ZSgpLCBkYXRhLmV2ZW50X2lkXSxcclxuICAvLyAgIH1cclxuICAvLyApO1xyXG4gIC8vIGlmIChyZXN1bHQpIHtcclxuICAvLyAgIHJldHVybiByZXN1bHQgYXMgSUFwcG9pbnRtZW50W107XHJcbiAgLy8gfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwb2ludG1lbnQoZXZlbnRfaWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgREVMRVRFIEZST00gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHNcclxuICAgICAgV0hFUkUgZXZlbnRfaWQ9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2V2ZW50X2lkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLy8gKioqKioqIFBhdGllbnRzICoqKioqKlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudHMoKSB7XHJcbiAgY29uc3QgcGF0aWVudHMgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICBTRUxFQ1QgcC5maXJzdF9uYW1lLHAubGFzdF9uYW1lLHAuZmlyc3RfbmFtZSxwLmVtYWlsLHAuZGF0ZV9vZl9iaXJ0aCxwLnVzZXJfbmFtZSxcclxuICAgICAgICAgcC5waG9uZSxwLmdlbmRlcixwLmFkZHJlc3MscC5maXJzdF9uYW1lLHAubmF0aW9uYWxfY29kZVxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50cyBwXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHBhdGllbnRzO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXRpZW50RGV0YWlsKGlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgV0hFUkUgaWQ9P2AsXHJcbiAgICB7IHZhbHVlczogW2lkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bob25lTnVtYmVyRXhpc3RzKG1vYmlsZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgd2hlcmUgbW9iaWxlPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KGRhdGE6IFBhdGllbnREVE8pIHtcclxuICBjb25zdCB7IHBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gcGF0aWVudFNjaGVtYS52YWxpZGF0ZVN5bmNBdChcclxuICAgIFwiY29uZmlybVBhc3N3b3JkXCIsXHJcbiAgICBmZFBhc3N3b3JkXHJcbiAgKTtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiUGFzc3dvcmQgaXMgaW52YWxpZFwiKTtcclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICAgIChpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxwaG9uZSxlbWFpbCxwYXNzd29yZCx0b2tlbl92ZXJpZnksdmVyaWZ5X2NvZGUsY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIG5ld0lkLFxyXG4gICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICBkYXRhLnBob25lLFxyXG4gICAgICAgIGRhdGEuZW1haWwsXHJcbiAgICAgICAgaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcclxuICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQYXRpZW50KGlkOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICBXSEVSRSBpZCA9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQocGF0aWVudERhdGE6IFBhdGllbnREVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBTRVQgcGF0aWVudE5hbWUgPSA/LFxyXG4gICAgICAgICAgZ2VuZGVyID0gPyxcclxuICAgICAgICAgIG1vYmlsZSA9ID8sXHJcbiAgICAgICAgICBkYXRlT2ZCaXJ0aCA9ID8sXHJcbiAgICAgICAgICBhZ2UgPSA/LFxyXG4gICAgICAgICAgZW1haWwgPSA/LFxyXG4gICAgICAgICAgYmxvb2RQcmVzc3VyZSA9ID8sXHJcbiAgICAgICAgICBpbmp1cnkgPSA/LFxyXG4gICAgICAgICAgYmxvb2RHcm91cCA9ID8sXHJcbiAgICAgICAgICBhZGRyZXNzID0gP1xyXG4gICAgICBXSEVSRSBpZCA9ID9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgcGF0aWVudERhdGEucGF0aWVudE5hbWUsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZ2VuZGVyLFxyXG4gICAgICAgIHBhdGllbnREYXRhLm1vYmlsZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZ2UsXHJcbiAgICAgICAgcGF0aWVudERhdGEuZW1haWwsXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RQcmVzc3VyZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5pbmp1cnksXHJcbiAgICAgICAgcGF0aWVudERhdGEuYmxvb2RHcm91cCxcclxuICAgICAgICBwYXRpZW50RGF0YS5hZGRyZXNzLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmlkLFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lZGljaW5lKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lm1lZGljYXRpb25zXHJcbiAgICBgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGlzZWFzZSgpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kaXNlYXNlc2BcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyhkaXNlYXNlX2lkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kaXNlYXNlcyBkIFxyXG4gICAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5kaXNlYXNlX3N1YmNhdGVnb3JpZXMgZHMgT04gZC5kaXNlYXNlX2lkID0gZHMuZGlzZWFzZV9pZFxyXG4gICAgV0hFUkUgZC5kaXNlYXNlX2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2Rpc2Vhc2VfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUlzRmF2b3JpdGUoXHJcbiAgbWVkaWNhdGlvbl9pZDogc3RyaW5nLFxyXG4gIGlzRmF2b3JpdGU6IGJvb2xlYW5cclxuKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgVVBEQVRFICAke2NvcmVTY2hlbWF9Lm1lZGljYXRpb25zIFNFVCBpc0Zhdm9yaXRlID0gPyBXSEVSRSBtZWRpY2F0aW9uX2lkID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lzRmF2b3JpdGUsIG1lZGljYXRpb25faWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByZXNjcmlwdGlvbk1lZGljaW5lKFxyXG4gIGZvcm1EYXRhOiBQcmVzY3JpcHRpb25NZWRpY2luZSxcclxuICBtZWRpY2luZV9pZDogbnVtYmVyXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucHJlc2NyaXB0aW9uX21lZGljaW5lXHJcbiAgICAgKFxyXG4gICAgICBpZCxcclxuICAgICAgbWVkaWNpbmVfaWQsXHJcbiAgICAgIHByZXNjcmliZWRfZGF0ZVxyXG4gICAgKSBWQUxVRVMgKD8sID8sID8pXHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtmb3JtRGF0YS5pZCwgbWVkaWNpbmVfaWQsIGZvcm1EYXRhLnByZXNjcmliZWRfZGF0ZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWVBQSxPQUFBLENBQUFDLFVBQUEsR0FBQUEsVUFBQTtBQWtDQUQsT0FBQSxDQUFBRSxpQkFBQSxHQUFBQSxpQkFBQTtBQWFBRixPQUFBLENBQUFHLFNBQUEsR0FBQUEsU0FBQTtBQU9BSCxPQUFBLENBQUFJLFdBQUEsR0FBQUEsV0FBQTtBQXdEQUosT0FBQSxDQUFBSyxpQkFBQSxHQUFBQSxpQkFBQTtBQWdCQUwsT0FBQSxDQUFBTSxpQkFBQSxHQUFBQSxpQkFBQTtBQVdBTixPQUFBLENBQUFPLFdBQUEsR0FBQUEsV0FBQTtBQVFBUCxPQUFBLENBQUFRLGFBQUEsR0FBQUEsYUFBQTtBQVFBUixPQUFBLENBQUFTLHNCQUFBLEdBQUFBLHNCQUFBO0FBWUFULE9BQUEsQ0FBQVUsVUFBQSxHQUFBQSxVQUFBO0FBb0NBVixPQUFBLENBQUFXLGFBQUEsR0FBQUEsYUFBQTtBQVVBWCxPQUFBLENBQUFZLGFBQUEsR0FBQUEsYUFBQTtBQW1DQVosT0FBQSxDQUFBYSxXQUFBLEdBQUFBLFdBQUE7QUFPQWIsT0FBQSxDQUFBYyxVQUFBLEdBQUFBLFVBQUE7QUFPQWQsT0FBQSxDQUFBZSx1QkFBQSxHQUFBQSx1QkFBQTtBQVlBZixPQUFBLENBQUFnQixnQkFBQSxHQUFBQSxnQkFBQTtBQWFBaEIsT0FBQSxDQUFBaUIsdUJBQUEsR0FBQUEsdUJBQUE7QUE1U0EsTUFBQUMsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxN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","map":{"version":3,"names":["exports","createUser","getUserByGoogleId","getAdmins","getNavItems","updateAppointment","deleteAppointment","getPatients","patientDetail","checkPhoneNumberExists","addPatient","deletePatient","updatePatient","getMedicine","getDisease","getDiseaseSubcategories","updateIsFavorite","addPrescriptionMedicine","bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","schema_2","response_error_1","data","password","confirmPassword","fdPassword","validPassword","createSchema","validateSyncAt","saltRounds","hash","default","hashSync","newId","v4","result","query","coreSchema","values","firstName","lastName","userName","email","verify_code","Date","tokenVerify","googleId","user","length","userAdmin","getManu","menuMap","Map","iconMap","forEach","row","menuId","menu_id","has","set","id","icon","menu_name","name","path","menu_path","submenus","submenu_id","submenu","submenu_name","submenu_url","submenu_icon","_a","get","push","Array","from","e","console","log","ResponseError","InternalServer","event_id","patients","mobile","patientSchema","hashedPassword","error","Unauthorized","first_name","last_name","phone","token_verify","patientData","patientName","gender","dateOfBirth","age","bloodPressure","injury","bloodGroup","address","disease_id","medication_id","isFavorite","formData","medicine_id","prescribed_date"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\bin\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { createSchema } from \"../controller/user/schema\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { PrescriptionMedicine } from \"../models/prescription_medicine\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { patientSchema } from \"../controller/patients/schema\";\r\nimport { ResponseError } from \"../modules/error/response_error\";\r\n\r\n// ****** Auth ******\r\n\r\nexport async function createUser(data: CreateUser) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = createSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (firstName,lastName,userName,email,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        data.firstName,\r\n        data.lastName,\r\n        data.userName,\r\n        data.email,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getUserByGoogleId(googleId: string) {\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM${coreSchema}.users\r\n    WHERE google_id=?`,\r\n    {\r\n      values: [googleId],\r\n    }\r\n  );\r\n  if (user.length < 1) return null;\r\n  else return user[0] as User;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getNavItems() {\r\n  try {\r\n    const getManu = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      m.id AS menu_id, m.name AS menu_name, m.icon AS menu_icon, m.route AS menu_path,\r\n      s.id AS submenu_id, s.name AS submenu_name, s.route AS submenu_url\r\n      FROM ${coreSchema}.menu m\r\n      LEFT JOIN ${coreSchema}.submenu s ON m.id = s.menu_id\r\n    ORDER BY m.id, s.id`\r\n    );\r\n\r\n    const menuMap = new Map<number, Menu>();\r\n\r\n    const iconMap: { [key: string]: string } = {\r\n      \"Appointments\": \"appointment-icon\",\r\n      \"Dashboard\": \"dashboard-icon\",\r\n      \"Doctors\": \"doctor-icon\",\r\n      \"Services\": \"services-icon\",\r\n      \"Patients\": \"patient-icon\",\r\n      \"Prescriptions\": \"prescriptions-icon\",\r\n      \"Billing & Payments\": \"billing-icon\",\r\n      \"Reports & Analytics\": \"report-icon\",\r\n      \"Settings\": \"settings-icon\",\r\n      \"Staff Management\": \"staff-icon\",\r\n      \"Inventory\": \"inventory-icon\",\r\n    };\r\n    getManu.forEach((row) => {\r\n      const menuId = row.menu_id;\r\n      if (!menuMap.has(menuId)) {\r\n        menuMap.set(menuId, {\r\n          id: row.menu_id,\r\n          icon: iconMap[row.menu_name] || 'default-icon',\r\n          name: row.menu_name,\r\n          path: row.menu_path,\r\n          submenus: [],\r\n        });\r\n      }\r\n      if (row.submenu_id) {\r\n        const submenu: Submenu = {\r\n          id: row.submenu_id,\r\n          name: row.submenu_name,\r\n          path: row.submenu_url,\r\n          icon: row.submenu_icon,\r\n        };\r\n        menuMap.get(menuId)?.submenus.push(submenu);\r\n      }\r\n    });\r\n    return Array.from(menuMap.values());\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\")\r\n  }\r\n}\r\n\r\n\r\n\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n) {\r\n  // const result = await query<RowDataPacket[]>(\r\n  //   `UPDATE ${coreSchema}.appointments\r\n  //   SET date = ?, updated_at = ?\r\n  //   WHERE event_id = ?`,\r\n  //   {\r\n  //     values: [data.date, new Date(), data.event_id],\r\n  //   }\r\n  // );\r\n  // if (result) {\r\n  //   return result as IAppointment[];\r\n  // }\r\n}\r\n\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n// ****** Patients ******\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT p.first_name,p.last_name,p.first_name,p.email,p.date_of_birth,p.user_name,\r\n         p.phone,p.gender,p.address,p.first_name,p.national_code\r\n     FROM ${coreSchema}.patients p\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(id: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [id] }\r\n  );\r\n  return result;\r\n}\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function addPatient(data: PatientDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = patientSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `INSERT INTO ${coreSchema}.patients\r\n      (id,first_name,last_name,phone,email,password,token_verify,verify_code,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.first_name,\r\n        data.last_name,\r\n        data.phone,\r\n        data.email,\r\n        hashedPassword,\r\n        data.token_verify,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET patientName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.patientName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getMedicine() {\r\n  const result = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.medications\r\n    `);\r\n  return result;\r\n}\r\n\r\nexport async function getDisease() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getDiseaseSubcategories(disease_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.diseases d \r\n      LEFT JOIN ${coreSchema}.disease_subcategories ds ON d.disease_id = ds.disease_id\r\n    WHERE d.disease_id = ?`,\r\n    {\r\n      values: [disease_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateIsFavorite(\r\n  medication_id: string,\r\n  isFavorite: boolean\r\n) {\r\n  const result = await query<RowDataPacket>(\r\n    `UPDATE  ${coreSchema}.medications SET isFavorite = ? WHERE medication_id = ?`,\r\n    {\r\n      values: [isFavorite, medication_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function addPrescriptionMedicine(\r\n  formData: PrescriptionMedicine,\r\n  medicine_id: number\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    INSERT INTO ${coreSchema}.prescription_medicine\r\n     (\r\n      id,\r\n      medicine_id,\r\n      prescribed_date\r\n    ) VALUES (?, ?, ?)\r\n    `,\r\n    {\r\n      values: [formData.id, medicine_id, formData.prescribed_date],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050577},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.latestTemplatesSchema = exports.userRolesSchema = exports.createPasswordSchema = exports.createSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.createSchema = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\nexports.userRolesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.latestTemplatesSchema = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlzdE5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwibmlja05hbWUiLCJnZW5kZXIiLCJiaXJ0aERheSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJ1c2VyUm9sZXNTY2hlbWEiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXNTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGZpc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXN0TmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBsYXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdE5hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbmlja05hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIm5pY2tOYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGdlbmRlcjogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZ2VuZGVyIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGJpcnRoRGF5OiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJiaXJ0aERheSBpcyByZXF1aXJlZFwiKSxcclxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIHBob25lTnVtYmVyOiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICB0b2tlblZlcmlmeTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbnBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc3dvcmRTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5ld1Bhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJuZXdQYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgbGF0ZXN0VGVtcGxhdGVzU2NoZW1hID0geXVwXHJcbiAgLm9iamVjdCgpXHJcbiAgLnNoYXBlKHtcclxuICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4gIH0pXHJcbiAgLnJlcXVpcmVkKCk7XHJcblxyXG4gIGV4cG9ydCAgY29uc3QgY29uZmlybUVtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgLy8gaWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXIgaWQgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAucmVxdWlyZWQoXCJ2ZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKVxyXG4gICAgLm1pbig0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKVxyXG4gICAgLm1heCg0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tFbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkIVwiKSxcclxufSk7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","map":{"version":3,"names":["yup","__importStar","require","exports","createSchema","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","userRolesSchema","userId","latestTemplatesSchema","confirmEmailSchema","verify_code","max","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const createSchema = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\npassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\nexport const userRolesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const latestTemplatesSchema = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\n  export  const confirmEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.patientSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.patientSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsInBhdGllbnRTY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsImZpcnN0X25hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3RfbmFtZSIsIm93bmVyX25hbWUiLCJlbWFpbCIsInBob25lIiwibnVsbGFibGUiLCJ0b2tlblZlcmlmeSIsInBhc3N3b3JkIiwibWluIiwib25lT2YiLCJyZWYiLCJjb25maXJtUGFzc3dvcmQiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybUVtYWlsU2NoZW1hIiwidmVyaWZ5X2NvZGUiLCJsZW5ndGgiLCJjaGVja0VtYWlsU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccGF0aWVudHNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9wYXRpZW50cy9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXRpZW50U2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBmaXJzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXJzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxhc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIG93bmVyX25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgcGhvbmU6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICBwYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBuZXdQYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuLy8gZXhwb3J0IGNvbnN0IHVzZXJSb2xlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuLy8gICBleHBvcnQgIGNvbnN0IGxhdGVzdFRlbXBsYXRlc1NjaGVtYSA9IHl1cFxyXG4vLyAgIC5vYmplY3QoKVxyXG4vLyAgIC5zaGFwZSh7XHJcbi8vICAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuLy8gICB9KVxyXG4vLyAgIC5yZXF1aXJlZCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1FbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAuZW1haWwoXCJJbnZhbGlkIGVtYWlsIGZvcm1hdFwiKVxyXG4gICAgLnJlcXVpcmVkKFwiRW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubGVuZ3RoKDQsIFwiVmVyaWZ5IGNvZGUgc2hvdWxkIGJlIDQgY2hhcmFjdGVyc1wiKVxyXG4gICAgLnJlcXVpcmVkKFwiVmVyaWZ5IGNvZGUgaXMgcmVxdWlyZWRcIiksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiksXHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxHQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVhQyxPQUFBLENBQUFDLGFBQWEsR0FBR0osR0FBRyxDQUFDSyxNQUFNLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQzlDQyxVQUFVLEVBQUVQLEdBQUcsQ0FBQ1EsTUFB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","map":{"version":3,"names":["yup","__importStar","require","exports","patientSchema","object","shape","first_name","string","required","last_name","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/patients/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const patientSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,aAAa,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC9CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,UAAU,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDG,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACI,KAAK,CAAC,eAAe,CAAC,CAACH,QAAQ,CAAC,mBAAmB,CAAC;EACxEI,KAAK,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EAC9BC,WAAW,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACM,QAAQ,EAAE;EACpCE,QAAQ,EAAEhB,GAAG,CACVQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWhB,OAAA,CAAAkB,oBAAoB,GAAGrB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDgB,WAAW,EAAEtB,GAAG,CACbQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEpB,GAAG,CACjBQ,MAAM,EAAE,CACRS,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAAClB,GAAG,CAACmB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEahB,OAAA,CAAAoB,kBAAkB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDM,KAAK,EAAEZ,GAAG,CACPQ,MAAM,EAAE,CACRI,KAAK,CAAC,sBAAsB,CAAC,CAC7BH,QAAQ,CAAC,mBAAmB,CAAC;EAChCe,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRiB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ChB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAuB,gBAAgB,GAAG1B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDM,KAAK,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\patients.db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkExistPatient = checkExistPatient;\nexports.registerPatient = registerPatient;\nexports.addFavorite = addFavorite;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nfunction checkExistPatient(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const queryResult = yield (0, mysql_1.query)(`SELECT 1 FROM ${mysql_1.coreSchema}.patient WHERE email = ? LIMIT 1`, {\n        values: [email]\n      });\n      return queryResult.length > 0;\n    } catch (error) {\n      console.error(\"Error checking if patient exists:\", error);\n      throw new Error(\"An error occurred while checking patient existence.\");\n    }\n  });\n}\nfunction registerPatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password,\n      confirmPassword\n    } = data.password;\n    if (password !== confirmPassword) {\n      throw new response_error_1.ResponseError.BadRequest(\"Passwords do not match\");\n    }\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(password, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`, {\n        values: [data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, data.city, data.state, data.country, new Date(), new Date()]\n      });\n      return Object.assign(Object.assign({}, data), {\n        id: newId\n      });\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction addFavorite(patient_id, doctor_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const existingFavorite = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patient_favorites\n         WHERE patient_id = ? AND doctor_id = ?`, {\n        values: [patient_id, doctor_id]\n      });\n      if (existingFavorite.length > 0) {\n        yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patient_favorites\n            WHERE doctor_id = ? AND patient_id = ?`, {\n          values: [doctor_id, patient_id]\n        });\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = NULL WHERE id = ?`, [patient_id]);\n        return {\n          message: \"Favorite removed\"\n        };\n      } else {\n        const favoriteResult = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patient_favorites (patient_id, doctor_id) \n         VALUES (?, ?)`, {\n          values: [patient_id, doctor_id]\n        });\n        const favorite_id = favoriteResult.insertId;\n        yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.patient SET favorite_id = ? WHERE id = ?`, [favorite_id, patient_id]);\n        return {\n          favorite_id\n        };\n      }\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to add favorite.\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tFeGlzdFBhdGllbnQiLCJyZWdpc3RlclBhdGllbnQiLCJhZGRGYXZvcml0ZSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInV1aWRfMSIsIm15c3FsXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZW1haWwiLCJxdWVyeVJlc3VsdCIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwidG9rZW5fdmVyaWZ5IiwidmVyaWZ5X2NvZGUiLCJwaG9uZSIsImNpdHkiLCJzdGF0ZSIsImNvdW50cnkiLCJEYXRlIiwiT2JqZWN0IiwiYXNzaWduIiwiaWQiLCJtZXNzYWdlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJwYXRpZW50X2lkIiwiZG9jdG9yX2lkIiwiZXhpc3RpbmdGYXZvcml0ZSIsImZhdm9yaXRlUmVzdWx0IiwiZmF2b3JpdGVfaWQiLCJpbnNlcnRJZCIsImxvZyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvcGF0aWVudHMuZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XHJcbmltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgSVBhdGllbnQgfSBmcm9tIFwiLi9JUGF0aWVudFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRXhpc3RQYXRpZW50KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcXVlcnlSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnQgV0hFUkUgZW1haWwgPSA/IExJTUlUIDFgLFxyXG4gICAgICB7IHZhbHVlczogW2VtYWlsXSB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBxdWVyeVJlc3VsdC5sZW5ndGggPiAwO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgaWYgcGF0aWVudCBleGlzdHM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNoZWNraW5nIHBhdGllbnQgZXhpc3RlbmNlLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlclBhdGllbnQoZGF0YTogSVBhdGllbnQpOiBQcm9taXNlPElQYXRpZW50PiB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhLnBhc3N3b3JkO1xyXG5cclxuICBpZiAocGFzc3dvcmQgIT09IGNvbmZpcm1QYXNzd29yZCkge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlBhc3N3b3JkcyBkbyBub3QgbWF0Y2hcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuICBjb25zdCBuZXdJZCA9IHV1aWR2NCgpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucGF0aWVudFxyXG4gICAgICAgICAgKGZpcnN0X25hbWUsbGFzdF9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjaXR5LHN0YXRlLGNvdW50cnksY3JlYXRlZF9hdCx1cGRhdGVkX2F0KVxyXG4gICAgICAgICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEubGFzdF9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICAgIGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEuY2l0eSxcclxuICAgICAgICAgIGRhdGEuc3RhdGUsXHJcbiAgICAgICAgICBkYXRhLmNvdW50cnksXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaWQ6IG5ld0lkIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGluc2VydCBjbGluaWMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEZhdm9yaXRlKHBhdGllbnRfaWQ6IG51bWJlciwgZG9jdG9yX2lkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXhpc3RpbmdGYXZvcml0ZSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudF9mYXZvcml0ZXNcclxuICAgICAgICAgV0hFUkUgcGF0aWVudF9pZCA9ID8gQU5EIGRvY3Rvcl9pZCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbcGF0aWVudF9pZCwgZG9jdG9yX2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChleGlzdGluZ0Zhdm9yaXRlLmxlbmd0aCA+IDApIHtcclxuICAgICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudF9mYXZvcml0ZXNcclxuICAgICAgICAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgcGF0aWVudF9pZCA9ID9gLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZhbHVlczogW2RvY3Rvcl9pZCwgcGF0aWVudF9pZF0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0ucGF0aWVudCBTRVQgZmF2b3JpdGVfaWQgPSBOVUxMIFdIRVJFIGlkID0gP2AsXHJcbiAgICAgICAgW3BhdGllbnRfaWRdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIkZhdm9yaXRlIHJlbW92ZWRcIiB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZmF2b3JpdGVSZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5wYXRpZW50X2Zhdm9yaXRlcyAocGF0aWVudF9pZCwgZG9jdG9yX2lkKSBcclxuICAgICAgICAgVkFMVUVTICg/LCA/KWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWVzOiBbcGF0aWVudF9pZCwgZG9jdG9yX2lkXSxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGZhdm9yaXRlX2lkID0gKGZhdm9yaXRlUmVzdWx0IGFzIGFueSkuaW5zZXJ0SWQ7XHJcbiAgICAgIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50IFNFVCBmYXZvcml0ZV9pZCA9ID8gV0hFUkUgaWQgPSA/YCxcclxuICAgICAgICBbZmF2b3JpdGVfaWQsIHBhdGllbnRfaWRdXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiB7IGZhdm9yaXRlX2lkIH07XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiRmFpbGVkIHRvIGFkZCBmYXZvcml0ZS5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUFBLE9BQUEsQ0FBQUMsaUJBQUEsR0FBQUEsaUJBQUE7QUFjQUQsT0FBQSxDQUFBRSxlQUFBLEdBQUFBLGVBQUE7QUFzQ0FGLE9BQUEsQ0FBQUcsV0FBQSxHQUFBQSxX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","map":{"version":3,"names":["exports","checkExistPatient","registerPatient","addFavorite","bcrypt_1","__importDefault","require","uuid_1","mysql_1","response_error_1","email","queryResult","query","coreSchema","values","length","error","console","Error","data","password","confirmPassword","ResponseError","BadRequest","saltRounds","hashedPassword","default","hash","newId","v4","result","first_name","last_name","token_verify","verify_code","phone","city","state","country","Date","Object","assign","id","message","InternalServer","patient_id","doctor_id","existingFavorite","favoriteResult","favorite_id","insertId","log"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/patients/patients.db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { IPatient } from \"./IPatient\";\r\n\r\nexport async function checkExistPatient(email: string): Promise<boolean> {\r\n  try {\r\n    const queryResult = await query<RowDataPacket[]>(\r\n      `SELECT 1 FROM ${coreSchema}.patient WHERE email = ? LIMIT 1`,\r\n      { values: [email] }\r\n    );\r\n\r\n    return queryResult.length > 0;\r\n  } catch (error) {\r\n    console.error(\"Error checking if patient exists:\", error);\r\n    throw new Error(\"An error occurred while checking patient existence.\");\r\n  }\r\n}\r\n\r\nexport async function registerPatient(data: IPatient): Promise<IPatient> {\r\n  const { password, confirmPassword } = data.password;\r\n\r\n  if (password !== confirmPassword) {\r\n    throw new ResponseError.BadRequest(\"Passwords do not match\");\r\n  }\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n  const newId = uuidv4();\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.patient\r\n          (first_name,last_name,email,password,token_verify,verify_code,phone,city,state,country,created_at,updated_at)\r\n          VALUES(?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          data.city,\r\n          data.state,\r\n          data.country,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return { ...data, id: newId };\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function addFavorite(patient_id: number, doctor_id: number) {\r\n  try {\r\n    const existingFavorite = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.patient_favorites\r\n         WHERE patient_id = ? AND doctor_id = ?`,\r\n      {\r\n        values: [patient_id, doctor_id],\r\n      }\r\n    );\r\n    if (existingFavorite.length > 0) {\r\n      await query<RowDataPacket>(\r\n        `DELETE FROM ${coreSchema}.patient_favorites\r\n            WHERE doctor_id = ? AND patient_id = ?`,\r\n        {\r\n          values: [doctor_id, patient_id],\r\n        }\r\n      );\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = NULL WHERE id = ?`,\r\n        [patient_id]\r\n      );\r\n\r\n      return { message: \"Favorite removed\" };\r\n    } else {\r\n      const favoriteResult = await query<RowDataPacket>(\r\n        `INSERT INTO ${coreSchema}.patient_favorites (patient_id, doctor_id) \r\n         VALUES (?, ?)`,\r\n        {\r\n          values: [patient_id, doctor_id],\r\n        }\r\n      );\r\n      const favorite_id = (favoriteResult as any).insertId;\r\n      await query<RowDataPacket>(\r\n        `UPDATE ${coreSchema}.patient SET favorite_id = ? WHERE id = ?`,\r\n        [favorite_id, patient_id]\r\n      );\r\n      return { favorite_id };\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Failed to add favorite.\");\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst sercvice_1 = require(\"./sercvice\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// ***** checkNickName\npublic_1.router.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.asyncHandler)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.UserService.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.router.get(\"/getUserInfo/:email\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = req.params.email;\n    const userData = yield sercvice_1.UserService.getUserInfo(data);\n    const buildResponse = app_response_1.BuildResponse.get(userData);\n    return res.json(buildResponse);\n  });\n});\n// ***** confirm\n// ***** getOTP\npublic_1.router.get(\"/user/getOTP/:email\", (0, async_handler_1.asyncHandler)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.router.put(`/api/updateProfilePatient`, (0, async_handler_1.asyncHandler)(function updateProfilePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.UserService.updateProfilePatient(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.router.get(\"/user/forgot-passsword/:email\", (0, async_handler_1.asyncHandler)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.UserService.sendFrogetPasswordToken(email);\n    const buildResponse = yield app_response_1.BuildResponse.get(data);\n    res.json(buildResponse);\n  });\n}));\npublic_1.router.post(`/user/change-password`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = req.body;\n  const getData = yield sercvice_1.UserService.changePassword(data);\n  const buildResponse = app_response_1.BuildResponse.get(getData);\n  res.json(buildResponse);\n})));\n// **** uploadImage\npublic_1.router.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsIm11bHRlcl8xIiwiX19pbXBvcnREZWZhdWx0Iiwic3RvcmFnZSIsImRlZmF1bHQiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWRJbWdQcm9maWxlIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwiY2hlY2tOaWNrTmFtZSIsInJlcyIsImZvcm1EYXRhIiwicGFyYW1zIiwibmlja25hbWUiLCJyZXN1bHQiLCJVc2VyU2VydmljZSIsImpzb24iLCJnZXRBbGxVc2VyRGF0YSIsImRhdGEiLCJlbWFpbCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldE9UUCIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwiZ2V0VmVyaWZ5Q29kZSIsInB1dCIsInVwZGF0ZVByb2ZpbGVQYXRpZW50IiwiYm9keSIsInN0YXR1cyIsImNvZGUiLCJmb3JnZXRQc3Nzd29yZCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwicG9zdCIsIl9fYXdhaXRlciIsImdldERhdGEiLCJjaGFuZ2VQYXNzd29yZCIsInNpbmdsZSIsImVycm9yIiwibWVzc2FnZSIsImltYWdlUGF0aCIsInBhdGgiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MyB9IGZyb20gXCIuLi8uLi9oZWxwZXIvY29tbW9uXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgVXNlclNlcnZpY2UgfSBmcm9tIFwiLi9zZXJjdmljZVwiO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgXCJwdWJsaWMvaW1hZ2VzXCIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBmaWxlLm9yaWdpbmFsbmFtZSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWRJbWdQcm9maWxlID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuXHJcbi8vICoqKioqIGNoZWNrTmlja05hbWVcclxucm91dGVyLmdldChcclxuICBcIi91c2VyL2NoZWNrTmlja05hbWUvOm5pY2tuYW1lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5wYXJhbXMubmlja25hbWU7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5jaGVja05pY2tOYW1lKGZvcm1EYXRhKTtcclxuICAgIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogZ2V0VXNlckluZm9cclxucm91dGVyLmdldChcclxuICBcIi9nZXRVc2VySW5mby86ZW1haWxcIixcclxuICBhc3luYyBmdW5jdGlvbiBnZXRBbGxVc2VyRGF0YShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSByZXEucGFyYW1zLmVtYWlsO1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VySW5mbyhkYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldCh1c2VyRGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfVxyXG4pO1xyXG4vLyAqKioqKiBjb25maXJtXHJcblxyXG4vLyAqKioqKiBnZXRPVFBcclxucm91dGVyLmdldChcclxuICBcIi91c2VyL2dldE9UUC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEucGFyYW1zLmVtYWlsO1xyXG4gICAgY29uc3QgdmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFZlcmlmeUNvZGUoZm9ybURhdGEsIHZlcmlmeV9jb2RlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKioqIHVwZGF0ZVByb2ZpbGVcclxucm91dGVyLnB1dChcclxuICBgL2FwaS91cGRhdGVQcm9maWxlUGF0aWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVQYXRpZW50KHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVByb2ZpbGVQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqKiBmb3Jnb3QtcGFzc3N3b3JkXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL3VzZXIvZm9yZ290LXBhc3Nzd29yZC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZm9yZ2V0UHNzc3dvcmQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWw7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlclNlcnZpY2Uuc2VuZEZyb2dldFBhc3N3b3JkVG9rZW4oZW1haWwpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvdXNlci9jaGFuZ2UtcGFzc3dvcmRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBnZXREYXRhID0gYXdhaXQgVXNlclNlcnZpY2UuY2hhbmdlUGFzc3dvcmQoZGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZ2V0RGF0YSk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiB1cGxvYWRJbWFnZVxyXG5yb3V0ZXIucG9zdChcclxuICBcIi9hZG1pbi91cGxvYWRJbWFnZVwiLFxyXG4gIHVwbG9hZEltZ1Byb2ZpbGUuc2luZ2xlKFwiZmlsZVwiKSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIGlmICghcmVxLmZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkZpbGUgdXBsb2FkZWQgc2VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaW1hZ2VQYXRoID0gcmVxLmZpbGUucGF0aDtcclxuICAgIHJlcy5qc29uKHsgaW1hZ2VQYXRoIH0pO1xyXG4gIH1cclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssUUFBQSxHQUFBQyxlQUFBLENBQUFOLE9BQUE7QUFFQSxNQUFNTyxPQUFPLEdBQUdGLFFBQUEsQ0FBQUcsT0FBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsRUFBRUEsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUM3QkEsRUFBRSxDQUFDLElBQUksRUFBRSxlQUFlLENBQUM7RUFDM0IsQ0FBQztFQUNEQyxRQUFRLEVBQUVBLENBQUNILEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEtBQUk7SUFDMUJBLEVBQUUsQ0FBQyxJQUFJLEVBQUVELElBQUksQ0FBQ0csWUFBWSxDQUFDO0VBQzdCO0NBQ0QsQ0FBQztBQUVGLE1BQU1DLGdCQUFnQixHQUFHLElBQUFYLFFBQUEsQ0FBQUcsT0FBTSxFQUFDO0VBQUVEO0FBQU8sQ0FBRSxDQUFDO0FBRTVDO0FBQ0FKLFFBQUEsQ0FBQWMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsK0JBQStCLEVBQy9CLElBQUFuQixlQUFBLENBQUFvQixZQUFZLEVBQUMsU0FBZUMsYUFBYUEsQ0FBQ1QsR0FBWSxFQUFFVSxHQUFhOztJQUNuRSxNQUFNQyxRQUFRLEdBQUdYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDQyxRQUFRO0lBQ3BDLE1BQU1DLE1BQU0sR0FBRyxNQUFNckIsVUFBQSxDQUFBc0IsV0FBVyxDQUFDTixhQUFhLENBQUNFLFFBQVEsQ0FBQztJQUN4REQsR0FBRyxDQUFDTSxJQUFJLENBQUNGLE1BQU0sQ0FBQztFQUNsQixDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBQ0Q7QUFDQXRCLFFBQUEsQ0FBQWMsTUFBTSxDQUFDQyxHQUFHLENBQ1IscUJBQXFCLEVBQ3JCLFNBQWVVLGNBQWNBLENBQUNqQixHQUFZLEVBQUVVLEdBQWE7O0lBQ3ZELE1BQU1RLElBQUksR0FBR2xCLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDTyxLQUFLO0lBQzdCLE1BQU1DLFFBQVEsR0FBRyxNQUFNM0IsVUFBQSxDQUFBc0IsV0FBVyxDQUFDTSxXQUFXLENBQUNILElBQUksQ0FBQztJQUNwRCxNQUFNSSxhQUFhLEdBQUcvQixjQUFBLENBQUFnQyxhQUFhLENBQUNoQixHQUFHLENBQUNhLFFBQVEsQ0FBQztJQUNqRCxPQUFPVixHQUFHLENBQUNNLElBQUksQ0FBQ00sYUFBYSxDQUFDO0VBQ2hDLENBQUM7Q0FBQSxDQUNGO0FBQ0Q7QUFFQTtBQUNBOUIsUUFBQSxDQUFBYyxNQUFNLENBQUNDLEdBQUcsQ0FDUixxQkFBcUIsRUFDckIsSUFBQW5CLGVBQUEsQ0FBQW9CLFlBQVksRUFBQyxTQUFlZ0IsTUFBTUEsQ0FBQ3hCLEdBQVksRUFBRVUsR0FBYTs7SUFDNUQsTUFBTUMsUUFBUSxHQUFHWCxHQUFHLENBQUNZLE1BQU0sQ0FBQ08sS0FBSztJQUNqQyxNQUFNTSxXQUFXLEdBQUcsSUFBQW5DLFFBQUEsQ0FBQW9DLGVBQWUsR0FBRTtJQUNyQyxNQUFNWixNQUFNLEdBQUcsTUFBTXJCLFVBQUEsQ0FBQXNCLFdBQVcsQ0FBQ1ksYUFBYSxDQUFDaEIsUUFBUSxFQUFFYyxXQUFXLENBQUM7SUFDckUsTUFBTUgsYUFBYSxHQUFHLE1BQU0vQixjQUFBLENBQUFnQyxhQUFhLENBQUNoQixHQUFHLENBQUNPLE1BQU0sQ0FBQztJQUNyREosR0FBRyxDQUFDTSxJQUFJLENBQUNNLGFBQWEsQ0FBQztFQUN6QixDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRUQ7QUFDQTlCLFFBQUEsQ0FBQWMsTUFBTSxDQUFDc0IsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBeEMsZUFBQSxDQUFBb0IsWUFBWSxFQUFDLFNBQWVxQixvQkFBb0JBLENBQUM3QixHQUFRLEVBQUVVLEdBQVE7O0lBQ2pFLE1BQU1DLFFBQVEsR0FBR1gsR0FBRyxDQUFDOEIsSUFBSTtJQUN6QixNQUFNaEIsTUFBTSxHQUFHLE1BQU1yQixVQUFBLENBQUFzQixXQUFXLENBQUNjLG9CQUFvQixDQUFDbEIsUUFBUSxDQUFDO0lBQy9ELE1BQU1XLGFBQWEsR0FBRyxNQUFNL0IsY0FBQSxDQUFBZ0MsYUFBYSxDQUFDaEIsR0FBRyxDQUFDTyxNQUFNLENBQUM7SUFDckQsT0FBT0osR0FBRyxDQUFDcUIsTUFBTSxDQUFDVCxhQUFhLENBQUNVLElBQUksQ0FBQyxDQUFDaEIsSUFBSSxDQUFDTSxhQUFhLENBQUM7RUFDM0QsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEO0FBRUE5QixRQUFBLENBQUFjLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLCtCQUErQixFQUMvQixJQUFBbkIsZUFBQSxDQUFBb0IsWUFBWSxFQUFDLFNBQWV5QixjQUFjQSxDQUFDakMsR0FBUSxFQUFFVSxHQUFROztJQUMzRCxNQUFNUyxLQUFLLEdBQUduQixHQUFHLENBQUNZLE1BQU0sQ0FBQ08sS0FBSztJQUM5QixNQUFNRCxJQUFJLEdBQUcsTUFBTXpCLFVBQUEsQ0FBQXNCLFdBQVcsQ0FBQ21CLHVCQUF1QixDQUFDZixLQUFLLENBQUM7SUFDN0QsTUFBTUcsYUFBYSxHQUFHLE1BQU0vQixjQUFBLENBQUFnQyxhQUFhLENBQUNoQixHQUFHLENBQUNXLElBQUksQ0FBQztJQUNuRFIsR0FBRyxDQUFDTSxJQUFJLENBQUNNLGFBQWEsQ0FBQztFQUN6QixDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRUQ5QixRQUFBLENBQUFjLE1BQU0sQ0FBQzZCLElBQUksQ0FDVCx1QkFBdUIsRUFDdkIsSUFBQS9DLGVBQUEsQ0FBQW9CLFlBQVksRUFBQyxDQUFPUixHQUFZLEVBQUVVLEdBQWEsS0FBSTBCLFNBQUE7RUFDakQsTUFBTWxCLElBQUksR0FBR2xCLEdBQUcsQ0FBQzhCLElBQUk7RUFDckIsTUFBTU8sT0FBTyxHQUFHLE1BQU01QyxVQUFBLENBQUFzQixXQUFXLENBQUN1QixjQUFjLENBQUNwQixJQUFJLENBQUM7RUFDdEQsTUFBTUksYUFBYSxHQUFHL0IsY0FBQSxDQUFBZ0MsYUFBYSxDQUFDaEIsR0FBRyxDQUFDOEIsT0FBTyxDQUFDO0VBQ2hEM0IsR0FBRyxDQUFDTSxJQUFJLENBQUNNLGFBQWEsQ0FBQztBQUN6QixDQUFDLEVBQUMsQ0FDSDtBQUVEO0FBQ0E5QixRQUFBLENBQUFjLE1BQU0sQ0FBQzZCLElBQUksQ0FDVCxvQkFBb0IsRUFDcEI5QixnQkFBZ0IsQ0FBQ2tDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFDL0IsQ0FBQ3ZDLEdBQUcsRUFBRVUsR0FBRyxLQUFJO0VBQ1gsSUFBSSxDQUFDVixHQUFHLENBQUNDLElBQUksRUFBRTtJQUNiLE9BQU9TLEdBQUcsQ0FBQ3FCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2YsSUFBSSxDQUFDO01BQUV3QixLQUFLLEVBQUU7SUFBa0IsQ0FBRSxDQUFDO0VBQzVEO0VBQ0E5QixHQUFHLENBQUNNLElBQUksQ0FBQztJQUNQeUIsT0FBTyxFQUFFLDRCQUE0QjtJQUNyQ3RDLFFBQVEsRUFBRUgsR0FBRyxDQUFDQyxJQUFJLENBQUNFO0dBQ3BCLENBQUM7RUFDRixNQUFNdUMsU0FBUyxHQUFHMUMsR0FBRyxDQUFDQyxJQUFJLENBQUMwQyxJQUFJO0VBQy9CakMsR0FBRyxDQUFDTSxJQUFJLENBQUM7SUFBRTBCO0VBQVMsQ0FBRSxDQUFDO0FBQ3pCLENBQUMsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","common_1","app_response_1","public_1","sercvice_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","checkNickName","res","formData","params","nickname","result","UserService","json","getAllUserData","data","email","userData","getUserInfo","buildResponse","BuildResponse","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfilePatient","body","status","code","forgetPsssword","sendFrogetPasswordToken","post","__awaiter","getData","changePassword","single","error","message","imagePath","path"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { UserService } from \"./sercvice\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// ***** checkNickName\r\nrouter.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nrouter.get(\r\n  \"/getUserInfo/:email\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    const data = req.params.email;\r\n    const userData = await UserService.getUserInfo(data);\r\n    const buildResponse = BuildResponse.get(userData);\r\n    return res.json(buildResponse);\r\n  }\r\n);\r\n// ***** confirm\r\n\r\n// ***** getOTP\r\nrouter.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** updateProfile\r\nrouter.put(\r\n  `/api/updateProfilePatient`,\r\n  asyncHandler(async function updateProfilePatient(req: any, res: any) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfilePatient(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\nrouter.get(\r\n  \"/user/forgot-passsword/:email\",\r\n  asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n    const email = req.params.email;\r\n    const data = await UserService.sendFrogetPasswordToken(email);\r\n    const buildResponse = await BuildResponse.get(data);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/user/change-password`,\r\n  asyncHandler(async (req: Request, res: Response) => {\r\n    const data = req.body;\r\n    const getData = await UserService.changePassword(data);\r\n    const buildResponse = BuildResponse.get(getData);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** uploadImage\r\nrouter.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserService = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst common_1 = require(\"../../helper/common\");\nconst use_validation_1 = require(\"../../helper/use_validation\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst schema_1 = require(\"./schema\");\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getUserInfo)(email);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      // SendMail.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getNewPassword = yield (0, db_1.comparePassword)(formData.email);\n      const pass = getNewPassword[0].password;\n      const getComparePassword = yield bcrypt_1.default.compare(formData.oldPassword, pass);\n      if (getComparePassword) {\n        const getNewPassword = yield (0, db_1.changePassword)(formData);\n        return getNewPassword;\n      }\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfilePatient(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.token_verify = tokenVerify;\n      const data = yield (0, db_1.updateProfilePatient)(userData);\n      if (data) {\n        return data;\n      } else {\n        return null;\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.ResponseError.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.useValidation)(schema_1.checkEmailSchema, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.UserService = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJjb21tb25fMSIsInVzZV92YWxpZGF0aW9uXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiZGJfMSIsInNjaGVtYV8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsImRhdGEiLCJtZXNzYWdlIiwidmFsaWRhdGVVc2VyRW1haWwiLCJjaGVja1VzZXJFeGlzdCIsImxlbmd0aCIsImdldFZlcmlmeUNvZGUiLCJ1c2VyRGF0YSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiY2hhbmdlUGFzc3dvcmQiLCJmb3JtRGF0YSIsImdldE5ld1Bhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkIiwicGFzcyIsInBhc3N3b3JkIiwiZ2V0Q29tcGFyZVBhc3N3b3JkIiwiY29tcGFyZSIsIm9sZFBhc3N3b3JkIiwidXBkYXRlUHJvZmlsZVBhdGllbnQiLCJnZW5lcmF0ZVRva2VuIiwiY29kZSIsImdldFVuaXF1ZUNvZGV2MiIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInRva2VuX3ZlcmlmeSIsImNoZWNrTmlja05hbWUiLCJuaWNrTmFtZSIsImdldERhdGEiLCJSZXNwb25zZUVycm9yIiwiQmFkUmVxdWVzdCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwidXNlVmFsaWRhdGlvbiIsImNoZWNrRW1haWxTY2hlbWEiLCJjdXJyZW50VXNlciIsInN0YXR1cyIsImVtYWlsQ29uZmlybWVkIiwic2lnbnVwU3RhdHVzIiwiaXNBY3RpdmUiLCJuZXdDb2RlIiwidXBkYXRlVXNlclZlcmlmeUNvZGUiLCJpZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zZXJjdmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgeyB1c2VWYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgeyBSZXNwb25zZUVycm9yIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi90eXBlcy91c2VyXCI7XHJcbmltcG9ydCB7XHJcbiAgY2hhbmdlUGFzc3dvcmQsXHJcbiAgY2hlY2tOaWNrTmFtZSxcclxuICBjaGVja1VzZXJFeGlzdCxcclxuICBjb21wYXJlUGFzc3dvcmQsXHJcbiAgZ2V0T1RQLFxyXG4gIGdldFVzZXJJbmZvLFxyXG4gIHVwZGF0ZVByb2ZpbGVQYXRpZW50LFxyXG4gIHVwZGF0ZVVzZXJWZXJpZnlDb2RlXHJcbn0gZnJvbSBcIi4vZGJcIjtcclxuaW1wb3J0IHsgY2hlY2tFbWFpbFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5cclxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyAxIERheXNcclxuXHJcbmNvbnN0IGV4cGlyZXNJbiA9IG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwO1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJTZXJ2aWNlIHtcclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VySW5mbyhlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0VXNlckluZm8oZW1haWwpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB2YWxpZGF0ZVVzZXJFbWFpbChlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tVc2VyRXhpc3QoZW1haWwpO1xyXG5cclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gZGF0YVswXSBhcyBVc2VyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGZvcm1EYXRhXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRWZXJpZnlDb2RlKHVzZXJEYXRhOiBhbnksIHRva2VuVmVyaWZ5OiBhbnkpIHtcclxuICAgIC8vIGNvbnN0IHVzZXJEYXRhID0gdXNlVmFsaWRhdGlvbihzY2hlbWFVc2VyLmNvbmZpcm1FbWFpbCx1c2VyRGF0YSlcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldE9UUCh1c2VyRGF0YSwgdG9rZW5WZXJpZnkpO1xyXG4gICAgLy8gU2VuZE1haWwuQWNjb3VudFJlZ2lzdGVyKHJlc3VsdCk7XHJcblxyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBlbWFpbFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGE6IFVzZXIpIHtcclxuICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKGZvcm1EYXRhLmVtYWlsKTtcclxuICAgIGNvbnN0IHBhc3MgPSBnZXROZXdQYXNzd29yZFswXS5wYXNzd29yZDtcclxuICAgIGNvbnN0IGdldENvbXBhcmVQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGZvcm1EYXRhLm9sZFBhc3N3b3JkLCBwYXNzKTtcclxuXHJcbiAgICBpZiAoZ2V0Q29tcGFyZVBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnN0IGdldE5ld1Bhc3N3b3JkID0gYXdhaXQgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGEpO1xyXG4gICAgICByZXR1cm4gZ2V0TmV3UGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB1c2VyRGF0YVxyXG4gICAqL1xyXG5cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVQcm9maWxlUGF0aWVudCh1c2VyRGF0YTogVXNlcikge1xyXG4gICAgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IHtcclxuICAgICAgY29kZTogZ2V0VW5pcXVlQ29kZXYyKCksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRva2VuVmVyaWZ5ID0gand0LnNpZ24oXHJcbiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGVUb2tlbikpLFxyXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcclxuICAgICAge1xyXG4gICAgICAgIGV4cGlyZXNJbixcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB1c2VyRGF0YS52ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgdXNlckRhdGEudG9rZW5fdmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlUHJvZmlsZVBhdGllbnQodXNlckRhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGRhdGFcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja05pY2tOYW1lKG5pY2tOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGdldERhdGEgPSBhd2FpdCBjaGVja05pY2tOYW1lKCk7XHJcbiAgICBpZiAoZ2V0RGF0YVswXS5uaWNrTmFtZSA9PT0gbmlja05hbWUpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIlRoZSBuaWNrTmFtZSBpcyBhbHJlYXkgZXhpc3QhXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbihlbWFpbDogc3RyaW5nKSB7XHJcbiAgICB1c2VWYWxpZGF0aW9uKGNoZWNrRW1haWxTY2hlbWEsIHsgZW1haWw6IGVtYWlsIH0pO1xyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS52YWxpZGF0ZVVzZXJFbWFpbChlbWFpbCk7XHJcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSByZXR1cm4geyBzdGF0dXM6IDEsIG1lc3NhZ2U6IFwiZW1haWwgaXMgbm90IHZhbGlkICFcIiB9O1xyXG5cclxuICAgIGlmIChjdXJyZW50VXNlci5lbWFpbENvbmZpcm1lZCA9PT0gMClcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXM6IDIsXHJcbiAgICAgICAgbWVzc2FnZTogXCJ0aGlzIGVtYWlsIGFkZHJlc3MgaXMgbm90IGNvbmZpcm1lZCB5ZXQgIVwiLFxyXG4gICAgICB9O1xyXG4gICAgaWYgKGN1cnJlbnRVc2VyLnNpZ251cFN0YXR1cyA9PT0gMClcclxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiAzLCBtZXNzYWdlOiBcInNpZ251cCBwcm9jZXNzIGlzIG5vdCBjb21wbGV0ZSB5ZXQgIVwiIH07XHJcbiAgICAvLyBUT0RPIGZvciBmaXggaXNBY3RpdmUgdG8gYm9vbGVhblxyXG4gICAgaWYgKGN1cnJlbnRVc2VyLmlzQWN0aXZlID09PSAwKVxyXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDQsIG1lc3NhZ2U6IFwidGhpcyBhY2NvdW50IGlzIG5vdCBhY3RpdmUgIVwiIH07XHJcbiAgICBjb25zdCBuZXdDb2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XHJcbiAgICBhd2FpdCB1cGRhdGVVc2VyVmVyaWZ5Q29kZShjdXJyZW50VXNlci5pZCwgbmV3Q29kZSk7XHJcbiAgICAvLyBzZW5kIGZvcmdvdCBwYXNzIHRva2VuIGNvZGVcclxuICAgIC8vIFNlbmRNYWlsLnNlbmRSZXNldFBhc3N3b3JkRW1haWwoY3VycmVudFVzZXIsIG5ld0NvZGUpO1xyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiA1LCBtZXNzYWdlOiBcImNvZGUgaGFzIGJlZW4gc2VuZCBzdWNjZXNzZnVsbHkgIVwiIH07XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFB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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","jsonwebtoken_1","ms_1","common_1","use_validation_1","response_error_1","db_1","schema_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","data","message","validateUserEmail","checkUserExist","length","getVerifyCode","userData","tokenVerify","result","getOTP","changePassword","formData","getNewPassword","comparePassword","pass","password","getComparePassword","compare","oldPassword","updateProfilePatient","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","token_verify","checkNickName","nickName","getData","ResponseError","BadRequest","sendFrogetPasswordToken","useValidation","checkEmailSchema","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","id","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/user/sercvice.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport { useValidation } from \"../../helper/use_validation\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { User } from \"../../types/user\";\r\nimport {\r\n  changePassword,\r\n  checkNickName,\r\n  checkUserExist,\r\n  comparePassword,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfilePatient,\r\n  updateUserVerifyCode\r\n} from \"./db\";\r\nimport { checkEmailSchema } from \"./schema\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nexport class UserService {\r\n\r\n  public static async getUserInfo(email: string) {\r\n    const data = await getUserInfo(email);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    // SendMail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(formData: User) {\r\n    const getNewPassword = await comparePassword(formData.email);\r\n    const pass = getNewPassword[0].password;\r\n    const getComparePassword = await bcrypt.compare(formData.oldPassword, pass);\r\n\r\n    if (getComparePassword) {\r\n      const getNewPassword = await changePassword(formData);\r\n      return getNewPassword;\r\n    }\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n\r\n\r\n  public static async updateProfilePatient(userData: User) {\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.token_verify = tokenVerify;\r\n    const data = await updateProfilePatient(userData);\r\n    if (data) {\r\n      return data\r\n    } else {\r\n      return null\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(checkEmailSchema, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\user\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkUserExist = checkUserExist;\nexports.confirmEmail = confirmEmail;\nexports.getOTP = getOTP;\nexports.comparePassword = comparePassword;\nexports.updateProfilePatient = updateProfilePatient;\nexports.checkNickName = checkNickName;\nexports.updateUserVerifyCode = updateUserVerifyCode;\nexports.changePassword = changePassword;\nexports.getUserInfo = getUserInfo;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT id,email FROM  ${mysql_1.coreSchema}.users\n        WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT * \n      FROM ${mysql_1.coreSchema}.users\n      WHERE email=? AND deletedAt IS NULL\n      `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n          UPDATE ${mysql_1.coreSchema}.users\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\n          WHERE email =?\n          `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\n      WHERE email=?\n    `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nfunction comparePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT password FROM ${mysql_1.coreSchema}.users\n    WHERE email=?\n    `, {\n      values: [data]\n    });\n    return result;\n  });\n}\nfunction updateProfilePatient(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      // Perform the update query\n      yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET \n        first_name = ?,\n        last_name = ?,\n        national_code = ?,\n        date_of_birth = ?,\n        gender = ?,\n        city = ?,\n        phone = ?,\n        verify_code = ?,\n        token_verify = ?\n      WHERE id = ?;\n    `, {\n        values: [data.first_name, data.last_name, data.national_code, data.date_of_birth, data.gender, data.city, data.phone, data.verify_code, data.token_verify, data.id]\n      });\n      // Fetch the updated user profile\n      const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients WHERE id = ?`, {\n        values: [data.id]\n      });\n      if (result.affectedRows > 0) {\n        return `This ID ${data.id} updated successfully`;\n      } else {\n        return `No record found with ID ${data.id}`;\n      }\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer('Could not update patientProfile');\n    }\n  });\n}\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users`);\n    return getData;\n  });\n}\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET verify_code=?,updatedAt=?\n      WHERE id=?\n      `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n        SELECT id,email,verify_code\n        FROM ${mysql_1.coreSchema}.users\n        WHERE id=?\n        `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nfunction changePassword(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      newPassword\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      newPassword,\n      confirmPassword\n    };\n    const validPassword = schema_1.createPasswordSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.users\n      SET password=?,updatedAt=?\n      WHERE email=?\n      `, {\n      values: [hash, new Date(), data.email]\n    });\n    return result;\n  });\n}\n// export async function getUserInfo(email: string) {\n//   const data = await query<RowDataPacket[]>(\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\n//     {\n//       values: [email],\n//     }\n//   );\n//   if (data) return data;\n// }\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`\n     SELECT \n       u.*, \n       c.comment, \n       c.created_at AS comment_created_at\n     FROM ${mysql_1.coreSchema}.users u\n     LEFT JOIN \n     ${mysql_1.coreSchema}.comments c\n     ON \n     u.id = c.id\n     WHERE \n     u.email =?\n     LIMIT 1;\n\n    `, {\n      values: [email]\n    });\n    if (!data || data.length === 0) {\n      return null; // Return null if no data is found\n    }\n    const userMap = new Map();\n    data.forEach(row => {\n      if (!userMap.has(row.id)) {\n        userMap.set(row.id, Object.assign(Object.assign({}, data), {\n          comments: []\n        }));\n      }\n      if (row.comment_text) {\n        userMap.get(row.id).comments.push({\n          text: row.comment_text,\n          createdAt: row.comment_created_at\n        });\n      }\n    });\n    return Array.from(userMap.values());\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY2hlY2tVc2VyRXhpc3QiLCJjb25maXJtRW1haWwiLCJnZXRPVFAiLCJjb21wYXJlUGFzc3dvcmQiLCJ1cGRhdGVQcm9maWxlUGF0aWVudCIsImNoZWNrTmlja05hbWUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsImNoYW5nZVBhc3N3b3JkIiwiZ2V0VXNlckluZm8iLCJteXNxbF8xIiwicmVxdWlyZSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsImJjcnlwdF8xIiwiX19pbXBvcnREZWZhdWx0IiwiZW1haWwiLCJ1c2VyIiwicXVlcnkiLCJjb3JlU2NoZW1hIiwidmFsdWVzIiwiZGF0YSIsInJlc3VsdCIsImxlbmd0aCIsImlzU3VjY2Vzc2Z1bGwiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZW1haWxDb25maXJtZWQiLCJzaWdudXBTdGF0dXMiLCJEYXRlIiwidmVyaWZ5X2NvZGUiLCJjb2RlIiwic2hvd1RvVXNlciIsIm1lc3NhZ2VDb2RlIiwibWVzc2FnZUtpbmQiLCJ0b2tlblZlcmlmeSIsInVwZGF0ZURhdGEiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibmF0aW9uYWxfY29kZSIsImRhdGVfb2ZfYmlydGgiLCJnZW5kZXIiLCJjaXR5IiwicGhvbmUiLCJ0b2tlbl92ZXJpZnkiLCJpZCIsImFmZmVjdGVkUm93cyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIlJlc3BvbnNlRXJyb3IiLCJJbnRlcm5hbFNlcnZlciIsImdldERhdGEiLCJ1c2VySWQiLCJuZXdDb2RlIiwibmV3UGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaCIsImRlZmF1bHQiLCJoYXNoU3luYyIsInVzZXJNYXAiLCJNYXAiLCJmb3JFYWNoIiwicm93IiwiaGFzIiwic2V0IiwiT2JqZWN0IiwiYXNzaWduIiwiY29tbWVudHMiLCJjb21tZW50X3RleHQiLCJnZXQiLCJwdXNoIiwidGV4dCIsImNyZWF0ZWRBdCIsImNvbW1lbnRfY3JlYXRlZF9hdCIsIkFycmF5IiwiZnJvbSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHVzZXJcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBDb25maXJtRW1haWwgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHsgY3JlYXRlUGFzc3dvcmRTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tVc2VyRXhpc3QoZW1haWw6IHN0cmluZyk6IFByb21pc2U8Um93RGF0YVBhY2tldFtdPiB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUIGlkLGVtYWlsIEZST00gICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBlbWFpbD0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgU0VMRUNUICogXHJcbiAgICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBXSEVSRSBlbWFpbD0/IEFORCBkZWxldGVkQXQgSVMgTlVMTFxyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIGlmIChyZXN1bHQubGVuZ3RoIDwgMSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwidXNlciBub3QgZm91bmQhXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIGNvbnN0IHVzZXIgPSByZXN1bHRbMF0gYXMgVXNlcjtcclxuICBpZiAodXNlci5lbWFpbCAhPT0gZGF0YS5lbWFpbClcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZW1haWwgaXMgbm90IGNvcnJlY3RcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgaWYgKHVzZXIuZW1haWxDb25maXJtZWQpIHtcclxuICAgIGlmICh1c2VyLnNpZ251cFN0YXR1cyA9PT0gMSkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBcclxuICAgICAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgICAgICBTRVQgc2lnbnVwU3RhdHVzPT8sZW1haWxDb25maXJtZWQ9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICAgICAgV0hFUkUgZW1haWwgPT9cclxuICAgICAgICAgIGAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFsdWVzOiBbMSwgMSwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCJlbWFpbCBhbHJlYWR5IGNvbmZpcm1lZFwiLFxyXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcclxuICB9XHJcbiAgaWYgKHVzZXIudmVyaWZ5X2NvZGUgIT09IGRhdGEudmVyaWZ5X2NvZGUpXHJcbiAgICByZXR1cm4geyBzdGF0dXM6IGZhbHNlLCBtZXNzYWdlOiBcImNvZGUgaXMgbm90IGNvcnJlY3RcIiwgY29kZTogNDAwIH07XHJcbiAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgU0VUIGVtYWlsQ29uZmlybWVkPTEsIHNpZ251cFN0YXR1cz0yLHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ldyBEYXRlKCksIGRhdGEuZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlzU3VjY2Vzc2Z1bGw6IHRydWUsXHJcbiAgICBzaG93VG9Vc2VyOiB0cnVlLFxyXG4gICAgbWVzc2FnZUNvZGU6IFwiTVNHXzAxXCIsXHJcbiAgICBtZXNzYWdlS2luZDogMSxcclxuICAgIG1lc3NhZ2U6IFwiZW1haWwgY29uZmlybWVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gIH0gYXMgQXBwUmVzcG9uc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPVFAoZW1haWw6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gIGNvbnN0IHVwZGF0ZURhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFVQREFURSAgJHtjb3JlU2NoZW1hfS51c2VycyBTRVQgdmVyaWZ5X2NvZGU9PyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFt0b2tlblZlcmlmeSwgZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzIFdIRVJFIGVtYWlsID0gP2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHRbMF0gYXMgVXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXBhcmVQYXNzd29yZChkYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgcGFzc3dvcmQgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICBXSEVSRSBlbWFpbD0/XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlUGF0aWVudChkYXRhOiBVc2VyKTogUHJvbWlzZTxhbnk+IHtcclxuICB0cnkge1xyXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlIHF1ZXJ5XHJcbiAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBTRVQgXHJcbiAgICAgICAgZmlyc3RfbmFtZSA9ID8sXHJcbiAgICAgICAgbGFzdF9uYW1lID0gPyxcclxuICAgICAgICBuYXRpb25hbF9jb2RlID0gPyxcclxuICAgICAgICBkYXRlX29mX2JpcnRoID0gPyxcclxuICAgICAgICBnZW5kZXIgPSA/LFxyXG4gICAgICAgIGNpdHkgPSA/LFxyXG4gICAgICAgIHBob25lID0gPyxcclxuICAgICAgICB2ZXJpZnlfY29kZSA9ID8sXHJcbiAgICAgICAgdG9rZW5fdmVyaWZ5ID0gP1xyXG4gICAgICBXSEVSRSBpZCA9ID87XHJcbiAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBkYXRhLmZpcnN0X25hbWUsXHJcbiAgICAgICAgICBkYXRhLmxhc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEubmF0aW9uYWxfY29kZSxcclxuICAgICAgICAgIGRhdGEuZGF0ZV9vZl9iaXJ0aCxcclxuICAgICAgICAgIGRhdGEuZ2VuZGVyLFxyXG4gICAgICAgICAgZGF0YS5jaXR5LFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIGRhdGEudmVyaWZ5X2NvZGUsXHJcbiAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcclxuICAgICAgICAgIGRhdGEuaWQsXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBGZXRjaCB0aGUgdXBkYXRlZCB1c2VyIHByb2ZpbGVcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzIFdIRVJFIGlkID0gP2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtkYXRhLmlkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXN1bHQuYWZmZWN0ZWRSb3dzID4gMCkge1xyXG4gICAgICByZXR1cm4gYFRoaXMgSUQgJHtkYXRhLmlkfSB1cGRhdGVkIHN1Y2Nlc3NmdWxseWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYE5vIHJlY29yZCBmb3VuZCB3aXRoIElEICR7ZGF0YS5pZH1gO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKCdDb3VsZCBub3QgdXBkYXRlIHBhdGllbnRQcm9maWxlJylcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUoKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCBnZXREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc2ApO1xyXG4gIHJldHVybiBnZXREYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICBTRVQgdmVyaWZ5X2NvZGU9Pyx1cGRhdGVkQXQ9P1xyXG4gICAgICBXSEVSRSBpZD0/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgICBTRUxFQ1QgaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgICBXSEVSRSBpZD0/XHJcbiAgICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdXNlcklkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyWzBdIGFzIENyZWF0ZVVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChkYXRhOiBhbnkpIHtcclxuICBjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IHsgY29uZmlybVBhc3N3b3JkIH0gPSBkYXRhO1xyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gY3JlYXRlUGFzc3dvcmRTY2hlbWEudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFNFVCBwYXNzd29yZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgIFdIRVJFIGVtYWlsPT9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaGFzaCwgbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4vLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbD0/YCxcclxuLy8gICAgIHtcclxuLy8gICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4vLyAgICAgfVxyXG4vLyAgICk7XHJcbi8vICAgaWYgKGRhdGEpIHJldHVybiBkYXRhO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgIFNFTEVDVCBcclxuICAgICAgIHUuKiwgXHJcbiAgICAgICBjLmNvbW1lbnQsIFxyXG4gICAgICAgYy5jcmVhdGVkX2F0IEFTIGNvbW1lbnRfY3JlYXRlZF9hdFxyXG4gICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyB1XHJcbiAgICAgTEVGVCBKT0lOIFxyXG4gICAgICR7Y29yZVNjaGVtYX0uY29tbWVudHMgY1xyXG4gICAgIE9OIFxyXG4gICAgIHUuaWQgPSBjLmlkXHJcbiAgICAgV0hFUkUgXHJcbiAgICAgdS5lbWFpbCA9P1xyXG4gICAgIExJTUlUIDE7XHJcblxyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIG5vIGRhdGEgaXMgZm91bmRcclxuICB9XHJcblxyXG4gIGNvbnN0IHVzZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xyXG5cclxuICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgaWYgKCF1c2VyTWFwLmhhcyhyb3cuaWQpKSB7XHJcbiAgICAgIHVzZXJNYXAuc2V0KHJvdy5pZCwge1xyXG4gICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93LmNvbW1lbnRfdGV4dCkge1xyXG4gICAgICB1c2VyTWFwLmdldChyb3cuaWQpLmNvbW1lbnRzLnB1c2goe1xyXG4gICAgICAgIHRleHQ6IHJvdy5jb21tZW50X3RleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY29tbWVudF9jcmVhdGVkX2F0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbSh1c2VyTWFwLnZhbHVlcygpKTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQUEsT0FBQSxDQUFBQyxjQUFBLEdBQUFBLGNBQUE7QUFXQUQsT0FBQSxDQUFBRSxZQUFBLEdBQUFBLFlBQUE7QUErREFGLE9BQUEsQ0FBQUcsTUFBQSxHQUFBQSxNQUFBO0FBaUJBSCxPQUFBLENBQUFJLGVBQUEsR0FBQUEsZUFBQTtBQWFBSixPQUFBLENBQUFLLG9CQUFBLEdBQUFBLG9CQUFBO0FBc0RBTCxPQUFBLENBQUFNLGFBQUEsR0FBQUEsYUFBQTtBQUtBTixPQUFBLENBQUFPLG9CQUFBLEdBQUFBLG9CQUFBO0FBd0JBUCxPQUFBLENBQUFRLGNBQUEsR0FBQUEsY0FBQTtBQWtDQVIsT0FBQSxDQUFBUyxXQUFBLEdBQUFBLFdBQUE7QUFyT0EsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsTUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUdBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFFBQUEsR0FBQUMsZUFBQSxDQUFBSixPQUFBO0FBRUEsU0FBc0JWLGNBQWNBLENBQUNlLEtBQWE7O0lBQ2hELE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFQLE9BQUEsQ0FBQVEsS0FBSyxFQUN0Qix5QkFBeUJSLE9BQUEsQ0FBQVMsVUFBVTtzQkFDakIsRUFDbEI7TUFDRUMsTUFBTSxFQUFFLENBQUNKLEtBQUs7S0FDZixDQUNGO0lBQ0QsT0FBT0MsSUFBSTtFQUNiLENBQUM7O0FBRUQsU0FBc0JmLFlBQVlBLENBQUNtQixJQUFrQjs7SUFDbkQsTUFBTUMsTUFBTSxHQUFHLE1BQU0sSUFBQVosT0FBQSxDQUFBUSxLQUFLLEVBQ3hCOzthQUVTUixPQUFBLENBQUFTLFVBQVU7O09BRWhCLEVBQ0g7TUFDRUMsTUFBTSxFQUFFLENBQUNDLElBQUksQ0FBQ0wsS0FBSztLQUNwQixDQUNGO0lBQ0QsSUFBSU0sTUFBTSxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxFQUNuQixPQUFPO01BQ0xDLGFBQWEsRUFBRSxLQUFLO01BQ3BCQyxNQUFNLEVBQUUsQ0FBQztNQUNUQyxPQUFPLEVBQUU7S0FDSztJQUNsQixNQUFNVCxJQUFJLEdBQUdLLE1BQU0sQ0FBQyxDQUFDLENBQVM7SUFDOUIsSUFBSUwsSUFBSSxDQUFDRCxLQUFLLEtBQUtLLElBQUksQ0FBQ0wsS0FBSyxFQUMzQixPQUFPO01BQ0xRLGFBQWEsRUFBRSxLQUFLO01BQ3BCQyxNQUFNLEVBQUUsQ0FBQztNQUNUQyxPQUFPLEVBQUU7S0FDSztJQUNsQixJQUFJVCxJQUFJLENBQUNVLGNBQWMsRUFBRTtNQUN2QixJQUFJVixJQUFJLENBQUNXLFlBQVksS0FBSyxDQUFDLEVBQUU7UUFDM0IsTUFBTU4sTUFBTSxHQUFHLE1BQU0sSUFBQVosT0FBQSxDQUFBUSxLQUFLLEVBQ3hCO21CQUNXUixPQUFBLENBQUFTLFVBQVU7OztXQUdsQixFQUNIO1VBQ0VDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSVMsSUFBSSxFQUFFLEVBQUVSLElBQUksQ0FBQ0wsS0FBSztTQUN0QyxDQUNGO01BQ0g7TUFDQSxPQUFPO1FBQ0xRLGFBQWEsRUFBRSxJQUFJO1FBQ25CRSxPQUFPLEVBQUU7T0FDSztJQUNsQjtJQUNBLElBQUlULElBQUksQ0FBQ2EsV0FBVyxLQUFLVCxJQUFJLENBQUNTLFdBQVcsRUFDdkMsT0FBTztNQUFFTCxNQUFNLEVBQUUsS0FBSztNQUFFQyxPQUFPLEVBQUUscUJBQXFCO01BQUVLLElBQUksRUFBRTtJQUFHLENBQUU7SUFDckUsTUFBTSxJQUFBckIsT0FBQSxDQUFBUSxLQUFLLEVBQ1Q7ZUFDV1IsT0FBQSxDQUFBUyxVQUFVOzs7S0FHcEIsRUFDRDtNQUNFQyxNQUFNLEVBQUUsQ0FBQyxJQUFJUyxJQUFJLEVBQUUsRUFBRVIsSUFBSSxDQUFDTCxLQUFLO0tBQ2hDLENBQ0Y7SUFDRCxPQUFPO01BQ0xRLGFBQWEsRUFBRSxJQUFJO01BQ25CUSxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsV0FBVyxFQUFFLFFBQVE7TUFDckJDLFdBQVcsRUFBRSxDQUFDO01BQ2RSLE9BQU8sRUFBRTtLQUNLO0VBQ2xCLENBQUM7O0FBRUQsU0FBc0J2QixNQUFNQSxDQUFDYSxLQUFVLEVBQUVtQixXQUFnQjs7SUFDdkQsTUFBTUMsVUFBVSxHQUFHLE1BQU0sSUFBQTFCLE9BQUEsQ0FBQVEsS0FBSyxFQUM1QixXQUFXUixPQUFBLENBQUFTLFVBQVUsMENBQTBDLEVBQy9EO01BQ0VDLE1BQU0sRUFBRSxDQUFDZSxXQUFXLEVBQUVuQixLQUFLO0tBQzVCLENBQ0Y7SUFFRCxNQUFNTSxNQUFNLEdBQUcsTUFBTSxJQUFBWixPQUFBLENBQUFRLEtBQUssRUFDeEIsaUJBQWlCUixPQUFBLENBQUFTLFVBQVUsd0JBQXdCLEVBQ25EO01BQ0VDLE1BQU0sRUFBRSxDQUFDSixLQUFLO0tBQ2YsQ0FDRjtJQUNELE9BQU9NLE1BQU0sQ0FBQyxDQUFDLENBQVM7RUFDMUIsQ0FBQzs7QUFFRCxTQUFzQmxCLGVBQWVBLENBQUNpQixJQUFTOztJQUM3QyxNQUFNQyxNQUFNLEdBQUcsTUFBTSxJQUFBWixPQUFBLENBQUFRLEtBQUssRUFDeEI7MkJBQ3VCUixPQUFBLENBQUFTLFVBQVU7O0tBRWhDLEVBQ0Q7TUFDRUMsTUFBTSxFQUFFLENBQUNDLElBQUk7S0FDZCxDQUNGO0lBQ0QsT0FBT0MsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0JqQixvQkFBb0JBLENBQUNnQixJQUFVOztJQUNuRCxJQUFJO01BQ0Y7TUFDQSxNQUFNLElBQUFYLE9BQUEsQ0FBQVEsS0FBSyxFQUNUO2VBQ1NSLE9BQUEsQ0FBQVMsVUFBVTs7Ozs7Ozs7Ozs7O0tBWXBCLEVBQ0M7UUFDRUMsTUFBTSxFQUFFLENBQ05DLElBQUksQ0FBQ2dCLFVBQVUsRUFDZmhCLElBQUksQ0FBQ2lCLFNBQVMsRUFDZGpCLElBQUksQ0FBQ2tCLGFBQWEsRUFDbEJsQixJQUFJLENBQUNtQixhQUFhLEVBQ2xCbkIsSUFBSSxDQUFDb0IsTUFBTSxFQUNYcEIsSUFBSSxDQUFDcUIsSUFBSSxFQUNUckIsSUFBSSxDQUFDc0IsS0FBSyxFQUNWdEIsSUFBSSxDQUFDUyxXQUFXLEVBQ2hCVCxJQUFJLENBQUN1QixZQUFZLEVBQ2pCdkIsSUFBSSxDQUFDd0IsRUFBRTtPQUVWLENBQ0Y7TUFFRDtNQUNBLE1BQU12QixNQUFNLEdBQUcsTUFBTSxJQUFBWixPQUFBLENBQUFRLEtBQUssRUFDeEIsaUJBQWlCUixPQUFBLENBQUFTLFVBQVUsd0JBQXdCLEVBQ25EO1FBQ0VDLE1BQU0sRUFBRSxDQUFDQyxJQUFJLENBQUN3QixFQUFFO09BQ2pCLENBQ0Y7TUFDRCxJQUFJdkIsTUFBTSxDQUFDd0IsWUFBWSxHQUFHLENBQUMsRUFBRTtRQUMzQixPQUFPLFdBQVd6QixJQUFJLENBQUN3QixFQUFFLHVCQUF1QjtNQUNsRCxDQUFDLE1BQU07UUFDTCxPQUFPLDJCQUEyQnhCLElBQUksQ0FBQ3dCLEVBQUUsRUFBRTtNQUM3QztJQUNGLENBQUMsQ0FBQyxPQUFPRSxLQUFLLEVBQUU7TUFDZEMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLEtBQUssQ0FBQztNQUNsQixNQUFNLElBQUluQyxnQkFBQSxDQUFBc0MsYUFBYSxDQUFDQyxjQUFjLENBQUMsaUNBQWlDLENBQUM7SUFDM0U7RUFHRixDQUFDOztBQUVELFNBQXNCN0MsYUFBYUEsQ0FBQTs7SUFDakMsTUFBTThDLE9BQU8sR0FBRyxNQUFNLElBQUExQyxPQUFBLENBQUFRLEtBQUssRUFBZ0IsaUJBQWlCUixPQUFBLENBQUFTLFVBQVUsUUFBUSxDQUFDO0lBQy9FLE9BQU9pQyxPQUFPO0VBQ2hCLENBQUM7O0FBRUQsU0FBc0I3QyxvQkFBb0JBLENBQUM4QyxNQUFjLEVBQUVDLE9BQWU7O0lBQ3hFLE1BQU1oQyxNQUFNLEdBQUcsTUFBTSxJQUFBWixPQUFBLENBQUFRLEtBQUssRUFDeEI7ZUFDV1IsT0FBQSxDQUFBUyxVQUFVOzs7T0FHbEIsRUFDSDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ2tDLE9BQU8sRUFBRSxJQUFJekIsSUFBSSxFQUFFLEVBQUV3QixNQUFNO0tBQ3JDLENBQ0Y7SUFDRCxNQUFNcEMsSUFBSSxHQUFHLE1BQU0sSUFBQVAsT0FBQSxDQUFBUSxLQUFLLEVBQ3RCOztlQUVXUixPQUFBLENBQUFTLFVBQVU7O1NBRWhCLEVBQ0w7TUFDRUMsTUFBTSxFQUFFLENBQUNpQyxNQUFNO0tBQ2hCLENBQ0Y7SUFDRCxPQUFPcEMsSUFBSSxDQUFDLENBQUMsQ0FBZTtFQUM5QixDQUFDOztBQUVELFNBQXNCVCxjQUFjQSxDQUFDYSxJQUFTOztJQUM1QyxNQUFNO01BQUVrQztJQUFXLENBQUUsR0FBR2xDLElBQUk7SUFDNUIsTUFBTTtNQUFFbUM7SUFBZSxDQUFFLEdBQUduQyxJQUFJO0lBQ2hDLE1BQU1vQyxVQUFVLEdBQUc7TUFBRUYsV0FBVztNQUFFQztJQUFlLENBQUU7SUFDbkQsTUFBTUUsYUFBYSxHQUFHN0MsUUFBQSxDQUFBOEMsb0JBQW9CLENBQUNDLGNBQWMsQ0FDdkQsaUJBQWlCLEVBQ2pCSCxVQUFVLENBQ1g7SUFDRCxNQUFNSSxVQUFVLEdBQUcsRUFBRTtJQUNyQixNQUFNQyxJQUFJLEdBQUdoRCxRQUFBLENBQUFpRCxPQUFNLENBQUNDLFFBQVEsQ0FBQ04sYUFBYSxFQUFFRyxVQUFVLENBQUM7SUFFdkQsTUFBTXZDLE1BQU0sR0FBRyxNQUFNLElBQUFaLE9BQUEsQ0FBQVEsS0FBSyxFQUN4QjtlQUNXUixPQUFBLENBQUFTLFVBQVU7OztPQUdsQixFQUNIO01BQ0VDLE1BQU0sRUFBRSxDQUFDMEMsSUFBSSxFQUFFLElBQUlqQyxJQUFJLEVBQUUsRUFBRVIsSUFBSSxDQUFDTCxLQUFLO0tBQ3RDLENBQ0Y7SUFDRCxPQUFPTSxNQUFNO0VBQ2YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFzQmIsV0FBV0EsQ0FBQ08sS0FBYTs7SUFDN0MsTUFBTUssSUFBSSxHQUFHLE1BQU0sSUFBQVgsT0FBQSxDQUFBUSxLQUFLLEVBQ3RCOzs7OztZQUtRUixPQUFBLENBQUFTLFVBQVU7O09BRWZULE9BQUEsQ0FBQVMsVUFBVTs7Ozs7OztLQU9aLEVBQ0Q7TUFDRUMsTUFBTSxFQUFFLENBQUNKLEtBQUs7S0FDZixDQUNGO0lBRUQsSUFBSSxDQUFDSyxJQUFJLElBQUlBLElBQUksQ0FBQ0UsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUM5QixPQUFPLElBQUksQ0FBQyxDQUFDO0lBQ2Y7SUFFQSxNQUFNMEMsT0FBTyxHQUFHLElBQUlDLEdBQUcsRUFBZTtJQUV0QzdDLElBQUksQ0FBQzhDLE9BQU8sQ0FBRUMsR0FBRyxJQUFJO01BQ25CLElBQUksQ0FBQ0gsT0FBTyxDQUFDSSxHQUFHLENBQUNELEdBQUcsQ0FBQ3ZCLEVBQUUsQ0FBQyxFQUFFO1FBQ3hCb0IsT0FBTyxDQUFDSyxHQUFHLENBQUNGLEdBQUcsQ0FBQ3ZCLEVBQUUsRUFBQTBCLE1BQUEsQ0FBQUMsTUFBQSxDQUFBRCxNQUFBLENBQUFDLE1BQUEsS0FDYm5ELElBQUk7VUFDUG9ELFFBQVEsRUFBRTtRQUFFLEdBQ1o7TUFDSjtNQUVBLElBQUlMLEdBQUcsQ0FBQ00sWUFBWSxFQUFFO1FBQ3BCVCxPQUFPLENBQUNVLEdBQUcsQ0FBQ1AsR0FBRyxDQUFDdkIsRUFBRSxDQUFDLENBQUM0QixRQUFRLENBQUNHLElBQUksQ0FBQztVQUNoQ0MsSUFBSSxFQUFFVCxHQUFHLENBQUNNLFlBQVk7VUFDdEJJLFNBQVMsRUFBRVYsR0FBRyxDQUFDVztTQUNoQixDQUFDO01BQ0o7SUFDRixDQUFDLENBQUM7SUFDRixPQUFPQyxLQUFLLENBQUNDLElBQUksQ0FBQ2hCLE9BQU8sQ0FBQzdDLE1BQU0sRUFBRSxDQUFDO0VBQ3JDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","checkUserExist","confirmEmail","getOTP","comparePassword","updateProfilePatient","checkNickName","updateUserVerifyCode","changePassword","getUserInfo","mysql_1","require","response_error_1","schema_1","bcrypt_1","__importDefault","email","user","query","coreSchema","values","data","result","length","isSuccessfull","status","message","emailConfirmed","signupStatus","Date","verify_code","code","showToUser","messageCode","messageKind","tokenVerify","updateData","first_name","last_name","national_code","date_of_birth","gender","city","phone","token_verify","id","affectedRows","error","console","log","ResponseError","InternalServer","getData","userId","newCode","newPassword","confirmPassword","fdPassword","validPassword","createPasswordSchema","validateSyncAt","saltRounds","hash","default","hashSync","userMap","Map","forEach","row","has","set","Object","assign","comments","comment_text","get","push","text","createdAt","comment_created_at","Array","from"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\user\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/user/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport { ConfirmEmail } from \"../../models/auth\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { AppResponse } from \"../../types/response.interface\";\r\nimport { CreateUser, User } from \"../../types/user\";\r\nimport { createPasswordSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT id,email FROM  ${coreSchema}.users\r\n        WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT * \r\n      FROM ${coreSchema}.users\r\n      WHERE email=? AND deletedAt IS NULL\r\n      `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n          UPDATE ${coreSchema}.users\r\n          SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n          WHERE email =?\r\n          `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n      WHERE email=?\r\n    `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function comparePassword(data: any): Promise<any> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT password FROM ${coreSchema}.users\r\n    WHERE email=?\r\n    `,\r\n    {\r\n      values: [data],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function updateProfilePatient(data: User): Promise<any> {\r\n  try {\r\n    // Perform the update query\r\n    await query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.patients\r\n      SET \r\n        first_name = ?,\r\n        last_name = ?,\r\n        national_code = ?,\r\n        date_of_birth = ?,\r\n        gender = ?,\r\n        city = ?,\r\n        phone = ?,\r\n        verify_code = ?,\r\n        token_verify = ?\r\n      WHERE id = ?;\r\n    `,\r\n      {\r\n        values: [\r\n          data.first_name,\r\n          data.last_name,\r\n          data.national_code,\r\n          data.date_of_birth,\r\n          data.gender,\r\n          data.city,\r\n          data.phone,\r\n          data.verify_code,\r\n          data.token_verify,\r\n          data.id,\r\n        ],\r\n      }\r\n    );\r\n\r\n    // Fetch the updated user profile\r\n    const result = await query<RowDataPacket>(\r\n      `SELECT * FROM ${coreSchema}.patients WHERE id = ?`,\r\n      {\r\n        values: [data.id],\r\n      }\r\n    );\r\n    if (result.affectedRows > 0) {\r\n      return `This ID ${data.id} updated successfully`;\r\n    } else {\r\n      return `No record found with ID ${data.id}`;\r\n    }\r\n  } catch (error) {\r\n    console.log(error)\r\n    throw new ResponseError.InternalServer('Could not update patientProfile')\r\n  }\r\n\r\n\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM ${coreSchema}.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET verify_code=?,updatedAt=?\r\n      WHERE id=?\r\n      `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n        SELECT id,email,verify_code\r\n        FROM ${coreSchema}.users\r\n        WHERE id=?\r\n        `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function changePassword(data: any) {\r\n  const { newPassword } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { newPassword, confirmPassword };\r\n  const validPassword = createPasswordSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n      UPDATE ${coreSchema}.users\r\n      SET password=?,updatedAt=?\r\n      WHERE email=?\r\n      `,\r\n    {\r\n      values: [hash, new Date(), data.email],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getUserInfo(email: string) {\r\n//   const data = await query<RowDataPacket[]>(\r\n//     `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n//     {\r\n//       values: [email],\r\n//     }\r\n//   );\r\n//   if (data) return data;\r\n// }\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT \r\n       u.*, \r\n       c.comment, \r\n       c.created_at AS comment_created_at\r\n     FROM ${coreSchema}.users u\r\n     LEFT JOIN \r\n     ${coreSchema}.comments c\r\n     ON \r\n     u.id = c.id\r\n     WHERE \r\n     u.email =?\r\n     LIMIT 1;\r\n\r\n    `,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n\r\n  if (!data || data.length === 0) {\r\n    return null; // Return null if no data is found\r\n  }\r\n\r\n  const userMap = new Map<number, any>();\r\n\r\n  data.forEach((row) => {\r\n    if (!userMap.has(row.id)) {\r\n      userMap.set(row.id, {\r\n        ...data,\r\n        comments: [],\r\n      });\r\n    }\r\n\r\n    if (row.comment_text) {\r\n      userMap.get(row.id).comments.push({\r\n        text: row.comment_text,\r\n        createdAt: row.comment_created_at,\r\n      });\r\n    }\r\n  });\r\n  return Array.from(userMap.values());\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050588},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/navItem\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(buildResponse.code).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVxIiwicmVzIiwiZGF0YSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbmF2LWl0ZW1zXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgTmF2SXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7QnVpbGRSZXNwb25zZX0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL25hdkl0ZW1cIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTmF2SXRlbVNlcnZpY2UuZ2V0QWxsTmF2SXRlbXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBSCxPQUFBO0FBRUFDLFFBQUEsQ0FBQUcsTUFBTSxDQUFDQyxHQUFHLENBQ1IsVUFBVSxFQUNWLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQVMsY0FBYyxDQUFDQyxjQUFjLEVBQUU7SUFDbEQsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztJQUMzRDtFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","public_1","service_1","app_response_1","router","get","asyncHandler","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import {asyncHandler} from \"../../helper/async-handler\";\r\nimport {router} from \"../../routes/public\";\r\nimport { NavItemService } from \"./service\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\n\r\nrouter.get(\r\n  \"/navItem\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await NavItemService.getAllNavItems();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(buildResponse.code).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAEAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAS,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;IAC3D;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL25hdi1pdGVtcy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE5hdkl0ZW1zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5hdkl0ZW1TZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbE5hdkl0ZW1zKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE5hdkl0ZW1zKCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGNBQWM7RUFDbEIsT0FBYUMsY0FBY0EsQ0FBQTs7TUFDaEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxXQUFXLEdBQUU7TUFDaEMsSUFBSUQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOzs7QUFQSEcsT0FBQSxDQUFBTCxjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\nav-items\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\r\n\r\nexport class NavItemService {\r\n  public static async getAllNavItems() {\r\n    const data = await getNavItems();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,cAAc;EAClB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAPHG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\n// router.post(\n//   \"/insertAppointment\",\n//   asyncHandler(async function insertEvent(req: any, res: any) {\n//     try {\n//       const eventData = req.body;\n//       if (\n//         !eventData ||\n//         !eventData.appointment_date ||\n//         !eventData.appointment_time\n//       ) {\n//         return res.status(400).json({ message: \"Missing required feilds.\" });\n//       }\n//       const data = await CalendarService.insertEvent(eventData);\n//       const buildResponse = BuildResponse.get(data);\n//       return res.status(buildResponse.code).json(buildResponse);\n//     } catch (error) {\n//       console.log(\"Error inserting appointment:\", error);\n//       return res.status(500).json({ message: \"Internal Server Error.\" });\n//     }\n//   })\n// );\npublic_1.router.get(\"/getAppointment\", (0, async_handler_1.asyncHandler)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.CalendarService.getEventData();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.asyncHandler)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.CalendarService.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.BuildResponse.deleted({});\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/updateAppointment/update\", (0, async_handler_1.asyncHandler)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.CalendarService.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.BuildResponse.updated(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldEV2ZW50RGF0YSIsInJlcSIsInJlcyIsImRhdGEiLCJDYWxlbmRhclNlcnZpY2UiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJib2R5IiwidXBkYXRlZCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQ2FsZW5kYXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxuLy8gcm91dGVyLnBvc3QoXHJcbi8vICAgXCIvaW5zZXJ0QXBwb2ludG1lbnRcIixcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RXZlbnQocmVxOiBhbnksIHJlczogYW55KSB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBldmVudERhdGEgPSByZXEuYm9keTtcclxuLy8gICAgICAgaWYgKFxyXG4vLyAgICAgICAgICFldmVudERhdGEgfHxcclxuLy8gICAgICAgICAhZXZlbnREYXRhLmFwcG9pbnRtZW50X2RhdGUgfHxcclxuLy8gICAgICAgICAhZXZlbnREYXRhLmFwcG9pbnRtZW50X3RpbWVcclxuLy8gICAgICAgKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJNaXNzaW5nIHJlcXVpcmVkIGZlaWxkcy5cIiB9KTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmluc2VydEV2ZW50KGV2ZW50RGF0YSk7XHJcbi8vICAgICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coXCJFcnJvciBpbnNlcnRpbmcgYXBwb2ludG1lbnQ6XCIsIGVycm9yKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuXCIgfSk7XHJcbi8vICAgICB9XHJcbi8vICAgfSlcclxuLy8gKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QXBwb2ludG1lbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnREYXRhKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5nZXRFdmVudERhdGEoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9kZWxldGVBcHBvaW50bWVudC9kZWxldGUvOmlkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZSxcclxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLmRlbGV0ZUFwcG9pbnRtZW50SXRlbShpZCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5kZWxldGVkKHt9KTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi91cGRhdGVBcHBvaW50bWVudC91cGRhdGVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlQXBwb2ludG1lbnRJdGVtKFxyXG4gICAgcmVxOiBSZXF1ZXN0LFxyXG4gICAgcmVzOiBSZXNwb25zZVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS51cGRhdGVBcHBvaW50bWVudEl0ZW0oZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsaUJBQWlCLEVBQ2pCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVDLFlBQVlBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDekQsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFNBQUEsQ0FBQVEsZUFBZSxDQUFDSixZQUFZLEVBQUU7SUFDakQsTUFBTUssYUFBYSxHQUFHWCxjQUFBLENBQUFZLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSyxJQUFJLENBQUM7SUFDN0MsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFYsUUFBQSxDQUFBRSxNQUFNLENBQUNhLE1BQU0sQ0FDWCwrQkFBK0IsRUFDL0IsSUFBQWxCLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLFNBQWVZLGlCQUFpQkEsQ0FDM0NWLEdBQVksRUFDWkMsR0FBYSxFQUNiVSxJQUFrQjs7SUFFbEIsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR1osR0FBRyxDQUFDYSxNQUFNO0lBQ3pCLE1BQU1sQixTQUFBLENBQUFRLGVBQWUsQ0FBQ1cscUJBQXFCLENBQUNGLEVBQUUsQ0FBQztJQUMvQyxNQUFNUixhQUFhLEdBQUdYLGNBQUEsQ0FBQVksYUFBYSxDQUFDVSxPQUFPLENBQUMsRUFBRSxDQUFDO0lBQy9DLE9BQU9kLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUMzRCxDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURWLFFBQUEsQ0FBQUUsTUFBTSxDQUFDb0IsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBekIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZW1CLHFCQUFxQkEsQ0FDL0NqQixHQUFZLEVBQ1pDLEdBQWE7O0lBRWIsTUFBTWlCLFFBQVEsR0FBR2xCLEdBQUcsQ0FBQ21CLElBQUk7SUFDekIsTUFBTWpCLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ2MscUJBQXFCLENBQUNDLFFBQVEsQ0FBQztJQUNsRSxNQUFNZCxhQUFhLEdBQUdYLGNBQUEsQ0FBQVksYUFBYSxDQUFDZSxPQUFPLENBQUNsQixJQUFJLENBQUM7SUFDakQsT0FBT0QsR0FBRyxDQUFDSyxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQzNELENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","getEventData","req","res","data","CalendarService","buildResponse","BuildResponse","status","code","json","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","body","updated"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { CalendarService } from \"./service\";\r\n\r\n// router.post(\r\n//   \"/insertAppointment\",\r\n//   asyncHandler(async function insertEvent(req: any, res: any) {\r\n//     try {\r\n//       const eventData = req.body;\r\n//       if (\r\n//         !eventData ||\r\n//         !eventData.appointment_date ||\r\n//         !eventData.appointment_time\r\n//       ) {\r\n//         return res.status(400).json({ message: \"Missing required feilds.\" });\r\n//       }\r\n//       const data = await CalendarService.insertEvent(eventData);\r\n//       const buildResponse = BuildResponse.get(data);\r\n//       return res.status(buildResponse.code).json(buildResponse);\r\n//     } catch (error) {\r\n//       console.log(\"Error inserting appointment:\", error);\r\n//       return res.status(500).json({ message: \"Internal Server Error.\" });\r\n//     }\r\n//   })\r\n// );\r\n\r\nrouter.get(\r\n  \"/getAppointment\",\r\n  asyncHandler(async function getEventData(req: any, res: any) {\r\n    const data = await CalendarService.getEventData();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.delete(\r\n  \"/deleteAppointment/delete/:id\",\r\n  asyncHandler(async function deleteAppointment(\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<any> {\r\n    const { id } = req.params;\r\n    await CalendarService.deleteAppointmentItem(id);\r\n    const buildResponse = BuildResponse.deleted({});\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/updateAppointment/update\",\r\n  asyncHandler(async function updateAppointmentItem(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const formData = req.body;\r\n    const data = await CalendarService.updateAppointmentItem(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAQ,EAAEC,GAAQ;;IACzD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,YAAY,EAAE;IACjD,MAAMK,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,MAAM,CAACa,MAAM,CACX,+BAA+B,EAC/B,IAAAlB,eAAA,CAAAO,YAAY,EAAC,SAAeY,iBAAiBA,CAC3CV,GAAY,EACZC,GAAa,EACbU,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGZ,GAAG,CAACa,MAAM;IACzB,MAAMlB,SAAA,CAAAQ,eAAe,CAACW,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMR,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACU,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOd,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,MAAM,CAACoB,GAAG,CACR,2BAA2B,EAC3B,IAAAzB,eAAA,CAAAO,YAAY,EAAC,SAAemB,qBAAqBA,CAC/CjB,GAAY,EACZC,GAAa;;IAEb,MAAMiB,QAAQ,GAAGlB,GAAG,CAACmB,IAAI;IACzB,MAAMjB,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACc,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMd,aAAa,GAAGX,cAAA,CAAAY,aAAa,CAACe,OAAO,CAAClB,IAAI,CAAC;IACjD,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAC3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CalendarService = void 0;\nconst db_1 = require(\"../../bin/db\");\nconst db_2 = require(\"./db\");\nconst moment = require(\"moment\");\nclass CalendarService {\n  // public static async insertEvent(eventData: IAppointment) {\n  //   // const appointment_date = new Date(eventData.appointment_date);\n  //   // // const receivedEndDate = new Date(eventData.end_date);\n  //   // // const receivedAppointmentDate = new Date(eventData.appointmentDate);\n  //   // const startLocalDate = moment(appointment_date)\n  //   //   .local()\n  //   //   .format(\"YYYY-MM-DD\");\n  //   // const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\n  //   // const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\n  //   const appointment_date = moment(eventData.appointment_date).format(\n  //     \"YYYY-MM-DD\"\n  //   );\n  //   const payload: IAppointment = {\n  //     id: eventData.id,\n  //     patient_id: eventData.patient_id,\n  //     doctor_schedule_id: eventData.doctor_schedule_id,\n  //     clinic_id: eventData.clinic_id,\n  //     appointment_date: appointment_date,\n  //     appointment_time: eventData.appointment_time,\n  //     completed_time: eventData.completed_time,\n  //     arrival_time: eventData.arrival_time,\n  //     status: eventData.status,\n  //     note: eventData.note,\n  //   };\n  //   const data = await saveAppointment(payload);\n  //   return data ? { message: \"ok\", data } : null;\n  // }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_2.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.CalendarService = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImRiXzIiLCJtb21lbnQiLCJDYWxlbmRhclNlcnZpY2UiLCJnZXRFdmVudERhdGEiLCJkYXRhIiwiZ2V0QXBwb2ludG1lbnQiLCJtZXNzYWdlIiwiZGVsZXRlQXBwb2ludG1lbnRJdGVtIiwiaWQiLCJkZWxldGVBcHBvaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50SXRlbSIsImRhdGFBcHBpbnRtZW50IiwidXBkYXRlQXBwb2ludG1lbnQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hcHBvaW50bWVudC9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgZGVsZXRlQXBwb2ludG1lbnQsXHJcbiAgdXBkYXRlQXBwb2ludG1lbnQsXHJcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IGdldEFwcG9pbnRtZW50IH0gZnJvbSBcIi4vZGJcIjtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYWxlbmRhclNlcnZpY2Uge1xyXG4gIC8vIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0RXZlbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcclxuICAvLyAgIC8vIGNvbnN0IGFwcG9pbnRtZW50X2RhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnRfZGF0ZSk7XHJcbiAgLy8gICAvLyAvLyBjb25zdCByZWNlaXZlZEVuZERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuZW5kX2RhdGUpO1xyXG4gIC8vICAgLy8gLy8gY29uc3QgcmVjZWl2ZWRBcHBvaW50bWVudERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuYXBwb2ludG1lbnREYXRlKTtcclxuICAvLyAgIC8vIGNvbnN0IHN0YXJ0TG9jYWxEYXRlID0gbW9tZW50KGFwcG9pbnRtZW50X2RhdGUpXHJcbiAgLy8gICAvLyAgIC5sb2NhbCgpXHJcbiAgLy8gICAvLyAgIC5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG4gIC8vICAgLy8gY29uc3QgZW5kTG9jYWxEYXRlID0gbW9tZW50KHJlY2VpdmVkRW5kRGF0ZSkubG9jYWwoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG5cclxuICAvLyAgIC8vIGNvbnN0IGFwcG9pbnRtZW50TG9jYWxEYXRlID0gbW9tZW50KHJlY2VpdmVkQXBwb2ludG1lbnREYXRlKS5sb2NhbCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XHJcbiAgLy8gICBjb25zdCBhcHBvaW50bWVudF9kYXRlID0gbW9tZW50KGV2ZW50RGF0YS5hcHBvaW50bWVudF9kYXRlKS5mb3JtYXQoXHJcbiAgLy8gICAgIFwiWVlZWS1NTS1ERFwiXHJcbiAgLy8gICApO1xyXG5cclxuICAvLyAgIGNvbnN0IHBheWxvYWQ6IElBcHBvaW50bWVudCA9IHtcclxuICAvLyAgICAgaWQ6IGV2ZW50RGF0YS5pZCxcclxuICAvLyAgICAgcGF0aWVudF9pZDogZXZlbnREYXRhLnBhdGllbnRfaWQsXHJcbiAgLy8gICAgIGRvY3Rvcl9zY2hlZHVsZV9pZDogZXZlbnREYXRhLmRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuICAvLyAgICAgY2xpbmljX2lkOiBldmVudERhdGEuY2xpbmljX2lkLFxyXG4gIC8vICAgICBhcHBvaW50bWVudF9kYXRlOiBhcHBvaW50bWVudF9kYXRlLFxyXG4gIC8vICAgICBhcHBvaW50bWVudF90aW1lOiBldmVudERhdGEuYXBwb2ludG1lbnRfdGltZSxcclxuICAvLyAgICAgY29tcGxldGVkX3RpbWU6IGV2ZW50RGF0YS5jb21wbGV0ZWRfdGltZSxcclxuICAvLyAgICAgYXJyaXZhbF90aW1lOiBldmVudERhdGEuYXJyaXZhbF90aW1lLFxyXG4gIC8vICAgICBzdGF0dXM6IGV2ZW50RGF0YS5zdGF0dXMsXHJcbiAgLy8gICAgIG5vdGU6IGV2ZW50RGF0YS5ub3RlLFxyXG4gIC8vICAgfTtcclxuICAvLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzYXZlQXBwb2ludG1lbnQocGF5bG9hZCk7XHJcblxyXG4gIC8vICAgcmV0dXJuIGRhdGEgPyB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9IDogbnVsbDtcclxuICAvLyB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RXZlbnREYXRhKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFwcG9pbnRtZW50KCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnRJdGVtKGlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkZWxldGVBcHBvaW50bWVudChpZCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlQXBwb2ludG1lbnRJdGVtKGRhdGFBcHBpbnRtZW50OiBJQXBwb2ludG1lbnQpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVBcHBvaW50bWVudChkYXRhQXBwaW50bWVudCk7XHJcbiAgICBkYXRhO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUtBLE1BQUFDLElBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQyxNQUFhRyxlQUFlO0VBQzFCO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVPLE9BQWFDLFlBQVlBLENBQUE7O01BQzlCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUssY0FBYyxHQUFFO01BQ25DLElBQUlELElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRyxxQkFBcUJBLENBQUNDLEVBQVU7O01BQ2xELE1BQU1KLElBQUksR0FBRyxNQUFNLElBQUFOLElBQUEsQ0FBQVcsaUJBQWlCLEVBQUNELEVBQUUsQ0FBQztNQUN4QyxPQUFPSixJQUFJO0lBQ2IsQ0FBQzs7RUFFTSxPQUFhTSxxQkFBcUJBLENBQUNDLGNBQTRCOztNQUNwRSxNQUFNUCxJQUFJLEdBQUcsTUFBTSxJQUFBTixJQUFBLENBQUFjLGlCQUFpQixFQUFDRCxjQUFjLENBQUM7TUFDcERQLElBQUk7SUFDTixDQUFDOzs7QUEvQ0hTLE9BQUEsQ0FBQVgsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","db_2","moment","CalendarService","getEventData","data","getAppointment","message","deleteAppointmentItem","id","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\r\n  deleteAppointment,\r\n  updateAppointment,\r\n} from \"../../bin/db\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { getAppointment } from \"./db\";\r\nconst moment = require(\"moment\");\r\n\r\nexport class CalendarService {\r\n  // public static async insertEvent(eventData: IAppointment) {\r\n  //   // const appointment_date = new Date(eventData.appointment_date);\r\n  //   // // const receivedEndDate = new Date(eventData.end_date);\r\n  //   // // const receivedAppointmentDate = new Date(eventData.appointmentDate);\r\n  //   // const startLocalDate = moment(appointment_date)\r\n  //   //   .local()\r\n  //   //   .format(\"YYYY-MM-DD\");\r\n  //   // const endLocalDate = moment(receivedEndDate).local().format(\"YYYY-MM-DD\");\r\n\r\n  //   // const appointmentLocalDate = moment(receivedAppointmentDate).local().format(\"YYYY-MM-DD\");\r\n  //   const appointment_date = moment(eventData.appointment_date).format(\r\n  //     \"YYYY-MM-DD\"\r\n  //   );\r\n\r\n  //   const payload: IAppointment = {\r\n  //     id: eventData.id,\r\n  //     patient_id: eventData.patient_id,\r\n  //     doctor_schedule_id: eventData.doctor_schedule_id,\r\n  //     clinic_id: eventData.clinic_id,\r\n  //     appointment_date: appointment_date,\r\n  //     appointment_time: eventData.appointment_time,\r\n  //     completed_time: eventData.completed_time,\r\n  //     arrival_time: eventData.arrival_time,\r\n  //     status: eventData.status,\r\n  //     note: eventData.note,\r\n  //   };\r\n  //   const data = await saveAppointment(payload);\r\n\r\n  //   return data ? { message: \"ok\", data } : null;\r\n  // }\r\n\r\n  public static async getEventData() {\r\n    const data = await getAppointment();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async deleteAppointmentItem(id: string) {\r\n    const data = await deleteAppointment(id);\r\n    return data;\r\n  }\r\n\r\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\r\n    const data = await updateAppointment(dataAppintment);\r\n    data;\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAKA,MAAAC,IAAA,GAAAD,OAAA;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAaG,eAAe;EAC1B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEO,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,cAAc,GAAE;MACnC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaG,qBAAqBA,CAACC,EAAU;;MAClD,MAAMJ,IAAI,GAAG,MAAM,IAAAN,IAAA,CAAAW,iBAAiB,EAACD,EAAE,CAAC;MACxC,OAAOJ,IAAI;IACb,CAAC;;EAEM,OAAaM,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMP,IAAI,GAAG,MAAM,IAAAN,IAAA,CAAAc,iBAAiB,EAACD,cAAc,CAAC;MACpDP,IAAI;IACN,CAAC;;;AA/CHS,OAAA,CAAAX,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\appointment\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAppointment = getAppointment;\nconst mysql_1 = require(\"../../bin/mysql\");\n// export async function saveAppointment(eventData: IAppointment) {\n//   const insertEvent = await query<RowDataPacket[]>(\n//     `INSERT INTO ${coreSchema}.appointments\n//       (id, patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time, completed_time, arrival_time, status, note, created_at, updated_at)\n//      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n//     [\n//       eventData.id,\n//       eventData.patient_id,\n//       eventData.doctor_schedule_id,\n//       eventData.clinic_id,\n//       eventData.appointment_date,\n//       eventData.appointment_time,\n//       eventData.completed_time,\n//       eventData.arrival_time,\n//       eventData.status,\n//       eventData.note,\n//       new Date(),\n//       new Date(),\n//     ]\n//   );\n//   return insertEvent;\n// }\nfunction getAppointment(searchValue) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const value = [];\n    const result = yield (0, mysql_1.query)(`SELECT a.*, d.first_name AS first_name,\n    d.last_name AS last_name\n    FROM ${mysql_1.coreSchema}.appointments a\n    LEFT JOIN \n     ${mysql_1.coreSchema}.doctors d\n     ON a.doctor_schedule_id = d.id\n    `);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QXBwb2ludG1lbnQiLCJteXNxbF8xIiwicmVxdWlyZSIsInNlYXJjaFZhbHVlIiwidmFsdWUiLCJyZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhcHBvaW50bWVudFxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XHJcbmltcG9ydCB7IElBcHBvaW50bWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9hcHBvaW50bWVudC5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi4vLi4vYmluL215c3FsXCI7XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUFwcG9pbnRtZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XHJcbi8vICAgY29uc3QgaW5zZXJ0RXZlbnQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzXHJcbi8vICAgICAgIChpZCwgcGF0aWVudF9pZCwgZG9jdG9yX3NjaGVkdWxlX2lkLCBjbGluaWNfaWQsIGFwcG9pbnRtZW50X2RhdGUsIGFwcG9pbnRtZW50X3RpbWUsIGNvbXBsZXRlZF90aW1lLCBhcnJpdmFsX3RpbWUsIHN0YXR1cywgbm90ZSwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcclxuLy8gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcclxuLy8gICAgIFtcclxuLy8gICAgICAgZXZlbnREYXRhLmlkLFxyXG4vLyAgICAgICBldmVudERhdGEucGF0aWVudF9pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmRvY3Rvcl9zY2hlZHVsZV9pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmNsaW5pY19pZCxcclxuLy8gICAgICAgZXZlbnREYXRhLmFwcG9pbnRtZW50X2RhdGUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5hcHBvaW50bWVudF90aW1lLFxyXG4vLyAgICAgICBldmVudERhdGEuY29tcGxldGVkX3RpbWUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5hcnJpdmFsX3RpbWUsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5zdGF0dXMsXHJcbi8vICAgICAgIGV2ZW50RGF0YS5ub3RlLFxyXG4vLyAgICAgICBuZXcgRGF0ZSgpLFxyXG4vLyAgICAgICBuZXcgRGF0ZSgpLFxyXG4vLyAgICAgXVxyXG4vLyAgICk7XHJcblxyXG4vLyAgIHJldHVybiBpbnNlcnRFdmVudDtcclxuLy8gfVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50KHNlYXJjaFZhbHVlPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgdmFsdWUgPSBbXTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCBhLiosIGQuZmlyc3RfbmFtZSBBUyBmaXJzdF9uYW1lLFxyXG4gICAgZC5sYXN0X25hbWUgQVMgbGFzdF9uYW1lXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0uYXBwb2ludG1lbnRzIGFcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgIE9OIGEuZG9jdG9yX3NjaGVkdWxlX2lkID0gZC5pZFxyXG4gICAgYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNEJBQSxPQUFBLENBQUFDLGNBQUEsR0FBQUEsY0FBQTtBQTFCQSxNQUFBQyxPQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBLFNBQXNCRixjQUFjQSxDQUFDRyxXQUFvQjs7SUFDdkQsTUFBTUMsS0FBSyxHQUFHLEVBQUU7SUFDaEIsTUFBTUMsTUFBTSxHQUFHLE1BQU0sSUFBQUosT0FBQSxDQUFBSyxLQUFLLEVBQ3hCOztXQUVPTCxPQUFBLENBQUFNLFVBQVU7O09BRWROLE9BQUEsQ0FBQU0sVUFBVTs7S0FFWixDQUNGO0lBQ0QsT0FBT0YsTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","getAppointment","mysql_1","require","searchValue","value","result","query","coreSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\appointment\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/appointment/db.ts"],"sourcesContent":["import { RowDataPacket } from \"mysql2\";\r\nimport { IAppointment } from \"../../types/appointment.interface\";\r\nimport { coreSchema, query } from \"../../bin/mysql\";\r\n\r\n// export async function saveAppointment(eventData: IAppointment) {\r\n//   const insertEvent = await query<RowDataPacket[]>(\r\n//     `INSERT INTO ${coreSchema}.appointments\r\n//       (id, patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time, completed_time, arrival_time, status, note, created_at, updated_at)\r\n//      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n//     [\r\n//       eventData.id,\r\n//       eventData.patient_id,\r\n//       eventData.doctor_schedule_id,\r\n//       eventData.clinic_id,\r\n//       eventData.appointment_date,\r\n//       eventData.appointment_time,\r\n//       eventData.completed_time,\r\n//       eventData.arrival_time,\r\n//       eventData.status,\r\n//       eventData.note,\r\n//       new Date(),\r\n//       new Date(),\r\n//     ]\r\n//   );\r\n\r\n//   return insertEvent;\r\n// }\r\n\r\nexport async function getAppointment(searchValue?: string) {\r\n  const value = [];\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT a.*, d.first_name AS first_name,\r\n    d.last_name AS last_name\r\n    FROM ${coreSchema}.appointments a\r\n    LEFT JOIN \r\n     ${coreSchema}.doctors d\r\n     ON a.doctor_schedule_id = d.id\r\n    `\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BAA,OAAA,CAAAC,cAAA,GAAAA,cAAA;AA1BA,MAAAC,OAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,SAAsBF,cAAcA,CAACG,WAAoB;;IACvD,MAAMC,KAAK,GAAG,EAAE;IAChB,MAAMC,MAAM,GAAG,MAAM,IAAAJ,OAAA,CAAAK,KAAK,EACxB;;WAEOL,OAAA,CAAAM,UAAU;;OAEdN,OAAA,CAAAM,UAAU;;KAEZ,CACF;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050580},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\npublic_1.router.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInJvdXRlciIsImdldCIsInVzZXJBZG1pbiIsInJlcSIsInJlcyIsImRhdGEiLCJVc2VyQWRtaW4iLCJnZXRVc2VyQWRtaW4iLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgVXNlckFkbWluIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQge0J1aWxkUmVzcG9uc2V9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQge3JvdXRlcn0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvZ2V0VXNlckFkbWluYCxcclxuICBhc3luYyBmdW5jdGlvbiB1c2VyQWRtaW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlckFkbWluLmdldFVzZXJBZG1pbigpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBR0FFLFFBQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQ1IsZUFBZSxFQUNmLFNBQWVDLFNBQVNBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbEQsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFNBQUEsQ0FBQVUsU0FBUyxDQUFDQyxZQUFZLEVBQUU7SUFDM0MsTUFBTUMsYUFBYSxHQUFHVixjQUFBLENBQUFXLGFBQWEsQ0FBQ1IsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0NELEdBQUcsQ0FBQ00sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztFQUNwRCxDQUFDO0NBQUEsQ0FDRiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["service_1","require","app_response_1","public_1","router","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { UserAdmin } from \"./service\";\r\nimport {BuildResponse} from \"../../modules/response/app_response\";\r\nimport {router} from \"../../routes/public\";\r\n\r\n\r\nrouter.get(\r\n  `/getUserAdmin`,\r\n  async function userAdmin(req: Request, res: Response) {\r\n    const data = await UserAdmin.getUserAdmin();\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(buildResponse.code).json(buildResponse);\r\n  }\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAGAE,QAAA,CAAAC,MAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMT,SAAA,CAAAU,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2FkbWluL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWRtaW5zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuY2xhc3MgVXNlckFkbWluIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJBZG1pbigpIHtcclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZ2V0QWRtaW5zKCk7XHJcbiAgICBpZiAoYWRtaW4pIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBhZG1pbiB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBVc2VyQWRtaW4gfTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\admin\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\r\n\r\nclass UserAdmin {\r\n  public static async getUserAdmin() {\r\n    const admin = await getAdmins();\r\n    if (admin) {\r\n      return { message: \"ok\", admin };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport { UserAdmin };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/images\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.router.get(\"/api/patients\", (0, async_handler_1.asyncHandler)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.PatientService.getPatients();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.PatientService.checkExistMobile(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\n// router.post(\n//   `/admin/add-patient`,\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\n//     const formData = req.body;\n//     const data = await PatientService.registerPatient(formData);\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return formData;\n//   })\n// );\n// **** GetPatientDetial\npublic_1.router.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.PatientService.patientDetial(patientId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** uploadImage\n// routes.post(\n//   \"/admin/uploadImage\",\n//   uploadImgProfile.single(\"file\"),\n//   (req, res) => {\n//     if (!req.file) {\n//       return res.status(400).json({ error: \"No file uploaded\" });\n//     }\n//     res.json({\n//       message: \"File uploaded seccessfully\",\n//       filename: req.file.filename,\n//     });\n//     const imagePath = req.file.path;\n//     res.json({ imagePath });\n//   }\n// );\n// **** updatePatient\npublic_1.router.put(\"/admin/updatePatient\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield services_1.PatientService.updatePatient(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// **** deletePatient\npublic_1.router.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.asyncHandler)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.PatientService.deletePatient(idPateint);\n    const buildResponse = app_response_1.BuildResponse.deleted(idPateint);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.post('/admin/add_favorite', (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    patient_id,\n    doctor_id\n  } = req.body;\n  const formData = {\n    patient_id,\n    doctor_id\n  };\n  const data = yield services_1.PatientService.addFavorite(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiX19hd2FpdGVyIiwibW9iaWxlIiwicGFyYW1zIiwiY2hlY2tFeGlzdE1vYmlsZSIsInBhdGllbnRJZCIsInBhdGllbnREZXRpYWwiLCJwdXQiLCJmb3JtRGF0YSIsImJvZHkiLCJ1cGRhdGVQYXRpZW50IiwidXBkYXRlZCIsImRlbGV0ZSIsImRlbGV0ZVBhdGllbnQiLCJpZFBhdGVpbnQiLCJkZWxldGVkIiwicG9zdCIsInBhdGllbnRfaWQiLCJkb2N0b3JfaWQiLCJhZGRGYXZvcml0ZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgeyBQYXRpZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XHJcblxyXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcclxuICBkZXN0aW5hdGlvbjogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNiKG51bGwsIFwicHVibGljL2ltYWdlc1wiKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgZmlsZS5vcmlnaW5hbG5hbWUpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkSW1nUHJvZmlsZSA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG4vLyAqKioqIEdldEFsbFxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2FwaS9wYXRpZW50c1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcyhyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5nZXRQYXRpZW50cygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyAqKioqIGNoZWNrUGhvbmVOdW1iZXJFeGlzdHNcclxucm91dGVyLmdldChcclxuICBcIi9hZG1pbi9jaGVjay1waG9uZS86cGhvbmVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGUgPSByZXEucGFyYW1zLm1vYmlsZTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5jaGVja0V4aXN0TW9iaWxlKG1vYmlsZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gYnVpbGRSZXNwb25zZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBhZGQtcGF0aWVudFxyXG4vLyByb3V0ZXIucG9zdChcclxuLy8gICBgL2FkbWluL2FkZC1wYXRpZW50YCxcclxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gYWRkUGF0aWVudChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuLy8gICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucmVnaXN0ZXJQYXRpZW50KGZvcm1EYXRhKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBmb3JtRGF0YTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxuLy8gKioqKiBHZXRQYXRpZW50RGV0aWFsXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9wYXRpZW50LWRldGlhbC86cGF0aWVudElkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBwYXRpZW50SWQgPSArcmVxLnBhcmFtcy5wYXRpZW50SWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UucGF0aWVudERldGlhbChwYXRpZW50SWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbi8vICoqKiogdXBsb2FkSW1hZ2VcclxuLy8gcm91dGVzLnBvc3QoXHJcbi8vICAgXCIvYWRtaW4vdXBsb2FkSW1hZ2VcIixcclxuLy8gICB1cGxvYWRJbWdQcm9maWxlLnNpbmdsZShcImZpbGVcIiksXHJcbi8vICAgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgICBpZiAoIXJlcS5maWxlKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5vIGZpbGUgdXBsb2FkZWRcIiB9KTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJlcy5qc29uKHtcclxuLy8gICAgICAgbWVzc2FnZTogXCJGaWxlIHVwbG9hZGVkIHNlY2Nlc3NmdWxseVwiLFxyXG4vLyAgICAgICBmaWxlbmFtZTogcmVxLmZpbGUuZmlsZW5hbWUsXHJcbi8vICAgICB9KTtcclxuLy8gICAgIGNvbnN0IGltYWdlUGF0aCA9IHJlcS5maWxlLnBhdGg7XHJcbi8vICAgICByZXMuanNvbih7IGltYWdlUGF0aCB9KTtcclxuLy8gICB9XHJcbi8vICk7XHJcbi8vICoqKiogdXBkYXRlUGF0aWVudFxyXG5yb3V0ZXIucHV0KFxyXG4gIFwiL2FkbWluL3VwZGF0ZVBhdGllbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIGRlbGV0ZVBhdGllbnRcclxucm91dGVyLmRlbGV0ZShcclxuICBcIi9hZG1pbi9kZWxldGVQYXRpZW50LzppZFBhdGVpbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaWRQYXRlaW50ID0gK3JlcS5wYXJhbXMuaWRQYXRlaW50O1xyXG4gICAgYXdhaXQgUGF0aWVudFNlcnZpY2UuZGVsZXRlUGF0aWVudChpZFBhdGVpbnQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZChpZFBhdGVpbnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICAnL2FkbWluL2FkZF9mYXZvcml0ZScsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgeyBwYXRpZW50X2lkLCBkb2N0b3JfaWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSB7cGF0aWVudF9pZCxkb2N0b3JfaWR9XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuYWRkRmF2b3JpdGUoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcblxyXG4gIFxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFBRSxVQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFDQSxNQUFBSSxRQUFBLEdBQUFDLGVBQUEsQ0FBQUwsT0FBQTtBQUVBLE1BQU1NLE9BQU8sR0FBR0YsUUFBQSxDQUFBRyxPQUFNLENBQUNDLFdBQVcsQ0FBQztFQUNqQ0MsV0FBVyxFQUFFQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxLQUFJO0lBQzdCQSxFQUFFLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQztFQUMzQixDQUFDO0VBQ0RDLFFBQVEsRUFBRUEsQ0FBQ0gsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSTtJQUMxQkEsRUFBRSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDRyxZQUFZLENBQUM7RUFDN0I7Q0FDRCxDQUFDO0FBRUYsTUFBTUMsZ0JBQWdCLEdBQUcsSUFBQVgsUUFBQSxDQUFBRyxPQUFNLEVBQUM7RUFBRUQ7QUFBTyxDQUFFLENBQUM7QUFFNUM7QUFDQUwsUUFBQSxDQUFBZSxNQUFNLENBQUNDLEdBQUcsQ0FDUixlQUFlLEVBQ2YsSUFBQWxCLGVBQUEsQ0FBQW1CLFlBQVksRUFBQyxTQUFlQyxXQUFXQSxD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","map":{"version":3,"names":["async_handler_1","require","public_1","services_1","app_response_1","multer_1","__importDefault","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","router","get","asyncHandler","getNavItems","res","data","PatientService","getPatients","buildResponse","BuildResponse","status","code","json","__awaiter","mobile","params","checkExistMobile","patientId","patientDetial","put","formData","body","updatePatient","updated","delete","deletePatient","idPateint","deleted","post","patient_id","doctor_id","addFavorite"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\patients\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/patients/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { PatientService } from \"./services\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/images\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nrouter.get(\r\n  \"/api/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    } else {\r\n      return false;\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\n// router.post(\r\n//   `/admin/add-patient`,\r\n//   asyncHandler(async function addPatient(req: Request, res: Response) {\r\n//     const formData = req.body;\r\n//     const data = await PatientService.registerPatient(formData);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return formData;\r\n//   })\r\n// );\r\n\r\n// **** GetPatientDetial\r\nrouter.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** uploadImage\r\n// routes.post(\r\n//   \"/admin/uploadImage\",\r\n//   uploadImgProfile.single(\"file\"),\r\n//   (req, res) => {\r\n//     if (!req.file) {\r\n//       return res.status(400).json({ error: \"No file uploaded\" });\r\n//     }\r\n//     res.json({\r\n//       message: \"File uploaded seccessfully\",\r\n//       filename: req.file.filename,\r\n//     });\r\n//     const imagePath = req.file.path;\r\n//     res.json({ imagePath });\r\n//   }\r\n// );\r\n// **** updatePatient\r\nrouter.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n// **** deletePatient\r\nrouter.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  '/admin/add_favorite',\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const { patient_id, doctor_id } = req.body;\r\n    const formData = {patient_id,doctor_id}\r\n    const data = await PatientService.addFavorite(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n\r\n  \r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050586},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/doctors\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const filters = {\n    name: req.query.name,\n    service_id: req.query.service_id,\n    specialty_id: req.query.specialty_id,\n    city_id: req.query.city_id,\n    doctor_id: req.query.doctor_id,\n    patient_id: req.query.patient_id,\n    isPopular: req.query.isPopular,\n    minRating: req.query.minRating ? parseFloat(req.query.minRating) : undefined,\n    maxRating: req.query.maxRating ? parseFloat(req.query.maxRating) : undefined\n  };\n  const data = yield service_1.DoctorsService.getDoctors(filters);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   \"/getMostPopularDoctor\",\n//   asyncHandler(async (req: any, res: any) => {\n//     const data = await DoctorsService.getMostPopularDoctors();\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.get(\"/admin/check-phone/:phone\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield service_1.DoctorsService.checkDoctorPhoneNumberExists(mobile);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/add-doctor`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.registerDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/doctor-detial/:doctorId`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const doctorId = +req.params.doctorId;\n//     const data = await DoctorsService.doctorDetial(doctorId);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.put(\"/admin/updateDoctor\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const formData = req.body;\n  const data = yield service_1.DoctorsService.updateDoctor(formData);\n  const buildResponse = app_response_1.BuildResponse.updated(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/countDoctorClick`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const id = req.body.id;\n  const data = service_1.DoctorsService.recordDoctorProfileView(id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/addComment`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const comment = req.body.comment;\n  const data = yield service_1.DoctorsService.addComment(comment);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/admin/getSpecialties`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getSpecialties();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/get-sub-specialties/:specialtyId`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const specialtyId = parseInt(req.params.specialtyId, 10);\n  if (isNaN(specialtyId)) {\n    return res.status(400).json({\n      error: \"Invalid specialty ID\"\n    });\n  }\n  const data = yield service_1.DoctorsService.getSubSpecialtiesById(specialtyId);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  res.status(buildResponse.code).json(buildResponse);\n})));\n// router.get(\n//   `/admin/filterSpecialtyById/:id`,\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\n//     const queryParams = +req.params.id;\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\n//     const buildResponse = BuildResponse.get(data);\n//     return res.status(buildResponse.code).json(buildResponse);\n//   })\n// );\npublic_1.router.get(`/admin/filterServicesById/:id`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const queryParams = +req.params.id;\n  const data = yield service_1.DoctorsService.filterServicesById(queryParams);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/admin/insertReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const dataReviews = req.body;\n  const data = yield service_1.DoctorsService.insertReviews(dataReviews);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/getReviews`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.getReviews();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:id/doctor_schedules\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctor_id = +req.params.id;\n  const consultatio_types_available = req.query.consultatio_types_available;\n  const data = yield service_1.DoctorsService.doctorSchadules(doctor_id, consultatio_types_available);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/doctors/:schedule_id/schedule-time-availability\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const schedule_id = +req.params.schedule_id;\n  const data = yield service_1.DoctorsService.doctorScheduleTimeAvailability(schedule_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.post(`/doctors/:doctor_id/like`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const likes = req.body.formData;\n  const data = yield service_1.DoctorsService.toggleLike(likes);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(`/doctor/get_likes`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patient_id = Number(req.query.param);\n  const data = yield service_1.DoctorsService.getDcotorLike(patient_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.put(`/doctors/:id/booked`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const doctor_schedule_id = +req.params.id;\n  const {\n    patient_id,\n    clinic_id,\n    appointment_date,\n    appointment_time\n  } = req.body;\n  if (!patient_id || !clinic_id || !appointment_date || !appointment_time) {\n    return res.status(400).json({\n      message: \"Missing required fields\"\n    });\n  }\n  try {\n    const data = yield service_1.DoctorsService.booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  } catch (error) {\n    console.error(\"Error booking appointment:\", error);\n    return res.status(500).json({\n      message: \"Internal Server Error\"\n    });\n  }\n})));\npublic_1.router.get(`/doctors/services`, (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DoctorsService.fetchServices();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImZpbHRlcnMiLCJuYW1lIiwicXVlcnkiLCJzZXJ2aWNlX2lkIiwic3BlY2lhbHR5X2lkIiwiY2l0eV9pZCIsImRvY3Rvcl9pZCIsInBhdGllbnRfaWQiLCJpc1BvcHVsYXIiLCJtaW5SYXRpbmciLCJwYXJzZUZsb2F0IiwidW5kZWZpbmVkIiwibWF4UmF0aW5nIiwiZGF0YSIsIkRvY3RvcnNTZXJ2aWNlIiwiZ2V0RG9jdG9ycyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJtb2JpbGUiLCJwYXJhbXMiLCJjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzIiwicG9zdCIsImZvcm1EYXRhIiwiYm9keSIsInJlZ2lzdGVyRG9jdG9yIiwicHV0IiwidXBkYXRlRG9jdG9yIiwidXBkYXRlZCIsImlkIiwicmVjb3JkRG9jdG9yUHJvZmlsZVZpZXciLCJjb21tZW50IiwiYWRkQ29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwic3BlY2lhbHR5SWQiLCJwYXJzZUludCIsImlzTmFOIiwiZXJyb3IiLCJnZXRTdWJTcGVjaWFsdGllc0J5SWQiLCJxdWVyeVBhcmFtcyIsImZpbHRlclNlcnZpY2VzQnlJZCIsImRhdGFSZXZpZXdzIiwiaW5zZXJ0UmV2aWV3cyIsImdldFJldmlld3MiLCJjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUiLCJkb2N0b3JTY2hhZHVsZXMiLCJzY2hlZHVsZV9pZCIsImRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eSIsImxpa2VzIiwidG9nZ2xlTGlrZSIsIk51bWJlciIsInBhcmFtIiwiZ2V0RGNvdG9yTGlrZSIsImRvY3Rvcl9zY2hlZHVsZV9pZCIsImNsaW5pY19pZCIsImFwcG9pbnRtZW50X2RhdGUiLCJhcHBvaW50bWVudF90aW1lIiwibWVzc2FnZSIsImJvb2tlZCIsImNvbnNvbGUiLCJmZXRjaFNlcnZpY2VzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZG9jdG9yc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2RvY3RvcnMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBBdXRob3JpemF0aW9uIH0gZnJvbSBcIi4uLy4uL21pZGRsZXdhcmVzL2F1dGhvcml6YXRpb25cIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEb2N0b3JzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZG9jdG9yc1wiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0ge1xyXG4gICAgICBuYW1lOiByZXEucXVlcnkubmFtZSBhcyBzdHJpbmcsXHJcbiAgICAgIHNlcnZpY2VfaWQ6IHJlcS5xdWVyeS5zZXJ2aWNlX2lkIGFzIHN0cmluZyxcclxuICAgICAgc3BlY2lhbHR5X2lkOiByZXEucXVlcnkuc3BlY2lhbHR5X2lkIGFzIHN0cmluZyxcclxuICAgICAgY2l0eV9pZDogcmVxLnF1ZXJ5LmNpdHlfaWQgYXMgc3RyaW5nLFxyXG4gICAgICBkb2N0b3JfaWQ6IHJlcS5xdWVyeS5kb2N0b3JfaWQgYXMgc3RyaW5nLFxyXG4gICAgICBwYXRpZW50X2lkOiByZXEucXVlcnkucGF0aWVudF9pZCBhcyBzdHJpbmcsXHJcbiAgICAgIGlzUG9wdWxhcjogcmVxLnF1ZXJ5LmlzUG9wdWxhciBhcyBib29sZWFuLFxyXG4gICAgICBtaW5SYXRpbmc6IHJlcS5xdWVyeS5taW5SYXRpbmdcclxuICAgICAgICA/IHBhcnNlRmxvYXQocmVxLnF1ZXJ5Lm1pblJhdGluZyBhcyBzdHJpbmcpXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIG1heFJhdGluZzogcmVxLnF1ZXJ5Lm1heFJhdGluZ1xyXG4gICAgICAgID8gcGFyc2VGbG9hdChyZXEucXVlcnkubWF4UmF0aW5nIGFzIHN0cmluZylcclxuICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0RG9jdG9ycyhmaWx0ZXJzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9nZXRNb3N0UG9wdWxhckRvY3RvclwiLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZ2V0TW9zdFBvcHVsYXJEb2N0b3JzKCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgfSlcclxuLy8gKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvYWRtaW4vY2hlY2stcGhvbmUvOnBob25lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlID0gcmVxLnBhcmFtcy5tb2JpbGU7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZC1kb2N0b3JgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UucmVnaXN0ZXJEb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG4vLyByb3V0ZXIuZ2V0KFxyXG4vLyAgIGAvYWRtaW4vZG9jdG9yLWRldGlhbC86ZG9jdG9ySWRgLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuLy8gICAgIGNvbnN0IGRvY3RvcklkID0gK3JlcS5wYXJhbXMuZG9jdG9ySWQ7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZG9jdG9yRGV0aWFsKGRvY3RvcklkKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9hZG1pbi91cGRhdGVEb2N0b3JcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLnVwZGF0ZURvY3Rvcihmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS51cGRhdGVkKGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2NvdW50RG9jdG9yQ2xpY2tgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGlkID0gcmVxLmJvZHkuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gRG9jdG9yc1NlcnZpY2UucmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcoaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucG9zdChcclxuICBgL2FkbWluL2FkZENvbW1lbnRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmFkZENvbW1lbnQoY29tbWVudCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9hZG1pbi9nZXRTcGVjaWFsdGllc2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFNwZWNpYWx0aWVzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgYC9nZXQtc3ViLXNwZWNpYWx0aWVzLzpzcGVjaWFsdHlJZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3Qgc3BlY2lhbHR5SWQgPSBwYXJzZUludChyZXEucGFyYW1zLnNwZWNpYWx0eUlkLCAxMCk7XHJcblxyXG4gICAgaWYgKGlzTmFOKHNwZWNpYWx0eUlkKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHNwZWNpYWx0eSBJRFwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vIHJvdXRlci5nZXQoXHJcbi8vICAgYC9hZG1pbi9maWx0ZXJTcGVjaWFsdHlCeUlkLzppZGAsXHJcbi8vICAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4vLyAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSArcmVxLnBhcmFtcy5pZDtcclxuLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5maWx0ZXJTcGVjaWFsdHlCeUlkKHF1ZXJ5UGFyYW1zKTtcclxuLy8gICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvYWRtaW4vZmlsdGVyU2VydmljZXNCeUlkLzppZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5maWx0ZXJTZXJ2aWNlc0J5SWQocXVlcnlQYXJhbXMpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbnJvdXRlci5wb3N0KFxyXG4gIGAvYWRtaW4vaW5zZXJ0UmV2aWV3c2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YVJldmlld3MgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5pbnNlcnRSZXZpZXdzKGRhdGFSZXZpZXdzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIGAvZ2V0UmV2aWV3c2AsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmdldFJldmlld3MoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9kb2N0b3JzLzppZC9kb2N0b3Jfc2NoZWR1bGVzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgZG9jdG9yX2lkID0gK3JlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUgPSByZXEucXVlcnkuY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IERvY3RvcnNTZXJ2aWNlLmRvY3RvclNjaGFkdWxlcyhcclxuICAgICAgZG9jdG9yX2lkLFxyXG4gICAgICBjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGVcclxuICAgICk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBcIi9kb2N0b3JzLzpzY2hlZHVsZV9pZC9zY2hlZHVsZS10aW1lLWF2YWlsYWJpbGl0eVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHNjaGVkdWxlX2lkID0gK3JlcS5wYXJhbXMuc2NoZWR1bGVfaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRG9jdG9yc1NlcnZpY2UuZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5KFxyXG4gICAgICBzY2hlZHVsZV9pZFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgYC9kb2N0b3JzLzpkb2N0b3JfaWQvbGlrZWAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbGlrZXMgPSByZXEuYm9keS5mb3JtRGF0YTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS50b2dnbGVMaWtlKGxpa2VzKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLmdldChcclxuICBgL2RvY3Rvci9nZXRfbGlrZXNgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHBhdGllbnRfaWQgPSBOdW1iZXIocmVxLnF1ZXJ5LnBhcmFtKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5nZXREY290b3JMaWtlKHBhdGllbnRfaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcblxyXG5yb3V0ZXIucHV0KFxyXG4gIGAvZG9jdG9ycy86aWQvYm9va2VkYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICBjb25zdCBkb2N0b3Jfc2NoZWR1bGVfaWQgPSArcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IHsgcGF0aWVudF9pZCwgY2xpbmljX2lkLCBhcHBvaW50bWVudF9kYXRlLCBhcHBvaW50bWVudF90aW1lIH0gPVxyXG4gICAgICByZXEuYm9keTtcclxuICAgIGlmICghcGF0aWVudF9pZCB8fCAhY2xpbmljX2lkIHx8ICFhcHBvaW50bWVudF9kYXRlIHx8ICFhcHBvaW50bWVudF90aW1lKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZHNcIiB9KTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5ib29rZWQoXHJcbiAgICAgICAgZG9jdG9yX3NjaGVkdWxlX2lkLFxyXG4gICAgICAgIHBhdGllbnRfaWQsXHJcbiAgICAgICAgY2xpbmljX2lkLFxyXG4gICAgICAgIGFwcG9pbnRtZW50X2RhdGUsXHJcbiAgICAgICAgYXBwb2ludG1lbnRfdGltZVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBib29raW5nIGFwcG9pbnRtZW50OlwiLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBgL2RvY3RvcnMvc2VydmljZXNgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEb2N0b3JzU2VydmljZS5mZXRjaFNlcnZpY2VzKCk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLFVBQVUsRUFDVixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxPQUFPLEdBQUc7SUFDZEMsSUFBSSxFQUFFSixHQUFHLENBQUNLLEtBQUssQ0FBQ0QsSUFBYztJQUM5QkUsVUFBVSxFQUFFTixHQUFHLENBQUNLLEtBQUssQ0FBQ0MsVUFBb0I7SUFDMUNDLFlBQVksRUFBRVAsR0FBRyxDQUFDSyxLQUFLLENBQUNFLFlBQXNCO0lBQzlDQyxPQUFPLEVBQUVSLEdBQUcsQ0FBQ0ssS0FBSyxDQUFDRyxPQUFpQjtJQUNwQ0MsU0FBUyxFQUFFVCxHQUFHLENBQUNLLEtBQUssQ0FBQ0ksU0FBbUI7SUFDeENDLFVBQVUsRUFBRVYsR0FBRyxDQUFDSyxLQUFLLENBQUNLLFVBQW9CO0lBQzFDQyxTQUFTLEVBQUVYLEdB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","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","filters","name","query","service_id","specialty_id","city_id","doctor_id","patient_id","isPopular","minRating","parseFloat","undefined","maxRating","data","DoctorsService","getDoctors","buildResponse","BuildResponse","status","code","json","mobile","params","checkDoctorPhoneNumberExists","post","formData","body","registerDoctor","put","updateDoctor","updated","id","recordDoctorProfileView","comment","addComment","getSpecialties","specialtyId","parseInt","isNaN","error","getSubSpecialtiesById","queryParams","filterServicesById","dataReviews","insertReviews","getReviews","consultatio_types_available","doctorSchadules","schedule_id","doctorScheduleTimeAvailability","likes","toggleLike","Number","param","getDcotorLike","doctor_schedule_id","clinic_id","appointment_date","appointment_time","message","booked","console","fetchServices"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/doctors/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { Authorization } from \"../../middlewares/authorization\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DoctorsService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/doctors\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const filters = {\r\n      name: req.query.name as string,\r\n      service_id: req.query.service_id as string,\r\n      specialty_id: req.query.specialty_id as string,\r\n      city_id: req.query.city_id as string,\r\n      doctor_id: req.query.doctor_id as string,\r\n      patient_id: req.query.patient_id as string,\r\n      isPopular: req.query.isPopular as boolean,\r\n      minRating: req.query.minRating\r\n        ? parseFloat(req.query.minRating as string)\r\n        : undefined,\r\n      maxRating: req.query.maxRating\r\n        ? parseFloat(req.query.maxRating as string)\r\n        : undefined,\r\n    };\r\n    const data = await DoctorsService.getDoctors(filters);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   \"/getMostPopularDoctor\",\r\n//   asyncHandler(async (req: any, res: any) => {\r\n//     const data = await DoctorsService.getMostPopularDoctors();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n\r\nrouter.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await DoctorsService.checkDoctorPhoneNumberExists(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/add-doctor`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.registerDoctor(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/doctor-detial/:doctorId`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const doctorId = +req.params.doctorId;\r\n//     const data = await DoctorsService.doctorDetial(doctorId);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\n\r\nrouter.put(\r\n  \"/admin/updateDoctor\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const formData = req.body;\r\n    const data = await DoctorsService.updateDoctor(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/countDoctorClick`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const id = req.body.id;\r\n    const data = DoctorsService.recordDoctorProfileView(id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/admin/addComment`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const comment = req.body.comment;\r\n    const data = await DoctorsService.addComment(comment);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/admin/getSpecialties`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getSpecialties();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/get-sub-specialties/:specialtyId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const specialtyId = parseInt(req.params.specialtyId, 10);\r\n\r\n    if (isNaN(specialtyId)) {\r\n      return res.status(400).json({ error: \"Invalid specialty ID\" });\r\n    }\r\n\r\n    const data = await DoctorsService.getSubSpecialtiesById(specialtyId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\n// router.get(\r\n//   `/admin/filterSpecialtyById/:id`,\r\n//   asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n//     const queryParams = +req.params.id;\r\n//     const data = await DoctorsService.filterSpecialtyById(queryParams);\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     return res.status(buildResponse.code).json(buildResponse);\r\n//   })\r\n// );\r\nrouter.get(\r\n  `/admin/filterServicesById/:id`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const queryParams = +req.params.id;\r\n    const data = await DoctorsService.filterServicesById(queryParams);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.post(\r\n  `/admin/insertReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const dataReviews = req.body;\r\n    const data = await DoctorsService.insertReviews(dataReviews);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  `/getReviews`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.getReviews();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  \"/doctors/:id/doctor_schedules\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctor_id = +req.params.id;\r\n    const consultatio_types_available = req.query.consultatio_types_available;\r\n    const data = await DoctorsService.doctorSchadules(\r\n      doctor_id,\r\n      consultatio_types_available\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\nrouter.get(\r\n  \"/doctors/:schedule_id/schedule-time-availability\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const schedule_id = +req.params.schedule_id;\r\n    const data = await DoctorsService.doctorScheduleTimeAvailability(\r\n      schedule_id\r\n    );\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.post(\r\n  `/doctors/:doctor_id/like`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const likes = req.body.formData;\r\n    const data = await DoctorsService.toggleLike(likes);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.get(\r\n  `/doctor/get_likes`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patient_id = Number(req.query.param);\r\n    const data = await DoctorsService.getDcotorLike(patient_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  `/doctors/:id/booked`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const doctor_schedule_id = +req.params.id;\r\n    const { patient_id, clinic_id, appointment_date, appointment_time } =\r\n      req.body;\r\n    if (!patient_id || !clinic_id || !appointment_date || !appointment_time) {\r\n      return res.status(400).json({ message: \"Missing required fields\" });\r\n    }\r\n    try {\r\n      const data = await DoctorsService.booked(\r\n        doctor_schedule_id,\r\n        patient_id,\r\n        clinic_id,\r\n        appointment_date,\r\n        appointment_time\r\n      );\r\n      const buildResponse = BuildResponse.get(data);\r\n      return res.status(buildResponse.code).json(buildResponse);\r\n    } catch (error) {\r\n      console.error(\"Error booking appointment:\", error);\r\n      return res.status(500).json({ message: \"Internal Server Error\" });\r\n    }\r\n  })\r\n);\r\nrouter.get(\r\n  `/doctors/services`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const data = await DoctorsService.fetchServices();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050584},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DoctorsService = void 0;\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst db_1 = require(\"./db\");\nconst moment = require(\"moment\");\nclass DoctorsService {\n  static getDoctors(filters) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctors)(filters);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  // public static async getMostPopularDoctors() {\n  //   const data = await getMostPopularDoctors();\n  //   if (data) {\n  //     return { message: \"ok\", data };\n  //   } else {\n  //     return null;\n  //   }\n  // }\n  static checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkDoctorPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  // public static async doctorDetial(doctortId: number) {\n  //   const data = await doctorDetail(doctortId);\n  //   if (data) {\n  //     return { message: \"ok\", data };\n  //   } else {\n  //     return null;\n  //   }\n  // }\n  static updateDoctor(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateDoctor)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static recordDoctorProfileView(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.recordDoctorProfileView)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static addComment(comment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addComment)(comment);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSpecialties() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSpecialties)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getSubSpecialtiesById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getSubSpecialtiesById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterSpecialtyById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterSpecialtyById)(specialtyId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static filterServicesById(serviceId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.filterServicesById)(serviceId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static insertReviews(reviewData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const checkExistingFeedback = yield (0, db_1.existingFeedback)(reviewData);\n      if (checkExistingFeedback.length > 0) {\n        throw new response_error_1.ResponseError.BadRequest(\"You have already submitted feedback for this doctor.\");\n      } else {\n        const data = yield (0, db_1.insertReviews)(reviewData);\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static getReviews() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getReviews)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorSchadules(doctor_id, consultation_types) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorSchadules)(doctor_id, consultation_types);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static doctorScheduleTimeAvailability(schedule_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.doctorScheduleTimeAvailability)(schedule_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n    return __awaiter(this, void 0, void 0, function* () {\n      appointment_date = moment(appointment_date).format(\"YYYY-MM-DD\");\n      const data = yield (0, db_1.booked)(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time);\n      return data ? {\n        message: \"ok\",\n        data\n      } : null;\n    });\n  }\n  static fetchServices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getServices)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static toggleLike(likeInfo) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.like)(likeInfo);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getDcotorLike(patient_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDoctoLike)(patient_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.DoctorsService = DoctorsService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNwb25zZV9lcnJvcl8xIiwicmVxdWlyZSIsImRiXzEiLCJtb21lbnQiLCJEb2N0b3JzU2VydmljZSIsImdldERvY3RvcnMiLCJmaWx0ZXJzIiwiZGF0YSIsIm1lc3NhZ2UiLCJjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzIiwibW9iaWxlIiwicmVnaXN0ZXJEb2N0b3IiLCJmb3JtRGF0YSIsImFkZERvY3RvciIsInVwZGF0ZURvY3RvciIsInJlY29yZERvY3RvclByb2ZpbGVWaWV3IiwiaWQiLCJhZGRDb21tZW50IiwiY29tbWVudCIsImdldFNwZWNpYWx0aWVzIiwiZ2V0U3ViU3BlY2lhbHRpZXNCeUlkIiwic3BlY2lhbHR5SWQiLCJmaWx0ZXJTcGVjaWFsdHlCeUlkIiwiZmlsdGVyU2VydmljZXNCeUlkIiwic2VydmljZUlkIiwiaW5zZXJ0UmV2aWV3cyIsInJldmlld0RhdGEiLCJjaGVja0V4aXN0aW5nRmVlZGJhY2siLCJleGlzdGluZ0ZlZWRiYWNrIiwibGVuZ3RoIiwiUmVzcG9uc2VFcnJvciIsIkJhZFJlcXVlc3QiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yX2lkIiwiY29uc3VsdGF0aW9uX3R5cGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5Iiwic2NoZWR1bGVfaWQiLCJib29rZWQiLCJkb2N0b3Jfc2NoZWR1bGVfaWQiLCJwYXRpZW50X2lkIiwiY2xpbmljX2lkIiwiYXBwb2ludG1lbnRfZGF0ZSIsImFwcG9pbnRtZW50X3RpbWUiLCJmb3JtYXQiLCJmZXRjaFNlcnZpY2VzIiwiZ2V0U2VydmljZXMiLCJ0b2dnbGVMaWtlIiwibGlrZUluZm8iLCJsaWtlIiwiZ2V0RGNvdG9yTGlrZSIsImdldERvY3RvTGlrZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZG9jdG9ycy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tbWVudHNEVE8sXHJcbiAgRG9jdG9yc0RUTyxcclxuICBsaWtlRFRPLFxyXG4gIFJldmlld3NEVE8sXHJcbn0gZnJvbSBcIi4uLy4uL21vZGVscy9kb2N0b3JzXCI7XHJcbmltcG9ydCB7IFJlc3BvbnNlRXJyb3IgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5pbXBvcnQge1xyXG4gIGFkZENvbW1lbnQsXHJcbiAgYWRkRG9jdG9yLFxyXG4gIGJvb2tlZCxcclxuICBjaGVja0RvY3RvclBob25lTnVtYmVyRXhpc3RzLFxyXG4gIGRvY3RvclNjaGFkdWxlcyxcclxuICBkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHksXHJcbiAgZXhpc3RpbmdGZWVkYmFjayxcclxuICBmaWx0ZXJTZXJ2aWNlc0J5SWQsXHJcbiAgZmlsdGVyU3BlY2lhbHR5QnlJZCxcclxuICBnZXREb2N0b0xpa2UsXHJcbiAgZ2V0RG9jdG9ycyxcclxuICBnZXRSZXZpZXdzLFxyXG4gIGdldFNlcnZpY2VzLFxyXG4gIGdldFNwZWNpYWx0aWVzLFxyXG4gIGdldFN1YlNwZWNpYWx0aWVzQnlJZCxcclxuICBpbnNlcnRSZXZpZXdzLFxyXG4gIGxpa2UsXHJcbiAgcmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcsXHJcbiAgdXBkYXRlRG9jdG9yLFxyXG59IGZyb20gXCIuL2RiXCI7XHJcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoXCJtb21lbnRcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdG9yc1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RG9jdG9ycyhmaWx0ZXJzOiB7XHJcbiAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICBjaXR5X2lkPzogc3RyaW5nO1xyXG4gICAgZG9jdG9yX2lkPzogc3RyaW5nO1xyXG4gICAgbWluUmF0aW5nPzogbnVtYmVyO1xyXG4gICAgbWF4UmF0aW5nPzogbnVtYmVyO1xyXG4gICAgaXNQb3B1bGFyPzogYm9vbGVhbjtcclxuICB9KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RG9jdG9ycyhmaWx0ZXJzKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBwdWJsaWMgc3RhdGljIGFzeW5jIGdldE1vc3RQb3B1bGFyRG9jdG9ycygpIHtcclxuICAvLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRNb3N0UG9wdWxhckRvY3RvcnMoKTtcclxuICAvLyAgIGlmIChkYXRhKSB7XHJcbiAgLy8gICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gIC8vICAgfSBlbHNlIHtcclxuICAvLyAgICAgcmV0dXJuIG51bGw7XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhcclxuICAgIG1vYmlsZTogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJEb2N0b3IoZm9ybURhdGE6IERvY3RvcnNEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGREb2N0b3IoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JEZXRpYWwoZG9jdG9ydElkOiBudW1iZXIpIHtcclxuICAvLyAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkb2N0b3JEZXRhaWwoZG9jdG9ydElkKTtcclxuICAvLyAgIGlmIChkYXRhKSB7XHJcbiAgLy8gICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gIC8vICAgfSBlbHNlIHtcclxuICAvLyAgICAgcmV0dXJuIG51bGw7XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdG9yKGZvcm1EYXRhOiBEb2N0b3JzRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlRG9jdG9yKGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlY29yZERvY3RvclByb2ZpbGVWaWV3KGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZWNvcmREb2N0b3JQcm9maWxlVmlldyhpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBhZGRDb21tZW50KGNvbW1lbnQ6IENvbW1lbnRzRFRPKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRkQ29tbWVudChjb21tZW50KTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0U3BlY2lhbHRpZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0U3BlY2lhbHRpZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0U3ViU3BlY2lhbHRpZXNCeUlkKHNwZWNpYWx0eUlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmaWx0ZXJTcGVjaWFsdHlCeUlkKHNwZWNpYWx0eUlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmaWx0ZXJTcGVjaWFsdHlCeUlkKHNwZWNpYWx0eUlkKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZmlsdGVyU2VydmljZXNCeUlkKHNlcnZpY2VJZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZmlsdGVyU2VydmljZXNCeUlkKHNlcnZpY2VJZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBpbnNlcnRSZXZpZXdzKHJldmlld0RhdGE6IFJldmlld3NEVE8pIHtcclxuICAgIGNvbnN0IGNoZWNrRXhpc3RpbmdGZWVkYmFjayA9IGF3YWl0IGV4aXN0aW5nRmVlZGJhY2socmV2aWV3RGF0YSk7XHJcbiAgICBpZiAoY2hlY2tFeGlzdGluZ0ZlZWRiYWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcclxuICAgICAgICBcIllvdSBoYXZlIGFscmVhZHkgc3VibWl0dGVkIGZlZWRiYWNrIGZvciB0aGlzIGRvY3Rvci5cIlxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGluc2VydFJldmlld3MocmV2aWV3RGF0YSk7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRSZXZpZXdzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFJldmlld3MoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGRvY3RvclNjaGFkdWxlcyhcclxuICAgIGRvY3Rvcl9pZDogbnVtYmVyLFxyXG4gICAgY29uc3VsdGF0aW9uX3R5cGVzOiBhbnlcclxuICApIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkb2N0b3JTY2hhZHVsZXMoZG9jdG9yX2lkLCBjb25zdWx0YXRpb25fdHlwZXMpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBkb2N0b3JTY2hlZHVsZVRpbWVBdmFpbGFiaWxpdHkoc2NoZWR1bGVfaWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eShzY2hlZHVsZV9pZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBib29rZWQoXHJcbiAgICBkb2N0b3Jfc2NoZWR1bGVfaWQ6IG51bWJlcixcclxuICAgIHBhdGllbnRfaWQ6IG51bWJlcixcclxuICAgIGNsaW5pY19pZDogbnVtYmVyLFxyXG4gICAgYXBwb2ludG1lbnRfZGF0ZTogc3RyaW5nLFxyXG4gICAgYXBwb2ludG1lbnRfdGltZTogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICBhcHBvaW50bWVudF9kYXRlID0gbW9tZW50KGFwcG9pbnRtZW50X2RhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgYm9va2VkKFxyXG4gICAgICBkb2N0b3Jfc2NoZWR1bGVfaWQsXHJcbiAgICAgIHBhdGllbnRfaWQsXHJcbiAgICAgIGNsaW5pY19pZCxcclxuICAgICAgYXBwb2ludG1lbnRfZGF0ZSxcclxuICAgICAgYXBwb2ludG1lbnRfdGltZVxyXG4gICAgKTtcclxuICAgIHJldHVybiBkYXRhID8geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGZldGNoU2VydmljZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0U2VydmljZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHRvZ2dsZUxpa2UobGlrZUluZm86IGxpa2VEVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBsaWtlKGxpa2VJbmZvKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0RGNvdG9yTGlrZShwYXRpZW50X2lkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXREb2N0b0xpa2UocGF0aWVudF9pZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLE1BQUFBLGdCQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxJQUFBLEdBQUFELE9BQUE7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","map":{"version":3,"names":["response_error_1","require","db_1","moment","DoctorsService","getDoctors","filters","data","message","checkDoctorPhoneNumberExists","mobile","registerDoctor","formData","addDoctor","updateDoctor","recordDoctorProfileView","id","addComment","comment","getSpecialties","getSubSpecialtiesById","specialtyId","filterSpecialtyById","filterServicesById","serviceId","insertReviews","reviewData","checkExistingFeedback","existingFeedback","length","ResponseError","BadRequest","getReviews","doctorSchadules","doctor_id","consultation_types","doctorScheduleTimeAvailability","schedule_id","booked","doctor_schedule_id","patient_id","clinic_id","appointment_date","appointment_time","format","fetchServices","getServices","toggleLike","likeInfo","like","getDcotorLike","getDoctoLike","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/doctors/service.ts"],"sourcesContent":["import {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport {\r\n  addComment,\r\n  addDoctor,\r\n  booked,\r\n  checkDoctorPhoneNumberExists,\r\n  doctorSchadules,\r\n  doctorScheduleTimeAvailability,\r\n  existingFeedback,\r\n  filterServicesById,\r\n  filterSpecialtyById,\r\n  getDoctoLike,\r\n  getDoctors,\r\n  getReviews,\r\n  getServices,\r\n  getSpecialties,\r\n  getSubSpecialtiesById,\r\n  insertReviews,\r\n  like,\r\n  recordDoctorProfileView,\r\n  updateDoctor,\r\n} from \"./db\";\r\nconst moment = require(\"moment\");\r\n\r\nexport class DoctorsService {\r\n  public static async getDoctors(filters: {\r\n    name?: string;\r\n    id?: string;\r\n    city_id?: string;\r\n    doctor_id?: string;\r\n    minRating?: number;\r\n    maxRating?: number;\r\n    isPopular?: boolean;\r\n  }) {\r\n    const data = await getDoctors(filters);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // public static async getMostPopularDoctors() {\r\n  //   const data = await getMostPopularDoctors();\r\n  //   if (data) {\r\n  //     return { message: \"ok\", data };\r\n  //   } else {\r\n  //     return null;\r\n  //   }\r\n  // }\r\n  public static async checkDoctorPhoneNumberExists(\r\n    mobile: string\r\n  ): Promise<boolean> {\r\n    const data = await checkDoctorPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  public static async registerDoctor(formData: DoctorsDTO) {\r\n    const data = await addDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // public static async doctorDetial(doctortId: number) {\r\n  //   const data = await doctorDetail(doctortId);\r\n  //   if (data) {\r\n  //     return { message: \"ok\", data };\r\n  //   } else {\r\n  //     return null;\r\n  //   }\r\n  // }\r\n  public static async updateDoctor(formData: DoctorsDTO) {\r\n    const data = await updateDoctor(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async recordDoctorProfileView(id: number) {\r\n    const data = await recordDoctorProfileView(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async addComment(comment: CommentsDTO) {\r\n    const data = await addComment(comment);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSpecialties() {\r\n    const data = await getSpecialties();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getSubSpecialtiesById(specialtyId: number) {\r\n    const data = await getSubSpecialtiesById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterSpecialtyById(specialtyId: number) {\r\n    const data = await filterSpecialtyById(specialtyId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async filterServicesById(serviceId: number) {\r\n    const data = await filterServicesById(serviceId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async insertReviews(reviewData: ReviewsDTO) {\r\n    const checkExistingFeedback = await existingFeedback(reviewData);\r\n    if (checkExistingFeedback.length > 0) {\r\n      throw new ResponseError.BadRequest(\r\n        \"You have already submitted feedback for this doctor.\"\r\n      );\r\n    } else {\r\n      const data = await insertReviews(reviewData);\r\n      return { message: \"ok\", data };\r\n    }\r\n  }\r\n\r\n  public static async getReviews() {\r\n    const data = await getReviews();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async doctorSchadules(\r\n    doctor_id: number,\r\n    consultation_types: any\r\n  ) {\r\n    const data = await doctorSchadules(doctor_id, consultation_types);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async doctorScheduleTimeAvailability(schedule_id: number) {\r\n    const data = await doctorScheduleTimeAvailability(schedule_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async booked(\r\n    doctor_schedule_id: number,\r\n    patient_id: number,\r\n    clinic_id: number,\r\n    appointment_date: string,\r\n    appointment_time: string\r\n  ) {\r\n    appointment_date = moment(appointment_date).format(\"YYYY-MM-DD\");\r\n    const data = await booked(\r\n      doctor_schedule_id,\r\n      patient_id,\r\n      clinic_id,\r\n      appointment_date,\r\n      appointment_time\r\n    );\r\n    return data ? { message: \"ok\", data } : null;\r\n  }\r\n\r\n  public static async fetchServices() {\r\n    const data = await getServices();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async toggleLike(likeInfo: likeDTO) {\r\n    const data = await like(likeInfo);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  public static async getDcotorLike(patient_id: number) {\r\n    const data = await getDoctoLike(patient_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050584},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addDoctor = addDoctor;\nexports.like = like;\nexports.getDoctoLike = getDoctoLike;\nexports.getDoctors = getDoctors;\nexports.getServices = getServices;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.updateDoctor = updateDoctor;\nexports.recordDoctorProfileView = recordDoctorProfileView;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.getSubSpecialtiesById = getSubSpecialtiesById;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.getSuggestionsBySpecialty = getSuggestionsBySpecialty;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorSchadules = doctorSchadules;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nconst mysql_1 = require(\"../../bin/mysql\");\nconst response_error_1 = require(\"../../modules/error/response_error\");\nconst schema_1 = require(\"./schema\");\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nfunction addDoctor(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data.password;\n    const {\n      confirmPassword\n    } = data.password;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hashedPassword = yield bcrypt_1.default.hash(validPassword, saltRounds);\n    if (validPassword.error) {\n      throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n    }\n    const newId = (0, uuid_1.v4)();\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctors\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\n        VALUES(?,?,?,?,?,?,?,?,?,?)`, {\n        values: [newId, data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, new Date(), new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Database Error:\", error.message);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n    }\n  });\n}\nfunction like(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const existingLike = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ? AND patient_id = ?`, {\n      values: [data.doctor_id, data.patient_id]\n    });\n    if (existingLike.length > 0) {\n      // Unlike the doctor: Remove the like\n      yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.doctor_likes \n       WHERE doctor_id = ? AND patient_id = ?`, {\n        values: [data.doctor_id, data.patient_id]\n      });\n    } else {\n      // Like the doctor: Insert new like record\n      yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \n       VALUES (?, ?, ?)`, {\n        values: [data.doctor_id, data.patient_id, 1]\n      });\n    }\n    // Update the doctor's is_liked status based on the total likes\n    const totalLikes = yield (0, mysql_1.query)(`SELECT COUNT(*) AS count FROM ${mysql_1.coreSchema}.doctor_likes \n     WHERE doctor_id = ?`, {\n      values: [data.doctor_id]\n    });\n    const isLiked = totalLikes[0].count > 0 ? 1 : 0;\n    yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.doctors \n     SET is_liked = ? \n     WHERE id = ?`, {\n      values: [isLiked, data.doctor_id]\n    });\n    return {\n      success: true,\n      isLiked\n    };\n  });\n}\nfunction getDoctoLike(patient_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT\n      d.*\n        FROM ${mysql_1.coreSchema}.doctor_likes dl\n        LEFT JOIN ${mysql_1.coreSchema}.doctors d\n        ON dl.doctor_id = d.id\n        WHERE dl.patient_id = ?`, {\n        values: [patient_id]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Failed to get response\");\n    }\n  });\n}\nfunction getDoctors(filters) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      let sql = `\n    SELECT \n      d.id, d.first_name,d.last_name,d.profile_img,  d.email, d.phone, d.specialty_id, d.insurance_id,\n      d.click_count,d.average_rating,\n      d.medical_code,\n      sp.name AS specialty_name,\n      i.name AS insurance_name,  \n      (SELECT AVG(rating) FROM ${mysql_1.coreSchema}.doctor_reviews r WHERE r.doctor_id = d.id) AS average_rating,\n      COUNT(r.id) AS total_reviews,\n      COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\n      COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\n      COALESCE(AVG(r.skill), 0) AS avg_skill,\n      COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\n      COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\n      CASE \n        WHEN EXISTS (SELECT 1 FROM ${mysql_1.coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \n        THEN 1 ELSE 0\n      END AS isLiked,\n\n      JSON_ARRAYAGG(\n        JSON_OBJECT(\n          'country', ld.country,\n          'latitude', ld.latitude,\n          'longitude', ld.longitude,\n          'address_line1', ld.address_line1,\n          'address_line2', ld.address_line2,\n          'zipcode', ld.zipcode,\n          'city',ci.name,\n          'state',ci.state\n        )\n      ) AS addresses\n\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialties sp ON d.specialty_id = sp.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_reviews r ON d.id = r.doctor_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.doctor_services ds ON d.service_id = ds.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.services s ON sp.id = s.specialty_id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.insurances i ON d.insurance_id = i.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.cities ci ON ld.city_id = ci.id\n    LEFT JOIN\n      ${mysql_1.coreSchema}.doctor_likes dk ON d.id = dk.doctor_id\n  `;\n      const conditions = [];\n      const values = [];\n      if (filters.doctor_id) {\n        conditions.push(\"d.id = ?\");\n        values.push(filters.doctor_id);\n      }\n      if (filters.name) {\n        conditions.push(\"CONCAT(d.first_name, ' ', d.last_name) LIKE ?\");\n        values.push(`%${filters.name}%`);\n      }\n      if (filters.specialty_id) {\n        conditions.push(\"sp.id = ?\");\n        values.push(filters.specialty_id);\n      }\n      if (filters.service_id) {\n        conditions.push(\"d.service_id = ?\");\n        values.push(filters.service_id);\n      }\n      if (filters.city_id) {\n        conditions.push(\"ld.city_id = ?\");\n        values.push(filters.city_id);\n      }\n      if (filters.patient_id) {\n        conditions.push(\"dk.patient_id =?\");\n        values.push(filters.patient_id);\n      }\n      if (conditions.length) {\n        sql += \" WHERE \" + conditions.join(\" AND \");\n      }\n      sql += ` GROUP BY d.id, d.first_name, d.last_name,d.profile_img,d.email, d.phone, d.specialty_id, d.insurance_id, sp.name, i.name`;\n      const havingConditions = [];\n      if (filters.minRating !== undefined) {\n        havingConditions.push(\"total_reviews >= ?\");\n        values.push(filters.minRating);\n      }\n      if (filters.maxRating !== undefined) {\n        havingConditions.push(\"total_reviews <= ?\");\n        values.push(filters.maxRating);\n      }\n      if (filters.isPopular) {\n        havingConditions.push(\"average_rating > 4\");\n      }\n      if (havingConditions.length) {\n        sql += \" HAVING \" + havingConditions.join(\" AND \");\n      }\n      const result = yield (0, mysql_1.query)(sql, {\n        values: values\n      });\n      // if (filters.doctor_id) {\n      //   return result.length ? result[0] : null;\n      // }\n      return result ? result : null;\n    } catch (error) {\n      console.error(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction getServices() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.services`);\n    return result;\n  });\n}\n// export async function getMostPopularDoctors(): Promise<any> {\n//   try {\n//     const result = await query<RowDataPacket[]>(\n//       `\n//       SELECT\n//         d.*,\n//         COALESCE(ld.id, 'No Location') AS location,\n//         s.name AS specialty_name,\n//         (SELECT AVG(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS average_rating,\n//         (SELECT COUNT(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS total_ratings\n//       FROM\n//         ${coreSchema}.doctors d\n//       LEFT JOIN\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\n//       LEFT JOIN\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       HAVING\n//         total_ratings > 3\n//       ORDER BY\n//         average_rating DESC,\n//         total_ratings DESC\n//       LIMIT 10;\n//       `\n//     );\n//     return result;\n//   } catch (error) {\n//     console.log(error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      SELECT mobile FROM ${mysql_1.coreSchema}.doctors\n      where mobile=?\n      `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\n// export async function doctorDetail(doctorId: number): Promise<any> {\n//   try {\n//     const sql = `\n//       SELECT\n//         d.*,\n//         COALESCE(ld.country, '') AS country,\n//         COALESCE(ld.latitude, 0) AS latitude,\n//         COALESCE(ld.longitude, 0) AS longitude,\n//         COALESCE(ld.address_line1, '') AS address_line1,\n//         COALESCE(ld.address_line2, '') AS address_line2,\n//         COALESCE(ld.zipcode, '') AS zipcode,\n//         COALESCE(AVG(r.rating), 0) AS average_rating,\n//         COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\n//         COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\n//         COALESCE(AVG(r.skill), 0) AS avg_skill,\n//         COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\n//         COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\n//         COUNT(r.id) AS total_reviews,\n//         COALESCE(GROUP_CONCAT(DISTINCT r.comment SEPARATOR ' | '), 'No comments') AS comments,\n//         s.name AS specialty_name,\n//         i.name AS insurance_name,\n//         CASE\n//           WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id)\n//           THEN 1 ELSE 0\n//         END AS isLiked\n//         JSON_ARRAYAGG(\n//         JSON_OBJECT(\n//           'country', ld.country,\n//           'latitude', ld.latitude,\n//           'longitude', ld.longitude,\n//           'address_line1', ld.address_line1,\n//           'address_line2', ld.address_line2,\n//           'zipcode', ld.zipcode,\n//           'city',ci.name,\n//           'state',ci.state\n//         )\n//       ) AS addresses\n//       FROM\n//         ${coreSchema}.doctors d\n//       LEFT JOIN\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id AND ld.is_primary = 1\n//       LEFT JOIN\n//         ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\n//       LEFT JOIN\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       LEFT JOIN\n//         ${coreSchema}.insurances i ON d.insurance_id = i.id\n//       WHERE\n//         d.id = ?\n//       GROUP BY\n//         d.id,  ld.country, ld.latitude, ld.longitude, ld.address_line1,\n//         ld.address_line2, ld.zipcode, s.name, i.name;\n//     `;\n//     const result = await query<RowDataPacket[]>(sql, { values: [doctorId] });\n//     if (!result || result.length === 0) {\n//       return { message: \"Doctor not found\" };\n//     }\n//     return result[0]; // Return single doctor object instead of an array\n//   } catch (error) {\n//     console.error(\"Error fetching doctor details:\", error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction updateDoctor(doctorData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.doctors\n        SET name = ?\n        WHERE id = ?\n      `, {\n      values: [doctorData.first_name, doctorData.id]\n    });\n    return result;\n  });\n}\nfunction recordDoctorProfileView(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const updateResult = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.doctors\n      SET click_count = click_count + 1\n      WHERE id = ?\n      `, {\n        values: [id]\n      });\n      return updateResult;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction addComment(comment) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.comments\n     (id, id, comment_text, rating)\n         VALUES (?, ?, ?, ?)`, {\n      values: [comment.id, comment.id, comment.comment_text, comment.rating]\n    });\n    return result;\n  });\n}\nfunction getSpecialties() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT *\n       FROM ${mysql_1.coreSchema}.specialties`);\n    return result;\n  });\n}\nfunction getSubSpecialtiesById(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const limit = 20; // Default limit\n      const offset = 0; // Default offset\n      const result = yield (0, mysql_1.query)(`SELECT \n      s.id AS specialty_id,\n      s.name AS specialty_name,\n      s.images AS specialty_image,\n      ss.id AS sub_specialty_id,\n      ss.name AS sub_specialty_name,\n      ss.image_url AS sub_specialty_image\n    FROM ${mysql_1.coreSchema}.specialties s\n    LEFT JOIN ${mysql_1.coreSchema}.sub_specialties ss \n    ON s.id = ss.specialty_id\n    WHERE s.id = ? \n    ORDER BY ss.id;`, {\n        values: [specialtyId]\n      });\n      return result.map(row => ({\n        id: row.sub_specialty_id || null,\n        name: row.sub_specialty_name || \"N/A\",\n        images: row.sub_specialty_image || \"default_image.jpeg\"\n      }));\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterSpecialtyById(specialty) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n       SELECT \n        d.*, \n        COALESCE(ld.location, 'No Location') AS location,\n        s.name AS specialty_name,\n        (SELECT AVG(rating) \n         FROM ${mysql_1.coreSchema}.ratings r \n         WHERE r.id = d.id) AS average_rating\n      FROM \n        ${mysql_1.coreSchema}.doctors d\n      LEFT JOIN \n        ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.id\n      LEFT JOIN \n        ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n  \n      WHERE \n      s.id = ?;\n      `, {\n        values: [specialty]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"...\");\n    }\n  });\n}\nfunction getSuggestionsBySpecialty(specialtyId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\n      FROM clinic_db.suggestions s\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\n      WHERE sp.id = ?;\n    `, [specialtyId]);\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n    }\n  });\n}\nfunction filterServicesById(serviceId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n   SELECT \n      d.*, \n      COALESCE(ld.location, 'No Location') AS location,\n      s.name AS specialty_name,\n      (SELECT AVG(rating) \n       FROM ${mysql_1.coreSchema}.ratings r \n       WHERE r.id = d.id) AS average_rating\n    FROM \n      ${mysql_1.coreSchema}.doctors d\n    LEFT JOIN \n      ${mysql_1.coreSchema}.locations_doctors ld ON d.id = ld.id\n    LEFT JOIN \n      ${mysql_1.coreSchema}.specialties s ON d.specialty_id = s.id\n    JOIN \n      ${mysql_1.coreSchema}.services srv  ON srv.specialty_id = s.id\n    WHERE \n    srv.id = ?;\n    `, {\n      values: [serviceId]\n    });\n    return result;\n  });\n}\nfunction existingFeedback(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`, {\n      values: [reviewData.user_id, reviewData.doctor_id]\n    });\n    return result;\n  });\n}\nfunction insertReviews(reviewData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.doctor_reviews\n        (doctor_id,\n          user_id,\n          comment,\n          recommendations,\n          rating,\n          professional_demeanor,\n          sufficient_time,\n          skill,\n          staff_behavior,\n          clinic_condition)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`, {\n        values: [reviewData.doctor_id, reviewData.user_id, reviewData.comment, reviewData.rating, reviewData.recommendations, reviewData.ratings.professional_demeanor, reviewData.ratings.sufficient_time, reviewData.ratings.skill, reviewData.ratings.staff_behavior, reviewData.ratings.clinic_condition]\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction getReviews() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.reviews\n    `);\n    return result;\n  });\n}\nfunction doctorSchadules(doctor_id, consultatio_types_available) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const queryParams = [doctor_id];\n    try {\n      let queryStr = `\n   SELECT * FROM ${mysql_1.coreSchema}.doctor_schedules ds\n      WHERE doctor_id = ?\n    `;\n      if (consultatio_types_available) {\n        queryStr += \" AND ds.consultatio_types_available =?\";\n        queryParams.push(consultatio_types_available);\n      }\n      const result = yield (0, mysql_1.query)(queryStr, {\n        values: queryParams\n      });\n      return result;\n    } catch (error) {\n      console.log(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n    }\n  });\n}\nfunction doctorScheduleTimeAvailability(schedule_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`\n      SELECT *\n      FROM ${mysql_1.coreSchema}.doctor_available_times \n      WHERE schedule_id = ?;\n      `, {\n        values: [schedule_id]\n      });\n      return result;\n    } catch (error) {\n      console.error(error); // Better to use console.error for errors\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    }\n  });\n}\nfunction booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n  return __awaiter(this, void 0, void 0, function* () {\n    var _a;\n    try {\n      const [existing] = yield (0, mysql_1.query)(`SELECT is_booked FROM ${mysql_1.coreSchema}.doctor_available_times WHERE id = ? FOR UPDATE`, {\n        values: [doctor_schedule_id]\n      });\n      if (!existing || ((_a = existing[0]) === null || _a === void 0 ? void 0 : _a.is_booked) === 1) {\n        throw new response_error_1.ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\n      }\n      const appointmentResult = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.appointments\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');`, {\n        values: [patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time]\n      });\n      return {\n        message: \"Appointment successfuly booked\",\n        appointmentId: appointmentResult.insertId\n      };\n    } catch (error) {\n      console.error(error);\n      throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n    } finally {\n      console.log(\"final\");\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWRkRG9jdG9yIiwibGlrZSIsImdldERvY3RvTGlrZSIsImdldERvY3RvcnMiLCJnZXRTZXJ2aWNlcyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJ1cGRhdGVEb2N0b3IiLCJyZWNvcmREb2N0b3JQcm9maWxlVmlldyIsImFkZENvbW1lbnQiLCJnZXRTcGVjaWFsdGllcyIsImdldFN1YlNwZWNpYWx0aWVzQnlJZCIsImZpbHRlclNwZWNpYWx0eUJ5SWQiLCJnZXRTdWdnZXN0aW9uc0J5U3BlY2lhbHR5IiwiZmlsdGVyU2VydmljZXNCeUlkIiwiZXhpc3RpbmdGZWVkYmFjayIsImluc2VydFJldmlld3MiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5IiwiYm9va2VkIiwibXlzcWxfMSIsInJlcXVpcmUiLCJyZXNwb25zZV9lcnJvcl8xIiwic2NoZW1hXzEiLCJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInV1aWRfMSIsImRhdGEiLCJwYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImZkUGFzc3dvcmQiLCJ2YWxpZFBhc3N3b3JkIiwiZG9jdG9yU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJkZWZhdWx0IiwiaGFzaCIsImVycm9yIiwiUmVzcG9uc2VFcnJvciIsIlVuYXV0aG9yaXplZCIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJxdWVyeSIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiRGF0ZSIsImNvbnNvbGUiLCJtZXNzYWdlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJleGlzdGluZ0xpa2UiLCJkb2N0b3JfaWQiLCJwYXRpZW50X2lkIiwibGVuZ3RoIiwidG90YWxMaWtlcyIsImlzTGlrZWQiLCJjb3VudCIsInN1Y2Nlc3MiLCJsb2ciLCJmaWx0ZXJzIiwic3FsIiwiY29uZGl0aW9ucyIsInB1c2giLCJuYW1lIiwic3BlY2lhbHR5X2lkIiwic2VydmljZV9pZCIsImNpdHlfaWQiLCJqb2luIiwiaGF2aW5nQ29uZGl0aW9ucyIsIm1pblJhdGluZyIsInVuZGVmaW5lZCIsIm1heFJhdGluZyIsImlzUG9wdWxhciIsIm1vYmlsZSIsImRvY3RvckRhdGEiLCJpZCIsInVwZGF0ZVJlc3VsdCIsImNvbW1lbnQiLCJjb21tZW50X3RleHQiLCJyYXRpbmciLCJzcGVjaWFsdHlJZCIsImxpbWl0Iiwib2Zmc2V0IiwibWFwIiwicm93Iiwic3ViX3NwZWNpYWx0eV9pZCIsInN1Yl9zcGVjaWFsdHlfbmFtZSIsImltYWdlcyIsInN1Yl9zcGVjaWFsdHlfaW1hZ2UiLCJzcGVjaWFsdHkiLCJzZXJ2aWNlSWQiLCJyZXZpZXdEYXRhIiwidXNlcl9pZCIsInJlY29tbWVuZGF0aW9ucyIsInJhdGluZ3MiLCJwcm9mZXNzaW9uYWxfZGVtZWFub3IiLCJzdWZmaWNpZW50X3RpbWUiLCJza2lsbCIsInN0YWZmX2JlaGF2aW9yIiwiY2xpbmljX2NvbmRpdGlvbiIsImNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSIsInF1ZXJ5UGFyYW1zIiwicXVlcnlTdHIiLCJzY2hlZHVsZV9pZCIsImRvY3Rvcl9zY2hlZHVsZV9pZCIsImNsaW5pY19pZCIsImFwcG9pbnRtZW50X2RhdGUiLCJhcHBvaW50bWVudF90aW1lIiwiZXhpc3RpbmciLCJfYSIsImlzX2Jvb2tlZCIsIkJhZFJlcXVlc3QiLCJhcHBvaW50bWVudFJlc3VsdCIsImFwcG9pbnRtZW50SWQiLCJpbnNlcnRJZCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRvY3RvcnNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9kb2N0b3JzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQge1xyXG4gIENvbW1lbnRzRFRPLFxyXG4gIERvY3RvcnNEVE8sXHJcbiAgbGlrZURUTyxcclxuICBSZXZpZXdzRFRPLFxyXG4gIFN1YlNwZWNpYWx0eSxcclxufSBmcm9tIFwiLi4vLi4vbW9kZWxzL2RvY3RvcnNcIjtcclxuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XHJcbmltcG9ydCB7IGRvY3RvclNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGREb2N0b3IoZGF0YTogRG9jdG9yc0RUTykge1xyXG4gIGNvbnN0IHsgcGFzc3dvcmQgfSA9IGRhdGEucGFzc3dvcmQ7XHJcbiAgY29uc3QgeyBjb25maXJtUGFzc3dvcmQgfSA9IGRhdGEucGFzc3dvcmQ7XHJcblxyXG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcclxuICBjb25zdCB2YWxpZFBhc3N3b3JkID0gZG9jdG9yU2NoZW1hLnZhbGlkYXRlU3luY0F0KFxyXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcclxuICAgIGZkUGFzc3dvcmRcclxuICApO1xyXG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcclxuICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xyXG5cclxuICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiUGFzc3dvcmQgaXMgaW52YWxpZFwiKTtcclxuICB9XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgICAoaWQsZmlyc3RfbmFtZSxsYXN0X25hbWUsZW1haWwscGFzc3dvcmQsdG9rZW5fdmVyaWZ5LHZlcmlmeV9jb2RlLHBob25lLGNyZWF0ZWRfYXQsdXBkYXRlZF9hdClcclxuICAgICAgICBWQUxVRVMoPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICBuZXdJZCxcclxuICAgICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICAgIGRhdGEubGFzdF9uYW1lLFxyXG4gICAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICAgIGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgZGF0YS50b2tlbl92ZXJpZnksXHJcbiAgICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgICAgZGF0YS5waG9uZSxcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgICBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBFcnJvcjpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBpbnNlcnQgY2xpbmljLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaWtlKGRhdGE6IGxpa2VEVE8pIHtcclxuICBjb25zdCBleGlzdGluZ0xpa2UgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xpa2VzIFxyXG4gICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID8gQU5EIHBhdGllbnRfaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YS5kb2N0b3JfaWQsIGRhdGEucGF0aWVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgaWYgKGV4aXN0aW5nTGlrZS5sZW5ndGggPiAwKSB7XHJcbiAgICAvLyBVbmxpa2UgdGhlIGRvY3RvcjogUmVtb3ZlIHRoZSBsaWtlXHJcbiAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xpa2VzIFxyXG4gICAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgcGF0aWVudF9pZCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZGF0YS5kb2N0b3JfaWQsIGRhdGEucGF0aWVudF9pZF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIExpa2UgdGhlIGRvY3RvcjogSW5zZXJ0IG5ldyBsaWtlIHJlY29yZFxyXG4gICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyAoZG9jdG9yX2lkLCBwYXRpZW50X2lkLCBpc0xpa2UpIFxyXG4gICAgICAgVkFMVUVTICg/LCA/LCA/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkLCAxXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSB0aGUgZG9jdG9yJ3MgaXNfbGlrZWQgc3RhdHVzIGJhc2VkIG9uIHRoZSB0b3RhbCBsaWtlc1xyXG4gIGNvbnN0IHRvdGFsTGlrZXMgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBTRUxFQ1QgQ09VTlQoKikgQVMgY291bnQgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBcclxuICAgICBXSEVSRSBkb2N0b3JfaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZGF0YS5kb2N0b3JfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGlzTGlrZWQgPSB0b3RhbExpa2VzWzBdLmNvdW50ID4gMCA/IDEgOiAwO1xyXG5cclxuICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBVUERBVEUgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIFxyXG4gICAgIFNFVCBpc19saWtlZCA9ID8gXHJcbiAgICAgV0hFUkUgaWQgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbaXNMaWtlZCwgZGF0YS5kb2N0b3JfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGlzTGlrZWQgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3RvTGlrZShwYXRpZW50X2lkOiBudW1iZXIpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUXHJcbiAgICAgIGQuKlxyXG4gICAgICAgIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgZGxcclxuICAgICAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgICAgICBPTiBkbC5kb2N0b3JfaWQgPSBkLmlkXHJcbiAgICAgICAgV0hFUkUgZGwucGF0aWVudF9pZCA9ID9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbcGF0aWVudF9pZF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBnZXQgcmVzcG9uc2VcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdG9ycyhmaWx0ZXJzOiB7XHJcbiAgbmFtZT86IHN0cmluZztcclxuICBzZXJ2aWNlX2lkPzogc3RyaW5nO1xyXG4gIGRvY3Rvcl9pZD86IHN0cmluZztcclxuICBzcGVjaWFsdHlfaWQ/OiBzdHJpbmc7XHJcbiAgY2l0eV9pZD86IHN0cmluZztcclxuICBtaW5SYXRpbmc/OiBudW1iZXI7XHJcbiAgbWF4UmF0aW5nPzogbnVtYmVyO1xyXG4gIGlzUG9wdWxhcj86IGJvb2xlYW47XHJcbiAgcGF0aWVudF9pZD86IGJvb2xlYW47XHJcbn0pOiBQcm9taXNlPERvY3RvcnNEVE9bXSB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgbGV0IHNxbCA9IGBcclxuICAgIFNFTEVDVCBcclxuICAgICAgZC5pZCwgZC5maXJzdF9uYW1lLGQubGFzdF9uYW1lLGQucHJvZmlsZV9pbWcsICBkLmVtYWlsLCBkLnBob25lLCBkLnNwZWNpYWx0eV9pZCwgZC5pbnN1cmFuY2VfaWQsXHJcbiAgICAgIGQuY2xpY2tfY291bnQsZC5hdmVyYWdlX3JhdGluZyxcclxuICAgICAgZC5tZWRpY2FsX2NvZGUsXHJcbiAgICAgIHNwLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXHJcbiAgICAgIGkubmFtZSBBUyBpbnN1cmFuY2VfbmFtZSwgIFxyXG4gICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3cyByIFdIRVJFIHIuZG9jdG9yX2lkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmcsXHJcbiAgICAgIENPVU5UKHIuaWQpIEFTIHRvdGFsX3Jldmlld3MsXHJcbiAgICAgIENPQUxFU0NFKEFWRyhyLnByb2Zlc3Npb25hbF9kZW1lYW5vciksIDApIEFTIGF2Z19wcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICAgIENPQUxFU0NFKEFWRyhyLnN1ZmZpY2llbnRfdGltZSksIDApIEFTIGF2Z19zdWZmaWNpZW50X3RpbWUsXHJcbiAgICAgIENPQUxFU0NFKEFWRyhyLnNraWxsKSwgMCkgQVMgYXZnX3NraWxsLFxyXG4gICAgICBDT0FMRVNDRShBVkcoci5zdGFmZl9iZWhhdmlvciksIDApIEFTIGF2Z19zdGFmZl9iZWhhdmlvcixcclxuICAgICAgQ09BTEVTQ0UoQVZHKHIuY2xpbmljX2NvbmRpdGlvbiksIDApIEFTIGF2Z19jbGluaWNfY29uZGl0aW9uLFxyXG4gICAgICBDQVNFIFxyXG4gICAgICAgIFdIRU4gRVhJU1RTIChTRUxFQ1QgMSBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xpa2VzIGRsIFdIRVJFIGRsLmRvY3Rvcl9pZCA9IGQuaWQpIFxyXG4gICAgICAgIFRIRU4gMSBFTFNFIDBcclxuICAgICAgRU5EIEFTIGlzTGlrZWQsXHJcblxyXG4gICAgICBKU09OX0FSUkFZQUdHKFxyXG4gICAgICAgIEpTT05fT0JKRUNUKFxyXG4gICAgICAgICAgJ2NvdW50cnknLCBsZC5jb3VudHJ5LFxyXG4gICAgICAgICAgJ2xhdGl0dWRlJywgbGQubGF0aXR1ZGUsXHJcbiAgICAgICAgICAnbG9uZ2l0dWRlJywgbGQubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgJ2FkZHJlc3NfbGluZTEnLCBsZC5hZGRyZXNzX2xpbmUxLFxyXG4gICAgICAgICAgJ2FkZHJlc3NfbGluZTInLCBsZC5hZGRyZXNzX2xpbmUyLFxyXG4gICAgICAgICAgJ3ppcGNvZGUnLCBsZC56aXBjb2RlLFxyXG4gICAgICAgICAgJ2NpdHknLGNpLm5hbWUsXHJcbiAgICAgICAgICAnc3RhdGUnLGNpLnN0YXRlXHJcbiAgICAgICAgKVxyXG4gICAgICApIEFTIGFkZHJlc3Nlc1xyXG5cclxuICAgIEZST00gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xvY2F0aW9ucyBsZCBPTiBkLmlkID0gbGQuZG9jdG9yX2lkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgc3AgT04gZC5zcGVjaWFsdHlfaWQgPSBzcC5pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9yZXZpZXdzIHIgT04gZC5pZCA9IHIuZG9jdG9yX2lkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX3NlcnZpY2VzIGRzIE9OIGQuc2VydmljZV9pZCA9IGRzLmlkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uc2VydmljZXMgcyBPTiBzcC5pZCA9IHMuc3BlY2lhbHR5X2lkXHJcbiAgICBMRUZUIEpPSU4gXHJcbiAgICAgICR7Y29yZVNjaGVtYX0uaW5zdXJhbmNlcyBpIE9OIGQuaW5zdXJhbmNlX2lkID0gaS5pZFxyXG4gICAgTEVGVCBKT0lOIFxyXG4gICAgICAke2NvcmVTY2hlbWF9LmNpdGllcyBjaSBPTiBsZC5jaXR5X2lkID0gY2kuaWRcclxuICAgIExFRlQgSk9JTlxyXG4gICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBkayBPTiBkLmlkID0gZGsuZG9jdG9yX2lkXHJcbiAgYDtcclxuXHJcbiAgICBjb25zdCBjb25kaXRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGlmIChmaWx0ZXJzLmRvY3Rvcl9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJkLmlkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5kb2N0b3JfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMubmFtZSkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJDT05DQVQoZC5maXJzdF9uYW1lLCAnICcsIGQubGFzdF9uYW1lKSBMSUtFID9cIik7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGAlJHtmaWx0ZXJzLm5hbWV9JWApO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuc3BlY2lhbHR5X2lkKSB7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChcInNwLmlkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5zcGVjaWFsdHlfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuc2VydmljZV9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJkLnNlcnZpY2VfaWQgPSA/XCIpO1xyXG4gICAgICB2YWx1ZXMucHVzaChmaWx0ZXJzLnNlcnZpY2VfaWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuY2l0eV9pZCkge1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goXCJsZC5jaXR5X2lkID0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5jaXR5X2lkKTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLnBhdGllbnRfaWQpIHtcclxuICAgICAgY29uZGl0aW9ucy5wdXNoKFwiZGsucGF0aWVudF9pZCA9P1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5wYXRpZW50X2lkKTtcclxuICAgIH1cclxuICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICBzcWwgKz0gXCIgV0hFUkUgXCIgKyBjb25kaXRpb25zLmpvaW4oXCIgQU5EIFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzcWwgKz0gYCBHUk9VUCBCWSBkLmlkLCBkLmZpcnN0X25hbWUsIGQubGFzdF9uYW1lLGQucHJvZmlsZV9pbWcsZC5lbWFpbCwgZC5waG9uZSwgZC5zcGVjaWFsdHlfaWQsIGQuaW5zdXJhbmNlX2lkLCBzcC5uYW1lLCBpLm5hbWVgO1xyXG5cclxuICAgIGNvbnN0IGhhdmluZ0NvbmRpdGlvbnM6IHN0cmluZ1tdID0gW107XHJcbiAgICBpZiAoZmlsdGVycy5taW5SYXRpbmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBoYXZpbmdDb25kaXRpb25zLnB1c2goXCJ0b3RhbF9yZXZpZXdzID49ID9cIik7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGZpbHRlcnMubWluUmF0aW5nKTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLm1heFJhdGluZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGhhdmluZ0NvbmRpdGlvbnMucHVzaChcInRvdGFsX3Jldmlld3MgPD0gP1wiKTtcclxuICAgICAgdmFsdWVzLnB1c2goZmlsdGVycy5tYXhSYXRpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmaWx0ZXJzLmlzUG9wdWxhcikge1xyXG4gICAgICBoYXZpbmdDb25kaXRpb25zLnB1c2goXCJhdmVyYWdlX3JhdGluZyA+IDRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGhhdmluZ0NvbmRpdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHNxbCArPSBcIiBIQVZJTkcgXCIgKyBoYXZpbmdDb25kaXRpb25zLmpvaW4oXCIgQU5EIFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KHNxbCwge1xyXG4gICAgICB2YWx1ZXM6IHZhbHVlcyxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGlmIChmaWx0ZXJzLmRvY3Rvcl9pZCkge1xyXG4gICAgLy8gICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA/IHJlc3VsdFswXSA6IG51bGw7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdCA/IChyZXN1bHQgYXMgdW5rbm93biBhcyBEb2N0b3JzRFRPW10pIDogbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZpY2VzKCkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnNlcnZpY2VzYFxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vc3RQb3B1bGFyRG9jdG9ycygpOiBQcm9taXNlPGFueT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4vLyAgICAgICBgXHJcbi8vICAgICAgIFNFTEVDVFxyXG4vLyAgICAgICAgIGQuKixcclxuLy8gICAgICAgICBDT0FMRVNDRShsZC5pZCwgJ05vIExvY2F0aW9uJykgQVMgbG9jYXRpb24sXHJcbi8vICAgICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4vLyAgICAgICAgIChTRUxFQ1QgQVZHKHIucmF0aW5nKVxyXG4vLyAgICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByXHJcbi8vICAgICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZyxcclxuLy8gICAgICAgICAoU0VMRUNUIENPVU5UKHIucmF0aW5nKVxyXG4vLyAgICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByXHJcbi8vICAgICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyB0b3RhbF9yYXRpbmdzXHJcbi8vICAgICAgIEZST01cclxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4vLyAgICAgICBMRUZUIEpPSU5cclxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9sb2NhdGlvbnMgbGQgT04gZC5pZCA9IGxkLmlkXHJcbi8vICAgICAgIExFRlQgSk9JTlxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgcyBPTiBkLnNwZWNpYWx0eV9pZCA9IHMuaWRcclxuLy8gICAgICAgSEFWSU5HXHJcbi8vICAgICAgICAgdG90YWxfcmF0aW5ncyA+IDNcclxuLy8gICAgICAgT1JERVIgQllcclxuLy8gICAgICAgICBhdmVyYWdlX3JhdGluZyBERVNDLFxyXG4vLyAgICAgICAgIHRvdGFsX3JhdGluZ3MgREVTQ1xyXG4vLyAgICAgICBMSU1JVCAxMDtcclxuLy8gICAgICAgYFxyXG4vLyAgICAgKTtcclxuLy8gICAgIHJldHVybiByZXN1bHQ7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhcclxuICBtb2JpbGU6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBTRUxFQ1QgbW9iaWxlIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JzXHJcbiAgICAgIHdoZXJlIG1vYmlsZT0/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW21vYmlsZV0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yRGV0YWlsKGRvY3RvcklkOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBzcWwgPSBgXHJcbi8vICAgICAgIFNFTEVDVFxyXG4vLyAgICAgICAgIGQuKixcclxuLy8gICAgICAgICBDT0FMRVNDRShsZC5jb3VudHJ5LCAnJykgQVMgY291bnRyeSxcclxuLy8gICAgICAgICBDT0FMRVNDRShsZC5sYXRpdHVkZSwgMCkgQVMgbGF0aXR1ZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQubG9uZ2l0dWRlLCAwKSBBUyBsb25naXR1ZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuYWRkcmVzc19saW5lMSwgJycpIEFTIGFkZHJlc3NfbGluZTEsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuYWRkcmVzc19saW5lMiwgJycpIEFTIGFkZHJlc3NfbGluZTIsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuemlwY29kZSwgJycpIEFTIHppcGNvZGUsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UoQVZHKHIucmF0aW5nKSwgMCkgQVMgYXZlcmFnZV9yYXRpbmcsXHJcbi8vICAgICAgICAgQ09BTEVTQ0UoQVZHKHIucHJvZmVzc2lvbmFsX2RlbWVhbm9yKSwgMCkgQVMgYXZnX3Byb2Zlc3Npb25hbF9kZW1lYW5vcixcclxuLy8gICAgICAgICBDT0FMRVNDRShBVkcoci5zdWZmaWNpZW50X3RpbWUpLCAwKSBBUyBhdmdfc3VmZmljaWVudF90aW1lLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLnNraWxsKSwgMCkgQVMgYXZnX3NraWxsLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLnN0YWZmX2JlaGF2aW9yKSwgMCkgQVMgYXZnX3N0YWZmX2JlaGF2aW9yLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEFWRyhyLmNsaW5pY19jb25kaXRpb24pLCAwKSBBUyBhdmdfY2xpbmljX2NvbmRpdGlvbixcclxuLy8gICAgICAgICBDT1VOVChyLmlkKSBBUyB0b3RhbF9yZXZpZXdzLFxyXG4vLyAgICAgICAgIENPQUxFU0NFKEdST1VQX0NPTkNBVChESVNUSU5DVCByLmNvbW1lbnQgU0VQQVJBVE9SICcgfCAnKSwgJ05vIGNvbW1lbnRzJykgQVMgY29tbWVudHMsXHJcbi8vICAgICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4vLyAgICAgICAgIGkubmFtZSBBUyBpbnN1cmFuY2VfbmFtZSxcclxuLy8gICAgICAgICBDQVNFXHJcbi8vICAgICAgICAgICBXSEVOIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBkbCBXSEVSRSBkbC5kb2N0b3JfaWQgPSBkLmlkKVxyXG4vLyAgICAgICAgICAgVEhFTiAxIEVMU0UgMFxyXG4vLyAgICAgICAgIEVORCBBUyBpc0xpa2VkXHJcbi8vICAgICAgICAgSlNPTl9BUlJBWUFHRyhcclxuLy8gICAgICAgICBKU09OX09CSkVDVChcclxuLy8gICAgICAgICAgICdjb3VudHJ5JywgbGQuY291bnRyeSxcclxuLy8gICAgICAgICAgICdsYXRpdHVkZScsIGxkLmxhdGl0dWRlLFxyXG4vLyAgICAgICAgICAgJ2xvbmdpdHVkZScsIGxkLmxvbmdpdHVkZSxcclxuLy8gICAgICAgICAgICdhZGRyZXNzX2xpbmUxJywgbGQuYWRkcmVzc19saW5lMSxcclxuLy8gICAgICAgICAgICdhZGRyZXNzX2xpbmUyJywgbGQuYWRkcmVzc19saW5lMixcclxuLy8gICAgICAgICAgICd6aXBjb2RlJywgbGQuemlwY29kZSxcclxuLy8gICAgICAgICAgICdjaXR5JyxjaS5uYW1lLFxyXG4vLyAgICAgICAgICAgJ3N0YXRlJyxjaS5zdGF0ZVxyXG4vLyAgICAgICAgIClcclxuLy8gICAgICAgKSBBUyBhZGRyZXNzZXNcclxuLy8gICAgICAgRlJPTVxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9ycyBkXHJcbi8vICAgICAgIExFRlQgSk9JTlxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xvY2F0aW9ucyBsZCBPTiBkLmlkID0gbGQuZG9jdG9yX2lkIEFORCBsZC5pc19wcmltYXJ5ID0gMVxyXG4vLyAgICAgICBMRUZUIEpPSU5cclxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9yZXZpZXdzIHIgT04gZC5pZCA9IHIuZG9jdG9yX2lkXHJcbi8vICAgICAgIExFRlQgSk9JTlxyXG4vLyAgICAgICAgICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXMgcyBPTiBkLnNwZWNpYWx0eV9pZCA9IHMuaWRcclxuLy8gICAgICAgTEVGVCBKT0lOXHJcbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5pbnN1cmFuY2VzIGkgT04gZC5pbnN1cmFuY2VfaWQgPSBpLmlkXHJcbi8vICAgICAgIFdIRVJFXHJcbi8vICAgICAgICAgZC5pZCA9ID9cclxuLy8gICAgICAgR1JPVVAgQllcclxuLy8gICAgICAgICBkLmlkLCAgbGQuY291bnRyeSwgbGQubGF0aXR1ZGUsIGxkLmxvbmdpdHVkZSwgbGQuYWRkcmVzc19saW5lMSxcclxuLy8gICAgICAgICBsZC5hZGRyZXNzX2xpbmUyLCBsZC56aXBjb2RlLCBzLm5hbWUsIGkubmFtZTtcclxuLy8gICAgIGA7XHJcblxyXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihzcWwsIHsgdmFsdWVzOiBbZG9jdG9ySWRdIH0pO1xyXG5cclxuLy8gICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC5sZW5ndGggPT09IDApIHtcclxuLy8gICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJEb2N0b3Igbm90IGZvdW5kXCIgfTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICByZXR1cm4gcmVzdWx0WzBdOyAvLyBSZXR1cm4gc2luZ2xlIGRvY3RvciBvYmplY3QgaW5zdGVhZCBvZiBhbiBhcnJheVxyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZG9jdG9yIGRldGFpbHM6XCIsIGVycm9yKTtcclxuLy8gICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRG9jdG9yKGRvY3RvckRhdGE6IERvY3RvcnNEVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgICBTRVQgbmFtZSA9ID9cclxuICAgICAgICBXSEVSRSBpZCA9ID9cclxuICAgICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbZG9jdG9yRGF0YS5maXJzdF9uYW1lLCBkb2N0b3JEYXRhLmlkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWNvcmREb2N0b3JQcm9maWxlVmlldyhpZDogYW55KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgXHJcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LmRvY3RvcnNcclxuICAgICAgU0VUIGNsaWNrX2NvdW50ID0gY2xpY2tfY291bnQgKyAxXHJcbiAgICAgIFdIRVJFIGlkID0gP1xyXG4gICAgICBgLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbaWRdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVwZGF0ZVJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRDb21tZW50KGNvbW1lbnQ6IENvbW1lbnRzRFRPKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jb21tZW50c1xyXG4gICAgIChpZCwgaWQsIGNvbW1lbnRfdGV4dCwgcmF0aW5nKVxyXG4gICAgICAgICBWQUxVRVMgKD8sID8sID8sID8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbY29tbWVudC5pZCwgY29tbWVudC5pZCwgY29tbWVudC5jb21tZW50X3RleHQsIGNvbW1lbnQucmF0aW5nXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTcGVjaWFsdGllcygpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqXHJcbiAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0uc3BlY2lhbHRpZXNgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdWJTcGVjaWFsdGllc0J5SWQoc3BlY2lhbHR5SWQ6IG51bWJlcikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBsaW1pdCA9IDIwOyAvLyBEZWZhdWx0IGxpbWl0XHJcbiAgICBjb25zdCBvZmZzZXQgPSAwOyAvLyBEZWZhdWx0IG9mZnNldFxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCBcclxuICAgICAgcy5pZCBBUyBzcGVjaWFsdHlfaWQsXHJcbiAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgcy5pbWFnZXMgQVMgc3BlY2lhbHR5X2ltYWdlLFxyXG4gICAgICBzcy5pZCBBUyBzdWJfc3BlY2lhbHR5X2lkLFxyXG4gICAgICBzcy5uYW1lIEFTIHN1Yl9zcGVjaWFsdHlfbmFtZSxcclxuICAgICAgc3MuaW1hZ2VfdXJsIEFTIHN1Yl9zcGVjaWFsdHlfaW1hZ2VcclxuICAgIEZST00gJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzXHJcbiAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5zdWJfc3BlY2lhbHRpZXMgc3MgXHJcbiAgICBPTiBzLmlkID0gc3Muc3BlY2lhbHR5X2lkXHJcbiAgICBXSEVSRSBzLmlkID0gPyBcclxuICAgIE9SREVSIEJZIHNzLmlkO2AsXHJcbiAgICAgIHsgdmFsdWVzOiBbc3BlY2lhbHR5SWRdIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0Lm1hcCgocm93KSA9PiAoe1xyXG4gICAgICBpZDogcm93LnN1Yl9zcGVjaWFsdHlfaWQgfHwgbnVsbCxcclxuICAgICAgbmFtZTogcm93LnN1Yl9zcGVjaWFsdHlfbmFtZSB8fCBcIk4vQVwiLFxyXG4gICAgICBpbWFnZXM6IHJvdy5zdWJfc3BlY2lhbHR5X2ltYWdlIHx8IFwiZGVmYXVsdF9pbWFnZS5qcGVnXCIsXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsdGVyU3BlY2lhbHR5QnlJZChzcGVjaWFsdHk6IGFueSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgICAgYFxyXG4gICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGQuKiwgXHJcbiAgICAgICAgQ09BTEVTQ0UobGQubG9jYXRpb24sICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxyXG4gICAgICAgIHMubmFtZSBBUyBzcGVjaWFsdHlfbmFtZSxcclxuICAgICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIFxyXG4gICAgICAgICBGUk9NICR7Y29yZVNjaGVtYX0ucmF0aW5ncyByIFxyXG4gICAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcclxuICAgICAgRlJPTSBcclxuICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3RvcnMgZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JfbG9jYXRpb25zIGxkIE9OIGQuaWQgPSBsZC5pZFxyXG4gICAgICBMRUZUIEpPSU4gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gIFxyXG4gICAgICBXSEVSRSBcclxuICAgICAgcy5pZCA9ID87XHJcbiAgICAgIGAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtzcGVjaWFsdHldLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCIuLi5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNCeVNwZWNpYWx0eShzcGVjaWFsdHlJZDogbnVtYmVyKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHMuaWQgQVMgc3VnZ2VzdGlvbl9pZCwgcy50aXRsZSwgcy5kZXNjcmlwdGlvbiwgc3MubmFtZSBBUyBzdWJfc3BlY2lhbHR5X25hbWVcclxuICAgICAgRlJPTSBjbGluaWNfZGIuc3VnZ2VzdGlvbnMgc1xyXG4gICAgICBKT0lOIGNsaW5pY19kYi5zdWJfc3BlY2lhbHRpZXMgc3MgT04gcy5zdWJfc3BlY2lhbHR5X2lkID0gc3MuaWRcclxuICAgICAgSk9JTiBjbGluaWNfZGIuc3BlY2lhbHRpZXMgc3AgT04gc3Muc3BlY2lhbHR5X2lkID0gc3AuaWRcclxuICAgICAgV0hFUkUgc3AuaWQgPSA/O1xyXG4gICAgYCxcclxuICAgICAgW3NwZWNpYWx0eUlkXVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbHRlclNlcnZpY2VzQnlJZChzZXJ2aWNlSWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICBTRUxFQ1QgXHJcbiAgICAgIGQuKiwgXHJcbiAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcclxuICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAoU0VMRUNUIEFWRyhyYXRpbmcpIFxyXG4gICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgciBcclxuICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZ1xyXG4gICAgRlJPTSBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5sb2NhdGlvbnNfZG9jdG9ycyBsZCBPTiBkLmlkID0gbGQuaWRcclxuICAgIExFRlQgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxyXG4gICAgSk9JTiBcclxuICAgICAgJHtjb3JlU2NoZW1hfS5zZXJ2aWNlcyBzcnYgIE9OIHNydi5zcGVjaWFsdHlfaWQgPSBzLmlkXHJcbiAgICBXSEVSRSBcclxuICAgIHNydi5pZCA9ID87XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtzZXJ2aWNlSWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4aXN0aW5nRmVlZGJhY2socmV2aWV3RGF0YTogUmV2aWV3c0RUTykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3cyBXSEVSRSB1c2VyX2lkID0gPyBBTkQgZG9jdG9yX2lkID0/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbcmV2aWV3RGF0YS51c2VyX2lkLCByZXZpZXdEYXRhLmRvY3Rvcl9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0UmV2aWV3cyhyZXZpZXdEYXRhOiBSZXZpZXdzRFRPKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5kb2N0b3JfcmV2aWV3c1xyXG4gICAgICAgIChkb2N0b3JfaWQsXHJcbiAgICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgICAgY29tbWVudCxcclxuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucyxcclxuICAgICAgICAgIHJhdGluZyxcclxuICAgICAgICAgIHByb2Zlc3Npb25hbF9kZW1lYW5vcixcclxuICAgICAgICAgIHN1ZmZpY2llbnRfdGltZSxcclxuICAgICAgICAgIHNraWxsLFxyXG4gICAgICAgICAgc3RhZmZfYmVoYXZpb3IsXHJcbiAgICAgICAgICBjbGluaWNfY29uZGl0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPyw/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIHJldmlld0RhdGEuZG9jdG9yX2lkLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS51c2VyX2lkLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5jb21tZW50LFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmcsXHJcbiAgICAgICAgICByZXZpZXdEYXRhLnJlY29tbWVuZGF0aW9ucyxcclxuICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5wcm9mZXNzaW9uYWxfZGVtZWFub3IsXHJcbiAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3Muc3VmZmljaWVudF90aW1lLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnNraWxsLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLnN0YWZmX2JlaGF2aW9yLFxyXG4gICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLmNsaW5pY19jb25kaXRpb24sXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgc2VydmVyIEVycm9yXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJldmlld3MoKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5yZXZpZXdzXHJcbiAgICBgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdG9yU2NoYWR1bGVzKFxyXG4gIGRvY3Rvcl9pZDogbnVtYmVyLFxyXG4gIGNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZT86IHN0cmluZ1xyXG4pIHtcclxuICBjb25zdCBxdWVyeVBhcmFtczogYW55W10gPSBbZG9jdG9yX2lkXTtcclxuICB0cnkge1xyXG4gICAgbGV0IHF1ZXJ5U3RyID0gYFxyXG4gICBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0uZG9jdG9yX3NjaGVkdWxlcyBkc1xyXG4gICAgICBXSEVSRSBkb2N0b3JfaWQgPSA/XHJcbiAgICBgO1xyXG5cclxuICAgIGlmIChjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUpIHtcclxuICAgICAgcXVlcnlTdHIgKz0gXCIgQU5EIGRzLmNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSA9P1wiO1xyXG4gICAgICBxdWVyeVBhcmFtcy5wdXNoKGNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KHF1ZXJ5U3RyLCB7XHJcbiAgICAgIHZhbHVlczogcXVlcnlQYXJhbXMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgc2VydmVyIEVycm9yXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eShzY2hlZHVsZV9pZDogbnVtYmVyKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUICpcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9hdmFpbGFibGVfdGltZXMgXHJcbiAgICAgIFdIRVJFIHNjaGVkdWxlX2lkID0gPztcclxuICAgICAgYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW3NjaGVkdWxlX2lkXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBCZXR0ZXIgdG8gdXNlIGNvbnNvbGUuZXJyb3IgZm9yIGVycm9yc1xyXG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYm9va2VkKFxyXG4gIGRvY3Rvcl9zY2hlZHVsZV9pZDogbnVtYmVyLFxyXG4gIHBhdGllbnRfaWQ6IG51bWJlcixcclxuICBjbGluaWNfaWQ6IG51bWJlcixcclxuICBhcHBvaW50bWVudF9kYXRlOiBzdHJpbmcsXHJcbiAgYXBwb2ludG1lbnRfdGltZTogc3RyaW5nXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbZXhpc3RpbmddID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCBpc19ib29rZWQgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3Rvcl9hdmFpbGFibGVfdGltZXMgV0hFUkUgaWQgPSA/IEZPUiBVUERBVEVgLFxyXG4gICAgICB7IHZhbHVlczogW2RvY3Rvcl9zY2hlZHVsZV9pZF0gfVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIWV4aXN0aW5nIHx8IGV4aXN0aW5nWzBdPy5pc19ib29rZWQgPT09IDEpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkRvY3RvciBzY2hlZHVsZSBpcyBhbHJlZGF5IGJvb29rZWQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFwcG9pbnRtZW50UmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LmFwcG9pbnRtZW50c1xyXG4gICAgICAocGF0aWVudF9pZCxkb2N0b3Jfc2NoZWR1bGVfaWQsY2xpbmljX2lkLGFwcG9pbnRtZW50X2RhdGUsYXBwb2ludG1lbnRfdGltZSxzdGF0dXMpXHJcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgJ1NjaGVkdWxlZCcpO2AsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIHBhdGllbnRfaWQsXHJcbiAgICAgICAgICBkb2N0b3Jfc2NoZWR1bGVfaWQsXHJcbiAgICAgICAgICBjbGluaWNfaWQsXHJcbiAgICAgICAgICBhcHBvaW50bWVudF9kYXRlLFxyXG4gICAgICAgICAgYXBwb2ludG1lbnRfdGltZSxcclxuICAgICAgICBdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogXCJBcHBvaW50bWVudCBzdWNjZXNzZnVseSBib29rZWRcIixcclxuICAgICAgYXBwb2ludG1lbnRJZDogYXBwb2ludG1lbnRSZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImZpbmFsXCIpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFhQUEsT0FBQSxDQUFBQyxTQUFBLEdBQUFBLFNBQUE7QUE0Q0FELE9BQUEsQ0FBQUUsSUFBQSxHQUFBQSxJQUFBO0FBb0RBRixPQUFBLENBQUFHLFlBQUEsR0FBQUEsWUFBQTtBQXFCQUgsT0FBQSxDQUFBSSxVQUFBLEdBQUFBLFVBQUE7QUFrSUFKLE9BQUEsQ0FBQUssV0FBQSxHQUFBQSxXQUFBO0FBMENBTCxPQUFBLENBQUFNLDRCQUFBLEdBQUFBLDRCQUFBO0FBa0ZBTixPQUFBLENBQUFPLFlBQUEsR0FBQUEsWUFBQTtBQWNBUCxPQUFBLENBQUFRLHVCQUFBLEdBQUFBLHVCQUFBO0FBbUJBUixPQUFBLENBQUFTLFVBQUEsR0FBQUEsVUFBQTtBQVlBVCxPQUFBLENBQUFVLGNBQUEsR0FBQUEsY0FBQTtBQU9BVixPQUFBLENBQUFXLHFCQUFBLEdBQUFBLHFCQUFBO0FBOEJBWCxPQUFBLENBQUFZLG1CQUFBLEdBQUFBLG1CQUFBO0FBZ0NBWixPQUFBLENBQUFhLHlCQUFBLEdBQUFBLHlCQUFBO0FBb0JBYixPQUFBLENBQUFjLGtCQUFBLEdBQUFBLGtCQUFBO0FBNEJBZCxPQUFBLENBQUFlLGdCQUFBLEdBQUFBLGdCQUFBO0FBVUFmLE9BQUEsQ0FBQWdCLGFBQUEsR0FBQUEsYUFBQTtBQXFDQWhCLE9BQUEsQ0FBQWlCLFVBQUEsR0FBQUEsVUFBQTtBQVNBakIsT0FBQSxDQUFBa0IsZUFBQSxHQUFBQSxlQUFBO0FBeUJBbEIsT0FBQSxDQUFBbUIsOEJBQUEsR0FBQUEsOEJBQUE7QUFtQkFuQixPQUFBLENBQUFvQixNQUFBLEdBQUFBLE1BQUE7QUF0b0JBLE1BQUFDLE9BQUEsR0FBQUMsT0FBQTtBQVFBLE1BQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxRQUFBLEdBQUFDLGVBQUEsQ0FBQUosT0FBQTtBQUNBLE1BQUFLLE1BQUEsR0FBQUwsT0FBQTtBQUVBLFNBQXNCckIsU0FBU0EsQ0FBQzJCLElBQWdCOztJQUM5QyxNQUFNO01BQUVDO0lBQVEsQ0FBRSxHQUFHRCxJQUFJLENBQUNDLFFBQVE7SUFDbEMsTUFBTTtNQUFFQztJQUFlLENBQUUsR0FBR0YsSUFBSSxDQUFDQyxRQUFRO0lBRXpDLE1BQU1FLFVBQVUsR0FBRztNQUFFRixRQUFRO01BQUVDO0lBQWUsQ0FBRTtJQUNoRCxNQUFNRSxhQUFhLEdBQUdSLFFBQUEsQ0FBQVMsWUFBWSxDQUFDQyxjQUFjLENBQy9DLGlCQUFpQixFQUNqQkgsVUFBVSxDQUNYO0lBQ0QsTUFBTUksVUFBVSxHQUFHLEVBQUU7SUFDckIsTUFBTUMsY0FBYyxHQUFHLE1BQU1YLFFBQUEsQ0FBQVksT0FBTSxDQUFDQyxJQUFJLENBQUNOLGFBQWEsRUFBRUcsVUFBVSxDQUFDO0lBRW5FLElBQUlILGFBQWEsQ0FBQ08sS0FBSyxFQUFFO01BQ3ZCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQztJQUM3RDtJQUNBLE1BQU1DLEtBQUssR0FBRyxJQUFBZixNQUFBLENBQUFnQixFQUFNLEdBQUU7SUFFdEIsSUFBSTtNQUNGLE1BQU1DLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCLGVBQWV4QixPQUFBLENBQUF5QixVQUFVOztvQ0FFSyxFQUM5QjtRQUNFQyxNQUFNLEVBQUUsQ0FDTkwsS0FBSyxFQUNMZCxJQUFJLENBQUNvQixVQUFVLEVBQ2ZwQixJQUFJLENBQUNxQixTQUFTLEVBQ2RyQixJQUFJLENBQUNzQixLQUFLLEVBQ1ZkLGNBQWMsRUFDZFIsSUFBSSxDQUFDdUIsWUFBWSxFQUNqQnZCLElBQUksQ0FBQ3dCLFdBQVcsRUFDaEJ4QixJQUFJLENBQUN5QixLQUFLLEVBQ1YsSUFBSUMsSUFBSSxFQUFFLEVBQ1YsSUFBSUEsSUFBSSxFQUFFO09BRWIsQ0FDRjtNQUNELE9BQU9WLE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0wsS0FBVSxFQUFFO01BQ25CZ0IsT0FBTyxDQUFDaEIsS0FBSyxDQUFDLGlCQUFpQixFQUFFQSxLQUFLLENBQUNpQixPQUFPLENBQUM7TUFDL0MsTUFBTSxJQUFJakMsZ0JBQUEsQ0FBQWlCLGFBQWEsQ0FBQ2lCLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQztJQUNwRTtFQUNGLENBQUM7O0FBRUQsU0FBc0J2RCxJQUFJQSxDQUFDMEIsSUFBYTs7SUFDdEMsTUFBTThCLFlBQVksR0FBRyxNQUFNLElBQUFyQyxPQUFBLENBQUF3QixLQUFLLEVBQzlCLGlCQUFpQnhCLE9BQUEsQ0FBQXlCLFVBQVU7NENBQ2EsRUFDeEM7TUFDRUMsTUFBTSxFQUFFLENBQUNuQixJQUFJLENBQUMrQixTQUFTLEVBQUUvQixJQUFJLENBQUNnQyxVQUFVO0tBQ3pDLENBQ0Y7SUFFRCxJQUFJRixZQUFZLENBQUNHLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDM0I7TUFDQSxNQUFNLElBQUF4QyxPQUFBLENBQUF3QixLQUFLLEVBQ1QsZUFBZXhCLE9BQUEsQ0FBQXlCLFVBQVU7OENBQ2UsRUFDeEM7UUFDRUMsTUFBTSxFQUFFLENBQUNuQixJQUFJLENBQUMrQixTQUFTLEVBQUUvQixJQUFJLENBQUNnQyxVQUFVO09BQ3pDLENBQ0Y7SUFDSCxDQUFDLE1BQU07TUFDTDtNQUNBLE1BQU0sSUFBQXZDLE9BQUEsQ0FBQXdCLEtBQUssRUFDVCxlQUFleEIsT0FBQSxDQUFBeUIsVUFBVTt3QkFDUCxFQUNsQjtRQUNFQyxNQUFNLEVBQUUsQ0FBQ25CLElBQUksQ0FBQytCLFNBQVMsRUFBRS9CLElBQUksQ0FBQ2dDLFVBQVUsRUFBRSxDQUFDO09BQzVDLENBQ0Y7SUFDSDtJQUVBO0lBQ0EsTUFBTUUsVUFBVSxHQUFHLE1BQU0sSUFBQXpDLE9BQUEsQ0FBQXdCLEtBQUssRUFDNUIsaUNBQWlDeEIsT0FBQSxDQUFBeUIsVUFBVTt5QkFDdEIsRUFDckI7TUFDRUMsTUFBTSxFQUFFLENBQUNuQixJQUFJLENBQUMrQixTQUFTO0tBQ3hCLENBQ0Y7SUFFRCxNQUFNSSxPQUFPLEdBQUdELFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztJQUUvQyxNQUFNLElBQUEzQyxPQUFBLENBQUF3QixLQUFLLEVBQ1QsVUFBVXhCLE9BQUEsQ0FBQXlCLFVBQVU7O2tCQUVOLEVBQ2Q7TUFDRUMsTUFBTSxFQUFFLENBQUNnQixPQUFPLEVBQUVuQyxJQUFJLENBQUMrQixTQUFTO0tBQ2pDLENBQ0Y7SUFFRCxPQUFPO01BQUVNLE9BQU8sRUFBRSxJQUFJO01BQUVGO0lBQU8sQ0FBRTtFQUNuQyxDQUFDOztBQUVELFNBQXNCNUQsWUFBWUEsQ0FBQ3lELFVBQWtCOztJQUNuRCxJQUFJO01BQ0YsTUFBTWhCLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCOzs7ZUFHU3hCLE9BQUEsQ0FBQXlCLFVBQVU7b0JBQ0x6QixPQUFBLENBQUF5QixVQUFVOztnQ0FFRSxFQUMxQjtRQUNFQyxNQUFNLEVBQUUsQ0FBQ2EsVUFBVTtPQUNwQixDQUNGO01BQ0QsT0FBT2hCLE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0wsS0FBSyxFQUFFO01BQ2RnQixPQUFPLENBQUNXLEdBQUcsQ0FBQzNCLEtBQUssQ0FBQztNQUNsQixNQUFNLElBQUloQixnQkFBQSxDQUFBaUIsYUFBYSxDQUFDaUIsY0FBYyxDQUFDLHdCQUF3QixDQUFDO0lBQ2xFO0VBQ0YsQ0FBQzs7QUFFRCxTQUFzQnJELFVBQVVBLENBQUMrRCxPQVVoQzs7SUFDQyxJQUFJO01BQ0YsSUFBSUMsR0FBRyxHQUFHOzs7Ozs7O2lDQU9tQi9DLE9BQUEsQ0FBQXlCLFVBQVU7Ozs7Ozs7O3FDQVFOekIsT0FBQSxDQUFBeUIsVUFBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBa0J2Q3pCLE9BQUEsQ0FBQXlCLFVBQVU7O1FBRVZ6QixPQUFBLENBQUF5QixVQUFVOztRQUVWekIsT0FBQSxDQUFBeUIsVUFBVTs7UUFFVnpCLE9BQUEsQ0FBQXlCLFVBQVU7O1FBRVZ6QixPQUFBLENBQUF5QixVQUFVOztRQUVWekIsT0FBQSxDQUFBeUIsVUFBVTs7UUFFVnpCLE9BQUEsQ0FBQXlCLFVBQVU7O1FBRVZ6QixPQUFBLENBQUF5QixVQUFVOztRQUVWekIsT0FBQSxDQUFBeUIsVUFBVTtHQUNmO01BRUMsTUFBTXVCLFVBQVUsR0FBYSxFQUFFO01BQy9CLE1BQU10QixNQUFNLEdBQVUsRUFBRTtNQUV4QixJQUFJb0IsT0FBTyxDQUFDUixTQUFTLEVBQUU7UUFDckJVLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUMzQnZCLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQ0gsT0FBTyxDQUFDUixTQUFTLENBQUM7TUFDaEM7TUFDQSxJQUFJUSxPQUFPLENBQUNJLElBQUksRUFBRTtRQUNoQkYsVUFBVSxDQUFDQyxJQUFJLENBQUMsK0NBQStDLENBQUM7UUFDaEV2QixNQUFNLENBQUN1QixJQUFJLENBQUMsSUFBSUgsT0FBTyxDQUFDSSxJQUFJLEdBQUcsQ0FBQztNQUNsQztNQUNBLElBQUlKLE9BQU8sQ0FBQ0ssWUFBWSxFQUFFO1FBQ3hCSCxVQUFVLENBQUNDLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDNUJ2QixNQUFNLENBQUN1QixJQUFJLENBQUNILE9BQU8sQ0FBQ0ssWUFBWSxDQUFDO01BQ25DO01BQ0EsSUFBSUwsT0FBTyxDQUFDTSxVQUFVLEVBQUU7UUFDdEJKLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ25DdkIsTUFBTSxDQUFDdUIsSUFBSSxDQUFDSCxPQUFPLENBQUNNLFVBQVUsQ0FBQztNQUNqQztNQUNBLElBQUlOLE9BQU8sQ0FBQ08sT0FBTyxFQUFFO1FBQ25CTCxVQUFVLENBQUNDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUNqQ3ZCLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQ0gsT0FBTyxDQUFDTyxPQUFPLENBQUM7TUFDOUI7TUFDQSxJQUFJUCxPQUFPLENBQUNQLFVBQVUsRUFBRTtRQUN0QlMsVUFBVSxDQUFDQyxJQUFJLENBQUMsa0JBQWtCLENBQUM7UUFDbkN2QixNQUFNLENBQUN1QixJQUFJLENBQUNILE9BQU8sQ0FBQ1AsVUFBVSxDQUFDO01BQ2pDO01BQ0EsSUFBSVMsVUFBVSxDQUFDUixNQUFNLEVBQUU7UUFDckJPLEdBQUcsSUFBSSxTQUFTLEdBQUdDLFVBQVUsQ0FBQ00sSUFBSSxDQUFDLE9BQU8sQ0FBQztNQUM3QztNQUVBUCxHQUFHLElBQUksMkhBQTJIO01BRWxJLE1BQU1RLGdCQUFnQixHQUFhLEVBQUU7TUFDckMsSUFBSVQsT0FBTyxDQUFDVSxTQUFTLEtBQUtDLFNBQVMsRUFBRTtRQUNuQ0YsZ0JBQWdCLENBQUNOLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztRQUMzQ3ZCLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQ0gsT0FBTyxDQUFDVSxTQUFTLENBQUM7TUFDaEM7TUFDQSxJQUFJVixPQUFPLENBQUNZLFNBQVMsS0FBS0QsU0FBUyxFQUFFO1FBQ25DRixnQkFBZ0IsQ0FBQ04sSUFBSSxDQUFDLG9CQUFvQixDQUFDO1FBQzNDdkIsTUFBTSxDQUFDdUIsSUFBSSxDQUFDSCxPQUFPLENBQUNZLFNBQVMsQ0FBQztNQUNoQztNQUVBLElBQUlaLE9BQU8sQ0FBQ2EsU0FBUyxFQUFFO1FBQ3JCSixnQkFBZ0IsQ0FBQ04sSUFBSSxDQUFDLG9CQUFvQixDQUFDO01BQzdDO01BRUEsSUFBSU0sZ0JBQWdCLENBQUNmLE1BQU0sRUFBRTtRQUMzQk8sR0FBRyxJQUFJLFVBQVUsR0FBR1EsZ0JBQWdCLENBQUNELElBQUksQ0FBQyxPQUFPLENBQUM7TUFDcEQ7TUFFQSxNQUFNL0IsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFBa0J1QixHQUFHLEVBQUU7UUFDL0NyQixNQUFNLEVBQUVBO09BQ1QsQ0FBQztNQUVGO01BQ0E7TUFDQTtNQUVBLE9BQU9ILE1BQU0sR0FBSUEsTUFBa0MsR0FBRyxJQUFJO0lBQzVELENBQUMsQ0FBQyxPQUFPTCxLQUFLLEVBQUU7TUFDZGdCLE9BQU8sQ0FBQ2hCLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BQ3BCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNpQixjQUFjLENBQUMsK0JBQStCLENBQUM7SUFDekU7RUFDRixDQUFDOztBQUVELFNBQXNCcEQsV0FBV0EsQ0FBQTs7SUFDL0IsTUFBTXVDLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCLGlCQUFpQnhCLE9BQUEsQ0FBQXlCLFVBQVUsV0FBVyxDQUN2QztJQUNELE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsU0FBc0J0Qyw0QkFBNEJBLENBQ2hEMkUsTUFBYzs7SUFFZCxNQUFNckMsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEI7MkJBQ3VCeEIsT0FBQSxDQUFBeUIsVUFBVTs7T0FFOUIsRUFDSDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ2tDLE1BQU07S0FDaEIsQ0FDRjtJQUNELE9BQU9yQyxNQUFNO0VBQ2YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFzQnJDLFlBQVlBLENBQUMyRSxVQUFzQjs7SUFDdkQsTUFBTXRDLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCO2lCQUNheEIsT0FBQSxDQUFBeUIsVUFBVTs7O09BR3BCLEVBQ0g7TUFDRUMsTUFBTSxFQUFFLENBQUNtQyxVQUFVLENBQUNsQyxVQUFVLEVBQUVrQyxVQUFVLENBQUNDLEVBQUU7S0FDOUMsQ0FDRjtJQUNELE9BQU92QyxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQnBDLHVCQUF1QkEsQ0FBQzJFLEVBQU87O0lBQ25ELElBQUk7TUFDRixNQUFNQyxZQUFZLEdBQUcsTUFBTSxJQUFBL0QsT0FBQSxDQUFBd0IsS0FBSyxFQUM5QjtlQUNTeEIsT0FBQSxDQUFBeUIsVUFBVTs7O09BR2xCLEVBQ0Q7UUFDRUMsTUFBTSxFQUFFLENBQUNvQyxFQUFFO09BQ1osQ0FDRjtNQUNELE9BQU9DLFlBQVk7SUFDckIsQ0FBQyxDQUFDLE9BQU83QyxLQUFLLEVBQUU7TUFDZGdCLE9BQU8sQ0FBQ1csR0FBRyxDQUFDM0IsS0FBSyxDQUFDO01BQ2xCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNpQixjQUFjLENBQUMsK0JBQStCLENBQUM7SUFDekU7RUFDRixDQUFDOztBQUVELFNBQXNCaEQsVUFBVUEsQ0FBQzRFLE9BQW9COztJQUNuRCxNQUFNekMsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEIsZUFBZXhCLE9BQUEsQ0FBQXlCLFVBQVU7OzZCQUVBLEVBQ3pCO01BQ0VDLE1BQU0sRUFBRSxDQUFDc0MsT0FBTyxDQUFDRixFQUFFLEVBQUVFLE9BQU8sQ0FBQ0YsRUFBRSxFQUFFRSxPQUFPLENBQUNDLFlBQVksRUFBRUQsT0FBTyxDQUFDRSxNQUFNO0tBQ3RFLENBQ0Y7SUFDRCxPQUFPM0MsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0JsQyxjQUFjQSxDQUFBOztJQUNsQyxNQUFNa0MsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEI7Y0FDVXhCLE9BQUEsQ0FBQXlCLFVBQVUsY0FBYyxDQUNuQztJQUNELE9BQU9GLE1BQU07RUFDZixDQUFDOztBQUNELFNBQXNCakMscUJBQXFCQSxDQUFDNkUsV0FBbUI7O0lBQzdELElBQUk7TUFDRixNQUFNQyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUM7TUFDbEIsTUFBTUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO01BQ2xCLE1BQU05QyxNQUFNLEdBQUcsTUFBTSxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUN4Qjs7Ozs7OztXQU9LeEIsT0FBQSxDQUFBeUIsVUFBVTtnQkFDTHpCLE9BQUEsQ0FBQXlCLFVBQVU7OztvQkFHTixFQUNkO1FBQUVDLE1BQU0sRUFBRSxDQUFDeUMsV0FBVztNQUFDLENBQUUsQ0FDMUI7TUFDRCxPQUFPNUMsTUFBTSxDQUFDK0MsR0FBRyxDQUFFQyxHQUFHLEtBQU07UUFDMUJULEVBQUUsRUFBRVMsR0FBRyxDQUFDQyxnQkFBZ0IsSUFBSSxJQUFJO1FBQ2hDdEIsSUFBSSxFQUFFcUIsR0FBRyxDQUFDRSxrQkFBa0IsSUFBSSxLQUFLO1FBQ3JDQyxNQUFNLEVBQUVILEdBQUcsQ0FBQ0ksbUJBQW1CLElBQUk7T0FDcEMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLE9BQU96RCxLQUFLLEVBQUU7TUFDZGdCLE9BQU8sQ0FBQ1csR0FBRyxDQUFDM0IsS0FBSyxDQUFDO01BQ2xCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNpQixjQUFjLENBQUMsK0JBQStCLENBQUM7SUFDekU7RUFDRixDQUFDOztBQUVELFNBQXNCN0MsbUJBQW1CQSxDQUFDcUYsU0FBYzs7SUFDdEQsSUFBSTtNQUNGLE1BQU1yRCxNQUFNLEdBQUcsTUFBTSxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUN4Qjs7Ozs7O2dCQU1VeEIsT0FBQSxDQUFBeUIsVUFBVTs7O1VBR2hCekIsT0FBQSxDQUFBeUIsVUFBVTs7VUFFVnpCLE9BQUEsQ0FBQXlCLFVBQVU7O1VBRVZ6QixPQUFBLENBQUF5QixVQUFVOzs7O09BSWIsRUFDRDtRQUNFQyxNQUFNLEVBQUUsQ0FBQ2tELFNBQVM7T0FDbkIsQ0FDRjtNQUNELE9BQU9yRCxNQUFNO0lBQ2YsQ0FBQyxDQUFDLE9BQU9MLEtBQUssRUFBRTtNQUNkZ0IsT0FBTyxDQUFDVyxHQUFHLENBQUMzQixLQUFLLENBQUM7TUFDbEIsTUFBTSxJQUFJaEIsZ0JBQUEsQ0FBQWlCLGFBQWEsQ0FBQ2lCLGNBQWMsQ0FBQyxLQUFLLENBQUM7SUFDL0M7RUFDRixDQUFDOztBQUVELFNBQXNCNUMseUJBQXlCQSxDQUFDMkUsV0FBbUI7O0lBQ2pFLElBQUk7TUFDRixNQUFNNUMsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEI7Ozs7OztLQU1ELEVBQ0MsQ0FBQzJDLFdBQVcsQ0FBQyxDQUNkO01BRUQsT0FBTzVDLE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0wsS0FBSyxFQUFFO01BQ2RnQixPQUFPLENBQUNXLEdBQUcsQ0FBQzNCLEtBQUssQ0FBQztNQUNsQixNQUFNLElBQUloQixnQkFBQSxDQUFBaUIsYUFBYSxDQUFDaUIsY0FBYyxDQUFDLCtCQUErQixDQUFDO0lBQ3pFO0VBQ0YsQ0FBQzs7QUFFRCxTQUFzQjNDLGtCQUFrQkEsQ0FBQ29GLFNBQWlCOztJQUN4RCxNQUFNdEQsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEI7Ozs7OztjQU1VeEIsT0FBQSxDQUFBeUIsVUFBVTs7O1FBR2hCekIsT0FBQSxDQUFBeUIsVUFBVTs7UUFFVnpCLE9BQUEsQ0FBQXlCLFVBQVU7O1FBRVZ6QixPQUFBLENBQUF5QixVQUFVOztRQUVWekIsT0FBQSxDQUFBeUIsVUFBVTs7O0tBR2IsRUFDRDtNQUNFQyxNQUFNLEVBQUUsQ0FBQ21ELFNBQVM7S0FDbkIsQ0FDRjtJQUNELE9BQU90RCxNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQjdCLGdCQUFnQkEsQ0FBQ29GLFVBQXNCOztJQUMzRCxNQUFNdkQsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEIsaUJBQWlCeEIsT0FBQSxDQUFBeUIsVUFBVSxvREFBb0QsRUFDL0U7TUFDRUMsTUFBTSxFQUFFLENBQUNvRCxVQUFVLENBQUNDLE9BQU8sRUFBRUQsVUFBVSxDQUFDeEMsU0FBUztLQUNsRCxDQUNGO0lBQ0QsT0FBT2YsTUFBTTtFQUNmLENBQUM7O0FBRUQsU0FBc0I1QixhQUFhQSxDQUFDbUYsVUFBc0I7O0lBQ3hELElBQUk7TUFDRixNQUFNdkQsTUFBTSxHQUFHLE1BQU0sSUFBQXZCLE9BQUEsQ0FBQXdCLEtBQUssRUFDeEIsZUFBZXhCLE9BQUEsQ0FBQXlCLFVBQVU7Ozs7Ozs7Ozs7OzZDQVdjLEVBQ3ZDO1FBQ0VDLE1BQU0sRUFBRSxDQUNOb0QsVUFBVSxDQUFDeEMsU0FBUyxFQUNwQndDLFVBQVUsQ0FBQ0MsT0FBTyxFQUNsQkQsVUFBVSxDQUFDZCxPQUFPLEVBQ2xCYyxVQUFVLENBQUNaLE1BQU0sRUFDakJZLFVBQVUsQ0FBQ0UsZUFBZSxFQUMxQkYsVUFBVSxDQUFDRyxPQUFPLENBQUNDLHFCQUFxQixFQUN4Q0osVUFBVSxDQUFDRyxPQUFPLENBQUNFLGVBQWUsRUFDbENMLFVBQVUsQ0FBQ0csT0FBTyxDQUFDRyxLQUFLLEVBQ3hCTixVQUFVLENBQUNHLE9BQU8sQ0FBQ0ksY0FBYyxFQUNqQ1AsVUFBVSxDQUFDRyxPQUFPLENBQUNLLGdCQUFnQjtPQUV0QyxDQUNGO01BQ0QsT0FBTy9ELE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0wsS0FBSyxFQUFFO01BQ2RnQixPQUFPLENBQUNXLEdBQUcsQ0FBQzNCLEtBQUssQ0FBQztNQUNsQixNQUFNLElBQUloQixnQkFBQSxDQUFBaUIsYUFBYSxDQUFDaUIsY0FBYyxDQUFDLHVCQUF1QixDQUFDO0lBQ2pFO0VBQ0YsQ0FBQzs7QUFFRCxTQUFzQnhDLFVBQVVBLENBQUE7O0lBQzlCLE1BQU0yQixNQUFNLEdBQUcsTUFBTSxJQUFBdkIsT0FBQSxDQUFBd0IsS0FBSyxFQUN4QjtvQkFDZ0J4QixPQUFBLENBQUF5QixVQUFVO0tBQ3pCLENBQ0Y7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQjFCLGVBQWVBLENBQ25DeUMsU0FBaUIsRUFDakJpRCwyQkFBb0M7O0lBRXBDLE1BQU1DLFdBQVcsR0FBVSxDQUFDbEQsU0FBUyxDQUFDO0lBQ3RDLElBQUk7TUFDRixJQUFJbUQsUUFBUSxHQUFHO21CQUNBekYsT0FBQSxDQUFBeUIsVUFBVTs7S0FFeEI7TUFFRCxJQUFJOEQsMkJBQTJCLEVBQUU7UUFDL0JFLFFBQVEsSUFBSSx3Q0FBd0M7UUFDcERELFdBQVcsQ0FBQ3ZDLElBQUksQ0FBQ3NDLDJCQUEyQixDQUFDO01BQy9DO01BQ0EsTUFBTWhFLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQWtCaUUsUUFBUSxFQUFFO1FBQ3BEL0QsTUFBTSxFQUFFOEQ7T0FDVCxDQUFDO01BQ0YsT0FBT2pFLE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0wsS0FBSyxFQUFFO01BQ2RnQixPQUFPLENBQUNXLEdBQUcsQ0FBQzNCLEtBQUssQ0FBQztNQUNsQixNQUFNLElBQUloQixnQkFBQSxDQUFBaUIsYUFBYSxDQUFDaUIsY0FBYyxDQUFDLHVCQUF1QixDQUFDO0lBQ2pFO0VBQ0YsQ0FBQzs7QUFFRCxTQUFzQnRDLDhCQUE4QkEsQ0FBQzRGLFdBQW1COztJQUN0RSxJQUFJO01BQ0YsTUFBTW5FLE1BQU0sR0FBRyxNQUFNLElBQUF2QixPQUFBLENBQUF3QixLQUFLLEVBQ3hCOzthQUVPeEIsT0FBQSxDQUFBeUIsVUFBVTs7T0FFaEIsRUFDRDtRQUNFQyxNQUFNLEVBQUUsQ0FBQ2dFLFdBQVc7T0FDckIsQ0FDRjtNQUNELE9BQU9uRSxNQUFNO0lBQ2YsQ0FBQyxDQUFDLE9BQU9MLEtBQUssRUFBRTtNQUNkZ0IsT0FBTyxDQUFDaEIsS0FBSyxDQUFDQSxLQUFLLENBQUMsQ0FBQyxDQUFDO01BQ3RCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNpQixjQUFjLENBQUMsdUJBQXVCLENBQUM7SUFDakU7RUFDRixDQUFDOztBQUVELFNBQXNCckMsTUFBTUEsQ0FDMUI0RixrQkFBMEIsRUFDMUJwRCxVQUFrQixFQUNsQnFELFNBQWlCLEVBQ2pCQyxnQkFBd0IsRUFDeEJDLGdCQUF3Qjs7O0lBRXhCLElBQUk7TUFDRixNQUFNLENBQUNDLFFBQVEsQ0FBQyxHQUFHLE1BQU0sSUFBQS9GLE9BQUEsQ0FBQXdCLEtBQUssRUFDNUIseUJBQXlCeEIsT0FBQSxDQUFBeUIsVUFBVSxpREFBaUQsRUFDcEY7UUFBRUMsTUFBTSxFQUFFLENBQUNpRSxrQkFBa0I7TUFBQyxDQUFFLENBQ2pDO01BRUQsSUFBSSxDQUFDSSxRQUFRLElBQUksRUFBQUMsRUFBQSxHQUFBRCxRQUFRLENBQUMsQ0FBQyxDQUFDLGNBQUFDLEVBQUEsdUJBQUFBLEVBQUEsQ0FBRUMsU0FBUyxNQUFLLENBQUMsRUFBRTtRQUM3QyxNQUFNLElBQUkvRixnQkFBQSxDQUFBaUIsYUFBYSxDQUFDK0UsVUFBVSxDQUFDLHFDQUFxQyxDQUFDO01BQzNFO01BRUEsTUFBTUMsaUJBQWlCLEdBQUcsTUFBTSxJQUFBbkcsT0FBQSxDQUFBd0IsS0FBSyxFQUNuQyxlQUFleEIsT0FBQSxDQUFBeUIsVUFBVTs7MkNBRVksRUFDckM7UUFDRUMsTUFBTSxFQUFFLENBQ05hLFVBQVUsRUFDVm9ELGtCQUFrQixFQUNsQkMsU0FBUyxFQUNUQyxnQkFBZ0IsRUFDaEJDLGdCQUFnQjtPQUVuQixDQUNGO01BQ0QsT0FBTztRQUNMM0QsT0FBTyxFQUFFLGdDQUFnQztRQUN6Q2lFLGFBQWEsRUFBRUQsaUJBQWlCLENBQUNFO09BQ2xDO0lBQ0gsQ0FBQyxDQUFDLE9BQU9uRixLQUFLLEVBQUU7TUFDZGdCLE9BQU8sQ0FBQ2hCLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BQ3BCLE1BQU0sSUFBSWhCLGdCQUFBLENBQUFpQixhQUFhLENBQUNpQixjQUFjLENBQUMsdUJBQXVCLENBQUM7SUFDakUsQ0FBQyxTQUFTO01BQ1JGLE9BQU8sQ0FBQ1csR0FBRyxDQUFDLE9BQU8sQ0FBQztJQUN0QjtFQUNGLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","addDoctor","like","getDoctoLike","getDoctors","getServices","checkDoctorPhoneNumberExists","updateDoctor","recordDoctorProfileView","addComment","getSpecialties","getSubSpecialtiesById","filterSpecialtyById","getSuggestionsBySpecialty","filterServicesById","existingFeedback","insertReviews","getReviews","doctorSchadules","doctorScheduleTimeAvailability","booked","mysql_1","require","response_error_1","schema_1","bcrypt_1","__importDefault","uuid_1","data","password","confirmPassword","fdPassword","validPassword","doctorSchema","validateSyncAt","saltRounds","hashedPassword","default","hash","error","ResponseError","Unauthorized","newId","v4","result","query","coreSchema","values","first_name","last_name","email","token_verify","verify_code","phone","Date","console","message","InternalServer","existingLike","doctor_id","patient_id","length","totalLikes","isLiked","count","success","log","filters","sql","conditions","push","name","specialty_id","service_id","city_id","join","havingConditions","minRating","undefined","maxRating","isPopular","mobile","doctorData","id","updateResult","comment","comment_text","rating","specialtyId","limit","offset","map","row","sub_specialty_id","sub_specialty_name","images","sub_specialty_image","specialty","serviceId","reviewData","user_id","recommendations","ratings","professional_demeanor","sufficient_time","skill","staff_behavior","clinic_condition","consultatio_types_available","queryParams","queryStr","schedule_id","doctor_schedule_id","clinic_id","appointment_date","appointment_time","existing","_a","is_booked","BadRequest","appointmentResult","appointmentId","insertId"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/doctors/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\nimport {\r\n  CommentsDTO,\r\n  DoctorsDTO,\r\n  likeDTO,\r\n  ReviewsDTO,\r\n  SubSpecialty,\r\n} from \"../../models/doctors\";\r\nimport { ResponseError } from \"../../modules/error/response_error\";\r\nimport { doctorSchema } from \"./schema\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport async function addDoctor(data: DoctorsDTO) {\r\n  const { password } = data.password;\r\n  const { confirmPassword } = data.password;\r\n\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = doctorSchema.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hashedPassword = await bcrypt.hash(validPassword, saltRounds);\r\n\r\n  if (validPassword.error) {\r\n    throw new ResponseError.Unauthorized(\"Password is invalid\");\r\n  }\r\n  const newId = uuidv4();\r\n\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.doctors\r\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\r\n        VALUES(?,?,?,?,?,?,?,?,?,?)`,\r\n      {\r\n        values: [\r\n          newId,\r\n          data.first_name,\r\n          data.last_name,\r\n          data.email,\r\n          hashedPassword,\r\n          data.token_verify,\r\n          data.verify_code,\r\n          data.phone,\r\n          new Date(),\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error: any) {\r\n    console.error(\"Database Error:\", error.message);\r\n    throw new ResponseError.InternalServer(\"Failed to insert clinic.\");\r\n  }\r\n}\r\n\r\nexport async function like(data: likeDTO) {\r\n  const existingLike = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ? AND patient_id = ?`,\r\n    {\r\n      values: [data.doctor_id, data.patient_id],\r\n    }\r\n  );\r\n\r\n  if (existingLike.length > 0) {\r\n    // Unlike the doctor: Remove the like\r\n    await query<RowDataPacket>(\r\n      `DELETE FROM ${coreSchema}.doctor_likes \r\n       WHERE doctor_id = ? AND patient_id = ?`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id],\r\n      }\r\n    );\r\n  } else {\r\n    // Like the doctor: Insert new like record\r\n    await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_likes (doctor_id, patient_id, isLike) \r\n       VALUES (?, ?, ?)`,\r\n      {\r\n        values: [data.doctor_id, data.patient_id, 1],\r\n      }\r\n    );\r\n  }\r\n\r\n  // Update the doctor's is_liked status based on the total likes\r\n  const totalLikes = await query<RowDataPacket>(\r\n    `SELECT COUNT(*) AS count FROM ${coreSchema}.doctor_likes \r\n     WHERE doctor_id = ?`,\r\n    {\r\n      values: [data.doctor_id],\r\n    }\r\n  );\r\n\r\n  const isLiked = totalLikes[0].count > 0 ? 1 : 0;\r\n\r\n  await query<RowDataPacket>(\r\n    `UPDATE ${coreSchema}.doctors \r\n     SET is_liked = ? \r\n     WHERE id = ?`,\r\n    {\r\n      values: [isLiked, data.doctor_id],\r\n    }\r\n  );\r\n\r\n  return { success: true, isLiked };\r\n}\r\n\r\nexport async function getDoctoLike(patient_id: number) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `\r\n      SELECT\r\n      d.*\r\n        FROM ${coreSchema}.doctor_likes dl\r\n        LEFT JOIN ${coreSchema}.doctors d\r\n        ON dl.doctor_id = d.id\r\n        WHERE dl.patient_id = ?`,\r\n      {\r\n        values: [patient_id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Failed to get response\");\r\n  }\r\n}\r\n\r\nexport async function getDoctors(filters: {\r\n  name?: string;\r\n  service_id?: string;\r\n  doctor_id?: string;\r\n  specialty_id?: string;\r\n  city_id?: string;\r\n  minRating?: number;\r\n  maxRating?: number;\r\n  isPopular?: boolean;\r\n  patient_id?: boolean;\r\n}): Promise<DoctorsDTO[] | null> {\r\n  try {\r\n    let sql = `\r\n    SELECT \r\n      d.id, d.first_name,d.last_name,d.profile_img,  d.email, d.phone, d.specialty_id, d.insurance_id,\r\n      d.click_count,d.average_rating,\r\n      d.medical_code,\r\n      sp.name AS specialty_name,\r\n      i.name AS insurance_name,  \r\n      (SELECT AVG(rating) FROM ${coreSchema}.doctor_reviews r WHERE r.doctor_id = d.id) AS average_rating,\r\n      COUNT(r.id) AS total_reviews,\r\n      COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\r\n      COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\r\n      COALESCE(AVG(r.skill), 0) AS avg_skill,\r\n      COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\r\n      COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\r\n      CASE \r\n        WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \r\n        THEN 1 ELSE 0\r\n      END AS isLiked,\r\n\r\n      JSON_ARRAYAGG(\r\n        JSON_OBJECT(\r\n          'country', ld.country,\r\n          'latitude', ld.latitude,\r\n          'longitude', ld.longitude,\r\n          'address_line1', ld.address_line1,\r\n          'address_line2', ld.address_line2,\r\n          'zipcode', ld.zipcode,\r\n          'city',ci.name,\r\n          'state',ci.state\r\n        )\r\n      ) AS addresses\r\n\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialties sp ON d.specialty_id = sp.id\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\r\n    LEFT JOIN \r\n      ${coreSchema}.doctor_services ds ON d.service_id = ds.id\r\n    LEFT JOIN \r\n      ${coreSchema}.services s ON sp.id = s.specialty_id\r\n    LEFT JOIN \r\n      ${coreSchema}.insurances i ON d.insurance_id = i.id\r\n    LEFT JOIN \r\n      ${coreSchema}.cities ci ON ld.city_id = ci.id\r\n    LEFT JOIN\r\n      ${coreSchema}.doctor_likes dk ON d.id = dk.doctor_id\r\n  `;\r\n\r\n    const conditions: string[] = [];\r\n    const values: any[] = [];\r\n\r\n    if (filters.doctor_id) {\r\n      conditions.push(\"d.id = ?\");\r\n      values.push(filters.doctor_id);\r\n    }\r\n    if (filters.name) {\r\n      conditions.push(\"CONCAT(d.first_name, ' ', d.last_name) LIKE ?\");\r\n      values.push(`%${filters.name}%`);\r\n    }\r\n    if (filters.specialty_id) {\r\n      conditions.push(\"sp.id = ?\");\r\n      values.push(filters.specialty_id);\r\n    }\r\n    if (filters.service_id) {\r\n      conditions.push(\"d.service_id = ?\");\r\n      values.push(filters.service_id);\r\n    }\r\n    if (filters.city_id) {\r\n      conditions.push(\"ld.city_id = ?\");\r\n      values.push(filters.city_id);\r\n    }\r\n    if (filters.patient_id) {\r\n      conditions.push(\"dk.patient_id =?\");\r\n      values.push(filters.patient_id);\r\n    }\r\n    if (conditions.length) {\r\n      sql += \" WHERE \" + conditions.join(\" AND \");\r\n    }\r\n\r\n    sql += ` GROUP BY d.id, d.first_name, d.last_name,d.profile_img,d.email, d.phone, d.specialty_id, d.insurance_id, sp.name, i.name`;\r\n\r\n    const havingConditions: string[] = [];\r\n    if (filters.minRating !== undefined) {\r\n      havingConditions.push(\"total_reviews >= ?\");\r\n      values.push(filters.minRating);\r\n    }\r\n    if (filters.maxRating !== undefined) {\r\n      havingConditions.push(\"total_reviews <= ?\");\r\n      values.push(filters.maxRating);\r\n    }\r\n\r\n    if (filters.isPopular) {\r\n      havingConditions.push(\"average_rating > 4\");\r\n    }\r\n\r\n    if (havingConditions.length) {\r\n      sql += \" HAVING \" + havingConditions.join(\" AND \");\r\n    }\r\n\r\n    const result = await query<RowDataPacket[]>(sql, {\r\n      values: values,\r\n    });\r\n\r\n    // if (filters.doctor_id) {\r\n    //   return result.length ? result[0] : null;\r\n    // }\r\n\r\n    return result ? (result as unknown as DoctorsDTO[]) : null;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function getServices() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.services`\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function getMostPopularDoctors(): Promise<any> {\r\n//   try {\r\n//     const result = await query<RowDataPacket[]>(\r\n//       `\r\n//       SELECT\r\n//         d.*,\r\n//         COALESCE(ld.id, 'No Location') AS location,\r\n//         s.name AS specialty_name,\r\n//         (SELECT AVG(r.rating)\r\n//          FROM ${coreSchema}.ratings r\r\n//          WHERE r.id = d.id) AS average_rating,\r\n//         (SELECT COUNT(r.rating)\r\n//          FROM ${coreSchema}.ratings r\r\n//          WHERE r.id = d.id) AS total_ratings\r\n//       FROM\r\n//         ${coreSchema}.doctors d\r\n//       LEFT JOIN\r\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n//       LEFT JOIN\r\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n//       HAVING\r\n//         total_ratings > 3\r\n//       ORDER BY\r\n//         average_rating DESC,\r\n//         total_ratings DESC\r\n//       LIMIT 10;\r\n//       `\r\n//     );\r\n//     return result;\r\n//   } catch (error) {\r\n//     console.log(error);\r\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n//   }\r\n// }\r\n\r\nexport async function checkDoctorPhoneNumberExists(\r\n  mobile: string\r\n): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      SELECT mobile FROM ${coreSchema}.doctors\r\n      where mobile=?\r\n      `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\n// export async function doctorDetail(doctorId: number): Promise<any> {\r\n//   try {\r\n//     const sql = `\r\n//       SELECT\r\n//         d.*,\r\n//         COALESCE(ld.country, '') AS country,\r\n//         COALESCE(ld.latitude, 0) AS latitude,\r\n//         COALESCE(ld.longitude, 0) AS longitude,\r\n//         COALESCE(ld.address_line1, '') AS address_line1,\r\n//         COALESCE(ld.address_line2, '') AS address_line2,\r\n//         COALESCE(ld.zipcode, '') AS zipcode,\r\n//         COALESCE(AVG(r.rating), 0) AS average_rating,\r\n//         COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\r\n//         COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\r\n//         COALESCE(AVG(r.skill), 0) AS avg_skill,\r\n//         COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\r\n//         COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\r\n//         COUNT(r.id) AS total_reviews,\r\n//         COALESCE(GROUP_CONCAT(DISTINCT r.comment SEPARATOR ' | '), 'No comments') AS comments,\r\n//         s.name AS specialty_name,\r\n//         i.name AS insurance_name,\r\n//         CASE\r\n//           WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id)\r\n//           THEN 1 ELSE 0\r\n//         END AS isLiked\r\n//         JSON_ARRAYAGG(\r\n//         JSON_OBJECT(\r\n//           'country', ld.country,\r\n//           'latitude', ld.latitude,\r\n//           'longitude', ld.longitude,\r\n//           'address_line1', ld.address_line1,\r\n//           'address_line2', ld.address_line2,\r\n//           'zipcode', ld.zipcode,\r\n//           'city',ci.name,\r\n//           'state',ci.state\r\n//         )\r\n//       ) AS addresses\r\n//       FROM\r\n//         ${coreSchema}.doctors d\r\n//       LEFT JOIN\r\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id AND ld.is_primary = 1\r\n//       LEFT JOIN\r\n//         ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\r\n//       LEFT JOIN\r\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n//       LEFT JOIN\r\n//         ${coreSchema}.insurances i ON d.insurance_id = i.id\r\n//       WHERE\r\n//         d.id = ?\r\n//       GROUP BY\r\n//         d.id,  ld.country, ld.latitude, ld.longitude, ld.address_line1,\r\n//         ld.address_line2, ld.zipcode, s.name, i.name;\r\n//     `;\r\n\r\n//     const result = await query<RowDataPacket[]>(sql, { values: [doctorId] });\r\n\r\n//     if (!result || result.length === 0) {\r\n//       return { message: \"Doctor not found\" };\r\n//     }\r\n\r\n//     return result[0]; // Return single doctor object instead of an array\r\n//   } catch (error) {\r\n//     console.error(\"Error fetching doctor details:\", error);\r\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n//   }\r\n// }\r\n\r\nexport async function updateDoctor(doctorData: DoctorsDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n        UPDATE ${coreSchema}.doctors\r\n        SET name = ?\r\n        WHERE id = ?\r\n      `,\r\n    {\r\n      values: [doctorData.first_name, doctorData.id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function recordDoctorProfileView(id: any) {\r\n  try {\r\n    const updateResult = await query<RowDataPacket>(\r\n      `\r\n      UPDATE ${coreSchema}.doctors\r\n      SET click_count = click_count + 1\r\n      WHERE id = ?\r\n      `,\r\n      {\r\n        values: [id],\r\n      }\r\n    );\r\n    return updateResult;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function addComment(comment: CommentsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.comments\r\n     (id, id, comment_text, rating)\r\n         VALUES (?, ?, ?, ?)`,\r\n    {\r\n      values: [comment.id, comment.id, comment.comment_text, comment.rating],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function getSpecialties() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT *\r\n       FROM ${coreSchema}.specialties`\r\n  );\r\n  return result;\r\n}\r\nexport async function getSubSpecialtiesById(specialtyId: number) {\r\n  try {\r\n    const limit = 20; // Default limit\r\n    const offset = 0; // Default offset\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT \r\n      s.id AS specialty_id,\r\n      s.name AS specialty_name,\r\n      s.images AS specialty_image,\r\n      ss.id AS sub_specialty_id,\r\n      ss.name AS sub_specialty_name,\r\n      ss.image_url AS sub_specialty_image\r\n    FROM ${coreSchema}.specialties s\r\n    LEFT JOIN ${coreSchema}.sub_specialties ss \r\n    ON s.id = ss.specialty_id\r\n    WHERE s.id = ? \r\n    ORDER BY ss.id;`,\r\n      { values: [specialtyId] }\r\n    );\r\n    return result.map((row) => ({\r\n      id: row.sub_specialty_id || null,\r\n      name: row.sub_specialty_name || \"N/A\",\r\n      images: row.sub_specialty_image || \"default_image.jpeg\",\r\n    }));\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterSpecialtyById(specialty: any) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `\r\n       SELECT \r\n        d.*, \r\n        COALESCE(ld.location, 'No Location') AS location,\r\n        s.name AS specialty_name,\r\n        (SELECT AVG(rating) \r\n         FROM ${coreSchema}.ratings r \r\n         WHERE r.id = d.id) AS average_rating\r\n      FROM \r\n        ${coreSchema}.doctors d\r\n      LEFT JOIN \r\n        ${coreSchema}.doctor_locations ld ON d.id = ld.id\r\n      LEFT JOIN \r\n        ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n  \r\n      WHERE \r\n      s.id = ?;\r\n      `,\r\n      {\r\n        values: [specialty],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"...\");\r\n  }\r\n}\r\n\r\nexport async function getSuggestionsBySpecialty(specialtyId: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\r\n      FROM clinic_db.suggestions s\r\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\r\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\r\n      WHERE sp.id = ?;\r\n    `,\r\n      [specialtyId]\r\n    );\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\r\n  }\r\n}\r\n\r\nexport async function filterServicesById(serviceId: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n   SELECT \r\n      d.*, \r\n      COALESCE(ld.location, 'No Location') AS location,\r\n      s.name AS specialty_name,\r\n      (SELECT AVG(rating) \r\n       FROM ${coreSchema}.ratings r \r\n       WHERE r.id = d.id) AS average_rating\r\n    FROM \r\n      ${coreSchema}.doctors d\r\n    LEFT JOIN \r\n      ${coreSchema}.locations_doctors ld ON d.id = ld.id\r\n    LEFT JOIN \r\n      ${coreSchema}.specialties s ON d.specialty_id = s.id\r\n    JOIN \r\n      ${coreSchema}.services srv  ON srv.specialty_id = s.id\r\n    WHERE \r\n    srv.id = ?;\r\n    `,\r\n    {\r\n      values: [serviceId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function existingFeedback(reviewData: ReviewsDTO) {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.doctor_reviews WHERE user_id = ? AND doctor_id =?`,\r\n    {\r\n      values: [reviewData.user_id, reviewData.doctor_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function insertReviews(reviewData: ReviewsDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.doctor_reviews\r\n        (doctor_id,\r\n          user_id,\r\n          comment,\r\n          recommendations,\r\n          rating,\r\n          professional_demeanor,\r\n          sufficient_time,\r\n          skill,\r\n          staff_behavior,\r\n          clinic_condition)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)`,\r\n      {\r\n        values: [\r\n          reviewData.doctor_id,\r\n          reviewData.user_id,\r\n          reviewData.comment,\r\n          reviewData.rating,\r\n          reviewData.recommendations,\r\n          reviewData.ratings.professional_demeanor,\r\n          reviewData.ratings.sufficient_time,\r\n          reviewData.ratings.skill,\r\n          reviewData.ratings.staff_behavior,\r\n          reviewData.ratings.clinic_condition,\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function getReviews() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * FROM ${coreSchema}.reviews\r\n    `\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function doctorSchadules(\r\n  doctor_id: number,\r\n  consultatio_types_available?: string\r\n) {\r\n  const queryParams: any[] = [doctor_id];\r\n  try {\r\n    let queryStr = `\r\n   SELECT * FROM ${coreSchema}.doctor_schedules ds\r\n      WHERE doctor_id = ?\r\n    `;\r\n\r\n    if (consultatio_types_available) {\r\n      queryStr += \" AND ds.consultatio_types_available =?\";\r\n      queryParams.push(consultatio_types_available);\r\n    }\r\n    const result = await query<RowDataPacket[]>(queryStr, {\r\n      values: queryParams,\r\n    });\r\n    return result;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new ResponseError.InternalServer(\"Internal server Error\");\r\n  }\r\n}\r\n\r\nexport async function doctorScheduleTimeAvailability(schedule_id: number) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `\r\n      SELECT *\r\n      FROM ${coreSchema}.doctor_available_times \r\n      WHERE schedule_id = ?;\r\n      `,\r\n      {\r\n        values: [schedule_id],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error); // Better to use console.error for errors\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  }\r\n}\r\n\r\nexport async function booked(\r\n  doctor_schedule_id: number,\r\n  patient_id: number,\r\n  clinic_id: number,\r\n  appointment_date: string,\r\n  appointment_time: string\r\n) {\r\n  try {\r\n    const [existing] = await query<RowDataPacket[]>(\r\n      `SELECT is_booked FROM ${coreSchema}.doctor_available_times WHERE id = ? FOR UPDATE`,\r\n      { values: [doctor_schedule_id] }\r\n    );\r\n\r\n    if (!existing || existing[0]?.is_booked === 1) {\r\n      throw new ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\r\n    }\r\n\r\n    const appointmentResult = await query<RowDataPacket>(\r\n      `INSERT INTO ${coreSchema}.appointments\r\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\r\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');`,\r\n      {\r\n        values: [\r\n          patient_id,\r\n          doctor_schedule_id,\r\n          clinic_id,\r\n          appointment_date,\r\n          appointment_time,\r\n        ],\r\n      }\r\n    );\r\n    return {\r\n      message: \"Appointment successfuly booked\",\r\n      appointmentId: appointmentResult.insertId,\r\n    };\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw new ResponseError.InternalServer(\"Internal Server Error\");\r\n  } finally {\r\n    console.log(\"final\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1741655050584},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nconst yup = __importStar(require(\"yup\"));\nexports.doctorSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  Specialization: yup.string().required(\"Specialization is required\"),\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImRvY3RvclNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwiZmlyc3RfbmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdF9uYW1lIiwiU3BlY2lhbGl6YXRpb24iLCJsaWNlbnNlTnVtYmVyIiwib3duZXJfbmFtZSIsImVtYWlsIiwicGhvbmUiLCJudWxsYWJsZSIsInRva2VuVmVyaWZ5IiwicGFzc3dvcmQiLCJtaW4iLCJvbmVPZiIsInJlZiIsImNvbmZpcm1QYXNzd29yZCIsImNyZWF0ZVBhc3N3b3JkU2NoZW1hIiwibmV3UGFzc3dvcmQiLCJjb25maXJtRW1haWxTY2hlbWEiLCJ2ZXJpZnlfY29kZSIsImxlbmd0aCIsImNoZWNrRW1haWxTY2hlbWEiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZG9jdG9ycy9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkb2N0b3JTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIGZpcnN0X25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImZpcnN0X25hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgbGFzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsYXN0X25hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgU3BlY2lhbGl6YXRpb246IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIlNwZWNpYWxpemF0aW9uIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxpY2Vuc2VOdW1iZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImxpY2Vuc2VOdW1iZXIgaXMgcmVxdWlyZWRcIiksXHJcbiAgb3duZXJfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5lbWFpbChcImludmFsaWQgZW1haWxcIikucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICBwaG9uZTogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXHJcbiAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc3dvcmRTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIG5ld1Bhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJuZXdQYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG4vLyBleHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXHJcbi8vICAgLm9iamVjdCgpXHJcbi8vICAgLnNoYXBlKHtcclxuLy8gICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4vLyAgIH0pXHJcbi8vICAgLnJlcXVpcmVkKCk7XHJcblxyXG4vLyAgIGV4cG9ydCAgY29uc3QgbGF0ZXN0VGVtcGxhdGVzU2NoZW1hID0geXVwXHJcbi8vICAgLm9iamVjdCgpXHJcbi8vICAgLnNoYXBlKHtcclxuLy8gICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxyXG4vLyAgIH0pXHJcbi8vICAgLnJlcXVpcmVkKCk7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlybUVtYWlsU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5lbWFpbChcIkludmFsaWQgZW1haWwgZm9ybWF0XCIpXHJcbiAgICAucmVxdWlyZWQoXCJFbWFpbCBpcyByZXF1aXJlZFwiKSxcclxuICB2ZXJpZnlfY29kZTogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5sZW5ndGgoNCwgXCJWZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAucmVxdWlyZWQoXCJWZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tFbWFpbFNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkIVwiKSxcclxufSk7XHJcbiJdLCJtYXBw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","map":{"version":3,"names":["yup","__importStar","require","exports","doctorSchema","object","shape","first_name","string","required","last_name","Specialization","licenseNumber","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPasswordSchema","newPassword","confirmEmailSchema","verify_code","length","checkEmailSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/doctors/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nexport const doctorSchema = yup.object().shape({\r\n  first_name: yup.string().required(\"first_name is required\"),\r\n  last_name: yup.string().required(\"last_name is required\"),\r\n  Specialization: yup.string().required(\"Specialization is required\"),\r\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\r\n  owner_name: yup.string().required(\"email is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phone: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nexport const createPasswordSchema = yup.object().shape({\r\n  newPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\r\n});\r\n// export const userRolesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\n//   export  const latestTemplatesSchema = yup\r\n//   .object()\r\n//   .shape({\r\n//     userId: yup.string().required(\"userId is required\"),\r\n//   })\r\n//   .required();\r\n\r\nexport const confirmEmailSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email(\"Invalid email format\")\r\n    .required(\"Email is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .length(4, \"Verify code should be 4 characters\")\r\n    .required(\"Verify code is required\"),\r\n});\r\n\r\nexport const checkEmailSchema = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEaC,OAAA,CAAAC,YAAY,GAAGJ,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EAC7CC,UAAU,EAAEP,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,wBAAwB,CAAC;EAC3DC,SAAS,EAAEV,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,uBAAuB,CAAC;EACzDE,cAAc,EAAEX,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,4BAA4B,CAAC;EACnEG,aAAa,EAAEZ,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,2BAA2B,CAAC;EACjEI,UAAU,EAAEb,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACtDK,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACM,KAAK,CAAC,eAAe,CAAC,CAACL,QAAQ,CAAC,mBAAmB,CAAC;EACxEM,KAAK,EAAEf,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EAC9BC,WAAW,EAAEjB,GAAG,CAACQ,MAAM,EAAE,CAACQ,QAAQ,EAAE;EACpCE,QAAQ,EAAElB,GAAG,CACVQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,4BAA4B;CAC7D,CAAC;AACWlB,OAAA,CAAAoB,oBAAoB,GAAGvB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACrDkB,WAAW,EAAExB,GAAG,CACbQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,4BAA4B,CAAC;EACpEC,eAAe,EAAEtB,GAAG,CACjBQ,MAAM,EAAE,CACRW,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CAC/BC,KAAK,CAAC,CAACpB,GAAG,CAACqB,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,4BAA4B;CAChE,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEalB,OAAA,CAAAsB,kBAAkB,GAAGzB,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACnDQ,KAAK,EAAEd,GAAG,CACPQ,MAAM,EAAE,CACRM,KAAK,CAAC,sBAAsB,CAAC,CAC7BL,QAAQ,CAAC,mBAAmB,CAAC;EAChCiB,WAAW,EAAE1B,GAAG,CACbQ,MAAM,EAAE,CACRmB,MAAM,CAAC,CAAC,EAAE,oCAAoC,CAAC,CAC/ClB,QAAQ,CAAC,yBAAyB;CACtC,CAAC;AAEWN,OAAA,CAAAyB,gBAAgB,GAAG5B,GAAG,CAACK,MAAM,EAAE,CAACC,KAAK,CAAC;EACjDQ,KAAK,EAAEd,GAAG,CAACQ,MAAM,EAAE,CAACC,QAAQ,CAAC,oBAAoB;CAClD,CAAC","ignoreList":[]}},"mtime":1741655050584},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/medications\", (0, async_handler_1.asyncHandler)(function getMedicine(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.MedicineService.getMedicine();\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\npublic_1.router.put(\"/medications/:id/favorite\", (0, async_handler_1.asyncHandler)(function updateIsFavorite(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      isFavorite\n    } = req.body; // Get the isFavorite value from the request body\n    const medication_id = req.params.id;\n    const data = yield service_1.MedicineService.updateIsFavorite(medication_id, isFavorite);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJhcHBfcmVzcG9uc2VfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsImdldE1lZGljaW5lIiwicmVxIiwicmVzIiwiZGF0YSIsIk1lZGljaW5lU2VydmljZSIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJwdXQiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwiaXNGYXZvcml0ZSIsImJvZHkiLCJtZWRpY2F0aW9uX2lkIiwicGFyYW1zIiwiaWQiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxtZWRpY2F0aW9uc1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL21lZGljYXRpb25zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgTWVkaWNpbmVTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL21lZGljYXRpb25zXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE1lZGljaW5lKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IE1lZGljaW5lU2VydmljZS5nZXRNZWRpY2luZSgpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG5cclxucm91dGVyLnB1dChcclxuICBcIi9tZWRpY2F0aW9ucy86aWQvZmF2b3JpdGVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlSXNGYXZvcml0ZShcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgeyBpc0Zhdm9yaXRlIH0gPSByZXEuYm9keTsgLy8gR2V0IHRoZSBpc0Zhdm9yaXRlIHZhbHVlIGZyb20gdGhlIHJlcXVlc3QgYm9keVxyXG4gICAgY29uc3QgbWVkaWNhdGlvbl9pZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVkaWNpbmVTZXJ2aWNlLnVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZCwgaXNGYXZvcml0ZSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcblxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxjQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUMsUUFBQSxDQUFBRyxNQUFNLENBQUNDLEdBQUcsQ0FDUixjQUFjLEVBQ2QsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNKLFdBQVcsRUFBRTtJQUNoRCxNQUFNSyxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEWCxRQUFBLENBQUFHLE1BQU0sQ0FBQ2EsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBbEIsZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZVksZ0JBQWdCQSxDQUMxQ1YsR0FBWSxFQUNaQyxHQUFhOztJQUViLE1BQU07TUFBRVU7SUFBVSxDQUFFLEdBQUdYLEdBQUcsQ0FBQ1ksSUFBSSxDQUFDLENBQUM7SUFDakMsTUFBTUMsYUFBYSxHQUFHYixHQUFHLENBQUNjLE1BQU0sQ0FBQ0MsRUFBRTtJQUNuQyxNQUFNYixJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxlQUFlLENBQUNPLGdCQUFnQixDQUFDRyxhQUFhLEVBQUVGLFVBQVUsQ0FBQztJQUM5RSxNQUFNUCxhQUFhLEdBQUdWLGNBQUEsQ0FBQVcsYUFBYSxDQUFDUixHQUFHLENBQUNLLElBQUksQ0FBQztJQUM3QyxPQUFPRCxHQUFHLENBQUNLLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","public_1","app_response_1","service_1","router","get","asyncHandler","getMedicine","req","res","data","MedicineService","buildResponse","BuildResponse","status","code","json","put","updateIsFavorite","isFavorite","body","medication_id","params","id"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/medications/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { MedicineService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.get(\r\n  \"/medications\",\r\n  asyncHandler(async function getMedicine(req: any, res: any) {\r\n    const data = await MedicineService.getMedicine();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\nrouter.put(\r\n  \"/medications/:id/favorite\",\r\n  asyncHandler(async function updateIsFavorite(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const { isFavorite } = req.body; // Get the isFavorite value from the request body\r\n    const medication_id = req.params.id;\r\n    const data = await MedicineService.updateIsFavorite(medication_id, isFavorite);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,cAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACJ,WAAW,EAAE;IAChD,MAAMK,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH;AAEDX,QAAA,CAAAG,MAAM,CAACa,GAAG,CACR,2BAA2B,EAC3B,IAAAlB,eAAA,CAAAO,YAAY,EAAC,SAAeY,gBAAgBA,CAC1CV,GAAY,EACZC,GAAa;;IAEb,MAAM;MAAEU;IAAU,CAAE,GAAGX,GAAG,CAACY,IAAI,CAAC,CAAC;IACjC,MAAMC,aAAa,GAAGb,GAAG,CAACc,MAAM,CAACC,EAAE;IACnC,MAAMb,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACO,gBAAgB,CAACG,aAAa,EAAEF,UAAU,CAAC;IAC9E,MAAMP,aAAa,GAAGV,cAAA,CAAAW,aAAa,CAACR,GAAG,CAACK,IAAI,CAAC;IAC7C,OAAOD,GAAG,CAACK,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\medications\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass MedicineService {\n  static getMedicine() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getMedicine)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static updateIsFavorite(medication_id, isFavorite) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateIsFavorite)(medication_id, isFavorite);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.MedicineService = MedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk1lZGljaW5lU2VydmljZSIsImdldE1lZGljaW5lIiwiZGF0YSIsIm1lc3NhZ2UiLCJ1cGRhdGVJc0Zhdm9yaXRlIiwibWVkaWNhdGlvbl9pZCIsImlzRmF2b3JpdGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbWVkaWNhdGlvbnNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9tZWRpY2F0aW9ucy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE1lZGljaW5lLCB1cGRhdGVJc0Zhdm9yaXRlIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lZGljaW5lU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRNZWRpY2luZSgpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRNZWRpY2luZSgpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZUlzRmF2b3JpdGUobWVkaWNhdGlvbl9pZDogc3RyaW5nLCBpc0Zhdm9yaXRlOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdXBkYXRlSXNGYXZvcml0ZShtZWRpY2F0aW9uX2lkLCBpc0Zhdm9yaXRlKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsZUFBZTtFQUNuQixPQUFhQyxXQUFXQSxDQUFBOztNQUM3QixNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFHLFdBQVcsR0FBRTtNQUNoQyxJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7O0VBRU0sT0FBYUUsZ0JBQWdCQSxDQUFDQyxhQUFxQixFQUFFQyxVQUFtQjs7TUFDN0UsTUFBTUosSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBTSxnQkFBZ0IsRUFBQ0MsYUFBYSxFQUFFQyxVQUFVLENBQUM7TUFDOUQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","MedicineService","getMedicine","data","message","updateIsFavorite","medication_id","isFavorite","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\medications\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/medications/service.ts"],"sourcesContent":["import { getMedicine, updateIsFavorite } from \"../../bin/db\";\r\n\r\nexport class MedicineService {\r\n  public static async getMedicine() {\r\n    const data = await getMedicine();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async updateIsFavorite(medication_id: string, isFavorite: boolean) {\r\n    const data = await updateIsFavorite(medication_id, isFavorite);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,gBAAgBA,CAACC,aAAqB,EAAEC,UAAmB;;MAC7E,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAM,gBAAgB,EAACC,aAAa,EAAEC,UAAU,CAAC;MAC9D,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllDiseases\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.DiseasesService.getAllDiseases();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/getDiseaseSubcategories/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const disease_id = req.params.id;\n  const data = yield service_1.DiseasesService.getDiseaseSubcategories(disease_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJEaXNlYXNlc1NlcnZpY2UiLCJnZXRBbGxEaXNlYXNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iLCJkaXNlYXNlX2lkIiwicGFyYW1zIiwiaWQiLCJnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRpc2Vhc2VzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZGlzZWFzZXMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBEaXNlYXNlc1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2dldEFsbERpc2Vhc2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBEaXNlYXNlc1NlcnZpY2UuZ2V0QWxsRGlzZWFzZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxucm91dGVyLmdldChcclxuICBcIi9nZXREaXNlYXNlU3ViY2F0ZWdvcmllcy86aWRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgZGlzZWFzZV9pZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgRGlzZWFzZXNTZXJ2aWNlLmdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsaUJBQWlCLEVBQ2pCLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1DLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ0MsY0FBYyxFQUFFO0VBQ25ELE1BQU1DLGFBQWEsR0FBR1osY0FBQSxDQUFBYSxhQUFhLENBQUNULEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO0VBQzdDLE9BQU9GLEdBQUcsQ0FBQ08sTUFBTSxDQUFDRixhQUFhLENBQUNHLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNKLGFBQWEsQ0FBQztBQUUzRCxDQUFDLEVBQUMsQ0FDSDtBQUNEWCxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLDhCQUE4QixFQUM5QixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNUyxVQUFVLEdBQUdYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDQyxFQUFFO0VBQ2hDLE1BQU1WLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGVBQWUsQ0FBQ1UsdUJBQXVCLENBQUNILFVBQVUsQ0FBQztFQUN0RSxNQUFNTCxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","DiseasesService","getAllDiseases","buildResponse","BuildResponse","status","code","json","disease_id","params","id","getDiseaseSubcategories"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/diseases/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { DiseasesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllDiseases\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await DiseasesService.getAllDiseases();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/getDiseaseSubcategories/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const disease_id = req.params.id;\r\n    const data = await DiseasesService.getDiseaseSubcategories(disease_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACC,cAAc,EAAE;EACnD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,8BAA8B,EAC9B,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,UAAU,GAAGX,GAAG,CAACY,MAAM,CAACC,EAAE;EAChC,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,eAAe,CAACU,uBAAuB,CAACH,UAAU,CAAC;EACtE,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\diseases\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DiseasesService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass DiseasesService {\n  static getAllDiseases() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDisease)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static getDiseaseSubcategories(disease_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getDiseaseSubcategories)(disease_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.DiseasesService = DiseasesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkRpc2Vhc2VzU2VydmljZSIsImdldEFsbERpc2Vhc2VzIiwiZGF0YSIsImdldERpc2Vhc2UiLCJtZXNzYWdlIiwiZ2V0RGlzZWFzZVN1YmNhdGVnb3JpZXMiLCJkaXNlYXNlX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRpc2Vhc2VzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZGlzZWFzZXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREaXNlYXNlLCBnZXREaXNlYXNlU3ViY2F0ZWdvcmllcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEaXNlYXNlc1NlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxsRGlzZWFzZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RGlzZWFzZSgpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERpc2Vhc2VTdWJjYXRlZ29yaWVzKGRpc2Vhc2VfaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGVBQWU7RUFDbkIsT0FBYUMsY0FBY0EsQ0FBQTs7TUFDaEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxVQUFVLEdBQUU7TUFDL0IsSUFBSUQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFRSxPQUFPLEVBQUUsZUFBZTtVQUFFRixJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhRyx1QkFBdUJBLENBQUNDLFVBQWtCOztNQUM1RCxNQUFNSixJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFPLHVCQUF1QixFQUFDQyxVQUFVLENBQUM7TUFDdEQsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFRSxPQUFPLEVBQUUsZUFBZTtVQUFFRixJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7O0FBaEJISyxPQUFBLENBQUFQLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","DiseasesService","getAllDiseases","data","getDisease","message","getDiseaseSubcategories","disease_id","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\diseases\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/diseases/service.ts"],"sourcesContent":["import { getDisease, getDiseaseSubcategories } from \"../../bin/db\";\r\n\r\nexport class DiseasesService {\r\n  public static async getAllDiseases() {\r\n    const data = await getDisease();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async getDiseaseSubcategories(disease_id: string) {\r\n    const data = await getDiseaseSubcategories(disease_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,eAAe;EACnB,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,UAAU,GAAE;MAC/B,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaG,uBAAuBA,CAACC,UAAkB;;MAC5D,MAAMJ,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAO,uBAAuB,EAACC,UAAU,CAAC;MACtD,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEE,OAAO,EAAE,eAAe;UAAEF,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst services_1 = require(\"./services\");\npublic_1.router.post(\"/prescription-medicine\", (0, async_handler_1.asyncHandler)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield services_1.PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\n    const buildResponse = app_response_1.BuildResponse.get(data);\n    return res.status(buildResponse.code).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJyb3V0ZXIiLCJwb3N0IiwiYXN5bmNIYW5kbGVyIiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccHJlc2NyaXB0aW9uLW1lZGljaW5lXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcHJlc2NyaXB0aW9uLW1lZGljaW5lL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBQcmVzY3JpcHRpb25NZWRpY2luZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5cclxucm91dGVyLnBvc3QoXHJcbiAgXCIvcHJlc2NyaXB0aW9uLW1lZGljaW5lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGluc2VydEV2ZW50KHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlLkFkZFByZXNjcmlwdGlvbk1lZGljbmUoZXZlbnREYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxVQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLElBQUksQ0FDVCx3QkFBd0IsRUFDeEIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxTQUFTLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUMxQixNQUFNQyxJQUFJLEdBQUcsTUFBTVQsVUFBQSxDQUFBVSwyQkFBMkIsQ0FBQ0Msc0JBQXNCLENBQUNKLFNBQVMsQ0FBQztJQUNoRixNQUFNSyxhQUFhLEdBQUdkLGNBQUEsQ0FBQWUsYUFBYSxDQUFDQyxHQUFHLENBQUNMLElBQUksQ0FBQztJQUM3QyxPQUFPSCxHQUFHLENBQUNTLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTCxhQUFhLENBQUM7RUFFM0QsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","services_1","router","post","asyncHandler","insertEvent","req","res","eventData","body","data","PrescriptionMedicineService","AddPrescriptionMedicne","buildResponse","BuildResponse","get","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/prescription-medicine/controller.ts"],"sourcesContent":["\r\n\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { PrescriptionMedicineService } from \"./services\";\r\n\r\nrouter.post(\r\n  \"/prescription-medicine\",\r\n  asyncHandler(async function insertEvent(req: any, res: any) {\r\n    const eventData = req.body;\r\n    const data = await PrescriptionMedicineService.AddPrescriptionMedicne(eventData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMT,UAAA,CAAAU,2BAA2B,CAACC,sBAAsB,CAACJ,SAAS,CAAC;IAChF,MAAMK,aAAa,GAAGd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,IAAI,CAAC;IAC7C,OAAOH,GAAG,CAACS,MAAM,CAACH,aAAa,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,aAAa,CAAC;EAE3D,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\prescription-medicine\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrescriptionMedicineService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass PrescriptionMedicineService {\n  static AddPrescriptionMedicne(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const results = [];\n      for (const medicine of formData.medicine_name) {\n        const medicine_id = medicine.medication_id;\n        const data = yield (0, db_1.addPrescriptionMedicine)(formData, medicine_id);\n        results.push({\n          medicine_id,\n          result: data\n        });\n      }\n      if (results.length) {\n        return {\n          message: \"Insertaions completed\",\n          results\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.PrescriptionMedicineService = PrescriptionMedicineService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlByZXNjcmlwdGlvbk1lZGljaW5lU2VydmljZSIsIkFkZFByZXNjcmlwdGlvbk1lZGljbmUiLCJmb3JtRGF0YSIsInJlc3VsdHMiLCJtZWRpY2luZSIsIm1lZGljaW5lX25hbWUiLCJtZWRpY2luZV9pZCIsIm1lZGljYXRpb25faWQiLCJkYXRhIiwiYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUiLCJwdXNoIiwicmVzdWx0IiwibGVuZ3RoIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwcmVzY3JpcHRpb24tbWVkaWNpbmVcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9wcmVzY3JpcHRpb24tbWVkaWNpbmUvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRkUHJlc2NyaXB0aW9uTWVkaWNpbmUgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJlc2NyaXB0aW9uTWVkaWNpbmVTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIEFkZFByZXNjcmlwdGlvbk1lZGljbmUoZm9ybURhdGE6IGFueSkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBtZWRpY2luZSBvZiBmb3JtRGF0YS5tZWRpY2luZV9uYW1lKSB7XHJcbiAgICAgIGNvbnN0IG1lZGljaW5lX2lkID0gbWVkaWNpbmUubWVkaWNhdGlvbl9pZDtcclxuXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGRQcmVzY3JpcHRpb25NZWRpY2luZShmb3JtRGF0YSwgbWVkaWNpbmVfaWQpO1xyXG4gICAgICByZXN1bHRzLnB1c2goeyBtZWRpY2luZV9pZCwgcmVzdWx0OiBkYXRhIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiSW5zZXJ0YWlvbnMgY29tcGxldGVkXCIsIHJlc3VsdHMgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLDJCQUEyQjtFQUMvQixPQUFhQyxzQkFBc0JBLENBQUNDLFFBQWE7O01BQ3RELE1BQU1DLE9BQU8sR0FBRyxFQUFFO01BQ2xCLEtBQUssTUFBTUMsUUFBUSxJQUFJRixRQUFRLENBQUNHLGFBQWEsRUFBRTtRQUM3QyxNQUFNQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csYUFBYTtRQUUxQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBVixJQUFBLENBQUFXLHVCQUF1QixFQUFDUCxRQUFRLEVBQUVJLFdBQVcsQ0FBQztRQUNqRUgsT0FBTyxDQUFDTyxJQUFJLENBQUM7VUFBRUosV0FBVztVQUFFSyxNQUFNLEVBQUVIO1FBQUksQ0FBRSxDQUFDO01BQzdDO01BQ0EsSUFBSUwsT0FBTyxDQUFDUyxNQUFNLEVBQUU7UUFDbEIsT0FBTztVQUFFQyxPQUFPLEVBQUUsdUJBQXVCO1VBQUVWO1FBQU8sQ0FBRTtNQUN0RCxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQWRIVyxPQUFBLENBQUFkLDJCQUFBLEdBQUFBLDJCQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","PrescriptionMedicineService","AddPrescriptionMedicne","formData","results","medicine","medicine_name","medicine_id","medication_id","data","addPrescriptionMedicine","push","result","length","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\prescription-medicine\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/prescription-medicine/services.ts"],"sourcesContent":["import { addPrescriptionMedicine } from \"../../bin/db\";\r\n\r\nexport class PrescriptionMedicineService {\r\n  public static async AddPrescriptionMedicne(formData: any) {\r\n    const results = [];\r\n    for (const medicine of formData.medicine_name) {\r\n      const medicine_id = medicine.medication_id;\r\n\r\n      const data = await addPrescriptionMedicine(formData, medicine_id);\r\n      results.push({ medicine_id, result: data });\r\n    }\r\n    if (results.length) {\r\n      return { message: \"Insertaions completed\", results };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,2BAA2B;EAC/B,OAAaC,sBAAsBA,CAACC,QAAa;;MACtD,MAAMC,OAAO,GAAG,EAAE;MAClB,KAAK,MAAMC,QAAQ,IAAIF,QAAQ,CAACG,aAAa,EAAE;QAC7C,MAAMC,WAAW,GAAGF,QAAQ,CAACG,aAAa;QAE1C,MAAMC,IAAI,GAAG,MAAM,IAAAV,IAAA,CAAAW,uBAAuB,EAACP,QAAQ,EAAEI,WAAW,CAAC;QACjEH,OAAO,CAACO,IAAI,CAAC;UAAEJ,WAAW;UAAEK,MAAM,EAAEH;QAAI,CAAE,CAAC;MAC7C;MACA,IAAIL,OAAO,CAACS,MAAM,EAAE;QAClB,OAAO;UAAEC,OAAO,EAAE,uBAAuB;UAAEV;QAAO,CAAE;MACtD,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAdHW,OAAA,CAAAd,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1741655050587},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic_services\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// router.get(\n//   \"/getClinicServices\",\n//   asyncHandler(async (req: Request, res: Response) => {\n//     const data = await clinicService.getClinicService();\n//     const buildResponse = BuildResponse.get(data);\n//     if (buildResponse) {\n//       return res.status(200).json(buildResponse);\n//     }\n//     return buildResponse;\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2xpbmljX3NlcnZpY2VzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2xpbmljX3NlcnZpY2VzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgY2xpbmljU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5cclxuLy8gcm91dGVyLmdldChcclxuLy8gICBcIi9nZXRDbGluaWNTZXJ2aWNlc1wiLFxyXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XHJcbi8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2xpbmljU2VydmljZS5nZXRDbGluaWNTZXJ2aWNlKCk7XHJcbi8vICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbi8vICAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gYnVpbGRSZXNwb25zZTtcclxuLy8gICB9KVxyXG4vLyApO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":[],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\clinic_services\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/clinic_services/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport { clinicService } from \"./service\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n// router.get(\r\n//   \"/getClinicServices\",\r\n//   asyncHandler(async (req: Request, res: Response) => {\r\n//     const data = await clinicService.getClinicService();\r\n//     const buildResponse = BuildResponse.get(data);\r\n//     if (buildResponse) {\r\n//       return res.status(200).json(buildResponse);\r\n//     }\r\n//     return buildResponse;\r\n//   })\r\n// );\r\n"],"mappings":";;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1741655050583},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllCities\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.citiesService.getAllCities();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\npublic_1.router.get(\"/filtered_neighbor/:id\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const city_id = +req.params.id;\n  const data = yield service_1.citiesService.filtered_neighbor(city_id);\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJjaXRpZXNTZXJ2aWNlIiwiZ2V0QWxsQ2l0aWVzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsImNpdHlfaWQiLCJwYXJhbXMiLCJpZCIsImZpbHRlcmVkX25laWdoYm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgY2l0aWVzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIjtcclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZ2V0QWxsQ2l0aWVzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaXRpZXNTZXJ2aWNlLmdldEFsbENpdGllcygpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG5cclxuICB9KVxyXG4pO1xyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2ZpbHRlcmVkX25laWdoYm9yLzppZFwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyAocmVxOiBhbnksIHJlczogYW55KSA9PiB7XHJcbiAgICBjb25zdCBjaXR5X2lkID0gK3JlcS5wYXJhbXMuaWQ7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2l0aWVzU2VydmljZS5maWx0ZXJlZF9uZWlnaGJvcihjaXR5X2lkKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE1BQU0sQ0FBQ0MsR0FBRyxDQUNSLGVBQWUsRUFDZixJQUFBTixlQUFBLENBQUFPLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxhQUFhLENBQUNDLFlBQVksRUFBRTtFQUMvQyxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0g7QUFDRFgsUUFBQSxDQUFBRSxNQUFNLENBQUNDLEdBQUcsQ0FDUix3QkFBd0IsRUFDeEIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTVMsT0FBTyxHQUFHLENBQUNYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDQyxFQUFFO0VBQzlCLE1BQU1WLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGFBQWEsQ0FBQ1UsaUJBQWlCLENBQUNILE9BQU8sQ0FBQztFQUMzRCxNQUFNTCxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","citiesService","getAllCities","buildResponse","BuildResponse","status","code","json","city_id","params","id","filtered_neighbor"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/cities/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { citiesService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllCities\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await citiesService.getAllCities();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\nrouter.get(\r\n  \"/filtered_neighbor/:id\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const city_id = +req.params.id;\r\n    const data = await citiesService.filtered_neighbor(city_id);\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,eAAe,EACf,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACC,YAAY,EAAE;EAC/C,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH;AACDX,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,wBAAwB,EACxB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMS,OAAO,GAAG,CAACX,GAAG,CAACY,MAAM,CAACC,EAAE;EAC9B,MAAMV,IAAI,GAAG,MAAMP,SAAA,CAAAQ,aAAa,CAACU,iBAAiB,CAACH,OAAO,CAAC;EAC3D,MAAML,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.citiesService = void 0;\nconst db_1 = require(\"./db\");\nclass citiesService {\n  static getAllCities() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllCities)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n  static filtered_neighbor(city_id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.GetNeighborhoods)(city_id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.citiesService = citiesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsImNpdGllc1NlcnZpY2UiLCJnZXRBbGxDaXRpZXMiLCJkYXRhIiwibWVzc2FnZSIsImZpbHRlcmVkX25laWdoYm9yIiwiY2l0eV9pZCIsIkdldE5laWdoYm9yaG9vZHMiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWxsQ2l0aWVzLCBHZXROZWlnaGJvcmhvb2RzIH0gZnJvbSBcIi4vZGJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBjaXRpZXNTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbENpdGllcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbGxDaXRpZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBmaWx0ZXJlZF9uZWlnaGJvcihjaXR5X2lkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBHZXROZWlnaGJvcmhvb2RzKGNpdHlfaWQpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIk5vIGRhdGEgZm91bmRcIiwgZGF0YTogbnVsbCB9O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQWFDLGFBQWE7RUFDakIsT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxZQUFZLEdBQUU7TUFDakMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTztVQUFFQyxPQUFPLEVBQUUsZUFBZTtVQUFFRCxJQUFJLEVBQUU7UUFBSSxDQUFFO01BQ2pEO0lBQ0YsQ0FBQzs7RUFDTSxPQUFhRSxpQkFBaUJBLENBQUNDLE9BQWU7O01BQ25ELE1BQU1ILElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVEsZ0JBQWdCLEVBQUNELE9BQU8sQ0FBQztNQUM1QyxJQUFJSCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPO1VBQUVDLE9BQU8sRUFBRSxlQUFlO1VBQUVELElBQUksRUFBRTtRQUFJLENBQUU7TUFDakQ7SUFDRixDQUFDOzs7QUFoQkhLLE9BQUEsQ0FBQVAsYUFBQSxHQUFBQSxhQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","citiesService","getAllCities","data","message","filtered_neighbor","city_id","GetNeighborhoods","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/cities/service.ts"],"sourcesContent":["import { getAllCities, GetNeighborhoods } from \"./db\";\r\n\r\nexport class citiesService {\r\n  public static async getAllCities() {\r\n    const data = await getAllCities();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n  public static async filtered_neighbor(city_id: number) {\r\n    const data = await GetNeighborhoods(city_id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,aAAa;EACjB,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,YAAY,GAAE;MACjC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;EACM,OAAaE,iBAAiBA,CAACC,OAAe;;MACnD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,gBAAgB,EAACD,OAAO,CAAC;MAC5C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AAhBHK,OAAA,CAAAP,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\cities\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllCities = getAllCities;\nexports.GetNeighborhoods = GetNeighborhoods;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllCities() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.cities`);\n    return result;\n  });\n}\nfunction GetNeighborhoods(city_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const adjustedCityId = city_id + 1;\n    const result = yield (0, mysql_1.query)(`\n     SELECT * FROM ${mysql_1.coreSchema}.neighborhoods\n     WHERE city_id = ?\n    `, {\n      values: [adjustedCityId]\n    });\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsQ2l0aWVzIiwiR2V0TmVpZ2hib3Job29kcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIiwiY2l0eV9pZCIsImFkanVzdGVkQ2l0eUlkIiwidmFsdWVzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcY2l0aWVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY2l0aWVzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbENpdGllcygpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jaXRpZXNgXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0TmVpZ2hib3Job29kcyhjaXR5X2lkOiBudW1iZXIpIHtcclxuICBjb25zdCBhZGp1c3RlZENpdHlJZCA9IGNpdHlfaWQgKyAxO1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lm5laWdoYm9yaG9vZHNcclxuICAgICBXSEVSRSBjaXR5X2lkID0gP1xyXG4gICAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbYWRqdXN0ZWRDaXR5SWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUFBLE9BQUEsQ0FBQUMsWUFBQSxHQUFBQSxZQUFBO0FBT0FELE9BQUEsQ0FBQUUsZ0JBQUEsR0FBQUEsZ0JBQUE7QUFUQSxNQUFBQyxPQUFBLEdBQUFDLE9BQUE7QUFFQSxTQUFzQkgsWUFBWUEsQ0FBQTs7SUFDaEMsTUFBTUksTUFBTSxHQUFHLE1BQU0sSUFBQUYsT0FBQSxDQUFBRyxLQUFLLEVBQ3hCLGlCQUFpQkgsT0FBQSxDQUFBSSxVQUFVLFNBQVMsQ0FDckM7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQzs7QUFFRCxTQUFzQkgsZ0JBQWdCQSxDQUFDTSxPQUFlOztJQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sR0FBRyxDQUFDO0lBQ2xDLE1BQU1ILE1BQU0sR0FBRyxNQUFNLElBQUFGLE9BQUEsQ0FBQUcsS0FBSyxFQUN4QjtxQkFDaUJILE9BQUEsQ0FBQUksVUFBVTs7S0FFMUIsRUFDRDtNQUNFRyxNQUFNLEVBQUUsQ0FBQ0QsY0FBYztLQUN4QixDQUNGO0lBQ0QsT0FBT0osTUFBTTtFQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","getAllCities","GetNeighborhoods","mysql_1","require","result","query","coreSchema","city_id","adjustedCityId","values"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\cities\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/cities/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllCities() {\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.cities`\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function GetNeighborhoods(city_id: number) {\r\n  const adjustedCityId = city_id + 1;\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n     SELECT * FROM ${coreSchema}.neighborhoods\r\n     WHERE city_id = ?\r\n    `,\r\n    {\r\n      values: [adjustedCityId],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,YAAA,GAAAA,YAAA;AAOAD,OAAA,CAAAE,gBAAA,GAAAA,gBAAA;AATA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBH,YAAYA,CAAA;;IAChC,MAAMI,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,SAAS,CACrC;IACD,OAAOF,MAAM;EACf,CAAC;;AAED,SAAsBH,gBAAgBA,CAACM,OAAe;;IACpD,MAAMC,cAAc,GAAGD,OAAO,GAAG,CAAC;IAClC,MAAMH,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB;qBACiBH,OAAA,CAAAI,UAAU;;KAE1B,EACD;MACEG,MAAM,EAAE,CAACD,cAAc;KACxB,CACF;IACD,OAAOJ,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050581},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.get(\"/getAllInsurances\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const data = yield service_1.InsuranceService.getAllInsurances();\n  const buildResponse = app_response_1.BuildResponse.get(data);\n  return res.status(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsImdldCIsImFzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIl9fYXdhaXRlciIsImRhdGEiLCJJbnN1cmFuY2VTZXJ2aWNlIiwiZ2V0QWxsSW5zdXJhbmNlcyIsImJ1aWxkUmVzcG9uc2UiLCJCdWlsZFJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxpbnN1cmFuY2VcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29udHJvbGxlci9pbnN1cmFuY2UvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBJbnN1cmFuY2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xyXG5cclxucm91dGVyLmdldChcclxuICBcIi9nZXRBbGxJbnN1cmFuY2VzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBJbnN1cmFuY2VTZXJ2aWNlLmdldEFsbEluc3VyYW5jZXMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuXHJcbiAgfSlcclxuKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSCxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsTUFBTSxDQUFDQyxHQUFHLENBQ1IsbUJBQW1CLEVBQ25CLElBQUFOLGVBQUEsQ0FBQU8sWUFBWSxFQUFDLENBQU9DLEdBQVEsRUFBRUMsR0FBUSxLQUFJQyxTQUFBO0VBQ3hDLE1BQU1DLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGdCQUFnQixDQUFDQyxnQkFBZ0IsRUFBRTtFQUN0RCxNQUFNQyxhQUFhLEdBQUdaLGNBQUEsQ0FBQWEsYUFBYSxDQUFDVCxHQUFHLENBQUNLLElBQUksQ0FBQztFQUM3QyxPQUFPRixHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7QUFFM0QsQ0FBQyxFQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","get","asyncHandler","req","res","__awaiter","data","InsuranceService","getAllInsurances","buildResponse","BuildResponse","status","code","json"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/insurance/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { InsuranceService } from \"./service\";\r\n\r\nrouter.get(\r\n  \"/getAllInsurances\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const data = await InsuranceService.getAllInsurances();\r\n    const buildResponse = BuildResponse.get(data);\r\n    return res.status(buildResponse.code).json(buildResponse);\r\n\r\n  })\r\n);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,MAAM,CAACC,GAAG,CACR,mBAAmB,EACnB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,gBAAgB,CAACC,gBAAgB,EAAE;EACtD,MAAMC,aAAa,GAAGZ,cAAA,CAAAa,aAAa,CAACT,GAAG,CAACK,IAAI,CAAC;EAC7C,OAAOF,GAAG,CAACO,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;AAE3D,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InsuranceService = void 0;\nconst db_1 = require(\"./db\");\nclass InsuranceService {\n  static getAllInsurances() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAllInsurances)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return {\n          message: \"No data found\",\n          data: null\n        };\n      }\n    });\n  }\n}\nexports.InsuranceService = InsuranceService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkluc3VyYW5jZVNlcnZpY2UiLCJnZXRBbGxJbnN1cmFuY2VzIiwiZGF0YSIsIm1lc3NhZ2UiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvaW5zdXJhbmNlL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWxsSW5zdXJhbmNlcyB9IGZyb20gXCIuL2RiXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5zdXJhbmNlU2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRBbGxJbnN1cmFuY2VzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFsbEluc3VyYW5jZXMoKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJObyBkYXRhIGZvdW5kXCIsIGRhdGE6IG51bGwgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBYUMsZ0JBQWdCO0VBQ3BCLE9BQWFDLGdCQUFnQkEsQ0FBQTs7TUFDbEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxnQkFBZ0IsR0FBRTtNQUNyQyxJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPO1VBQUVDLE9BQU8sRUFBRSxlQUFlO1VBQUVELElBQUksRUFBRTtRQUFJLENBQUU7TUFDakQ7SUFDRixDQUFDOzs7QUFSSEUsT0FBQSxDQUFBSixnQkFBQSxHQUFBQSxnQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","InsuranceService","getAllInsurances","data","message","exports"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/insurance/service.ts"],"sourcesContent":["import { getAllInsurances } from \"./db\";\r\n\r\nexport class InsuranceService {\r\n  public static async getAllInsurances() {\r\n    const data = await getAllInsurances();\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return { message: \"No data found\", data: null };\r\n    }\r\n  }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAaC,gBAAgB;EACpB,OAAaC,gBAAgBA,CAAA;;MAClC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,gBAAgB,GAAE;MACrC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO;UAAEC,OAAO,EAAE,eAAe;UAAED,IAAI,EAAE;QAAI,CAAE;MACjD;IACF,CAAC;;;AARHE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\insurance\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllInsurances = getAllInsurances;\nconst mysql_1 = require(\"../../bin/mysql\");\nfunction getAllInsurances() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.insurances`);\n    return result;\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsSW5zdXJhbmNlcyIsIm15c3FsXzEiLCJyZXF1aXJlIiwicmVzdWx0IiwicXVlcnkiLCJjb3JlU2NoZW1hIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcaW5zdXJhbmNlXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvaW5zdXJhbmNlL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uLy4uL2Jpbi9teXNxbFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEluc3VyYW5jZXMoKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9Lmluc3VyYW5jZXNgXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBQSxPQUFBLENBQUFDLGdCQUFBLEdBQUFBLGdCQUFBO0FBRkEsTUFBQUMsT0FBQSxHQUFBQyxPQUFBO0FBRUEsU0FBc0JGLGdCQUFnQkEsQ0FBQTs7SUFDbEMsTUFBTUcsTUFBTSxHQUFHLE1BQU0sSUFBQUYsT0FBQSxDQUFBRyxLQUFLLEVBQ3hCLGlCQUFpQkgsT0FBQSxDQUFBSSxVQUFVLGFBQWEsQ0FDekM7SUFDRCxPQUFPRixNQUFNO0VBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","getAllInsurances","mysql_1","require","result","query","coreSchema"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\insurance\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/insurance/db.ts"],"sourcesContent":["import { coreSchema, query, RowDataPacket } from \"../../bin/mysql\";\r\n\r\nexport async function getAllInsurances() {\r\n    const result = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.insurances`\r\n    );\r\n    return result;\r\n  }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAFA,MAAAC,OAAA,GAAAC,OAAA;AAEA,SAAsBF,gBAAgBA,CAAA;;IAClC,MAAMG,MAAM,GAAG,MAAM,IAAAF,OAAA,CAAAG,KAAK,EACxB,iBAAiBH,OAAA,CAAAI,UAAU,aAAa,CACzC;IACD,OAAOF,MAAM;EACf,CAAC","ignoreList":[]}},"mtime":1741655050585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\clinic\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst public_1 = require(\"../../routes/public\");\nconst service_1 = require(\"./service\");\npublic_1.router.post(\"/clinics/add\", (0, async_handler_1.asyncHandler)(function addNewClinic(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield service_1.ClinicService.registerClinic(formData);\n    const buildResponse = yield app_response_1.BuildResponse.get(result);\n    if (buildResponse) {\n      return buildResponse;\n    }\n    return result;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsInJvdXRlciIsInBvc3QiLCJhc3luY0hhbmRsZXIiLCJhZGROZXdDbGluaWMiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJyZXN1bHQiLCJDbGluaWNTZXJ2aWNlIiwicmVnaXN0ZXJDbGluaWMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsImdldCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGNsaW5pY1xcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvbmV3L2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2NsaW5pYy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBCdWlsZFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCB7IENsaW5pY1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gIFwiL2NsaW5pY3MvYWRkXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGFkZE5ld0NsaW5pYyhyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDbGluaWNTZXJ2aWNlLnJlZ2lzdGVyQ2xpbmljKGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxTQUFBLEdBQUFILE9BQUE7QUFHQUUsUUFBQSxDQUFBRSxNQUFNLENBQUNDLElBQUksQ0FDVCxjQUFjLEVBQ2QsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsU0FBZUMsWUFBWUEsQ0FBQ0MsR0FBWSxFQUFFQyxHQUFhOztJQUNsRSxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxNQUFNLEdBQUcsTUFBTVQsU0FBQSxDQUFBVSxhQUFhLENBQUNDLGNBQWMsQ0FBQ0osUUFBUSxDQUFDO0lBQzNELE1BQU1LLGFBQWEsR0FBRyxNQUFNZCxjQUFBLENBQUFlLGFBQWEsQ0FBQ0MsR0FBRyxDQUFDTCxNQUFNLENBQUM7SUFDckQsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9BLGFBQWE7SUFDdEI7SUFDQSxPQUFPSCxNQUFNO0VBQ2YsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","require","app_response_1","public_1","service_1","router","post","asyncHandler","addNewClinic","req","res","formData","body","result","ClinicService","registerClinic","buildResponse","BuildResponse","get"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\controller\\clinic\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/controller/clinic/controller.ts"],"sourcesContent":["import { asyncHandler } from \"../../helper/async-handler\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\nimport { router } from \"../../routes/public\";\r\nimport { ClinicService } from \"./service\";\r\nimport { Request, Response } from \"express\";\r\n\r\nrouter.post(\r\n  \"/clinics/add\",\r\n  asyncHandler(async function addNewClinic(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await ClinicService.registerClinic(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }\r\n    return result;\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAGAE,QAAA,CAAAE,MAAM,CAACC,IAAI,CACT,cAAc,EACd,IAAAN,eAAA,CAAAO,YAAY,EAAC,SAAeC,YAAYA,CAACC,GAAY,EAAEC,GAAa;;IAClE,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,MAAM,GAAG,MAAMT,SAAA,CAAAU,aAAa,CAACC,cAAc,CAACJ,QAAQ,CAAC;IAC3D,MAAMK,aAAa,GAAG,MAAMd,cAAA,CAAAe,aAAa,CAACC,GAAG,CAACL,MAAM,CAAC;IACrD,IAAIG,aAAa,EAAE;MACjB,OAAOA,aAAa;IACtB;IACA,OAAOH,MAAM;EACf,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1741655050582},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorYup = ExpressErrorYup;\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yWXVwIiwieXVwXzEiLCJyZXF1aXJlIiwiZXJyIiwicmVxIiwicmVzIiwibmV4dCIsIlZhbGlkYXRpb25FcnJvciIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZXJyb3JzIiwiam9pbiIsImlubmVyIiwibGVuZ3RoIiwicmVkdWNlIiwiYWNjIiwiY3VyVmFsIiwicGF0aCIsInR5cGUiLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl95dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gXCJ5dXBcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBFeHByZXNzRXJyb3JZdXAoXHJcbiAgICBlcnI6IGFueSxcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2UsXHJcbiAgICBuZXh0OiBOZXh0RnVuY3Rpb25cclxuKSB7XHJcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SIFlVUCBWQUxJREFUSU9OJyk7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSB7XHJcbiAgICAgICAgICAgIGNvZGU6IDQyMixcclxuICAgICAgICAgICAgbWVzc2FnZTogZXJyLmVycm9ycy5qb2luKCc8YnIvPicpIHx8ICdZdXAgVmFsaWRhdGlvbiBFcnJvciAhJyxcclxuICAgICAgICAgICAgZXJyb3JzOlxyXG4gICAgICAgICAgICAgICAgZXJyLmlubmVyLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICA/IGVyci5pbm5lci5yZWR1Y2UoKGFjYzogYW55LCBjdXJWYWw6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NbYCR7Y3VyVmFsLnBhdGh9YF0gPSBjdXJWYWwubWVzc2FnZSB8fCBjdXJWYWwudHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgICAgICAgICAgICAgfSwge30pXHJcbiAgICAgICAgICAgICAgICAgICAgOiB7IFtgJHtlcnIucGF0aH1gXTogZXJyLm1lc3NhZ2UgfHwgZXJyLnR5cGUgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgbmV4dChlcnIpXHJcblxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyxlQUFBLEdBQUFBLGVBQUE7QUFGQSxNQUFBQyxLQUFBLEdBQUFDLE9BQUE7QUFFQSxTQUFzQkYsZUFBZUEsQ0FDakNHLEdBQVEsRUFDUkMsR0FBWSxFQUNaQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQixJQUFJSCxHQUFHLFlBQVlGLEtBQUEsQ0FBQU0sZUFBZSxFQUFFO01BQ2hDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztNQUNuQyxNQUFNQyxLQUFLLEdBQUc7UUFDVkMsSUFBSSxFQUFFLEdBQUc7UUFDVEMsT0FBTyxFQUFFVCxHQUFHLENBQUNVLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLHdCQUF3QjtRQUM3REQsTUFBTSxFQUNGVixHQUFHLENBQUNZLEtBQUssQ0FBQ0MsTUFBTSxHQUFHLENBQUMsR0FDZGIsR0FBRyxDQUFDWSxLQUFLLENBQUNFLE1BQU0sQ0FBQyxDQUFDQyxHQUFRLEVBQUVDLE1BQVcsS0FBSTtVQUN6Q0QsR0FBRyxDQUFDLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxFQUFFLENBQUMsR0FBR0QsTUFBTSxDQUFDUCxPQUFPLElBQUlPLE1BQU0sQ0FBQ0UsSUFBSTtVQUNyRCxPQUFPSCxHQUFHO1FBQ2QsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUNKO1VBQUUsQ0FBQyxHQUFHZixHQUFHLENBQUNpQixJQUFJLEVBQUUsR0FBR2pCLEdBQUcsQ0FBQ1MsT0FBTyxJQUFJVCxHQUFHLENBQUNrQjtRQUFJO09BQ3ZEO01BQ0QsT0FBT2hCLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDYixLQUFLLENBQUM7SUFDdEM7SUFDQUosSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFFYixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressErrorYup","yup_1","require","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { ValidationError } from \"yup\";\r\n\r\nexport async function ExpressErrorYup(\r\n    err: any,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    if (err instanceof ValidationError) {\r\n        console.log('ERROR YUP VALIDATION');\r\n        const error = {\r\n            code: 422,\r\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\r\n            errors:\r\n                err.inner.length > 0\r\n                    ? err.inner.reduce((acc: any, curVal: any) => {\r\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\r\n                        return acc\r\n                    }, {})\r\n                    : { [`${err.path}`]: err.message || err.type }\r\n        }\r\n        return res.status(422).json(error);\r\n    }\r\n    next(err)\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,eAAA,GAAAA,eAAA;AAFA,MAAAC,KAAA,GAAAC,OAAA;AAEA,SAAsBF,eAAeA,CACjCG,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYF,KAAA,CAAAM,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedOrigins = void 0;\nexports.allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://192.168.50.207:8000\", \"http://172.26.144.1:8000\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsb3dlZE9yaWdpbnMiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxuZXdcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb25zdGFudHNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvY29uc3RhbnRzL2NvbnN0YW50c19hbGxvd2VkX29yZ2luYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGFsbG93ZWRPcmlnaW5zID0gW1xyXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDIwMCcsIC8vIEZyb250ZW5kIFdlYlxyXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxyXG4gICAgXCJodHRwOi8vMTkyLjE2OC41MC4yMDc6ODAwMFwiLFxyXG4gICAgXCJodHRwOi8vMTcyLjI2LjE0NC4xOjgwMDBcIlxyXG4gICBdXHJcbiAgXHJcbiAgIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBYUEsT0FBQSxDQUFBQyxjQUFjLEdBQUcsQ0FDMUIsdUJBQXVCO0FBQUU7QUFDekIsdUJBQXVCO0FBQUU7QUFDekIsNEJBQTRCLEVBQzVCLDBCQUEwQixDQUMxQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","allowedOrigins"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\constants\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["export const allowedOrigins = [\r\n    'http://localhost:4200', // Frontend Web\r\n    'http://localhost:3000', // Frontend Web\r\n    \"http://192.168.50.207:8000\",\r\n    \"http://172.26.144.1:8000\"\r\n   ]\r\n  \r\n  "],"mappings":";;;;;;AAAaA,OAAA,CAAAC,cAAc,GAAG,CAC1B,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,4BAA4B,EAC5B,0BAA0B,CAC1B","ignoreList":[]}},"mtime":1741655050579},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressErrorResponse = ExpressErrorResponse;\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = __importDefault(require(\"lodash\"));\nconst response_error_1 = require(\"../modules/error/response_error\");\nfunction generateErrorResponseError(e, code) {\n  return lodash_1.default.isObject(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.ResponseError.BaseResponse) {\n      return res.status(err.code).json(generateErrorResponseError(err, err.code));\n    }\n    next(err);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiZGVmYXVsdCIsImlzT2JqZWN0IiwibWVzc2FnZSIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJNdWx0ZXJFcnJvciIsInN0YXR1cyIsImpzb24iLCJSZXNwb25zZUVycm9yIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcbmV3XFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL25ldy9jbGluaWNhbGxfYWxpL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG5pbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCB7UmVzcG9uc2VFcnJvcn0gZnJvbSAnLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvcic7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvcihlOiBFcnJvciwgY29kZTogTnVtYmVyKSB7XHJcbiAgcmV0dXJuIF8uaXNPYmplY3QoZS5tZXNzYWdlKSA/IGUubWVzc2FnZSA6IHsgY29kZSwgbWVzc2FnZTogZS5tZXNzYWdlIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NFcnJvclJlc3BvbnNlKFxyXG4gIGVycjogYW55LFxyXG4gIHJlcTogUmVxdWVzdCxcclxuICByZXM6IFJlc3BvbnNlLFxyXG4gIG5leHQ6IE5leHRGdW5jdGlvblxyXG4pIHtcclxuICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZXJyLCA0MDApKVxyXG4gIH1cclxuXHJcbiAgaWYgKGVyciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gcmVzXHJcbiAgICAgIC5zdGF0dXMoZXJyLmNvZGUpXHJcbiAgICAgIC5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgZXJyLmNvZGUpKVxyXG4gIH1cclxuICBuZXh0KGVycilcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBVUFBLE9BQUEsQ0FBQUMsb0JBQUEsR0FBQUEsb0JBQUE7QUFWQSxNQUFBQyxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBR0EsTUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUVBLFNBQVNHLDBCQUEwQkEsQ0FBQ0MsQ0FBUSxFQUFFQyxJQUFZO0VBQ3hELE9BQU9KLFFBQUEsQ0FBQUssT0FBQyxDQUFDQyxRQUFRLENBQUNILENBQUMsQ0FBQ0ksT0FBTyxDQUFDLEdBQUdKLENBQUMsQ0FBQ0ksT0FBTyxHQUFHO0lBQUVILElBQUk7SUFBRUcsT0FBTyxFQUFFSixDQUFDLENBQUNJO0VBQU8sQ0FBRTtBQUN6RTtBQUVBLFNBQXNCWCxvQkFBb0JBLENBQ3hDWSxHQUFRLEVBQ1JDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjs7SUFFbEIsSUFBSUgsR0FBRyxZQUFZWCxRQUFBLENBQUFRLE9BQU0sQ0FBQ08sV0FBVyxFQUFFO01BQ3JDLE9BQU9GLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNaLDBCQUEwQixDQUFDTSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbkU7SUFFQSxJQUFJQSxHQUFHLFlBQVlQLGdCQUFBLENBQUFjLGFBQWEsQ0FBQ0MsWUFBWSxFQUFFO01BQzdDLE9BQU9OLEdBQUcsQ0FDUEcsTUFBTSxDQUFDTCxHQUFHLENBQUNKLElBQUksQ0FBQyxDQUNoQlUsSUFBSSxDQUFDWiwwQkFBMEIsQ0FBQ00sR0FBRyxFQUFFQSxHQUFHLENBQUNKLElBQUksQ0FBQyxDQUFDO0lBQ3BEO0lBQ0FPLElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ1gsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["exports","ExpressErrorResponse","multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","default","isObject","message","err","req","res","next","MulterError","status","json","ResponseError","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\r\nimport _ from 'lodash';\r\n\r\nimport { NextFunction, Request, Response } from 'express';\r\nimport {ResponseError} from '../modules/error/response_error';\r\n\r\nfunction generateErrorResponseError(e: Error, code: Number) {\r\n  return _.isObject(e.message) ? e.message : { code, message: e.message }\r\n}\r\n\r\nexport async function ExpressErrorResponse(\r\n  err: any,\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  if (err instanceof multer.MulterError) {\r\n    return res.status(400).json(generateErrorResponseError(err, 400))\r\n  }\r\n\r\n  if (err instanceof ResponseError.BaseResponse) {\r\n    return res\r\n      .status(err.code)\r\n      .json(generateErrorResponseError(err, err.code))\r\n  }\r\n  next(err)\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUAA,OAAA,CAAAC,oBAAA,GAAAA,oBAAA;AAVA,MAAAC,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAGA,MAAAE,gBAAA,GAAAF,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAOJ,QAAA,CAAAK,OAAC,CAACC,QAAQ,CAACH,CAAC,CAACI,OAAO,CAAC,GAAGJ,CAAC,CAACI,OAAO,GAAG;IAAEH,IAAI;IAAEG,OAAO,EAAEJ,CAAC,CAACI;EAAO,CAAE;AACzE;AAEA,SAAsBX,oBAAoBA,CACxCY,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAQ,OAAM,CAACO,WAAW,EAAE;MACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAc,aAAa,CAACC,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPG,MAAM,CAACL,GAAG,CAACJ,IAAI,CAAC,CAChBU,IAAI,CAACZ,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACJ,IAAI,CAAC,CAAC;IACpD;IACAO,IAAI,CAACH,GAAG,CAAC;EACX,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\new\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpressAutoHandleTransaction = ExpressAutoHandleTransaction;\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once(\"finish\", () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log(\"AUTO COMMIT!!!\");\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiRXhwcmVzc0F1dG9IYW5kbGVUcmFuc2FjdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJfdHJhbnNhY3Rpb24iLCJvbmNlIiwidHJhbnNhY3Rpb25LZXlzIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJsZW5ndGgiLCJ0eG4iLCJmaW5pc2hlZCIsImVuZHBvaW50Iiwib3JpZ2luYWxVcmwiLCJjb25zb2xlIiwid2FybiIsImxvZyIsImNvbW1pdCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXG5ld1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L0FsaS9Qcm9qZWN0cy9uZXcvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tIFwic2VxdWVsaXplXCI7XHJcbmltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVzcG9uc2UsIFJlcXVlc3QgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb24oXHJcbiAgcmVxOiBhbnksXHJcbiAgcmVzOiBSZXNwb25zZSxcclxuICBuZXh0OiBOZXh0RnVuY3Rpb25cclxuKSB7XHJcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxyXG4gIHJlcS5fdHJhbnNhY3Rpb24gPSByZXEuX3RyYW5zYWN0aW9uIHx8IHt9O1xyXG5cclxuICByZXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IF90cmFuc2FjdGlvbiB9ID0gcmVxO1xyXG5cclxuICAgIGlmICghX3RyYW5zYWN0aW9uKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbktleXMgPSBPYmplY3Qua2V5cyhfdHJhbnNhY3Rpb24pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2FjdGlvbktleXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgY29uc3QgdHhuID0gX3RyYW5zYWN0aW9uW3RyYW5zYWN0aW9uS2V5c1tpXV0gYXMgVHJhbnNhY3Rpb24gJiB7XHJcbiAgICAgICAgZmluaXNoZWQ/OiBzdHJpbmc7XHJcbiAgICAgIH07XHJcbiAgICAgIGlmICghdHhuPy5maW5pc2hlZCkge1xyXG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gcmVxLm9yaWdpbmFsVXJsO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgZW5kcG9pbnQgJHtlbmRwb2ludH0gcG90ZW50aWFsbHkgY2FuIGxlYWQgdG8gYnVnYCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBVVRPIENPTU1JVCEhIVwiKTtcclxuICAgICAgICB0eG4uY29tbWl0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgbmV4dCgpO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQUEsT0FBQSxDQUFBQyw0QkFBQSxHQUFBQSw0QkFBQTtBQUFBLFNBQXNCQSw0QkFBNEJBLENBQ2hEQyxHQUFRLEVBQ1JDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCO0lBQ0FGLEdBQUcsQ0FBQ0csWUFBWSxHQUFHSCxHQUFHLENBQUNHLFlBQVksSUFBSSxFQUFFO0lBRXpDRixHQUFHLENBQUNHLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBSztNQUN0QixNQUFNO1FBQUVEO01BQVksQ0FBRSxHQUFHSCxHQUFHO01BRTVCLElBQUksQ0FBQ0csWUFBWSxFQUFFO1FBQ2pCO01BQ0Y7TUFFQSxNQUFNRSxlQUFlLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSixZQUFZLENBQUM7TUFDakQsS0FBSyxJQUFJSyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILGVBQWUsQ0FBQ0ksTUFBTSxFQUFFRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xELE1BQU1FLEdBQUcsR0FBR1AsWUFBWSxDQUFDRSxlQUFlLENBQUNHLENBQUMsQ0FBQyxDQUUxQztRQUNELElBQUksRUFBQ0UsR0FBRyxhQUFIQSxHQUFHLHVCQUFIQSxHQUFHLENBQUVDLFFBQVEsR0FBRTtVQUNsQixNQUFNQyxRQUFRLEdBQUdaLEdBQUcsQ0FBQ2EsV0FBVztVQUNoQ0MsT0FBTyxDQUFDQyxJQUFJLENBQUMsWUFBWUgsUUFBUSw4QkFBOEIsQ0FBQztVQUNoRUUsT0FBTyxDQUFDRSxHQUFHLENBQUMsZ0JBQWdCLENBQUM7VUFDN0JOLEdBQUcsQ0FBQ08sTUFBTSxFQUFFO1FBQ2Q7TUFDRjtJQUNGLENBQUMsQ0FBQztJQUVGZixJQUFJLEVBQUU7RUFDUixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["exports","ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit"],"sourceRoot":"D:\\Ali\\Projects\\new\\clinicall_ali\\server\\src\\middlewares\\","sources":["D:/Ali/Projects/new/clinicall_ali/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from \"sequelize\";\r\nimport { NextFunction, Response, Request } from \"express\";\r\n\r\nexport async function ExpressAutoHandleTransaction(\r\n  req: any,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  // Ensure _transaction is initialized\r\n  req._transaction = req._transaction || {};\r\n\r\n  res.once(\"finish\", () => {\r\n    const { _transaction } = req;\r\n\r\n    if (!_transaction) {\r\n      return;\r\n    }\r\n\r\n    const transactionKeys = Object.keys(_transaction);\r\n    for (let i = 0; i < transactionKeys.length; i += 1) {\r\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\r\n        finished?: string;\r\n      };\r\n      if (!txn?.finished) {\r\n        const endpoint = req.originalUrl;\r\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\r\n        console.log(\"AUTO COMMIT!!!\");\r\n        txn.commit();\r\n      }\r\n    }\r\n  });\r\n\r\n  next();\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAA,CAAAC,4BAAA,GAAAA,4BAAA;AAAA,SAAsBA,4BAA4BA,CAChDC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC","ignoreList":[]}},"mtime":1741655050591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\elastic-search\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\elastic-search\\\\controlleer.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst elasticsearch_1 = require(\"@elastic/elasticsearch\");\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst syncDoctors_1 = require(\"../../scripts/syncDoctors\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\nconst esClient = new elasticsearch_1.Client({\n  node: process.env.ELASTICSEARCH_URL || 'http://localhost:9200',\n  auth: {\n    username: process.env.ELASTICSEARCH_USERNAME || 'elastic',\n    password: process.env.ELASTICSEARCH_PASSWORD || 'AkglQc*MUEVLnCXwZ+eu'\n  }\n});\npublic_1.router.get(\"/doctors/search\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    query\n  } = req.query;\n  if (!query) {\n    return res.status(400).json({\n      message: \"Query is required\"\n    });\n  }\n  const doctors = yield (0, syncDoctors_1.searchDoctors)(query);\n  const buildResponse = app_response_1.BuildResponse.get(doctors);\n  res.statu(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbGFzdGljc2VhcmNoXzEiLCJyZXF1aXJlIiwiYXN5bmNfaGFuZGxlcl8xIiwicHVibGljXzEiLCJzeW5jRG9jdG9yc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJlc0NsaWVudCIsIkNsaWVudCIsIm5vZGUiLCJwcm9jZXNzIiwiZW52IiwiRUxBU1RJQ1NFQVJDSF9VUkwiLCJhdXRoIiwidXNlcm5hbWUiLCJFTEFTVElDU0VBUkNIX1VTRVJOQU1FIiwicGFzc3dvcmQiLCJFTEFTVElDU0VBUkNIX1BBU1NXT1JEIiwicm91dGVyIiwiZ2V0IiwiYXN5bmNIYW5kbGVyIiwicmVxIiwicmVzIiwiX19hd2FpdGVyIiwicXVlcnkiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImRvY3RvcnMiLCJzZWFyY2hEb2N0b3JzIiwiYnVpbGRSZXNwb25zZSIsIkJ1aWxkUmVzcG9uc2UiLCJzdGF0dSIsImNvZGUiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcZWxhc3RpYy1zZWFyY2hcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9jb250cm9sbGVyL2VsYXN0aWMtc2VhcmNoL2NvbnRyb2xsZWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJAZWxhc3RpYy9lbGFzdGljc2VhcmNoXCI7XHJcbmltcG9ydCB7IGFzeW5jSGFuZGxlciB9IGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBzZWFyY2hEb2N0b3JzIH0gZnJvbSBcIi4uLy4uL3NjcmlwdHMvc3luY0RvY3RvcnNcIjtcclxuaW1wb3J0IHsgQnVpbGRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5cclxuXHJcbmNvbnN0IGVzQ2xpZW50ID0gbmV3IENsaWVudCh7XHJcbiAgbm9kZTogcHJvY2Vzcy5lbnYuRUxBU1RJQ1NFQVJDSF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTIwMCcsXHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVNFUk5BTUUgfHwgJ2VsYXN0aWMnLFxyXG4gICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfUEFTU1dPUkQgfHwgJ0FrZ2xRYypNVUVWTG5DWHdaK2V1JyxcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbnJvdXRlci5nZXQoXHJcbiAgXCIvZG9jdG9ycy9zZWFyY2hcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcTogYW55LCByZXM6IGFueSkgPT4ge1xyXG4gICAgY29uc3QgeyBxdWVyeSB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGlmICghcXVlcnkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJRdWVyeSBpcyByZXF1aXJlZFwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRvY3RvcnMgPSBhd2FpdCBzZWFyY2hEb2N0b3JzKHF1ZXJ5KTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkb2N0b3JzKTtcclxuICAgIHJlcy5zdGF0dShidWlsZFJlc3BvbnNlLmNvZGUpLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLGFBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLGNBQUEsR0FBQUosT0FBQTtBQUdBLE1BQU1LLFFBQVEsR0FBRyxJQUFJTixlQUFBLENBQUFPLE1BQU0sQ0FBQztFQUMxQkMsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsaUJBQWlCLElBQUksdUJBQXVCO0VBQzlEQyxJQUFJLEVBQUU7SUFDSkMsUUFBUSxFQUFFSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksc0JBQXNCLElBQUksU0FBUztJQUN6REMsUUFBUSxFQUFFTixPQUFPLENBQUNDLEdBQUcsQ0FBQ00sc0JBQXNCLElBQUk7O0NBRW5ELENBQUM7QUFHRmIsUUFBQSxDQUFBYyxNQUFNLENBQUNDLEdBQUcsQ0FDUixpQkFBaUIsRUFDakIsSUFBQWhCLGVBQUEsQ0FBQWlCLFlBQVksRUFBQyxDQUFPQyxHQUFRLEVBQUVDLEdBQVEsS0FBSUMsU0FBQTtFQUN4QyxNQUFNO0lBQUVDO0VBQUssQ0FBRSxHQUFHSCxHQUFHLENBQUNHLEtBQUs7RUFFM0IsSUFBSSxDQUFDQSxLQUFLLEVBQUU7SUFDVixPQUFPRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFtQixDQUFFLENBQUM7RUFDL0Q7RUFFQSxNQUFNQyxPQUFPLEdBQUcsTUFBTSxJQUFBdkIsYUFBQSxDQUFBd0IsYUFBYSxFQUFDTCxLQUFLLENBQUM7RUFDMUMsTUFBTU0sYUFBYSxHQUFHeEIsY0FBQSxDQUFBeUIsYUFBYSxDQUFDWixHQUFHLENBQUNTLE9BQU8sQ0FBQztFQUNoRE4sR0FBRyxDQUFDVSxLQUFLLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNQLElBQUksQ0FBQ0ksYUFBYSxDQUFDO0FBQ25ELENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["elasticsearch_1","require","async_handler_1","public_1","syncDoctors_1","app_response_1","esClient","Client","node","process","env","ELASTICSEARCH_URL","auth","username","ELASTICSEARCH_USERNAME","password","ELASTICSEARCH_PASSWORD","router","get","asyncHandler","req","res","__awaiter","query","status","json","message","doctors","searchDoctors","buildResponse","BuildResponse","statu","code"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\elastic-search\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/elastic-search/controlleer.ts"],"sourcesContent":["import { Client } from \"@elastic/elasticsearch\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { searchDoctors } from \"../../scripts/syncDoctors\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n\r\nconst esClient = new Client({\r\n  node: process.env.ELASTICSEARCH_URL || 'http://localhost:9200',\r\n  auth: {\r\n    username: process.env.ELASTICSEARCH_USERNAME || 'elastic',\r\n    password: process.env.ELASTICSEARCH_PASSWORD || 'AkglQc*MUEVLnCXwZ+eu',\r\n  }\r\n});\r\n\r\n\r\nrouter.get(\r\n  \"/doctors/search\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const { query } = req.query;\r\n\r\n    if (!query) {\r\n      return res.status(400).json({ message: \"Query is required\" });\r\n    }\r\n\r\n    const doctors = await searchDoctors(query);\r\n    const buildResponse = BuildResponse.get(doctors);\r\n    res.statu(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,eAAA,GAAAD,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AACA,MAAAG,aAAA,GAAAH,OAAA;AACA,MAAAI,cAAA,GAAAJ,OAAA;AAGA,MAAMK,QAAQ,GAAG,IAAIN,eAAA,CAAAO,MAAM,CAAC;EAC1BC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EAC9DC,IAAI,EAAE;IACJC,QAAQ,EAAEJ,OAAO,CAACC,GAAG,CAACI,sBAAsB,IAAI,SAAS;IACzDC,QAAQ,EAAEN,OAAO,CAACC,GAAG,CAACM,sBAAsB,IAAI;;CAEnD,CAAC;AAGFb,QAAA,CAAAc,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAhB,eAAA,CAAAiB,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAM;IAAEC;EAAK,CAAE,GAAGH,GAAG,CAACG,KAAK;EAE3B,IAAI,CAACA,KAAK,EAAE;IACV,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAmB,CAAE,CAAC;EAC/D;EAEA,MAAMC,OAAO,GAAG,MAAM,IAAAvB,aAAA,CAAAwB,aAAa,EAACL,KAAK,CAAC;EAC1C,MAAMM,aAAa,GAAGxB,cAAA,CAAAyB,aAAa,CAACZ,GAAG,CAACS,OAAO,CAAC;EAChDN,GAAG,CAACU,KAAK,CAACF,aAAa,CAACG,IAAI,CAAC,CAACP,IAAI,CAACI,aAAa,CAAC;AACnD,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1742127691047},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\syncDoctors.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syncDoctorsToElasticsearch = syncDoctorsToElasticsearch;\nexports.searchDoctors = searchDoctors;\nexports.removeDeleteDoctorsFromElasticSeach = removeDeleteDoctorsFromElasticSeach;\nconst elasticsearch_1 = require(\"@elastic/elasticsearch\");\nconst mysql_1 = require(\"../bin/mysql\");\nconst db_1 = require(\"../controller/doctors/db\");\nconst esClient = new elasticsearch_1.Client({\n  node: process.env.ELASTICSEARCH_URL,\n  auth: {\n    username: process.env.ELASTICSEARCH_USERNAME || \"elastic\",\n    password: process.env.ELASTICSEARCH_PASSWORD || \"@Ali0011914505\"\n  }\n});\nfunction syncDoctorsToElasticsearch() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const doctors = yield (0, db_1.getDoctorsFromElastic)({\n        name: \"John Doe\",\n        city_id: \"1\",\n        service_id: \"123\",\n        specialty_id: \"456\",\n        insurance_id: \"789\",\n        minRating: 3,\n        maxRating: 5,\n        isPopular: true\n      });\n      console.log(\"Doctors Found:\", doctors);\n      const rows = yield (0, mysql_1.query)(`\n      SELECT \n        d.id, d.first_name, d.last_name, d.profile_img, d.email, d.phone, \n        CONCAT(d.first_name, ' ', d.last_name) AS name,\n        d.specialty_id, d.insurance_id, d.click_count, d.medical_code,\n        sp.name AS specialty_name,\n        JSON_ARRAYAGG(ss.id) AS service_ids,\n        JSON_ARRAYAGG(ci.id) AS cities_ids,\n        i.name AS insurance_name,  \n        COUNT(r.id) AS total_reviews,\n        COALESCE(AVG(r.rating), 0) AS average_rating,\n        COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\n        COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\n        COALESCE(AVG(r.skill), 0) AS avg_skill,\n        COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\n        COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\n        d.updated_at,\n        CASE \n          WHEN EXISTS (SELECT 1 FROM ${mysql_1.coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \n          THEN 1 ELSE 0\n        END AS isLiked,\n\n        COALESCE(ROUND((SUM(CASE WHEN r.recommendations = 1 THEN 1 ELSE 0 END) / COUNT(r.id)) * 100, 2), 0) \n        AS user_suggestion_percentage,\n\n        -- Properly formatted JSON array of addresses\n        JSON_ARRAYAGG(\n          JSON_OBJECT(\n            'city_id', ci.id,\n            'country', ld.country,\n            'latitude', ld.latitude,\n            'longitude', ld.longitude,\n            'address_line1', ld.address_line1,\n            'address_line2', ld.address_line2,\n            'zipcode', ld.zipcode,\n            'city', ci.name,\n            'state', ci.state\n          )\n        ) AS addresses,\n         MAX(ci.id) AS city_id \n\n      FROM \n        ${mysql_1.coreSchema}.doctors d\n      LEFT JOIN ${mysql_1.coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\n      LEFT JOIN ${mysql_1.coreSchema}.specialties sp ON d.specialty_id = sp.id\n      LEFT JOIN ${mysql_1.coreSchema}.services ss ON sp.id = ss.specialty_id\n      LEFT JOIN ${mysql_1.coreSchema}.doctor_reviews r ON d.id = r.doctor_id\n      LEFT JOIN ${mysql_1.coreSchema}.insurances i ON d.insurance_id = i.id\n      LEFT JOIN ${mysql_1.coreSchema}.cities ci ON ld.city_id = ci.id\n      LEFT JOIN ${mysql_1.coreSchema}.doctor_likes dk ON d.id = dk.doctor_id\n      WHERE d.updated_at >= NOW() - INTERVAL 1 DAY\n\n      GROUP BY d.id\n    `);\n      if (rows.length === 0) {\n        console.log(\" No doctors found in MySQL\");\n        return;\n      }\n      const body = rows.flatMap(doc => [{\n        index: {\n          _id: doc.id\n        }\n      }, {\n        id: doc.id,\n        name: doc.name,\n        profile_img: doc.profile_img,\n        email: doc.email,\n        phone: doc.phone,\n        specialty_id: doc.specialty_id,\n        insurance_id: doc.insurance_id,\n        specialty_name: doc.specialty_name,\n        insurance_name: doc.insurance_name,\n        click_count: doc.click_count,\n        medical_code: doc.medical_code,\n        average_rating: doc.average_rating,\n        total_reviews: doc.total_reviews,\n        avg_professional_demeanor: doc.avg_professional_demeanor,\n        avg_sufficient_time: doc.avg_sufficient_time,\n        avg_skill: doc.avg_skill,\n        avg_staff_behavior: doc.avg_staff_behavior,\n        avg_clinic_condition: doc.avg_clinic_condition,\n        isLiked: doc.isLiked,\n        user_suggestion_percentage: doc.user_suggestion_percentage,\n        service_ids: doc.service_id && typeof doc.service_ids === \"string\" ? JSON.parse(doc.service_ids) : Array.isArray(doc.service_ids) ? doc.service_ids : [],\n        cities_ids: doc.city_id && typeof doc.cities_ids === \"string\" ? JSON.parse(doc.cities_ids) : Array.isArray(doc.cities_ids) ? doc.cities_ids : [],\n        addresses: doc.addresses && typeof doc.addresses === \"string\" ? JSON.parse(doc.addresses) : Array.isArray(doc.addresses) ? doc.addresses : []\n      }]);\n      const chunkSize = 1000;\n      for (let i = 0; i < body.length; i += chunkSize) {\n        const chunk = body.slice(i, i + chunkSize);\n        const response = yield esClient.bulk({\n          index: \"doctors\",\n          body: chunk\n        });\n        if (response.errors) {\n          const erroredDocuments = response.items.filter(item => item.index && item.index.error);\n          console.error(` ${erroredDocuments.length} errors occurred in bulk insert`, erroredDocuments);\n        } else {\n          console.log(\" Doctors synced successfully\");\n        }\n      }\n      // const response = await esClient.bulk({ index: \"doctors\", body });\n      yield esClient.indices.refresh({\n        index: \"doctors\"\n      });\n    } catch (error) {\n      console.error(\" Sync failed:\", error);\n    }\n  });\n}\nfunction searchDoctors(query) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const response = yield esClient.search({\n        index: \"doctors\",\n        size: 20,\n        query: {\n          bool: {\n            should: [{\n              multi_match: {\n                query,\n                fields: [\"name\", \"specialty_name\", \"insurance_name\", \"city\"]\n              }\n            }, {\n              match_phrase_prefix: {\n                name: query\n              }\n            }, {\n              match_phrase_prefix: {\n                specialty_name: query\n              }\n            }, {\n              match_phrase_prefix: {\n                insurance_name: query\n              }\n            }, {\n              match_phrase_prefix: {\n                city: query\n              }\n            }],\n            minimum_should_match: 1\n          }\n        },\n        sort: [{\n          average_rating: \"desc\"\n        }]\n      });\n      return response.hits.hits.map(hit => hit._source);\n    } catch (error) {\n      console.error(\" Error searching doctors:\", error);\n      return [];\n    }\n  });\n}\nfunction removeDeleteDoctorsFromElasticSeach() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const deletedDoctors = yield (0, mysql_1.query)(`SELECT id FROM ${mysql_1.coreSchema}.doctors WHERE deleted_at >= NOW() - INTERVAL 1 DAY;`);\n      if (deletedDoctors.length === 0) {\n        console.log(\" No deleted doctors to remove\");\n        return;\n      }\n      const body = deletedDoctors.flatMap(doc => [{\n        delete: {\n          _index: \"doctors\",\n          _id: doc.id\n        }\n      }]);\n      const response = yield esClient.bulk({\n        body\n      });\n      if (response.errors) {\n        console.error(\" Errors occurred in bulk delete:\", response.items);\n      } else {\n        console.log(\" Deleted doctors removed from Elasticsearch\");\n      }\n    } catch (error) {\n      console.error(\" Deletion sync failed:\", error);\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwic3luY0RvY3RvcnNUb0VsYXN0aWNzZWFyY2giLCJzZWFyY2hEb2N0b3JzIiwicmVtb3ZlRGVsZXRlRG9jdG9yc0Zyb21FbGFzdGljU2VhY2giLCJlbGFzdGljc2VhcmNoXzEiLCJyZXF1aXJlIiwibXlzcWxfMSIsImRiXzEiLCJlc0NsaWVudCIsIkNsaWVudCIsIm5vZGUiLCJwcm9jZXNzIiwiZW52IiwiRUxBU1RJQ1NFQVJDSF9VUkwiLCJhdXRoIiwidXNlcm5hbWUiLCJFTEFTVElDU0VBUkNIX1VTRVJOQU1FIiwicGFzc3dvcmQiLCJFTEFTVElDU0VBUkNIX1BBU1NXT1JEIiwiZG9jdG9ycyIsImdldERvY3RvcnNGcm9tRWxhc3RpYyIsIm5hbWUiLCJjaXR5X2lkIiwic2VydmljZV9pZCIsInNwZWNpYWx0eV9pZCIsImluc3VyYW5jZV9pZCIsIm1pblJhdGluZyIsIm1heFJhdGluZyIsImlzUG9wdWxhciIsImNvbnNvbGUiLCJsb2ciLCJyb3dzIiwicXVlcnkiLCJjb3JlU2NoZW1hIiwibGVuZ3RoIiwiYm9keSIsImZsYXRNYXAiLCJkb2MiLCJpbmRleCIsIl9pZCIsImlkIiwicHJvZmlsZV9pbWciLCJlbWFpbCIsInBob25lIiwic3BlY2lhbHR5X25hbWUiLCJpbnN1cmFuY2VfbmFtZSIsImNsaWNrX2NvdW50IiwibWVkaWNhbF9jb2RlIiwiYXZlcmFnZV9yYXRpbmciLCJ0b3RhbF9yZXZpZXdzIiwiYXZnX3Byb2Zlc3Npb25hbF9kZW1lYW5vciIsImF2Z19zdWZmaWNpZW50X3RpbWUiLCJhdmdfc2tpbGwiLCJhdmdfc3RhZmZfYmVoYXZpb3IiLCJhdmdfY2xpbmljX2NvbmRpdGlvbiIsImlzTGlrZWQiLCJ1c2VyX3N1Z2dlc3Rpb25fcGVyY2VudGFnZSIsInNlcnZpY2VfaWRzIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwiY2l0aWVzX2lkcyIsImFkZHJlc3NlcyIsImNodW5rU2l6ZSIsImkiLCJjaHVuayIsInNsaWNlIiwicmVzcG9uc2UiLCJidWxrIiwiZXJyb3JzIiwiZXJyb3JlZERvY3VtZW50cyIsIml0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsImVycm9yIiwiaW5kaWNlcyIsInJlZnJlc2giLCJzZWFyY2giLCJzaXplIiwiYm9vbCIsInNob3VsZCIsIm11bHRpX21hdGNoIiwiZmllbGRzIiwibWF0Y2hfcGhyYXNlX3ByZWZpeCIsImNpdHkiLCJtaW5pbXVtX3Nob3VsZF9tYXRjaCIsInNvcnQiLCJoaXRzIiwibWFwIiwiaGl0IiwiX3NvdXJjZSIsImRlbGV0ZWREb2N0b3JzIiwiZGVsZXRlIiwiX2luZGV4Il0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXHNjcmlwdHNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9zY3JpcHRzL3N5bmNEb2N0b3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJAZWxhc3RpYy9lbGFzdGljc2VhcmNoXCI7XHJcbmltcG9ydCB7IGNvcmVTY2hlbWEsIHF1ZXJ5LCBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIi4uL2Jpbi9teXNxbFwiO1xyXG5pbXBvcnQgeyBnZXREb2N0b3JzRnJvbUVsYXN0aWMgfSBmcm9tIFwiLi4vY29udHJvbGxlci9kb2N0b3JzL2RiXCI7XHJcblxyXG5jb25zdCBlc0NsaWVudCA9IG5ldyBDbGllbnQoe1xyXG4gIG5vZGU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVJMLFxyXG4gIGF1dGg6IHtcclxuICAgIHVzZXJuYW1lOiBwcm9jZXNzLmVudi5FTEFTVElDU0VBUkNIX1VTRVJOQU1FIHx8IFwiZWxhc3RpY1wiLFxyXG4gICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfUEFTU1dPUkQgfHwgXCJAQWxpMDAxMTkxNDUwNVwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN5bmNEb2N0b3JzVG9FbGFzdGljc2VhcmNoKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkb2N0b3JzID0gYXdhaXQgZ2V0RG9jdG9yc0Zyb21FbGFzdGljKHtcclxuICAgICAgbmFtZTogXCJKb2huIERvZVwiLFxyXG4gICAgICBjaXR5X2lkOiBcIjFcIixcclxuICAgICAgc2VydmljZV9pZDogXCIxMjNcIixcclxuICAgICAgc3BlY2lhbHR5X2lkOiBcIjQ1NlwiLFxyXG4gICAgICBpbnN1cmFuY2VfaWQ6IFwiNzg5XCIsXHJcbiAgICAgIG1pblJhdGluZzogMyxcclxuICAgICAgbWF4UmF0aW5nOiA1LFxyXG4gICAgICBpc1BvcHVsYXI6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coXCJEb2N0b3JzIEZvdW5kOlwiLCBkb2N0b3JzKTtcclxuICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGQuaWQsIGQuZmlyc3RfbmFtZSwgZC5sYXN0X25hbWUsIGQucHJvZmlsZV9pbWcsIGQuZW1haWwsIGQucGhvbmUsIFxyXG4gICAgICAgIENPTkNBVChkLmZpcnN0X25hbWUsICcgJywgZC5sYXN0X25hbWUpIEFTIG5hbWUsXHJcbiAgICAgICAgZC5zcGVjaWFsdHlfaWQsIGQuaW5zdXJhbmNlX2lkLCBkLmNsaWNrX2NvdW50LCBkLm1lZGljYWxfY29kZSxcclxuICAgICAgICBzcC5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxyXG4gICAgICAgIEpTT05fQVJSQVlBR0coc3MuaWQpIEFTIHNlcnZpY2VfaWRzLFxyXG4gICAgICAgIEpTT05fQVJSQVlBR0coY2kuaWQpIEFTIGNpdGllc19pZHMsXHJcbiAgICAgICAgaS5uYW1lIEFTIGluc3VyYW5jZV9uYW1lLCAgXHJcbiAgICAgICAgQ09VTlQoci5pZCkgQVMgdG90YWxfcmV2aWV3cyxcclxuICAgICAgICBDT0FMRVNDRShBVkcoci5yYXRpbmcpLCAwKSBBUyBhdmVyYWdlX3JhdGluZyxcclxuICAgICAgICBDT0FMRVNDRShBVkcoci5wcm9mZXNzaW9uYWxfZGVtZWFub3IpLCAwKSBBUyBhdmdfcHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxyXG4gICAgICAgIENPQUxFU0NFKEFWRyhyLnN1ZmZpY2llbnRfdGltZSksIDApIEFTIGF2Z19zdWZmaWNpZW50X3RpbWUsXHJcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIuc2tpbGwpLCAwKSBBUyBhdmdfc2tpbGwsXHJcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIuc3RhZmZfYmVoYXZpb3IpLCAwKSBBUyBhdmdfc3RhZmZfYmVoYXZpb3IsXHJcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIuY2xpbmljX2NvbmRpdGlvbiksIDApIEFTIGF2Z19jbGluaWNfY29uZGl0aW9uLFxyXG4gICAgICAgIGQudXBkYXRlZF9hdCxcclxuICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgV0hFTiBFWElTVFMgKFNFTEVDVCAxIEZST00gJHtjb3JlU2NoZW1hfS5kb2N0b3JfbGlrZXMgZGwgV0hFUkUgZGwuZG9jdG9yX2lkID0gZC5pZCkgXHJcbiAgICAgICAgICBUSEVOIDEgRUxTRSAwXHJcbiAgICAgICAgRU5EIEFTIGlzTGlrZWQsXHJcblxyXG4gICAgICAgIENPQUxFU0NFKFJPVU5EKChTVU0oQ0FTRSBXSEVOIHIucmVjb21tZW5kYXRpb25zID0gMSBUSEVOIDEgRUxTRSAwIEVORCkgLyBDT1VOVChyLmlkKSkgKiAxMDAsIDIpLCAwKSBcclxuICAgICAgICBBUyB1c2VyX3N1Z2dlc3Rpb25fcGVyY2VudGFnZSxcclxuXHJcbiAgICAgICAgLS0gUHJvcGVybHkgZm9ybWF0dGVkIEpTT04gYXJyYXkgb2YgYWRkcmVzc2VzXHJcbiAgICAgICAgSlNPTl9BUlJBWUFHRyhcclxuICAgICAgICAgIEpTT05fT0JKRUNUKFxyXG4gICAgICAgICAgICAnY2l0eV9pZCcsIGNpLmlkLFxyXG4gICAgICAgICAgICAnY291bnRyeScsIGxkLmNvdW50cnksXHJcbiAgICAgICAgICAgICdsYXRpdHVkZScsIGxkLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAnbG9uZ2l0dWRlJywgbGQubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAnYWRkcmVzc19saW5lMScsIGxkLmFkZHJlc3NfbGluZTEsXHJcbiAgICAgICAgICAgICdhZGRyZXNzX2xpbmUyJywgbGQuYWRkcmVzc19saW5lMixcclxuICAgICAgICAgICAgJ3ppcGNvZGUnLCBsZC56aXBjb2RlLFxyXG4gICAgICAgICAgICAnY2l0eScsIGNpLm5hbWUsXHJcbiAgICAgICAgICAgICdzdGF0ZScsIGNpLnN0YXRlXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSBBUyBhZGRyZXNzZXMsXHJcbiAgICAgICAgIE1BWChjaS5pZCkgQVMgY2l0eV9pZCBcclxuXHJcbiAgICAgIEZST00gXHJcbiAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uZG9jdG9yX2xvY2F0aW9ucyBsZCBPTiBkLmlkID0gbGQuZG9jdG9yX2lkXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LnNwZWNpYWx0aWVzIHNwIE9OIGQuc3BlY2lhbHR5X2lkID0gc3AuaWRcclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uc2VydmljZXMgc3MgT04gc3AuaWQgPSBzcy5zcGVjaWFsdHlfaWRcclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uZG9jdG9yX3Jldmlld3MgciBPTiBkLmlkID0gci5kb2N0b3JfaWRcclxuICAgICAgTEVGVCBKT0lOICR7Y29yZVNjaGVtYX0uaW5zdXJhbmNlcyBpIE9OIGQuaW5zdXJhbmNlX2lkID0gaS5pZFxyXG4gICAgICBMRUZUIEpPSU4gJHtjb3JlU2NoZW1hfS5jaXRpZXMgY2kgT04gbGQuY2l0eV9pZCA9IGNpLmlkXHJcbiAgICAgIExFRlQgSk9JTiAke2NvcmVTY2hlbWF9LmRvY3Rvcl9saWtlcyBkayBPTiBkLmlkID0gZGsuZG9jdG9yX2lkXHJcbiAgICAgIFdIRVJFIGQudXBkYXRlZF9hdCA+PSBOT1coKSAtIElOVEVSVkFMIDEgREFZXHJcblxyXG4gICAgICBHUk9VUCBCWSBkLmlkXHJcbiAgICBgKTtcclxuXHJcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coXCLinYwgTm8gZG9jdG9ycyBmb3VuZCBpbiBNeVNRTFwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvZHkgPSByb3dzLmZsYXRNYXAoKGRvYzogYW55KSA9PiBbXHJcbiAgICAgIHsgaW5kZXg6IHsgX2lkOiBkb2MuaWQgfSB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgICBuYW1lOiBkb2MubmFtZSxcclxuICAgICAgICBwcm9maWxlX2ltZzogZG9jLnByb2ZpbGVfaW1nLFxyXG4gICAgICAgIGVtYWlsOiBkb2MuZW1haWwsXHJcbiAgICAgICAgcGhvbmU6IGRvYy5waG9uZSxcclxuICAgICAgICBzcGVjaWFsdHlfaWQ6IGRvYy5zcGVjaWFsdHlfaWQsXHJcbiAgICAgICAgaW5zdXJhbmNlX2lkOiBkb2MuaW5zdXJhbmNlX2lkLFxyXG4gICAgICAgIHNwZWNpYWx0eV9uYW1lOiBkb2Muc3BlY2lhbHR5X25hbWUsXHJcbiAgICAgICAgaW5zdXJhbmNlX25hbWU6IGRvYy5pbnN1cmFuY2VfbmFtZSxcclxuICAgICAgICBjbGlja19jb3VudDogZG9jLmNsaWNrX2NvdW50LFxyXG4gICAgICAgIG1lZGljYWxfY29kZTogZG9jLm1lZGljYWxfY29kZSxcclxuICAgICAgICBhdmVyYWdlX3JhdGluZzogZG9jLmF2ZXJhZ2VfcmF0aW5nLFxyXG4gICAgICAgIHRvdGFsX3Jldmlld3M6IGRvYy50b3RhbF9yZXZpZXdzLFxyXG4gICAgICAgIGF2Z19wcm9mZXNzaW9uYWxfZGVtZWFub3I6IGRvYy5hdmdfcHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxyXG4gICAgICAgIGF2Z19zdWZmaWNpZW50X3RpbWU6IGRvYy5hdmdfc3VmZmljaWVudF90aW1lLFxyXG4gICAgICAgIGF2Z19za2lsbDogZG9jLmF2Z19za2lsbCxcclxuICAgICAgICBhdmdfc3RhZmZfYmVoYXZpb3I6IGRvYy5hdmdfc3RhZmZfYmVoYXZpb3IsXHJcbiAgICAgICAgYXZnX2NsaW5pY19jb25kaXRpb246IGRvYy5hdmdfY2xpbmljX2NvbmRpdGlvbixcclxuICAgICAgICBpc0xpa2VkOiBkb2MuaXNMaWtlZCxcclxuICAgICAgICB1c2VyX3N1Z2dlc3Rpb25fcGVyY2VudGFnZTogZG9jLnVzZXJfc3VnZ2VzdGlvbl9wZXJjZW50YWdlLFxyXG4gICAgICAgIHNlcnZpY2VfaWRzOlxyXG4gICAgICAgICAgZG9jLnNlcnZpY2VfaWQgJiYgdHlwZW9mIGRvYy5zZXJ2aWNlX2lkcyA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICA/IEpTT04ucGFyc2UoZG9jLnNlcnZpY2VfaWRzKVxyXG4gICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkoZG9jLnNlcnZpY2VfaWRzKVxyXG4gICAgICAgICAgICA/IGRvYy5zZXJ2aWNlX2lkc1xyXG4gICAgICAgICAgICA6IFtdLFxyXG4gICAgICAgIGNpdGllc19pZHM6XHJcbiAgICAgICAgICBkb2MuY2l0eV9pZCAmJiB0eXBlb2YgZG9jLmNpdGllc19pZHMgPT09IFwic3RyaW5nXCJcclxuICAgICAgICAgICAgPyBKU09OLnBhcnNlKGRvYy5jaXRpZXNfaWRzKVxyXG4gICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkoZG9jLmNpdGllc19pZHMpXHJcbiAgICAgICAgICAgID8gZG9jLmNpdGllc19pZHNcclxuICAgICAgICAgICAgOiBbXSxcclxuICAgICAgICBhZGRyZXNzZXM6XHJcbiAgICAgICAgICBkb2MuYWRkcmVzc2VzICYmIHR5cGVvZiBkb2MuYWRkcmVzc2VzID09PSBcInN0cmluZ1wiXHJcbiAgICAgICAgICAgID8gSlNPTi5wYXJzZShkb2MuYWRkcmVzc2VzKVxyXG4gICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkoZG9jLmFkZHJlc3NlcylcclxuICAgICAgICAgICAgPyBkb2MuYWRkcmVzc2VzXHJcbiAgICAgICAgICAgIDogW10sXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBjaHVua1NpemUgPSAxMDAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2R5Lmxlbmd0aDsgaSArPSBjaHVua1NpemUpIHtcclxuICAgICAgY29uc3QgY2h1bmsgPSBib2R5LnNsaWNlKGksIGkgKyBjaHVua1NpemUpO1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVzQ2xpZW50LmJ1bGsoeyBpbmRleDogXCJkb2N0b3JzXCIsIGJvZHk6IGNodW5rIH0pO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yZWREb2N1bWVudHMgPSByZXNwb25zZS5pdGVtcy5maWx0ZXIoXHJcbiAgICAgICAgICAoaXRlbTogYW55KSA9PiBpdGVtLmluZGV4ICYmIGl0ZW0uaW5kZXguZXJyb3JcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICBg4p2MICR7ZXJyb3JlZERvY3VtZW50cy5sZW5ndGh9IGVycm9ycyBvY2N1cnJlZCBpbiBidWxrIGluc2VydGAsXHJcbiAgICAgICAgICBlcnJvcmVkRG9jdW1lbnRzXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBEb2N0b3JzIHN5bmNlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVzQ2xpZW50LmJ1bGsoeyBpbmRleDogXCJkb2N0b3JzXCIsIGJvZHkgfSk7XHJcblxyXG4gICAgYXdhaXQgZXNDbGllbnQuaW5kaWNlcy5yZWZyZXNoKHsgaW5kZXg6IFwiZG9jdG9yc1wiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFN5bmMgZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoRG9jdG9ycyhxdWVyeTogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXNDbGllbnQuc2VhcmNoKHtcclxuICAgICAgaW5kZXg6IFwiZG9jdG9yc1wiLFxyXG4gICAgICBzaXplOiAyMCxcclxuICAgICAgcXVlcnk6IHtcclxuICAgICAgICBib29sOiB7XHJcbiAgICAgICAgICBzaG91bGQ6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG11bHRpX21hdGNoOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgICAgIGZpZWxkczogW1wibmFtZVwiLCBcInNwZWNpYWx0eV9uYW1lXCIsIFwiaW5zdXJhbmNlX25hbWVcIiwgXCJjaXR5XCJdLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHsgbWF0Y2hfcGhyYXNlX3ByZWZpeDogeyBuYW1lOiBxdWVyeSB9IH0sXHJcbiAgICAgICAgICAgIHsgbWF0Y2hfcGhyYXNlX3ByZWZpeDogeyBzcGVjaWFsdHlfbmFtZTogcXVlcnkgfSB9LFxyXG4gICAgICAgICAgICB7IG1hdGNoX3BocmFzZV9wcmVmaXg6IHsgaW5zdXJhbmNlX25hbWU6IHF1ZXJ5IH0gfSxcclxuICAgICAgICAgICAgeyBtYXRjaF9waHJhc2VfcHJlZml4OiB7IGNpdHk6IHF1ZXJ5IH0gfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBtaW5pbXVtX3Nob3VsZF9tYXRjaDogMSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBzb3J0OiBbeyBhdmVyYWdlX3JhdGluZzogXCJkZXNjXCIgfV0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuaGl0cy5oaXRzLm1hcCgoaGl0OiBhbnkpID0+IGhpdC5fc291cmNlKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBzZWFyY2hpbmcgZG9jdG9yczpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZURlbGV0ZURvY3RvcnNGcm9tRWxhc3RpY1NlYWNoKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWxldGVkRG9jdG9ycyA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgaWQgRlJPTSAke2NvcmVTY2hlbWF9LmRvY3RvcnMgV0hFUkUgZGVsZXRlZF9hdCA+PSBOT1coKSAtIElOVEVSVkFMIDEgREFZO2BcclxuICAgICk7XHJcbiAgICBpZiAoZGVsZXRlZERvY3RvcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIE5vIGRlbGV0ZWQgZG9jdG9ycyB0byByZW1vdmVcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGJvZHkgPSBkZWxldGVkRG9jdG9ycy5mbGF0TWFwKChkb2M6IGFueSkgPT4gW1xyXG4gICAgICB7IGRlbGV0ZTogeyBfaW5kZXg6IFwiZG9jdG9yc1wiLCBfaWQ6IGRvYy5pZCB9IH0sXHJcbiAgICBdKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXNDbGllbnQuYnVsayh7IGJvZHkgfSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLmVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9ycyBvY2N1cnJlZCBpbiBidWxrIGRlbGV0ZTpcIiwgcmVzcG9uc2UuaXRlbXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgRGVsZXRlZCBkb2N0b3JzIHJlbW92ZWQgZnJvbSBFbGFzdGljc2VhcmNoXCIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIERlbGV0aW9uIHN5bmMgZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFZQUEsT0FBQSxDQUFBQywwQkFBQSxHQUFBQSwwQkFBQTtBQWdKQUQsT0FBQSxDQUFBRSxhQUFBLEdBQUFBLGFBQUE7QUFnQ0FGLE9BQUEsQ0FBQUcsbUNBQUEsR0FBQUEsbUNBQUE7QUE1TEEsTUFBQUMsZUFBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQ0EsTUFBQUUsSUFBQSxHQUFBRixPQUFBO0FBRUEsTUFBTUcsUUFBUSxHQUFHLElBQUlKLGVBQUEsQ0FBQUssTUFBTSxDQUFDO0VBQzFCQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxpQkFBaUI7RUFDbkNDLElBQUksRUFBRTtJQUNKQyxRQUFRLEVBQUVKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSSxzQkFBc0IsSUFBSSxTQUFTO0lBQ3pEQyxRQUFRLEVBQUVOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTSxzQkFBc0IsSUFBSTs7Q0FFbkQsQ0FBQztBQUVGLFNBQXNCakIsMEJBQTBCQSxDQUFBOztJQUM5QyxJQUFJO01BQ0YsTUFBTWtCLE9BQU8sR0FBRyxNQUFNLElBQUFaLElBQUEsQ0FBQWEscUJBQXFCLEVBQUM7UUFDMUNDLElBQUksRUFBRSxVQUFVO1FBQ2hCQyxPQUFPLEVBQUUsR0FBRztRQUNaQyxVQUFVLEVBQUUsS0FBSztRQUNqQkMsWUFBWSxFQUFFLEtBQUs7UUFDbkJDLFlBQVksRUFBRSxLQUFLO1FBQ25CQyxTQUFT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","map":{"version":3,"names":["exports","syncDoctorsToElasticsearch","searchDoctors","removeDeleteDoctorsFromElasticSeach","elasticsearch_1","require","mysql_1","db_1","esClient","Client","node","process","env","ELASTICSEARCH_URL","auth","username","ELASTICSEARCH_USERNAME","password","ELASTICSEARCH_PASSWORD","doctors","getDoctorsFromElastic","name","city_id","service_id","specialty_id","insurance_id","minRating","maxRating","isPopular","console","log","rows","query","coreSchema","length","body","flatMap","doc","index","_id","id","profile_img","email","phone","specialty_name","insurance_name","click_count","medical_code","average_rating","total_reviews","avg_professional_demeanor","avg_sufficient_time","avg_skill","avg_staff_behavior","avg_clinic_condition","isLiked","user_suggestion_percentage","service_ids","JSON","parse","Array","isArray","cities_ids","addresses","chunkSize","i","chunk","slice","response","bulk","errors","erroredDocuments","items","filter","item","error","indices","refresh","search","size","bool","should","multi_match","fields","match_phrase_prefix","city","minimum_should_match","sort","hits","map","hit","_source","deletedDoctors","delete","_index"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\scripts\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/scripts/syncDoctors.ts"],"sourcesContent":["import { Client } from \"@elastic/elasticsearch\";\r\nimport { coreSchema, query, RowDataPacket } from \"../bin/mysql\";\r\nimport { getDoctorsFromElastic } from \"../controller/doctors/db\";\r\n\r\nconst esClient = new Client({\r\n  node: process.env.ELASTICSEARCH_URL,\r\n  auth: {\r\n    username: process.env.ELASTICSEARCH_USERNAME || \"elastic\",\r\n    password: process.env.ELASTICSEARCH_PASSWORD || \"@Ali0011914505\",\r\n  },\r\n});\r\n\r\nexport async function syncDoctorsToElasticsearch() {\r\n  try {\r\n    const doctors = await getDoctorsFromElastic({\r\n      name: \"John Doe\",\r\n      city_id: \"1\",\r\n      service_id: \"123\",\r\n      specialty_id: \"456\",\r\n      insurance_id: \"789\",\r\n      minRating: 3,\r\n      maxRating: 5,\r\n      isPopular: true,\r\n    });\r\n    \r\n    console.log(\"Doctors Found:\", doctors);\r\n    const rows = await query<RowDataPacket[]>(`\r\n      SELECT \r\n        d.id, d.first_name, d.last_name, d.profile_img, d.email, d.phone, \r\n        CONCAT(d.first_name, ' ', d.last_name) AS name,\r\n        d.specialty_id, d.insurance_id, d.click_count, d.medical_code,\r\n        sp.name AS specialty_name,\r\n        JSON_ARRAYAGG(ss.id) AS service_ids,\r\n        JSON_ARRAYAGG(ci.id) AS cities_ids,\r\n        i.name AS insurance_name,  \r\n        COUNT(r.id) AS total_reviews,\r\n        COALESCE(AVG(r.rating), 0) AS average_rating,\r\n        COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\r\n        COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\r\n        COALESCE(AVG(r.skill), 0) AS avg_skill,\r\n        COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\r\n        COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\r\n        d.updated_at,\r\n        CASE \r\n          WHEN EXISTS (SELECT 1 FROM ${coreSchema}.doctor_likes dl WHERE dl.doctor_id = d.id) \r\n          THEN 1 ELSE 0\r\n        END AS isLiked,\r\n\r\n        COALESCE(ROUND((SUM(CASE WHEN r.recommendations = 1 THEN 1 ELSE 0 END) / COUNT(r.id)) * 100, 2), 0) \r\n        AS user_suggestion_percentage,\r\n\r\n        -- Properly formatted JSON array of addresses\r\n        JSON_ARRAYAGG(\r\n          JSON_OBJECT(\r\n            'city_id', ci.id,\r\n            'country', ld.country,\r\n            'latitude', ld.latitude,\r\n            'longitude', ld.longitude,\r\n            'address_line1', ld.address_line1,\r\n            'address_line2', ld.address_line2,\r\n            'zipcode', ld.zipcode,\r\n            'city', ci.name,\r\n            'state', ci.state\r\n          )\r\n        ) AS addresses,\r\n         MAX(ci.id) AS city_id \r\n\r\n      FROM \r\n        ${coreSchema}.doctors d\r\n      LEFT JOIN ${coreSchema}.doctor_locations ld ON d.id = ld.doctor_id\r\n      LEFT JOIN ${coreSchema}.specialties sp ON d.specialty_id = sp.id\r\n      LEFT JOIN ${coreSchema}.services ss ON sp.id = ss.specialty_id\r\n      LEFT JOIN ${coreSchema}.doctor_reviews r ON d.id = r.doctor_id\r\n      LEFT JOIN ${coreSchema}.insurances i ON d.insurance_id = i.id\r\n      LEFT JOIN ${coreSchema}.cities ci ON ld.city_id = ci.id\r\n      LEFT JOIN ${coreSchema}.doctor_likes dk ON d.id = dk.doctor_id\r\n      WHERE d.updated_at >= NOW() - INTERVAL 1 DAY\r\n\r\n      GROUP BY d.id\r\n    `);\r\n\r\n    if (rows.length === 0) {\r\n      console.log(\" No doctors found in MySQL\");\r\n      return;\r\n    }\r\n\r\n    const body = rows.flatMap((doc: any) => [\r\n      { index: { _id: doc.id } },\r\n      {\r\n        id: doc.id,\r\n        name: doc.name,\r\n        profile_img: doc.profile_img,\r\n        email: doc.email,\r\n        phone: doc.phone,\r\n        specialty_id: doc.specialty_id,\r\n        insurance_id: doc.insurance_id,\r\n        specialty_name: doc.specialty_name,\r\n        insurance_name: doc.insurance_name,\r\n        click_count: doc.click_count,\r\n        medical_code: doc.medical_code,\r\n        average_rating: doc.average_rating,\r\n        total_reviews: doc.total_reviews,\r\n        avg_professional_demeanor: doc.avg_professional_demeanor,\r\n        avg_sufficient_time: doc.avg_sufficient_time,\r\n        avg_skill: doc.avg_skill,\r\n        avg_staff_behavior: doc.avg_staff_behavior,\r\n        avg_clinic_condition: doc.avg_clinic_condition,\r\n        isLiked: doc.isLiked,\r\n        user_suggestion_percentage: doc.user_suggestion_percentage,\r\n        service_ids:\r\n          doc.service_id && typeof doc.service_ids === \"string\"\r\n            ? JSON.parse(doc.service_ids)\r\n            : Array.isArray(doc.service_ids)\r\n            ? doc.service_ids\r\n            : [],\r\n        cities_ids:\r\n          doc.city_id && typeof doc.cities_ids === \"string\"\r\n            ? JSON.parse(doc.cities_ids)\r\n            : Array.isArray(doc.cities_ids)\r\n            ? doc.cities_ids\r\n            : [],\r\n        addresses:\r\n          doc.addresses && typeof doc.addresses === \"string\"\r\n            ? JSON.parse(doc.addresses)\r\n            : Array.isArray(doc.addresses)\r\n            ? doc.addresses\r\n            : [],\r\n      },\r\n    ]);\r\n\r\n    const chunkSize = 1000;\r\n    for (let i = 0; i < body.length; i += chunkSize) {\r\n      const chunk = body.slice(i, i + chunkSize);\r\n      const response = await esClient.bulk({ index: \"doctors\", body: chunk });\r\n\r\n      if (response.errors) {\r\n        const erroredDocuments = response.items.filter(\r\n          (item: any) => item.index && item.index.error\r\n        );\r\n        console.error(\r\n          ` ${erroredDocuments.length} errors occurred in bulk insert`,\r\n          erroredDocuments\r\n        );\r\n      } else {\r\n        console.log(\" Doctors synced successfully\");\r\n      }\r\n    }\r\n\r\n    // const response = await esClient.bulk({ index: \"doctors\", body });\r\n\r\n    await esClient.indices.refresh({ index: \"doctors\" });\r\n  } catch (error) {\r\n    console.error(\" Sync failed:\", error);\r\n  }\r\n}\r\n\r\nexport async function searchDoctors(query: string) {\r\n  try {\r\n    const response = await esClient.search({\r\n      index: \"doctors\",\r\n      size: 20,\r\n      query: {\r\n        bool: {\r\n          should: [\r\n            {\r\n              multi_match: {\r\n                query,\r\n                fields: [\"name\", \"specialty_name\", \"insurance_name\", \"city\"],\r\n              },\r\n            },\r\n            { match_phrase_prefix: { name: query } },\r\n            { match_phrase_prefix: { specialty_name: query } },\r\n            { match_phrase_prefix: { insurance_name: query } },\r\n            { match_phrase_prefix: { city: query } },\r\n          ],\r\n          minimum_should_match: 1,\r\n        },\r\n      },\r\n      sort: [{ average_rating: \"desc\" }],\r\n    });\r\n\r\n    return response.hits.hits.map((hit: any) => hit._source);\r\n  } catch (error) {\r\n    console.error(\" Error searching doctors:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function removeDeleteDoctorsFromElasticSeach() {\r\n  try {\r\n    const deletedDoctors = await query<RowDataPacket[]>(\r\n      `SELECT id FROM ${coreSchema}.doctors WHERE deleted_at >= NOW() - INTERVAL 1 DAY;`\r\n    );\r\n    if (deletedDoctors.length === 0) {\r\n      console.log(\" No deleted doctors to remove\");\r\n      return;\r\n    }\r\n    const body = deletedDoctors.flatMap((doc: any) => [\r\n      { delete: { _index: \"doctors\", _id: doc.id } },\r\n    ]);\r\n    const response = await esClient.bulk({ body });\r\n\r\n    if (response.errors) {\r\n      console.error(\" Errors occurred in bulk delete:\", response.items);\r\n    } else {\r\n      console.log(\" Deleted doctors removed from Elasticsearch\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\" Deletion sync failed:\", error);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742219119126},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\elastic-search\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\elastic-search\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = require(\"../../helper/async-handler\");\nconst public_1 = require(\"../../routes/public\");\nconst syncDoctors_1 = require(\"../../scripts/syncDoctors\");\nconst app_response_1 = require(\"../../modules/response/app_response\");\npublic_1.router.get(\"/doctors/search\", (0, async_handler_1.asyncHandler)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    query\n  } = req.query;\n  if (!query) {\n    return res.status(400).json({\n      message: \"Query is required\"\n    });\n  }\n  const doctors = yield (0, syncDoctors_1.searchDoctors)(query);\n  const buildResponse = app_response_1.BuildResponse.get(doctors);\n  res.statu(buildResponse.code).json(buildResponse);\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzeW5jRG9jdG9yc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJyb3V0ZXIiLCJnZXQiLCJhc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJfX2F3YWl0ZXIiLCJxdWVyeSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZG9jdG9ycyIsInNlYXJjaERvY3RvcnMiLCJidWlsZFJlc3BvbnNlIiwiQnVpbGRSZXNwb25zZSIsInN0YXR1IiwiY29kZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxlbGFzdGljLXNlYXJjaFxcIiwic291cmNlcyI6WyJEOi9BbGkvUHJvamVjdHMvY2xpbmljYWxsX2FsaS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvZWxhc3RpYy1zZWFyY2gvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiQGVsYXN0aWMvZWxhc3RpY3NlYXJjaFwiO1xyXG5pbXBvcnQgeyBhc3luY0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgc2VhcmNoRG9jdG9ycyB9IGZyb20gXCIuLi8uLi9zY3JpcHRzL3N5bmNEb2N0b3JzXCI7XHJcbmltcG9ydCB7IEJ1aWxkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG5yb3V0ZXIuZ2V0KFxyXG4gIFwiL2RvY3RvcnMvc2VhcmNoXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IGFueSwgcmVzOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IHsgcXVlcnkgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBpZiAoIXF1ZXJ5KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiUXVlcnkgaXMgcmVxdWlyZWRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkb2N0b3JzID0gYXdhaXQgc2VhcmNoRG9jdG9ycyhxdWVyeSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZG9jdG9ycyk7XHJcbiAgICByZXMuc3RhdHUoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxlQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxNQUFBRSxhQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFNQUMsUUFBQSxDQUFBRyxNQUFNLENBQUNDLEdBQUcsQ0FDUixpQkFBaUIsRUFDakIsSUFBQU4sZUFBQSxDQUFBTyxZQUFZLEVBQUMsQ0FBT0MsR0FBUSxFQUFFQyxHQUFRLEtBQUlDLFNBQUE7RUFDeEMsTUFBTTtJQUFFQztFQUFLLENBQUUsR0FBR0gsR0FBRyxDQUFDRyxLQUFLO0VBRTNCLElBQUksQ0FBQ0EsS0FBSyxFQUFFO0lBQ1YsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBbUIsQ0FBRSxDQUFDO0VBQy9EO0VBRUEsTUFBTUMsT0FBTyxHQUFHLE1BQU0sSUFBQVosYUFBQSxDQUFBYSxhQUFhLEVBQUNMLEtBQUssQ0FBQztFQUMxQyxNQUFNTSxhQUFhLEdBQUdiLGNBQUEsQ0FBQWMsYUFBYSxDQUFDWixHQUFHLENBQUNTLE9BQU8sQ0FBQztFQUNoRE4sR0FBRyxDQUFDVSxLQUFLLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNQLElBQUksQ0FBQ0ksYUFBYSxDQUFDO0FBQ25ELENBQUMsRUFBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","require","public_1","syncDoctors_1","app_response_1","router","get","asyncHandler","req","res","__awaiter","query","status","json","message","doctors","searchDoctors","buildResponse","BuildResponse","statu","code"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\elastic-search\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/controller/elastic-search/controller.ts"],"sourcesContent":["import { Client } from \"@elastic/elasticsearch\";\r\nimport { asyncHandler } from \"../../helper/async-handler\";\r\nimport { router } from \"../../routes/public\";\r\nimport { searchDoctors } from \"../../scripts/syncDoctors\";\r\nimport { BuildResponse } from \"../../modules/response/app_response\";\r\n\r\n\r\n\r\n\r\n\r\nrouter.get(\r\n  \"/doctors/search\",\r\n  asyncHandler(async (req: any, res: any) => {\r\n    const { query } = req.query;\r\n\r\n    if (!query) {\r\n      return res.status(400).json({ message: \"Query is required\" });\r\n    }\r\n\r\n    const doctors = await searchDoctors(query);\r\n    const buildResponse = BuildResponse.get(doctors);\r\n    res.statu(buildResponse.code).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,aAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAH,OAAA;AAMAC,QAAA,CAAAG,MAAM,CAACC,GAAG,CACR,iBAAiB,EACjB,IAAAN,eAAA,CAAAO,YAAY,EAAC,CAAOC,GAAQ,EAAEC,GAAQ,KAAIC,SAAA;EACxC,MAAM;IAAEC;EAAK,CAAE,GAAGH,GAAG,CAACG,KAAK;EAE3B,IAAI,CAACA,KAAK,EAAE;IACV,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAmB,CAAE,CAAC;EAC/D;EAEA,MAAMC,OAAO,GAAG,MAAM,IAAAZ,aAAA,CAAAa,aAAa,EAACL,KAAK,CAAC;EAC1C,MAAMM,aAAa,GAAGb,cAAA,CAAAc,aAAa,CAACZ,GAAG,CAACS,OAAO,CAAC;EAChDN,GAAG,CAACU,KAAK,CAACF,aAAa,CAACG,IAAI,CAAC,CAACP,IAAI,CAACI,aAAa,CAAC;AACnD,CAAC,EAAC,CACH","ignoreList":[]}},"mtime":1742205812379},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\response_error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResponseError = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar internal_server_1 = require(\"./internal_server\");\nvar unauthorized_1 = require(\"./unauthorized\");\nvar forbidden_1 = require(\"./forbidden\");\nvar not_found_1 = require(\"./not_found\");\nvar bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n  BaseResponse: base_response_1.BaseResponse,\n  BadRequest: bad_request_1.BadRequest,\n  NotFound: not_found_1.NotFound,\n  Forbidden: forbidden_1.Forbidden,\n  Unauthorized: unauthorized_1.Unauthorized,\n  InternalServer: internal_server_1.InternalServer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJlc3BvbnNlRXJyb3IiLCJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiQmFzZVJlc3BvbnNlIiwiQmFkUmVxdWVzdCIsIk5vdEZvdW5kIiwiRm9yYmlkZGVuIiwiVW5hdXRob3JpemVkIiwiSW50ZXJuYWxTZXJ2ZXIiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsicmVzcG9uc2VfZXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJlc3BvbnNlRXJyb3IgPSB2b2lkIDA7XG52YXIgYmFzZV9yZXNwb25zZV8xID0gcmVxdWlyZShcIi4vYmFzZV9yZXNwb25zZVwiKTtcbnZhciBpbnRlcm5hbF9zZXJ2ZXJfMSA9IHJlcXVpcmUoXCIuL2ludGVybmFsX3NlcnZlclwiKTtcbnZhciB1bmF1dGhvcml6ZWRfMSA9IHJlcXVpcmUoXCIuL3VuYXV0aG9yaXplZFwiKTtcbnZhciBmb3JiaWRkZW5fMSA9IHJlcXVpcmUoXCIuL2ZvcmJpZGRlblwiKTtcbnZhciBub3RfZm91bmRfMSA9IHJlcXVpcmUoXCIuL25vdF9mb3VuZFwiKTtcbnZhciBiYWRfcmVxdWVzdF8xID0gcmVxdWlyZShcIi4vYmFkX3JlcXVlc3RcIik7XG5leHBvcnRzLlJlc3BvbnNlRXJyb3IgPSB7XG4gICAgQmFzZVJlc3BvbnNlOiBiYXNlX3Jlc3BvbnNlXzEuQmFzZVJlc3BvbnNlLFxuICAgIEJhZFJlcXVlc3Q6IGJhZF9yZXF1ZXN0XzEuQmFkUmVxdWVzdCxcbiAgICBOb3RGb3VuZDogbm90X2ZvdW5kXzEuTm90Rm91bmQsXG4gICAgRm9yYmlkZGVuOiBmb3JiaWRkZW5fMS5Gb3JiaWRkZW4sXG4gICAgVW5hdXRob3JpemVkOiB1bmF1dGhvcml6ZWRfMS5VbmF1dGhvcml6ZWQsXG4gICAgSW50ZXJuYWxTZXJ2ZXI6IGludGVybmFsX3NlcnZlcl8xLkludGVybmFsU2VydmVyLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFBRUMsS0FBSyxFQUFFO0FBQUssQ0FBQyxDQUFDO0FBQzdERCxPQUFPLENBQUNFLGFBQWEsR0FBRyxLQUFLLENBQUM7QUFDOUIsSUFBSUMsZUFBZSxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDaEQsSUFBSUMsaUJBQWlCLEdBQUdELE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxJQUFJRSxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUM5QyxJQUFJRyxXQUFXLEdBQUdILE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDeEMsSUFBSUksV0FBVyxHQUFHSixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3hDLElBQUlLLGFBQWEsR0FBR0wsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUM1Q0osT0FBTyxDQUFDRSxhQUFhLEdBQUc7RUFDcEJRLFlBQVksRUFBRVAsZUFBZSxDQUFDTyxZQUFZO0VBQzFDQyxVQUFVLEVBQUVGLGFBQWEsQ0FBQ0UsVUFBVTtFQUNwQ0MsUUFBUSxFQUFFSixXQUFXLENBQUNJLFFBQVE7RUFDOUJDLFNBQVMsRUFBRU4sV0FBVyxDQUFDTSxTQUFTO0VBQ2hDQyxZQUFZLEVBQUVSLGNBQWMsQ0FBQ1EsWUFBWTtFQUN6Q0MsY0FBYyxFQUFFVixpQkFBaUIsQ0FBQ1U7QUFDdEMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Object","defineProperty","exports","value","ResponseError","base_response_1","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","BaseResponse","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["response_error.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResponseError = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar internal_server_1 = require(\"./internal_server\");\nvar unauthorized_1 = require(\"./unauthorized\");\nvar forbidden_1 = require(\"./forbidden\");\nvar not_found_1 = require(\"./not_found\");\nvar bad_request_1 = require(\"./bad_request\");\nexports.ResponseError = {\n    BaseResponse: base_response_1.BaseResponse,\n    BadRequest: bad_request_1.BadRequest,\n    NotFound: not_found_1.NotFound,\n    Forbidden: forbidden_1.Forbidden,\n    Unauthorized: unauthorized_1.Unauthorized,\n    InternalServer: internal_server_1.InternalServer,\n};\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,aAAa,GAAG,KAAK,CAAC;AAC9B,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIC,iBAAiB,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACpD,IAAIE,cAAc,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AAC9C,IAAIG,WAAW,GAAGH,OAAO,CAAC,aAAa,CAAC;AACxC,IAAII,WAAW,GAAGJ,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIK,aAAa,GAAGL,OAAO,CAAC,eAAe,CAAC;AAC5CJ,OAAO,CAACE,aAAa,GAAG;EACpBQ,YAAY,EAAEP,eAAe,CAACO,YAAY;EAC1CC,UAAU,EAAEF,aAAa,CAACE,UAAU;EACpCC,QAAQ,EAAEJ,WAAW,CAACI,QAAQ;EAC9BC,SAAS,EAAEN,WAAW,CAACM,SAAS;EAChCC,YAAY,EAAER,cAAc,CAACQ,YAAY;EACzCC,cAAc,EAAEV,iBAAiB,CAACU;AACtC,CAAC","ignoreList":[]}},"mtime":1742220888569},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\base_response.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseResponse = void 0;\nvar BaseResponse = /** @class */function (_super) {\n  __extends(BaseResponse, _super);\n  function BaseResponse(message, statusCode) {\n    var _newTarget = this.constructor;\n    var _this = _super.call(this, message) || this;\n    _this.message = message;\n    _this.code = statusCode;\n    Object.setPrototypeOf(_this, _newTarget.prototype);\n    return _this;\n  }\n  return BaseResponse;\n}(Error);\nexports.BaseResponse = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJhc2VSZXNwb25zZSIsIl9zdXBlciIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiX25ld1RhcmdldCIsIl90aGlzIiwiY29kZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbImJhc2VfcmVzcG9uc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CYXNlUmVzcG9uc2UgPSB2b2lkIDA7XG52YXIgQmFzZVJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlUmVzcG9uc2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmFzZVJlc3BvbnNlKG1lc3NhZ2UsIHN0YXR1c0NvZGUpIHtcbiAgICAgICAgdmFyIF9uZXdUYXJnZXQgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgX3RoaXMuY29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBCYXNlUmVzcG9uc2U7XG59KEVycm9yKSk7XG5leHBvcnRzLkJhc2VSZXNwb25z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","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","BaseResponse","_super","message","statusCode","_newTarget","_this","code","Error"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["base_response.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseResponse = void 0;\nvar BaseResponse = /** @class */ (function (_super) {\n    __extends(BaseResponse, _super);\n    function BaseResponse(message, statusCode) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.code = statusCode;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return BaseResponse;\n}(Error));\nexports.BaseResponse = BaseResponse;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,YAAY,GAAG,KAAK,CAAC;AAC7B,IAAIA,YAAY,GAAG,aAAe,UAAUC,MAAM,EAAE;EAChDrB,SAAS,CAACoB,YAAY,EAAEC,MAAM,CAAC;EAC/B,SAASD,YAAYA,CAACE,OAAO,EAAEC,UAAU,EAAE;IACvC,IAAIC,UAAU,GAAG,IAAI,CAACT,WAAW;IACjC,IAAIU,KAAK,GAAGJ,MAAM,CAACV,IAAI,CAAC,IAAI,EAAEW,OAAO,CAAC,IAAI,IAAI;IAC9CG,KAAK,CAACH,OAAO,GAAGA,OAAO;IACvBG,KAAK,CAACC,IAAI,GAAGH,UAAU;IACvBnB,MAAM,CAACC,cAAc,CAACoB,KAAK,EAAED,UAAU,CAACf,SAAS,CAAC;IAClD,OAAOgB,KAAK;EAChB;EACA,OAAOL,YAAY;AACvB,CAAC,CAACO,KAAK,CAAE;AACTT,OAAO,CAACE,YAAY,GAAGA,YAAY","ignoreList":[]}},"mtime":1742220888556},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalServer = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar InternalServer = /** @class */function (_super) {\n  __extends(InternalServer, _super);\n  function InternalServer(message) {\n    if (message === void 0) {\n      message = \"Internal server error\";\n    }\n    return _super.call(this, message, 500) || this;\n  }\n  return InternalServer;\n}(base_response_1.BaseResponse);\nexports.InternalServer = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkludGVybmFsU2VydmVyIiwiYmFzZV9yZXNwb25zZV8xIiwicmVxdWlyZSIsIl9zdXBlciIsIm1lc3NhZ2UiLCJCYXNlUmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiaW50ZXJuYWxfc2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSW50ZXJuYWxTZXJ2ZXIgPSB2b2lkIDA7XG52YXIgYmFzZV9yZXNwb25zZV8xID0gcmVxdWlyZShcIi4vYmFzZV9yZXNwb25zZVwiKTtcbnZhciBJbnRlcm5hbFNlcnZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJuYWxTZXJ2ZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSW50ZXJuYWxTZXJ2ZXIobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBcIkludGVybmFsIHNlcnZlciBlcnJvclwiOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlLCA1MDApIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBJbnRlcm5hbFNlcnZlcjtcbn0oYmFzZV9yZXNwb25zZV8xLkJhc2VSZXNwb25zZSkpO1xuZXhwb3J0cy5JbnRlcm5hbFNlcnZlciA9IEludGVybmFsU2VydmVyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztB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","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","InternalServer","base_response_1","require","_super","message","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["internal_server.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalServer = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar InternalServer = /** @class */ (function (_super) {\n    __extends(InternalServer, _super);\n    function InternalServer(message) {\n        if (message === void 0) { message = \"Internal server error\"; }\n        return _super.call(this, message, 500) || this;\n    }\n    return InternalServer;\n}(base_response_1.BaseResponse));\nexports.InternalServer = InternalServer;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,cAAc,GAAG,KAAK,CAAC;AAC/B,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIF,cAAc,GAAG,aAAe,UAAUG,MAAM,EAAE;EAClDvB,SAAS,CAACoB,cAAc,EAAEG,MAAM,CAAC;EACjC,SAASH,cAAcA,CAACI,OAAO,EAAE;IAC7B,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,uBAAuB;IAAE;IAC7D,OAAOD,MAAM,CAACZ,IAAI,CAAC,IAAI,EAAEa,OAAO,EAAE,GAAG,CAAC,IAAI,IAAI;EAClD;EACA,OAAOJ,cAAc;AACzB,CAAC,CAACC,eAAe,CAACI,YAAY,CAAE;AAChCP,OAAO,CAACE,cAAc,GAAGA,cAAc","ignoreList":[]}},"mtime":1742220888559},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unauthorized = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar Unauthorized = /** @class */function (_super) {\n  __extends(Unauthorized, _super);\n  function Unauthorized(message) {\n    if (message === void 0) {\n      message = \"Unauthorized access\";\n    }\n    return _super.call(this, message, 401) || this;\n  }\n  return Unauthorized;\n}(base_response_1.BaseResponse);\nexports.Unauthorized = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlVuYXV0aG9yaXplZCIsImJhc2VfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJfc3VwZXIiLCJtZXNzYWdlIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbInVuYXV0aG9yaXplZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVuYXV0aG9yaXplZCA9IHZvaWQgMDtcbnZhciBiYXNlX3Jlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9iYXNlX3Jlc3BvbnNlXCIpO1xudmFyIFVuYXV0aG9yaXplZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVW5hdXRob3JpemVkLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFVuYXV0aG9yaXplZChtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IFwiVW5hdXRob3JpemVkIGFjY2Vzc1wiOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlLCA0MDEpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBVbmF1dGhvcml6ZWQ7XG59KGJhc2VfcmVzcG9uc2VfMS5CYXNlUmVzcG9uc2UpKTtcbmV4cG9ydHMuVW5hdXRob3JpemVkID0gVW5hdXRob3JpemVkO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLElBQUlBLFNBQVMsR0FBSSxJQUFJLElBQUksSUFBSSxDQUFDQSxTQUFTLElBQU0sWUFBWTtFQUNyRCxJQUFJQyxhQUFhLEdBQUcsU0FBQUEsQ0FBVUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUU7SUFDaENGLGFBQWEsR0FBR0csTUFBTSxDQUFDQyxjQUFjLElBQ2hDO01BQUVDLFNBQVMsRUFBRTtJQUFHLENBQUMsWUFBWUMsS0FBSyxJQUFJLFVBQVVMLENBQUMsRUFBRUMsQ0FBQyxFQUFFO01BQUVELENBQUMsQ0FBQ0ksU0FBUyxHQUFHSCxDQUFDO0lBQUUsQ0FBRSxJQUM1RSxVQUFVRCxDQUFDLEVBQUVDLENBQUMsRUFBRTtNQUFFLEtBQUssSUFBSUssQ0FBQyxJQUFJTCxDQUFDLEVBQUUsSUFBSUMsTUFBTSxDQUFDSyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixDQUFDLEVBQUVLLENBQUMsQ0FBQyxFQUFFTixDQUFDLENBQUNNLENBQUMsQ0FBQyxHQUFHTCxDQUFDLENBQUNLLENBQUMsQ0FBQztJQUFFLENBQUM7SUFDckcsT0FBT1AsYUFBYSxDQUFDQyxDQUFDLEVBQUVDLENBQUMsQ0FBQztFQUM5QixDQUFDO0VBQ0QsT0FBTyxVQUFVRCxDQUFDLEVBQUVDLENBQUMsRUFBRTtJQUNuQixJQUFJLE9BQU9BLENBQUMsS0FBSyxVQUFVLElBQUlBLENBQUMsS0FBSyxJQUFJLEVBQ3JDLE1BQU0sSUFBSVMsU0FBUyxDQUFDLHNCQUFzQixHQUFHQyxNQUFNLENBQUNWLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDO0lBQzdGRixhQUFhLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxDQUFDO0lBQ25CLFNBQVNXLEVBQUVBLENBQUEsRUFBRztNQUFFLElBQUksQ0FBQ0MsV0FBVyxHQUFHYixDQUFDO0lBQUU7SUFDdENBLENBQUMsQ0FBQ08sU0FBUyxHQUFHTixDQUFDLEtBQUssSUFBSSxHQUFHQyxNQUFNLENBQUNZLE1BQU0sQ0FBQ2IsQ0FBQyxDQUFDLElBQUlXLEVBQUUsQ0FBQ0wsU0FBUyxHQUFHTixDQUFDLENBQUNNLFNBQVMsRUFBRSxJQUFJSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3hGLENBQUM7QUFDTCxDQUFDLENBQUUsQ0FBQztBQUNKVixNQUFNLENBQUNhLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFDN0RELE9BQU8sQ0FBQ0UsWUFBWSxHQUFHLEtBQUssQ0FBQztBQUM3QixJQUFJQyxlQUFlLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNoRCxJQUFJRixZQUFZLEdBQUcsYUFBZSxVQUFVRyxNQUFNLEVBQUU7RUFDaER2QixTQUFTLENBQUNvQixZQUFZLEVBQUVHLE1BQU0sQ0FBQztFQUMvQixTQUFTSCxZQUFZQSxDQUFDSSxPQUFPLEVBQUU7SUFDM0IsSUFBSUEsT0FBTyxLQUFLLEtBQUssQ0FBQyxFQUFFO01BQUVBLE9BQU8sR0FBRyxxQkFBcUI7SUFBRTtJQUMzRCxPQUFPRCxNQUFNLENBQUNaLElBQUksQ0FBQyxJQUFJLEVBQUVhLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJO0VBQ2xEO0VBQ0EsT0FBT0osWUFBWTtBQUN2QixDQUFDLENBQUNDLGVBQWUsQ0FBQ0ksWUFBWSxDQUFFO0FBQ2hDUCxPQUFPLENBQUNFLFlBQVksR0FBR0EsWUFBWSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","Unauthorized","base_response_1","require","_super","message","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["unauthorized.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Unauthorized = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar Unauthorized = /** @class */ (function (_super) {\n    __extends(Unauthorized, _super);\n    function Unauthorized(message) {\n        if (message === void 0) { message = \"Unauthorized access\"; }\n        return _super.call(this, message, 401) || this;\n    }\n    return Unauthorized;\n}(base_response_1.BaseResponse));\nexports.Unauthorized = Unauthorized;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,YAAY,GAAG,KAAK,CAAC;AAC7B,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIF,YAAY,GAAG,aAAe,UAAUG,MAAM,EAAE;EAChDvB,SAAS,CAACoB,YAAY,EAAEG,MAAM,CAAC;EAC/B,SAASH,YAAYA,CAACI,OAAO,EAAE;IAC3B,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,qBAAqB;IAAE;IAC3D,OAAOD,MAAM,CAACZ,IAAI,CAAC,IAAI,EAAEa,OAAO,EAAE,GAAG,CAAC,IAAI,IAAI;EAClD;EACA,OAAOJ,YAAY;AACvB,CAAC,CAACC,eAAe,CAACI,YAAY,CAAE;AAChCP,OAAO,CAACE,YAAY,GAAGA,YAAY","ignoreList":[]}},"mtime":1742220888561},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Forbidden = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar Forbidden = /** @class */function (_super) {\n  __extends(Forbidden, _super);\n  function Forbidden(messsage) {\n    var _this = _super.call(this, messsage, 403) || this;\n    Object.setPrototypeOf(_this, Forbidden.prototype);\n    return _this;\n  }\n  return Forbidden;\n}(base_response_1.BaseResponse);\nexports.Forbidden = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkZvcmJpZGRlbiIsImJhc2VfcmVzcG9uc2VfMSIsInJlcXVpcmUiLCJfc3VwZXIiLCJtZXNzc2FnZSIsIl90aGlzIiwiQmFzZVJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbImZvcmJpZGRlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZvcmJpZGRlbiA9IHZvaWQgMDtcbnZhciBiYXNlX3Jlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9iYXNlX3Jlc3BvbnNlXCIpO1xudmFyIEZvcmJpZGRlbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRm9yYmlkZGVuLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZvcmJpZGRlbihtZXNzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzc2FnZSwgNDAzKSB8fCB0aGlzO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBGb3JiaWRkZW47XG59KGJhc2VfcmVzcG9uc2VfMS5CYXNlUmVzcG9uc2UpKTtcbmV4cG9ydHMuRm9yYmlkZGVuID0gRm9yYmlkZGVuO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLElBQUlBLFNBQVMsR0FBSSxJ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","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","Forbidden","base_response_1","require","_super","messsage","_this","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["forbidden.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Forbidden = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar Forbidden = /** @class */ (function (_super) {\n    __extends(Forbidden, _super);\n    function Forbidden(messsage) {\n        var _this = _super.call(this, messsage, 403) || this;\n        Object.setPrototypeOf(_this, Forbidden.prototype);\n        return _this;\n    }\n    return Forbidden;\n}(base_response_1.BaseResponse));\nexports.Forbidden = Forbidden;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,SAAS,GAAG,KAAK,CAAC;AAC1B,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIF,SAAS,GAAG,aAAe,UAAUG,MAAM,EAAE;EAC7CvB,SAAS,CAACoB,SAAS,EAAEG,MAAM,CAAC;EAC5B,SAASH,SAASA,CAACI,QAAQ,EAAE;IACzB,IAAIC,KAAK,GAAGF,MAAM,CAACZ,IAAI,CAAC,IAAI,EAAEa,QAAQ,EAAE,GAAG,CAAC,IAAI,IAAI;IACpDpB,MAAM,CAACC,cAAc,CAACoB,KAAK,EAAEL,SAAS,CAACX,SAAS,CAAC;IACjD,OAAOgB,KAAK;EAChB;EACA,OAAOL,SAAS;AACpB,CAAC,CAACC,eAAe,CAACK,YAAY,CAAE;AAChCR,OAAO,CAACE,SAAS,GAAGA,SAAS","ignoreList":[]}},"mtime":1742220888563},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\not_found.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotFound = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar NotFound = /** @class */function (_super) {\n  __extends(NotFound, _super);\n  function NotFound(message) {\n    if (message === void 0) {\n      message = \"Not found\";\n    }\n    return _super.call(this, message, 404) || this;\n  }\n  return NotFound;\n}(base_response_1.BaseResponse);\nexports.NotFound = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk5vdEZvdW5kIiwiYmFzZV9yZXNwb25zZV8xIiwicmVxdWlyZSIsIl9zdXBlciIsIm1lc3NhZ2UiLCJCYXNlUmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsibm90X2ZvdW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTm90Rm91bmQgPSB2b2lkIDA7XG52YXIgYmFzZV9yZXNwb25zZV8xID0gcmVxdWlyZShcIi4vYmFzZV9yZXNwb25zZVwiKTtcbnZhciBOb3RGb3VuZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTm90Rm91bmQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTm90Rm91bmQobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBcIk5vdCBmb3VuZFwiOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlLCA0MDQpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBOb3RGb3VuZDtcbn0oYmFzZV9yZXNwb25zZV8xLkJhc2VSZXNwb25zZSkpO1xuZXhwb3J0cy5Ob3RGb3VuZCA9IE5vdEZvdW5kO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLElBQUlBLFNBQVMsR0FBSSxJQUFJLElBQUksSUFBSSxDQUFDQSxTQUFTLElBQU0sWUFBWTtFQUNyRCxJQUFJQyxhQUFhLEdBQUcsU0FBQUEsQ0FBVUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUU7SUFDaENGLGFBQWEsR0FBR0csTUFBTSxDQUFDQyxjQUFjLElBQ2hDO01BQUVDLFNBQVMsRUFBRTtJQUFHLENBQUMsWUFBWUMsS0FBSyxJQUFJLFVBQVVMLENBQUMsRUFBRUMsQ0FBQyxFQUFFO01BQUVELENBQUMsQ0FBQ0ksU0FBUyxHQUFHSCxDQUFDO0lBQUUsQ0FBRSxJQUM1RSxVQUFVRCxDQUFDLEVBQUVDLENBQUMsRUFBRTtNQUFFLEtBQUssSUFBSUssQ0FBQyxJQUFJTCxDQUFDLEVBQUUsSUFBSUMsTUFBTSxDQUFDSyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixDQUFDLEVBQUVLLENBQUMsQ0FBQyxFQUFFTixDQUFDLENBQUNNLENBQUMsQ0FBQyxHQUFHTCxDQUFDLENBQUNLLENBQUMsQ0FBQztJQUFFLENBQUM7SUFDckcsT0FBT1AsYUFBYSxDQUFDQyxDQUFDLEVBQUVDLENBQUMsQ0FBQztFQUM5QixDQUFDO0VBQ0QsT0FBTyxVQUFVRCxDQUFDLEVBQUVDLENBQUMsRUFBRTtJQUNuQixJQUFJLE9BQU9BLENBQUMsS0FBSyxVQUFVLElBQUlBLENBQUMsS0FBSyxJQUFJLEVBQ3JDLE1BQU0sSUFBSVMsU0FBUyxDQUFDLHNCQUFzQixHQUFHQyxNQUFNLENBQUNWLENBQUMsQ0FBQyxHQUFHLCtCQUErQixDQUFDO0lBQzdGRixhQUFhLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxDQUFDO0lBQ25CLFNBQVNXLEVBQUVBLENBQUEsRUFBRztNQUFFLElBQUksQ0FBQ0MsV0FBVyxHQUFHYixDQUFDO0lBQUU7SUFDdENBLENBQUMsQ0FBQ08sU0FBUyxHQUFHTixDQUFDLEtBQUssSUFBSSxHQUFHQyxNQUFNLENBQUNZLE1BQU0sQ0FBQ2IsQ0FBQyxDQUFDLElBQUlXLEVBQUUsQ0FBQ0wsU0FBUyxHQUFHTixDQUFDLENBQUNNLFNBQVMsRUFBRSxJQUFJSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3hGLENBQUM7QUFDTCxDQUFDLENBQUUsQ0FBQztBQUNKVixNQUFNLENBQUNhLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFDN0RELE9BQU8sQ0FBQ0UsUUFBUSxHQUFHLEtBQUssQ0FBQztBQUN6QixJQUFJQyxlQUFlLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNoRCxJQUFJRixRQUFRLEdBQUcsYUFBZSxVQUFVRyxNQUFNLEVBQUU7RUFDNUN2QixTQUFTLENBQUNvQixRQUFRLEVBQUVHLE1BQU0sQ0FBQztFQUMzQixTQUFTSCxRQUFRQSxDQUFDSSxPQUFPLEVBQUU7SUFDdkIsSUFBSUEsT0FBTyxLQUFLLEtBQUssQ0FBQyxFQUFFO01BQUVBLE9BQU8sR0FBRyxXQUFXO0lBQUU7SUFDakQsT0FBT0QsTUFBTSxDQUFDWixJQUFJLENBQUMsSUFBSSxFQUFFYSxPQUFPLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSTtFQUNsRDtFQUNBLE9BQU9KLFFBQVE7QUFDbkIsQ0FBQyxDQUFDQyxlQUFlLENBQUNJLFlBQVksQ0FBRTtBQUNoQ1AsT0FBTyxDQUFDRSxRQUFRLEdBQUdBLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","NotFound","base_response_1","require","_super","message","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["not_found.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotFound = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar NotFound = /** @class */ (function (_super) {\n    __extends(NotFound, _super);\n    function NotFound(message) {\n        if (message === void 0) { message = \"Not found\"; }\n        return _super.call(this, message, 404) || this;\n    }\n    return NotFound;\n}(base_response_1.BaseResponse));\nexports.NotFound = NotFound;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,QAAQ,GAAG,KAAK,CAAC;AACzB,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIF,QAAQ,GAAG,aAAe,UAAUG,MAAM,EAAE;EAC5CvB,SAAS,CAACoB,QAAQ,EAAEG,MAAM,CAAC;EAC3B,SAASH,QAAQA,CAACI,OAAO,EAAE;IACvB,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,WAAW;IAAE;IACjD,OAAOD,MAAM,CAACZ,IAAI,CAAC,IAAI,EAAEa,OAAO,EAAE,GAAG,CAAC,IAAI,IAAI;EAClD;EACA,OAAOJ,QAAQ;AACnB,CAAC,CAACC,eAAe,CAACI,YAAY,CAAE;AAChCP,OAAO,CAACE,QAAQ,GAAGA,QAAQ","ignoreList":[]}},"mtime":1742220888564},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BadRequest = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar BadRequest = /** @class */function (_super) {\n  __extends(BadRequest, _super);\n  function BadRequest(message) {\n    if (message === void 0) {\n      message = \"Bad request\";\n    }\n    return _super.call(this, message, 400) || this;\n  }\n  return BadRequest;\n}(base_response_1.BaseResponse);\nexports.BadRequest = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJhZFJlcXVlc3QiLCJiYXNlX3Jlc3BvbnNlXzEiLCJyZXF1aXJlIiwiX3N1cGVyIiwibWVzc2FnZSIsIkJhc2VSZXNwb25zZSJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJiYWRfcmVxdWVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJhZFJlcXVlc3QgPSB2b2lkIDA7XG52YXIgYmFzZV9yZXNwb25zZV8xID0gcmVxdWlyZShcIi4vYmFzZV9yZXNwb25zZVwiKTtcbnZhciBCYWRSZXF1ZXN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYWRSZXF1ZXN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJhZFJlcXVlc3QobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBcIkJhZCByZXF1ZXN0XCI7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UsIDQwMCkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEJhZFJlcXVlc3Q7XG59KGJhc2VfcmVzcG9uc2VfMS5CYXNlUmVzcG9uc2UpKTtcbmV4cG9ydHMuQmFkUmVxdWVzdCA9IEJhZFJlcXVlc3Q7XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osSUFBSUEsU0FBUyxHQUFJLElBQUksSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBTSxZQUFZO0VBQ3JELElBQUlDLGFBQWEsR0FBRyxTQUFBQSxDQUFVQyxDQUFDLEVBQUVDLENBQUMsRUFBRTtJQUNoQ0YsYUFBYSxHQUFHRyxNQUFNLENBQUNDLGNBQWMsSUFDaEM7TUFBRUMsU0FBUyxFQUFFO0lBQUcsQ0FBQyxZQUFZQyxLQUFLLElBQUksVUFBVUwsQ0FBQyxFQUFFQyxDQUFDLEVBQUU7TUFBRUQsQ0FBQyxDQUFDSSxTQUFTLEdBQUdILENBQUM7SUFBRSxDQUFFLElBQzVFLFVBQVVELENBQUMsRUFBRUMsQ0FBQyxFQUFFO01BQUUsS0FBSyxJQUFJSyxDQUFDLElBQUlMLENBQUMsRUFBRSxJQUFJQyxNQUFNLENBQUNLLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLENBQUMsRUFBRUssQ0FBQyxDQUFDLEVBQUVOLENBQUMsQ0FBQ00sQ0FBQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ0ssQ0FBQyxDQUFDO0lBQUUsQ0FBQztJQUNyRyxPQUFPUCxhQUFhLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxDQUFDO0VBQzlCLENBQUM7RUFDRCxPQUFPLFVBQVVELENBQUMsRUFBRUMsQ0FBQyxFQUFFO0lBQ25CLElBQUksT0FBT0EsQ0FBQyxLQUFLLFVBQVUsSUFBSUEsQ0FBQyxLQUFLLElBQUksRUFDckMsTUFBTSxJQUFJUyxTQUFTLENBQUMsc0JBQXNCLEdBQUdDLE1BQU0sQ0FBQ1YsQ0FBQyxDQUFDLEdBQUcsK0JBQStCLENBQUM7SUFDN0ZGLGFBQWEsQ0FBQ0MsQ0FBQyxFQUFFQyxDQUFDLENBQUM7SUFDbkIsU0FBU1csRUFBRUEsQ0FBQSxFQUFHO01BQUUsSUFBSSxDQUFDQyxXQUFXLEdBQUdiLENBQUM7SUFBRTtJQUN0Q0EsQ0FBQyxDQUFDTyxTQUFTLEdBQUdOLENBQUMsS0FBSyxJQUFJLEdBQUdDLE1BQU0sQ0FBQ1ksTUFBTSxDQUFDYixDQUFDLENBQUMsSUFBSVcsRUFBRSxDQUFDTCxTQUFTLEdBQUdOLENBQUMsQ0FBQ00sU0FBUyxFQUFFLElBQUlLLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDeEYsQ0FBQztBQUNMLENBQUMsQ0FBRSxDQUFDO0FBQ0pWLE1BQU0sQ0FBQ2EsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQUVDLEtBQUssRUFBRTtBQUFLLENBQUMsQ0FBQztBQUM3REQsT0FBTyxDQUFDRSxVQUFVLEdBQUcsS0FBSyxDQUFDO0FBQzNCLElBQUlDLGVBQWUsR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ2hELElBQUlGLFVBQVUsR0FBRyxhQUFlLFVBQVVHLE1BQU0sRUFBRTtFQUM5Q3ZCLFNBQVMsQ0FBQ29CLFVBQVUsRUFBRUcsTUFBTSxDQUFDO0VBQzdCLFNBQVNILFVBQVVBLENBQUNJLE9BQU8sRUFBRTtJQUN6QixJQUFJQSxPQUFPLEtBQUssS0FBSyxDQUFDLEVBQUU7TUFBRUEsT0FBTyxHQUFHLGFBQWE7SUFBRTtJQUNuRCxPQUFPRCxNQUFNLENBQUNaLElBQUksQ0FBQyxJQUFJLEVBQUVhLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJO0VBQ2xEO0VBQ0EsT0FBT0osVUFBVTtBQUNyQixDQUFDLENBQUNDLGVBQWUsQ0FBQ0ksWUFBWSxDQUFFO0FBQ2hDUCxPQUFPLENBQUNFLFVBQVUsR0FBR0EsVUFBVSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","BadRequest","base_response_1","require","_super","message","BaseResponse"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\modules\\error\\","sources":["bad_request.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BadRequest = void 0;\nvar base_response_1 = require(\"./base_response\");\nvar BadRequest = /** @class */ (function (_super) {\n    __extends(BadRequest, _super);\n    function BadRequest(message) {\n        if (message === void 0) { message = \"Bad request\"; }\n        return _super.call(this, message, 400) || this;\n    }\n    return BadRequest;\n}(base_response_1.BaseResponse));\nexports.BadRequest = BadRequest;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJV,MAAM,CAACa,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,UAAU,GAAG,KAAK,CAAC;AAC3B,IAAIC,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAIF,UAAU,GAAG,aAAe,UAAUG,MAAM,EAAE;EAC9CvB,SAAS,CAACoB,UAAU,EAAEG,MAAM,CAAC;EAC7B,SAASH,UAAUA,CAACI,OAAO,EAAE;IACzB,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,aAAa;IAAE;IACnD,OAAOD,MAAM,CAACZ,IAAI,CAAC,IAAI,EAAEa,OAAO,EAAE,GAAG,CAAC,IAAI,IAAI;EAClD;EACA,OAAOJ,UAAU;AACrB,CAAC,CAACC,eAAe,CAACI,YAAY,CAAE;AAChCP,OAAO,CAACE,UAAU,GAAGA,UAAU","ignoreList":[]}},"mtime":1742220888566},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\bin\\\\mysql.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mysql = exports.pool = exports.coreSchema = void 0;\nexports.query = query;\nvar dotenv = require(\"dotenv\");\nvar mysql = require(\"mysql2/promise\");\nexports.mysql = mysql;\ndotenv.config();\nvar coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nvar pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 50,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", function (connection) {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function (sql, options, attempt) {\n    var useExternalConnection, connection, _a, result, sqlQuery, e_1;\n    if (options === void 0) {\n      options = {};\n    }\n    if (attempt === void 0) {\n      attempt = 0;\n    }\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          useExternalConnection = Boolean(options.connection);\n          _a = options.connection;\n          if (_a) return [3 /*break*/, 2];\n          return [4 /*yield*/, pool.getConnection()];\n        case 1:\n          _a = _b.sent();\n          _b.label = 2;\n        case 2:\n          connection = _a;\n          sqlQuery = sql;\n          _b.label = 3;\n        case 3:\n          _b.trys.push([3, 5, 6, 7]);\n          sqlQuery = connection.format(sql, options.values);\n          return [4 /*yield*/, connection.query({\n            sql: sql,\n            values: options.values,\n            nestTables: options.nestTables\n          })];\n        case 4:\n          result = _b.sent()[0];\n          if (!result) {\n            result = [];\n          }\n          return [3 /*break*/, 7];\n        case 5:\n          e_1 = _b.sent();\n          e_1.message = \"\".concat(e_1.code, \"\\nsql: \").concat(sqlQuery, \"\\nerror: \").concat(e_1.message, \"\\ntime: }\");\n          throw e_1;\n        case 6:\n          if (!useExternalConnection) {\n            connection.release();\n          }\n          return [7 /*endfinally*/];\n        case 7:\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJfIiwibGFiZWwiLCJzZW50IiwidCIsInRyeXMiLCJvcHMiLCJmIiwieSIsImciLCJPYmplY3QiLCJjcmVhdGUiLCJJdGVyYXRvciIsInByb3RvdHlwZSIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIm15c3FsIiwicG9vbCIsImNvcmVTY2hlbWEiLCJxdWVyeSIsImRvdGVudiIsInJlcXVpcmUiLCJjb25maWciLCJwcm9jZXNzIiwiZW52IiwiREJfREFUQUJBU0UiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInNxbF8xIiwiYXJndW1lbnRzIiwic3FsIiwib3B0aW9ucyIsImF0dGVtcHQiLCJ1c2VFeHRlcm5hbENvbm5lY3Rpb24iLCJfYSIsInNxbFF1ZXJ5IiwiZV8xIiwiX2IiLCJCb29sZWFuIiwiZ2V0Q29ubmVjdGlvbiIsImZvcm1hdCIsInZhbHVlcyIsIm5lc3RUYWJsZXMiLCJtZXNzYWdlIiwiY29uY2F0IiwiY29kZSIsInJlbGVhc2UiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcYmluXFwiLCJzb3VyY2VzIjpbIm15c3FsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubXlzcWwgPSBleHBvcnRzLnBvb2wgPSBleHBvcnRzLmNvcmVTY2hlbWEgPSB2b2lkIDA7XG5leHBvcnRzLnF1ZXJ5ID0gcXVlcnk7XG52YXIgZG90ZW52ID0gcmVxdWlyZShcImRvdGVudlwiKTtcbnZhciBteXNxbCA9IHJlcXVpcmUoXCJteXNxbDIvcHJvbWlzZVwiKTtcbmV4cG9ydHMubXlzcWwgPSBteXNxbDtcbmRvdGVudi5jb25maWcoKTtcbnZhciBjb3JlU2NoZW1hID0gcHJvY2Vzcy5lbnYuREJfREFUQUJBU0U7XG5leHBvcnRzLmNvcmVTY2hlbWEgPSBjb3JlU2NoZW1hO1xudmFyIHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuICAgIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVJOQU1FLFxuICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfREFUQUJBU0UsXG4gICAgY29ubmVjdGlvbkxpbWl0OiA1MCxcbiAgICBxdWV1ZUxpbWl0OiAwLFxuICAgIGNoYXJzZXQ6IFwidXRmOFwiLFxuICAgIHRpbWV6b25lOiBwcm9jZXNzLmVudi5EQl9USU1FWk9ORSxcbn0pO1xuZXhwb3J0cy5wb29sID0gcG9vbDtcbnBvb2wub24oXCJjb25uZWN0aW9uXCIsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XG4gICAgY29ubmVjdGlvbi5jb25maWcubmFtZWRQbGFjZWhvbGRlcnMgPSB0cnVlO1xufSk7XG5mdW5jdGlvbiBxdWVyeShzcWxfMSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChzcWwsIG9wdGlvbnMsIGF0dGVtcHQpIHtcbiAgICAgICAgdmFyIHVzZUV4dGVybmFsQ29ubmVjdGlvbiwgY29ubmVjdGlvbiwgX2EsIHJlc3VsdCwgc3FsUXVlcnksIGVfMTtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgaWYgKGF0dGVtcHQgPT09IHZvaWQgMCkgeyBhdHRlbXB0ID0gMDsgfVxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB1c2VFeHRlcm5hbENvbm5lY3Rpb24gPSBCb29sZWFuKG9wdGlvbnMuY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIF9hID0gb3B0aW9ucy5jb25uZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2EpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwb29sLmdldENvbm5lY3Rpb24oKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYSA9IChfYi5zZW50KCkpO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gX2E7XG4gICAgICAgICAgICAgICAgICAgIHNxbFF1ZXJ5ID0gc3FsO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzMsIDUsIDYsIDddKTtcbiAgICAgICAgICAgICAgICAgICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY29ubmVjdGlvbi5xdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsOiBzcWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXN0VGFibGVzOiBvcHRpb25zLm5lc3RUYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoX2Iuc2VudCgpKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBlXzEubWVzc2FnZSA9IFwiXCIuY29uY2F0KGVfMS5jb2RlLCBcIlxcbnNxbDogXCIpLmNvbmNhdChzcWxRdWVyeSwgXCJcXG5lcnJvcjogXCIpLmNvbmNhdChlXzEubWVzc2FnZSwgXCJcXG50aW1lOiB9XCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlXzE7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZUV4dGVybmFsQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixJQUFJQSxTQUFTLEdBQUksSUFBSSxJQUFJLElBQUksQ0FBQ0EsU0FBUyxJQUFLLFVBQVVDLE9BQU8sRUFBRUMsVUFBVSxFQUFFQyxDQUFDLEVBQUVDLFNBQVMsRUFBRTtFQUNyRixTQUFTQyxLQUFLQSxDQUFDQyxLQUFLLEVBQUU7SUFBRSxPQUFPQSxLQUFLLFlBQVlILENBQUMsR0FBR0csS0FBSyxHQUFHLElBQUlILENBQUMsQ0FBQyxVQUFVSSxPQUFPLEVBQUU7TUFBRUEsT0FBTyxDQUFDRCxLQUFLLENBQUM7SUFBRSxDQUFDLENBQUM7RUFBRTtFQUMzRyxPQUFPLEtBQUtILENBQUMsS0FBS0EsQ0FBQyxHQUFHSyxPQUFPLENBQUMsRUFBRSxVQUFVRCxPQUFPLEVBQUVFLE1BQU0sRUFBRTtJQUN2RCxTQUFTQyxTQUFTQSxDQUFDSixLQUFLLEVBQUU7TUFBRSxJQUFJO1FBQUVLLElBQUksQ0FBQ1AsU0FBUyxDQUFDUSxJQUFJLENBQUNOLEtBQUssQ0FBQyxDQUFDO01BQUUsQ0FBQyxDQUFDLE9BQU9PLENBQUMsRUFBRTtRQUFFSixNQUFNLENBQUNJLENBQUMsQ0FBQztNQUFFO0lBQUU7SUFDMUYsU0FBU0MsUUFBUUEsQ0FBQ1IsS0FBSyxFQUFFO01BQUUsSUFBSTtRQUFFSyxJQUFJLENBQUNQLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQ0UsS0FBSyxDQUFDLENBQUM7TUFBRSxDQUFDLENBQUMsT0FBT08sQ0FBQyxFQUFFO1FBQUVKLE1BQU0sQ0FBQ0ksQ0FBQyxDQUFDO01BQUU7SUFBRTtJQUM3RixTQUFTRixJQUFJQSxDQUFDSSxNQUFNLEVBQUU7TUFBRUEsTUFBTSxDQUFDQyxJQUFJLEdBQUdULE9BQU8sQ0FBQ1EsTUFBTSxDQUFDVCxLQUFL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","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","Object","create","Iterator","prototype","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","defineProperty","exports","mysql","pool","coreSchema","query","dotenv","require","config","process","env","DB_DATABASE","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","sql_1","arguments","sql","options","attempt","useExternalConnection","_a","sqlQuery","e_1","_b","Boolean","getConnection","format","values","nestTables","message","concat","code","release"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\bin\\","sources":["mysql.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mysql = exports.pool = exports.coreSchema = void 0;\nexports.query = query;\nvar dotenv = require(\"dotenv\");\nvar mysql = require(\"mysql2/promise\");\nexports.mysql = mysql;\ndotenv.config();\nvar coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nvar pool = mysql.createPool({\n    host: process.env.DB_HOST,\n    user: process.env.DB_USERNAME,\n    password: process.env.DB_PASSWORD,\n    database: process.env.DB_DATABASE,\n    connectionLimit: 50,\n    queueLimit: 0,\n    charset: \"utf8\",\n    timezone: process.env.DB_TIMEZONE,\n});\nexports.pool = pool;\npool.on(\"connection\", function (connection) {\n    connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n    return __awaiter(this, arguments, void 0, function (sql, options, attempt) {\n        var useExternalConnection, connection, _a, result, sqlQuery, e_1;\n        if (options === void 0) { options = {}; }\n        if (attempt === void 0) { attempt = 0; }\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    useExternalConnection = Boolean(options.connection);\n                    _a = options.connection;\n                    if (_a) return [3 /*break*/, 2];\n                    return [4 /*yield*/, pool.getConnection()];\n                case 1:\n                    _a = (_b.sent());\n                    _b.label = 2;\n                case 2:\n                    connection = _a;\n                    sqlQuery = sql;\n                    _b.label = 3;\n                case 3:\n                    _b.trys.push([3, 5, 6, 7]);\n                    sqlQuery = connection.format(sql, options.values);\n                    return [4 /*yield*/, connection.query({\n                            sql: sql,\n                            values: options.values,\n                            nestTables: options.nestTables,\n                        })];\n                case 4:\n                    result = (_b.sent())[0];\n                    if (!result) {\n                        result = [];\n                    }\n                    return [3 /*break*/, 7];\n                case 5:\n                    e_1 = _b.sent();\n                    e_1.message = \"\".concat(e_1.code, \"\\nsql: \").concat(sqlQuery, \"\\nerror: \").concat(e_1.message, \"\\ntime: }\");\n                    throw e_1;\n                case 6:\n                    if (!useExternalConnection) {\n                        connection.release();\n                    }\n                    return [7 /*endfinally*/];\n                case 7: return [2 /*return*/, result];\n            }\n        });\n    });\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1742220888548},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDoctorsFromElastic = getDoctorsFromElastic;\nexports.addDoctor = addDoctor;\nexports.getUserSuggestionPercentage = getUserSuggestionPercentage;\nexports.like = like;\nexports.getDoctoLike = getDoctoLike;\nexports.getServices = getServices;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.updateDoctor = updateDoctor;\nexports.recordDoctorProfileView = recordDoctorProfileView;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.getSubSpecialtiesById = getSubSpecialtiesById;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.getSuggestionsBySpecialty = getSuggestionsBySpecialty;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorSchadules = doctorSchadules;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nvar elasticsearch_1 = require(\"@elastic/elasticsearch\");\nvar mysql_1 = require(\"../../bin/mysql\");\nvar response_error_1 = require(\"../../modules/error/response_error\");\nvar schema_1 = require(\"./schema\");\nvar bcrypt_1 = require(\"bcrypt\");\nvar uuid_1 = require(\"uuid\");\n// const esClient = new Client({ node: process.env.ELASTICSEARCH_URL });\nvar esClient = new elasticsearch_1.Client({\n  node: \"http://localhost:9200\",\n  auth: {\n    username: \"elastic\",\n    password: \"@Ali0011914505\"\n  }\n});\nfunction indexDoctorData(doctor) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, esClient.index({\n            index: \"doctors\",\n            id: doctor.id,\n            document: doctor\n          })];\n        case 1:\n          _a.sent();\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getDoctorsFromElastic(filters) {\n  return __awaiter(this, void 0, void 0, function () {\n    var must, query_1, body, error_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          must = [];\n          if (filters.name) {\n            must.push({\n              match: {\n                name: filters.name\n              }\n            });\n          }\n          if (filters.doctor_id) {\n            must.push({\n              match: {\n                id: filters.doctor_id\n              }\n            });\n          }\n          if (filters.specialty_id) {\n            must.push({\n              match: {\n                specialty_id: filters.specialty_id\n              }\n            });\n          }\n          if (filters.service_id) {\n            must.push({\n              match: {\n                service_ids: filters.service_id\n              }\n            });\n          }\n          if (filters.insurance_id) {\n            must.push({\n              match: {\n                insurance_id: filters.insurance_id\n              }\n            });\n          }\n          if (filters.city_id) {\n            must.push({\n              match: {\n                \"addresses.city_id\": filters.city_id\n              }\n            });\n          }\n          if (filters.minRating !== undefined || filters.maxRating !== undefined) {\n            must.push({\n              range: {\n                average_rating: {\n                  gte: filters.minRating || 0,\n                  lte: filters.maxRating || 5\n                }\n              }\n            });\n          }\n          if (filters.isPopular) {\n            must.push({\n              range: {\n                average_rating: {\n                  gte: 4\n                }\n              }\n            });\n          }\n          query_1 = must.length > 0 ? {\n            bool: {\n              must: must\n            }\n          } : {\n            match_all: {}\n          };\n          return [4 /*yield*/, esClient.search({\n            index: \"doctors\",\n            body: {\n              query: query_1\n            }\n          })];\n        case 1:\n          body = _a.sent();\n          console.log(JSON.stringify(body, null, 2));\n          return [2 /*return*/, body.hits.hits.map(function (hit) {\n            return hit._source;\n          })];\n        case 2:\n          error_1 = _a.sent();\n          console.log(JSON.stringify(error_1.meta.body, null, 2));\n          console.error(\"Elasticsearch error:\", error_1);\n          return [2 /*return*/, []];\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction addDoctor(data) {\n  return __awaiter(this, void 0, void 0, function () {\n    var password, confirmPassword, fdPassword, validPassword, saltRounds, hashedPassword, newId, result, error_2;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          password = data.password.password;\n          confirmPassword = data.password.confirmPassword;\n          fdPassword = {\n            password: password,\n            confirmPassword: confirmPassword\n          };\n          validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n          saltRounds = 10;\n          return [4 /*yield*/, bcrypt_1.default.hash(validPassword, saltRounds)];\n        case 1:\n          hashedPassword = _a.sent();\n          if (validPassword.error) {\n            throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n          }\n          newId = (0, uuid_1.v4)();\n          _a.label = 2;\n        case 2:\n          _a.trys.push([2, 4,, 5]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctors\\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\\n        VALUES(?,?,?,?,?,?,?,?,?,?)\"), {\n            values: [newId, data.first_name, data.last_name, data.email, hashedPassword, data.token_verify, data.verify_code, data.phone, new Date(), new Date()]\n          })];\n        case 3:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 4:\n          error_2 = _a.sent();\n          console.error(\"Database Error:\", error_2.message);\n          throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n        case 5:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getUserSuggestionPercentage(doctorId) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT COUNT(id) AS total_reviews,\\n      SUM(CASE WHEN recommendation = 1 THEN 1 ELSE 0 END) AS total_recommended\\n     FROM \".concat(mysql_1.coreSchema, \".doctor_reviews\\n     WHERE doctor_id = ?\"), {\n            values: [doctorId]\n          })];\n        case 1:\n          result = _a.sent();\n          if (!result.length || result[0].total_reviews === 0) return [2 /*return*/, 0];\n          return [2 /*return*/, parseFloat((result[0].total_recommended / result[0].total_reviews * 100).toFixed(2))];\n      }\n    });\n  });\n}\nfunction like(data) {\n  return __awaiter(this, void 0, void 0, function () {\n    var existingLike, totalLikes, isLiked;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n     WHERE doctor_id = ? AND patient_id = ?\"), {\n            values: [data.doctor_id, data.patient_id]\n          })];\n        case 1:\n          existingLike = _a.sent();\n          if (!(existingLike.length > 0)) return [3 /*break*/, 3];\n          // Unlike the doctor: Remove the like\n          return [4 /*yield*/, (0, mysql_1.query)(\"DELETE FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n       WHERE doctor_id = ? AND patient_id = ?\"), {\n            values: [data.doctor_id, data.patient_id]\n          })];\n        case 2:\n          // Unlike the doctor: Remove the like\n          _a.sent();\n          return [3 /*break*/, 5];\n        case 3:\n          // Like the doctor: Insert new like record\n          return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctor_likes (doctor_id, patient_id, isLike) \\n       VALUES (?, ?, ?)\"), {\n            values: [data.doctor_id, data.patient_id, 1]\n          })];\n        case 4:\n          // Like the doctor: Insert new like record\n          _a.sent();\n          _a.label = 5;\n        case 5:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT COUNT(*) AS count FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n     WHERE doctor_id = ?\"), {\n            values: [data.doctor_id]\n          })];\n        case 6:\n          totalLikes = _a.sent();\n          isLiked = totalLikes[0].count > 0 ? 1 : 0;\n          return [4 /*yield*/, (0, mysql_1.query)(\"UPDATE \".concat(mysql_1.coreSchema, \".doctors \\n     SET is_liked = ? \\n     WHERE id = ?\"), {\n            values: [isLiked, data.doctor_id]\n          })];\n        case 7:\n          _a.sent();\n          return [2 /*return*/, {\n            success: true,\n            isLiked: isLiked\n          }];\n      }\n    });\n  });\n}\nfunction getDoctoLike(patient_id) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result, error_3;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT\\n      d.*\\n        FROM \".concat(mysql_1.coreSchema, \".doctor_likes dl\\n        LEFT JOIN \").concat(mysql_1.coreSchema, \".doctors d\\n        ON dl.doctor_id = d.id\\n        WHERE dl.patient_id = ?\"), {\n            values: [patient_id]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 2:\n          error_3 = _a.sent();\n          console.log(error_3);\n          throw new response_error_1.ResponseError.InternalServer(\"Failed to get response\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getServices() {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".services\"))];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\n// export async function getMostPopularDoctors(): Promise<any> {\n//   try {\n//     const result = await query<RowDataPacket[]>(\n//       `\n//       SELECT\n//         d.*,\n//         COALESCE(ld.id, 'No Location') AS location,\n//         s.name AS specialty_name,\n//         (SELECT AVG(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS average_rating,\n//         (SELECT COUNT(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS total_ratings\n//       FROM\n//         ${coreSchema}.doctors d\n//       LEFT JOIN\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\n//       LEFT JOIN\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       HAVING\n//         total_ratings > 3\n//       ORDER BY\n//         average_rating DESC,\n//         total_ratings DESC\n//       LIMIT 10;\n//       `\n//     );\n//     return result;\n//   } catch (error) {\n//     console.log(error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction checkDoctorPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT mobile FROM \".concat(mysql_1.coreSchema, \".doctors\\n      where mobile=?\\n      \"), {\n            values: [mobile]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction updateDoctor(doctorData) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n        UPDATE \".concat(mysql_1.coreSchema, \".doctors\\n        SET name = ?\\n        WHERE id = ?\\n      \"), {\n            values: [doctorData.first_name, doctorData.id]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction recordDoctorProfileView(id) {\n  return __awaiter(this, void 0, void 0, function () {\n    var updateResult, error_4;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      UPDATE \".concat(mysql_1.coreSchema, \".doctors\\n      SET click_count = click_count + 1\\n      WHERE id = ?\\n      \"), {\n            values: [id]\n          })];\n        case 1:\n          updateResult = _a.sent();\n          return [2 /*return*/, updateResult];\n        case 2:\n          error_4 = _a.sent();\n          console.log(error_4);\n          throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction addComment(comment) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".comments\\n     (id, id, comment_text, rating)\\n         VALUES (?, ?, ?, ?)\"), {\n            values: [comment.id, comment.id, comment.comment_text, comment.rating]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction getSpecialties() {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT *\\n       FROM \".concat(mysql_1.coreSchema, \".specialties\"))];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction getSubSpecialtiesById(specialtyId) {\n  return __awaiter(this, void 0, void 0, function () {\n    var limit, offset, result, error_5;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          limit = 20;\n          offset = 0;\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT \\n        s.id AS specialty_id,\\n        s.name AS specialty_name,\\n        s.images AS specialty_image,\\n        ss.id AS sub_specialty_id,\\n        ss.sub_specialty AS sub_specialty_name\\n      FROM \".concat(mysql_1.coreSchema, \".specialties s\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".sub_specialties ss \\n      ON s.id = ss.specialty_id\\n      WHERE s.id = ? \\n      ORDER BY ss.id;\"), {\n            values: [specialtyId]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result.map(function (row) {\n            return {\n              id: row.sub_specialty_id || null,\n              name: row.sub_specialty_name || \"N/A\",\n              images: row.specialty_image || \"default_image.jpeg\"\n            };\n          })];\n        case 2:\n          error_5 = _a.sent();\n          console.error(\"Error fetching sub-specialties:\", error_5);\n          throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction filterSpecialtyById(specialty) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result, error_6;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n       SELECT \\n        d.*, \\n        COALESCE(ld.location, 'No Location') AS location,\\n        s.name AS specialty_name,\\n        (SELECT AVG(rating) \\n         FROM \".concat(mysql_1.coreSchema, \".ratings r \\n         WHERE r.id = d.id) AS average_rating\\n      FROM \\n        \").concat(mysql_1.coreSchema, \".doctors d\\n      LEFT JOIN \\n        \").concat(mysql_1.coreSchema, \".doctor_locations ld ON d.id = ld.id\\n      LEFT JOIN \\n        \").concat(mysql_1.coreSchema, \".specialties s ON d.specialty_id = s.id\\n  \\n      WHERE \\n      s.id = ?;\\n      \"), {\n            values: [specialty]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 2:\n          error_6 = _a.sent();\n          console.log(error_6);\n          throw new response_error_1.ResponseError.InternalServer(\"...\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getSuggestionsBySpecialty(specialtyId) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result, error_7;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\\n      FROM clinic_db.suggestions s\\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\\n      WHERE sp.id = ?;\\n    \", [specialtyId])];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 2:\n          error_7 = _a.sent();\n          console.log(error_7);\n          throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction filterServicesById(serviceId) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n   SELECT \\n      d.*, \\n      COALESCE(ld.location, 'No Location') AS location,\\n      s.name AS specialty_name,\\n      (SELECT AVG(rating) \\n       FROM \".concat(mysql_1.coreSchema, \".ratings r \\n       WHERE r.id = d.id) AS average_rating\\n    FROM \\n      \").concat(mysql_1.coreSchema, \".doctors d\\n    LEFT JOIN \\n      \").concat(mysql_1.coreSchema, \".locations_doctors ld ON d.id = ld.id\\n    LEFT JOIN \\n      \").concat(mysql_1.coreSchema, \".specialties s ON d.specialty_id = s.id\\n    JOIN \\n      \").concat(mysql_1.coreSchema, \".services srv  ON srv.specialty_id = s.id\\n    WHERE \\n    srv.id = ?;\\n    \"), {\n            values: [serviceId]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction existingFeedback(reviewData) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_reviews WHERE user_id = ? AND doctor_id =?\"), {\n            values: [reviewData.user_id, reviewData.doctor_id]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction insertReviews(reviewData) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result, error_8;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctor_reviews\\n        (doctor_id,\\n          user_id,\\n          comment,\\n          recommendations,\\n          rating,\\n          professional_demeanor,\\n          sufficient_time,\\n          skill,\\n          staff_behavior,\\n          clinic_condition)\\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)\"), {\n            values: [reviewData.doctor_id, reviewData.user_id, reviewData.comment, reviewData.rating, reviewData.recommendations, reviewData.ratings.professional_demeanor, reviewData.ratings.sufficient_time, reviewData.ratings.skill, reviewData.ratings.staff_behavior, reviewData.ratings.clinic_condition]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 2:\n          error_8 = _a.sent();\n          console.log(error_8);\n          throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getReviews() {\n  return __awaiter(this, void 0, void 0, function () {\n    var result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n    SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_reviews\\n    \"))];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n      }\n    });\n  });\n}\nfunction doctorSchadules(doctor_id, consultatio_types_available) {\n  return __awaiter(this, void 0, void 0, function () {\n    var queryParams, queryStr, result, error_9;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          queryParams = [doctor_id];\n          _a.label = 1;\n        case 1:\n          _a.trys.push([1, 3,, 4]);\n          queryStr = \"\\n   SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_schedules ds\\n      WHERE doctor_id = ?\\n    \");\n          if (consultatio_types_available) {\n            queryStr += \" AND ds.consultatio_types_available =?\";\n            queryParams.push(consultatio_types_available);\n          }\n          return [4 /*yield*/, (0, mysql_1.query)(queryStr, {\n            values: queryParams\n          })];\n        case 2:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 3:\n          error_9 = _a.sent();\n          console.log(error_9);\n          throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n        case 4:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction doctorScheduleTimeAvailability(schedule_id) {\n  return __awaiter(this, void 0, void 0, function () {\n    var result, error_10;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT *\\n      FROM \".concat(mysql_1.coreSchema, \".doctor_available_times \\n      WHERE schedule_id = ?;\\n      \"), {\n            values: [schedule_id]\n          })];\n        case 1:\n          result = _a.sent();\n          return [2 /*return*/, result];\n        case 2:\n          error_10 = _a.sent();\n          console.error(error_10); // Better to use console.error for errors\n          throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n  return __awaiter(this, void 0, void 0, function () {\n    var existing, appointmentResult, error_11;\n    var _a;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          _b.trys.push([0, 3, 4, 5]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT is_booked FROM \".concat(mysql_1.coreSchema, \".doctor_available_times WHERE id = ? FOR UPDATE\"), {\n            values: [doctor_schedule_id]\n          })];\n        case 1:\n          existing = _b.sent()[0];\n          if (!existing || ((_a = existing[0]) === null || _a === void 0 ? void 0 : _a.is_booked) === 1) {\n            throw new response_error_1.ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\n          }\n          return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".appointments\\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');\"), {\n            values: [patient_id, doctor_schedule_id, clinic_id, appointment_date, appointment_time]\n          })];\n        case 2:\n          appointmentResult = _b.sent();\n          return [2 /*return*/, {\n            message: \"Appointment successfuly booked\",\n            appointmentId: appointmentResult.insertId\n          }];\n        case 3:\n          error_11 = _b.sent();\n          console.error(error_11);\n          throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n        case 4:\n          console.log(\"final\");\n          return [7 /*endfinally*/];\n        case 5:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJfIiwibGFiZWwiLCJzZW50IiwidCIsInRyeXMiLCJvcHMiLCJmIiwieSIsImciLCJPYmplY3QiLCJjcmVhdGUiLCJJdGVyYXRvciIsInByb3RvdHlwZSIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsImdldERvY3RvcnNGcm9tRWxhc3RpYyIsImFkZERvY3RvciIsImdldFVzZXJTdWdnZXN0aW9uUGVyY2VudGFnZSIsImxpa2UiLCJnZXREb2N0b0xpa2UiLCJnZXRTZXJ2aWNlcyIsImNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHMiLCJ1cGRhdGVEb2N0b3IiLCJyZWNvcmREb2N0b3JQcm9maWxlVmlldyIsImFkZENvbW1lbnQiLCJnZXRTcGVjaWFsdGllcyIsImdldFN1YlNwZWNpYWx0aWVzQnlJZCIsImZpbHRlclNwZWNpYWx0eUJ5SWQiLCJnZXRTdWdnZXN0aW9uc0J5U3BlY2lhbHR5IiwiZmlsdGVyU2VydmljZXNCeUlkIiwiZXhpc3RpbmdGZWVkYmFjayIsImluc2VydFJldmlld3MiLCJnZXRSZXZpZXdzIiwiZG9jdG9yU2NoYWR1bGVzIiwiZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5IiwiYm9va2VkIiwiZWxhc3RpY3NlYXJjaF8xIiwicmVxdWlyZSIsIm15c3FsXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwic2NoZW1hXzEiLCJiY3J5cHRfMSIsInV1aWRfMSIsImVzQ2xpZW50IiwiQ2xpZW50Iiwibm9kZSIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiaW5kZXhEb2N0b3JEYXRhIiwiZG9jdG9yIiwiX2EiLCJpbmRleCIsImlkIiwiZG9jdW1lbnQiLCJmaWx0ZXJzIiwibXVzdCIsInF1ZXJ5XzEiLCJlcnJvcl8xIiwibmFtZSIsIm1hdGNoIiwiZG9jdG9yX2lkIiwic3BlY2lhbHR5X2lkIiwic2VydmljZV9pZCIsInNlcnZpY2VfaWRzIiwiaW5zdXJhbmNlX2lkIiwiY2l0eV9pZCIsIm1pblJhdGluZyIsInVuZGVmaW5lZCIsIm1heFJhdGluZyIsInJhbmdlIiwiYXZlcmFnZV9yYXRpbmciLCJndGUiLCJsdGUiLCJpc1BvcHVsYXIiLCJib29sIiwibWF0Y2hfYWxsIiwic2VhcmNoIiwicXVlcnkiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImhpdHMiLCJtYXAiLCJoaXQiLCJfc291cmNlIiwibWV0YSIsImVycm9yIiwiZGF0YSIsImNvbmZpcm1QYXNzd29yZCIsImZkUGFzc3dvcmQiLCJ2YWxpZFBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2hlZFBhc3N3b3JkIiwibmV3SWQiLCJlcnJvcl8yIiwiZG9jdG9yU2NoZW1hIiwidmFsaWRhdGVTeW5jQXQiLCJkZWZhdWx0IiwiaGFzaCIsIlJlc3BvbnNlRXJyb3IiLCJVbmF1dGhvcml6ZWQiLCJ2NCIsImNvbmNhdCIsImNvcmVTY2hlbWEiLCJ2YWx1ZXMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJ0b2tlbl92ZXJpZnkiLCJ2ZXJpZnlfY29kZSIsInBob25lIiwiRGF0ZSIsIm1lc3NhZ2UiLCJJbnRlcm5hbFNlcnZlciIsImRvY3RvcklkIiwidG90YWxfcmV2aWV3cyIsInBhcnNlRmxvYXQiLCJ0b3RhbF9yZWNvbW1lbmRlZCIsInRvRml4ZWQiLCJleGlzdGluZ0xpa2UiLCJ0b3RhbExpa2VzIiwiaXNMaWtlZCIsInBhdGllbnRfaWQiLCJjb3VudCIsInN1Y2Nlc3MiLCJlcnJvcl8zIiwibW9iaWxlIiwiZG9jdG9yRGF0YSIsInVwZGF0ZVJlc3VsdCIsImVycm9yXzQiLCJjb21tZW50IiwiY29tbWVudF90ZXh0IiwicmF0aW5nIiwic3BlY2lhbHR5SWQiLCJsaW1pdCIsIm9mZnNldCIsImVycm9yXzUiLCJyb3ciLCJzdWJfc3BlY2lhbHR5X2lkIiwic3ViX3NwZWNpYWx0eV9uYW1lIiwiaW1hZ2VzIiwic3BlY2lhbHR5X2ltYWdlIiwic3BlY2lhbHR5IiwiZXJyb3JfNiIsImVycm9yXzciLCJzZXJ2aWNlSWQiLCJyZXZpZXdEYXRhIiwidXNlcl9pZCIsImVycm9yXzgiLCJyZWNvbW1lbmRhdGlvbnMiLCJyYXRpbmdzIiwicHJvZmVzc2lvbmFsX2RlbWVhbm9yIiwic3VmZmljaWVudF90aW1lIiwic2tpbGwiLCJzdGFmZl9iZWhhdmlvciIsImNsaW5pY19jb25kaXRpb24iLCJjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUiLCJxdWVyeVBhcmFtcyIsInF1ZXJ5U3RyIiwiZXJyb3JfOSIsInNjaGVkdWxlX2lkIiwiZXJyb3JfMTAiLCJkb2N0b3Jfc2NoZWR1bGVfaWQiLCJjbGluaWNfaWQiLCJhcHBvaW50bWVudF9kYXRlIiwiYXBwb2ludG1lbnRfdGltZSIsImV4aXN0aW5nIiwiYXBwb2ludG1lbnRSZXN1bHQiLCJlcnJvcl8xMSIsIl9iIiwiaXNfYm9va2VkIiwiQmFkUmVxdWVzdCIsImFwcG9pbnRtZW50SWQiLCJpbnNlcnRJZCJdLCJzb3VyY2VSb290IjoiRDpcXEFsaVxcUHJvamVjdHNcXGNsaW5pY2FsbF9hbGlcXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxkb2N0b3JzXFwiLCJzb3VyY2VzIjpbImRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0RG9jdG9yc0Zyb21FbGFzdGljID0gZ2V0RG9jdG9yc0Zyb21FbGFzdGljO1xuZXhwb3J0cy5hZGREb2N0b3IgPSBhZGREb2N0b3I7XG5leHBvcnRzLmdldFVzZXJTdWdnZXN0aW9uUGVyY2VudGFnZSA9IGdldFVzZXJTdWdnZXN0aW9uUGVyY2VudGFnZTtcbmV4cG9ydHMubGlrZSA9IGxpa2U7XG5leHBvcnRzLmdldERvY3RvTGlrZSA9IGdldERvY3RvTGlrZTtcbmV4cG9ydHMuZ2V0U2VydmljZXMgPSBnZXRTZXJ2aWNlcztcbmV4cG9ydHMuY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyA9IGNoZWNrRG9jdG9yUGhvbmVOdW1iZXJFeGlzdHM7XG5leHBvcnRzLnVwZGF0ZURvY3RvciA9IHVwZGF0ZURvY3RvcjtcbmV4cG9ydHMucmVjb3JkRG9jdG9yUHJvZmlsZVZpZXcgPSByZWNvcmREb2N0b3JQcm9maWxlVmlldztcbmV4cG9ydHMuYWRkQ29tbWVudCA9IGFkZENvbW1lbnQ7XG5leHBvcnRzLmdldFNwZWNpYWx0aWVzID0gZ2V0U3BlY2lhbHRpZXM7XG5leHBvcnRzLmdldFN1YlNwZWNpYWx0aWVzQnlJZCA9IGdldFN1YlNwZWNpYWx0aWVzQnlJZDtcbmV4cG9ydHMuZmlsdGVyU3BlY2lhbHR5QnlJZCA9IGZpbHRlclNwZWNpYWx0eUJ5SWQ7XG5leHBvcnRzLmdldFN1Z2dlc3Rpb25zQnlTcGVjaWFsdHkgPSBnZXRTdWdnZXN0aW9uc0J5U3BlY2lhbHR5O1xuZXhwb3J0cy5maWx0ZXJTZXJ2aWNlc0J5SWQgPSBmaWx0ZXJTZXJ2aWNlc0J5SWQ7XG5leHBvcnRzLmV4aXN0aW5nRmVlZGJhY2sgPSBleGlzdGluZ0ZlZWRiYWNrO1xuZXhwb3J0cy5pbnNlcnRSZXZpZXdzID0gaW5zZXJ0UmV2aWV3cztcbmV4cG9ydHMuZ2V0UmV2aWV3cyA9IGdldFJldmlld3M7XG5leHBvcnRzLmRvY3RvclNjaGFkdWxlcyA9IGRvY3RvclNjaGFkdWxlcztcbmV4cG9ydHMuZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5ID0gZG9jdG9yU2NoZWR1bGVUaW1lQXZhaWxhYmlsaXR5O1xuZXhwb3J0cy5ib29rZWQgPSBib29rZWQ7XG52YXIgZWxhc3RpY3NlYXJjaF8xID0gcmVxdWlyZShcIkBlbGFzdGljL2VsYXN0aWNzZWFyY2hcIik7XG52YXIgbXlzcWxfMSA9IHJlcXVpcmUoXCIuLi8uLi9iaW4vbXlzcWxcIik7XG52YXIgcmVzcG9uc2VfZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCIpO1xudmFyIHNjaGVtYV8xID0gcmVxdWlyZShcIi4vc2NoZW1hXCIpO1xudmFyIGJjcnlwdF8xID0gcmVxdWlyZShcImJjcnlwdFwiKTtcbnZhciB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbi8vIGNvbnN0IGVzQ2xpZW50ID0gbmV3IENsaWVudCh7IG5vZGU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVJMIH0pO1xudmFyIGVzQ2xpZW50ID0gbmV3IGVsYXN0aWNzZWFyY2hfMS5DbGllbnQoe1xuICAgIG5vZGU6IFwiaHR0cDovL2xvY2FsaG9zdDo5MjAwXCIsXG4gICAgYXV0aDogeyB1c2VybmFtZTogXCJlbGFzdGljXCIsIHBhc3N3b3JkOiBcIkBBbGkwMDExOTE0NTA1XCIgfSxcbn0pO1xuZnVuY3Rpb24gaW5kZXhEb2N0b3JEYXRhKGRvY3Rvcikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZXNDbGllbnQuaW5kZXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IFwiZG9jdG9yc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY3Rvci5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBkb2N0b3IsXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdldERvY3RvcnNGcm9tRWxhc3RpYyhmaWx0ZXJzKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbXVzdCwgcXVlcnlfMSwgYm9keSwgZXJyb3JfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgbXVzdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXN0LnB1c2goeyBtYXRjaDogeyBuYW1lOiBmaWx0ZXJzLm5hbWUgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5kb2N0b3JfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11c3QucHVzaCh7IG1hdGNoOiB7IGlkOiBmaWx0ZXJzLmRvY3Rvcl9pZCB9IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJzLnNwZWNpYWx0eV9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdC5wdXNoKHsgbWF0Y2g6IHsgc3BlY2lhbHR5X2lkOiBmaWx0ZXJzLnNwZWNpYWx0eV9pZCB9IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJzLnNlcnZpY2VfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11c3QucHVzaCh7IG1hdGNoOiB7IHNlcnZpY2VfaWRzOiBmaWx0ZXJzLnNlcnZpY2VfaWQgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5pbnN1cmFuY2VfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11c3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IHsgaW5zdXJhbmNlX2lkOiBmaWx0ZXJzLmluc3VyYW5jZV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcnMuY2l0eV9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogeyBcImFkZHJlc3Nlcy5jaXR5X2lkXCI6IGZpbHRlcnMuY2l0eV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcnMubWluUmF0aW5nICE9PSB1bmRlZmluZWQgfHwgZmlsdGVycy5tYXhSYXRpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmVyYWdlX3JhdGluZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3RlOiBmaWx0ZXJzLm1pblJhdGluZyB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbHRlOiBmaWx0ZXJzLm1heFJhdGluZyB8fCA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5pc1BvcHVsYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11c3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZV9yYXRpbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd0ZTogNCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlfMSA9IG11c3QubGVuZ3RoID4gMCA/IHsgYm9vbDogeyBtdXN0OiBtdXN0IH0gfSA6IHsgbWF0Y2hfYWxsOiB7fSB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlc0NsaWVudC5zZWFyY2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBcImRvY3RvcnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBib2R5ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBib2R5LmhpdHMuaGl0cy5tYXAoZnVuY3Rpb24gKGhpdCkgeyByZXR1cm4gaGl0Ll9zb3VyY2U7IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yXzEubWV0YS5ib2R5LCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbGFzdGljc2VhcmNoIGVycm9yOlwiLCBlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGREb2N0b3IoZGF0YSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGZkUGFzc3dvcmQsIHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMsIGhhc2hlZFBhc3N3b3JkLCBuZXdJZCwgcmVzdWx0LCBlcnJvcl8yO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCA9IGRhdGEucGFzc3dvcmQucGFzc3dvcmQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1QYXNzd29yZCA9IGRhdGEucGFzc3dvcmQuY29uZmlybVBhc3N3b3JkO1xuICAgICAgICAgICAgICAgICAgICBmZFBhc3N3b3JkID0geyBwYXNzd29yZDogcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZDogY29uZmlybVBhc3N3b3JkIH07XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkUGFzc3dvcmQgPSBzY2hlbWFfMS5kb2N0b3JTY2hlbWEudmFsaWRhdGVTeW5jQXQoXCJjb25maXJtUGFzc3dvcmRcIiwgZmRQYXNzd29yZCk7XG4gICAgICAgICAgICAgICAgICAgIHNhbHRSb3VuZHMgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYmNyeXB0XzEuZGVmYXVsdC5oYXNoKHZhbGlkUGFzc3dvcmQsIHNhbHRSb3VuZHMpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGhhc2hlZFBhc3N3b3JkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRQYXNzd29yZC5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5VbmF1dGhvcml6ZWQoXCJQYXNzd29yZCBpcyBpbnZhbGlkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld0lkID0gKDAsIHV1aWRfMS52NCkoKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA0LCAsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiSU5TRVJUIElOVE8gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yc1xcbiAgICAgICAgKGlkLGZpcnN0X25hbWUsbGFzdF9uYW1lLGVtYWlsLHBhc3N3b3JkLHRva2VuX3ZlcmlmeSx2ZXJpZnlfY29kZSxwaG9uZSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQpXFxuICAgICAgICBWQUxVRVMoPyw/LD8sPyw/LD8sPyw/LD8sPylcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZmlyc3RfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRva2VuX3ZlcmlmeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS52ZXJpZnlfY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5waG9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBFcnJvcjpcIiwgZXJyb3JfMi5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBpbnNlcnQgY2xpbmljLlwiKTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRVc2VyU3VnZ2VzdGlvblBlcmNlbnRhZ2UoZG9jdG9ySWQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlNFTEVDVCBDT1VOVChpZCkgQVMgdG90YWxfcmV2aWV3cyxcXG4gICAgICBTVU0oQ0FTRSBXSEVOIHJlY29tbWVuZGF0aW9uID0gMSBUSEVOIDEgRUxTRSAwIEVORCkgQVMgdG90YWxfcmVjb21tZW5kZWRcXG4gICAgIEZST00gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX3Jldmlld3NcXG4gICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID9cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW2RvY3RvcklkXSxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5sZW5ndGggfHwgcmVzdWx0WzBdLnRvdGFsX3Jldmlld3MgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwYXJzZUZsb2F0KCgocmVzdWx0WzBdLnRvdGFsX3JlY29tbWVuZGVkIC8gcmVzdWx0WzBdLnRvdGFsX3Jldmlld3MpICogMTAwKS50b0ZpeGVkKDIpKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gbGlrZShkYXRhKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXhpc3RpbmdMaWtlLCB0b3RhbExpa2VzLCBpc0xpa2VkO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJTRUxFQ1QgKiBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3Rvcl9saWtlcyBcXG4gICAgIFdIRVJFIGRvY3Rvcl9pZCA9ID8gQU5EIHBhdGllbnRfaWQgPSA/XCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkXSxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdMaWtlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShleGlzdGluZ0xpa2UubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAvLyBVbmxpa2UgdGhlIGRvY3RvcjogUmVtb3ZlIHRoZSBsaWtlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIkRFTEVURSBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3Rvcl9saWtlcyBcXG4gICAgICAgV0hFUkUgZG9jdG9yX2lkID0gPyBBTkQgcGF0aWVudF9pZCA9ID9cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIC8vIFVubGlrZSB0aGUgZG9jdG9yOiBSZW1vdmUgdGhlIGxpa2VcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IFxuICAgICAgICAgICAgICAgIC8vIExpa2UgdGhlIGRvY3RvcjogSW5zZXJ0IG5ldyBsaWtlIHJlY29yZFxuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIklOU0VSVCBJTlRPIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3Rvcl9saWtlcyAoZG9jdG9yX2lkLCBwYXRpZW50X2lkLCBpc0xpa2UpIFxcbiAgICAgICBWQUxVRVMgKD8sID8sID8pXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtkYXRhLmRvY3Rvcl9pZCwgZGF0YS5wYXRpZW50X2lkLCAxXSxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgLy8gTGlrZSB0aGUgZG9jdG9yOiBJbnNlcnQgbmV3IGxpa2UgcmVjb3JkXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiU0VMRUNUIENPVU5UKCopIEFTIGNvdW50IEZST00gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX2xpa2VzIFxcbiAgICAgV0hFUkUgZG9jdG9yX2lkID0gP1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbZGF0YS5kb2N0b3JfaWRdLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICB0b3RhbExpa2VzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpc0xpa2VkID0gdG90YWxMaWtlc1swXS5jb3VudCA+IDAgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiVVBEQVRFIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3RvcnMgXFxuICAgICBTRVQgaXNfbGlrZWQgPSA/IFxcbiAgICAgV0hFUkUgaWQgPSA/XCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbaXNMaWtlZCwgZGF0YS5kb2N0b3JfaWRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgeyBzdWNjZXNzOiB0cnVlLCBpc0xpa2VkOiBpc0xpa2VkIH1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdldERvY3RvTGlrZShwYXRpZW50X2lkKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0LCBlcnJvcl8zO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJcXG4gICAgICBTRUxFQ1RcXG4gICAgICBkLipcXG4gICAgICAgIEZST00gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX2xpa2VzIGRsXFxuICAgICAgICBMRUZUIEpPSU4gXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3RvcnMgZFxcbiAgICAgICAgT04gZGwuZG9jdG9yX2lkID0gZC5pZFxcbiAgICAgICAgV0hFUkUgZGwucGF0aWVudF9pZCA9ID9cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtwYXRpZW50X2lkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl8zID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcl8zKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkZhaWxlZCB0byBnZXQgcmVzcG9uc2VcIik7XG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0U2VydmljZXMoKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJTRUxFQ1QgKiBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLnNlcnZpY2VzXCIpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb3N0UG9wdWxhckRvY3RvcnMoKTogUHJvbWlzZTxhbnk+IHtcbi8vICAgdHJ5IHtcbi8vICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuLy8gICAgICAgYFxuLy8gICAgICAgU0VMRUNUXG4vLyAgICAgICAgIGQuKixcbi8vICAgICAgICAgQ09BTEVTQ0UobGQuaWQsICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxuLy8gICAgICAgICBzLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXG4vLyAgICAgICAgIChTRUxFQ1QgQVZHKHIucmF0aW5nKVxuLy8gICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgclxuLy8gICAgICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIGF2ZXJhZ2VfcmF0aW5nLFxuLy8gICAgICAgICAoU0VMRUNUIENPVU5UKHIucmF0aW5nKVxuLy8gICAgICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnJhdGluZ3MgclxuLy8gICAgICAgICAgV0hFUkUgci5pZCA9IGQuaWQpIEFTIHRvdGFsX3JhdGluZ3Ncbi8vICAgICAgIEZST01cbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5kb2N0b3JzIGRcbi8vICAgICAgIExFRlQgSk9JTlxuLy8gICAgICAgICAke2NvcmVTY2hlbWF9LmRvY3Rvcl9sb2NhdGlvbnMgbGQgT04gZC5pZCA9IGxkLmlkXG4vLyAgICAgICBMRUZUIEpPSU5cbi8vICAgICAgICAgJHtjb3JlU2NoZW1hfS5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxuLy8gICAgICAgSEFWSU5HXG4vLyAgICAgICAgIHRvdGFsX3JhdGluZ3MgPiAzXG4vLyAgICAgICBPUkRFUiBCWVxuLy8gICAgICAgICBhdmVyYWdlX3JhdGluZyBERVNDLFxuLy8gICAgICAgICB0b3RhbF9yYXRpbmdzIERFU0Ncbi8vICAgICAgIExJTUlUIDEwO1xuLy8gICAgICAgYFxuLy8gICAgICk7XG4vLyAgICAgcmV0dXJuIHJlc3VsdDtcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4vLyAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLlwiKTtcbi8vICAgfVxuLy8gfVxuZnVuY3Rpb24gY2hlY2tEb2N0b3JQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgICAgIFNFTEVDVCBtb2JpbGUgRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JzXFxuICAgICAgd2hlcmUgbW9iaWxlPT9cXG4gICAgICBcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW21vYmlsZV0sXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gdXBkYXRlRG9jdG9yKGRvY3RvckRhdGEpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgICAgICAgVVBEQVRFIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3RvcnNcXG4gICAgICAgIFNFVCBuYW1lID0gP1xcbiAgICAgICAgV0hFUkUgaWQgPSA/XFxuICAgICAgXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtkb2N0b3JEYXRhLmZpcnN0X25hbWUsIGRvY3RvckRhdGEuaWRdLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlY29yZERvY3RvclByb2ZpbGVWaWV3KGlkKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXBkYXRlUmVzdWx0LCBlcnJvcl80O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJcXG4gICAgICBVUERBVEUgXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yc1xcbiAgICAgIFNFVCBjbGlja19jb3VudCA9IGNsaWNrX2NvdW50ICsgMVxcbiAgICAgIFdIRVJFIGlkID0gP1xcbiAgICAgIFwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW2lkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVwZGF0ZVJlc3VsdF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl80ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcl80KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGFkZENvbW1lbnQoY29tbWVudCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiSU5TRVJUIElOVE8gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuY29tbWVudHNcXG4gICAgIChpZCwgaWQsIGNvbW1lbnRfdGV4dCwgcmF0aW5nKVxcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPylcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW2NvbW1lbnQuaWQsIGNvbW1lbnQuaWQsIGNvbW1lbnQuY29tbWVudF90ZXh0LCBjb21tZW50LnJhdGluZ10sXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0U3BlY2lhbHRpZXMoKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJTRUxFQ1QgKlxcbiAgICAgICBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLnNwZWNpYWx0aWVzXCIpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdldFN1YlNwZWNpYWx0aWVzQnlJZChzcGVjaWFsdHlJZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpbWl0LCBvZmZzZXQsIHJlc3VsdCwgZXJyb3JfNTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgbGltaXQgPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiU0VMRUNUIFxcbiAgICAgICAgcy5pZCBBUyBzcGVjaWFsdHlfaWQsXFxuICAgICAgICBzLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXFxuICAgICAgICBzLmltYWdlcyBBUyBzcGVjaWFsdHlfaW1hZ2UsXFxuICAgICAgICBzcy5pZCBBUyBzdWJfc3BlY2lhbHR5X2lkLFxcbiAgICAgICAgc3Muc3ViX3NwZWNpYWx0eSBBUyBzdWJfc3BlY2lhbHR5X25hbWVcXG4gICAgICBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLnNwZWNpYWx0aWVzIHNcXG4gICAgICBMRUZUIEpPSU4gXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLnN1Yl9zcGVjaWFsdGllcyBzcyBcXG4gICAgICBPTiBzLmlkID0gc3Muc3BlY2lhbHR5X2lkXFxuICAgICAgV0hFUkUgcy5pZCA9ID8gXFxuICAgICAgT1JERVIgQlkgc3MuaWQ7XCIpLCB7IHZhbHVlczogW3NwZWNpYWx0eUlkXSB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQubWFwKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJvdy5zdWJfc3BlY2lhbHR5X2lkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm93LnN1Yl9zcGVjaWFsdHlfbmFtZSB8fCBcIk4vQVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlczogcm93LnNwZWNpYWx0eV9pbWFnZSB8fCBcImRlZmF1bHRfaW1hZ2UuanBlZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzUgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdWItc3BlY2lhbHRpZXM6XCIsIGVycm9yXzUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgcmVzcG9uc2VfZXJyb3JfMS5SZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIik7XG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZmlsdGVyU3BlY2lhbHR5QnlJZChzcGVjaWFsdHkpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQsIGVycm9yXzY7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgICAgICBTRUxFQ1QgXFxuICAgICAgICBkLiosIFxcbiAgICAgICAgQ09BTEVTQ0UobGQubG9jYXRpb24sICdObyBMb2NhdGlvbicpIEFTIGxvY2F0aW9uLFxcbiAgICAgICAgcy5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxcbiAgICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcXG4gICAgICAgICBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLnJhdGluZ3MgciBcXG4gICAgICAgICBXSEVSRSByLmlkID0gZC5pZCkgQVMgYXZlcmFnZV9yYXRpbmdcXG4gICAgICBGUk9NIFxcbiAgICAgICAgXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3RvcnMgZFxcbiAgICAgIExFRlQgSk9JTiBcXG4gICAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JfbG9jYXRpb25zIGxkIE9OIGQuaWQgPSBsZC5pZFxcbiAgICAgIExFRlQgSk9JTiBcXG4gICAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxcbiAgXFxuICAgICAgV0hFUkUgXFxuICAgICAgcy5pZCA9ID87XFxuICAgICAgXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbc3BlY2lhbHR5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl82ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcl82KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0J5U3BlY2lhbHR5KHNwZWNpYWx0eUlkKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0LCBlcnJvcl83O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJcXG4gICAgICBTRUxFQ1Qgcy5pZCBBUyBzdWdnZXN0aW9uX2lkLCBzLnRpdGxlLCBzLmRlc2NyaXB0aW9uLCBzcy5uYW1lIEFTIHN1Yl9zcGVjaWFsdHlfbmFtZVxcbiAgICAgIEZST00gY2xpbmljX2RiLnN1Z2dlc3Rpb25zIHNcXG4gICAgICBKT0lOIGNsaW5pY19kYi5zdWJfc3BlY2lhbHRpZXMgc3MgT04gcy5zdWJfc3BlY2lhbHR5X2lkID0gc3MuaWRcXG4gICAgICBKT0lOIGNsaW5pY19kYi5zcGVjaWFsdGllcyBzcCBPTiBzcy5zcGVjaWFsdHlfaWQgPSBzcC5pZFxcbiAgICAgIFdIRVJFIHNwLmlkID0gPztcXG4gICAgXCIsIFtzcGVjaWFsdHlJZF0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl83ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcl83KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuXCIpO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpbHRlclNlcnZpY2VzQnlJZChzZXJ2aWNlSWQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgIFNFTEVDVCBcXG4gICAgICBkLiosIFxcbiAgICAgIENPQUxFU0NFKGxkLmxvY2F0aW9uLCAnTm8gTG9jYXRpb24nKSBBUyBsb2NhdGlvbixcXG4gICAgICBzLm5hbWUgQVMgc3BlY2lhbHR5X25hbWUsXFxuICAgICAgKFNFTEVDVCBBVkcocmF0aW5nKSBcXG4gICAgICAgRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5yYXRpbmdzIHIgXFxuICAgICAgIFdIRVJFIHIuaWQgPSBkLmlkKSBBUyBhdmVyYWdlX3JhdGluZ1xcbiAgICBGUk9NIFxcbiAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JzIGRcXG4gICAgTEVGVCBKT0lOIFxcbiAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5sb2NhdGlvbnNfZG9jdG9ycyBsZCBPTiBkLmlkID0gbGQuaWRcXG4gICAgTEVGVCBKT0lOIFxcbiAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5zcGVjaWFsdGllcyBzIE9OIGQuc3BlY2lhbHR5X2lkID0gcy5pZFxcbiAgICBKT0lOIFxcbiAgICAgIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5zZXJ2aWNlcyBzcnYgIE9OIHNydi5zcGVjaWFsdHlfaWQgPSBzLmlkXFxuICAgIFdIRVJFIFxcbiAgICBzcnYuaWQgPSA/O1xcbiAgICBcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW3NlcnZpY2VJZF0sXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZXhpc3RpbmdGZWVkYmFjayhyZXZpZXdEYXRhKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJTRUxFQ1QgKiBGUk9NIFwiLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3Rvcl9yZXZpZXdzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBkb2N0b3JfaWQgPT9cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW3Jldmlld0RhdGEudXNlcl9pZCwgcmV2aWV3RGF0YS5kb2N0b3JfaWRdLFxuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGluc2VydFJldmlld3MocmV2aWV3RGF0YSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCwgZXJyb3JfODtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiSU5TRVJUIElOVE8gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX3Jldmlld3NcXG4gICAgICAgIChkb2N0b3JfaWQsXFxuICAgICAgICAgIHVzZXJfaWQsXFxuICAgICAgICAgIGNvbW1lbnQsXFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucyxcXG4gICAgICAgICAgcmF0aW5nLFxcbiAgICAgICAgICBwcm9mZXNzaW9uYWxfZGVtZWFub3IsXFxuICAgICAgICAgIHN1ZmZpY2llbnRfdGltZSxcXG4gICAgICAgICAgc2tpbGwsXFxuICAgICAgICAgIHN0YWZmX2JlaGF2aW9yLFxcbiAgICAgICAgICBjbGluaWNfY29uZGl0aW9uKVxcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LD8pXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0RhdGEuZG9jdG9yX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdEYXRhLnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0RhdGEuY29tbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0RhdGEucmVjb21tZW5kYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3MucHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3Muc3VmZmljaWVudF90aW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdEYXRhLnJhdGluZ3Muc2tpbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld0RhdGEucmF0aW5ncy5zdGFmZl9iZWhhdmlvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3RGF0YS5yYXRpbmdzLmNsaW5pY19jb25kaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl84ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcl84KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHJlc3BvbnNlX2Vycm9yXzEuUmVzcG9uc2VFcnJvci5JbnRlcm5hbFNlcnZlcihcIkludGVybmFsIHNlcnZlciBFcnJvclwiKTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRSZXZpZXdzKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiXFxuICAgIFNFTEVDVCAqIEZST00gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX3Jldmlld3NcXG4gICAgXCIpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGRvY3RvclNjaGFkdWxlcyhkb2N0b3JfaWQsIGNvbnN1bHRhdGlvX3R5cGVzX2F2YWlsYWJsZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zLCBxdWVyeVN0ciwgcmVzdWx0LCBlcnJvcl85O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyA9IFtkb2N0b3JfaWRdO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0ciA9IFwiXFxuICAgU0VMRUNUICogRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3Jfc2NoZWR1bGVzIGRzXFxuICAgICAgV0hFUkUgZG9jdG9yX2lkID0gP1xcbiAgICBcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyICs9IFwiIEFORCBkcy5jb25zdWx0YXRpb190eXBlc19hdmFpbGFibGUgPT9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goY29uc3VsdGF0aW9fdHlwZXNfYXZhaWxhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkocXVlcnlTdHIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzkgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yXzkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgcmVzcG9uc2VfZXJyb3JfMS5SZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgc2VydmVyIEVycm9yXCIpO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGRvY3RvclNjaGVkdWxlVGltZUF2YWlsYWJpbGl0eShzY2hlZHVsZV9pZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCwgZXJyb3JfMTA7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgICAgIFNFTEVDVCAqXFxuICAgICAgRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JfYXZhaWxhYmxlX3RpbWVzIFxcbiAgICAgIFdIRVJFIHNjaGVkdWxlX2lkID0gPztcXG4gICAgICBcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtzY2hlZHVsZV9pZF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfMTAgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JfMTApOyAvLyBCZXR0ZXIgdG8gdXNlIGNvbnNvbGUuZXJyb3IgZm9yIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgcmVzcG9uc2VfZXJyb3JfMS5SZXNwb25zZUVycm9yLkludGVybmFsU2VydmVyKFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGJvb2tlZChkb2N0b3Jfc2NoZWR1bGVfaWQsIHBhdGllbnRfaWQsIGNsaW5pY19pZCwgYXBwb2ludG1lbnRfZGF0ZSwgYXBwb2ludG1lbnRfdGltZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGV4aXN0aW5nLCBhcHBvaW50bWVudFJlc3VsdCwgZXJyb3JfMTE7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFswLCAzLCA0LCA1XSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlNFTEVDVCBpc19ib29rZWQgRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JfYXZhaWxhYmxlX3RpbWVzIFdIRVJFIGlkID0gPyBGT1IgVVBEQVRFXCIpLCB7IHZhbHVlczogW2RvY3Rvcl9zY2hlZHVsZV9pZF0gfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSAoX2Iuc2VudCgpKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZyB8fCAoKF9hID0gZXhpc3RpbmdbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc19ib29rZWQpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgcmVzcG9uc2VfZXJyb3JfMS5SZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJEb2N0b3Igc2NoZWR1bGUgaXMgYWxyZWRheSBib29va2VkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgbXlzcWxfMS5xdWVyeSkoXCJJTlNFUlQgSU5UTyBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5hcHBvaW50bWVudHNcXG4gICAgICAocGF0aWVudF9pZCxkb2N0b3Jfc2NoZWR1bGVfaWQsY2xpbmljX2lkLGFwcG9pbnRtZW50X2RhdGUsYXBwb2ludG1lbnRfdGltZSxzdGF0dXMpXFxuICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCAnU2NoZWR1bGVkJyk7XCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3Rvcl9zY2hlZHVsZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpbmljX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBvaW50bWVudF9kYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBvaW50bWVudF90aW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBhcHBvaW50bWVudFJlc3VsdCA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFwcG9pbnRtZW50IHN1Y2Nlc3NmdWx5IGJvb2tlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50SWQ6IGFwcG9pbnRtZW50UmVzdWx0Lmluc2VydElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl8xMSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcl8xMSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyByZXNwb25zZV9lcnJvcl8xLlJlc3BvbnNlRXJyb3IuSW50ZXJuYWxTZXJ2ZXIoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbmFsXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixJQUFJQSxTQUFTLEdBQUksSUFBSSxJQUFJLElBQUksQ0FBQ0EsU0FBUyxJQUFLLFVBQVVDLE9BQU8sRUFBRUMsVUFBVSxFQUFFQyxDQUFDLEVBQUVDLFNBQVMsRUFBRTtFQUNyRixTQUFTQyxLQUFLQSxDQUFDQyxLQUFLLEVBQUU7SUFBRSxPQUFPQSxLQUFLLFlBQVlILENBQUMsR0FBR0csS0FBSyxHQUFHLElBQUlILENBQUMsQ0FBQyxVQUFVSSxPQUFPLEVBQUU7TUFBRUEsT0FBTyxDQUFDRCxLQUFLLENBQUM7SUFBRSxDQUFDLENBQUM7RUFBRTtFQUMzRyxPQUFPLEtBQUtILENBQUMsS0FBS0EsQ0FBQyxHQUFHSyxPQUFPLENBQUMsRUFBRSxVQUFVRCxPQUFPLEVBQUVFLE1BQU0sRUFBRTtJQUN2RCxTQUFTQyxTQUFTQSxDQUFDSixLQUFLLEVBQUU7TUFBRSxJQUFJO1FBQUVLLElBQUksQ0FBQ1AsU0FBUyxDQUFDUSxJQUFJLENBQUNOLEtBQUssQ0FBQyxDQUFDO01BQUUsQ0FBQyxDQUFDLE9BQU9PLENBQUMsRUFBRTtRQUFFSixNQUFNLENBQUNJLENBQUMsQ0FBQztNQUFFO0lBQUU7SUFDMUYsU0FBU0MsUUFBUUEsQ0FBQ1IsS0FBSyxFQUFFO01BQUUsSUFBSTtRQUFFSyxJQUFJLENBQUNQLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQ0UsS0FBSyxDQUFDLENBQUM7TUFBRSxDQUFDLENBQUMsT0FBT08s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","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","Object","create","Iterator","prototype","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","defineProperty","exports","getDoctorsFromElastic","addDoctor","getUserSuggestionPercentage","like","getDoctoLike","getServices","checkDoctorPhoneNumberExists","updateDoctor","recordDoctorProfileView","addComment","getSpecialties","getSubSpecialtiesById","filterSpecialtyById","getSuggestionsBySpecialty","filterServicesById","existingFeedback","insertReviews","getReviews","doctorSchadules","doctorScheduleTimeAvailability","booked","elasticsearch_1","require","mysql_1","response_error_1","schema_1","bcrypt_1","uuid_1","esClient","Client","node","auth","username","password","indexDoctorData","doctor","_a","index","id","document","filters","must","query_1","error_1","name","match","doctor_id","specialty_id","service_id","service_ids","insurance_id","city_id","minRating","undefined","maxRating","range","average_rating","gte","lte","isPopular","bool","match_all","search","query","console","log","JSON","stringify","hits","map","hit","_source","meta","error","data","confirmPassword","fdPassword","validPassword","saltRounds","hashedPassword","newId","error_2","doctorSchema","validateSyncAt","default","hash","ResponseError","Unauthorized","v4","concat","coreSchema","values","first_name","last_name","email","token_verify","verify_code","phone","Date","message","InternalServer","doctorId","total_reviews","parseFloat","total_recommended","toFixed","existingLike","totalLikes","isLiked","patient_id","count","success","error_3","mobile","doctorData","updateResult","error_4","comment","comment_text","rating","specialtyId","limit","offset","error_5","row","sub_specialty_id","sub_specialty_name","images","specialty_image","specialty","error_6","error_7","serviceId","reviewData","user_id","error_8","recommendations","ratings","professional_demeanor","sufficient_time","skill","staff_behavior","clinic_condition","consultatio_types_available","queryParams","queryStr","error_9","schedule_id","error_10","doctor_schedule_id","clinic_id","appointment_date","appointment_time","existing","appointmentResult","error_11","_b","is_booked","BadRequest","appointmentId","insertId"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["db.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDoctorsFromElastic = getDoctorsFromElastic;\nexports.addDoctor = addDoctor;\nexports.getUserSuggestionPercentage = getUserSuggestionPercentage;\nexports.like = like;\nexports.getDoctoLike = getDoctoLike;\nexports.getServices = getServices;\nexports.checkDoctorPhoneNumberExists = checkDoctorPhoneNumberExists;\nexports.updateDoctor = updateDoctor;\nexports.recordDoctorProfileView = recordDoctorProfileView;\nexports.addComment = addComment;\nexports.getSpecialties = getSpecialties;\nexports.getSubSpecialtiesById = getSubSpecialtiesById;\nexports.filterSpecialtyById = filterSpecialtyById;\nexports.getSuggestionsBySpecialty = getSuggestionsBySpecialty;\nexports.filterServicesById = filterServicesById;\nexports.existingFeedback = existingFeedback;\nexports.insertReviews = insertReviews;\nexports.getReviews = getReviews;\nexports.doctorSchadules = doctorSchadules;\nexports.doctorScheduleTimeAvailability = doctorScheduleTimeAvailability;\nexports.booked = booked;\nvar elasticsearch_1 = require(\"@elastic/elasticsearch\");\nvar mysql_1 = require(\"../../bin/mysql\");\nvar response_error_1 = require(\"../../modules/error/response_error\");\nvar schema_1 = require(\"./schema\");\nvar bcrypt_1 = require(\"bcrypt\");\nvar uuid_1 = require(\"uuid\");\n// const esClient = new Client({ node: process.env.ELASTICSEARCH_URL });\nvar esClient = new elasticsearch_1.Client({\n    node: \"http://localhost:9200\",\n    auth: { username: \"elastic\", password: \"@Ali0011914505\" },\n});\nfunction indexDoctorData(doctor) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, esClient.index({\n                        index: \"doctors\",\n                        id: doctor.id,\n                        document: doctor,\n                    })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getDoctorsFromElastic(filters) {\n    return __awaiter(this, void 0, void 0, function () {\n        var must, query_1, body, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    must = [];\n                    if (filters.name) {\n                        must.push({ match: { name: filters.name } });\n                    }\n                    if (filters.doctor_id) {\n                        must.push({ match: { id: filters.doctor_id } });\n                    }\n                    if (filters.specialty_id) {\n                        must.push({ match: { specialty_id: filters.specialty_id } });\n                    }\n                    if (filters.service_id) {\n                        must.push({ match: { service_ids: filters.service_id } });\n                    }\n                    if (filters.insurance_id) {\n                        must.push({\n                            match: { insurance_id: filters.insurance_id },\n                        });\n                    }\n                    if (filters.city_id) {\n                        must.push({\n                            match: { \"addresses.city_id\": filters.city_id },\n                        });\n                    }\n                    if (filters.minRating !== undefined || filters.maxRating !== undefined) {\n                        must.push({\n                            range: {\n                                average_rating: {\n                                    gte: filters.minRating || 0,\n                                    lte: filters.maxRating || 5,\n                                },\n                            },\n                        });\n                    }\n                    if (filters.isPopular) {\n                        must.push({\n                            range: {\n                                average_rating: {\n                                    gte: 4,\n                                },\n                            },\n                        });\n                    }\n                    query_1 = must.length > 0 ? { bool: { must: must } } : { match_all: {} };\n                    return [4 /*yield*/, esClient.search({\n                            index: \"doctors\",\n                            body: {\n                                query: query_1,\n                            },\n                        })];\n                case 1:\n                    body = _a.sent();\n                    console.log(JSON.stringify(body, null, 2));\n                    return [2 /*return*/, body.hits.hits.map(function (hit) { return hit._source; })];\n                case 2:\n                    error_1 = _a.sent();\n                    console.log(JSON.stringify(error_1.meta.body, null, 2));\n                    console.error(\"Elasticsearch error:\", error_1);\n                    return [2 /*return*/, []];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction addDoctor(data) {\n    return __awaiter(this, void 0, void 0, function () {\n        var password, confirmPassword, fdPassword, validPassword, saltRounds, hashedPassword, newId, result, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    password = data.password.password;\n                    confirmPassword = data.password.confirmPassword;\n                    fdPassword = { password: password, confirmPassword: confirmPassword };\n                    validPassword = schema_1.doctorSchema.validateSyncAt(\"confirmPassword\", fdPassword);\n                    saltRounds = 10;\n                    return [4 /*yield*/, bcrypt_1.default.hash(validPassword, saltRounds)];\n                case 1:\n                    hashedPassword = _a.sent();\n                    if (validPassword.error) {\n                        throw new response_error_1.ResponseError.Unauthorized(\"Password is invalid\");\n                    }\n                    newId = (0, uuid_1.v4)();\n                    _a.label = 2;\n                case 2:\n                    _a.trys.push([2, 4, , 5]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctors\\n        (id,first_name,last_name,email,password,token_verify,verify_code,phone,created_at,updated_at)\\n        VALUES(?,?,?,?,?,?,?,?,?,?)\"), {\n                            values: [\n                                newId,\n                                data.first_name,\n                                data.last_name,\n                                data.email,\n                                hashedPassword,\n                                data.token_verify,\n                                data.verify_code,\n                                data.phone,\n                                new Date(),\n                                new Date(),\n                            ],\n                        })];\n                case 3:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 4:\n                    error_2 = _a.sent();\n                    console.error(\"Database Error:\", error_2.message);\n                    throw new response_error_1.ResponseError.InternalServer(\"Failed to insert clinic.\");\n                case 5: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getUserSuggestionPercentage(doctorId) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT COUNT(id) AS total_reviews,\\n      SUM(CASE WHEN recommendation = 1 THEN 1 ELSE 0 END) AS total_recommended\\n     FROM \".concat(mysql_1.coreSchema, \".doctor_reviews\\n     WHERE doctor_id = ?\"), {\n                        values: [doctorId],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    if (!result.length || result[0].total_reviews === 0)\n                        return [2 /*return*/, 0];\n                    return [2 /*return*/, parseFloat(((result[0].total_recommended / result[0].total_reviews) * 100).toFixed(2))];\n            }\n        });\n    });\n}\nfunction like(data) {\n    return __awaiter(this, void 0, void 0, function () {\n        var existingLike, totalLikes, isLiked;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n     WHERE doctor_id = ? AND patient_id = ?\"), {\n                        values: [data.doctor_id, data.patient_id],\n                    })];\n                case 1:\n                    existingLike = _a.sent();\n                    if (!(existingLike.length > 0)) return [3 /*break*/, 3];\n                    // Unlike the doctor: Remove the like\n                    return [4 /*yield*/, (0, mysql_1.query)(\"DELETE FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n       WHERE doctor_id = ? AND patient_id = ?\"), {\n                            values: [data.doctor_id, data.patient_id],\n                        })];\n                case 2:\n                    // Unlike the doctor: Remove the like\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3: \n                // Like the doctor: Insert new like record\n                return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctor_likes (doctor_id, patient_id, isLike) \\n       VALUES (?, ?, ?)\"), {\n                        values: [data.doctor_id, data.patient_id, 1],\n                    })];\n                case 4:\n                    // Like the doctor: Insert new like record\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT COUNT(*) AS count FROM \".concat(mysql_1.coreSchema, \".doctor_likes \\n     WHERE doctor_id = ?\"), {\n                        values: [data.doctor_id],\n                    })];\n                case 6:\n                    totalLikes = _a.sent();\n                    isLiked = totalLikes[0].count > 0 ? 1 : 0;\n                    return [4 /*yield*/, (0, mysql_1.query)(\"UPDATE \".concat(mysql_1.coreSchema, \".doctors \\n     SET is_liked = ? \\n     WHERE id = ?\"), {\n                            values: [isLiked, data.doctor_id],\n                        })];\n                case 7:\n                    _a.sent();\n                    return [2 /*return*/, { success: true, isLiked: isLiked }];\n            }\n        });\n    });\n}\nfunction getDoctoLike(patient_id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result, error_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT\\n      d.*\\n        FROM \".concat(mysql_1.coreSchema, \".doctor_likes dl\\n        LEFT JOIN \").concat(mysql_1.coreSchema, \".doctors d\\n        ON dl.doctor_id = d.id\\n        WHERE dl.patient_id = ?\"), {\n                            values: [patient_id],\n                        })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 2:\n                    error_3 = _a.sent();\n                    console.log(error_3);\n                    throw new response_error_1.ResponseError.InternalServer(\"Failed to get response\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getServices() {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".services\"))];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\n// export async function getMostPopularDoctors(): Promise<any> {\n//   try {\n//     const result = await query<RowDataPacket[]>(\n//       `\n//       SELECT\n//         d.*,\n//         COALESCE(ld.id, 'No Location') AS location,\n//         s.name AS specialty_name,\n//         (SELECT AVG(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS average_rating,\n//         (SELECT COUNT(r.rating)\n//          FROM ${coreSchema}.ratings r\n//          WHERE r.id = d.id) AS total_ratings\n//       FROM\n//         ${coreSchema}.doctors d\n//       LEFT JOIN\n//         ${coreSchema}.doctor_locations ld ON d.id = ld.id\n//       LEFT JOIN\n//         ${coreSchema}.specialties s ON d.specialty_id = s.id\n//       HAVING\n//         total_ratings > 3\n//       ORDER BY\n//         average_rating DESC,\n//         total_ratings DESC\n//       LIMIT 10;\n//       `\n//     );\n//     return result;\n//   } catch (error) {\n//     console.log(error);\n//     throw new ResponseError.InternalServer(\"An unexpected error occurred.\");\n//   }\n// }\nfunction checkDoctorPhoneNumberExists(mobile) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT mobile FROM \".concat(mysql_1.coreSchema, \".doctors\\n      where mobile=?\\n      \"), {\n                        values: [mobile],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction updateDoctor(doctorData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"\\n        UPDATE \".concat(mysql_1.coreSchema, \".doctors\\n        SET name = ?\\n        WHERE id = ?\\n      \"), {\n                        values: [doctorData.first_name, doctorData.id],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction recordDoctorProfileView(id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var updateResult, error_4;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n      UPDATE \".concat(mysql_1.coreSchema, \".doctors\\n      SET click_count = click_count + 1\\n      WHERE id = ?\\n      \"), {\n                            values: [id],\n                        })];\n                case 1:\n                    updateResult = _a.sent();\n                    return [2 /*return*/, updateResult];\n                case 2:\n                    error_4 = _a.sent();\n                    console.log(error_4);\n                    throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction addComment(comment) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".comments\\n     (id, id, comment_text, rating)\\n         VALUES (?, ?, ?, ?)\"), {\n                        values: [comment.id, comment.id, comment.comment_text, comment.rating],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction getSpecialties() {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT *\\n       FROM \".concat(mysql_1.coreSchema, \".specialties\"))];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction getSubSpecialtiesById(specialtyId) {\n    return __awaiter(this, void 0, void 0, function () {\n        var limit, offset, result, error_5;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    limit = 20;\n                    offset = 0;\n                    return [4 /*yield*/, (0, mysql_1.query)(\"SELECT \\n        s.id AS specialty_id,\\n        s.name AS specialty_name,\\n        s.images AS specialty_image,\\n        ss.id AS sub_specialty_id,\\n        ss.sub_specialty AS sub_specialty_name\\n      FROM \".concat(mysql_1.coreSchema, \".specialties s\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".sub_specialties ss \\n      ON s.id = ss.specialty_id\\n      WHERE s.id = ? \\n      ORDER BY ss.id;\"), { values: [specialtyId] })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result.map(function (row) { return ({\n                            id: row.sub_specialty_id || null,\n                            name: row.sub_specialty_name || \"N/A\",\n                            images: row.specialty_image || \"default_image.jpeg\",\n                        }); })];\n                case 2:\n                    error_5 = _a.sent();\n                    console.error(\"Error fetching sub-specialties:\", error_5);\n                    throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction filterSpecialtyById(specialty) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result, error_6;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n       SELECT \\n        d.*, \\n        COALESCE(ld.location, 'No Location') AS location,\\n        s.name AS specialty_name,\\n        (SELECT AVG(rating) \\n         FROM \".concat(mysql_1.coreSchema, \".ratings r \\n         WHERE r.id = d.id) AS average_rating\\n      FROM \\n        \").concat(mysql_1.coreSchema, \".doctors d\\n      LEFT JOIN \\n        \").concat(mysql_1.coreSchema, \".doctor_locations ld ON d.id = ld.id\\n      LEFT JOIN \\n        \").concat(mysql_1.coreSchema, \".specialties s ON d.specialty_id = s.id\\n  \\n      WHERE \\n      s.id = ?;\\n      \"), {\n                            values: [specialty],\n                        })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 2:\n                    error_6 = _a.sent();\n                    console.log(error_6);\n                    throw new response_error_1.ResponseError.InternalServer(\"...\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getSuggestionsBySpecialty(specialtyId) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result, error_7;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT s.id AS suggestion_id, s.title, s.description, ss.name AS sub_specialty_name\\n      FROM clinic_db.suggestions s\\n      JOIN clinic_db.sub_specialties ss ON s.sub_specialty_id = ss.id\\n      JOIN clinic_db.specialties sp ON ss.specialty_id = sp.id\\n      WHERE sp.id = ?;\\n    \", [specialtyId])];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 2:\n                    error_7 = _a.sent();\n                    console.log(error_7);\n                    throw new response_error_1.ResponseError.InternalServer(\"An unexpected error occurred.\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction filterServicesById(serviceId) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"\\n   SELECT \\n      d.*, \\n      COALESCE(ld.location, 'No Location') AS location,\\n      s.name AS specialty_name,\\n      (SELECT AVG(rating) \\n       FROM \".concat(mysql_1.coreSchema, \".ratings r \\n       WHERE r.id = d.id) AS average_rating\\n    FROM \\n      \").concat(mysql_1.coreSchema, \".doctors d\\n    LEFT JOIN \\n      \").concat(mysql_1.coreSchema, \".locations_doctors ld ON d.id = ld.id\\n    LEFT JOIN \\n      \").concat(mysql_1.coreSchema, \".specialties s ON d.specialty_id = s.id\\n    JOIN \\n      \").concat(mysql_1.coreSchema, \".services srv  ON srv.specialty_id = s.id\\n    WHERE \\n    srv.id = ?;\\n    \"), {\n                        values: [serviceId],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction existingFeedback(reviewData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_reviews WHERE user_id = ? AND doctor_id =?\"), {\n                        values: [reviewData.user_id, reviewData.doctor_id],\n                    })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction insertReviews(reviewData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result, error_8;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".doctor_reviews\\n        (doctor_id,\\n          user_id,\\n          comment,\\n          recommendations,\\n          rating,\\n          professional_demeanor,\\n          sufficient_time,\\n          skill,\\n          staff_behavior,\\n          clinic_condition)\\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)\"), {\n                            values: [\n                                reviewData.doctor_id,\n                                reviewData.user_id,\n                                reviewData.comment,\n                                reviewData.rating,\n                                reviewData.recommendations,\n                                reviewData.ratings.professional_demeanor,\n                                reviewData.ratings.sufficient_time,\n                                reviewData.ratings.skill,\n                                reviewData.ratings.staff_behavior,\n                                reviewData.ratings.clinic_condition,\n                            ],\n                        })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 2:\n                    error_8 = _a.sent();\n                    console.log(error_8);\n                    throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getReviews() {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, mysql_1.query)(\"\\n    SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_reviews\\n    \"))];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction doctorSchadules(doctor_id, consultatio_types_available) {\n    return __awaiter(this, void 0, void 0, function () {\n        var queryParams, queryStr, result, error_9;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    queryParams = [doctor_id];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    queryStr = \"\\n   SELECT * FROM \".concat(mysql_1.coreSchema, \".doctor_schedules ds\\n      WHERE doctor_id = ?\\n    \");\n                    if (consultatio_types_available) {\n                        queryStr += \" AND ds.consultatio_types_available =?\";\n                        queryParams.push(consultatio_types_available);\n                    }\n                    return [4 /*yield*/, (0, mysql_1.query)(queryStr, {\n                            values: queryParams,\n                        })];\n                case 2:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 3:\n                    error_9 = _a.sent();\n                    console.log(error_9);\n                    throw new response_error_1.ResponseError.InternalServer(\"Internal server Error\");\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction doctorScheduleTimeAvailability(schedule_id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result, error_10;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT *\\n      FROM \".concat(mysql_1.coreSchema, \".doctor_available_times \\n      WHERE schedule_id = ?;\\n      \"), {\n                            values: [schedule_id],\n                        })];\n                case 1:\n                    result = _a.sent();\n                    return [2 /*return*/, result];\n                case 2:\n                    error_10 = _a.sent();\n                    console.error(error_10); // Better to use console.error for errors\n                    throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction booked(doctor_schedule_id, patient_id, clinic_id, appointment_date, appointment_time) {\n    return __awaiter(this, void 0, void 0, function () {\n        var existing, appointmentResult, error_11;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 3, 4, 5]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"SELECT is_booked FROM \".concat(mysql_1.coreSchema, \".doctor_available_times WHERE id = ? FOR UPDATE\"), { values: [doctor_schedule_id] })];\n                case 1:\n                    existing = (_b.sent())[0];\n                    if (!existing || ((_a = existing[0]) === null || _a === void 0 ? void 0 : _a.is_booked) === 1) {\n                        throw new response_error_1.ResponseError.BadRequest(\"Doctor schedule is alreday boooked.\");\n                    }\n                    return [4 /*yield*/, (0, mysql_1.query)(\"INSERT INTO \".concat(mysql_1.coreSchema, \".appointments\\n      (patient_id,doctor_schedule_id,clinic_id,appointment_date,appointment_time,status)\\n      VALUES (?, ?, ?, ?, ?, 'Scheduled');\"), {\n                            values: [\n                                patient_id,\n                                doctor_schedule_id,\n                                clinic_id,\n                                appointment_date,\n                                appointment_time,\n                            ],\n                        })];\n                case 2:\n                    appointmentResult = _b.sent();\n                    return [2 /*return*/, {\n                            message: \"Appointment successfuly booked\",\n                            appointmentId: appointmentResult.insertId,\n                        }];\n                case 3:\n                    error_11 = _b.sent();\n                    console.error(error_11);\n                    throw new response_error_1.ResponseError.InternalServer(\"Internal Server Error\");\n                case 4:\n                    console.log(\"final\");\n                    return [7 /*endfinally*/];\n                case 5: return [2 /*return*/];\n            }\n        });\n    });\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1742220888599},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\controller\\\\doctors\\\\schema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nvar yup = require(\"yup\");\nexports.doctorSchema = yup.object().shape({\n  first_name: yup.string().required(\"first_name is required\"),\n  last_name: yup.string().required(\"last_name is required\"),\n  Specialization: yup.string().required(\"Specialization is required\"),\n  licenseNumber: yup.string().required(\"licenseNumber is required\"),\n  owner_name: yup.string().required(\"email is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phone: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nexports.createPasswordSchema = yup.object().shape({\n  newPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\")\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email format\").required(\"Email is required\"),\n  verify_code: yup.string().length(4, \"Verify code should be 4 characters\").required(\"Verify code is required\")\n});\nexports.checkEmailSchema = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNoZWNrRW1haWxTY2hlbWEiLCJjb25maXJtRW1haWxTY2hlbWEiLCJjcmVhdGVQYXNzd29yZFNjaGVtYSIsImRvY3RvclNjaGVtYSIsInl1cCIsInJlcXVpcmUiLCJvYmplY3QiLCJzaGFwZSIsImZpcnN0X25hbWUiLCJzdHJpbmciLCJyZXF1aXJlZCIsImxhc3RfbmFtZSIsIlNwZWNpYWxpemF0aW9uIiwibGljZW5zZU51bWJlciIsIm93bmVyX25hbWUiLCJlbWFpbCIsInBob25lIiwibnVsbGFibGUiLCJ0b2tlblZlcmlmeSIsInBhc3N3b3JkIiwibWluIiwib25lT2YiLCJyZWYiLCJjb25maXJtUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsInZlcmlmeV9jb2RlIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGRvY3RvcnNcXCIsInNvdXJjZXMiOlsic2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jaGVja0VtYWlsU2NoZW1hID0gZXhwb3J0cy5jb25maXJtRW1haWxTY2hlbWEgPSBleHBvcnRzLmNyZWF0ZVBhc3N3b3JkU2NoZW1hID0gZXhwb3J0cy5kb2N0b3JTY2hlbWEgPSB2b2lkIDA7XG52YXIgeXVwID0gcmVxdWlyZShcInl1cFwiKTtcbmV4cG9ydHMuZG9jdG9yU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICBmaXJzdF9uYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJmaXJzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgIGxhc3RfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibGFzdF9uYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgIFNwZWNpYWxpemF0aW9uOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJTcGVjaWFsaXphdGlvbiBpcyByZXF1aXJlZFwiKSxcbiAgICBsaWNlbnNlTnVtYmVyOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsaWNlbnNlTnVtYmVyIGlzIHJlcXVpcmVkXCIpLFxuICAgIG93bmVyX25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxuICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXG4gICAgcGhvbmU6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBwYXNzd29yZDogeXVwXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXG4gICAgICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXG4gICAgY29uZmlybVBhc3N3b3JkOiB5dXBcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxufSk7XG5leHBvcnRzLmNyZWF0ZVBhc3N3b3JkU2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICBuZXdQYXNzd29yZDogeXVwXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXG4gICAgICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXG4gICAgY29uZmlybVBhc3N3b3JkOiB5dXBcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKFwibmV3UGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxufSk7XG4vLyBleHBvcnQgY29uc3QgdXNlclJvbGVzU2NoZW1hID0geXVwXG4vLyAgIC5vYmplY3QoKVxuLy8gICAuc2hhcGUoe1xuLy8gICAgIHVzZXJJZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwidXNlcklkIGlzIHJlcXVpcmVkXCIpLFxuLy8gICB9KVxuLy8gICAucmVxdWlyZWQoKTtcbi8vICAgZXhwb3J0ICBjb25zdCBsYXRlc3RUZW1wbGF0ZXNTY2hlbWEgPSB5dXBcbi8vICAgLm9iamVjdCgpXG4vLyAgIC5zaGFwZSh7XG4vLyAgICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXG4vLyAgIH0pXG4vLyAgIC5yZXF1aXJlZCgpO1xuZXhwb3J0cy5jb25maXJtRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xuICAgIGVtYWlsOiB5dXBcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5lbWFpbChcIkludmFsaWQgZW1haWwgZm9ybWF0XCIpXG4gICAgICAgIC5yZXF1aXJlZChcIkVtYWlsIGlzIHJlcXVpcmVkXCIpLFxuICAgIHZlcmlmeV9jb2RlOiB5dXBcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5sZW5ndGgoNCwgXCJWZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaGFyYWN0ZXJzXCIpXG4gICAgICAgIC5yZXF1aXJlZChcIlZlcmlmeSBjb2RlIGlzIHJlcXVpcmVkXCIpLFxufSk7XG5leHBvcnRzLmNoZWNrRW1haWxTY2hlbWEgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xuICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZCFcIiksXG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFBRUMsS0FBSyxFQUFFO0FBQUssQ0FBQyxDQUFDO0FBQzdERCxPQUFPLENBQUNFLGdCQUFnQixHQUFHRixPQUFPLENBQUNHLGtCQUFrQixHQUFHSCxPQUFPLENBQUNJLG9CQUFvQixHQUFHSixPQUFPLENBQUNLLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDcEgsSUFBSUMsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ3hCUCxPQUFPLENBQUNLLFlBQVksR0FBR0MsR0FBRyxDQUFDRSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUM7RUFDdENDLFVBQVUsRUFBRUosR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsd0JBQXdCLENBQUM7RUFDM0RDLFNBQVMsRUFBRVAsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsdUJBQXVCLENBQUM7RUFDekRFLGNBQWMsRUFBRVIsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsNEJBQTRCLENBQUM7RUFDbkVHLGFBQWEsRUFBRVQsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsMkJBQTJCLENBQUM7RUFDakVJLFVBQVUsRUFBRVYsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDdERLLEtBQUssRUFBRVgsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDTSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNMLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RU0sS0FBSyxFQUFFWixHQUFHLENBQUNLLE1BQU0sQ0FBQyxDQUFDLENBQUNRLFFBQVEsQ0FBQyxDQUFDO0VBQzlCQyxXQUFXLEVBQUVkLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLENBQUMsQ0FBQ1EsUUFBUSxDQUFDLENBQUM7RUFDcENFLFFBQVEsRUFBRWYsR0FBRyxDQUNSSyxNQUFNLENBQUMsQ0FBQyxDQUNSVyxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQy9CQyxLQUFLLENBQUMsQ0FBQ2pCLEdBQUcsQ0FBQ2tCLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCLENBQUM7RUFDdEVDLGVBQWUsRUFBRW5CLEdBQUcsQ0FDZkssTUFBTSxDQUFDLENBQUMsQ0FDUlcsR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUMvQkMsS0FBSyxDQUFDLENBQUNqQixHQUFHLENBQUNrQixHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSw0QkFBNEI7QUFDbEUsQ0FBQyxDQUFDO0FBQ0Z4QixPQUFPLENBQUNJLG9CQUFvQixHQUFHRSxHQUFHLENBQUNFLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBQztFQUM5Q2lCLFdBQVcsRUFBRXBCLEdBQUcsQ0FDWEssTUFBTSxDQUFDLENBQUMsQ0FDUlcsR0FBRyxDQUFDLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUMvQkMsS0FBSyxDQUFDLENBQUNqQixHQUFHLENBQUNrQixHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLDRCQUE0QixDQUFDO0VBQ3RFQyxlQUFlLEVBQUVuQixHQUFHLENBQ2ZLLE1BQU0sQ0FBQyxDQUFDLENBQ1JXLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDL0JDLEtBQUssQ0FBQyxDQUFDakIsR0FBRyxDQUFDa0IsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsNEJBQTRCO0FBQ3JFLENBQUMsQ0FBQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBeEIsT0FBTyxDQUFDRyxrQkFBa0IsR0FBR0csR0FBRyxDQUFDRSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUM7RUFDNUNRLEtBQUssRUFBRVgsR0FBRyxDQUNMSyxNQUFNLENBQUMsQ0FBQyxDQUNSTSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FDN0JMLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUNsQ2UsV0FBVyxFQUFFckIsR0FBRyxDQUNYSyxNQUFNLENBQUMsQ0FBQyxDQUNSaUIsTUFBTSxDQUFDLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQyxDQUMvQ2hCLFFBQVEsQ0FBQyx5QkFBeUI7QUFDM0MsQ0FBQyxDQUFDO0FBQ0ZaLE9BQU8sQ0FBQ0UsZ0JBQWdCLEdBQUdJLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsS0FBSyxDQUFDO0VBQzFDUSxLQUFLLEVBQUVYLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLG9CQUFvQjtBQUNyRCxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Object","defineProperty","exports","value","checkEmailSchema","confirmEmailSchema","createPasswordSchema","doctorSchema","yup","require","object","shape","first_name","string","required","last_name","Specialization","licenseNumber","owner_name","email","phone","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","newPassword","verify_code","length"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\controller\\doctors\\","sources":["schema.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkEmailSchema = exports.confirmEmailSchema = exports.createPasswordSchema = exports.doctorSchema = void 0;\nvar yup = require(\"yup\");\nexports.doctorSchema = yup.object().shape({\n    first_name: yup.string().required(\"first_name is required\"),\n    last_name: yup.string().required(\"last_name is required\"),\n    Specialization: yup.string().required(\"Specialization is required\"),\n    licenseNumber: yup.string().required(\"licenseNumber is required\"),\n    owner_name: yup.string().required(\"email is required\"),\n    email: yup.string().email(\"invalid email\").required(\"email is required\"),\n    phone: yup.string().nullable(),\n    tokenVerify: yup.string().nullable(),\n    password: yup\n        .string()\n        .min(8, \"at least 8 characters\")\n        .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n    confirmPassword: yup\n        .string()\n        .min(8, \"at least 8 characters\")\n        .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\n});\nexports.createPasswordSchema = yup.object().shape({\n    newPassword: yup\n        .string()\n        .min(8, \"at least 8 characters\")\n        .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n    confirmPassword: yup\n        .string()\n        .min(8, \"at least 8 characters\")\n        .oneOf([yup.ref(\"newPassword\")], \"passwords are not the same\"),\n});\n// export const userRolesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\n//   export  const latestTemplatesSchema = yup\n//   .object()\n//   .shape({\n//     userId: yup.string().required(\"userId is required\"),\n//   })\n//   .required();\nexports.confirmEmailSchema = yup.object().shape({\n    email: yup\n        .string()\n        .email(\"Invalid email format\")\n        .required(\"Email is required\"),\n    verify_code: yup\n        .string()\n        .length(4, \"Verify code should be 4 characters\")\n        .required(\"Verify code is required\"),\n});\nexports.checkEmailSchema = yup.object().shape({\n    email: yup.string().required(\"email is required!\"),\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1742220888573},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\syncDoctors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syncDoctorsToElasticsearch = syncDoctorsToElasticsearch;\nexports.searchDoctors = searchDoctors;\nexports.removeDeleteDoctorsFromElasticSeach = removeDeleteDoctorsFromElasticSeach;\nvar elasticsearch_1 = require(\"@elastic/elasticsearch\");\nvar mysql_1 = require(\"../bin/mysql\");\nvar db_1 = require(\"../controller/doctors/db\");\nvar esClient = new elasticsearch_1.Client({\n  node: process.env.ELASTICSEARCH_URL,\n  auth: {\n    username: process.env.ELASTICSEARCH_USERNAME || \"elastic\",\n    password: process.env.ELASTICSEARCH_PASSWORD || \"@Ali0011914505\"\n  }\n});\nfunction syncDoctorsToElasticsearch() {\n  return __awaiter(this, void 0, void 0, function () {\n    var doctors, rows, body, chunkSize, i, chunk, response, erroredDocuments, error_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 8,, 9]);\n          return [4 /*yield*/, (0, db_1.getDoctorsFromElastic)({\n            name: \"John Doe\",\n            city_id: \"1\",\n            service_id: \"123\",\n            specialty_id: \"456\",\n            insurance_id: \"789\",\n            minRating: 3,\n            maxRating: 5,\n            isPopular: true\n          })];\n        case 1:\n          doctors = _a.sent();\n          console.log(\"Doctors Found:\", doctors);\n          return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT \\n        d.id, d.first_name, d.last_name, d.profile_img, d.email, d.phone, \\n        CONCAT(d.first_name, ' ', d.last_name) AS name,\\n        d.specialty_id, d.insurance_id, d.click_count, d.medical_code,\\n        sp.name AS specialty_name,\\n        JSON_ARRAYAGG(ss.id) AS service_ids,\\n        JSON_ARRAYAGG(ci.id) AS cities_ids,\\n        i.name AS insurance_name,  \\n        COUNT(r.id) AS total_reviews,\\n        COALESCE(AVG(r.rating), 0) AS average_rating,\\n        COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\\n        COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\\n        COALESCE(AVG(r.skill), 0) AS avg_skill,\\n        COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\\n        COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\\n        d.updated_at,\\n        CASE \\n          WHEN EXISTS (SELECT 1 FROM \".concat(mysql_1.coreSchema, \".doctor_likes dl WHERE dl.doctor_id = d.id) \\n          THEN 1 ELSE 0\\n        END AS isLiked,\\n\\n        COALESCE(ROUND((SUM(CASE WHEN r.recommendations = 1 THEN 1 ELSE 0 END) / COUNT(r.id)) * 100, 2), 0) \\n        AS user_suggestion_percentage,\\n\\n        -- Properly formatted JSON array of addresses\\n        JSON_ARRAYAGG(\\n          JSON_OBJECT(\\n            'city_id', ci.id,\\n            'country', ld.country,\\n            'latitude', ld.latitude,\\n            'longitude', ld.longitude,\\n            'address_line1', ld.address_line1,\\n            'address_line2', ld.address_line2,\\n            'zipcode', ld.zipcode,\\n            'city', ci.name,\\n            'state', ci.state\\n          )\\n        ) AS addresses,\\n         MAX(ci.id) AS city_id \\n\\n      FROM \\n        \").concat(mysql_1.coreSchema, \".doctors d\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_locations ld ON d.id = ld.doctor_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".specialties sp ON d.specialty_id = sp.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".services ss ON sp.id = ss.specialty_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_reviews r ON d.id = r.doctor_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".insurances i ON d.insurance_id = i.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".cities ci ON ld.city_id = ci.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_likes dk ON d.id = dk.doctor_id\\n      WHERE d.updated_at >= NOW() - INTERVAL 1 DAY\\n\\n      GROUP BY d.id\\n    \"))];\n        case 2:\n          rows = _a.sent();\n          if (rows.length === 0) {\n            console.log(\" No doctors found in MySQL\");\n            return [2 /*return*/];\n          }\n          body = rows.flatMap(function (doc) {\n            return [{\n              index: {\n                _id: doc.id\n              }\n            }, {\n              id: doc.id,\n              name: doc.name,\n              profile_img: doc.profile_img,\n              email: doc.email,\n              phone: doc.phone,\n              specialty_id: doc.specialty_id,\n              insurance_id: doc.insurance_id,\n              specialty_name: doc.specialty_name,\n              insurance_name: doc.insurance_name,\n              click_count: doc.click_count,\n              medical_code: doc.medical_code,\n              average_rating: doc.average_rating,\n              total_reviews: doc.total_reviews,\n              avg_professional_demeanor: doc.avg_professional_demeanor,\n              avg_sufficient_time: doc.avg_sufficient_time,\n              avg_skill: doc.avg_skill,\n              avg_staff_behavior: doc.avg_staff_behavior,\n              avg_clinic_condition: doc.avg_clinic_condition,\n              isLiked: doc.isLiked,\n              user_suggestion_percentage: doc.user_suggestion_percentage,\n              service_ids: doc.service_id && typeof doc.service_ids === \"string\" ? JSON.parse(doc.service_ids) : Array.isArray(doc.service_ids) ? doc.service_ids : [],\n              cities_ids: doc.city_id && typeof doc.cities_ids === \"string\" ? JSON.parse(doc.cities_ids) : Array.isArray(doc.cities_ids) ? doc.cities_ids : [],\n              addresses: doc.addresses && typeof doc.addresses === \"string\" ? JSON.parse(doc.addresses) : Array.isArray(doc.addresses) ? doc.addresses : []\n            }];\n          });\n          chunkSize = 1000;\n          i = 0;\n          _a.label = 3;\n        case 3:\n          if (!(i < body.length)) return [3 /*break*/, 6];\n          chunk = body.slice(i, i + chunkSize);\n          return [4 /*yield*/, esClient.bulk({\n            index: \"doctors\",\n            body: chunk\n          })];\n        case 4:\n          response = _a.sent();\n          if (response.errors) {\n            erroredDocuments = response.items.filter(function (item) {\n              return item.index && item.index.error;\n            });\n            console.error(\"\\u274C \".concat(erroredDocuments.length, \" errors occurred in bulk insert\"), erroredDocuments);\n          } else {\n            console.log(\" Doctors synced successfully\");\n          }\n          _a.label = 5;\n        case 5:\n          i += chunkSize;\n          return [3 /*break*/, 3];\n        case 6:\n          // const response = await esClient.bulk({ index: \"doctors\", body });\n          return [4 /*yield*/, esClient.indices.refresh({\n            index: \"doctors\"\n          })];\n        case 7:\n          // const response = await esClient.bulk({ index: \"doctors\", body });\n          _a.sent();\n          return [3 /*break*/, 9];\n        case 8:\n          error_1 = _a.sent();\n          console.error(\" Sync failed:\", error_1);\n          return [3 /*break*/, 9];\n        case 9:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction searchDoctors(query) {\n  return __awaiter(this, void 0, void 0, function () {\n    var response, error_2;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, esClient.search({\n            index: \"doctors\",\n            size: 20,\n            query: {\n              bool: {\n                should: [{\n                  multi_match: {\n                    query: query,\n                    fields: [\"name\", \"specialty_name\", \"insurance_name\", \"city\"]\n                  }\n                }, {\n                  match_phrase_prefix: {\n                    name: query\n                  }\n                }, {\n                  match_phrase_prefix: {\n                    specialty_name: query\n                  }\n                }, {\n                  match_phrase_prefix: {\n                    insurance_name: query\n                  }\n                }, {\n                  match_phrase_prefix: {\n                    city: query\n                  }\n                }],\n                minimum_should_match: 1\n              }\n            },\n            sort: [{\n              average_rating: \"desc\"\n            }]\n          })];\n        case 1:\n          response = _a.sent();\n          return [2 /*return*/, response.hits.hits.map(function (hit) {\n            return hit._source;\n          })];\n        case 2:\n          error_2 = _a.sent();\n          console.error(\" Error searching doctors:\", error_2);\n          return [2 /*return*/, []];\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction removeDeleteDoctorsFromElasticSeach() {\n  return __awaiter(this, void 0, void 0, function () {\n    var deletedDoctors, body, response, error_3;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 3,, 4]);\n          return [4 /*yield*/, (0, mysql_1.query)(\"SELECT id FROM \".concat(mysql_1.coreSchema, \".doctors WHERE deleted_at >= NOW() - INTERVAL 1 DAY;\"))];\n        case 1:\n          deletedDoctors = _a.sent();\n          if (deletedDoctors.length === 0) {\n            console.log(\" No deleted doctors to remove\");\n            return [2 /*return*/];\n          }\n          body = deletedDoctors.flatMap(function (doc) {\n            return [{\n              delete: {\n                _index: \"doctors\",\n                _id: doc.id\n              }\n            }];\n          });\n          return [4 /*yield*/, esClient.bulk({\n            body: body\n          })];\n        case 2:\n          response = _a.sent();\n          if (response.errors) {\n            console.error(\" Errors occurred in bulk delete:\", response.items);\n          } else {\n            console.log(\" Deleted doctors removed from Elasticsearch\");\n          }\n          return [3 /*break*/, 4];\n        case 3:\n          error_3 = _a.sent();\n          console.error(\" Deletion sync failed:\", error_3);\n          return [3 /*break*/, 4];\n        case 4:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJfIiwibGFiZWwiLCJzZW50IiwidCIsInRyeXMiLCJvcHMiLCJmIiwieSIsImciLCJPYmplY3QiLCJjcmVhdGUiLCJJdGVyYXRvciIsInByb3RvdHlwZSIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInN5bmNEb2N0b3JzVG9FbGFzdGljc2VhcmNoIiwic2VhcmNoRG9jdG9ycyIsInJlbW92ZURlbGV0ZURvY3RvcnNGcm9tRWxhc3RpY1NlYWNoIiwiZWxhc3RpY3NlYXJjaF8xIiwicmVxdWlyZSIsIm15c3FsXzEiLCJkYl8xIiwiZXNDbGllbnQiLCJDbGllbnQiLCJub2RlIiwicHJvY2VzcyIsImVudiIsIkVMQVNUSUNTRUFSQ0hfVVJMIiwiYXV0aCIsInVzZXJuYW1lIiwiRUxBU1RJQ1NFQVJDSF9VU0VSTkFNRSIsInBhc3N3b3JkIiwiRUxBU1RJQ1NFQVJDSF9QQVNTV09SRCIsImRvY3RvcnMiLCJyb3dzIiwiY2h1bmtTaXplIiwiaSIsImNodW5rIiwicmVzcG9uc2UiLCJlcnJvcmVkRG9jdW1lbnRzIiwiZXJyb3JfMSIsIl9hIiwiZ2V0RG9jdG9yc0Zyb21FbGFzdGljIiwibmFtZSIsImNpdHlfaWQiLCJzZXJ2aWNlX2lkIiwic3BlY2lhbHR5X2lkIiwiaW5zdXJhbmNlX2lkIiwibWluUmF0aW5nIiwibWF4UmF0aW5nIiwiaXNQb3B1bGFyIiwiY29uc29sZSIsImxvZyIsInF1ZXJ5IiwiY29uY2F0IiwiY29yZVNjaGVtYSIsImZsYXRNYXAiLCJkb2MiLCJpbmRleCIsIl9pZCIsImlkIiwicHJvZmlsZV9pbWciLCJlbWFpbCIsInBob25lIiwic3BlY2lhbHR5X25hbWUiLCJpbnN1cmFuY2VfbmFtZSIsImNsaWNrX2NvdW50IiwibWVkaWNhbF9jb2RlIiwiYXZlcmFnZV9yYXRpbmciLCJ0b3RhbF9yZXZpZXdzIiwiYXZnX3Byb2Zlc3Npb25hbF9kZW1lYW5vciIsImF2Z19zdWZmaWNpZW50X3RpbWUiLCJhdmdfc2tpbGwiLCJhdmdfc3RhZmZfYmVoYXZpb3IiLCJhdmdfY2xpbmljX2NvbmRpdGlvbiIsImlzTGlrZWQiLCJ1c2VyX3N1Z2dlc3Rpb25fcGVyY2VudGFnZSIsInNlcnZpY2VfaWRzIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwiY2l0aWVzX2lkcyIsImFkZHJlc3NlcyIsInNsaWNlIiwiYnVsayIsImVycm9ycyIsIml0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsImVycm9yIiwiaW5kaWNlcyIsInJlZnJlc2giLCJlcnJvcl8yIiwic2VhcmNoIiwic2l6ZSIsImJvb2wiLCJzaG91bGQiLCJtdWx0aV9tYXRjaCIsImZpZWxkcyIsIm1hdGNoX3BocmFzZV9wcmVmaXgiLCJjaXR5IiwibWluaW11bV9zaG91bGRfbWF0Y2giLCJzb3J0IiwiaGl0cyIsIm1hcCIsImhpdCIsIl9zb3VyY2UiLCJkZWxldGVkRG9jdG9ycyIsImVycm9yXzMiLCJkZWxldGUiLCJfaW5kZXgiXSwic291cmNlUm9vdCI6IkQ6XFxBbGlcXFByb2plY3RzXFxjbGluaWNhbGxfYWxpXFxzZXJ2ZXJcXHNyY1xcc2NyaXB0c1xcIiwic291cmNlcyI6WyJzeW5jRG9jdG9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgICByZXR1cm4gZy5uZXh0ID0gdmVyYigwKSwgZ1tcInRocm93XCJdID0gdmVyYigxKSwgZ1tcInJldHVyblwiXSA9IHZlcmIoMiksIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnN5bmNEb2N0b3JzVG9FbGFzdGljc2VhcmNoID0gc3luY0RvY3RvcnNUb0VsYXN0aWNzZWFyY2g7XG5leHBvcnRzLnNlYXJjaERvY3RvcnMgPSBzZWFyY2hEb2N0b3JzO1xuZXhwb3J0cy5yZW1vdmVEZWxldGVEb2N0b3JzRnJvbUVsYXN0aWNTZWFjaCA9IHJlbW92ZURlbGV0ZURvY3RvcnNGcm9tRWxhc3RpY1NlYWNoO1xudmFyIGVsYXN0aWNzZWFyY2hfMSA9IHJlcXVpcmUoXCJAZWxhc3RpYy9lbGFzdGljc2VhcmNoXCIpO1xudmFyIG15c3FsXzEgPSByZXF1aXJlKFwiLi4vYmluL215c3FsXCIpO1xudmFyIGRiXzEgPSByZXF1aXJlKFwiLi4vY29udHJvbGxlci9kb2N0b3JzL2RiXCIpO1xudmFyIGVzQ2xpZW50ID0gbmV3IGVsYXN0aWNzZWFyY2hfMS5DbGllbnQoe1xuICAgIG5vZGU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVJMLFxuICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVNFUk5BTUUgfHwgXCJlbGFzdGljXCIsXG4gICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5FTEFTVElDU0VBUkNIX1BBU1NXT1JEIHx8IFwiQEFsaTAwMTE5MTQ1MDVcIixcbiAgICB9LFxufSk7XG5mdW5jdGlvbiBzeW5jRG9jdG9yc1RvRWxhc3RpY3NlYXJjaCgpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkb2N0b3JzLCByb3dzLCBib2R5LCBjaHVua1NpemUsIGksIGNodW5rLCByZXNwb25zZSwgZXJyb3JlZERvY3VtZW50cywgZXJyb3JfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCA4LCAsIDldKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIGRiXzEuZ2V0RG9jdG9yc0Zyb21FbGFzdGljKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJKb2huIERvZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlfaWQ6IFwiMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VfaWQ6IFwiMTIzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbHR5X2lkOiBcIjQ1NlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3VyYW5jZV9pZDogXCI3ODlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5SYXRpbmc6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmF0aW5nOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9wdWxhcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRvY3RvcnMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRG9jdG9ycyBGb3VuZDpcIiwgZG9jdG9ycyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBteXNxbF8xLnF1ZXJ5KShcIlxcbiAgICAgIFNFTEVDVCBcXG4gICAgICAgIGQuaWQsIGQuZmlyc3RfbmFtZSwgZC5sYXN0X25hbWUsIGQucHJvZmlsZV9pbWcsIGQuZW1haWwsIGQucGhvbmUsIFxcbiAgICAgICAgQ09OQ0FUKGQuZmlyc3RfbmFtZSwgJyAnLCBkLmxhc3RfbmFtZSkgQVMgbmFtZSxcXG4gICAgICAgIGQuc3BlY2lhbHR5X2lkLCBkLmluc3VyYW5jZV9pZCwgZC5jbGlja19jb3VudCwgZC5tZWRpY2FsX2NvZGUsXFxuICAgICAgICBzcC5uYW1lIEFTIHNwZWNpYWx0eV9uYW1lLFxcbiAgICAgICAgSlNPTl9BUlJBWUFHRyhzcy5pZCkgQVMgc2VydmljZV9pZHMsXFxuICAgICAgICBKU09OX0FSUkFZQUdHKGNpLmlkKSBBUyBjaXRpZXNfaWRzLFxcbiAgICAgICAgaS5uYW1lIEFTIGluc3VyYW5jZV9uYW1lLCAgXFxuICAgICAgICBDT1VOVChyLmlkKSBBUyB0b3RhbF9yZXZpZXdzLFxcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIucmF0aW5nKSwgMCkgQVMgYXZlcmFnZV9yYXRpbmcsXFxuICAgICAgICBDT0FMRVNDRShBVkcoci5wcm9mZXNzaW9uYWxfZGVtZWFub3IpLCAwKSBBUyBhdmdfcHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIuc3VmZmljaWVudF90aW1lKSwgMCkgQVMgYXZnX3N1ZmZpY2llbnRfdGltZSxcXG4gICAgICAgIENPQUxFU0NFKEFWRyhyLnNraWxsKSwgMCkgQVMgYXZnX3NraWxsLFxcbiAgICAgICAgQ09BTEVTQ0UoQVZHKHIuc3RhZmZfYmVoYXZpb3IpLCAwKSBBUyBhdmdfc3RhZmZfYmVoYXZpb3IsXFxuICAgICAgICBDT0FMRVNDRShBVkcoci5jbGluaWNfY29uZGl0aW9uKSwgMCkgQVMgYXZnX2NsaW5pY19jb25kaXRpb24sXFxuICAgICAgICBkLnVwZGF0ZWRfYXQsXFxuICAgICAgICBDQVNFIFxcbiAgICAgICAgICBXSEVOIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBcIi5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5kb2N0b3JfbGlrZXMgZGwgV0hFUkUgZGwuZG9jdG9yX2lkID0gZC5pZCkgXFxuICAgICAgICAgIFRIRU4gMSBFTFNFIDBcXG4gICAgICAgIEVORCBBUyBpc0xpa2VkLFxcblxcbiAgICAgICAgQ09BTEVTQ0UoUk9VTkQoKFNVTShDQVNFIFdIRU4gci5yZWNvbW1lbmRhdGlvbnMgPSAxIFRIRU4gMSBFTFNFIDAgRU5EKSAvIENPVU5UKHIuaWQpKSAqIDEwMCwgMiksIDApIFxcbiAgICAgICAgQVMgdXNlcl9zdWdnZXN0aW9uX3BlcmNlbnRhZ2UsXFxuXFxuICAgICAgICAtLSBQcm9wZXJseSBmb3JtYXR0ZWQgSlNPTiBhcnJheSBvZiBhZGRyZXNzZXNcXG4gICAgICAgIEpTT05fQVJSQVlBR0coXFxuICAgICAgICAgIEpTT05fT0JKRUNUKFxcbiAgICAgICAgICAgICdjaXR5X2lkJywgY2kuaWQsXFxuICAgICAgICAgICAgJ2NvdW50cnknLCBsZC5jb3VudHJ5LFxcbiAgICAgICAgICAgICdsYXRpdHVkZScsIGxkLmxhdGl0dWRlLFxcbiAgICAgICAgICAgICdsb25naXR1ZGUnLCBsZC5sb25naXR1ZGUsXFxuICAgICAgICAgICAgJ2FkZHJlc3NfbGluZTEnLCBsZC5hZGRyZXNzX2xpbmUxLFxcbiAgICAgICAgICAgICdhZGRyZXNzX2xpbmUyJywgbGQuYWRkcmVzc19saW5lMixcXG4gICAgICAgICAgICAnemlwY29kZScsIGxkLnppcGNvZGUsXFxuICAgICAgICAgICAgJ2NpdHknLCBjaS5uYW1lLFxcbiAgICAgICAgICAgICdzdGF0ZScsIGNpLnN0YXRlXFxuICAgICAgICAgIClcXG4gICAgICAgICkgQVMgYWRkcmVzc2VzLFxcbiAgICAgICAgIE1BWChjaS5pZCkgQVMgY2l0eV9pZCBcXG5cXG4gICAgICBGUk9NIFxcbiAgICAgICAgXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3RvcnMgZFxcbiAgICAgIExFRlQgSk9JTiBcIikuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX2xvY2F0aW9ucyBsZCBPTiBkLmlkID0gbGQuZG9jdG9yX2lkXFxuICAgICAgTEVGVCBKT0lOIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5zcGVjaWFsdGllcyBzcCBPTiBkLnNwZWNpYWx0eV9pZCA9IHNwLmlkXFxuICAgICAgTEVGVCBKT0lOIFwiKS5jb25jYXQobXlzcWxfMS5jb3JlU2NoZW1hLCBcIi5zZXJ2aWNlcyBzcyBPTiBzcC5pZCA9IHNzLnNwZWNpYWx0eV9pZFxcbiAgICAgIExFRlQgSk9JTiBcIikuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9yX3Jldmlld3MgciBPTiBkLmlkID0gci5kb2N0b3JfaWRcXG4gICAgICBMRUZUIEpPSU4gXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmluc3VyYW5jZXMgaSBPTiBkLmluc3VyYW5jZV9pZCA9IGkuaWRcXG4gICAgICBMRUZUIEpPSU4gXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmNpdGllcyBjaSBPTiBsZC5jaXR5X2lkID0gY2kuaWRcXG4gICAgICBMRUZUIEpPSU4gXCIpLmNvbmNhdChteXNxbF8xLmNvcmVTY2hlbWEsIFwiLmRvY3Rvcl9saWtlcyBkayBPTiBkLmlkID0gZGsuZG9jdG9yX2lkXFxuICAgICAgV0hFUkUgZC51cGRhdGVkX2F0ID49IE5PVygpIC0gSU5URVJWQUwgMSBEQVlcXG5cXG4gICAgICBHUk9VUCBCWSBkLmlkXFxuICAgIFwiKSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuKdjCBObyBkb2N0b3JzIGZvdW5kIGluIE15U1FMXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSByb3dzLmZsYXRNYXAoZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyBpbmRleDogeyBfaWQ6IGRvYy5pZCB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkb2MubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlX2ltZzogZG9jLnByb2ZpbGVfaW1nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBkb2MuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IGRvYy5waG9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsdHlfaWQ6IGRvYy5zcGVjaWFsdHlfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdXJhbmNlX2lkOiBkb2MuaW5zdXJhbmNlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWx0eV9uYW1lOiBkb2Muc3BlY2lhbHR5X25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdXJhbmNlX25hbWU6IGRvYy5pbnN1cmFuY2VfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlja19jb3VudDogZG9jLmNsaWNrX2NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGljYWxfY29kZTogZG9jLm1lZGljYWxfY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmVyYWdlX3JhdGluZzogZG9jLmF2ZXJhZ2VfcmF0aW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX3Jldmlld3M6IGRvYy50b3RhbF9yZXZpZXdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2Z19wcm9mZXNzaW9uYWxfZGVtZWFub3I6IGRvYy5hdmdfcHJvZmVzc2lvbmFsX2RlbWVhbm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2Z19zdWZmaWNpZW50X3RpbWU6IGRvYy5hdmdfc3VmZmljaWVudF90aW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2Z19za2lsbDogZG9jLmF2Z19za2lsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmdfc3RhZmZfYmVoYXZpb3I6IGRvYy5hdmdfc3RhZmZfYmVoYXZpb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZnX2NsaW5pY19jb25kaXRpb246IGRvYy5hdmdfY2xpbmljX2NvbmRpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpa2VkOiBkb2MuaXNMaWtlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX3N1Z2dlc3Rpb25fcGVyY2VudGFnZTogZG9jLnVzZXJfc3VnZ2VzdGlvbl9wZXJjZW50YWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VfaWRzOiBkb2Muc2VydmljZV9pZCAmJiB0eXBlb2YgZG9jLnNlcnZpY2VfaWRzID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gSlNPTi5wYXJzZShkb2Muc2VydmljZV9pZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShkb2Muc2VydmljZV9pZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5zZXJ2aWNlX2lkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXRpZXNfaWRzOiBkb2MuY2l0eV9pZCAmJiB0eXBlb2YgZG9jLmNpdGllc19pZHMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBKU09OLnBhcnNlKGRvYy5jaXRpZXNfaWRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkoZG9jLmNpdGllc19pZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5jaXRpZXNfaWRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NlczogZG9jLmFkZHJlc3NlcyAmJiB0eXBlb2YgZG9jLmFkZHJlc3NlcyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEpTT04ucGFyc2UoZG9jLmFkZHJlc3NlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBBcnJheS5pc0FycmF5KGRvYy5hZGRyZXNzZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRvYy5hZGRyZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtTaXplID0gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGkgPCBib2R5Lmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGJvZHkuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGVzQ2xpZW50LmJ1bGsoeyBpbmRleDogXCJkb2N0b3JzXCIsIGJvZHk6IGNodW5rIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcmVkRG9jdW1lbnRzID0gcmVzcG9uc2UuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLmluZGV4ICYmIGl0ZW0uaW5kZXguZXJyb3I7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgXCIuY29uY2F0KGVycm9yZWREb2N1bWVudHMubGVuZ3RoLCBcIiBlcnJvcnMgb2NjdXJyZWQgaW4gYnVsayBpbnNlcnRcIiksIGVycm9yZWREb2N1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLinIUgRG9jdG9ycyBzeW5jZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gY2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICBjYXNlIDY6IFxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXNDbGllbnQuYnVsayh7IGluZGV4OiBcImRvY3RvcnNcIiwgYm9keSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlc0NsaWVudC5pbmRpY2VzLnJlZnJlc2goeyBpbmRleDogXCJkb2N0b3JzXCIgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlc0NsaWVudC5idWxrKHsgaW5kZXg6IFwiZG9jdG9yc1wiLCBib2R5IH0pO1xuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBTeW5jIGZhaWxlZDpcIiwgZXJyb3JfMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xuICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHNlYXJjaERvY3RvcnMocXVlcnkpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXNwb25zZSwgZXJyb3JfMjtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZXNDbGllbnQuc2VhcmNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogXCJkb2N0b3JzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aV9tYXRjaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBbXCJuYW1lXCIsIFwic3BlY2lhbHR5X25hbWVcIiwgXCJpbnN1cmFuY2VfbmFtZVwiLCBcImNpdHlcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG1hdGNoX3BocmFzZV9wcmVmaXg6IHsgbmFtZTogcXVlcnkgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbWF0Y2hfcGhyYXNlX3ByZWZpeDogeyBzcGVjaWFsdHlfbmFtZTogcXVlcnkgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbWF0Y2hfcGhyYXNlX3ByZWZpeDogeyBpbnN1cmFuY2VfbmFtZTogcXVlcnkgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbWF0Y2hfcGhyYXNlX3ByZWZpeDogeyBjaXR5OiBxdWVyeSB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bV9zaG91bGRfbWF0Y2g6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0OiBbeyBhdmVyYWdlX3JhdGluZzogXCJkZXNjXCIgfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbnNlLmhpdHMuaGl0cy5tYXAoZnVuY3Rpb24gKGhpdCkgeyByZXR1cm4gaGl0Ll9zb3VyY2U7IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3Igc2VhcmNoaW5nIGRvY3RvcnM6XCIsIGVycm9yXzIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlbW92ZURlbGV0ZURvY3RvcnNGcm9tRWxhc3RpY1NlYWNoKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlbGV0ZWREb2N0b3JzLCBib2R5LCByZXNwb25zZSwgZXJyb3JfMztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIG15c3FsXzEucXVlcnkpKFwiU0VMRUNUIGlkIEZST00gXCIuY29uY2F0KG15c3FsXzEuY29yZVNjaGVtYSwgXCIuZG9jdG9ycyBXSEVSRSBkZWxldGVkX2F0ID49IE5PVygpIC0gSU5URVJWQUwgMSBEQVk7XCIpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBkZWxldGVkRG9jdG9ycyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWREb2N0b3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLinIUgTm8gZGVsZXRlZCBkb2N0b3JzIHRvIHJlbW92ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBib2R5ID0gZGVsZXRlZERvY3RvcnMuZmxhdE1hcChmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGRlbGV0ZTogeyBfaW5kZXg6IFwiZG9jdG9yc1wiLCBfaWQ6IGRvYy5pZCB9IH0sXG4gICAgICAgICAgICAgICAgICAgIF07IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlc0NsaWVudC5idWxrKHsgYm9keTogYm9keSB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvcnMgb2NjdXJyZWQgaW4gYnVsayBkZWxldGU6XCIsIHJlc3BvbnNlLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIERlbGV0ZWQgZG9jdG9ycyByZW1vdmVkIGZyb20gRWxhc3RpY3NlYXJjaFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRGVsZXRpb24gc3luYyBmYWlsZWQ6XCIsIGVycm9yXzMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osSUFBSUEsU0FBUyxHQUFJLElBQUksSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBSyxVQUFVQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsQ0FBQyxFQUFFQyxTQUFTLEVBQUU7RUFDckYsU0FBU0MsS0FBS0EsQ0FBQ0MsS0FBSyxFQUFFO0lBQUUsT0FBT0EsS0FBSyxZQUFZSCxDQUFDLEdBQUdHLEtBQUssR0FBRyxJQUFJSCxDQUFDLENBQUMsVUFBVUksT0FBTyxFQUFFO01BQUVBLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDO0lBQUUsQ0FBQyxDQUFDO0VBQUU7RUFDM0csT0FBTyxLQUFLSCxDQUFDLEtBQUtBLENBQUMsR0FBR0ssT0FBTyxDQUFDLEVBQUUsVUFBVUQsT0FBTyxFQUFFRSxNQUFNLEVBQUU7SUFDdkQsU0FBU0MsU0FBU0EsQ0FBQ0osS0FBSyxFQUFFO01BQUUsSUFBSTtRQUFFSyxJQUFJLENBQUNQLFNBQVMsQ0FBQ1EsSUFBSSxDQUFDTixLQUFLLENB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","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","Object","create","Iterator","prototype","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","defineProperty","exports","syncDoctorsToElasticsearch","searchDoctors","removeDeleteDoctorsFromElasticSeach","elasticsearch_1","require","mysql_1","db_1","esClient","Client","node","process","env","ELASTICSEARCH_URL","auth","username","ELASTICSEARCH_USERNAME","password","ELASTICSEARCH_PASSWORD","doctors","rows","chunkSize","i","chunk","response","erroredDocuments","error_1","_a","getDoctorsFromElastic","name","city_id","service_id","specialty_id","insurance_id","minRating","maxRating","isPopular","console","log","query","concat","coreSchema","flatMap","doc","index","_id","id","profile_img","email","phone","specialty_name","insurance_name","click_count","medical_code","average_rating","total_reviews","avg_professional_demeanor","avg_sufficient_time","avg_skill","avg_staff_behavior","avg_clinic_condition","isLiked","user_suggestion_percentage","service_ids","JSON","parse","Array","isArray","cities_ids","addresses","slice","bulk","errors","items","filter","item","error","indices","refresh","error_2","search","size","bool","should","multi_match","fields","match_phrase_prefix","city","minimum_should_match","sort","hits","map","hit","_source","deletedDoctors","error_3","delete","_index"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\scripts\\","sources":["syncDoctors.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.syncDoctorsToElasticsearch = syncDoctorsToElasticsearch;\nexports.searchDoctors = searchDoctors;\nexports.removeDeleteDoctorsFromElasticSeach = removeDeleteDoctorsFromElasticSeach;\nvar elasticsearch_1 = require(\"@elastic/elasticsearch\");\nvar mysql_1 = require(\"../bin/mysql\");\nvar db_1 = require(\"../controller/doctors/db\");\nvar esClient = new elasticsearch_1.Client({\n    node: process.env.ELASTICSEARCH_URL,\n    auth: {\n        username: process.env.ELASTICSEARCH_USERNAME || \"elastic\",\n        password: process.env.ELASTICSEARCH_PASSWORD || \"@Ali0011914505\",\n    },\n});\nfunction syncDoctorsToElasticsearch() {\n    return __awaiter(this, void 0, void 0, function () {\n        var doctors, rows, body, chunkSize, i, chunk, response, erroredDocuments, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 8, , 9]);\n                    return [4 /*yield*/, (0, db_1.getDoctorsFromElastic)({\n                            name: \"John Doe\",\n                            city_id: \"1\",\n                            service_id: \"123\",\n                            specialty_id: \"456\",\n                            insurance_id: \"789\",\n                            minRating: 3,\n                            maxRating: 5,\n                            isPopular: true,\n                        })];\n                case 1:\n                    doctors = _a.sent();\n                    console.log(\"Doctors Found:\", doctors);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"\\n      SELECT \\n        d.id, d.first_name, d.last_name, d.profile_img, d.email, d.phone, \\n        CONCAT(d.first_name, ' ', d.last_name) AS name,\\n        d.specialty_id, d.insurance_id, d.click_count, d.medical_code,\\n        sp.name AS specialty_name,\\n        JSON_ARRAYAGG(ss.id) AS service_ids,\\n        JSON_ARRAYAGG(ci.id) AS cities_ids,\\n        i.name AS insurance_name,  \\n        COUNT(r.id) AS total_reviews,\\n        COALESCE(AVG(r.rating), 0) AS average_rating,\\n        COALESCE(AVG(r.professional_demeanor), 0) AS avg_professional_demeanor,\\n        COALESCE(AVG(r.sufficient_time), 0) AS avg_sufficient_time,\\n        COALESCE(AVG(r.skill), 0) AS avg_skill,\\n        COALESCE(AVG(r.staff_behavior), 0) AS avg_staff_behavior,\\n        COALESCE(AVG(r.clinic_condition), 0) AS avg_clinic_condition,\\n        d.updated_at,\\n        CASE \\n          WHEN EXISTS (SELECT 1 FROM \".concat(mysql_1.coreSchema, \".doctor_likes dl WHERE dl.doctor_id = d.id) \\n          THEN 1 ELSE 0\\n        END AS isLiked,\\n\\n        COALESCE(ROUND((SUM(CASE WHEN r.recommendations = 1 THEN 1 ELSE 0 END) / COUNT(r.id)) * 100, 2), 0) \\n        AS user_suggestion_percentage,\\n\\n        -- Properly formatted JSON array of addresses\\n        JSON_ARRAYAGG(\\n          JSON_OBJECT(\\n            'city_id', ci.id,\\n            'country', ld.country,\\n            'latitude', ld.latitude,\\n            'longitude', ld.longitude,\\n            'address_line1', ld.address_line1,\\n            'address_line2', ld.address_line2,\\n            'zipcode', ld.zipcode,\\n            'city', ci.name,\\n            'state', ci.state\\n          )\\n        ) AS addresses,\\n         MAX(ci.id) AS city_id \\n\\n      FROM \\n        \").concat(mysql_1.coreSchema, \".doctors d\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_locations ld ON d.id = ld.doctor_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".specialties sp ON d.specialty_id = sp.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".services ss ON sp.id = ss.specialty_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_reviews r ON d.id = r.doctor_id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".insurances i ON d.insurance_id = i.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".cities ci ON ld.city_id = ci.id\\n      LEFT JOIN \").concat(mysql_1.coreSchema, \".doctor_likes dk ON d.id = dk.doctor_id\\n      WHERE d.updated_at >= NOW() - INTERVAL 1 DAY\\n\\n      GROUP BY d.id\\n    \"))];\n                case 2:\n                    rows = _a.sent();\n                    if (rows.length === 0) {\n                        console.log(\" No doctors found in MySQL\");\n                        return [2 /*return*/];\n                    }\n                    body = rows.flatMap(function (doc) { return [\n                        { index: { _id: doc.id } },\n                        {\n                            id: doc.id,\n                            name: doc.name,\n                            profile_img: doc.profile_img,\n                            email: doc.email,\n                            phone: doc.phone,\n                            specialty_id: doc.specialty_id,\n                            insurance_id: doc.insurance_id,\n                            specialty_name: doc.specialty_name,\n                            insurance_name: doc.insurance_name,\n                            click_count: doc.click_count,\n                            medical_code: doc.medical_code,\n                            average_rating: doc.average_rating,\n                            total_reviews: doc.total_reviews,\n                            avg_professional_demeanor: doc.avg_professional_demeanor,\n                            avg_sufficient_time: doc.avg_sufficient_time,\n                            avg_skill: doc.avg_skill,\n                            avg_staff_behavior: doc.avg_staff_behavior,\n                            avg_clinic_condition: doc.avg_clinic_condition,\n                            isLiked: doc.isLiked,\n                            user_suggestion_percentage: doc.user_suggestion_percentage,\n                            service_ids: doc.service_id && typeof doc.service_ids === \"string\"\n                                ? JSON.parse(doc.service_ids)\n                                : Array.isArray(doc.service_ids)\n                                    ? doc.service_ids\n                                    : [],\n                            cities_ids: doc.city_id && typeof doc.cities_ids === \"string\"\n                                ? JSON.parse(doc.cities_ids)\n                                : Array.isArray(doc.cities_ids)\n                                    ? doc.cities_ids\n                                    : [],\n                            addresses: doc.addresses && typeof doc.addresses === \"string\"\n                                ? JSON.parse(doc.addresses)\n                                : Array.isArray(doc.addresses)\n                                    ? doc.addresses\n                                    : [],\n                        },\n                    ]; });\n                    chunkSize = 1000;\n                    i = 0;\n                    _a.label = 3;\n                case 3:\n                    if (!(i < body.length)) return [3 /*break*/, 6];\n                    chunk = body.slice(i, i + chunkSize);\n                    return [4 /*yield*/, esClient.bulk({ index: \"doctors\", body: chunk })];\n                case 4:\n                    response = _a.sent();\n                    if (response.errors) {\n                        erroredDocuments = response.items.filter(function (item) { return item.index && item.index.error; });\n                        console.error(\"\\u274C \".concat(erroredDocuments.length, \" errors occurred in bulk insert\"), erroredDocuments);\n                    }\n                    else {\n                        console.log(\" Doctors synced successfully\");\n                    }\n                    _a.label = 5;\n                case 5:\n                    i += chunkSize;\n                    return [3 /*break*/, 3];\n                case 6: \n                // const response = await esClient.bulk({ index: \"doctors\", body });\n                return [4 /*yield*/, esClient.indices.refresh({ index: \"doctors\" })];\n                case 7:\n                    // const response = await esClient.bulk({ index: \"doctors\", body });\n                    _a.sent();\n                    return [3 /*break*/, 9];\n                case 8:\n                    error_1 = _a.sent();\n                    console.error(\" Sync failed:\", error_1);\n                    return [3 /*break*/, 9];\n                case 9: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction searchDoctors(query) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, esClient.search({\n                            index: \"doctors\",\n                            size: 20,\n                            query: {\n                                bool: {\n                                    should: [\n                                        {\n                                            multi_match: {\n                                                query: query,\n                                                fields: [\"name\", \"specialty_name\", \"insurance_name\", \"city\"],\n                                            },\n                                        },\n                                        { match_phrase_prefix: { name: query } },\n                                        { match_phrase_prefix: { specialty_name: query } },\n                                        { match_phrase_prefix: { insurance_name: query } },\n                                        { match_phrase_prefix: { city: query } },\n                                    ],\n                                    minimum_should_match: 1,\n                                },\n                            },\n                            sort: [{ average_rating: \"desc\" }],\n                        })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.hits.hits.map(function (hit) { return hit._source; })];\n                case 2:\n                    error_2 = _a.sent();\n                    console.error(\" Error searching doctors:\", error_2);\n                    return [2 /*return*/, []];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction removeDeleteDoctorsFromElasticSeach() {\n    return __awaiter(this, void 0, void 0, function () {\n        var deletedDoctors, body, response, error_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 3, , 4]);\n                    return [4 /*yield*/, (0, mysql_1.query)(\"SELECT id FROM \".concat(mysql_1.coreSchema, \".doctors WHERE deleted_at >= NOW() - INTERVAL 1 DAY;\"))];\n                case 1:\n                    deletedDoctors = _a.sent();\n                    if (deletedDoctors.length === 0) {\n                        console.log(\" No deleted doctors to remove\");\n                        return [2 /*return*/];\n                    }\n                    body = deletedDoctors.flatMap(function (doc) { return [\n                        { delete: { _index: \"doctors\", _id: doc.id } },\n                    ]; });\n                    return [4 /*yield*/, esClient.bulk({ body: body })];\n                case 2:\n                    response = _a.sent();\n                    if (response.errors) {\n                        console.error(\" Errors occurred in bulk delete:\", response.items);\n                    }\n                    else {\n                        console.log(\" Deleted doctors removed from Elasticsearch\");\n                    }\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_3 = _a.sent();\n                    console.error(\" Deletion sync failed:\", error_3);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1742220888609},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"filename\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\\\\src\\\\scripts\\\\create-index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Ali\\\\Projects\\\\clinicall_ali\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDoctorsIndex = createDoctorsIndex;\nconst elasticsearch_1 = require(\"@elastic/elasticsearch\");\nconst esClient = new elasticsearch_1.Client({\n  node: \"http://localhost:9200\"\n});\nfunction createDoctorsIndex() {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const exists = yield esClient.indices.exists({\n        index: \"doctors\"\n      });\n      if (exists) {\n        console.log(\" Index 'doctors' already exists. Skipping creation.\");\n        return;\n      }\n      yield esClient.indices.create({\n        index: \"doctors\",\n        body: {\n          settings: {\n            number_of_shards: 1,\n            number_of_replicas: 1\n          },\n          mappings: {\n            properties: {\n              id: {\n                type: \"keyword\"\n              },\n              name: {\n                type: \"text\"\n              },\n              specialty_name: {\n                type: \"text\"\n              },\n              insurance_name: {\n                type: \"text\"\n              },\n              addresses: {\n                type: \"nested\"\n              },\n              average_rating: {\n                type: \"float\"\n              }\n            }\n          }\n        }\n      });\n      console.log(\" Index 'doctors' created successfully\");\n    } catch (error) {\n      console.error(\" Error creating index:\", error);\n    }\n  });\n}\ncreateDoctorsIndex();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiY3JlYXRlRG9jdG9yc0luZGV4IiwiZWxhc3RpY3NlYXJjaF8xIiwicmVxdWlyZSIsImVzQ2xpZW50IiwiQ2xpZW50Iiwibm9kZSIsImV4aXN0cyIsImluZGljZXMiLCJpbmRleCIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGUiLCJib2R5Iiwic2V0dGluZ3MiLCJudW1iZXJfb2Zfc2hhcmRzIiwibnVtYmVyX29mX3JlcGxpY2FzIiwibWFwcGluZ3MiLCJwcm9wZXJ0aWVzIiwiaWQiLCJ0eXBlIiwibmFtZSIsInNwZWNpYWx0eV9uYW1lIiwiaW5zdXJhbmNlX25hbWUiLCJhZGRyZXNzZXMiLCJhdmVyYWdlX3JhdGluZyIsImVycm9yIl0sInNvdXJjZVJvb3QiOiJEOlxcQWxpXFxQcm9qZWN0c1xcY2xpbmljYWxsX2FsaVxcc2VydmVyXFxzcmNcXHNjcmlwdHNcXCIsInNvdXJjZXMiOlsiRDovQWxpL1Byb2plY3RzL2NsaW5pY2FsbF9hbGkvc2VydmVyL3NyYy9zY3JpcHRzL2NyZWF0ZS1pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiQGVsYXN0aWMvZWxhc3RpY3NlYXJjaFwiO1xyXG5cclxuY29uc3QgZXNDbGllbnQgPSBuZXcgQ2xpZW50KHsgbm9kZTogXCJodHRwOi8vbG9jYWxob3N0OjkyMDBcIiB9KTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEb2N0b3JzSW5kZXgoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGVzQ2xpZW50LmluZGljZXMuZXhpc3RzKHsgaW5kZXg6IFwiZG9jdG9yc1wiIH0pO1xyXG5cclxuICAgIGlmIChleGlzdHMpIHtcclxuICAgICAgY29uc29sZS5sb2coXCLimqDvuI8gSW5kZXggJ2RvY3RvcnMnIGFscmVhZHkgZXhpc3RzLiBTa2lwcGluZyBjcmVhdGlvbi5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBlc0NsaWVudC5pbmRpY2VzLmNyZWF0ZSh7XHJcbiAgICAgIGluZGV4OiBcImRvY3RvcnNcIixcclxuICAgICAgYm9keToge1xyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBudW1iZXJfb2Zfc2hhcmRzOiAxLFxyXG4gICAgICAgICAgbnVtYmVyX29mX3JlcGxpY2FzOiAxLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWFwcGluZ3M6IHtcclxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAgICAgaWQ6IHsgdHlwZTogXCJrZXl3b3JkXCIgfSxcclxuICAgICAgICAgICAgbmFtZTogeyB0eXBlOiBcInRleHRcIiB9LFxyXG4gICAgICAgICAgICBzcGVjaWFsdHlfbmFtZTogeyB0eXBlOiBcInRleHRcIiB9LFxyXG4gICAgICAgICAgICBpbnN1cmFuY2VfbmFtZTogeyB0eXBlOiBcInRleHRcIiB9LFxyXG4gICAgICAgICAgICBhZGRyZXNzZXM6IHsgdHlwZTogXCJuZXN0ZWRcIiB9LFxyXG4gICAgICAgICAgICBhdmVyYWdlX3JhdGluZzogeyB0eXBlOiBcImZsb2F0XCIgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIEluZGV4ICdkb2N0b3JzJyBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBjcmVhdGluZyBpbmRleDpcIiwgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuY3JlYXRlRG9jdG9yc0luZGV4KCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQUEsT0FBQSxDQUFBQyxrQkFBQSxHQUFBQSxrQkFBQTtBQUpBLE1BQUFDLGVBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLFFBQVEsR0FBRyxJQUFJRixlQUFBLENBQUFHLE1BQU0sQ0FBQztFQUFFQyxJQUFJLEVBQUU7QUFBdUIsQ0FBRSxDQUFDO0FBRTlELFNBQXNCTCxrQkFBa0JBLENBQUE7O0lBQ3RDLElBQUk7TUFDRixNQUFNTSxNQUFNLEdBQUcsTUFBTUgsUUFBUSxDQUFDSSxPQUFPLENBQUNELE1BQU0sQ0FBQztRQUFFRSxLQUFLLEVBQUU7TUFBUyxDQUFFLENBQUM7TUFFbEUsSUFBSUYsTUFBTSxFQUFFO1FBQ1ZHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVEQUF1RCxDQUFDO1FBQ3BFO01BQ0Y7TUFFQSxNQUFNUCxRQUFRLENBQUNJLE9BQU8sQ0FBQ0ksTUFBTSxDQUFDO1FBQzVCSCxLQUFLLEVBQUUsU0FBUztRQUNoQkksSUFBSSxFQUFFO1VBQ0pDLFFBQVEsRUFBRTtZQUNSQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ25CQyxrQkFBa0IsRUFBRTtXQUNyQjtVQUNEQyxRQUFRLEVBQUU7WUFDUkMsVUFBVSxFQUFFO2NBQ1ZDLEVBQUUsRUFBRTtnQkFBRUMsSUFBSSxFQUFFO2NBQVMsQ0FBRTtjQUN2QkMsSUFBSSxFQUFFO2dCQUFFRCxJQUFJLEVBQUU7Y0FBTSxDQUFFO2NBQ3RCRSxjQUFjLEVBQUU7Z0JBQUVGLElBQUksRUFBRTtjQUFNLENBQUU7Y0FDaENHLGNBQWMsRUFBRTtnQkFBRUgsSUFBSSxFQUFFO2NBQU0sQ0FBRTtjQUNoQ0ksU0FBUyxFQUFFO2dCQUFFSixJQUFJLEVBQUU7Y0FBUSxDQUFFO2NBQzdCSyxjQUFjLEVBQUU7Z0JBQUVMLElBQUksRUFBRTtjQUFPOzs7O09BSXRDLENBQUM7TUFFRlYsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0NBQXdDLENBQUM7SUFDdkQsQ0FBQyxDQUFDLE9BQU9lLEtBQUssRUFBRTtNQUNkaEIsT0FBTyxDQUFDZ0IsS0FBSyxDQUFDLHlCQUF5QixFQUFFQSxLQUFLLENBQUM7SUFDakQ7RUFDRixDQUFDOztBQUVEekIsa0JBQWtCLEVBQUUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["exports","createDoctorsIndex","elasticsearch_1","require","esClient","Client","node","exists","indices","index","console","log","create","body","settings","number_of_shards","number_of_replicas","mappings","properties","id","type","name","specialty_name","insurance_name","addresses","average_rating","error"],"sourceRoot":"D:\\Ali\\Projects\\clinicall_ali\\server\\src\\scripts\\","sources":["D:/Ali/Projects/clinicall_ali/server/src/scripts/create-index.ts"],"sourcesContent":["import { Client } from \"@elastic/elasticsearch\";\r\n\r\nconst esClient = new Client({ node: \"http://localhost:9200\" });\r\n\r\nexport async function createDoctorsIndex() {\r\n  try {\r\n    const exists = await esClient.indices.exists({ index: \"doctors\" });\r\n\r\n    if (exists) {\r\n      console.log(\" Index 'doctors' already exists. Skipping creation.\");\r\n      return;\r\n    }\r\n\r\n    await esClient.indices.create({\r\n      index: \"doctors\",\r\n      body: {\r\n        settings: {\r\n          number_of_shards: 1,\r\n          number_of_replicas: 1,\r\n        },\r\n        mappings: {\r\n          properties: {\r\n            id: { type: \"keyword\" },\r\n            name: { type: \"text\" },\r\n            specialty_name: { type: \"text\" },\r\n            insurance_name: { type: \"text\" },\r\n            addresses: { type: \"nested\" },\r\n            average_rating: { type: \"float\" },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    console.log(\" Index 'doctors' created successfully\");\r\n  } catch (error) {\r\n    console.error(\" Error creating index:\", error);\r\n  }\r\n}\r\n\r\ncreateDoctorsIndex();\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIAA,OAAA,CAAAC,kBAAA,GAAAA,kBAAA;AAJA,MAAAC,eAAA,GAAAC,OAAA;AAEA,MAAMC,QAAQ,GAAG,IAAIF,eAAA,CAAAG,MAAM,CAAC;EAAEC,IAAI,EAAE;AAAuB,CAAE,CAAC;AAE9D,SAAsBL,kBAAkBA,CAAA;;IACtC,IAAI;MACF,MAAMM,MAAM,GAAG,MAAMH,QAAQ,CAACI,OAAO,CAACD,MAAM,CAAC;QAAEE,KAAK,EAAE;MAAS,CAAE,CAAC;MAElE,IAAIF,MAAM,EAAE;QACVG,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;QACpE;MACF;MAEA,MAAMP,QAAQ,CAACI,OAAO,CAACI,MAAM,CAAC;QAC5BH,KAAK,EAAE,SAAS;QAChBI,IAAI,EAAE;UACJC,QAAQ,EAAE;YACRC,gBAAgB,EAAE,CAAC;YACnBC,kBAAkB,EAAE;WACrB;UACDC,QAAQ,EAAE;YACRC,UAAU,EAAE;cACVC,EAAE,EAAE;gBAAEC,IAAI,EAAE;cAAS,CAAE;cACvBC,IAAI,EAAE;gBAAED,IAAI,EAAE;cAAM,CAAE;cACtBE,cAAc,EAAE;gBAAEF,IAAI,EAAE;cAAM,CAAE;cAChCG,cAAc,EAAE;gBAAEH,IAAI,EAAE;cAAM,CAAE;cAChCI,SAAS,EAAE;gBAAEJ,IAAI,EAAE;cAAQ,CAAE;cAC7BK,cAAc,EAAE;gBAAEL,IAAI,EAAE;cAAO;;;;OAItC,CAAC;MAEFV,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;IACvD,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdhB,OAAO,CAACgB,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC;;AAEDzB,kBAAkB,EAAE","ignoreList":[]}},"mtime":1742253403080}}